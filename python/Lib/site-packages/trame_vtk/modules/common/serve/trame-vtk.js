(function(Xt,ce){typeof exports=="object"&&typeof module<"u"?ce(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],ce):(Xt=typeof globalThis<"u"?globalThis:Xt||self,ce(Xt.vue_vtk={},Xt.Vue))})(this,function(Xt,ce){"use strict";var Ie=1e-6,gt=typeof Float32Array<"u"?Float32Array:Array,Zu=Math.random,o2=Math.PI/180;function s2(t){return t*o2}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Qu(){var t=new gt(9);return gt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function va(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function u2(t){var e=new gt(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function c2(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function f2(t,e,n,r,a,i,o,s,c){var u=new gt(9);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=a,u[5]=i,u[6]=o,u[7]=s,u[8]=c,u}function l2(t,e,n,r,a,i,o,s,c,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=o,t[6]=s,t[7]=c,t[8]=u,t}function sr(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function as(t,e){if(t===e){var n=e[1],r=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function ga(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],c=e[6],u=e[7],f=e[8],l=f*o-s*u,p=-f*i+s*c,h=u*i-o*c,v=n*l+r*p+a*h;return v?(v=1/v,t[0]=l*v,t[1]=(-f*r+a*u)*v,t[2]=(s*r-a*o)*v,t[3]=p*v,t[4]=(f*n-a*c)*v,t[5]=(-s*n+a*i)*v,t[6]=h*v,t[7]=(-u*n+r*c)*v,t[8]=(o*n-r*i)*v,t):null}function p2(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],c=e[6],u=e[7],f=e[8];return t[0]=o*f-s*u,t[1]=a*u-r*f,t[2]=r*s-a*o,t[3]=s*c-i*f,t[4]=n*f-a*c,t[5]=a*i-n*s,t[6]=i*u-o*c,t[7]=r*c-n*u,t[8]=n*o-r*i,t}function h2(t){var e=t[0],n=t[1],r=t[2],a=t[3],i=t[4],o=t[5],s=t[6],c=t[7],u=t[8];return e*(u*i-o*c)+n*(-u*a+o*s)+r*(c*a-i*s)}function kn(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],c=e[5],u=e[6],f=e[7],l=e[8],p=n[0],h=n[1],v=n[2],y=n[3],m=n[4],x=n[5],g=n[6],d=n[7],C=n[8];return t[0]=p*r+h*o+v*u,t[1]=p*a+h*s+v*f,t[2]=p*i+h*c+v*l,t[3]=y*r+m*o+x*u,t[4]=y*a+m*s+x*f,t[5]=y*i+m*c+x*l,t[6]=g*r+d*o+C*u,t[7]=g*a+d*s+C*f,t[8]=g*i+d*c+C*l,t}function v2(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],c=e[5],u=e[6],f=e[7],l=e[8],p=n[0],h=n[1];return t[0]=r,t[1]=a,t[2]=i,t[3]=o,t[4]=s,t[5]=c,t[6]=p*r+h*o+u,t[7]=p*a+h*s+f,t[8]=p*i+h*c+l,t}function g2(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],c=e[5],u=e[6],f=e[7],l=e[8],p=Math.sin(n),h=Math.cos(n);return t[0]=h*r+p*o,t[1]=h*a+p*s,t[2]=h*i+p*c,t[3]=h*o-p*r,t[4]=h*s-p*a,t[5]=h*c-p*i,t[6]=u,t[7]=f,t[8]=l,t}function d2(t,e,n){var r=n[0],a=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function y2(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function m2(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function x2(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function C2(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function S2(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=n+n,s=r+r,c=a+a,u=n*o,f=r*o,l=r*s,p=a*o,h=a*s,v=a*c,y=i*o,m=i*s,x=i*c;return t[0]=1-l-v,t[3]=f-x,t[6]=p+m,t[1]=f+x,t[4]=1-u-v,t[7]=h-y,t[2]=p-m,t[5]=h+y,t[8]=1-u-l,t}function T2(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],c=e[6],u=e[7],f=e[8],l=e[9],p=e[10],h=e[11],v=e[12],y=e[13],m=e[14],x=e[15],g=n*s-r*o,d=n*c-a*o,C=n*u-i*o,S=r*c-a*s,T=r*u-i*s,w=a*u-i*c,E=f*y-l*v,D=f*m-p*v,b=f*x-h*v,O=l*m-p*y,M=l*x-h*y,R=p*x-h*m,N=g*R-d*M+C*O+S*b-T*D+w*E;return N?(N=1/N,t[0]=(s*R-c*M+u*O)*N,t[1]=(c*b-o*R-u*D)*N,t[2]=(o*M-s*b+u*E)*N,t[3]=(a*M-r*R-i*O)*N,t[4]=(n*R-a*b+i*D)*N,t[5]=(r*b-n*M-i*E)*N,t[6]=(y*w-m*T+x*S)*N,t[7]=(m*C-v*w-x*d)*N,t[8]=(v*T-y*C+x*g)*N,t):null}function w2(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function E2(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function D2(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function O2(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function ec(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function _2(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function b2(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function M2(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function N2(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],c=t[6],u=t[7],f=t[8],l=e[0],p=e[1],h=e[2],v=e[3],y=e[4],m=e[5],x=e[6],g=e[7],d=e[8];return Math.abs(n-l)<=Ie*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-p)<=Ie*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(a-h)<=Ie*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-v)<=Ie*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(o-y)<=Ie*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(s-m)<=Ie*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(c-x)<=Ie*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(u-g)<=Ie*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(f-d)<=Ie*Math.max(1,Math.abs(f),Math.abs(d))}var R2=kn,L2=ec;const k2=Object.freeze(Object.defineProperty({__proto__:null,add:O2,adjoint:p2,clone:u2,copy:c2,create:Qu,determinant:h2,equals:N2,exactEquals:M2,frob:D2,fromMat2d:C2,fromMat4:va,fromQuat:S2,fromRotation:m2,fromScaling:x2,fromTranslation:y2,fromValues:f2,identity:sr,invert:ga,mul:R2,multiply:kn,multiplyScalar:_2,multiplyScalarAndAdd:b2,normalFromMat4:T2,projection:w2,rotate:g2,scale:d2,set:l2,str:E2,sub:L2,subtract:ec,translate:v2,transpose:as},Symbol.toStringTag,{value:"Module"}));function is(){var t=new gt(16);return gt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function F2(t){var e=new gt(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function St(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function A2(t,e,n,r,a,i,o,s,c,u,f,l,p,h,v,y){var m=new gt(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=r,m[4]=a,m[5]=i,m[6]=o,m[7]=s,m[8]=c,m[9]=u,m[10]=f,m[11]=l,m[12]=p,m[13]=h,m[14]=v,m[15]=y,m}function V2(t,e,n,r,a,i,o,s,c,u,f,l,p,h,v,y,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=o,t[6]=s,t[7]=c,t[8]=u,t[9]=f,t[10]=l,t[11]=p,t[12]=h,t[13]=v,t[14]=y,t[15]=m,t}function Oe(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function We(t,e){if(t===e){var n=e[1],r=e[2],a=e[3],i=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=a,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Ft(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],c=e[6],u=e[7],f=e[8],l=e[9],p=e[10],h=e[11],v=e[12],y=e[13],m=e[14],x=e[15],g=n*s-r*o,d=n*c-a*o,C=n*u-i*o,S=r*c-a*s,T=r*u-i*s,w=a*u-i*c,E=f*y-l*v,D=f*m-p*v,b=f*x-h*v,O=l*m-p*y,M=l*x-h*y,R=p*x-h*m,N=g*R-d*M+C*O+S*b-T*D+w*E;return N?(N=1/N,t[0]=(s*R-c*M+u*O)*N,t[1]=(a*M-r*R-i*O)*N,t[2]=(y*w-m*T+x*S)*N,t[3]=(p*T-l*w-h*S)*N,t[4]=(c*b-o*R-u*D)*N,t[5]=(n*R-a*b+i*D)*N,t[6]=(m*C-v*w-x*d)*N,t[7]=(f*w-p*C+h*d)*N,t[8]=(o*M-s*b+u*E)*N,t[9]=(r*b-n*M-i*E)*N,t[10]=(v*T-y*C+x*g)*N,t[11]=(l*C-f*T-h*g)*N,t[12]=(s*D-o*O-c*E)*N,t[13]=(n*O-r*D+a*E)*N,t[14]=(y*d-v*S-m*g)*N,t[15]=(f*S-l*d+p*g)*N,t):null}function B2(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],c=e[6],u=e[7],f=e[8],l=e[9],p=e[10],h=e[11],v=e[12],y=e[13],m=e[14],x=e[15];return t[0]=s*(p*x-h*m)-l*(c*x-u*m)+y*(c*h-u*p),t[1]=-(r*(p*x-h*m)-l*(a*x-i*m)+y*(a*h-i*p)),t[2]=r*(c*x-u*m)-s*(a*x-i*m)+y*(a*u-i*c),t[3]=-(r*(c*h-u*p)-s*(a*h-i*p)+l*(a*u-i*c)),t[4]=-(o*(p*x-h*m)-f*(c*x-u*m)+v*(c*h-u*p)),t[5]=n*(p*x-h*m)-f*(a*x-i*m)+v*(a*h-i*p),t[6]=-(n*(c*x-u*m)-o*(a*x-i*m)+v*(a*u-i*c)),t[7]=n*(c*h-u*p)-o*(a*h-i*p)+f*(a*u-i*c),t[8]=o*(l*x-h*y)-f*(s*x-u*y)+v*(s*h-u*l),t[9]=-(n*(l*x-h*y)-f*(r*x-i*y)+v*(r*h-i*l)),t[10]=n*(s*x-u*y)-o*(r*x-i*y)+v*(r*u-i*s),t[11]=-(n*(s*h-u*l)-o*(r*h-i*l)+f*(r*u-i*s)),t[12]=-(o*(l*m-p*y)-f*(s*m-c*y)+v*(s*p-c*l)),t[13]=n*(l*m-p*y)-f*(r*m-a*y)+v*(r*p-a*l),t[14]=-(n*(s*m-c*y)-o*(r*m-a*y)+v*(r*c-a*s)),t[15]=n*(s*p-c*l)-o*(r*p-a*l)+f*(r*c-a*s),t}function U2(t){var e=t[0],n=t[1],r=t[2],a=t[3],i=t[4],o=t[5],s=t[6],c=t[7],u=t[8],f=t[9],l=t[10],p=t[11],h=t[12],v=t[13],y=t[14],m=t[15],x=e*o-n*i,g=e*s-r*i,d=e*c-a*i,C=n*s-r*o,S=n*c-a*o,T=r*c-a*s,w=u*v-f*h,E=u*y-l*h,D=u*m-p*h,b=f*y-l*v,O=f*m-p*v,M=l*m-p*y;return x*M-g*O+d*b+C*D-S*E+T*w}function Ke(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],c=e[5],u=e[6],f=e[7],l=e[8],p=e[9],h=e[10],v=e[11],y=e[12],m=e[13],x=e[14],g=e[15],d=n[0],C=n[1],S=n[2],T=n[3];return t[0]=d*r+C*s+S*l+T*y,t[1]=d*a+C*c+S*p+T*m,t[2]=d*i+C*u+S*h+T*x,t[3]=d*o+C*f+S*v+T*g,d=n[4],C=n[5],S=n[6],T=n[7],t[4]=d*r+C*s+S*l+T*y,t[5]=d*a+C*c+S*p+T*m,t[6]=d*i+C*u+S*h+T*x,t[7]=d*o+C*f+S*v+T*g,d=n[8],C=n[9],S=n[10],T=n[11],t[8]=d*r+C*s+S*l+T*y,t[9]=d*a+C*c+S*p+T*m,t[10]=d*i+C*u+S*h+T*x,t[11]=d*o+C*f+S*v+T*g,d=n[12],C=n[13],S=n[14],T=n[15],t[12]=d*r+C*s+S*l+T*y,t[13]=d*a+C*c+S*p+T*m,t[14]=d*i+C*u+S*h+T*x,t[15]=d*o+C*f+S*v+T*g,t}function rt(t,e,n){var r=n[0],a=n[1],i=n[2],o,s,c,u,f,l,p,h,v,y,m,x;return e===t?(t[12]=e[0]*r+e[4]*a+e[8]*i+e[12],t[13]=e[1]*r+e[5]*a+e[9]*i+e[13],t[14]=e[2]*r+e[6]*a+e[10]*i+e[14],t[15]=e[3]*r+e[7]*a+e[11]*i+e[15]):(o=e[0],s=e[1],c=e[2],u=e[3],f=e[4],l=e[5],p=e[6],h=e[7],v=e[8],y=e[9],m=e[10],x=e[11],t[0]=o,t[1]=s,t[2]=c,t[3]=u,t[4]=f,t[5]=l,t[6]=p,t[7]=h,t[8]=v,t[9]=y,t[10]=m,t[11]=x,t[12]=o*r+f*a+v*i+e[12],t[13]=s*r+l*a+y*i+e[13],t[14]=c*r+p*a+m*i+e[14],t[15]=u*r+h*a+x*i+e[15]),t}function Xr(t,e,n){var r=n[0],a=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Tt(t,e,n,r){var a=r[0],i=r[1],o=r[2],s=Math.hypot(a,i,o),c,u,f,l,p,h,v,y,m,x,g,d,C,S,T,w,E,D,b,O,M,R,N,U;return s<Ie?null:(s=1/s,a*=s,i*=s,o*=s,c=Math.sin(n),u=Math.cos(n),f=1-u,l=e[0],p=e[1],h=e[2],v=e[3],y=e[4],m=e[5],x=e[6],g=e[7],d=e[8],C=e[9],S=e[10],T=e[11],w=a*a*f+u,E=i*a*f+o*c,D=o*a*f-i*c,b=a*i*f-o*c,O=i*i*f+u,M=o*i*f+a*c,R=a*o*f+i*c,N=i*o*f-a*c,U=o*o*f+u,t[0]=l*w+y*E+d*D,t[1]=p*w+m*E+C*D,t[2]=h*w+x*E+S*D,t[3]=v*w+g*E+T*D,t[4]=l*b+y*O+d*M,t[5]=p*b+m*O+C*M,t[6]=h*b+x*O+S*M,t[7]=v*b+g*O+T*M,t[8]=l*R+y*N+d*U,t[9]=p*R+m*N+C*U,t[10]=h*R+x*N+S*U,t[11]=v*R+g*N+T*U,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function mi(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[4],o=e[5],s=e[6],c=e[7],u=e[8],f=e[9],l=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*a+u*r,t[5]=o*a+f*r,t[6]=s*a+l*r,t[7]=c*a+p*r,t[8]=u*a-i*r,t[9]=f*a-o*r,t[10]=l*a-s*r,t[11]=p*a-c*r,t}function da(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[0],o=e[1],s=e[2],c=e[3],u=e[8],f=e[9],l=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a-u*r,t[1]=o*a-f*r,t[2]=s*a-l*r,t[3]=c*a-p*r,t[8]=i*r+u*a,t[9]=o*r+f*a,t[10]=s*r+l*a,t[11]=c*r+p*a,t}function xi(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[0],o=e[1],s=e[2],c=e[3],u=e[4],f=e[5],l=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a+u*r,t[1]=o*a+f*r,t[2]=s*a+l*r,t[3]=c*a+p*r,t[4]=u*a-i*r,t[5]=f*a-o*r,t[6]=l*a-s*r,t[7]=p*a-c*r,t}function tc(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function os(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function rc(t,e,n){var r=n[0],a=n[1],i=n[2],o=Math.hypot(r,a,i),s,c,u;return o<Ie?null:(o=1/o,r*=o,a*=o,i*=o,s=Math.sin(e),c=Math.cos(e),u=1-c,t[0]=r*r*u+c,t[1]=a*r*u+i*s,t[2]=i*r*u-a*s,t[3]=0,t[4]=r*a*u-i*s,t[5]=a*a*u+c,t[6]=i*a*u+r*s,t[7]=0,t[8]=r*i*u+a*s,t[9]=a*i*u-r*s,t[10]=i*i*u+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function G2(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function P2(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I2(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function nc(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=r+r,c=a+a,u=i+i,f=r*s,l=r*c,p=r*u,h=a*c,v=a*u,y=i*u,m=o*s,x=o*c,g=o*u;return t[0]=1-(h+y),t[1]=l+g,t[2]=p-x,t[3]=0,t[4]=l-g,t[5]=1-(f+y),t[6]=v+m,t[7]=0,t[8]=p+x,t[9]=v-m,t[10]=1-(f+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function j2(t,e){var n=new gt(3),r=-e[0],a=-e[1],i=-e[2],o=e[3],s=e[4],c=e[5],u=e[6],f=e[7],l=r*r+a*a+i*i+o*o;return l>0?(n[0]=(s*o+f*r+c*i-u*a)*2/l,n[1]=(c*o+f*a+u*r-s*i)*2/l,n[2]=(u*o+f*i+s*a-c*r)*2/l):(n[0]=(s*o+f*r+c*i-u*a)*2,n[1]=(c*o+f*a+u*r-s*i)*2,n[2]=(u*o+f*i+s*a-c*r)*2),nc(t,e,n),t}function z2(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function ac(t,e){var n=e[0],r=e[1],a=e[2],i=e[4],o=e[5],s=e[6],c=e[8],u=e[9],f=e[10];return t[0]=Math.hypot(n,r,a),t[1]=Math.hypot(i,o,s),t[2]=Math.hypot(c,u,f),t}function ic(t,e){var n=new gt(3);ac(n,e);var r=1/n[0],a=1/n[1],i=1/n[2],o=e[0]*r,s=e[1]*a,c=e[2]*i,u=e[4]*r,f=e[5]*a,l=e[6]*i,p=e[8]*r,h=e[9]*a,v=e[10]*i,y=o+f+v,m=0;return y>0?(m=Math.sqrt(y+1)*2,t[3]=.25*m,t[0]=(l-h)/m,t[1]=(p-c)/m,t[2]=(s-u)/m):o>f&&o>v?(m=Math.sqrt(1+o-f-v)*2,t[3]=(l-h)/m,t[0]=.25*m,t[1]=(s+u)/m,t[2]=(p+c)/m):f>v?(m=Math.sqrt(1+f-o-v)*2,t[3]=(p-c)/m,t[0]=(s+u)/m,t[1]=.25*m,t[2]=(l+h)/m):(m=Math.sqrt(1+v-o-f)*2,t[3]=(s-u)/m,t[0]=(p+c)/m,t[1]=(l+h)/m,t[2]=.25*m),t}function ss(t,e,n,r){var a=e[0],i=e[1],o=e[2],s=e[3],c=a+a,u=i+i,f=o+o,l=a*c,p=a*u,h=a*f,v=i*u,y=i*f,m=o*f,x=s*c,g=s*u,d=s*f,C=r[0],S=r[1],T=r[2];return t[0]=(1-(v+m))*C,t[1]=(p+d)*C,t[2]=(h-g)*C,t[3]=0,t[4]=(p-d)*S,t[5]=(1-(l+m))*S,t[6]=(y+x)*S,t[7]=0,t[8]=(h+g)*T,t[9]=(y-x)*T,t[10]=(1-(l+v))*T,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function W2(t,e,n,r,a){var i=e[0],o=e[1],s=e[2],c=e[3],u=i+i,f=o+o,l=s+s,p=i*u,h=i*f,v=i*l,y=o*f,m=o*l,x=s*l,g=c*u,d=c*f,C=c*l,S=r[0],T=r[1],w=r[2],E=a[0],D=a[1],b=a[2],O=(1-(y+x))*S,M=(h+C)*S,R=(v-d)*S,N=(h-C)*T,U=(1-(p+x))*T,W=(m+g)*T,I=(v+d)*w,G=(m-g)*w,F=(1-(p+y))*w;return t[0]=O,t[1]=M,t[2]=R,t[3]=0,t[4]=N,t[5]=U,t[6]=W,t[7]=0,t[8]=I,t[9]=G,t[10]=F,t[11]=0,t[12]=n[0]+E-(O*E+N*D+I*b),t[13]=n[1]+D-(M*E+U*D+G*b),t[14]=n[2]+b-(R*E+W*D+F*b),t[15]=1,t}function us(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=n+n,s=r+r,c=a+a,u=n*o,f=r*o,l=r*s,p=a*o,h=a*s,v=a*c,y=i*o,m=i*s,x=i*c;return t[0]=1-l-v,t[1]=f+x,t[2]=p-m,t[3]=0,t[4]=f-x,t[5]=1-u-v,t[6]=h+y,t[7]=0,t[8]=p+m,t[9]=h-y,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function H2(t,e,n,r,a,i,o){var s=1/(n-e),c=1/(a-r),u=1/(i-o);return t[0]=i*2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i*2*c,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(a+r)*c,t[10]=(o+i)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i*2*u,t[15]=0,t}function oc(t,e,n,r,a){var i=1/Math.tan(e/2),o;return t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,a!=null&&a!==1/0?(o=1/(r-a),t[10]=(a+r)*o,t[14]=2*a*r*o):(t[10]=-1,t[14]=-2*r),t}var $2=oc;function K2(t,e,n,r,a){var i=1/Math.tan(e/2),o;return t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,a!=null&&a!==1/0?(o=1/(r-a),t[10]=a*o,t[14]=a*r*o):(t[10]=-1,t[14]=-r),t}function X2(t,e,n,r){var a=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),c=2/(o+s),u=2/(a+i);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-((o-s)*c*.5),t[9]=(a-i)*u*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function sc(t,e,n,r,a,i,o){var s=1/(e-n),c=1/(r-a),u=1/(i-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(a+r)*c,t[14]=(o+i)*u,t[15]=1,t}var uc=sc;function q2(t,e,n,r,a,i,o){var s=1/(e-n),c=1/(r-a),u=1/(i-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=u,t[11]=0,t[12]=(e+n)*s,t[13]=(a+r)*c,t[14]=i*u,t[15]=1,t}function cc(t,e,n,r){var a,i,o,s,c,u,f,l,p,h,v=e[0],y=e[1],m=e[2],x=r[0],g=r[1],d=r[2],C=n[0],S=n[1],T=n[2];return Math.abs(v-C)<Ie&&Math.abs(y-S)<Ie&&Math.abs(m-T)<Ie?Oe(t):(f=v-C,l=y-S,p=m-T,h=1/Math.hypot(f,l,p),f*=h,l*=h,p*=h,a=g*p-d*l,i=d*f-x*p,o=x*l-g*f,h=Math.hypot(a,i,o),h?(h=1/h,a*=h,i*=h,o*=h):(a=0,i=0,o=0),s=l*o-p*i,c=p*a-f*o,u=f*i-l*a,h=Math.hypot(s,c,u),h?(h=1/h,s*=h,c*=h,u*=h):(s=0,c=0,u=0),t[0]=a,t[1]=s,t[2]=f,t[3]=0,t[4]=i,t[5]=c,t[6]=l,t[7]=0,t[8]=o,t[9]=u,t[10]=p,t[11]=0,t[12]=-(a*v+i*y+o*m),t[13]=-(s*v+c*y+u*m),t[14]=-(f*v+l*y+p*m),t[15]=1,t)}function Y2(t,e,n,r){var a=e[0],i=e[1],o=e[2],s=r[0],c=r[1],u=r[2],f=a-n[0],l=i-n[1],p=o-n[2],h=f*f+l*l+p*p;h>0&&(h=1/Math.sqrt(h),f*=h,l*=h,p*=h);var v=c*p-u*l,y=u*f-s*p,m=s*l-c*f;return h=v*v+y*y+m*m,h>0&&(h=1/Math.sqrt(h),v*=h,y*=h,m*=h),t[0]=v,t[1]=y,t[2]=m,t[3]=0,t[4]=l*m-p*y,t[5]=p*v-f*m,t[6]=f*y-l*v,t[7]=0,t[8]=f,t[9]=l,t[10]=p,t[11]=0,t[12]=a,t[13]=i,t[14]=o,t[15]=1,t}function J2(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Z2(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Q2(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function fc(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function ed(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function td(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function rd(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function nd(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],c=t[6],u=t[7],f=t[8],l=t[9],p=t[10],h=t[11],v=t[12],y=t[13],m=t[14],x=t[15],g=e[0],d=e[1],C=e[2],S=e[3],T=e[4],w=e[5],E=e[6],D=e[7],b=e[8],O=e[9],M=e[10],R=e[11],N=e[12],U=e[13],W=e[14],I=e[15];return Math.abs(n-g)<=Ie*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-d)<=Ie*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(a-C)<=Ie*Math.max(1,Math.abs(a),Math.abs(C))&&Math.abs(i-S)<=Ie*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(o-T)<=Ie*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(s-w)<=Ie*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(c-E)<=Ie*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(u-D)<=Ie*Math.max(1,Math.abs(u),Math.abs(D))&&Math.abs(f-b)<=Ie*Math.max(1,Math.abs(f),Math.abs(b))&&Math.abs(l-O)<=Ie*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(p-M)<=Ie*Math.max(1,Math.abs(p),Math.abs(M))&&Math.abs(h-R)<=Ie*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(v-N)<=Ie*Math.max(1,Math.abs(v),Math.abs(N))&&Math.abs(y-U)<=Ie*Math.max(1,Math.abs(y),Math.abs(U))&&Math.abs(m-W)<=Ie*Math.max(1,Math.abs(m),Math.abs(W))&&Math.abs(x-I)<=Ie*Math.max(1,Math.abs(x),Math.abs(I))}var lc=Ke,ad=fc;const ya=Object.freeze(Object.defineProperty({__proto__:null,add:Q2,adjoint:B2,clone:F2,copy:St,create:is,determinant:U2,equals:nd,exactEquals:rd,frob:Z2,fromQuat:us,fromQuat2:j2,fromRotation:rc,fromRotationTranslation:nc,fromRotationTranslationScale:ss,fromRotationTranslationScaleOrigin:W2,fromScaling:os,fromTranslation:tc,fromValues:A2,fromXRotation:G2,fromYRotation:P2,fromZRotation:I2,frustum:H2,getRotation:ic,getScaling:ac,getTranslation:z2,identity:Oe,invert:Ft,lookAt:cc,mul:lc,multiply:Ke,multiplyScalar:ed,multiplyScalarAndAdd:td,ortho:uc,orthoNO:sc,orthoZO:q2,perspective:$2,perspectiveFromFieldOfView:X2,perspectiveNO:oc,perspectiveZO:K2,rotate:Tt,rotateX:mi,rotateY:da,rotateZ:xi,scale:Xr,set:V2,str:J2,sub:ad,subtract:fc,targetTo:Y2,translate:rt,transpose:We},Symbol.toStringTag,{value:"Module"}));function cs(){var t=new gt(3);return gt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function id(t){var e=new gt(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function qr(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function fs(t,e,n){var r=new gt(3);return r[0]=t,r[1]=e,r[2]=n,r}function pc(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Xe(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function ma(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function gr(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function hc(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function ls(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function od(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function sd(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function ud(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function cd(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function fd(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function dr(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function ld(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function vc(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.hypot(n,r,a)}function gc(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a}function dc(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function yc(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function ps(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function It(t,e){var n=e[0],r=e[1],a=e[2],i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function Yr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Jr(t,e,n){var r=e[0],a=e[1],i=e[2],o=n[0],s=n[1],c=n[2];return t[0]=a*c-i*s,t[1]=i*o-r*c,t[2]=r*s-a*o,t}function pd(t,e,n,r){var a=e[0],i=e[1],o=e[2];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t[2]=o+r*(n[2]-o),t}function hd(t,e,n,r,a,i){var o=i*i,s=o*(2*i-3)+1,c=o*(i-2)+i,u=o*(i-1),f=o*(3-2*i);return t[0]=e[0]*s+n[0]*c+r[0]*u+a[0]*f,t[1]=e[1]*s+n[1]*c+r[1]*u+a[1]*f,t[2]=e[2]*s+n[2]*c+r[2]*u+a[2]*f,t}function vd(t,e,n,r,a,i){var o=1-i,s=o*o,c=i*i,u=s*o,f=3*i*s,l=3*c*o,p=c*i;return t[0]=e[0]*u+n[0]*f+r[0]*l+a[0]*p,t[1]=e[1]*u+n[1]*f+r[1]*l+a[1]*p,t[2]=e[2]*u+n[2]*f+r[2]*l+a[2]*p,t}function gd(t,e){e=e||1;var n=Zu()*2*Math.PI,r=Zu()*2-1,a=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=r*e,t}function be(t,e,n){var r=e[0],a=e[1],i=e[2],o=n[3]*r+n[7]*a+n[11]*i+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*a+n[8]*i+n[12])/o,t[1]=(n[1]*r+n[5]*a+n[9]*i+n[13])/o,t[2]=(n[2]*r+n[6]*a+n[10]*i+n[14])/o,t}function Ci(t,e,n){var r=e[0],a=e[1],i=e[2];return t[0]=r*n[0]+a*n[3]+i*n[6],t[1]=r*n[1]+a*n[4]+i*n[7],t[2]=r*n[2]+a*n[5]+i*n[8],t}function dd(t,e,n){var r=n[0],a=n[1],i=n[2],o=n[3],s=e[0],c=e[1],u=e[2],f=a*u-i*c,l=i*s-r*u,p=r*c-a*s,h=a*p-i*l,v=i*f-r*p,y=r*l-a*f,m=o*2;return f*=m,l*=m,p*=m,h*=2,v*=2,y*=2,t[0]=s+f+h,t[1]=c+l+v,t[2]=u+p+y,t}function yd(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0],i[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),i[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function md(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),i[1]=a[1],i[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function xd(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),i[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),i[2]=a[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Cd(t,e){var n=t[0],r=t[1],a=t[2],i=e[0],o=e[1],s=e[2],c=Math.sqrt(n*n+r*r+a*a),u=Math.sqrt(i*i+o*o+s*s),f=c*u,l=f&&Yr(t,e)/f;return Math.acos(Math.min(Math.max(l,-1),1))}function mc(t){return t[0]=0,t[1]=0,t[2]=0,t}function Sd(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Fn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function hs(t,e){var n=t[0],r=t[1],a=t[2],i=e[0],o=e[1],s=e[2];return Math.abs(n-i)<=Ie*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=Ie*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-s)<=Ie*Math.max(1,Math.abs(a),Math.abs(s))}var vs=gr,Td=hc,wd=ls,Ed=vc,Dd=gc,xc=qr,Od=dc,_d=function(){var t=cs();return function(e,n,r,a,i,o){var s,c;for(n||(n=3),r||(r=0),a?c=Math.min(a*n+r,e.length):c=e.length,s=r;s<c;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],i(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}();const bd=Object.freeze(Object.defineProperty({__proto__:null,add:ma,angle:Cd,bezier:vd,ceil:od,clone:id,copy:pc,create:cs,cross:Jr,dist:Ed,distance:vc,div:wd,divide:ls,dot:Yr,equals:hs,exactEquals:Fn,floor:sd,forEach:_d,fromValues:fs,hermite:hd,inverse:ps,len:xc,length:qr,lerp:pd,max:cd,min:ud,mul:Td,multiply:hc,negate:yc,normalize:It,random:gd,rotateX:yd,rotateY:md,rotateZ:xd,round:fd,scale:dr,scaleAndAdd:ld,set:Xe,sqrDist:Dd,sqrLen:Od,squaredDistance:gc,squaredLength:dc,str:Sd,sub:vs,subtract:gr,transformMat3:Ci,transformMat4:be,transformQuat:dd,zero:mc},Symbol.toStringTag,{value:"Module"}));function Md(){var t=new gt(4);return gt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Nd(t,e,n,r){var a=new gt(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a}function Rd(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=n*n+r*r+a*a+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=a*o,t[3]=i*o,t}function Si(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*i+n[12]*o,t[1]=n[1]*r+n[5]*a+n[9]*i+n[13]*o,t[2]=n[2]*r+n[6]*a+n[10]*i+n[14]*o,t[3]=n[3]*r+n[7]*a+n[11]*i+n[15]*o,t}(function(){var t=Md();return function(e,n,r,a,i,o){var s,c;for(n||(n=4),r||(r=0),a?c=Math.min(a*n+r,e.length):c=e.length,s=r;s<c;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],i(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}})();function Zr(){var t=new gt(4);return gt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function gs(t,e,n){n=n*.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Ld(t,e){var n=Math.acos(e[3])*2,r=Math.sin(n/2);return r>Ie?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Cc(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=n[0],c=n[1],u=n[2],f=n[3];return t[0]=r*f+o*s+a*u-i*c,t[1]=a*f+o*c+i*s-r*u,t[2]=i*f+o*u+r*c-a*s,t[3]=o*f-r*s-a*c-i*u,t}function Ti(t,e,n,r){var a=e[0],i=e[1],o=e[2],s=e[3],c=n[0],u=n[1],f=n[2],l=n[3],p,h,v,y,m;return h=a*c+i*u+o*f+s*l,h<0&&(h=-h,c=-c,u=-u,f=-f,l=-l),1-h>Ie?(p=Math.acos(h),v=Math.sin(p),y=Math.sin((1-r)*p)/v,m=Math.sin(r*p)/v):(y=1-r,m=r),t[0]=y*a+m*c,t[1]=y*i+m*u,t[2]=y*o+m*f,t[3]=y*s+m*l,t}function kd(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Fd(t,e){var n=e[0]+e[4]+e[8],r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[a*3+a]&&(a=2);var i=(a+1)%3,o=(a+2)%3;r=Math.sqrt(e[a*3+a]-e[i*3+i]-e[o*3+o]+1),t[a]=.5*r,r=.5/r,t[3]=(e[i*3+o]-e[o*3+i])*r,t[i]=(e[i*3+a]+e[a*3+i])*r,t[o]=(e[o*3+a]+e[a*3+o])*r}return t}var Sc=Nd,Tc=Rd;(function(){var t=cs(),e=fs(1,0,0),n=fs(0,1,0);return function(r,a,i){var o=Yr(a,i);return o<-.999999?(Jr(t,e,a),xc(t)<1e-6&&Jr(t,n,a),It(t,t),gs(r,t,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Jr(t,a,i),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+o,Tc(r,r))}})(),function(){var t=Zr(),e=Zr();return function(n,r,a,i,o,s){return Ti(t,r,o,s),Ti(e,a,i,s),Ti(n,t,e,2*s*(1-s)),n}}(),function(){var t=Qu();return function(e,n,r,a){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],Tc(e,Fd(e,t))}}();function Ad(t){if(Array.isArray(t))return t}function Vd(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],a=!0,i=!1,o,s;try{for(n=n.call(t);!(a=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));a=!0);}catch(c){i=!0,s=c}finally{try{!a&&n.return!=null&&n.return()}finally{if(i)throw s}}return r}}function ds(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wc(t,e){if(t){if(typeof t=="string")return ds(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ds(t,e)}}function Bd(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ze(t,e){return Ad(t)||Vd(t,e)||wc(t,e)||Bd()}function Qr(t){return Qr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qr(t)}function Ce(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ud(t){if(Array.isArray(t))return ds(t)}function Gd(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Pd(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ve(t){return Ud(t)||Gd(t)||wc(t)||Pd()}function xa(t,e){return xa=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},xa(t,e)}function Id(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ca(t,e,n){return Id()?Ca=Reflect.construct:Ca=function(a,i,o){var s=[null];s.push.apply(s,i);var c=Function.bind.apply(a,s),u=new c;return o&&xa(u,o.prototype),u},Ca.apply(null,arguments)}var At=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function zd(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){if(this instanceof r){var a=[null];a.push.apply(a,arguments);var i=Function.bind.apply(e,a);return new i}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var Wd=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,a,i;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(a=r;a--!==0;)if(!t(e[a],n[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(n).length)return!1;for(a=r;a--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[a]))return!1;for(a=r;a--!==0;){var o=i[a];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n},Ec=Object.prototype.toString,Dc=function(e){var n=Ec.call(e),r=n==="[object Arguments]";return r||(r=n!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Ec.call(e.callee)==="[object Function]"),r},ys,Oc;function Hd(){if(Oc)return ys;Oc=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Dc,a=Object.prototype.propertyIsEnumerable,i=!a.call({toString:null},"toString"),o=a.call(function(){},"prototype"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(p){var h=p.constructor;return h&&h.prototype===p},u={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if(typeof window>"u")return!1;for(var p in window)try{if(!u["$"+p]&&e.call(window,p)&&window[p]!==null&&typeof window[p]=="object")try{c(window[p])}catch{return!0}}catch{return!0}return!1}(),l=function(p){if(typeof window>"u"||!f)return c(p);try{return c(p)}catch{return!1}};t=function(h){var v=h!==null&&typeof h=="object",y=n.call(h)==="[object Function]",m=r(h),x=v&&n.call(h)==="[object String]",g=[];if(!v&&!y&&!m)throw new TypeError("Object.keys called on a non-object");var d=o&&y;if(x&&h.length>0&&!e.call(h,0))for(var C=0;C<h.length;++C)g.push(String(C));if(m&&h.length>0)for(var S=0;S<h.length;++S)g.push(String(S));else for(var T in h)!(d&&T==="prototype")&&e.call(h,T)&&g.push(String(T));if(i)for(var w=l(h),E=0;E<s.length;++E)!(w&&s[E]==="constructor")&&e.call(h,s[E])&&g.push(s[E]);return g}}return ys=t,ys}var $d=Array.prototype.slice,Kd=Dc,_c=Object.keys,wi=_c?function(e){return _c(e)}:Hd(),bc=Object.keys;wi.shim=function(){if(Object.keys){var e=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);e||(Object.keys=function(r){return Kd(r)?bc($d.call(r)):bc(r)})}else Object.keys=wi;return Object.keys||wi};var Xd=wi,qd=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var a=42;e[n]=a;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,n);if(o.value!==a||o.enumerable!==!0)return!1}return!0},Mc=typeof Symbol<"u"&&Symbol,Yd=qd,Jd=function(){return typeof Mc!="function"||typeof Symbol!="function"||typeof Mc("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Yd()},Zd="Function.prototype.bind called on incompatible ",ms=Array.prototype.slice,Qd=Object.prototype.toString,e3="[object Function]",t3=function(e){var n=this;if(typeof n!="function"||Qd.call(n)!==e3)throw new TypeError(Zd+n);for(var r=ms.call(arguments,1),a,i=function(){if(this instanceof a){var f=n.apply(this,r.concat(ms.call(arguments)));return Object(f)===f?f:this}else return n.apply(e,r.concat(ms.call(arguments)))},o=Math.max(0,n.length-r.length),s=[],c=0;c<o;c++)s.push("$"+c);if(a=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(i),n.prototype){var u=function(){};u.prototype=n.prototype,a.prototype=new u,u.prototype=null}return a},r3=t3,Nc=Function.prototype.bind||r3,n3=Nc,a3=n3.call(Function.call,Object.prototype.hasOwnProperty),Ue,An=SyntaxError,Rc=Function,Vn=TypeError,xs=function(t){try{return Rc('"use strict"; return ('+t+").constructor;")()}catch{}},en=Object.getOwnPropertyDescriptor;if(en)try{en({},"")}catch{en=null}var Cs=function(){throw new Vn},i3=en?function(){try{return arguments.callee,Cs}catch{try{return en(arguments,"callee").get}catch{return Cs}}}():Cs,Bn=Jd(),ur=Object.getPrototypeOf||function(t){return t.__proto__},Un={},o3=typeof Uint8Array>"u"?Ue:ur(Uint8Array),tn={"%AggregateError%":typeof AggregateError>"u"?Ue:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ue:ArrayBuffer,"%ArrayIteratorPrototype%":Bn?ur([][Symbol.iterator]()):Ue,"%AsyncFromSyncIteratorPrototype%":Ue,"%AsyncFunction%":Un,"%AsyncGenerator%":Un,"%AsyncGeneratorFunction%":Un,"%AsyncIteratorPrototype%":Un,"%Atomics%":typeof Atomics>"u"?Ue:Atomics,"%BigInt%":typeof BigInt>"u"?Ue:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ue:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ue:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ue:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ue:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ue:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ue:FinalizationRegistry,"%Function%":Rc,"%GeneratorFunction%":Un,"%Int8Array%":typeof Int8Array>"u"?Ue:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ue:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ue:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Bn?ur(ur([][Symbol.iterator]())):Ue,"%JSON%":typeof JSON=="object"?JSON:Ue,"%Map%":typeof Map>"u"?Ue:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Bn?Ue:ur(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ue:Promise,"%Proxy%":typeof Proxy>"u"?Ue:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ue:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ue:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Bn?Ue:ur(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ue:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Bn?ur(""[Symbol.iterator]()):Ue,"%Symbol%":Bn?Symbol:Ue,"%SyntaxError%":An,"%ThrowTypeError%":i3,"%TypedArray%":o3,"%TypeError%":Vn,"%Uint8Array%":typeof Uint8Array>"u"?Ue:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ue:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ue:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ue:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ue:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ue:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ue:WeakSet};try{null.error}catch(t){var s3=ur(ur(t));tn["%Error.prototype%"]=s3}var u3=function t(e){var n;if(e==="%AsyncFunction%")n=xs("async function () {}");else if(e==="%GeneratorFunction%")n=xs("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=xs("async function* () {}");else if(e==="%AsyncGenerator%"){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var a=t("%AsyncGenerator%");a&&(n=ur(a.prototype))}return tn[e]=n,n},Lc={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Sa=Nc,Ei=a3,c3=Sa.call(Function.call,Array.prototype.concat),f3=Sa.call(Function.apply,Array.prototype.splice),kc=Sa.call(Function.call,String.prototype.replace),Di=Sa.call(Function.call,String.prototype.slice),l3=Sa.call(Function.call,RegExp.prototype.exec),p3=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,h3=/\\(\\)?/g,v3=function(e){var n=Di(e,0,1),r=Di(e,-1);if(n==="%"&&r!=="%")throw new An("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new An("invalid intrinsic syntax, expected opening `%`");var a=[];return kc(e,p3,function(i,o,s,c){a[a.length]=s?kc(c,h3,"$1"):o||i}),a},g3=function(e,n){var r=e,a;if(Ei(Lc,r)&&(a=Lc[r],r="%"+a[0]+"%"),Ei(tn,r)){var i=tn[r];if(i===Un&&(i=u3(r)),typeof i>"u"&&!n)throw new Vn("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:a,name:r,value:i}}throw new An("intrinsic "+e+" does not exist!")},d3=function(e,n){if(typeof e!="string"||e.length===0)throw new Vn("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Vn('"allowMissing" argument must be a boolean');if(l3(/^%?[^%]*%?$/,e)===null)throw new An("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=v3(e),a=r.length>0?r[0]:"",i=g3("%"+a+"%",n),o=i.name,s=i.value,c=!1,u=i.alias;u&&(a=u[0],f3(r,c3([0,1],u)));for(var f=1,l=!0;f<r.length;f+=1){var p=r[f],h=Di(p,0,1),v=Di(p,-1);if((h==='"'||h==="'"||h==="`"||v==='"'||v==="'"||v==="`")&&h!==v)throw new An("property names with quotes must have matching quotes");if((p==="constructor"||!l)&&(c=!0),a+="."+p,o="%"+a+"%",Ei(tn,o))s=tn[o];else if(s!=null){if(!(p in s)){if(!n)throw new Vn("base intrinsic for "+e+" exists, but the property is not available.");return}if(en&&f+1>=r.length){var y=en(s,p);l=!!y,l&&"get"in y&&!("originalValue"in y.get)?s=y.get:s=s[p]}else l=Ei(s,p),s=s[p];l&&!c&&(tn[o]=s)}}return s},y3=d3,Ss=y3("%Object.defineProperty%",!0),Ts=function(){if(Ss)try{return Ss({},"a",{value:1}),!0}catch{return!1}return!1};Ts.hasArrayLengthDefineBug=function(){if(!Ts())return null;try{return Ss([],"length",{value:1}).length!==1}catch{return!0}};var m3=Ts,x3=Xd,C3=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",S3=Object.prototype.toString,T3=Array.prototype.concat,Fc=Object.defineProperty,w3=function(t){return typeof t=="function"&&S3.call(t)==="[object Function]"},E3=m3(),Ac=Fc&&E3,D3=function(t,e,n,r){if(e in t){if(r===!0){if(t[e]===n)return}else if(!w3(r)||!r())return}Ac?Fc(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n},Vc=function(t,e){var n=arguments.length>2?arguments[2]:{},r=x3(e);C3&&(r=T3.call(r,Object.getOwnPropertySymbols(e)));for(var a=0;a<r.length;a+=1)D3(t,r[a],e[r[a]],n[r[a]])};Vc.supportsDescriptors=!!Ac;var Bc=Vc,Oi={},ws={get exports(){return Oi},set exports(t){Oi=t}};typeof self<"u"?ws.exports=self:typeof window<"u"?ws.exports=window:ws.exports=Function("return this")();var O3=Oi,Uc=function(){return typeof At!="object"||!At||At.Math!==Math||At.Array!==Array?O3:At},_3=Bc,b3=Uc,M3=function(){var e=b3();if(_3.supportsDescriptors){var n=Object.getOwnPropertyDescriptor(e,"globalThis");(!n||n.configurable&&(n.enumerable||!n.writable||globalThis!==e))&&Object.defineProperty(e,"globalThis",{configurable:!0,enumerable:!1,value:e,writable:!0})}else(typeof globalThis!="object"||globalThis!==e)&&(e.globalThis=e);return e},N3=Bc,R3=Oi,Gc=Uc,L3=M3,k3=Gc(),Pc=function(){return k3};N3(Pc,{getPolyfill:Gc,implementation:R3,shim:L3});var F3=Pc;function Ic(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function A3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ic(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ic(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var qt=F3(),jc={vtkObject:function(){return null}};function wt(t){if(t==null||t.isA)return t;if(!t.vtkClass)return qt.console&&qt.console.error&&qt.console.error("Invalid VTK object"),null;var e=jc[t.vtkClass];if(!e)return qt.console&&qt.console.error&&qt.console.error("No vtk class found for Object of type ".concat(t.vtkClass)),null;var n=A3({},t);Object.keys(n).forEach(function(a){n[a]&&Qr(n[a])==="object"&&n[a].vtkClass&&(n[a]=wt(n[a]))});var r=e(n);return r&&r.modified&&r.modified(),r}function V3(t,e){jc[t]=e}wt.register=V3;function Ta(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wa(t,e,n){return e&&zc(t.prototype,e),n&&zc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function rn(t){return rn=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},rn(t)}function B3(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=rn(t),t!==null););return t}function _i(){return typeof Reflect<"u"&&Reflect.get?_i=Reflect.get:_i=function(e,n,r){var a=B3(e,n);if(a){var i=Object.getOwnPropertyDescriptor(a,n);return i.get?i.get.call(arguments.length<3?e:r):i.value}},_i.apply(this,arguments)}function U3(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xa(t,e)}function G3(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P3(t,e){if(e&&(Qr(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G3(t)}function I3(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Es(t){var e=typeof Map=="function"?new Map:void 0;return Es=function(r){if(r===null||!I3(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,a)}function a(){return Ca(r,arguments,rn(this).constructor)}return a.prototype=Object.create(r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),xa(a,r)},Es(t)}function j3(t){var e=z3();return function(){var r=rn(t),a;if(e){var i=rn(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return P3(this,a)}}function z3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ds=function(t){U3(n,t);var e=j3(n);function n(){return Ta(this,n),e.apply(this,arguments)}return wa(n,[{key:"push",value:function(){for(var a=0;a<arguments.length;a++)this.includes(arguments[a])||_i(rn(n.prototype),"push",this).call(this,arguments[a]);return this.length}}]),n}(Es(Array));function Wc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function bi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wc(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wc(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Os=0,W3=Symbol("void");function H3(){return Os}var Hc={};function nn(){}var $3=["log","debug","info","warn","error","time","timeEnd","group","groupEnd"];$3.forEach(function(t){Hc[t]=nn}),qt.console=console.hasOwnProperty("log")?console:Hc;var Vt={debug:nn,error:qt.console.error||nn,info:qt.console.info||nn,log:qt.console.log||nn,warn:qt.console.warn||nn};function K3(t,e){Vt[t]&&(Vt[t]=e||nn)}function X3(){Vt.log.apply(Vt,arguments)}function q3(){Vt.info.apply(Vt,arguments)}function an(){Vt.debug.apply(Vt,arguments)}function Me(){Vt.error.apply(Vt,arguments)}function Ea(){Vt.warn.apply(Vt,arguments)}var $c={};function Y3(t){$c[t]||(Vt.error(t),$c[t]=!0)}var Ot=Object.create(null);Ot.Float32Array=Float32Array,Ot.Float64Array=Float64Array,Ot.Uint8Array=Uint8Array,Ot.Int8Array=Int8Array,Ot.Uint16Array=Uint16Array,Ot.Int16Array=Int16Array,Ot.Uint32Array=Uint32Array,Ot.Int32Array=Int32Array,Ot.Uint8ClampedArray=Uint8ClampedArray;try{Ot.BigInt64Array=BigInt64Array,Ot.BigUint64Array=BigUint64Array}catch{}function Gn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Ca(Ot[t]||Float64Array,n)}function _s(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(e=Ot[t]||Float64Array).from.apply(e,r)}function Da(t){return t.charAt(0).toUpperCase()+t.slice(1)}function ct(t){return Da(t[0]==="_"?t.slice(1):t)}function J3(t){return t.charAt(0).toLowerCase()+t.slice(1)}function Z3(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3,r=["TB","GB","MB","KB"],a=Number(t),i="B";a>n;)a/=n,i=r.pop();return"".concat(a.toFixed(e)," ").concat(i)}function Q3(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ",n=[],r=t;r>1e3;)n.push("000".concat(r%1e3).slice(-3)),r=Math.floor(r/1e3);return r>0&&n.push(r),n.reverse(),n.join(e)}function Kc(t){Object.keys(t).forEach(function(e){Array.isArray(t[e])&&(t[e]=[].concat(t[e]))})}function ey(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}function ty(t,e){return Object.keys(t).find(function(n){return t[n]===e})}function Xc(t){return t&&t.isA?t.getState():t}function qc(t){setTimeout(t,0)}function ry(t,e){var n=performance.now();t.finally(function(){var r=performance.now()-n;e(r)})}function ht(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Kc(e);var n=[];if(Number.isInteger(e.mtime)||(e.mtime=++Os),!("classHierarchy"in e))e.classHierarchy=new Ds("vtkObject");else if(!(e.classHierarchy instanceof Ds)){for(var r=new Ds,a=0;a<e.classHierarchy.length;a++)r.push(e.classHierarchy[a]);e.classHierarchy=r}function i(s){n[s]=null}function o(s){function c(){i(s)}return Object.freeze({unsubscribe:c})}return t.isDeleted=function(){return!!e.deleted},t.modified=function(s){if(e.deleted){Me("instance deleted - cannot call any method");return}s&&s<t.getMTime()||(e.mtime=++Os,n.forEach(function(c){return c&&c(t)}))},t.onModified=function(s){if(e.deleted)return Me("instance deleted - cannot call any method"),null;var c=n.length;return n.push(s),o(c)},t.getMTime=function(){return e.mtime},t.isA=function(s){for(var c=e.classHierarchy.length;c--;)if(e.classHierarchy[c]===s)return!0;return!1},t.getClassName=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.classHierarchy[e.classHierarchy.length-1-s]},t.set=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=!1;return Object.keys(s).forEach(function(l){var p=u?null:t["set".concat(Da(l))];p&&Array.isArray(s[l])&&p.length>1?f=p.apply(void 0,ve(s[l]))||f:p?f=p(s[l])||f:(["mtime"].indexOf(l)===-1&&!c&&Ea("Warning: Set value to model directly ".concat(l,", ").concat(s[l])),f=e[l]!==s[l]||f,e[l]=s[l])}),f},t.get=function(){for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];if(!c.length)return e;var f={};return c.forEach(function(l){f[l]=e[l]}),f},t.getReferenceByName=function(s){return e[s]},t.delete=function(){Object.keys(e).forEach(function(s){return delete e[s]}),n.forEach(function(s,c){return i(c)}),e.deleted=!0},t.getState=function(){if(e.deleted)return null;var s=bi(bi({},e),{},{vtkClass:t.getClassName()});Object.keys(s).forEach(function(u){s[u]===null||s[u]===void 0||u[0]==="_"?delete s[u]:s[u].isA?s[u]=s[u].getState():Array.isArray(s[u])&&(s[u]=s[u].map(Xc))});var c={};return Object.keys(s).sort().forEach(function(u){c[u]=s[u]}),c.mtime&&delete c.mtime,c},t.shallowCopy=function(s){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(s.getClassName()!==t.getClassName())throw new Error("Cannot ShallowCopy ".concat(s.getClassName()," into ").concat(t.getClassName()));var u=s.get(),f=Object.keys(e).sort(),l=Object.keys(u).sort();l.forEach(function(p){var h=f.indexOf(p);h===-1?c&&an("add ".concat(p," in shallowCopy")):f.splice(h,1),e[p]=u[p]}),f.length&&c&&an("Untouched keys: ".concat(f.join(", "))),t.modified()},t.toJSON=function(){return t.getState()},t}var ny={object:function(e,n,r){return function(){return bi({},n[r.name])}}};function jt(t,e,n){n.forEach(function(r){if(Qr(r)==="object"){var a=ny[r.type];a?t["get".concat(ct(r.name))]=a(t,e,r):t["get".concat(ct(r.name))]=function(){return e[r.name]}}else t["get".concat(ct(r))]=function(){return e[r]}})}var ay={enum:function(e,n,r){var a="_on".concat(ct(r.name),"Changed");return function(i){if(typeof i=="string"){if(r.enum[i]!==void 0)return n[r.name]!==r.enum[i]?(n[r.name]=r.enum[i],e.modified(),!0):!1;throw Me("Set Enum with invalid argument ".concat(r,", ").concat(i)),new RangeError("Set Enum with invalid string argument")}if(typeof i=="number"){if(n[r.name]!==i){if(Object.keys(r.enum).map(function(c){return r.enum[c]}).indexOf(i)!==-1){var o,s=n[r.name];return n[r.name]=i,(o=n[a])===null||o===void 0||o.call(n,e,n,i,s),e.modified(),!0}throw Me("Set Enum outside numeric range ".concat(r,", ").concat(i)),new RangeError("Set Enum outside numeric range")}return!1}throw Me("Set Enum with invalid argument (String/Number) ".concat(r,", ").concat(i)),new TypeError("Set Enum with invalid argument (String/Number)")}},object:function(e,n,r){var a="_on".concat(ct(r.name),"Changed");return function(i){if(!Wd(n[r.name],i)){var o,s=n[r.name];return n[r.name]=i,(o=n[a])===null||o===void 0||o.call(n,e,n,i,s),e.modified(),!0}return!1}}};function Yc(t){if(Qr(t)==="object"){var e=ay[t.type];if(e)return function(n,r){return e(n,r,t)};throw Me("No setter for field ".concat(t)),new TypeError("No setter for field")}return function(r,a){var i="_on".concat(ct(t),"Changed");return function(s){if(a.deleted)return Me("instance deleted - cannot call any method"),!1;if(a[t]!==s){var c,u=a[t.name];return a[t]=s,(c=a[i])===null||c===void 0||c.call(a,r,a,s,u),r.modified(),!0}return!1}}}function Mi(t,e,n){n.forEach(function(r){Qr(r)==="object"?t["set".concat(ct(r.name))]=Yc(r)(t,e):t["set".concat(ct(r))]=Yc(r)(t,e)})}function dt(t,e,n){jt(t,e,n),Mi(t,e,n)}function Ni(t,e,n){n.forEach(function(r){t["get".concat(ct(r))]=function(){return e[r]?Array.from(e[r]):e[r]},t["get".concat(ct(r),"ByReference")]=function(){return e[r]}})}function Jc(t,e,n,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;n.forEach(function(i){if(e[i]&&r&&e[i].length!==r)throw new RangeError("Invalid initial number of values for array (".concat(i,")"));var o="_on".concat(ct(i),"Changed");t["set".concat(ct(i))]=function(){if(e.deleted)return Me("instance deleted - cannot call any method"),!1;for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];var f=c,l,p=!1;if(f.length===1&&(f[0]==null||f[0].length>=0)&&(f=f[0],p=!0),f==null)l=e[i]!==f;else{if(r&&f.length!==r)if(f.length<r&&a!==void 0)for(f=Array.from(f),p=!1;f.length<r;)f.push(a);else throw new RangeError("Invalid number of values for array setter (".concat(i,")"));l=e[i]==null||e[i].length!==f.length;for(var h=0;!l&&h<f.length;++h)l=e[i][h]!==f[h];l&&p&&(f=Array.from(f))}if(l){var v,y=e[i.name];e[i]=f,(v=e[o])===null||v===void 0||v.call(e,t,e,f,y),t.modified()}return l},t["set".concat(ct(i),"From")]=function(s){var c=e[i];s.forEach(function(u,f){c[f]=u})}})}function bs(t,e,n,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;Ni(t,e,n),Jc(t,e,n,r,a)}function Ri(t,e,n){for(var r=0;r<n.length;r++){var a=n[r];e[a]!==void 0&&(e["_".concat(a)]=e[a],delete e[a])}}function Zc(t,e,n,r){e.inputData?e.inputData=e.inputData.map(wt):e.inputData=[],e.inputConnection?e.inputConnection=e.inputConnection.map(wt):e.inputConnection=[],e.output?e.output=e.output.map(wt):e.output=[],e.inputArrayToProcess?e.inputArrayToProcess=e.inputArrayToProcess.map(wt):e.inputArrayToProcess=[],e.numberOfInputs=n;function a(v){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){Me("instance deleted - cannot call any method");return}if(y>=e.numberOfInputs){Me("algorithm ".concat(t.getClassName()," only has ").concat(e.numberOfInputs," input ports. To add more input ports, use addInputData()"));return}(e.inputData[y]!==v||e.inputConnection[y])&&(e.inputData[y]=v,e.inputConnection[y]=null,t.modified&&t.modified())}function i(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[v]&&(e.inputData[v]=e.inputConnection[v]()),e.inputData[v]}function o(v){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){Me("instance deleted - cannot call any method");return}if(y>=e.numberOfInputs){var m="algorithm ".concat(t.getClassName()," only has ");m+="".concat(e.numberOfInputs),m+=" input ports. To add more input ports, use addInputConnection()",Me(m);return}e.inputData[y]=null,e.inputConnection[y]=v}function s(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[v]}function c(){for(var v=e.numberOfInputs;v&&!e.inputData[v-1]&&!e.inputConnection[v-1];)v--;return v===e.numberOfInputs&&e.numberOfInputs++,v}function u(v){if(e.deleted){Me("instance deleted - cannot call any method");return}o(v,c())}function f(v){if(e.deleted){Me("instance deleted - cannot call any method");return}a(v,c())}function l(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.deleted?(Me("instance deleted - cannot call any method"),null):(t.shouldUpdate()&&t.update(),e.output[v])}t.shouldUpdate=function(){for(var v=t.getMTime(),y=1/0,m=r;m--;){if(!e.output[m]||e.output[m].isDeleted())return!0;var x=e.output[m].getMTime();if(x<v)return!0;x<y&&(y=x)}for(m=e.numberOfInputs;m--;){var g,d;if((g=e.inputConnection[m])!==null&&g!==void 0&&g.filter.shouldUpdate()||((d=t.getInputData(m))===null||d===void 0?void 0:d.getMTime())>y)return!0}return!1};function p(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,y=function(){return l(v)};return y.filter=t,y}if(e.numberOfInputs){for(var h=e.numberOfInputs;h--;)e.inputData.push(null),e.inputConnection.push(null);t.setInputData=a,t.setInputConnection=o,t.addInputData=f,t.addInputConnection=u,t.getInputData=i,t.getInputConnection=s}r&&(t.getOutputData=l,t.getOutputPort=p),t.update=function(){var v=[];if(e.numberOfInputs)for(var y=0;y<e.numberOfInputs;)v[y]=t.getInputData(y),y++;t.shouldUpdate()&&t.requestData&&t.requestData(v,e.output)},t.getNumberOfInputPorts=function(){return e.numberOfInputs},t.getNumberOfOutputPorts=function(){return r||e.output.length},t.getInputArrayToProcess=function(v){var y=e.inputArrayToProcess[v],m=e.inputData[v];return y&&m?m["get".concat(y.fieldAssociation)]().getArray(y.arrayName):null},t.setInputArrayToProcess=function(v,y,m){for(var x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Scalars";e.inputArrayToProcess.length<v;)e.inputArrayToProcess.push(null);e.inputArrayToProcess[v]={arrayName:y,fieldAssociation:m,attributeType:x}}}var Qc=Symbol("Event abort");function Oa(t,e,n){var r=[],a=t.delete,i=1;function o(u){for(var f=0;f<r.length;++f){var l=ze(r[f],1),p=l[0];if(p===u){r.splice(f,1);return}}}function s(u){function f(){o(u)}return Object.freeze({unsubscribe:f})}function c(){var u=arguments;if(e.deleted){Me("instance deleted - cannot call any method");return}for(var f=r.slice(),l=function(y){var m=ze(f[y],3),x=m[1],g=m[2];if(!x)return"continue";if(g<0)setTimeout(function(){return x.apply(t,u)},1-g);else{var d=x.apply(t,u);if(d===Qc)return"break"}},p=0;p<f.length;++p){var h=l(p);if(h!=="continue"&&h==="break")break}}t["invoke".concat(ct(n))]=c,t["on".concat(ct(n))]=function(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!u.apply)return console.error("Invalid callback for event ".concat(n)),null;if(e.deleted)return Me("instance deleted - cannot call any method"),null;var l=i++;return r.push([l,u,f]),r.sort(function(p,h){return h[2]-p[2]}),s(l)},t.delete=function(){a(),r.forEach(function(u){var f=ze(u,1),l=f[0];return o(l)})}}function Je(t,e){var n=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i={},o={};return t(o,i,a),Object.freeze(o)};return e&&wt.register(e,n),n}function _a(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e.filter(function(o){return!!o}).map(function(o){return o.apply(void 0,a)})}}function ef(t){return t&&t.isA&&t.isA("vtkObject")}function Li(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];if(ef(t)){if(r.indexOf(t)>=0)return n;r.push(t);var a=e(t);a!==void 0&&n.push(a);var i=t.get();Object.keys(i).forEach(function(o){var s=i[o];Array.isArray(s)?s.forEach(function(c){Li(c,e,n,r)}):Li(s,e,n,r)})}return n}function on(t,e,n){var r=this,a,i=function(){for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];var f=r,l=function(){a=null,n||t.apply(f,c)},p=n&&!a;clearTimeout(a),a=setTimeout(l,e),p&&t.apply(f,c)};return i.cancel=function(){return clearTimeout(a)},i}function iy(t,e){var n=!1,r=null;function a(){n=!1,r!==null&&(i.apply(void 0,ve(r)),r=null)}function i(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];if(n){r=s;return}n=!0,t.apply(void 0,s),setTimeout(a,e)}return i}function tf(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};e.keystore=Object.assign(e.keystore||{},n),t.setKey=function(r,a){e.keystore[r]=a},t.getKey=function(r){return e.keystore[r]},t.getAllKeys=function(){return Object.keys(e.keystore)},t.deleteKey=function(r){return delete e.keystore[r]},t.clearKeystore=function(){return t.getAllKeys().forEach(function(r){return delete e.keystore[r]})}}var oy=1,ki="__root__";function sy(t,e){tf(t,e);var n=t.delete;e.proxyId="".concat(oy++),e.ui=JSON.parse(JSON.stringify(e.ui||[])),jt(t,e,["proxyId","proxyGroup","proxyName"]),dt(t,e,["proxyManager"]);var r={},a={};function i(u,f){a[f]||(a[f]=[]);for(var l=a[f],p=0;p<u.length;p++)l.push(u[p].name),r[u[p].name]=u[p],u[p].children&&u[p].children.length&&i(u[p].children,u[p].name)}i(e.ui,ki),t.updateUI=function(u){e.ui=JSON.parse(JSON.stringify(u||[])),Object.keys(r).forEach(function(f){return delete r[f]}),Object.keys(a).forEach(function(f){return delete a[f]}),i(e.ui,ki),t.modified()};function o(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ki;return a[u]}t.updateProxyProperty=function(u,f){var l=r[u];l?Object.assign(l,f):r[u]=bi({},f)},t.activate=function(){if(e.proxyManager){var u="setActive".concat(ct(t.getProxyGroup().slice(0,-1)));e.proxyManager[u]&&e.proxyManager[u](t)}},e.propertyLinkSubscribers={},t.registerPropertyLinkForGC=function(u,f){f in e.propertyLinkSubscribers||(e.propertyLinkSubscribers[f]=[]),e.propertyLinkSubscribers[f].push(u)},t.gcPropertyLinks=function(u){for(var f=e.propertyLinkSubscribers[u]||[];f.length;)f.pop().unbind(t)},e.propertyLinkMap={},t.getPropertyLink=function(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.propertyLinkMap[u])return e.propertyLinkMap[u];var l=null,p=[],h=0,v=!1;function y(C){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(v)return null;var T=[],w=null;for(h=p.length;h--;){var E=p[h];E.instance===C?w=E:T.push(E)}if(!w)return null;var D=w.instance["get".concat(ct(w.propertyName))]();if(!ey(D,l)||S){for(l=D,v=!0;T.length;){var b=T.pop();b.instance.set(Ce({},b.propertyName,l))}v=!1}return e.propertyLinkMap[u].persistent&&(e.propertyLinkMap[u].value=D),D}function m(C,S){var T=[];for(h=p.length;h--;){var w=p[h];w.instance===C&&(w.propertyName===S||S===void 0)&&(w.subscription.unsubscribe(),T.push(h))}for(;T.length;)p.splice(T.pop(),1)}function x(C,S){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,w=C.onModified(y),E=p[0];return p.push({instance:C,propertyName:S,subscription:w}),T&&(e.propertyLinkMap[u].persistent&&e.propertyLinkMap[u].value!==void 0?C.set(Ce({},S,e.propertyLinkMap[u].value)):E&&y(E.instance,!0)),{unsubscribe:function(){return m(C,S)}}}function g(){for(;p.length;)p.pop().subscription.unsubscribe()}var d={bind:x,unbind:m,unsubscribe:g,persistent:f};return e.propertyLinkMap[u]=d,d};function s(){for(var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ki,f=[],l=e.proxyId,p=o(u)||[],h=0;h<p.length;h++){var v=p[h],y=t["get".concat(ct(v))],m=y?y():void 0,x={id:l,name:v,value:m},g=s(v);g.length&&(x.children=g),f.push(x)}return f}t.listPropertyNames=function(){return s().map(function(u){return u.name})},t.getPropertyByName=function(u){return s().find(function(f){return f.name===u})},t.getPropertyDomainByName=function(u){return(r[u]||{}).domain},t.getProxySection=function(){return{id:e.proxyId,name:e.proxyGroup,ui:e.ui,properties:s()}},t.delete=function(){for(var u=Object.keys(e.propertyLinkMap),f=u.length;f--;)e.propertyLinkMap[u[f]].unsubscribe();Object.keys(e.propertyLinkSubscribers).forEach(t.gcPropertyLinks),n()},t.getState=function(){return null};function c(){if(e.links)for(var u=0;u<e.links.length;u++){var f=e.links[u],l=f.link,p=f.property,h=f.persistent,v=f.updateOnBind,y=f.type;if(y==="application"){var m=e.proxyManager.getPropertyLink(l,h);t.registerPropertyLinkForGC(m,"application"),m.bind(t,p,v)}}}qc(c)}function uy(t,e,n){for(var r=t.delete,a=[],i=Object.keys(n),o=i.length;o--;){var s=i[o],c=n[s],u=c.modelKey,f=c.property,l=c.modified,p=l===void 0?!0:l,h=ct(f),v=ct(s);t["get".concat(v)]=e[u]["get".concat(h)],t["set".concat(v)]=e[u]["set".concat(h)],p&&a.push(e[u].onModified(t.modified))}t.delete=function(){for(;a.length;)a.pop().unsubscribe();r()}}function cy(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};e.this=t;function a(c){for(var u=Object.keys(c),f=u.length;f--;){var l=u[f];e[l].set(c[l])}}for(var i=Object.keys(r),o=i.length,s=function(){var u=i[o];e[u]=r[u];var f=n[u];t["set".concat(ct(u))]=function(l){if(l!==e[u]){e[u]=l;var p=f[l];a(p),t.modified()}}};o--;)s();i.length&&jt(t,e,i)}var rf=10,nf=40,af=800;function fy(t){var e=0,n=0,r=0,a=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*rf,a=n*rf,"deltaY"in t&&(a=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||a)&&t.deltaMode&&(t.deltaMode===1?(r*=nf,a*=nf):(r*=af,a*=af)),r&&!e&&(e=r<1?-1:1),a&&!n&&(n=a<1?-1:1),{spinX:e,spinY:n,pixelX:r,pixelY:a}}var B={algo:Zc,capitalize:Da,chain:_a,debounce:on,enumToString:ty,event:Oa,EVENT_ABORT:Qc,formatBytesToProperUnit:Z3,formatNumbersWithThousandSeparator:Q3,get:jt,getArray:Ni,getCurrentGlobalMTime:H3,getStateArrayMapFunc:Xc,isVtkObject:ef,keystore:tf,measurePromiseExecution:ry,moveToProtected:Ri,newInstance:Je,newTypedArray:Gn,newTypedArrayFrom:_s,normalizeWheel:fy,obj:ht,proxy:sy,proxyPropertyMapping:uy,proxyPropertyState:cy,safeArrays:Kc,set:Mi,setArray:Jc,setGet:dt,setGetArray:bs,setImmediate:qc,setLoggerFunction:K3,throttle:iy,traverseInstanceTree:Li,TYPED_ARRAYS:Ot,uncapitalize:J3,VOID:W3,vtkDebugMacro:an,vtkErrorMacro:Me,vtkInfoMacro:q3,vtkLogMacro:X3,vtkOnceErrorMacro:Y3,vtkWarningMacro:Ea},ly=B.vtkErrorMacro,py=["Build","Render"];function hy(t,e){e.classHierarchy.push("vtkViewNode"),t.build=function(r){},t.render=function(r){},t.traverse=function(r){var a=r.getTraverseOperation(),i=t[a];if(i){i(r);return}t.apply(r,!0);for(var o=0;o<e.children.length;o++)e.children[o].traverse(r);t.apply(r,!1)},t.apply=function(r,a){var i=t[r.getOperation()];i&&i(a,r)},t.getViewNodeFor=function(r){if(e.renderable===r)return t;for(var a=0;a<e.children.length;++a){var i=e.children[a],o=i.getViewNodeFor(r);if(o)return o}},t.getFirstAncestorOfType=function(r){return e._parent?e._parent.isA(r)?e._parent:e._parent.getFirstAncestorOfType(r):null},t.addMissingNode=function(r){if(r){var a=e._renderableChildMap.get(r);if(a!==void 0)a.setVisited(!0);else{var i=t.createViewNode(r);i&&(i.setParent(t),i.setVisited(!0),e._renderableChildMap.set(r,i),e.children.push(i))}}},t.addMissingNodes=function(r){if(!(!r||!r.length))for(var a=0;a<r.length;++a){var i=r[a],o=e._renderableChildMap.get(i);if(o!==void 0)o.setVisited(!0);else{var s=t.createViewNode(i);s&&(s.setParent(t),s.setVisited(!0),e._renderableChildMap.set(i,s),e.children.push(s))}}},t.addMissingChildren=function(r){if(!(!r||!r.length))for(var a=0;a<r.length;++a){var i=r[a],o=e.children.indexOf(i);o===-1&&(i.setParent(t),e.children.push(i)),i.setVisited(!0)}},t.prepareNodes=function(){for(var r=0;r<e.children.length;++r)e.children[r].setVisited(!1)},t.setVisited=function(r){e.visited=r},t.removeUnusedNodes=function(){for(var r=0,a=0;a<e.children.length;++a){var i=e.children[a],o=i.getVisited();if(o)e.children[r++]=i,i.setVisited(!1);else{var s=i.getRenderable();s&&e._renderableChildMap.delete(s),i.delete()}}e.children.length=r},t.createViewNode=function(r){if(!e.myFactory)return ly("Cannot create view nodes without my own factory"),null;var a=e.myFactory.createNode(r);return a&&a.setRenderable(r),a};var n=t.delete;t.delete=function(){for(var r=0;r<e.children.length;r++)e.children[r].delete();n()}}var vy={renderable:null,myFactory:null,children:[],visited:!1};function of(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,vy,n),B.obj(t,e),B.event(t,e,"event"),e._renderableChildMap=new Map,B.get(t,e,["visited"]),B.setGet(t,e,["_parent","renderable","myFactory"]),B.getArray(t,e,["children"]),B.moveToProtected(t,e,["parent"]),hy(t,e)}var gy=B.newInstance(of,"vtkViewNode"),xt={newInstance:gy,extend:of,PASS_TYPES:py};function dy(t,e){e.overrides||(e.overrides={}),e.classHierarchy.push("vtkViewNodeFactory"),t.createNode=function(n){if(n.isDeleted())return null;for(var r=0,a=n.getClassName(r++),i=!1,o=Object.keys(e.overrides);a&&!i;)o.indexOf(a)!==-1?i=!0:a=n.getClassName(r++);if(!i)return null;var s=e.overrides[a]();return s.setMyFactory(t),s},t.registerOverride=function(n,r){e.overrides[n]=r}}var yy={};function sf(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,yy,n),B.obj(t,e),dy(t,e)}var my=B.newInstance(sf,"vtkViewNodeFactory"),xy={newInstance:my,extend:sf},uf=Object.create(null);function ft(t,e){uf[t]=e}function Cy(t,e){e.classHierarchy.push("vtkOpenGLViewNodeFactory")}var Sy={};function cf(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Sy,n),e.overrides=uf,xy.extend(t,e,n),Cy(t,e)}var Ty=B.newInstance(cf,"vtkOpenGLViewNodeFactory"),wy={newInstance:Ty,extend:cf};function Ey(t,e){e.classHierarchy.push("vtkOpenGLCamera"),t.buildPass=function(n){n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext())},t.opaquePass=function(n){if(n){var r=e._openGLRenderer.getTiledSizeAndOrigin();e.context.viewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize),e.context.scissor(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize)}},t.translucentPass=t.opaquePass,t.zBufferPass=t.opaquePass,t.opaqueZBufferPass=t.opaquePass,t.volumePass=t.opaquePass,t.getKeyMatrices=function(n){if(n!==e.lastRenderer||e._openGLRenderWindow.getMTime()>e.keyMatrixTime.getMTime()||t.getMTime()>e.keyMatrixTime.getMTime()||n.getMTime()>e.keyMatrixTime.getMTime()||e.renderable.getMTime()>e.keyMatrixTime.getMTime()){St(e.keyMatrices.wcvc,e.renderable.getViewMatrix()),va(e.keyMatrices.normalMatrix,e.keyMatrices.wcvc),ga(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),We(e.keyMatrices.wcvc,e.keyMatrices.wcvc);var r=e._openGLRenderer.getAspectRatio();St(e.keyMatrices.vcpc,e.renderable.getProjectionMatrix(r,-1,1)),We(e.keyMatrices.vcpc,e.keyMatrices.vcpc),Ke(e.keyMatrices.wcpc,e.keyMatrices.vcpc,e.keyMatrices.wcvc),e.keyMatrixTime.modified(),e.lastRenderer=n}return e.keyMatrices}}var Dy={context:null,lastRenderer:null,keyMatrixTime:null,keyMatrices:null};function Oy(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Dy,n),xt.extend(t,e,n),e.keyMatrixTime={},ht(e.keyMatrixTime),e.keyMatrices={normalMatrix:new Float64Array(9),vcpc:new Float64Array(16),wcvc:new Float64Array(16),wcpc:new Float64Array(16)},dt(t,e,["context","keyMatrixTime"]),Ey(t,e)}var _y=Je(Oy);ft("vtkCamera",_y);var by=an;function My(t,e){e.classHierarchy.push("vtkOpenGLRenderer"),t.buildPass=function(n){if(n){if(!e.renderable)return;t.updateLights(),t.prepareNodes(),t.addMissingNode(e.renderable.getActiveCamera()),t.addMissingNodes(e.renderable.getViewPropsWithNestedProps()),t.removeUnusedNodes()}},t.updateLights=function(){for(var n=0,r=e.renderable.getLightsByReference(),a=0;a<r.length;++a)r[a].getSwitch()>0&&n++;return n||(by("No lights are on, creating one."),e.renderable.createLight()),n},t.zBufferPass=function(n){if(n){var r=0,a=e.context;e.renderable.getTransparent()||(e.context.clearColor(1,0,0,1),r|=a.COLOR_BUFFER_BIT),e.renderable.getPreserveDepthBuffer()||(a.clearDepth(1),r|=a.DEPTH_BUFFER_BIT,e.context.depthMask(!0));var i=t.getTiledSizeAndOrigin();a.enable(a.SCISSOR_TEST),a.scissor(i.lowerLeftU,i.lowerLeftV,i.usize,i.vsize),a.viewport(i.lowerLeftU,i.lowerLeftV,i.usize,i.vsize),a.colorMask(!0,!0,!0,!0),r&&a.clear(r),a.enable(a.DEPTH_TEST)}},t.opaqueZBufferPass=function(n){return t.zBufferPass(n)},t.cameraPass=function(n){n&&t.clear()},t.getAspectRatio=function(){var n=e._parent.getSizeByReference(),r=e.renderable.getViewportByReference();return n[0]*(r[2]-r[0])/((r[3]-r[1])*n[1])},t.getTiledSizeAndOrigin=function(){var n=e.renderable.getViewportByReference(),r=[0,0,1,1],a=n[0]-r[0],i=n[1]-r[1],o=e._parent.normalizedDisplayToDisplay(a,i),s=Math.round(o[0]),c=Math.round(o[1]),u=n[2]-r[0],f=n[3]-r[1],l=e._parent.normalizedDisplayToDisplay(u,f),p=Math.round(l[0])-s,h=Math.round(l[1])-c;return p<0&&(p=0),h<0&&(h=0),{usize:p,vsize:h,lowerLeftU:s,lowerLeftV:c}},t.clear=function(){var n=0,r=e.context;if(!e.renderable.getTransparent()){var a=e.renderable.getBackgroundByReference();e.context.clearColor(a[0],a[1],a[2],a[3]),n|=r.COLOR_BUFFER_BIT}e.renderable.getPreserveDepthBuffer()||(r.clearDepth(1),n|=r.DEPTH_BUFFER_BIT,e.context.depthMask(!0)),r.colorMask(!0,!0,!0,!0);var i=t.getTiledSizeAndOrigin();r.enable(r.SCISSOR_TEST),r.scissor(i.lowerLeftU,i.lowerLeftV,i.usize,i.vsize),r.viewport(i.lowerLeftU,i.lowerLeftV,i.usize,i.vsize),n&&r.clear(n),r.enable(r.DEPTH_TEST)},t.releaseGraphicsResources=function(){e.selector!==null&&e.selector.releaseGraphicsResources()},t.setOpenGLRenderWindow=function(n){e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))}}var Ny={context:null,selector:null};function Ry(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Ny,n),xt.extend(t,e,n),jt(t,e,["shaderCache"]),dt(t,e,["selector"]),Ri(t,e,["openGLRenderWindow"]),My(t,e)}var Ly=Je(Ry,"vtkOpenGLRenderer");ft("vtkRenderer",Ly);function ky(t,e){e.classHierarchy.push("vtkOpenGLActor"),t.buildPass=function(n){if(n){e._openGLRenderWindow=t.getFirstAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(var r=0;r<e.children.length;r++){var a=e.children[r];a.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(a)):e.oglmapper=a}}},t.traverseZBufferPass=function(n){!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseOpaqueZBufferPass=function(n){return t.traverseOpaquePass(n)},t.traverseOpaquePass=function(n){!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=function(n){!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.activateTextures=function(){if(e.ogltextures){e.activeTextures=[];for(var n=0;n<e.ogltextures.length;n++){var r=e.ogltextures[n];r.render(),r.getHandle()&&e.activeTextures.push(r)}}},t.queryPass=function(n,r){if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.zBufferPass=function(n,r){return t.opaquePass(n,r)},t.opaqueZBufferPass=function(n,r){return t.opaquePass(n,r)},t.opaquePass=function(n,r){if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(var a=0;a<e.activeTextures.length;a++)e.activeTextures[a].deactivate()},t.translucentPass=function(n,r){if(n)e.context.depthMask(!1),t.activateTextures();else if(e.activeTextures)for(var a=0;a<e.activeTextures.length;a++)e.activeTextures[a].deactivate()},t.getKeyMatrices=function(){return e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(e.renderable.computeMatrix(),St(e.keyMatrices.mcwc,e.renderable.getMatrix()),We(e.keyMatrices.mcwc,e.keyMatrices.mcwc),e.renderable.getIsIdentity()?sr(e.keyMatrices.normalMatrix):(va(e.keyMatrices.normalMatrix,e.keyMatrices.mcwc),ga(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),as(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),e.keyMatrixTime.modified()),e.keyMatrices}}var Fy={context:null,keyMatrixTime:null,keyMatrices:null,activeTextures:null};function Ay(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Fy,n),xt.extend(t,e,n),e.keyMatrixTime={},ht(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:sr(new Float64Array(9)),mcwc:Oe(new Float64Array(16))},dt(t,e,["context"]),jt(t,e,["activeTextures"]),ky(t,e)}var Vy=Je(Ay);ft("vtkActor",Vy);function By(t,e){e.classHierarchy.push("vtkOpenGLActor2D"),t.buildPass=function(n){if(n){if(!e.renderable)return;e._openGLRenderWindow=t.getFirstAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(var r=0;r<e.children.length;r++){var a=e.children[r];a.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(a)):e.oglmapper=a}}},t.queryPass=function(n,r){if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementOverlayActorCount()}},t.traverseOpaquePass=function(n){!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=function(n){!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseOverlayPass=function(n){!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.activateTextures=function(){if(e.ogltextures){e.activeTextures=[];for(var n=0;n<e.ogltextures.length;n++){var r=e.ogltextures[n];r.render(),r.getHandle()&&e.activeTextures.push(r)}}},t.opaquePass=function(n,r){if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(var a=0;a<e.activeTextures.length;a++)e.activeTextures[a].deactivate()},t.translucentPass=function(n,r){if(n)e.context.depthMask(!1),t.activateTextures();else if(e.activeTextures)for(var a=0;a<e.activeTextures.length;a++)e.activeTextures[a].deactivate()},t.overlayPass=function(n,r){if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(var a=0;a<e.activeTextures.length;a++)e.activeTextures[a].deactivate()}}var Uy={context:null,activeTextures:null};function Gy(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Uy,n),xt.extend(t,e,n),dt(t,e,["context"]),jt(t,e,["activeTextures"]),By(t,e)}var Py=Je(Gy);ft("vtkActor2D",Py);function Fi(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Iy(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ff(t){let e,n,r;t.length!==2?(e=Fi,n=(s,c)=>Fi(t(s),c),r=(s,c)=>t(s)-c):(e=t===Fi||t===Iy?t:jy,n=t,r=t);function a(s,c,u=0,f=s.length){if(u<f){if(e(c,c)!==0)return f;do{const l=u+f>>>1;n(s[l],c)<0?u=l+1:f=l}while(u<f)}return u}function i(s,c,u=0,f=s.length){if(u<f){if(e(c,c)!==0)return f;do{const l=u+f>>>1;n(s[l],c)<=0?u=l+1:f=l}while(u<f)}return u}function o(s,c,u=0,f=s.length){const l=a(s,c,u,f-1);return l>u&&r(s[l-1],c)>-r(s[l],c)?l-1:l}return{left:a,center:o,right:i}}function jy(){return 0}function zy(t){return t===null?NaN:+t}const Wy=ff(Fi).right;ff(zy).center;const Hy=Wy,$y=Math.sqrt(50),Ky=Math.sqrt(10),Xy=Math.sqrt(2);function Ai(t,e,n){const r=(e-t)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),o=i>=$y?10:i>=Ky?5:i>=Xy?2:1;let s,c,u;return a<0?(u=Math.pow(10,-a)/o,s=Math.round(t*u),c=Math.round(e*u),s/u<t&&++s,c/u>e&&--c,u=-u):(u=Math.pow(10,a)*o,s=Math.round(t/u),c=Math.round(e/u),s*u<t&&++s,c*u>e&&--c),c<s&&.5<=n&&n<2?Ai(t,e,n*2):[s,c,u]}function qy(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[a,i,o]=r?Ai(e,t,n):Ai(t,e,n);if(!(i>=a))return[];const s=i-a+1,c=new Array(s);if(r)if(o<0)for(let u=0;u<s;++u)c[u]=(i-u)/-o;else for(let u=0;u<s;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<s;++u)c[u]=(a+u)/-o;else for(let u=0;u<s;++u)c[u]=(a+u)*o;return c}function Ms(t,e,n){return e=+e,t=+t,n=+n,Ai(t,e,n)[2]}function Yy(t,e,n){e=+e,t=+t,n=+n;const r=e<t,a=r?Ms(e,t,n):Ms(t,e,n);return(r?-1:1)*(a<0?1/-a:a)}function Jy(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ns(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function lf(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ba(){}var Ma=.7,Vi=1/Ma,Pn="\\s*([+-]?\\d+)\\s*",Na="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",cr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Zy=/^#([0-9a-f]{3,8})$/,Qy=new RegExp(`^rgb\\(${Pn},${Pn},${Pn}\\)$`),e5=new RegExp(`^rgb\\(${cr},${cr},${cr}\\)$`),t5=new RegExp(`^rgba\\(${Pn},${Pn},${Pn},${Na}\\)$`),r5=new RegExp(`^rgba\\(${cr},${cr},${cr},${Na}\\)$`),n5=new RegExp(`^hsl\\(${Na},${cr},${cr}\\)$`),a5=new RegExp(`^hsla\\(${Na},${cr},${cr},${Na}\\)$`),pf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ns(ba,Ra,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:hf,formatHex:hf,formatHex8:i5,formatHsl:o5,formatRgb:vf,toString:vf});function hf(){return this.rgb().formatHex()}function i5(){return this.rgb().formatHex8()}function o5(){return xf(this).formatHsl()}function vf(){return this.rgb().formatRgb()}function Ra(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Zy.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?gf(e):n===3?new Lt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Bi(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Bi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Qy.exec(t))?new Lt(e[1],e[2],e[3],1):(e=e5.exec(t))?new Lt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=t5.exec(t))?Bi(e[1],e[2],e[3],e[4]):(e=r5.exec(t))?Bi(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=n5.exec(t))?mf(e[1],e[2]/100,e[3]/100,1):(e=a5.exec(t))?mf(e[1],e[2]/100,e[3]/100,e[4]):pf.hasOwnProperty(t)?gf(pf[t]):t==="transparent"?new Lt(NaN,NaN,NaN,0):null}function gf(t){return new Lt(t>>16&255,t>>8&255,t&255,1)}function Bi(t,e,n,r){return r<=0&&(t=e=n=NaN),new Lt(t,e,n,r)}function s5(t){return t instanceof ba||(t=Ra(t)),t?(t=t.rgb(),new Lt(t.r,t.g,t.b,t.opacity)):new Lt}function Rs(t,e,n,r){return arguments.length===1?s5(t):new Lt(t,e,n,r??1)}function Lt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Ns(Lt,Rs,lf(ba,{brighter(t){return t=t==null?Vi:Math.pow(Vi,t),new Lt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ma:Math.pow(Ma,t),new Lt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Lt(sn(this.r),sn(this.g),sn(this.b),Ui(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:df,formatHex:df,formatHex8:u5,formatRgb:yf,toString:yf}));function df(){return`#${un(this.r)}${un(this.g)}${un(this.b)}`}function u5(){return`#${un(this.r)}${un(this.g)}${un(this.b)}${un((isNaN(this.opacity)?1:this.opacity)*255)}`}function yf(){const t=Ui(this.opacity);return`${t===1?"rgb(":"rgba("}${sn(this.r)}, ${sn(this.g)}, ${sn(this.b)}${t===1?")":`, ${t})`}`}function Ui(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function sn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function un(t){return t=sn(t),(t<16?"0":"")+t.toString(16)}function mf(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Yt(t,e,n,r)}function xf(t){if(t instanceof Yt)return new Yt(t.h,t.s,t.l,t.opacity);if(t instanceof ba||(t=Ra(t)),!t)return new Yt;if(t instanceof Yt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),i=Math.max(e,n,r),o=NaN,s=i-a,c=(i+a)/2;return s?(e===i?o=(n-r)/s+(n<r)*6:n===i?o=(r-e)/s+2:o=(e-n)/s+4,s/=c<.5?i+a:2-i-a,o*=60):s=c>0&&c<1?0:o,new Yt(o,s,c,t.opacity)}function c5(t,e,n,r){return arguments.length===1?xf(t):new Yt(t,e,n,r??1)}function Yt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ns(Yt,c5,lf(ba,{brighter(t){return t=t==null?Vi:Math.pow(Vi,t),new Yt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ma:Math.pow(Ma,t),new Yt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new Lt(Ls(t>=240?t-240:t+120,a,r),Ls(t,a,r),Ls(t<120?t+240:t-120,a,r),this.opacity)},clamp(){return new Yt(Cf(this.h),Gi(this.s),Gi(this.l),Ui(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ui(this.opacity);return`${t===1?"hsl(":"hsla("}${Cf(this.h)}, ${Gi(this.s)*100}%, ${Gi(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Cf(t){return t=(t||0)%360,t<0?t+360:t}function Gi(t){return Math.max(0,Math.min(1,t||0))}function Ls(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const ks=t=>()=>t;function f5(t,e){return function(n){return t+n*e}}function l5(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function p5(t){return(t=+t)==1?Sf:function(e,n){return n-e?l5(e,n,t):ks(isNaN(e)?n:e)}}function Sf(t,e){var n=e-t;return n?f5(t,n):ks(isNaN(t)?e:t)}const Tf=function t(e){var n=p5(e);function r(a,i){var o=n((a=Rs(a)).r,(i=Rs(i)).r),s=n(a.g,i.g),c=n(a.b,i.b),u=Sf(a.opacity,i.opacity);return function(f){return a.r=o(f),a.g=s(f),a.b=c(f),a.opacity=u(f),a+""}}return r.gamma=t,r}(1);function h5(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=t[a]*(1-i)+e[a]*i;return r}}function v5(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function g5(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,a=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)a[o]=Vs(t[o],e[o]);for(;o<n;++o)i[o]=e[o];return function(s){for(o=0;o<r;++o)i[o]=a[o](s);return i}}function d5(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Pi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function y5(t,e){var n={},r={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?n[a]=Vs(t[a],e[a]):r[a]=e[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var Fs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,As=new RegExp(Fs.source,"g");function m5(t){return function(){return t}}function x5(t){return function(e){return t(e)+""}}function C5(t,e){var n=Fs.lastIndex=As.lastIndex=0,r,a,i,o=-1,s=[],c=[];for(t=t+"",e=e+"";(r=Fs.exec(t))&&(a=As.exec(e));)(i=a.index)>n&&(i=e.slice(n,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,c.push({i:o,x:Pi(r,a)})),n=As.lastIndex;return n<e.length&&(i=e.slice(n),s[o]?s[o]+=i:s[++o]=i),s.length<2?c[0]?x5(c[0].x):m5(e):(e=c.length,function(u){for(var f=0,l;f<e;++f)s[(l=c[f]).i]=l.x(u);return s.join("")})}function Vs(t,e){var n=typeof e,r;return e==null||n==="boolean"?ks(e):(n==="number"?Pi:n==="string"?(r=Ra(e))?(e=r,Tf):C5:e instanceof Ra?Tf:e instanceof Date?d5:v5(e)?h5:Array.isArray(e)?g5:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?y5:Pi)(t,e)}function S5(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function T5(t){return function(){return t}}function w5(t){return+t}var wf=[0,1];function In(t){return t}function Bs(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:T5(isNaN(e)?NaN:.5)}function E5(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function D5(t,e,n){var r=t[0],a=t[1],i=e[0],o=e[1];return a<r?(r=Bs(a,r),i=n(o,i)):(r=Bs(r,a),i=n(i,o)),function(s){return i(r(s))}}function O5(t,e,n){var r=Math.min(t.length,e.length)-1,a=new Array(r),i=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)a[o]=Bs(t[o],t[o+1]),i[o]=n(e[o],e[o+1]);return function(s){var c=Hy(t,s,1,r)-1;return i[c](a[c](s))}}function _5(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function b5(){var t=wf,e=wf,n=Vs,r,a,i,o=In,s,c,u;function f(){var p=Math.min(t.length,e.length);return o!==In&&(o=E5(t[0],t[p-1])),s=p>2?O5:D5,c=u=null,l}function l(p){return p==null||isNaN(p=+p)?i:(c||(c=s(t.map(r),e,n)))(r(o(p)))}return l.invert=function(p){return o(a((u||(u=s(e,t.map(r),Pi)))(p)))},l.domain=function(p){return arguments.length?(t=Array.from(p,w5),f()):t.slice()},l.range=function(p){return arguments.length?(e=Array.from(p),f()):e.slice()},l.rangeRound=function(p){return e=Array.from(p),n=S5,f()},l.clamp=function(p){return arguments.length?(o=p?!0:In,f()):o!==In},l.interpolate=function(p){return arguments.length?(n=p,f()):n},l.unknown=function(p){return arguments.length?(i=p,l):i},function(p,h){return r=p,a=h,f()}}function M5(){return b5()(In,In)}function N5(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ii(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function jn(t){return t=Ii(Math.abs(t)),t?t[1]:NaN}function R5(t,e){return function(n,r){for(var a=n.length,i=[],o=0,s=t[0],c=0;a>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),i.push(n.substring(a-=s,a+s)),!((c+=s+1)>r));)s=t[o=(o+1)%t.length];return i.reverse().join(e)}}function L5(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var k5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ji(t){if(!(e=k5.exec(t)))throw new Error("invalid format: "+t);var e;return new Us({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ji.prototype=Us.prototype;function Us(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Us.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function F5(t){e:for(var e=t.length,n=1,r=-1,a;n<e;++n)switch(t[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(a+1):t}var Ef;function A5(t,e){var n=Ii(t,e);if(!n)return t+"";var r=n[0],a=n[1],i=a-(Ef=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Ii(t,Math.max(0,e+i-1))[0]}function Df(t,e){var n=Ii(t,e);if(!n)return t+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const Of={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:N5,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Df(t*100,e),r:Df,s:A5,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function _f(t){return t}var bf=Array.prototype.map,Mf=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function V5(t){var e=t.grouping===void 0||t.thousands===void 0?_f:R5(bf.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?_f:L5(bf.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(l){l=ji(l);var p=l.fill,h=l.align,v=l.sign,y=l.symbol,m=l.zero,x=l.width,g=l.comma,d=l.precision,C=l.trim,S=l.type;S==="n"?(g=!0,S="g"):Of[S]||(d===void 0&&(d=12),C=!0,S="g"),(m||p==="0"&&h==="=")&&(m=!0,p="0",h="=");var T=y==="$"?n:y==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",w=y==="$"?r:/[%p]/.test(S)?o:"",E=Of[S],D=/[defgprs%]/.test(S);d=d===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d));function b(O){var M=T,R=w,N,U,W;if(S==="c")R=E(O)+R,O="";else{O=+O;var I=O<0||1/O<0;if(O=isNaN(O)?c:E(Math.abs(O),d),C&&(O=F5(O)),I&&+O==0&&v!=="+"&&(I=!1),M=(I?v==="("?v:s:v==="-"||v==="("?"":v)+M,R=(S==="s"?Mf[8+Ef/3]:"")+R+(I&&v==="("?")":""),D){for(N=-1,U=O.length;++N<U;)if(W=O.charCodeAt(N),48>W||W>57){R=(W===46?a+O.slice(N+1):O.slice(N))+R,O=O.slice(0,N);break}}}g&&!m&&(O=e(O,1/0));var G=M.length+O.length+R.length,F=G<x?new Array(x-G+1).join(p):"";switch(g&&m&&(O=e(F+O,F.length?x-R.length:1/0),F=""),h){case"<":O=M+O+R+F;break;case"=":O=M+F+O+R;break;case"^":O=F.slice(0,G=F.length>>1)+M+O+R+F.slice(G);break;default:O=F+M+O+R;break}return i(O)}return b.toString=function(){return l+""},b}function f(l,p){var h=u((l=ji(l),l.type="f",l)),v=Math.max(-8,Math.min(8,Math.floor(jn(p)/3)))*3,y=Math.pow(10,-v),m=Mf[8+v/3];return function(x){return h(y*x)+m}}return{format:u,formatPrefix:f}}var zi,Nf,Rf;B5({thousands:",",grouping:[3],currency:["$",""]});function B5(t){return zi=V5(t),Nf=zi.format,Rf=zi.formatPrefix,zi}function U5(t){return Math.max(0,-jn(Math.abs(t)))}function G5(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(jn(e)/3)))*3-jn(Math.abs(t)))}function P5(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,jn(e)-jn(t))+1}function I5(t,e,n,r){var a=Yy(t,e,n),i;switch(r=ji(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=G5(a,o))&&(r.precision=i),Rf(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=P5(a,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=U5(a))&&(r.precision=i-(r.type==="%")*2);break}}return Nf(r)}function j5(t){var e=t.domain;return t.ticks=function(n){var r=e();return qy(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var a=e();return I5(a[0],a[a.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),a=0,i=r.length-1,o=r[a],s=r[i],c,u,f=10;for(s<o&&(u=o,o=s,s=u,u=a,a=i,i=u);f-- >0;){if(u=Ms(o,s,n),u===c)return r[a]=o,r[i]=s,e(r);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;c=u}return t},t}function Gs(){var t=M5();return t.copy=function(){return _5(t,Gs())},Jy.apply(t,arguments),j5(t)}var Ps={},z5={get exports(){return Ps},set exports(t){Ps=t}};(function(t){(function(e,n,r){function a(c){var u=this,f=s();u.next=function(){var l=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=l-(u.c=l|0)},u.c=1,u.s0=f(" "),u.s1=f(" "),u.s2=f(" "),u.s0-=f(c),u.s0<0&&(u.s0+=1),u.s1-=f(c),u.s1<0&&(u.s1+=1),u.s2-=f(c),u.s2<0&&(u.s2+=1),f=null}function i(c,u){return u.c=c.c,u.s0=c.s0,u.s1=c.s1,u.s2=c.s2,u}function o(c,u){var f=new a(c),l=u&&u.state,p=f.next;return p.int32=function(){return f.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,l&&(typeof l=="object"&&i(l,f),p.state=function(){return i(f,{})}),p}function s(){var c=4022871197,u=function(f){f=String(f);for(var l=0;l<f.length;l++){c+=f.charCodeAt(l);var p=.02519603282416938*c;c=p>>>0,p-=c,p*=c,c=p>>>0,p-=c,c+=p*4294967296}return(c>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(At,t,!1)})(z5);var Is={},W5={get exports(){return Is},set exports(t){Is=t}};(function(t){(function(e,n,r){function a(s){var c=this,u="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var l=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^l^l>>>8},s===(s|0)?c.x=s:u+=s;for(var f=0;f<u.length+64;f++)c.x^=u.charCodeAt(f)|0,c.next()}function i(s,c){return c.x=s.x,c.y=s.y,c.z=s.z,c.w=s.w,c}function o(s,c){var u=new a(s),f=c&&c.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var p=u.next()>>>11,h=(u.next()>>>0)/4294967296,v=(p+h)/(1<<21);while(v===0);return v},l.int32=u.next,l.quick=l,f&&(typeof f=="object"&&i(f,u),l.state=function(){return i(u,{})}),l}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(At,t,!1)})(W5);var js={},H5={get exports(){return js},set exports(t){js=t}};(function(t){(function(e,n,r){function a(s){var c=this,u="";c.next=function(){var l=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^(l^l<<1))|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,s===(s|0)?c.x=s:u+=s;for(var f=0;f<u.length+64;f++)c.x^=u.charCodeAt(f)|0,f==u.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(s,c){return c.x=s.x,c.y=s.y,c.z=s.z,c.w=s.w,c.v=s.v,c.d=s.d,c}function o(s,c){var u=new a(s),f=c&&c.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var p=u.next()>>>11,h=(u.next()>>>0)/4294967296,v=(p+h)/(1<<21);while(v===0);return v},l.int32=u.next,l.quick=l,f&&(typeof f=="object"&&i(f,u),l.state=function(){return i(u,{})}),l}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(At,t,!1)})(H5);var zs={},$5={get exports(){return zs},set exports(t){zs=t}};(function(t){(function(e,n,r){function a(s){var c=this;c.next=function(){var f=c.x,l=c.i,p,h;return p=f[l],p^=p>>>7,h=p^p<<24,p=f[l+1&7],h^=p^p>>>10,p=f[l+3&7],h^=p^p>>>3,p=f[l+4&7],h^=p^p<<7,p=f[l+7&7],p=p^p<<13,h^=p^p<<9,f[l]=h,c.i=l+1&7,h};function u(f,l){var p,h=[];if(l===(l|0))h[0]=l;else for(l=""+l,p=0;p<l.length;++p)h[p&7]=h[p&7]<<15^l.charCodeAt(p)+h[p+1&7]<<13;for(;h.length<8;)h.push(0);for(p=0;p<8&&h[p]===0;++p);for(p==8?h[7]=-1:h[p],f.x=h,f.i=0,p=256;p>0;--p)f.next()}u(c,s)}function i(s,c){return c.x=s.x.slice(),c.i=s.i,c}function o(s,c){s==null&&(s=+new Date);var u=new a(s),f=c&&c.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var p=u.next()>>>11,h=(u.next()>>>0)/4294967296,v=(p+h)/(1<<21);while(v===0);return v},l.int32=u.next,l.quick=l,f&&(f.x&&i(f,u),l.state=function(){return i(u,{})}),l}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(At,t,!1)})($5);var Ws={},K5={get exports(){return Ws},set exports(t){Ws=t}};(function(t){(function(e,n,r){function a(s){var c=this;c.next=function(){var f=c.w,l=c.X,p=c.i,h,v;return c.w=f=f+1640531527|0,v=l[p+34&127],h=l[p=p+1&127],v^=v<<13,h^=h<<17,v^=v>>>15,h^=h>>>12,v=l[p]=v^h,c.i=p,v+(f^f>>>16)|0};function u(f,l){var p,h,v,y,m,x=[],g=128;for(l===(l|0)?(h=l,l=null):(l=l+"\0",h=0,g=Math.max(g,l.length)),v=0,y=-32;y<g;++y)l&&(h^=l.charCodeAt((y+32)%l.length)),y===0&&(m=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,y>=0&&(m=m+1640531527|0,p=x[y&127]^=h+m,v=p==0?v+1:0);for(v>=128&&(x[(l&&l.length||0)&127]=-1),v=127,y=4*128;y>0;--y)h=x[v+34&127],p=x[v=v+1&127],h^=h<<13,p^=p<<17,h^=h>>>15,p^=p>>>12,x[v]=h^p;f.w=m,f.X=x,f.i=v}u(c,s)}function i(s,c){return c.i=s.i,c.w=s.w,c.X=s.X.slice(),c}function o(s,c){s==null&&(s=+new Date);var u=new a(s),f=c&&c.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var p=u.next()>>>11,h=(u.next()>>>0)/4294967296,v=(p+h)/(1<<21);while(v===0);return v},l.int32=u.next,l.quick=l,f&&(f.X&&i(f,u),l.state=function(){return i(u,{})}),l}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(At,t,!1)})(K5);var Hs={},X5={get exports(){return Hs},set exports(t){Hs=t}};(function(t){(function(e,n,r){function a(s){var c=this,u="";c.next=function(){var l=c.b,p=c.c,h=c.d,v=c.a;return l=l<<25^l>>>7^p,p=p-h|0,h=h<<24^h>>>8^v,v=v-l|0,c.b=l=l<<20^l>>>12^p,c.c=p=p-h|0,c.d=h<<16^p>>>16^v,c.a=v-l|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,s===Math.floor(s)?(c.a=s/4294967296|0,c.b=s|0):u+=s;for(var f=0;f<u.length+20;f++)c.b^=u.charCodeAt(f)|0,c.next()}function i(s,c){return c.a=s.a,c.b=s.b,c.c=s.c,c.d=s.d,c}function o(s,c){var u=new a(s),f=c&&c.state,l=function(){return(u.next()>>>0)/4294967296};return l.double=function(){do var p=u.next()>>>11,h=(u.next()>>>0)/4294967296,v=(p+h)/(1<<21);while(v===0);return v},l.int32=u.next,l.quick=l,f&&(typeof f=="object"&&i(f,u),l.state=function(){return i(u,{})}),l}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(At,t,!1)})(X5);var $s={},q5={get exports(){return $s},set exports(t){$s=t}};const Y5=zd(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));(function(t){(function(e,n,r){var a=256,i=6,o=52,s="random",c=r.pow(a,i),u=r.pow(2,o),f=u*2,l=a-1,p;function h(C,S,T){var w=[];S=S==!0?{entropy:!0}:S||{};var E=x(m(S.entropy?[C,d(n)]:C??g(),3),w),D=new v(w),b=function(){for(var O=D.g(i),M=c,R=0;O<u;)O=(O+R)*a,M*=a,R=D.g(1);for(;O>=f;)O/=2,M/=2,R>>>=1;return(O+R)/M};return b.int32=function(){return D.g(4)|0},b.quick=function(){return D.g(4)/4294967296},b.double=b,x(d(D.S),n),(S.pass||T||function(O,M,R,N){return N&&(N.S&&y(N,D),O.state=function(){return y(D,{})}),R?(r[s]=O,M):O})(b,E,"global"in S?S.global:this==r,S.state)}function v(C){var S,T=C.length,w=this,E=0,D=w.i=w.j=0,b=w.S=[];for(T||(C=[T++]);E<a;)b[E]=E++;for(E=0;E<a;E++)b[E]=b[D=l&D+C[E%T]+(S=b[E])],b[D]=S;(w.g=function(O){for(var M,R=0,N=w.i,U=w.j,W=w.S;O--;)M=W[N=l&N+1],R=R*a+W[l&(W[N]=W[U=l&U+M])+(W[U]=M)];return w.i=N,w.j=U,R})(a)}function y(C,S){return S.i=C.i,S.j=C.j,S.S=C.S.slice(),S}function m(C,S){var T=[],w=typeof C,E;if(S&&w=="object")for(E in C)try{T.push(m(C[E],S-1))}catch{}return T.length?T:w=="string"?C:C+"\0"}function x(C,S){for(var T=C+"",w,E=0;E<T.length;)S[l&E]=l&(w^=S[l&E]*19)+T.charCodeAt(E++);return d(S)}function g(){try{var C;return p&&(C=p.randomBytes)?C=C(a):(C=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(C)),d(C)}catch{var S=e.navigator,T=S&&S.plugins;return[+new Date,e,T,e.screen,d(n)]}}function d(C){return String.fromCharCode.apply(0,C)}if(x(r.random(),n),t.exports){t.exports=h;try{p=Y5}catch{}}else r["seed"+s]=h})(typeof self<"u"?self:At,[],Math)})(q5);var J5=Ps,Z5=Is,Q5=js,em=zs,tm=Ws,rm=Hs,cn=$s;cn.alea=J5,cn.xor128=Z5,cn.xorwow=Q5,cn.xorshift7=em,cn.xor4096=tm,cn.tychei=rm;var Lf=cn,kf=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],nm=[1,0,0,0,1,0,0,0,1],Ks=1e-6,Xs=1e-12,Ff=B.vtkErrorMacro,fn=B.vtkWarningMacro,Af=0,Vf=20;function La(t){return function(){return Ff("vtkMath::".concat(t," - NOT IMPLEMENTED"))}}function ka(t,e,n,r){for(var a,i=0;i<e;i++)a=t[n*e+i],t[n*e+i]=t[r*e+i],t[r*e+i]=a}function Fa(t,e,n,r){for(var a,i=0;i<e;i++)a=t[i*e+n],t[i*e+n]=t[i*e+r],t[i*e+r]=a}function Qe(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3,e=Array(t),n=0;n<t;++n)e[n]=0;return e}var am=function(){return Math.PI};function et(t){return t/180*Math.PI}function Aa(t){return t*180/Math.PI}var Va=Math.round,qs=Math.floor,im=Math.ceil,om=Math.min,sm=Math.max;function um(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=1/0,a=e,i=t.length;a<i;a+=n)t[a]<r&&(r=t[a]);return r}function cm(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=-1/0,a=e,i=t.length;a<i;a+=n)r<t[a]&&(r=t[a]);return r}function fm(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=1/0,a=-1/0,i=e,o=t.length;i<o;i+=n)t[i]<r&&(r=t[i]),a<t[i]&&(a=t[i]);return[r,a]}var lm=La("ceilLog2"),pm=La("factorial");function zt(t){for(var e=1;e<t;)e*=2;return e}function Ba(t){return t===zt(t)}function hm(t,e){for(var n=1,r=1;r<=e;++r)n*=(t-r+1)/r;return Math.floor(n)}function vm(t,e){if(t<e)return 0;for(var n=Qe(e),r=0;r<e;++r)n[r]=r;return n}function gm(t,e,n){for(var r=0,a=e-1;a>=0;--a)if(n[a]<t-e+a){for(var i=n[a]+1;a<e;)n[a++]=i++;r=1;break}return r}function dm(t){Lf("".concat(t),{global:!0}),Af=t}function ym(){return Af}function Wi(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=e-t;return t+n*Math.random()}var mm=La("gaussian");function Ua(t,e,n){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n}function yt(t,e,n){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n}function Ys(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,t}function Bf(t,e){return t[0]*=e,t[1]*=e,t}function Js(t,e,n,r){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r[2]=t[2]+e[2]*n,r}function xm(t,e,n,r){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r}function _e(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Cm(t,e,n){n[0]=t[0]*e[0],n[1]=t[0]*e[1],n[2]=t[0]*e[2],n[3]=t[1]*e[0],n[4]=t[1]*e[1],n[5]=t[1]*e[2],n[6]=t[2]*e[0],n[7]=t[2]*e[1],n[8]=t[2]*e[2]}function lt(t,e,n){var r=t[1]*e[2]-t[2]*e[1],a=t[2]*e[0]-t[0]*e[2],i=t[0]*e[1]-t[1]*e[0];return n[0]=r,n[1]=a,n[2]=i,n}function Bt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;switch(e){case 1:return Math.abs(t);case 2:return Math.sqrt(t[0]*t[0]+t[1]*t[1]);case 3:return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);default:{for(var n=0,r=0;r<e;r++)n+=t[r]*t[r];return Math.sqrt(n)}}}function ot(t){var e=Bt(t);return e!==0&&(t[0]/=e,t[1]/=e,t[2]/=e),e}function Sm(t,e,n,r){var a=t[0]*t[0],i=t[1]*t[1],o=t[2]*t[2],s=Math.sqrt(a+i+o),c,u,f;a>i&&a>o?(c=0,u=1,f=2):i>o?(c=1,u=2,f=0):(c=2,u=0,f=1);var l=t[c]/s,p=t[u]/s,h=t[f]/s,v=Math.sqrt(l*l+h*h);if(r!==0){var y=Math.sin(r),m=Math.cos(r);e&&(e[c]=(h*m-l*p*y)/v,e[u]=y*v,e[f]=(-(l*m)-p*h*y)/v),n&&(n[c]=(-(h*y)-l*p*m)/v,n[u]=m*v,n[f]=(l*y-p*h*m)/v)}else e&&(e[c]=h/v,e[u]=0,e[f]=-l/v),n&&(n[c]=-l*p/v,n[u]=v,n[f]=-p*h/v)}function Tm(t,e,n){var r=_e(e,e);if(r===0)return n[0]=0,n[1]=0,n[2]=0,!1;for(var a=_e(t,e)/r,i=0;i<3;i++)n[i]=e[i];return Ys(n,a),!0}function Zs(t,e){return t[0]*e[0]+t[1]*e[1]}function wm(t,e,n){var r=Zs(e,e);if(r===0)return n[0]=0,n[1]=0,!1;for(var a=Zs(t,e)/r,i=0;i<2;i++)n[i]=e[i];return Bf(n,a),!0}function Ut(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])+(t[2]-e[2])*(t[2]-e[2])}function Em(t,e){var n=[0,0,0];return lt(t,e,n),Math.atan2(Bt(n),_e(t,e))}function Dm(t,e,n){var r=Math.abs(t-n);return 1/Math.sqrt(2*Math.PI*e)*Math.exp(-Math.pow(r,2)/(2*e))}function Om(t,e,n){var r=Math.abs(t-n);return Math.exp(-Math.pow(r,2)/(2*e))}function _m(t,e,n){n[0]=t[0]*e[0],n[1]=t[0]*e[1],n[2]=t[1]*e[0],n[3]=t[1]*e[1]}function Uf(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Gf(t){var e=Uf(t);return e!==0&&(t[0]/=e,t[1]/=e),e}function st(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===2?e[0][0]*e[1][1]-e[1][0]*e[0][1]:e.length===4?e[0]*e[3]-e[1]*e[2]:Number.NaN}function bm(t,e){for(var n,r,a,i=[0,0,0],o=0;o<3;o++)a=Math.abs(t[o*3]),(r=Math.abs(t[o*3+1]))>a&&(a=r),(r=Math.abs(t[o*3+2]))>a&&(a=r),i[o]=1/a;a=i[0]*Math.abs(t[0]),n=0,(r=i[1]*Math.abs(t[3]))>=a&&(a=r,n=1),(r=i[2]*Math.abs(t[6]))>=a&&(n=2),n!==0&&(ka(t,3,n,0),i[n]=i[0]),e[0]=n,t[3]/=t[0],t[6]/=t[0],t[4]-=t[3]*t[1],t[7]-=t[6]*t[1],a=i[1]*Math.abs(t[4]),n=1,(r=i[2]*Math.abs(t[7]))>=a&&(n=2,ka(t,3,1,2),i[2]=i[1]),e[1]=n,t[7]/=t[4],t[5]-=t[3]*t[2],t[8]-=t[6]*t[2]+t[7]*t[5],e[2]=2}function Mm(t,e,n){var r=n[e[0]];n[e[0]]=n[0],n[0]=r,r=n[e[1]],n[e[1]]=n[1],n[1]=r-t[3]*n[0],r=n[e[2]],n[e[2]]=n[2],n[2]=r-t[6]*n[0]-t[7]*n[1],n[2]/=t[8],n[1]=(n[1]-t[5]*n[2])/t[4],n[0]=(n[0]-t[1]*n[1]-t[2]*n[2])/t[0]}function Nm(t,e,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],c=t[5],u=t[6],f=t[7],l=t[8],p=+st(s,f,c,l),h=-st(o,u,c,l),v=+st(o,u,s,f),y=-st(a,f,i,l),m=+st(r,u,i,l),x=-st(r,u,a,f),g=+st(a,s,i,c),d=-st(r,o,i,c),C=+st(r,o,a,s),S=r*p+a*h+i*v,T=p*e[0]+y*e[1]+g*e[2],w=h*e[0]+m*e[1]+d*e[2],E=v*e[0]+x*e[1]+C*e[2];n[0]=T/S,n[1]=w/S,n[2]=E/S}function Ga(t,e,n){var r=t[0]*e[0]+t[1]*e[1]+t[2]*e[2],a=t[3]*e[0]+t[4]*e[1]+t[5]*e[2],i=t[6]*e[0]+t[7]*e[1]+t[8]*e[2];n[0]=r,n[1]=a,n[2]=i}function Qs(t,e,n){for(var r=ve(t),a=ve(e),i=0;i<3;i++)n[i]=r[0]*a[i]+r[1]*a[i+3]+r[2]*a[i+6],n[i+3]=r[3]*a[i]+r[4]*a[i+3]+r[5]*a[i+6],n[i+6]=r[6]*a[i]+r[7]*a[i+3]+r[8]*a[i+6]}function Rm(t,e,n,r,a,i,o){r!==a&&Ff("Number of columns of A must match number of rows of B.");for(var s=ve(t),c=ve(e),u=0;u<n;u++)for(var f=0;f<i;f++){o[u*i+f]=0;for(var l=0;l<r;l++)o[u*i+f]+=s[u*r+l]*c[f+i*l]}}function zn(t,e){var n;n=t[3],e[3]=t[1],e[1]=n,n=t[6],e[6]=t[2],e[2]=n,n=t[7],e[7]=t[5],e[5]=n,e[0]=t[0],e[4]=t[4],e[8]=t[8]}function Lm(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],c=t[6],u=t[7],f=t[8],l=+st(o,u,s,f),p=-st(i,c,s,f),h=+st(i,c,o,u),v=-st(r,u,a,f),y=+st(n,c,a,f),m=-st(n,c,r,u),x=+st(r,o,a,s),g=-st(n,i,a,s),d=+st(n,i,r,o),C=n*l+r*p+a*h;C===0&&fn("Matrix has 0 determinant"),e[0]=l/C,e[3]=p/C,e[6]=h/C,e[1]=v/C,e[4]=y/C,e[7]=m/C,e[2]=x/C,e[5]=g/C,e[8]=d/C}function Hi(t){return t[0]*t[4]*t[8]+t[3]*t[7]*t[2]+t[6]*t[1]*t[5]-t[0]*t[7]*t[5]-t[3]*t[1]*t[8]-t[6]*t[4]*t[2]}function Pf(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ks;if(t.length!==e.length)return!1;function r(a,i){return Math.abs(a-e[i])<=n}return t.every(r)}var Pa=Pf;function If(t){for(var e=0;e<3;e++)t[e*3]=t[e*3+1]=t[e*3+2]=0,t[e*3+e]=1}function jf(t,e){for(var n=0;n<t;n++){for(var r=0;r<t;r++)e[n*t+r]=0;e[n*t+n]=1}return e}function km(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ks;return Pa(t,kf,e)}function Fm(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ks;return Pa(t,nm,e)}function zf(t,e){var n=t[0]*t[0],r=t[0]*t[1],a=t[0]*t[2],i=t[0]*t[3],o=t[1]*t[1],s=t[2]*t[2],c=t[3]*t[3],u=t[1]*t[2],f=t[1]*t[3],l=t[2]*t[3],p=o+s+c,h=1/(n+p),v=(n-p)*h;h*=2,e[0]=o*h+v,e[3]=(u+i)*h,e[6]=(f-a)*h,e[1]=(u-i)*h,e[4]=s*h+v,e[7]=(l+r)*h,e[2]=(f+a)*h,e[5]=(l-r)*h,e[8]=c*h+v}function $i(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!"".concat(t).includes("e"))return+"".concat(Math.round("".concat(t,"e+").concat(e)),"e-").concat(e);var n="".concat(t).split("e"),r="";return+n[1]+e>0&&(r="+"),+"".concat(Math.round("".concat(+n[0],"e").concat(r).concat(+n[1]+e)),"e-").concat(e)}function e0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return e[0]=$i(t[0],n),e[1]=$i(t[1],n),e[2]=$i(t[2],n),e}function Ia(t,e,n,r){var a,i,o,s,c,u,f,l,p,h,v,y,m,x,g,d,C=Qe(e),S=Qe(e),T=function(D,b,O){x=D[b],m=D[O],D[b]=x-y*(m+x*h),D[O]=m+y*(x-m*h)};for(jf(e,r),c=0;c<e;c++)C[c]=n[c]=t[c+c*e],S[c]=0;for(a=0;a<Vf;a++){for(v=0,c=0;c<e-1;c++)for(s=c+1;s<e;s++)v+=Math.abs(t[c*e+s]);if(v===0)break;for(a<3?f=.2*v/(e*e):f=0,c=0;c<e-1;c++)for(s=c+1;s<e;s++)if(x=100*Math.abs(t[c*e+s]),a>3&&Math.abs(n[c])+x===Math.abs(n[c])&&Math.abs(n[s])+x===Math.abs(n[s]))t[c*e+s]=0;else if(Math.abs(t[c*e+s])>f){for(m=n[s]-n[c],Math.abs(m)+x===Math.abs(m)?p=t[c*e+s]/m:(l=.5*m/t[c*e+s],p=1/(Math.abs(l)+Math.sqrt(1+l*l)),l<0&&(p=-p)),g=1/Math.sqrt(1+p*p),y=p*g,h=y/(1+g),m=p*t[c*e+s],S[c]-=m,S[s]+=m,n[c]-=m,n[s]+=m,t[c*e+s]=0,i=0;i<=c-1;i++)T(t,i*e+c,i*e+s);for(i=c+1;i<=s-1;i++)T(t,c*e+i,i*e+s);for(i=s+1;i<e;i++)T(t,c*e+i,s*e+i);for(i=0;i<e;i++)T(r,i*e+c,i*e+s)}for(c=0;c<e;c++)C[c]+=S[c],n[c]=C[c],S[c]=0}if(a>=Vf)return fn("vtkMath::Jacobi: Error extracting eigenfunctions"),0;for(i=0;i<e-1;i++){for(o=i,d=n[o],a=i+1;a<e;a++)(n[a]>=d||Math.abs(n[a]-d)<Xs)&&(o=a,d=n[o]);o!==i&&(n[o]=n[i],n[i]=d,Fa(r,e,i,o))}var w=(e>>1)+(e&1);for(u=0,a=0;a<e*e;a++)r[a]>=0&&u++;if(u<w)for(a=0;a<e;a++)r[a*e+i]*=-1;return 1}function Wf(t,e){var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];n[0]=t[0]+t[4]+t[8],n[5]=t[0]-t[4]-t[8],n[10]=-t[0]+t[4]-t[8],n[15]=-t[0]-t[4]+t[8],n[1]=n[4]=t[7]-t[5],n[2]=n[8]=t[2]-t[6],n[3]=n[12]=t[3]-t[1],n[6]=n[9]=t[3]+t[1],n[7]=n[13]=t[2]+t[6],n[11]=n[14]=t[7]+t[5];var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=[0,0,0,0],i=[].concat(n);Ia(i,4,a,r),e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12]}function Am(t,e,n){var r=t[0]*e[0],a=t[0]*e[1],i=t[0]*e[2],o=t[0]*e[3],s=t[1]*e[0],c=t[1]*e[1],u=t[1]*e[2],f=t[1]*e[3],l=t[2]*e[0],p=t[2]*e[1],h=t[2]*e[2],v=t[2]*e[3],y=t[3]*e[0],m=t[3]*e[1],x=t[3]*e[2],g=t[3]*e[3];n[0]=r-c-h-g,n[1]=a+s+v-x,n[2]=i-f+l+m,n[3]=o+u-p+y}function Hf(t,e){for(var n=0;n<9;n++)e[n]=t[n];for(var r=Qe(3),a=Qe(3),i,o=0;o<3;o++){var s=Math.abs(e[o*3]),c=Math.abs(e[o*3+1]),u=Math.abs(e[o*3+2]);i=c>s?c:s,i=u>i?u:i,r[o]=1,i!==0&&(r[o]/=i)}var f=Math.abs(e[0])*r[0],l=Math.abs(e[3])*r[1],p=Math.abs(e[6])*r[2];a[0]=0,i=f,l>=i&&(i=l,a[0]=1),p>=i&&(a[0]=2),a[0]!==0&&(Fa(e,3,a[0],0),r[a[0]]=r[0]);var h=Math.abs(e[4])*r[1],v=Math.abs(e[7])*r[2];a[1]=1,i=h,v>=i&&(a[1]=2,Fa(e,3,1,2)),a[2]=2;var y=0;if(Hi(e)<0){y=1;for(var m=0;m<9;m++)e[m]=-e[m]}var x=Qe(4);if(Wf(e,x),zf(x,e),y)for(var g=0;g<9;g++)e[g]=-e[g];a[1]!==1&&Fa(e,3,a[1],1),a[0]!==0&&Fa(e,3,a[0],0)}function $f(t,e,n){var r,a,i,o,s,c,u=ve(t);if(Ia(u,3,e,n),e[0]===e[1]&&e[0]===e[2]){If(n);return}for(zn(n,n),r=0;r<3;r++)if(e[(r+1)%3]===e[(r+2)%3]){for(c=Math.abs(n[r*3]),o=0,a=1;a<3;a++)c<(s=Math.abs(n[r*3+a]))&&(c=s,o=a);o!==r&&(s=e[o],e[o]=e[r],e[r]=s,ka(n,3,r,o)),n[o*3+o]<0&&(n[o*3]=-n[o*3],n[o*3+1]=-n[o*3+1],n[o*3+2]=-n[o*3+2]),a=(o+1)%3,i=(o+2)%3,n[a*3]=0,n[a*3+1]=0,n[a*3+2]=0,n[a*3+a]=1;var f=lt([n[o*3],n[o*3+1],n[o*3+2]],[n[a*3],n[a*3+1],n[a*3+2]],[]);ot(f);for(var l=lt(f,[n[o*3],n[o*3+1],n[o*3+2]],[]),p=0;p<3;p++)n[i*3+p]=f[p],n[a*3+p]=l[p];zn(n,n);return}for(c=Math.abs(n[0]),o=0,r=1;r<3;r++)c<(s=Math.abs(n[r*3]))&&(c=s,o=r);if(o!==0){var h=e[o];e[o]=e[0],e[0]=h,ka(n,3,o,0)}if(Math.abs(n[4])<Math.abs(n[7])){var v=e[2];e[2]=e[1],e[1]=v,ka(n,3,1,2)}for(r=0;r<2;r++)n[r*3+r]<0&&(n[r*3]=-n[r*3],n[r*3+1]=-n[r*3+1],n[r*3+2]=-n[r*3+2]);Hi(n)<0&&(n[6]=-n[6],n[7]=-n[7],n[8]=-n[8]),zn(n,n)}function Vm(t,e,n,r){var a,i=ve(t),o=Hi(i);if(o<0)for(a=0;a<9;a++)i[a]=-i[a];Hf(i,e),zn(i,i),Qs(i,e,r),$f(r,n,r),Qs(e,r,e),zn(r,r),o<0&&(n[0]=-n[0],n[1]=-n[1],n[2]=-n[2])}function t0(t,e,n){var r,a,i,o,s=0,c,u,f,l=Qe(n);for(r=0;r<n;r++){for(o=0,a=0;a<n;a++)(f=Math.abs(t[r*n+a]))>o&&(o=f);if(o===0)return fn("Unable to factor linear system"),0;l[r]=1/o}for(a=0;a<n;a++){for(r=0;r<a;r++){for(c=t[r*n+a],i=0;i<r;i++)c-=t[r*n+i]*t[i*n+a];t[r*n+a]=c}for(o=0,r=a;r<n;r++){for(c=t[r*n+a],i=0;i<a;i++)c-=t[r*n+i]*t[i*n+a];t[r*n+a]=c,(u=l[r]*Math.abs(c))>=o&&(o=u,s=r)}if(a!==s){for(i=0;i<n;i++)u=t[s*n+i],t[s*n+i]=t[a*n+i],t[a*n+i]=u;l[s]=l[a]}if(e[a]=s,Math.abs(t[a*n+a])<=Xs)return fn("Unable to factor linear system"),0;if(a!==n-1)for(u=1/t[a*n+a],r=a+1;r<n;r++)t[r*n+a]*=u}return 1}function r0(t,e,n,r){var a,i,o,s,c;for(o=-1,a=0;a<r;a++){if(s=e[a],c=n[s],n[s]=n[a],o>=0)for(i=o;i<=a-1;i++)c-=t[a*r+i]*n[i];else c!==0&&(o=a);n[a]=c}for(a=r-1;a>=0;a--){for(c=n[a],i=a+1;i<r;i++)c-=t[a*r+i]*n[i];n[a]=c/t[a*r+a]}}function Kf(t,e,n){if(n===2){var r=Qe(2),a=st(t[0],t[1],t[2],t[3]);return a===0?0:(r[0]=(t[3]*e[0]-t[1]*e[1])/a,r[1]=(-(t[2]*e[0])+t[0]*e[1])/a,e[0]=r[0],e[1]=r[1],1)}if(n===1)return t[0]===0?0:(e[0]/=t[0],1);var i=Qe(n);return t0(t,i,n)===0?0:(r0(t,i,e,n),1)}function Xf(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,i=r||Qe(n),o=a||Qe(n);if(t0(t,i,n)===0)return null;for(var s=0;s<n;s++){for(var c=0;c<n;c++)o[c]=0;o[s]=1,r0(t,i,o,n);for(var u=0;u<n;u++)e[u*n+s]=o[u]}return e}function Bm(t,e){for(var n=+Number.MAX_VALUE,r=-Number.MAX_VALUE,a=0;a<e;a++)for(var i=a;i<e;i++)Math.abs(t[a*e+i])>r&&(r=Math.abs(t[a*e+i]));for(var o=0;o<e;o++)Math.abs(t[o*e+o])<n&&(n=Math.abs(t[o*e+o]));return n===0?Number.MAX_VALUE:r/n}function Um(t,e,n){return Ia(t,3,e,n)}function n0(t,e,n,r){if(t<n)return fn("Insufficient number of samples. Underdetermined."),0;var a,i,o,s=Qe(n*n),c=Qe(n),u=Qe(n*n);for(o=0;o<t;o++)for(a=0;a<n;a++)for(i=a;i<n;i++)s[a*n+i]+=e[o*n+a]*e[o*n+i];for(a=0;a<n;a++)for(i=0;i<a;i++)s[a*n+i]=s[i*n+a];for(Ia(s,n,c,u),a=0;a<n;a++)r[a]=u[a*n+n-1];return 1}function Gm(t,e,n,r,a,i){var o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!0;if(t<n||t<a)return fn("Insufficient number of samples. Underdetermined."),0;var s=Qe(a),c=1,u,f=0,l,p,h,v=0;if(o){for(p=0;p<a;p++)s[p]=1;for(l=0;l<t;l++)for(p=0;p<a;p++)Math.abs(r[l*a+p])>Xs&&(c=0,s[p]=0);if(c&&a===1)return fn("Detected homogeneous system (Y=0), calling SolveHomogeneousLeastSquares()"),n0(t,e,n,i);if(c)v=1;else for(p=0;p<a;p++)s[p]&&(v=1)}v&&(u=Qe(n),f=n0(t,e,n,u));var y=Qe(n*n),m=Qe(n*n),x=Qe(n*a);for(h=0;h<t;h++)for(l=0;l<n;l++){for(p=l;p<n;p++)y[l*n+p]+=e[h*n+l]*e[h*n+p];for(p=0;p<a;p++)x[l*a+p]+=e[h*n+l]*r[h*a+p]}for(l=0;l<n;l++)for(p=0;p<l;p++)y[l*n+p]=y[p*n+l];var g=Xf(y,m,n);if(g)for(l=0;l<n;l++)for(p=0;p<a;p++)for(i[l*a+p]=0,h=0;h<n;h++)i[l*a+p]+=m[l*n+h]*x[h*a+p];if(v){for(p=0;p<a;p++)if(s[p])for(l=0;l<n;l++)i[l*a+p]=u[l*a]}return v?f&&g:g}function Pm(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,.5,1];switch(t.length){case 3:return e[0]=parseInt(t[0],16)*17/255,e[1]=parseInt(t[1],16)*17/255,e[2]=parseInt(t[2],16)*17/255,e;case 4:return e[0]=parseInt(t[1],16)*17/255,e[1]=parseInt(t[2],16)*17/255,e[2]=parseInt(t[3],16)*17/255,e;case 6:return e[0]=parseInt(t.substr(0,2),16)/255,e[1]=parseInt(t.substr(2,2),16)/255,e[2]=parseInt(t.substr(4,2),16)/255,e;case 7:return e[0]=parseInt(t.substr(1,2),16)/255,e[1]=parseInt(t.substr(3,2),16)/255,e[2]=parseInt(t.substr(5,2),16)/255,e;case 9:return e[0]=parseInt(t.substr(1,2),16)/255,e[1]=parseInt(t.substr(3,2),16)/255,e[2]=parseInt(t.substr(5,2),16)/255,e[3]=parseInt(t.substr(7,2),16)/255,e;default:return e}}function ja(t,e){var n,r,a=ze(t,3),i=a[0],o=a[1],s=a[2],c=1/3,u=1/6,f=2/3,l=i,p=i;o>l?l=o:o<p&&(p=o),s>l?l=s:s<p&&(p=s);var h=l;h>0?r=(l-p)/l:r=0,r>0?(i===l?n=u*(o-s)/(l-p):o===l?n=c+u*(s-i)/(l-p):n=f+u*(i-o)/(l-p),n<0&&(n+=1)):n=0,e[0]=n,e[1]=r,e[2]=h}function ln(t,e){var n=ze(t,3),r=n[0],a=n[1],i=n[2],o=1/3,s=1/6,c=2/3,u=5/6,f,l,p;r>s&&r<=o?(l=1,f=(o-r)/s,p=0):r>o&&r<=.5?(l=1,p=(r-o)/s,f=0):r>.5&&r<=c?(p=1,l=(c-r)/s,f=0):r>c&&r<=u?(p=1,f=(r-c)/s,l=0):r>u&&r<=1?(f=1,p=(1-r)/s,l=0):(f=1,l=r/s,p=0),f=a*f+(1-a),l=a*l+(1-a),p=a*p+(1-a),f*=i,l*=i,p*=i,e[0]=f,e[1]=l,e[2]=p}function qf(t,e){var n=ze(t,3),r=n[0],a=n[1],i=n[2],o=(r+16)/116,s=a/500+o,c=o-i/200;Math.pow(o,3)>.008856?o=Math.pow(o,3):o=(o-16/116)/7.787,Math.pow(s,3)>.008856?s=Math.pow(s,3):s=(s-16/116)/7.787,Math.pow(c,3)>.008856?c=Math.pow(c,3):c=(c-16/116)/7.787;var u=.9505,f=1,l=1.089;e[0]=u*s,e[1]=f*o,e[2]=l*c}function Yf(t,e){var n=ze(t,3),r=n[0],a=n[1],i=n[2],o=.9505,s=1,c=1.089,u=r/o,f=a/s,l=i/c;u>.008856?u=Math.pow(u,1/3):u=7.787*u+16/116,f>.008856?f=Math.pow(f,1/3):f=7.787*f+16/116,l>.008856?l=Math.pow(l,1/3):l=7.787*l+16/116,e[0]=116*f-16,e[1]=500*(u-f),e[2]=200*(f-l)}function Jf(t,e){var n=ze(t,3),r=n[0],a=n[1],i=n[2],o=r*3.2406+a*-1.5372+i*-.4986,s=r*-.9689+a*1.8758+i*.0415,c=r*.0557+a*-.204+i*1.057;o>.0031308?o=1.055*Math.pow(o,1/2.4)-.055:o*=12.92,s>.0031308?s=1.055*Math.pow(s,1/2.4)-.055:s*=12.92,c>.0031308?c=1.055*Math.pow(c,1/2.4)-.055:c*=12.92;var u=o;u<s&&(u=s),u<c&&(u=c),u>1&&(o/=u,s/=u,c/=u),o<0&&(o=0),s<0&&(s=0),c<0&&(c=0),e[0]=o,e[1]=s,e[2]=c}function Zf(t,e){var n=ze(t,3),r=n[0],a=n[1],i=n[2];r>.04045?r=Math.pow((r+.055)/1.055,2.4):r/=12.92,a>.04045?a=Math.pow((a+.055)/1.055,2.4):a/=12.92,i>.04045?i=Math.pow((i+.055)/1.055,2.4):i/=12.92,e[0]=r*.4124+a*.3576+i*.1805,e[1]=r*.2126+a*.7152+i*.0722,e[2]=r*.0193+a*.1192+i*.9505}function pn(t,e){var n=[0,0,0];Zf(t,n),Yf(n,e)}function Ki(t,e){var n=[0,0,0];qf(t,n),Jf(n,e)}function Wn(t){return t[0]=1,t[1]=-1,t[2]=1,t[3]=-1,t[4]=1,t[5]=-1,t}function Xi(t){return!(t[1]-t[0]<0)}function Im(t,e,n){return n[0]=Math.min(t[0],e[0]),n[1]=Math.max(t[0],e[0]),n[2]=Math.min(t[1],e[1]),n[3]=Math.max(t[1],e[1]),n[4]=Math.min(t[2],e[2]),n[5]=Math.max(t[2],e[2]),n}function Jt(t,e,n){return t<e?e:t>n?n:t}function a0(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[0,0,0];return r[0]=Jt(t[0],e[0],n[0]),r[1]=Jt(t[1],e[1],n[1]),r[2]=Jt(t[2],e[2],n[2]),r}function jm(t,e){var n=0;return e[0]!==e[1]&&(t<e[0]?n=e[0]:t>e[1]?n=e[1]:n=t,n=(n-e[0])/(e[1]-e[0])),n}var zm=La("GetScalarTypeFittingRange"),Wm=La("GetAdjustedScalarRange");function Hm(t,e){if(!t||!e)return 0;for(var n=0;n<6;n+=2)if(t[n]<e[n]||t[n]>e[n+1]||t[n+1]<e[n]||t[n+1]>e[n+1])return 0;return 1}function $m(t,e,n){if(!t||!e)return 0;for(var r=0;r<6;r+=2)if(t[r]+n[r/2]<e[r]||t[r]-n[r/2]>e[r+1]||t[r+1]+n[r/2]<e[r]||t[r+1]-n[r/2]>e[r+1])return 0;return 1}function Km(t,e,n){if(!t||!e||!n)return 0;for(var r=0;r<3;r++)if(t[r]+n[r]<e[2*r]||t[r]-n[r]>e[2*r+1])return 0;return 1}function Xm(t,e,n,r){for(var a=Qe(3),i=Qe(3),o=Qe(3),s=Qe(3),c=Qe(3),u=Qe(3),f=0;f<3;++f)a[f]=t[f]-e[f],i[f]=e[f]-n[f],o[f]=n[f]-t[f],s[f]=-a[f],c[f]=-i[f],u[f]=-o[f];var l=Bt(s),p=Bt(c),h=Bt(o),v=Qe(3);lt(a,i,v);for(var y=Bt(v),m=l*p*h/(2*y),x=2*y*y,g=p*p*_e(a,u)/x,d=h*h*_e(s,i)/x,C=l*l*_e(o,c)/x,S=0;S<3;++S)r[S]=g*t[S]+d*e[S]+C*n[S];return m}var qm=1/0,Ym=-1/0,Qf=function(e){return!Number.isFinite(e)},Jm=Number.isFinite,i0=Number.isNaN,qi=i0;function hn(){return[].concat([Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE])}function Zm(t){for(var e=-1,n=-1,r=0;r<t.length;r++){var a=Math.abs(t[r]);a>e&&(n=r,e=a)}return n}function el(t){var e=Math.floor(t*255);return e>15?e.toString(16):"0".concat(e.toString(16))}function Qm(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#";return"".concat(e).concat(t.map(el).join(""))}function Yi(t){return Math.round(t*255)}function e4(t){return t.length===3?"rgb(".concat(t.map(Yi).join(", "),")"):"rgba(".concat(Yi(t[0]||0),", ").concat(Yi(t[1]||0),", ").concat(Yi(t[2]||0),", ").concat(t[3]||0,")")}var Ji={Pi:am,radiansFromDegrees:et,degreesFromRadians:Aa,round:Va,floor:qs,ceil:im,ceilLog2:lm,min:om,max:sm,arrayMin:um,arrayMax:cm,arrayRange:fm,isPowerOfTwo:Ba,nearestPowerOfTwo:zt,factorial:pm,binomial:hm,beginCombination:vm,nextCombination:gm,randomSeed:dm,getSeed:ym,random:Wi,gaussian:mm,add:Ua,subtract:yt,multiplyScalar:Ys,multiplyScalar2D:Bf,multiplyAccumulate:Js,multiplyAccumulate2D:xm,dot:_e,outer:Cm,cross:lt,norm:Bt,normalize:ot,perpendiculars:Sm,projectVector:Tm,projectVector2D:wm,distance2BetweenPoints:Ut,angleBetweenVectors:Em,gaussianAmplitude:Dm,gaussianWeight:Om,dot2D:Zs,outer2D:_m,norm2D:Uf,normalize2D:Gf,determinant2x2:st,LUFactor3x3:bm,LUSolve3x3:Mm,linearSolve3x3:Nm,multiply3x3_vect3:Ga,multiply3x3_mat3:Qs,multiplyMatrix:Rm,transpose3x3:zn,invert3x3:Lm,identity3x3:If,identity:jf,isIdentity:km,isIdentity3x3:Fm,determinant3x3:Hi,quaternionToMatrix3x3:zf,areEquals:Pf,areMatricesEqual:Pa,roundNumber:$i,roundVector:e0,matrix3x3ToQuaternion:Wf,multiplyQuaternion:Am,orthogonalize3x3:Hf,diagonalize3x3:$f,singularValueDecomposition3x3:Vm,solveLinearSystem:Kf,invertMatrix:Xf,luFactorLinearSystem:t0,luSolveLinearSystem:r0,estimateMatrixCondition:Bm,jacobi:Um,jacobiN:Ia,solveHomogeneousLeastSquares:n0,solveLeastSquares:Gm,hex2float:Pm,rgb2hsv:ja,hsv2rgb:ln,lab2xyz:qf,xyz2lab:Yf,xyz2rgb:Jf,rgb2xyz:Zf,rgb2lab:pn,lab2rgb:Ki,uninitializeBounds:Wn,areBoundsInitialized:Xi,computeBoundsFromPoints:Im,clampValue:Jt,clampVector:a0,clampAndNormalizeValue:jm,getScalarTypeFittingRange:zm,getAdjustedScalarRange:Wm,extentIsWithinOtherExtent:Hm,boundsIsWithinOtherBounds:$m,pointIsWithinBounds:Km,solve3PointCircle:Xm,inf:qm,negInf:Ym,isInf:Qf,isNan:i0,isNaN:i0,isFinite:Jm,createUninitializedBounds:hn,getMajorAxisIndex:Zm,floatToHex2:el,floatRGB2HexCode:Qm,float2CssRGBA:e4};function tl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function t4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tl(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tl(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var o0=1e-6,rl="coincide",nl="disjoint";function r4(t,e,n){return t[0]*(n[0]-e[0])+t[1]*(n[1]-e[1])+t[2]*(n[2]-e[2])}function al(t,e,n){var r=n[0]*(t[0]-e[0])+n[1]*(t[1]-e[1])+n[2]*(t[2]-e[2]);return Math.abs(r)}function il(t,e,n,r){var a=[];yt(t,e,a);var i=_e(n,a);r[0]=t[0]-i*n[0],r[1]=t[1]-i*n[1],r[2]=t[2]-i*n[2]}function ol(t,e,n){var r=_e(t,e),a=_e(e,e);return a===0&&(a=1),n[0]=t[0]-r*e[0]/a,n[1]=t[1]-r*e[1]/a,n[2]=t[2]-r*e[2]/a,n}function sl(t,e,n,r){var a=[];yt(t,e,a);var i=_e(n,a),o=_e(n,n);o!==0?(r[0]=t[0]-i*n[0]/o,r[1]=t[1]-i*n[1]/o,r[2]=t[2]-i*n[2]/o):(r[0]=t[0],r[1]=t[1],r[2]=t[2])}function ul(t,e,n,r){var a={intersection:!1,betweenPoints:!1,t:Number.MAX_VALUE,x:[]},i=[],o=[];yt(e,t,i),yt(n,t,o);var s=_e(r,o),c=_e(r,i),u,f;return c<0?u=-c:u=c,s<0?f=-s*o0:f=s*o0,u<=f||(a.t=s/c,a.x[0]=t[0]+a.t*i[0],a.x[1]=t[1]+a.t*i[1],a.x[2]=t[2]+a.t*i[2],a.intersection=!0,a.betweenPoints=a.t>=0&&a.t<=1),a}function cl(t,e,n,r){var a={intersection:!1,l0:[],l1:[],error:null},i=[];lt(e,r,i);var o=i.map(function(p){return Math.abs(p)});if(o[0]+o[1]+o[2]<o0){var s=[];return yt(t,n,s),_e(e,s)===0?a.error=rl:a.error=nl,a}var c;o[0]>o[1]&&o[0]>o[2]?c="x":o[1]>o[2]?c="y":c="z";var u=[],f=-_e(e,t),l=-_e(r,n);switch(c){case"x":u[0]=0,u[1]=(l*e[2]-f*r[2])/i[0],u[2]=(f*r[1]-l*e[1])/i[0];break;case"y":u[0]=(f*r[2]-l*e[2])/i[1],u[1]=0,u[2]=(l*e[0]-f*r[0])/i[1];break;case"z":u[0]=(l*e[1]-f*r[1])/i[2],u[1]=(f*r[0]-l*e[0])/i[2],u[2]=0;break}return a.l0=u,Ua(u,i,a.l1),a.intersection=!0,a}var n4={evaluate:r4,distanceToPlane:al,projectPoint:il,projectVector:ol,generalizedProjectPoint:sl,intersectWithLine:ul,intersectWithPlane:cl,DISJOINT:nl,COINCIDE:rl};function a4(t,e){e.classHierarchy.push("vtkPlane"),t.distanceToPlane=function(n){return al(n,e.origin,e.normal)},t.projectPoint=function(n,r){il(n,e.origin,e.normal,r)},t.projectVector=function(n,r){return ol(n,e.normal,r)},t.push=function(n){if(n!==0)for(var r=0;r<3;r++)e.origin[r]+=n*e.normal[r]},t.generalizedProjectPoint=function(n,r){sl(n,e.origin,e.normal,r)},t.evaluateFunction=function(n,r,a){return Array.isArray(n)?e.normal[0]*(n[0]-e.origin[0])+e.normal[1]*(n[1]-e.origin[1])+e.normal[2]*(n[2]-e.origin[2]):e.normal[0]*(n-e.origin[0])+e.normal[1]*(r-e.origin[1])+e.normal[2]*(a-e.origin[2])},t.evaluateGradient=function(n){var r=[e.normal[0],e.normal[1],e.normal[2]];return r},t.intersectWithLine=function(n,r){return ul(n,r,e.origin,e.normal)},t.intersectWithPlane=function(n,r){return cl(n,r,e.origin,e.normal)}}var i4={normal:[0,0,1],origin:[0,0,0]};function fl(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,i4,n),B.obj(t,e),B.setGetArray(t,e,["normal","origin"],3),a4(t,e)}var o4=B.newInstance(fl,"vtkPlane"),Fr=t4({newInstance:o4,extend:fl},n4);function ll(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function s4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ll(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ll(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Zi=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];function pl(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function yr(t){return(t==null?void 0:t.length)>=6&&t[0]<=t[1]&&t[2]<=t[3]&&t[4]<=t[5]}function s0(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function u0(t){return s0(t,Zi)}function Qi(t,e,n,r){var a=ze(t,6),i=a[0],o=a[1],s=a[2],c=a[3],u=a[4],f=a[5];return t[0]=i<e?i:e,t[1]=o>e?o:e,t[2]=s<n?s:n,t[3]=c>n?c:n,t[4]=u<r?u:r,t[5]=f>r?f:r,t}function c0(t,e){if(e.length===0)return t;if(Array.isArray(e[0]))for(var n=0;n<e.length;++n)Qi.apply(void 0,[t].concat(ve(e[n])));else for(var r=0;r<e.length;r+=3)Qi.apply(void 0,[t].concat(ve(e.slice(r,r+3))));return t}function hl(t,e,n,r,a,i,o){var s=ze(t,6),c=s[0],u=s[1],f=s[2],l=s[3],p=s[4],h=s[5];return o===void 0?(t[0]=Math.min(e[0],c),t[1]=Math.max(e[1],u),t[2]=Math.min(e[2],f),t[3]=Math.max(e[3],l),t[4]=Math.min(e[4],p),t[5]=Math.max(e[5],h)):(t[0]=Math.min(e,c),t[1]=Math.max(n,u),t[2]=Math.min(r,f),t[3]=Math.max(a,l),t[4]=Math.min(i,p),t[5]=Math.max(o,h)),t}function vl(t,e,n,r){var a=ze(t,6),i=a[0],o=a[1],s=a[2],c=a[3],u=a[4],f=a[5];return t[0]=e,t[1]=e>o?e:o,t[2]=n,t[3]=n>c?n:c,t[4]=r,t[5]=r>f?r:f,i!==e||s!==n||u!==r}function gl(t,e,n,r){var a=ze(t,6),i=a[0],o=a[1],s=a[2],c=a[3],u=a[4],f=a[5];return t[0]=e<i?e:i,t[1]=e,t[2]=n<s?n:s,t[3]=n,t[4]=r<u?r:u,t[5]=r,o!==e||c!==n||f!==r}function dl(t,e){return t[0]-=e,t[1]+=e,t[2]-=e,t[3]+=e,t[4]-=e,t[5]+=e,t}function f0(t,e,n,r){return yr(t)?(e>=0?(t[0]*=e,t[1]*=e):(t[0]=e*t[1],t[1]=e*t[0]),n>=0?(t[2]*=n,t[3]*=n):(t[2]=n*t[3],t[3]=n*t[2]),r>=0?(t[4]*=r,t[5]*=r):(t[4]=r*t[5],t[5]=r*t[4]),!0):!1}function l0(t){return[.5*(t[0]+t[1]),.5*(t[2]+t[3]),.5*(t[4]+t[5])]}function u4(t,e,n,r){if(!yr(t))return!1;var a=l0(t);return t[0]-=a[0],t[1]-=a[0],t[2]-=a[1],t[3]-=a[1],t[4]-=a[2],t[5]-=a[2],f0(t,e,n,r),t[0]+=a[0],t[1]+=a[0],t[2]+=a[1],t[3]+=a[1],t[4]+=a[2],t[5]+=a[2],!0}function za(t,e){return t[e*2+1]-t[e*2]}function eo(t){return[za(t,0),za(t,1),za(t,2)]}function yl(t){return t.slice(0,2)}function ml(t){return t.slice(2,4)}function xl(t){return t.slice(4,6)}function Cl(t){var e=eo(t);return e[0]>e[1]?e[0]>e[2]?e[0]:e[2]:e[1]>e[2]?e[1]:e[2]}function Sl(t){if(yr(t)){var e=eo(t);return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}return null}function p0(t){return[t[0],t[2],t[4]]}function h0(t){return[t[1],t[3],t[5]]}function to(t,e){return t<=0&&e>=0||t>=0&&e<=0}function v0(t,e){for(var n=0,r=0;r<2;r++)for(var a=2;a<4;a++)for(var i=4;i<6;i++)e[n++]=[t[r],t[a],t[i]];return e}function Tl(t,e,n){return e[0]=t[0],e[1]=t[2],e[2]=t[4],n[0]=t[1],n[1]=t[3],n[2]=t[5],e}function wl(t,e){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=v0(t,[]),a=0;a<r.length;++a)be(r[a],r[a],e);return u0(n),c0(n,r)}function El(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e[0]=.5*(t[1]-t[0]),e[1]=.5*(t[3]-t[2]),e[2]=.5*(t[5]-t[4]),e}function Dl(t,e,n,r){for(var a=[].concat(Zi),i=t.getData(),o=0;o<i.length;o+=3){var s=[i[o],i[o+1],i[o+2]],c=_e(s,e);a[0]=Math.min(c,a[0]),a[1]=Math.max(c,a[1]);var u=_e(s,n);a[2]=Math.min(u,a[2]),a[3]=Math.max(u,a[3]);var f=_e(s,r);a[4]=Math.min(f,a[4]),a[5]=Math.max(f,a[5])}return a}function Ol(t,e,n,r,a){for(var i=!0,o=[],s=0,c=[],u=[0,0,0],f=0,l=1,p=2,h=0;h<3;h++)e[h]<t[2*h]?(o[h]=l,u[h]=t[2*h],i=!1):e[h]>t[2*h+1]?(o[h]=f,u[h]=t[2*h+1],i=!1):o[h]=p;if(i)return r[0]=e[0],r[1]=e[1],r[2]=e[2],a[0]=0,1;for(var v=0;v<3;v++)o[v]!==p&&n[v]!==0?c[v]=(u[v]-e[v])/n[v]:c[v]=-1;for(var y=0;y<3;y++)c[s]<c[y]&&(s=y);if(c[s]>1||c[s]<0)return 0;a[0]=c[s];for(var m=0;m<3;m++)if(s!==m){if(r[m]=e[m]+c[s]*n[m],r[m]<t[2*m]||r[m]>t[2*m+1])return 0}else r[m]=u[m];return 1}function _l(t,e,n){for(var r=[],a=0,i=1,o=1,s=4;s<=5;++s){r[2]=t[s];for(var c=2;c<=3;++c){r[1]=t[c];for(var u=0;u<=1;++u)if(r[0]=t[u],a=Fr.evaluate(n,e,r),o&&(i=a>=0?1:-1,o=0),a===0||i>0&&a<0||i<0&&a>0)return 1}}return 0}function bl(t,e){if(!(yr(t)&&yr(e)))return!1;for(var n=[0,0,0,0,0,0],r,a=0;a<3;a++)if(r=!1,e[a*2]>=t[a*2]&&e[a*2]<=t[a*2+1]?(r=!0,n[a*2]=e[a*2]):t[a*2]>=e[a*2]&&t[a*2]<=e[a*2+1]&&(r=!0,n[a*2]=t[a*2]),e[a*2+1]>=t[a*2]&&e[a*2+1]<=t[a*2+1]?(r=!0,n[a*2+1]=e[2*a+1]):t[a*2+1]>=e[a*2]&&t[a*2+1]<=e[a*2+1]&&(r=!0,n[a*2+1]=t[a*2+1]),!r)return!1;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],!0}function ro(t,e){if(!(yr(t)&&yr(e)))return!1;for(var n=0;n<3;n++)if(!(e[n*2]>=t[n*2]&&e[n*2]<=t[n*2+1])&&!(t[n*2]>=e[n*2]&&t[n*2]<=e[n*2+1])&&!(e[n*2+1]>=t[n*2]&&e[n*2+1]<=t[n*2+1])&&!(t[n*2+1]>=e[n*2]&&t[n*2+1]<=e[n*2+1]))return!1;return!0}function no(t,e,n,r){return!(e<t[0]||e>t[1]||n<t[2]||n>t[3]||r<t[4]||r>t[5])}function c4(t,e){return!(!ro(t,e)||!no.apply(void 0,[t].concat(ve(p0(e))))||!no.apply(void 0,[t].concat(ve(h0(e)))))}function Ml(t,e,n){for(var r=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],a=[0,0,0,0,0,0,0,0],i=0,o=0;o<2;o++)for(var s=2;s<4;s++)for(var c=4;c<6;c++){var u=[t[o],t[s],t[c]];a[i++]=Fr.evaluate(n,e,u)}for(var f=2;f--&&!(to(a[r[f][0]],a[r[f][4]])&&to(a[r[f][1]],a[r[f][5]])&&to(a[r[f][2]],a[r[f][6]])&&to(a[r[f][3]],a[r[f][7]])););if(f<0)return!1;for(var l=Math.sign(n[f]),p=Math.abs((t[f*2+1]-t[f*2])*n[f]),h=l>0?1:0,v=0;v<4;v++)if(p!==0){var y=Math.abs(a[r[f][v]])/p;l>0&&y<h&&(h=y),l<0&&y>h&&(h=y)}var m=(1-h)*t[f*2]+h*t[f*2+1];return l>0?t[f*2]=m:t[f*2+1]=m,!0}var f4=function(){function t(e){Ta(this,t),this.bounds=e,this.bounds||(this.bounds=new Float64Array(Zi))}return wa(t,[{key:"getBounds",value:function(){return this.bounds}},{key:"equals",value:function(n){return pl(this.bounds,n)}},{key:"isValid",value:function(){return yr(this.bounds)}},{key:"setBounds",value:function(n){return s0(this.bounds,n)}},{key:"reset",value:function(){return u0(this.bounds)}},{key:"addPoint",value:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Qi.apply(void 0,[this.bounds].concat(r))}},{key:"addPoints",value:function(n){return c0(this.bounds,n)}},{key:"addBounds",value:function(n,r,a,i,o,s){return hl(this.bounds,n,r,a,i,o,s)}},{key:"setMinPoint",value:function(n,r,a){return vl(this.bounds,n,r,a)}},{key:"setMaxPoint",value:function(n,r,a){return gl(this.bounds,n,r,a)}},{key:"inflate",value:function(n){return dl(this.bounds,n)}},{key:"scale",value:function(n,r,a){return f0(this.bounds,n,r,a)}},{key:"getCenter",value:function(){return l0(this.bounds)}},{key:"getLength",value:function(n){return za(this.bounds,n)}},{key:"getLengths",value:function(){return eo(this.bounds)}},{key:"getMaxLength",value:function(){return Cl(this.bounds)}},{key:"getDiagonalLength",value:function(){return Sl(this.bounds)}},{key:"getMinPoint",value:function(){return p0(this.bounds)}},{key:"getMaxPoint",value:function(){return h0(this.bounds)}},{key:"getXRange",value:function(){return yl(this.bounds)}},{key:"getYRange",value:function(){return ml(this.bounds)}},{key:"getZRange",value:function(){return xl(this.bounds)}},{key:"getCorners",value:function(n){return v0(this.bounds,n)}},{key:"computeCornerPoints",value:function(n,r){return Tl(this.bounds,n,r)}},{key:"computeLocalBounds",value:function(n,r,a){return Dl(this.bounds,n,r,a)}},{key:"transformBounds",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return wl(this.bounds,n,r)}},{key:"computeScale3",value:function(n){return El(this.bounds,n)}},{key:"cutWithPlane",value:function(n,r){return Ml(this.bounds,n,r)}},{key:"intersectBox",value:function(n,r,a,i){return Ol(this.bounds,n,r,a,i)}},{key:"intersectPlane",value:function(n,r){return _l(this.bounds,n,r)}},{key:"intersect",value:function(n){return bl(this.bounds,n)}},{key:"intersects",value:function(n){return ro(this.bounds,n)}},{key:"containsPoint",value:function(n,r,a){return no(this.bounds,n,r,a)}},{key:"contains",value:function(n){return ro(this.bounds,n)}}]),t}();function l4(t){var e=t&&t.bounds;return new f4(e)}var p4={equals:pl,isValid:yr,setBounds:s0,reset:u0,addPoint:Qi,addPoints:c0,addBounds:hl,setMinPoint:vl,setMaxPoint:gl,inflate:dl,scale:f0,scaleAboutCenter:u4,getCenter:l0,getLength:za,getLengths:eo,getMaxLength:Cl,getDiagonalLength:Sl,getMinPoint:p0,getMaxPoint:h0,getXRange:yl,getYRange:ml,getZRange:xl,getCorners:v0,computeCornerPoints:Tl,computeLocalBounds:Dl,transformBounds:wl,computeScale3:El,cutWithPlane:Ml,intersectBox:Ol,intersectPlane:_l,intersect:bl,intersects:ro,containsPoint:no,contains:c4,INIT_BOUNDS:Zi},Ve=s4({newInstance:l4},p4),h4={DISPLAY:0,WORLD:1},Nl={CoordinateSystem:h4};function Rl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function v4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rl(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rl(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var g0=Nl.CoordinateSystem;function Ll(t){return function(){return B.vtkErrorMacro("vtkProp::".concat(t," - NOT IMPLEMENTED"))}}function g4(t,e){e.classHierarchy.push("vtkProp"),t.getMTime=function(){for(var n=e.mtime,r=0;r<e.textures.length;++r){var a=e.textures[r].getMTime();a>n&&(n=a)}return n},t.processSelectorPixelBuffers=function(n,r){},t.getNestedProps=function(){return null},t.getActors=function(){return[]},t.getActors2D=function(){return[]},t.getVolumes=function(){return[]},t.pick=Ll("pick"),t.hasKey=Ll("hasKey"),t.getNestedVisibility=function(){return e.visibility&&(!e._parentProp||e._parentProp.getNestedVisibility())},t.getNestedPickable=function(){return e.pickable&&(!e._parentProp||e._parentProp.getNestedPickable())},t.getNestedDragable=function(){return e.dragable&&(!e._parentProp||e._parentProp.getNestedDragable())},t.getRedrawMTime=function(){return e.mtime},t.setEstimatedRenderTime=function(n){e.estimatedRenderTime=n,e.savedEstimatedRenderTime=n},t.restoreEstimatedRenderTime=function(){e.estimatedRenderTime=e.savedEstimatedRenderTime},t.addEstimatedRenderTime=function(n){e.estimatedRenderTime+=n},t.setAllocatedRenderTime=function(n){e.allocatedRenderTime=n,e.savedEstimatedRenderTime=e.estimatedRenderTime,e.estimatedRenderTime=0},t.getSupportsSelection=function(){return!1},t.getTextures=function(){return e.textures},t.hasTexture=function(n){return e.textures.indexOf(n)!==-1},t.addTexture=function(n){n&&!t.hasTexture(n)&&(e.textures=e.textures.concat(n),t.modified())},t.removeTexture=function(n){var r=e.textures.filter(function(a){return a!==n});e.textures.length!==r.length&&(e.textures=r,t.modified())},t.removeAllTextures=function(){e.textures=[],t.modified()},t.setCoordinateSystemToWorld=function(){return t.setCoordinateSystem(g0.WORLD)},t.setCoordinateSystemToDisplay=function(){return t.setCoordinateSystem(g0.DISPLAY)}}var d4={allocatedRenderTime:10,coordinateSystem:g0.WORLD,dragable:!0,estimatedRenderTime:0,paths:null,pickable:!0,renderTimeMultiplier:1,savedEstimatedRenderTime:0,textures:[],useBounds:!0,visibility:!0};function kl(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,d4,n),B.obj(t,e),B.get(t,e,["estimatedRenderTime","allocatedRenderTime"]),B.setGet(t,e,["_parentProp","coordinateSystem","dragable","pickable","renderTimeMultiplier","useBounds","visibility"]),B.moveToProtected(t,e,["parentProp"]),g4(t,e)}var y4=B.newInstance(kl,"vtkProp"),Fl=v4({newInstance:y4,extend:kl},Nl);function m4(t,e){e.classHierarchy.push("vtkProp3D"),t.addPosition=function(r){e.position=e.position.map(function(a,i){return a+r[i]}),t.modified()},t.getOrientationWXYZ=function(){var r=Zr();ic(r,e.rotation);var a=new Float64Array(3),i=Ld(a,r);return[Aa(i),a[0],a[1],a[2]]},t.rotateX=function(r){r!==0&&(mi(e.rotation,e.rotation,et(r)),t.modified())},t.rotateY=function(r){r!==0&&(da(e.rotation,e.rotation,et(r)),t.modified())},t.rotateZ=function(r){r!==0&&(xi(e.rotation,e.rotation,et(r)),t.modified())},t.rotateWXYZ=function(r,a,i,o){if(!(r===0||a===0&&i===0&&o===0)){var s=et(r),c=Zr();gs(c,[a,i,o],s);var u=new Float64Array(16);us(u,c),Ke(e.rotation,e.rotation,u),t.modified()}},t.setOrientation=function(r,a,i){return r===e.orientation[0]&&a===e.orientation[1]&&i===e.orientation[2]?!1:(e.orientation=[r,a,i],Oe(e.rotation),t.rotateZ(i),t.rotateX(r),t.rotateY(a),t.modified(),!0)},t.setUserMatrix=function(r){return Pa(e.userMatrix,r)?!1:(St(e.userMatrix,r),t.modified(),!0)},t.getMatrix=function(){return t.computeMatrix(),e.matrix},t.computeMatrix=function(){if(t.getMTime()>e.matrixMTime.getMTime()){Oe(e.matrix),e.userMatrix&&Ke(e.matrix,e.matrix,e.userMatrix),rt(e.matrix,e.matrix,e.origin),rt(e.matrix,e.matrix,e.position),Ke(e.matrix,e.matrix,e.rotation),Xr(e.matrix,e.matrix,e.scale),rt(e.matrix,e.matrix,[-e.origin[0],-e.origin[1],-e.origin[2]]),We(e.matrix,e.matrix),e.isIdentity=!0;for(var r=0;r<4;++r)for(var a=0;a<4;++a)(r===a?1:0)!==e.matrix[r+a*4]&&(e.isIdentity=!1);e.matrixMTime.modified()}},t.getCenter=function(){return Ve.getCenter(e.bounds)},t.getLength=function(){return Ve.getLength(e.bounds)},t.getXRange=function(){return Ve.getXRange(e.bounds)},t.getYRange=function(){return Ve.getYRange(e.bounds)},t.getZRange=function(){return Ve.getZRange(e.bounds)},t.getUserMatrix=function(){return e.userMatrix};function n(){t.computeMatrix()}t.onModified(n)}var x4={origin:[0,0,0],position:[0,0,0],orientation:[0,0,0],rotation:null,scale:[1,1,1],bounds:[1,-1,1,-1,1,-1],userMatrix:null,userMatrixMTime:null,cachedProp3D:null,isIdentity:!0,matrixMTime:null};function Al(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,x4,n),Fl.extend(t,e,n),e.matrixMTime={},B.obj(e.matrixMTime),B.get(t,e,["bounds","isIdentity"]),B.getArray(t,e,["orientation"]),B.setGetArray(t,e,["origin","position","scale"],3),e.matrix=Oe(new Float64Array(16)),e.rotation=Oe(new Float64Array(16)),e.userMatrix=Oe(new Float64Array(16)),e.transform=null,m4(t,e)}var C4=B.newInstance(Al,"vtkProp3D"),d0={newInstance:C4,extend:Al},Vl={FLAT:0,GOURAUD:1,PHONG:2},Zt={POINTS:0,WIREFRAME:1,SURFACE:2},S4=Vl,y0={Shading:Vl,Representation:Zt,Interpolation:S4};function Bl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function T4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bl(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bl(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Wa=y0.Representation,Ha=y0.Interpolation;function Ul(t){return function(){return B.vtkErrorMacro("vtkProperty::".concat(t," - NOT IMPLEMENTED"))}}function w4(t,e){e.classHierarchy.push("vtkProperty"),t.setColor=function(n,r,a){Array.isArray(n)?(e.color[0]!==n[0]||e.color[1]!==n[1]||e.color[2]!==n[2])&&(e.color[0]=n[0],e.color[1]=n[1],e.color[2]=n[2],t.modified()):(e.color[0]!==n||e.color[1]!==r||e.color[2]!==a)&&(e.color[0]=n,e.color[1]=r,e.color[2]=a,t.modified()),t.setDiffuseColor(e.color),t.setAmbientColor(e.color),t.setSpecularColor(e.color)},t.computeCompositeColor=Ul("ComputeCompositeColor"),t.getColor=function(){var n=0;e.ambient+e.diffuse+e.specular>0&&(n=1/(e.ambient+e.diffuse+e.specular));for(var r=0;r<3;r++)e.color[r]=n*(e.ambient*e.ambientColor[r]+e.diffuse*e.diffuseColor[r]+e.specular*e.specularColor[r]);return[].concat(e.color)},t.setSpecularPower=function(n){var r=1/Math.max(1,n);(e.roughness!==r||e.specularPower!==n)&&(e.specularPower=n,e.roughness=r,t.modified())},t.addShaderVariable=Ul("AddShaderVariable"),t.setInterpolationToFlat=function(){return t.setInterpolation(Ha.FLAT)},t.setInterpolationToGouraud=function(){return t.setInterpolation(Ha.GOURAUD)},t.setInterpolationToPhong=function(){return t.setInterpolation(Ha.PHONG)},t.getInterpolationAsString=function(){return B.enumToString(Ha,e.interpolation)},t.setRepresentationToWireframe=function(){return t.setRepresentation(Wa.WIREFRAME)},t.setRepresentationToSurface=function(){return t.setRepresentation(Wa.SURFACE)},t.setRepresentationToPoints=function(){return t.setRepresentation(Wa.POINTS)},t.getRepresentationAsString=function(){return B.enumToString(Wa,e.representation)}}var E4={color:[1,1,1],ambientColor:[1,1,1],diffuseColor:[1,1,1],specularColor:[1,1,1],edgeColor:[0,0,0],ambient:0,diffuse:1,metallic:0,roughness:.6,normalStrength:1,emission:1,baseIOR:1.45,specular:0,specularPower:1,opacity:1,interpolation:Ha.GOURAUD,representation:Wa.SURFACE,edgeVisibility:!1,backfaceCulling:!1,frontfaceCulling:!1,pointSize:1,lineWidth:1,lighting:!0,shading:!1,materialName:null};function Gl(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,E4,n),B.obj(t,e),B.setGet(t,e,["lighting","interpolation","ambient","diffuse","metallic","roughness","normalStrength","emission","baseIOR","specular","specularPower","opacity","edgeVisibility","lineWidth","pointSize","backfaceCulling","frontfaceCulling","representation","diffuseTexture","metallicTexture","roughnessTexture","normalTexture","ambientOcclusionTexture","emissionTexture"]),B.setGetArray(t,e,["ambientColor","specularColor","diffuseColor","edgeColor"],3),w4(t,e)}var D4=B.newInstance(Gl,"vtkProperty"),Ar=T4({newInstance:D4,extend:Gl},y0);function Pl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function O4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pl(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pl(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var _4=B.vtkDebugMacro;function b4(t,e){e.classHierarchy.push("vtkActor");var n=O4({},t);t.getActors=function(){return[t]},t.getIsOpaque=function(){if(e.forceOpaque)return!0;if(e.forceTranslucent)return!1;e.property||t.getProperty();var r=e.property.getOpacity()>=1;return r=r&&(!e.texture||!e.texture.isTranslucent()),r=r&&(!e.mapper||e.mapper.getIsOpaque()),r},t.hasTranslucentPolygonalGeometry=function(){return e.mapper===null?!1:(e.property===null&&t.setProperty(t.makeProperty()),!t.getIsOpaque())},t.makeProperty=Ar.newInstance,t.getProperty=function(){return e.property===null&&(e.property=t.makeProperty()),e.property},t.getBounds=function(){if(e.mapper===null)return e.bounds;var r=e.mapper.getBounds();if(!r||r.length!==6)return r;if(r[0]>r[1])return e.mapperBounds=r.concat(),e.bounds=[1,-1,1,-1,1,-1],e.boundsMTime.modified(),r;if(!e.mapperBounds||r[0]!==e.mapperBounds[0]||r[1]!==e.mapperBounds[1]||r[2]!==e.mapperBounds[2]||r[3]!==e.mapperBounds[3]||r[4]!==e.mapperBounds[4]||r[5]!==e.mapperBounds[5]||t.getMTime()>e.boundsMTime.getMTime()){_4("Recomputing bounds..."),e.mapperBounds=r.concat();var a=[];Ve.getCorners(r,a),t.computeMatrix();var i=new Float64Array(16);We(i,e.matrix),a.forEach(function(o){return be(o,o,i)}),e.bounds[0]=e.bounds[2]=e.bounds[4]=Number.MAX_VALUE,e.bounds[1]=e.bounds[3]=e.bounds[5]=-Number.MAX_VALUE,e.bounds=e.bounds.map(function(o,s){return s%2===0?a.reduce(function(c,u){return c>u[s/2]?u[s/2]:c},o):a.reduce(function(c,u){return c<u[(s-1)/2]?u[(s-1)/2]:c},o)}),e.boundsMTime.modified()}return e.bounds},t.getMTime=function(){var r=n.getMTime();if(e.property!==null){var a=e.property.getMTime();r=a>r?a:r}if(e.backfaceProperty!==null){var i=e.backfaceProperty.getMTime();r=i>r?i:r}return r},t.getRedrawMTime=function(){var r=e.mtime;if(e.mapper!==null){var a=e.mapper.getMTime();r=a>r?a:r,e.mapper.getInput()!==null&&(e.mapper.getInputAlgorithm().update(),a=e.mapper.getInput().getMTime(),r=a>r?a:r)}return r},t.getSupportsSelection=function(){return e.mapper?e.mapper.getSupportsSelection():!1},t.processSelectorPixelBuffers=function(r,a){e.mapper&&e.mapper.processSelectorPixelBuffers&&e.mapper.processSelectorPixelBuffers(r,a)}}var M4={mapper:null,property:null,backfaceProperty:null,forceOpaque:!1,forceTranslucent:!1,bounds:[1,-1,1,-1,1,-1]};function Il(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,M4,n),d0.extend(t,e,n),e.boundsMTime={},B.obj(e.boundsMTime),B.set(t,e,["property"]),B.setGet(t,e,["backfaceProperty","forceOpaque","forceTranslucent","mapper"]),b4(t,e)}var N4=B.newInstance(Il,"vtkActor"),mr={newInstance:N4,extend:Il},ao={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},He={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"},R4=He.FLOAT,jl={DefaultDataType:R4,DataTypeByteSize:ao,VtkDataTypes:He};function zl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function io(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zl(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zl(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var L4=Me,k4=jl.DefaultDataType;function m0(t,e,n){var r=t.length,a,i,o,s;if(r===0)return{min:Number.MAX_VALUE,max:-Number.MAX_VALUE};for(a=t[e],i=a,s=e;s<r;s+=n)o=t[s],o<a?a=o:o>i&&(i=o);return{min:a,max:i}}function F4(){var t=Number.MAX_VALUE,e=-Number.MAX_VALUE,n=0,r=0;return{add:function(i){t>i&&(t=i),e<i&&(e=i),n++,r+=i},get:function(){return{min:t,max:e,count:n,sum:r,mean:r/n}},getRange:function(){return{min:t,max:e}}}}function Wl(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(e<0&&n>1){for(var r=t.length,a=r/n,i=new Float64Array(a),o=0,s=0;o<a;++o){for(var c,u=s+n;s<u;++s)i[o]+=t[s]*t[s];c=o,i[c]=Math.pow(i[c],.5)}return m0(i,0,1)}return m0(t,e<0?0:e,n)}function Hl(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=t||[];n.length<=e;)n.push(null);return n}function x0(t){return Object.prototype.toString.call(t).slice(8,-1)}function A4(t){for(var e=t.getNumberOfComponents(),n=0,r=new Array(e),a=0;a<t.getNumberOfTuples();++a){t.getTuple(a,r);var i=Bt(r,e);i>n&&(n=i)}return n}var V4={computeRange:Wl,createRangeHelper:F4,fastComputeRange:m0,getDataType:x0,getMaxNorm:A4};function B4(t,e){e.classHierarchy.push("vtkDataArray");function n(r){if(r<0)return!1;var a=t.getNumberOfComponents(),i=e.values.length/(a>0?a:1);if(r===i)return!0;if(r>i){var o=e.values;return e.values=Gn(e.dataType,(r+i)*a),e.values.set(o),!0}return e.size>r*a&&(e.size=r*a,t.dataChange()),!0}t.dataChange=function(){e.ranges=null,t.modified()},t.resize=function(r){n(r);var a=r*t.getNumberOfComponents();return e.size!==a?(e.size=a,t.dataChange(),!0):!1},t.initialize=function(){t.resize(0)},t.getElementComponentSize=function(){return e.values.BYTES_PER_ELEMENT},t.getComponent=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.values[r*e.numberOfComponents+a]},t.setComponent=function(r,a,i){i!==e.values[r*e.numberOfComponents+a]&&(e.values[r*e.numberOfComponents+a]=i,t.dataChange())},t.getValue=function(r){var a=r/e.numberOfComponents,i=r%e.numberOfComponents;return t.getComponent(a,i)},t.setValue=function(r,a){var i=r/e.numberOfComponents,o=r%e.numberOfComponents;t.setComponent(i,o,a)},t.getData=function(){return e.size===e.values.length?e.values:e.values.subarray(0,e.size)},t.getRange=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,a=r<0?e.numberOfComponents:r,i=null;return e.ranges||(e.ranges=Hl(e.ranges,e.numberOfComponents)),i=e.ranges[a],i?(e.rangeTuple[0]=i.min,e.rangeTuple[1]=i.max,e.rangeTuple):(i=Wl(t.getData(),r,e.numberOfComponents),e.ranges[a]=i,e.rangeTuple[0]=i.min,e.rangeTuple[1]=i.max,e.rangeTuple)},t.setRange=function(r,a){e.ranges||(e.ranges=Hl(e.ranges,e.numberOfComponents));var i={min:r.min,max:r.max};return e.ranges[a]=i,e.rangeTuple[0]=i.min,e.rangeTuple[1]=i.max,e.rangeTuple},t.setTuple=function(r,a){for(var i=r*e.numberOfComponents,o=0;o<e.numberOfComponents;o++)e.values[i+o]=a[o]},t.setTuples=function(r,a){for(var i=r*e.numberOfComponents,o=Math.min(a.length,e.size-i),s=0;s<o;)e.values[i++]=a[s++]},t.insertTuple=function(r,a){return e.size<=r*e.numberOfComponents&&(e.size=(r+1)*e.numberOfComponents,n(r+1)),t.setTuple(r,a),r},t.insertTuples=function(r,a){var i=r+a.length/e.numberOfComponents;return e.size<i*e.numberOfComponents&&(e.size=i*e.numberOfComponents,n(i)),t.setTuples(r,a),i},t.insertNextTuple=function(r){var a=e.size/e.numberOfComponents;return t.insertTuple(a,r)},t.insertNextTuples=function(r){var a=e.size/e.numberOfComponents;return t.insertTuples(a,r)},t.getTuple=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=e.numberOfComponents||1,o=r*i;switch(i){case 4:a[3]=e.values[o+3];case 3:a[2]=e.values[o+2];case 2:a[1]=e.values[o+1];case 1:a[0]=e.values[o];break;default:for(var s=i-1;s>=0;--s)a[s]=e.values[o+s]}return a},t.getTuples=function(r,a){var i=(r??0)*e.numberOfComponents,o=(a??t.getNumberOfTuples())*e.numberOfComponents,s=t.getData().subarray(i,o);return s.length>0?s:null},t.getTupleLocation=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return r*e.numberOfComponents},t.getNumberOfComponents=function(){return e.numberOfComponents},t.getNumberOfValues=function(){return e.size},t.getNumberOfTuples=function(){return e.size/e.numberOfComponents},t.getDataType=function(){return e.dataType},t.newClone=function(){return Kl({empty:!0,name:e.name,dataType:e.dataType,numberOfComponents:e.numberOfComponents})},t.getName=function(){return e.name||(t.modified(),e.name="vtkDataArray".concat(t.getMTime())),e.name},t.setData=function(r,a){e.values=r,e.size=r.length,e.dataType=x0(r),a&&(e.numberOfComponents=a),e.size%e.numberOfComponents!==0&&(e.numberOfComponents=1),t.dataChange()},t.getState=function(){if(e.deleted)return null;var r=io(io({},e),{},{vtkClass:t.getClassName()});r.values=Array.from(r.values),delete r.buffer,Object.keys(r).forEach(function(i){r[i]||delete r[i]});var a={};return Object.keys(r).sort().forEach(function(i){a[i]=r[i]}),a.mtime&&delete a.mtime,a},t.deepCopy=function(r){t.shallowCopy(r),t.setData(r.getData().slice())},t.interpolateTuple=function(r,a,i,o,s,c){var u=e.numberOfComponents||1;(u!==a.getNumberOfComponents()||u!==o.getNumberOfComponents())&&L4("numberOfComponents must match");var f=a.getTuple(i),l=o.getTuple(s),p=[];switch(p.length=u,u){case 4:p[3]=f[3]+(l[3]-f[3])*c;case 3:p[2]=f[2]+(l[2]-f[2])*c;case 2:p[1]=f[1]+(l[1]-f[1])*c;case 1:p[0]=f[0]+(l[0]-f[0])*c;break;default:for(var h=0;h<u;h++)p[h]=f[h]+(l[h]-f[h])*c}return t.insertTuple(r,p)}}var U4={name:"",numberOfComponents:1,dataType:k4,rangeTuple:[0,0]};function $l(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,U4,n),!e.empty&&!e.values&&!e.size)throw new TypeError("Cannot create vtkDataArray object without: size > 0, values");if(e.values?Array.isArray(e.values)&&(e.values=_s(e.dataType,e.values)):e.values=Gn(e.dataType,e.size),e.values){var r;e.size=(r=e.size)!==null&&r!==void 0?r:e.values.length,e.dataType=x0(e.values)}ht(t,e),Mi(t,e,["name","numberOfComponents"]),B4(t,e)}var Kl=Je($l,"vtkDataArray"),de=io(io({newInstance:Kl,extend:$l},V4),jl);function G4(t,e){e.classHierarchy.push("vtkAbstractMapper"),t.update=function(){t.getInputData()},t.addClippingPlane=function(n){return n.isA("vtkPlane")?e.clippingPlanes.includes(n)?!1:(e.clippingPlanes.push(n),t.modified(),!0):!1},t.getNumberOfClippingPlanes=function(){return e.clippingPlanes.length},t.removeAllClippingPlanes=function(){return e.clippingPlanes.length===0?!1:(e.clippingPlanes.length=0,t.modified(),!0)},t.removeClippingPlane=function(n){var r=e.clippingPlanes.indexOf(n);return r===-1?!1:(e.clippingPlanes.splice(r,1),t.modified(),!0)},t.getClippingPlanes=function(){return e.clippingPlanes},t.setClippingPlanes=function(n){if(n)if(!Array.isArray(n))t.addClippingPlane(n);else for(var r=n.length,a=0;a<r&&a<6;a++)t.addClippingPlane(n[a])},t.getClippingPlaneInDataCoords=function(n,r,a){var i=e.clippingPlanes,o=n;if(i){var s=i.length;if(r>=0&&r<s){var c=i[r],u=c.getNormal(),f=c.getOrigin(),l=u[0],p=u[1],h=u[2],v=-(l*f[0]+p*f[1]+h*f[2]);a[0]=l*o[0]+p*o[4]+h*o[8]+v*o[12],a[1]=l*o[1]+p*o[5]+h*o[9]+v*o[13],a[2]=l*o[2]+p*o[6]+h*o[10]+v*o[14],a[3]=l*o[3]+p*o[7]+h*o[11]+v*o[15];return}}B.vtkErrorMacro("Clipping plane index ".concat(r," is out of range."))}}var P4={clippingPlanes:[]};function I4(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,P4,n),B.obj(t,e),B.algo(t,e,1,0),e.clippingPlanes||(e.clippingPlanes=[]),G4(t,e)}var C0={extend:I4};function Xl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function j4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xl(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xl(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function z4(t,e){t.getBounds=function(){B.vtkErrorMacro("vtkAbstractMapper3D.getBounds - NOT IMPLEMENTED")},t.getCenter=function(){var n,r=t.getBounds();return e.center=Ve.isValid(r)?Ve.getCenter(r):null,(n=e.center)===null||n===void 0?void 0:n.slice()},t.getLength=function(){var n=t.getBounds();return Ve.getDiagonalLength(n)}}var W4=function(e){return j4({bounds:ve(Ve.INIT_BOUNDS),center:[0,0,0],viewSpecificProperties:{}},e)};function H4(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,W4(n)),C0.extend(t,e,n),B.setGet(t,e,["viewSpecificProperties"]),z4(t,e)}var ql={extend:H4},Yl=B.vtkErrorMacro,$4=B.vtkWarningMacro;function K4(t,e){e.classHierarchy.push("vtkFieldData");var n=t.getState;e.arrays&&(e.arrays=e.arrays.map(function(r){return{data:wt(r.data)}})),t.initialize=function(){t.initializeFields(),t.copyAllOn(),t.clearFieldFlags()},t.initializeFields=function(){e.arrays=[],e.copyFieldFlags={},t.modified()},t.copyStructure=function(r){t.initializeFields(),e.copyFieldFlags=r.getCopyFieldFlags().map(function(a){return a}),e.arrays=r.arrays().map(function(a){return{array:a}})},t.getNumberOfArrays=function(){return e.arrays.length},t.getNumberOfActiveArrays=function(){return e.arrays.length},t.addArray=function(r){var a=r.getName(),i=t.getArrayWithIndex(a),o=i.array,s=i.index;return o!=null?(e.arrays[s]={data:r},s):(e.arrays=[].concat(e.arrays,{data:r}),e.arrays.length-1)},t.removeAllArrays=function(){e.arrays=[]},t.removeArray=function(r){var a=e.arrays.findIndex(function(i){return i.data.getName()===r});return t.removeArrayByIndex(a)},t.removeArrayByIndex=function(r){return r!==-1&&r<e.arrays.length?(e.arrays.splice(r,1),!0):!1},t.getArrays=function(){return e.arrays.map(function(r){return r.data})},t.getArray=function(r){return typeof r=="number"?t.getArrayByIndex(r):t.getArrayByName(r)},t.getArrayByName=function(r){return e.arrays.reduce(function(a,i,o){return i.data.getName()===r?i.data:a},null)},t.getArrayWithIndex=function(r){var a=e.arrays.findIndex(function(i){return i.data.getName()===r});return{array:a!==-1?e.arrays[a].data:null,index:a}},t.getArrayByIndex=function(r){return r>=0&&r<e.arrays.length?e.arrays[r].data:null},t.hasArray=function(r){return t.getArrayWithIndex(r).index>=0},t.getArrayName=function(r){var a=e.arrays[r];return a?a.data.getName():""},t.getCopyFieldFlags=function(){return e.copyFieldFlags},t.getFlag=function(r){return e.copyFieldFlags[r]},t.passData=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;r.getArrays().forEach(function(o){var s=t.getFlag(o.getName());if(s!==!1&&!(e.doCopyAllOff&&s!==!0)&&o){var c=t.getArrayByName(o.getName());if(c)if(o.getNumberOfComponents()===c.getNumberOfComponents())if(a>-1&&a<o.getNumberOfTuples()){var p=i>-1?i:a;c.insertTuple(p,o.getTuple(a))}else c.insertTuples(0,o.getTuples());else Yl("Unhandled case in passData");else if(a<0||a>o.getNumberOfTuples())t.addArray(o),r.getAttributes(o).forEach(function(h){t.setAttribute(o,h)});else{var u=o.getNumberOfComponents(),f=o.getNumberOfValues(),l=i>-1?i:a;f<=l*u&&(f=(l+1)*u),c=de.newInstance({name:o.getName(),dataType:o.getDataType(),numberOfComponents:u,values:B.newTypedArray(o.getDataType(),f),size:0}),c.insertTuple(l,o.getTuple(a)),t.addArray(c),r.getAttributes(o).forEach(function(h){t.setAttribute(c,h)})}}})},t.interpolateData=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5;r.getArrays().forEach(function(c){var u=t.getFlag(c.getName());if(u!==!1&&!(e.doCopyAllOff&&u!==!0)&&c){var f=t.getArrayByName(c.getName());if(f)if(c.getNumberOfComponents()===f.getNumberOfComponents())if(a>-1&&a<c.getNumberOfTuples()){var v=o>-1?o:a;f.interpolateTuple(v,c,a,c,i,s),$4("Unexpected case in interpolateData")}else f.insertTuples(c.getTuples());else Yl("Unhandled case in interpolateData");else if(a<0||i<0||a>c.getNumberOfTuples())t.addArray(c),r.getAttributes(c).forEach(function(y){t.setAttribute(c,y)});else{var l=c.getNumberOfComponents(),p=c.getNumberOfValues(),h=o>-1?o:a;p<=h*l&&(p=(h+1)*l),f=de.newInstance({name:c.getName(),dataType:c.getDataType(),numberOfComponents:l,values:B.newTypedArray(c.getDataType(),p),size:0}),f.interpolateTuple(h,c,a,c,i,s),t.addArray(f),r.getAttributes(c).forEach(function(y){t.setAttribute(f,y)})}}})},t.copyFieldOn=function(r){e.copyFieldFlags[r]=!0},t.copyFieldOff=function(r){e.copyFieldFlags[r]=!1},t.copyAllOn=function(){(!e.doCopyAllOn||e.doCopyAllOff)&&(e.doCopyAllOn=!0,e.doCopyAllOff=!1,t.modified())},t.copyAllOff=function(){(e.doCopyAllOn||!e.doCopyAllOff)&&(e.doCopyAllOn=!1,e.doCopyAllOff=!0,t.modified())},t.clearFieldFlags=function(){e.copyFieldFlags={}},t.deepCopy=function(r){e.arrays=r.getArrays().map(function(a){var i=a.newClone();return i.deepCopy(a),{data:i}})},t.copyFlags=function(r){return r.getCopyFieldFlags().map(function(a){return a})},t.reset=function(){return e.arrays.forEach(function(r){return r.data.reset()})},t.getMTime=function(){return e.arrays.reduce(function(r,a){return a.data.getMTime()>r?a.data.getMTime():r},e.mtime)},t.getNumberOfComponents=function(){return e.arrays.reduce(function(r,a){return r+a.data.getNumberOfComponents()},0)},t.getNumberOfTuples=function(){return e.arrays.length>0?e.arrays[0].getNumberOfTuples():0},t.getState=function(){var r=n();return r&&(r.arrays=e.arrays.map(function(a){return{data:a.data.getState()}})),r}}var X4={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1};function Jl(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,X4,n),B.obj(t,e),K4(t,e)}var q4=B.newInstance(Jl,"vtkFieldData"),Y4={newInstance:q4,extend:Jl},Zl={SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},J4={MAX:0,EXACT:1,NOLIMIT:2},Z4={DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},Q4={DUPLICATEPOINT:1,HIDDENPOINT:2},e9={COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},t9="vtkGhostType",vn={DEFAULT:0,SINGLE:1,DOUBLE:2},S0={AttributeCopyOperations:e9,AttributeLimitTypes:J4,AttributeTypes:Zl,CellGhostTypes:Z4,DesiredOutputPrecision:vn,PointGhostTypes:Q4,ghostArrayName:t9};function Ql(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function e1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ql(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ql(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Vr=S0.AttributeTypes,gn=S0.AttributeCopyOperations,oo=B.vtkWarningMacro;function r9(t,e){var n=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];function r(o){var s=n.find(function(c){return Vr[c.toUpperCase()]===o||typeof o!="number"&&c.toLowerCase()===o.toLowerCase()});return typeof s>"u"&&(s=null),s}e.classHierarchy.push("vtkDataSetAttributes");var a=e1({},t);t.checkNumberOfComponents=function(o){return!0},t.setAttribute=function(o,s){var c=r(s);if(o&&c.toUpperCase()==="PEDIGREEIDS"&&!o.isA("vtkDataArray"))return oo("Cannot set attribute ".concat(c,". The attribute must be a vtkDataArray.")),-1;if(o&&!t.checkNumberOfComponents(o,c))return oo("Cannot set attribute ".concat(c,". Incorrect number of components.")),-1;var u=e["active".concat(c)];if(u>=0&&u<e.arrays.length){if(e.arrays[u]===o)return u;t.removeArrayByIndex(u)}return o?(u=t.addArray(o),e["active".concat(c)]=u):e["active".concat(c)]=-1,t.modified(),e["active".concat(c)]},t.getAttributes=function(o){return n.filter(function(s){return t["get".concat(s)]()===o})},t.setActiveAttributeByName=function(o,s){return t.setActiveAttributeByIndex(t.getArrayWithIndex(o).index,s)},t.setActiveAttributeByIndex=function(o,s){var c=r(s);if(o>=0&&o<e.arrays.length){if(c.toUpperCase()!=="PEDIGREEIDS"){var u=t.getArrayByIndex(o);if(!u.isA("vtkDataArray"))return oo("Cannot set attribute ".concat(c,". Only vtkDataArray subclasses can be set as active attributes.")),-1;if(!t.checkNumberOfComponents(u,c))return oo("Cannot set attribute ".concat(c,". Incorrect number of components.")),-1}return e["active".concat(c)]=o,t.modified(),o}return o===-1&&(e["active".concat(c)]=o,t.modified()),-1},t.getActiveAttribute=function(o){var s=r(o);return t["get".concat(s)]()},t.removeAllArrays=function(){n.forEach(function(o){e["active".concat(o)]=-1}),a.removeAllArrays()},t.removeArrayByIndex=function(o){return o!==-1&&n.forEach(function(s){o===e["active".concat(s)]?e["active".concat(s)]=-1:o<e["active".concat(s)]&&(e["active".concat(s)]-=1)}),a.removeArrayByIndex(o)},n.forEach(function(o){var s="active".concat(o);t["get".concat(o)]=function(){return t.getArrayByIndex(e[s])},t["set".concat(o)]=function(c){return t.setAttribute(c,o)},t["setActive".concat(o)]=function(c){return t.setActiveAttributeByIndex(t.getArrayWithIndex(c).index,o)},t["copy".concat(o,"Off")]=function(){var c=o.toUpperCase();e.copyAttributeFlags[gn.PASSDATA][Vr[c]]=!1},t["copy".concat(o,"On")]=function(){var c=o.toUpperCase();e.copyAttributeFlags[gn.PASSDATA][Vr[c]]=!0}}),t.initializeAttributeCopyFlags=function(){e.copyAttributeFlags=[],Object.keys(gn).filter(function(o){return o!=="ALLCOPY"}).forEach(function(o){e.copyAttributeFlags[gn[o]]=Object.keys(Vr).filter(function(s){return s!=="NUM_ATTRIBUTES"}).reduce(function(s,c){return s[Vr[c]]=!0,s},[])}),e.copyAttributeFlags[gn.COPYTUPLE][Vr.GLOBALIDS]=!1,e.copyAttributeFlags[gn.INTERPOLATE][Vr.GLOBALIDS]=!1,e.copyAttributeFlags[gn.COPYTUPLE][Vr.PEDIGREEIDS]=!1},t.initialize=B.chain(t.initialize,t.initializeAttributeCopyFlags),e.dataArrays&&Object.keys(e.dataArrays).length&&Object.keys(e.dataArrays).forEach(function(o){!e.dataArrays[o].ref&&e.dataArrays[o].type==="vtkDataArray"&&t.addArray(de.newInstance(e.dataArrays[o]))});var i=t.shallowCopy;t.shallowCopy=function(o,s){i(o,s),e.arrays=o.getArrays().map(function(c){var u=c.newClone();return u.shallowCopy(c,s),{data:u}})},t.initializeAttributeCopyFlags()}var n9={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1};function t1(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,n9,n),Y4.extend(t,e,n),B.setGet(t,e,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),e.arrays||(e.arrays={}),r9(t,e)}var a9=B.newInstance(t1,"vtkDataSetAttributes"),r1=e1({newInstance:a9,extend:t1},S0),pt={UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6},n1={FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7},i9={FieldDataTypes:pt,FieldAssociations:n1};function a1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function o9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a1(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var T0=["pointData","cellData","fieldData"];function s9(t,e){e.classHierarchy.push("vtkDataSet"),T0.forEach(function(r){e[r]?e[r]=wt(e[r]):e[r]=r1.newInstance()});var n=t.shallowCopy;t.shallowCopy=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n(r,a),T0.forEach(function(i){e[i]=r1.newInstance(),e[i].shallowCopy(r.getReferenceByName(i))})}}var u9={};function i1(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,u9,n),B.obj(t,e),B.setGet(t,e,T0),s9(t,e)}var c9=B.newInstance(i1,"vtkDataSet"),dn=o9({newInstance:c9,extend:i1},i9),Qt={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9},o1={StructuredType:Qt};function s1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function f9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s1(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var xr=o1.StructuredType;function l9(t){for(var e=0,n=0;n<3;++n)t[n*2]<t[n*2+1]&&e++;return t[0]>t[1]||t[2]>t[3]||t[4]>t[5]?xr.EMPTY:e===3?xr.XYZ_GRID:e===2?t[0]===t[1]?xr.YZ_PLANE:t[2]===t[3]?xr.XZ_PLANE:xr.XY_PLANE:e===1?t[0]<t[1]?xr.X_LINE:t[2]<t[3]?xr.Y_LINE:xr.Z_LINE:xr.SINGLE_POINT}var p9=f9({getDataDescriptionFromExtent:l9},o1),yn=B.vtkErrorMacro;function h9(t,e){e.classHierarchy.push("vtkImageData"),t.setExtent=function(){if(e.deleted)return yn("instance deleted - cannot call any method"),!1;for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i=r.length===1?r[0]:r;if(i.length!==6)return!1;var o=e.extent.some(function(s,c){return s!==i[c]});return o&&(e.extent=i.slice(),e.dataDescription=p9.getDataDescriptionFromExtent(e.extent),t.modified()),o},t.setDimensions=function(){var n,r,a;if(e.deleted){yn("instance deleted - cannot call any method");return}if(arguments.length===1){var i=arguments.length<=0?void 0:arguments[0];n=i[0],r=i[1],a=i[2]}else if(arguments.length===3)n=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],a=arguments.length<=2?void 0:arguments[2];else{yn("Bad dimension specification");return}t.setExtent(0,n-1,0,r-1,0,a-1)},t.getDimensions=function(){return[e.extent[1]-e.extent[0]+1,e.extent[3]-e.extent[2]+1,e.extent[5]-e.extent[4]+1]},t.getNumberOfCells=function(){for(var n=t.getDimensions(),r=1,a=0;a<3;a++){if(n[a]===0)return 0;n[a]>1&&(r*=n[a]-1)}return r},t.getNumberOfPoints=function(){var n=t.getDimensions();return n[0]*n[1]*n[2]},t.getPoint=function(n){var r=t.getDimensions();if(r[0]===0||r[1]===0||r[2]===0)return yn("Requesting a point from an empty image."),null;var a=new Float64Array(3);switch(e.dataDescription){case Qt.EMPTY:return null;case Qt.SINGLE_POINT:break;case Qt.X_LINE:a[0]=n;break;case Qt.Y_LINE:a[1]=n;break;case Qt.Z_LINE:a[2]=n;break;case Qt.XY_PLANE:a[0]=n%r[0],a[1]=n/r[0];break;case Qt.YZ_PLANE:a[1]=n%r[1],a[2]=n/r[1];break;case Qt.XZ_PLANE:a[0]=n%r[0],a[2]=n/r[0];break;case Qt.XYZ_GRID:a[0]=n%r[0],a[1]=n/r[0]%r[1],a[2]=n/(r[0]*r[1]);break;default:yn("Invalid dataDescription");break}var i=[0,0,0];return t.indexToWorld(a,i),i},t.getBounds=function(){return t.extentToBounds(t.getSpatialExtent())},t.extentToBounds=function(n){return Ve.transformBounds(n,e.indexToWorld)},t.getSpatialExtent=function(){return Ve.inflate(ve(e.extent),.5)},t.computeTransforms=function(){tc(e.indexToWorld,e.origin),e.indexToWorld[0]=e.direction[0],e.indexToWorld[1]=e.direction[1],e.indexToWorld[2]=e.direction[2],e.indexToWorld[4]=e.direction[3],e.indexToWorld[5]=e.direction[4],e.indexToWorld[6]=e.direction[5],e.indexToWorld[8]=e.direction[6],e.indexToWorld[9]=e.direction[7],e.indexToWorld[10]=e.direction[8],Xr(e.indexToWorld,e.indexToWorld,e.spacing),Ft(e.worldToIndex,e.indexToWorld)},t.indexToWorld=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return be(r,n,e.indexToWorld),r},t.indexToWorldVec3=t.indexToWorld,t.worldToIndex=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return be(r,n,e.worldToIndex),r},t.worldToIndexVec3=t.worldToIndex,t.indexToWorldBounds=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Ve.transformBounds(n,e.indexToWorld,r)},t.worldToIndexBounds=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Ve.transformBounds(n,e.worldToIndex,r)},t.onModified(t.computeTransforms),t.computeTransforms(),t.getCenter=function(){return Ve.getCenter(t.getBounds())},t.computeHistogram=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=[0,0,0,0,0,0];t.worldToIndexBounds(n,a);var i=[0,0,0],o=[0,0,0];Ve.computeCornerPoints(a,i,o),e0(i,i),e0(o,o);var s=t.getDimensions();a0(i,[0,0,0],[s[0]-1,s[1]-1,s[2]-1],i),a0(o,[0,0,0],[s[0]-1,s[1]-1,s[2]-1],o);for(var c=s[0],u=s[0]*s[1],f=t.getPointData().getScalars().getData(),l=-1/0,p=1/0,h=0,v=0,y=0,m=i[2];m<=o[2];m++)for(var x=i[1];x<=o[1];x++)for(var g=i[0]+x*c+m*u,d=i[0];d<=o[0];d++){if(!r||r([d,x,m],a)){var C=f[g];C>l&&(l=C),C<p&&(p=C),h+=C*C,v+=C,y+=1}++g}var S=y>0?v/y:0,T=y?Math.abs(h/y-S*S):0,w=Math.sqrt(T);return{minimum:p,maximum:l,average:S,variance:T,sigma:w,count:y}},t.computeIncrements=function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,a=[],i=r,o=0;o<3;++o)a[o]=i,i*=n[o*2+1]-n[o*2]+1;return a},t.computeOffsetIndex=function(n){var r=ze(n,3),a=r[0],i=r[1],o=r[2],s=t.getExtent(),c=t.getPointData().getScalars().getNumberOfComponents(),u=t.computeIncrements(s,c);return Math.floor((Math.round(a)-s[0])*u[0]+(Math.round(i)-s[2])*u[1]+(Math.round(o)-s[4])*u[2])},t.getOffsetIndexFromWorld=function(n){for(var r=t.getExtent(),a=t.worldToIndex(n),i=0;i<3;++i)if(a[i]<r[i*2]||a[i]>r[i*2+1])return yn("GetScalarPointer: Pixel ".concat(a," is not in memory. Current extent = ").concat(r)),NaN;return t.computeOffsetIndex(a)},t.getScalarValueFromWorld=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=t.getPointData().getScalars().getNumberOfComponents();if(r<0||r>=a)return yn("GetScalarPointer: Scalar Component ".concat(r," is not within bounds. Current Scalar numberOfComponents: ").concat(a)),NaN;var i=t.getOffsetIndexFromWorld(n);return Number.isNaN(i)?i:t.getPointData().getScalars().getComponent(i,r)}}var v9={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:Qt.EMPTY};function u1(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,v9,n),dn.extend(t,e,n),e.direction?Array.isArray(e.direction)&&(e.direction=new Float64Array(e.direction.slice(0,9))):e.direction=sr(new Float64Array(9)),e.indexToWorld=new Float64Array(16),e.worldToIndex=new Float64Array(16),B.get(t,e,["indexToWorld","worldToIndex"]),B.setGetArray(t,e,["origin","spacing"],3),B.setGetArray(t,e,["direction"],9),B.getArray(t,e,["extent"],6),h9(t,e)}var g9=B.newInstance(u1,"vtkImageData"),w0={newInstance:g9,extend:u1},d9={MAGNITUDE:0,COMPONENT:1,RGBCOLORS:2},E0={LUMINANCE:1,LUMINANCE_ALPHA:2,RGB:3,RGBA:4},so={VectorMode:d9,ScalarMappingTarget:E0},y9={DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},m9={DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5},x9={BY_ID:0,BY_NAME:1},Br={ColorMode:y9,GetArray:x9,ScalarMode:m9};function c1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function C9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c1(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var f1=so.ScalarMappingTarget,fr=so.VectorMode,mn=de.VtkDataTypes,uo=Br.ColorMode,l1=B.vtkErrorMacro;function S9(t){return t}function p1(t){return Math.floor(t*255+.5)}function T9(t,e){e.classHierarchy.push("vtkScalarsToColors"),t.setVectorModeToMagnitude=function(){return t.setVectorMode(fr.MAGNITUDE)},t.setVectorModeToComponent=function(){return t.setVectorMode(fr.COMPONENT)},t.setVectorModeToRGBColors=function(){return t.setVectorMode(fr.RGBCOLORS)},t.build=function(){},t.isOpaque=function(){return!0},t.setAnnotations=function(n,r){if(!(n&&!r||!n&&r)){if(n&&r&&n.length!==r.length){l1("Values and annotations do not have the same number of tuples so ignoring");return}if(e.annotationArray=[],r&&n)for(var a=r.length,i=0;i<a;i++)e.annotationArray.push({value:n[i],annotation:String(r[i])});t.updateAnnotatedValueMap(),t.modified()}},t.setAnnotation=function(n,r){var a=t.checkForAnnotatedValue(n),i=!1;return a>=0?e.annotationArray[a].annotation!==r&&(e.annotationArray[a].annotation=r,i=!0):(e.annotationArray.push({value:n,annotation:r}),a=e.annotationArray.length-1,i=!0),i&&(t.updateAnnotatedValueMap(),t.modified()),a},t.getNumberOfAnnotatedValues=function(){return e.annotationArray.length},t.getAnnotatedValue=function(n){return n<0||n>=e.annotationArray.length?null:e.annotationArray[n].value},t.getAnnotation=function(n){return e.annotationArray[n]===void 0?null:e.annotationArray[n].annotation},t.getAnnotatedValueIndex=function(n){return e.annotationArray.length?t.checkForAnnotatedValue(n):-1},t.removeAnnotation=function(n){var r=t.checkForAnnotatedValue(n),a=r>=0;return a&&(e.annotationArray.splice(r,1),t.updateAnnotatedValueMap(),t.modified()),a},t.resetAnnotations=function(){e.annotationArray=[],e.annotatedValueMap=[],t.modified()},t.getAnnotationColor=function(n,r){if(e.indexedLookup){var a=t.getAnnotatedValueIndex(n);t.getIndexedColor(a,r)}else t.getColor(parseFloat(n),r),r[3]=1},t.checkForAnnotatedValue=function(n){return t.getAnnotatedValueIndexInternal(n)},t.getAnnotatedValueIndexInternal=function(n){if(e.annotatedValueMap[n]!==void 0){var r=e.annotationArray.length;return e.annotatedValueMap[n]%r}return-1},t.getIndexedColor=function(n,r){r[0]=0,r[1]=0,r[2]=0,r[3]=0},t.updateAnnotatedValueMap=function(){e.annotatedValueMap=[];for(var n=e.annotationArray.length,r=0;r<n;r++)e.annotatedValueMap[e.annotationArray[r].value]=r},t.mapScalars=function(n,r,a){var i=n.getNumberOfComponents(),o=null;if(r===uo.DEFAULT&&n.getDataType()===mn.UNSIGNED_CHAR||r===uo.DIRECT_SCALARS&&n)o=t.convertToRGBA(n,i,n.getNumberOfTuples());else{var s={type:"vtkDataArray",name:"temp",numberOfComponents:4,dataType:mn.UNSIGNED_CHAR},c=B.newTypedArray(s.dataType,4*n.getNumberOfTuples());s.values=c,s.size=c.length,o=de.newInstance(s);var u=a;u<0&&i>1?t.mapVectorsThroughTable(n,o,f1.RGBA,-1,-1):(u<0&&(u=0),u>=i&&(u=i-1),t.mapScalarsThroughTable(n,o,f1.RGBA,u))}return o},t.mapVectorsToMagnitude=function(n,r,a){for(var i=n.getNumberOfTuples(),o=n.getNumberOfComponents(),s=r.getData(),c=n.getData(),u=0;u<i;u++){for(var f=0,l=0;l<a;l++)f+=c[u*o+l]*c[u*o+l];s[u]=Math.sqrt(f)}},t.mapVectorsThroughTable=function(n,r,a,i,o){var s=t.getVectorMode(),c=o,u=i,f=n.getNumberOfComponents();s===fr.COMPONENT?(u===-1&&(u=t.getVectorComponent()),u<0&&(u=0),u>=f&&(u=f-1)):(c===-1&&(c=t.getVectorSize()),c<=0?(u=0,c=f):(u<0&&(u=0),u>=f&&(u=f-1),u+c>f&&(c=f-u)),s===fr.MAGNITUDE&&(f===1||c===1)&&(s=fr.COMPONENT));var l=0;switch(u>0&&(l=u),s){case fr.COMPONENT:{t.mapScalarsThroughTable(n,r,a,l);break}case fr.RGBCOLORS:break;case fr.MAGNITUDE:default:{var p=de.newInstance({numberOfComponents:1,values:new Float32Array(n.getNumberOfTuples())});t.mapVectorsToMagnitude(n,p,c),t.mapScalarsThroughTable(p,r,a,0);break}}},t.luminanceToRGBA=function(n,r,a,i){for(var o=i(a),s=r.getData(),c=n.getData(),u=s.length,f=0,l=1,p=0,h=f;h<u;h+=l){var v=i(s[h]);c[p*4]=v,c[p*4+1]=v,c[p*4+2]=v,c[p*4+3]=o,p++}},t.luminanceAlphaToRGBA=function(n,r,a,i){for(var o=r.getData(),s=n.getData(),c=o.length,u=0,f=2,l=0,p=u;p<c;p+=f){var h=i(o[p]);s[l]=h,s[l+1]=h,s[l+2]=h,s[l+3]=i(o[p+1])*a,l+=4}},t.rGBToRGBA=function(n,r,a,i){for(var o=p1(a),s=r.getData(),c=n.getData(),u=s.length,f=0,l=3,p=0,h=f;h<u;h+=l)c[p*4]=i(s[h]),c[p*4+1]=i(s[h+1]),c[p*4+2]=i(s[h+2]),c[p*4+3]=o,p++},t.rGBAToRGBA=function(n,r,a,i){for(var o=r.getData(),s=n.getData(),c=o.length,u=0,f=4,l=0,p=u;p<c;p+=f)s[l*4]=i(o[p]),s[l*4+1]=i(o[p+1]),s[l*4+2]=i(o[p+2]),s[l*4+3]=i(o[p+3])*a,l++},t.convertToRGBA=function(n,r,a){var i=e.alpha;if(r===4&&i>=1&&n.getDataType()===mn.UNSIGNED_CHAR)return n;var o=de.newInstance({numberOfComponents:4,empty:!0,size:4*a,dataType:mn.UNSIGNED_CHAR});if(a<=0)return o;i=i>0?i:0,i=i<1?i:1;var s=S9;switch((n.getDataType()===mn.FLOAT||n.getDataType()===mn.DOUBLE)&&(s=p1),r){case 1:t.luminanceToRGBA(o,n,i,s);break;case 2:t.luminanceAlphaToRGBA(o,n,s);break;case 3:t.rGBToRGBA(o,n,i,s);break;case 4:t.rGBAToRGBA(o,n,i,s);break;default:return l1("Cannot convert colors"),null}return o},t.usingLogScale=function(){return!1},t.getNumberOfAvailableColors=function(){return 256*256*256},t.setRange=function(n,r){return t.setMappingRange(n,r)},t.getRange=function(){return t.getMappingRange()},t.areScalarsOpaque=function(n,r,a){if(!n)return t.isOpaque();var i=n.getNumberOfComponents();if(r===uo.DEFAULT&&n.getDataType()===mn.UNSIGNED_CHAR||r===uo.DIRECT_SCALARS){if(i===3||i===1)return e.alpha>=1;var o=n.getRange(i-1);return o[0]===255}return!0}}var w9={alpha:1,vectorComponent:0,vectorSize:-1,vectorMode:fr.COMPONENT,mappingRange:null,annotationArray:null,annotatedValueMap:null,indexedLookup:!1};function h1(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,w9,n),B.obj(t,e),e.mappingRange=[0,255],e.annotationArray=[],e.annotatedValueMap=[],B.setGet(t,e,["vectorSize","vectorComponent","vectorMode","alpha","indexedLookup"]),B.setArray(t,e,["mappingRange"],2),B.getArray(t,e,["mappingRange"]),T9(t,e)}var E9=B.newInstance(h1,"vtkScalarsToColors"),co=C9({newInstance:E9,extend:h1},so),v1=B.vtkErrorMacro,g1=0,d1=1,D0=2;function D9(t,e){e.classHierarchy.push("vtkLookupTable"),t.isOpaque=function(){if(e.opaqueFlagBuildTime.getMTime()<t.getMTime()){var n=!0;e.nanColor[3]<1&&(n=0),e.useBelowRangeColor&&e.belowRangeColor[3]<1&&(n=0),e.useAboveRangeColor&&e.aboveRangeColor[3]<1&&(n=0);for(var r=3;r<e.table.length&&n;r+=4)e.table[r]<255&&(n=!1);e.opaqueFlag=n,e.opaqueFlagBuildTime.modified()}return e.opaqueFlag},t.usingLogScale=function(){return!1},t.getNumberOfAvailableColors=function(){return e.table.length/4},t.linearIndexLookup=function(n,r){var a=0,i=Number(n);return i<r.range[0]?a=r.maxIndex+g1+1.5:i>r.range[1]?a=r.maxIndex+d1+1.5:(a=(i+r.shift)*r.scale,a=a<r.maxIndex?a:r.maxIndex),Math.floor(a)},t.linearLookup=function(n,r,a){var i=0;qi(n)?i=Math.floor(a.maxIndex+1.5+D0):i=t.linearIndexLookup(n,a);var o=4*i;return r.slice(o,o+4)},t.indexedLookupFunction=function(n,r,a){var i=t.getAnnotatedValueIndexInternal(n);i===-1&&(i=e.numberOfColors+D0);var o=4*i;return[r[o],r[o+1],r[o+2],r[o+3]]},t.lookupShiftAndScale=function(n,r){r.shift=-n[0],r.scale=Number.MAX_VALUE,n[1]>n[0]&&(r.scale=(r.maxIndex+1)/(n[1]-n[0]))},t.mapScalarsThroughTable=function(n,r,a,i){var o=t.linearLookup;e.indexedLookup&&(o=t.indexedLookupFunction);var s=t.getMappingRange(),c={maxIndex:t.getNumberOfColors()-1,range:s,shift:0,scale:0};t.lookupShiftAndScale(s,c);var u=t.getAlpha(),f=n.getNumberOfTuples(),l=n.getNumberOfComponents(),p=r.getData(),h=n.getData();if(u>=1){if(a===E0.RGBA)for(var v=0;v<f;v++){var y=o(h[v*l+i],e.table,c);p[v*4]=y[0],p[v*4+1]=y[1],p[v*4+2]=y[2],p[v*4+3]=y[3]}}else if(a===E0.RGBA)for(var m=0;m<f;m++){var x=o(h[m*l+i],e.table,c);p[m*4]=x[0],p[m*4+1]=x[1],p[m*4+2]=x[2],p[m*4+3]=Math.floor(x[3]*u+.5)}},t.forceBuild=function(){var n=0,r=0,a=0,i=0,o=e.numberOfColors-1;o&&(n=(e.hueRange[1]-e.hueRange[0])/o,r=(e.saturationRange[1]-e.saturationRange[0])/o,a=(e.valueRange[1]-e.valueRange[0])/o,i=(e.alphaRange[1]-e.alphaRange[0])/o),e.table.length=4*o+16;for(var s=[],c=[],u=0;u<=o;u++)s[0]=e.hueRange[0]+u*n,s[1]=e.saturationRange[0]+u*r,s[2]=e.valueRange[0]+u*a,ln(s,c),c[3]=e.alphaRange[0]+u*i,e.table[u*4]=c[0]*255+.5,e.table[u*4+1]=c[1]*255+.5,e.table[u*4+2]=c[2]*255+.5,e.table[u*4+3]=c[3]*255+.5;t.buildSpecialColors(),e.buildTime.modified()},t.setTable=function(n){if(Array.isArray(n)){var r=n[0].length;e.numberOfColors=n.length;for(var a=4-r,i=0,o=0;o<e.numberOfColors;o++)e.table[o*4]=255,e.table[o*4+1]=255,e.table[o*4+2]=255,e.table[o*4+3]=255;for(var s=0;s<n.length;s++){for(var c=n[s],u=0;u<r;u++)e.table[i++]=c[u];i+=a}return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0}if(n.getNumberOfComponents()!==4)return v1("Expected 4 components for RGBA colors"),!1;if(n.getDataType()!==He.UNSIGNED_CHAR)return v1("Expected unsigned char values for RGBA colors"),!1;e.numberOfColors=n.getNumberOfTuples();var f=n.getData();e.table.length=f.length;for(var l=0;l<f.length;l++)e.table[l]=f[l];return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0},t.buildSpecialColors=function(){var n=e.numberOfColors,r=e.table,a=(n+g1)*4;e.useBelowRangeColor||n===0?(r[a]=e.belowRangeColor[0]*255+.5,r[a+1]=e.belowRangeColor[1]*255+.5,r[a+2]=e.belowRangeColor[2]*255+.5,r[a+3]=e.belowRangeColor[3]*255+.5):(r[a]=r[0],r[a+1]=r[1],r[a+2]=r[2],r[a+3]=r[3]),a=(n+d1)*4,e.useAboveRangeColor||n===0?(r[a]=e.aboveRangeColor[0]*255+.5,r[a+1]=e.aboveRangeColor[1]*255+.5,r[a+2]=e.aboveRangeColor[2]*255+.5,r[a+3]=e.aboveRangeColor[3]*255+.5):(r[a]=r[4*(n-1)+0],r[a+1]=r[4*(n-1)+1],r[a+2]=r[4*(n-1)+2],r[a+3]=r[4*(n-1)+3]),a=(n+D0)*4,r[a]=e.nanColor[0]*255+.5,r[a+1]=e.nanColor[1]*255+.5,r[a+2]=e.nanColor[2]*255+.5,r[a+3]=e.nanColor[3]*255+.5},t.build=function(){(e.table.length<1||t.getMTime()>e.buildTime.getMTime()&&e.insertTime.getMTime()<=e.buildTime.getMTime())&&t.forceBuild()},e.table.length>0&&(t.buildSpecialColors(),e.insertTime.modified())}var O9={numberOfColors:256,hueRange:[0,.66667],saturationRange:[1,1],valueRange:[1,1],alphaRange:[1,1],nanColor:[.5,0,0,1],belowRangeColor:[0,0,0,1],aboveRangeColor:[1,1,1,1],useAboveRangeColor:!1,useBelowRangeColor:!1,alpha:1};function y1(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,O9,n),co.extend(t,e,n),e.table||(e.table=[]),e.buildTime={},B.obj(e.buildTime),e.opaqueFlagBuildTime={},B.obj(e.opaqueFlagBuildTime,{mtime:0}),e.insertTime={},B.obj(e.insertTime,{mtime:0}),B.get(t,e,["buildTime"]),B.setGet(t,e,["numberOfColors","useAboveRangeColor","useBelowRangeColor"]),B.setArray(t,e,["alphaRange","hueRange","saturationRange","valueRange"],2),B.setArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"],4),B.getArray(t,e,["hueRange","saturationRange","valueRange","alphaRange","nanColor","belowRangeColor","aboveRangeColor"]),D9(t,e)}var _9=B.newInstance(y1,"vtkLookupTable"),Hn={newInstance:_9,extend:y1},m1=1,O0=0,b9=["VTK_RESOLVE_OFF","VTK_RESOLVE_POLYGON_OFFSET"];function M9(){return m1}function N9(t){m1=t}function R9(){return O0}function fo(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;O0=t}function L9(){fo(0)}function k9(){fo(0)}function F9(){fo(1)}function A9(){return b9[O0]}var _0={getResolveCoincidentTopologyAsString:A9,getResolveCoincidentTopologyPolygonOffsetFaces:M9,getResolveCoincidentTopology:R9,setResolveCoincidentTopology:fo,setResolveCoincidentTopologyPolygonOffsetFaces:N9,setResolveCoincidentTopologyToDefault:L9,setResolveCoincidentTopologyToOff:k9,setResolveCoincidentTopologyToPolygonOffset:F9};function x1(t,e,n){n.forEach(function(r){t["get".concat(r.method)]=function(){return e[r.key]},t["set".concat(r.method)]=function(a,i){e[r.key]={factor:a,offset:i}}})}var b0=["Polygon","Line","Point"],V9={Polygon:{factor:2,offset:0},Line:{factor:1,offset:-1},Point:{factor:0,offset:-2}},xn={};x1(xn,V9,b0.map(function(t){return{key:t,method:"ResolveCoincidentTopology".concat(t,"OffsetParameters")}}));function B9(t,e){e.resolveCoincidentTopology===void 0&&(e.resolveCoincidentTopology=!1),B.setGet(t,e,["resolveCoincidentTopology"]),e.topologyOffset={Polygon:{factor:0,offset:0},Line:{factor:0,offset:0},Point:{factor:0,offset:0}},Object.keys(_0).forEach(function(n){t[n]=_0[n]}),Object.keys(xn).forEach(function(n){t[n]=xn[n]}),x1(t,e.topologyOffset,b0.map(function(n){return{key:n,method:"RelativeCoincidentTopology".concat(n,"OffsetParameters")}})),t.getCoincidentTopologyPolygonOffsetParameters=function(){var n=xn.getResolveCoincidentTopologyPolygonOffsetParameters(),r=t.getRelativeCoincidentTopologyPolygonOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}},t.getCoincidentTopologyLineOffsetParameters=function(){var n=xn.getResolveCoincidentTopologyLineOffsetParameters(),r=t.getRelativeCoincidentTopologyLineOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}},t.getCoincidentTopologyPointOffsetParameter=function(){var n=xn.getResolveCoincidentTopologyPointOffsetParameters(),r=t.getRelativeCoincidentTopologyPointOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}}}var $n={implementCoincidentTopologyMethods:B9,staticOffsetAPI:xn,otherStaticMethods:_0,CATEGORIES:b0},_t={MIN_KNOWN_PASS:0,ACTOR_PASS:0,COMPOSITE_INDEX_PASS:1,ID_LOW24:2,ID_HIGH24:3,MAX_KNOWN_PASS:3},C1={PassTypes:_t};function S1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function M0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S1(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var T1=dn.FieldAssociations,U9=$n.staticOffsetAPI,G9=$n.otherStaticMethods,N0=Br.ColorMode,Cn=Br.ScalarMode,R0=Br.GetArray,P9=so.VectorMode,I9=de.VtkDataTypes;function $a(t){return function(){return B.vtkErrorMacro("vtkMapper::".concat(t," - NOT IMPLEMENTED"))}}function j9(t,e){e.classHierarchy.push("vtkMapper"),t.getBounds=function(){var n=t.getInputData();return n?(e.static||t.update(),e.bounds=n.getBounds()):e.bounds=hn(),e.bounds},t.setForceCompileOnly=function(n){e.forceCompileOnly=n},t.createDefaultLookupTable=function(){e.lookupTable=Hn.newInstance()},t.getColorModeAsString=function(){return B.enumToString(N0,e.colorMode)},t.setColorModeToDefault=function(){return t.setColorMode(0)},t.setColorModeToMapScalars=function(){return t.setColorMode(1)},t.setColorModeToDirectScalars=function(){return t.setColorMode(2)},t.getScalarModeAsString=function(){return B.enumToString(Cn,e.scalarMode)},t.setScalarModeToDefault=function(){return t.setScalarMode(0)},t.setScalarModeToUsePointData=function(){return t.setScalarMode(1)},t.setScalarModeToUseCellData=function(){return t.setScalarMode(2)},t.setScalarModeToUsePointFieldData=function(){return t.setScalarMode(3)},t.setScalarModeToUseCellFieldData=function(){return t.setScalarMode(4)},t.setScalarModeToUseFieldData=function(){return t.setScalarMode(5)},t.getAbstractScalars=function(n,r,a,i,o){if(!n||!e.scalarVisibility)return{scalars:null,cellFLag:!1};var s=null,c=!1;if(r===Cn.DEFAULT)s=n.getPointData().getScalars(),s||(s=n.getCellData().getScalars(),c=!0);else if(r===Cn.USE_POINT_DATA)s=n.getPointData().getScalars();else if(r===Cn.USE_CELL_DATA)s=n.getCellData().getScalars(),c=!0;else if(r===Cn.USE_POINT_FIELD_DATA){var u=n.getPointData();a===R0.BY_ID?s=u.getArrayByIndex(i):s=u.getArrayByName(o)}else if(r===Cn.USE_CELL_FIELD_DATA){var f=n.getCellData();c=!0,a===R0.BY_ID?s=f.getArrayByIndex(i):s=f.getArrayByName(o)}else if(r===Cn.USE_FIELD_DATA){var l=n.getFieldData();a===R0.BY_ID?s=l.getArrayByIndex(i):s=l.getArrayByName(o)}return{scalars:s,cellFlag:c}},t.mapScalars=function(n,r){var a=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;if(!a){e.colorCoordinates=null,e.colorTextureMap=null,e.colorMapColors=null;return}var i="".concat(t.getMTime()).concat(a.getMTime()).concat(r);if(e.colorBuildString!==i){if(e.useLookupTableScalarRange||t.getLookupTable().setRange(e.scalarRange[0],e.scalarRange[1]),t.canUseTextureMapForColoring(n))t.mapScalarsToTexture(a,r);else{e.colorCoordinates=null,e.colorTextureMap=null;var o=t.getLookupTable();o&&(o.build(),e.colorMapColors=o.mapScalars(a,e.colorMode,e.fieldDataTupleId))}e.colorBuildString="".concat(t.getMTime()).concat(a.getMTime()).concat(r)}},t.scalarToTextureCoordinate=function(n,r,a){var i=.5,o=1;return qi(n)||(o=.49,i=(n-r)*a,i>1e3?i=1e3:i<-1e3&&(i=-1e3)),{texCoordS:i,texCoordT:o}},t.createColorTextureCoordinates=function(n,r,a,i,o,s,c,u,f){var l=(s[1]-s[0])/u,p=[];p[0]=s[0]-l,p[1]=s[1]+l;var h=1/(p[1]-p[0]),v=r.getData(),y=n.getData(),m=0,x=0;if(o<0||o>=i)for(var g=0;g<a;++g){for(var d=0,C=0;C<i;++C)d+=y[m]*y[m],m++;var S=Math.sqrt(d);f&&(S=Hn.applyLogScale(S,c,s));var T=t.scalarToTextureCoordinate(S,p[0],h);v[x]=T.texCoordS,v[x+1]=T.texCoordT,x+=2}else{m+=o;for(var w=0;w<a;++w){var E=y[m];f&&(E=Hn.applyLogScale(E,c,s));var D=t.scalarToTextureCoordinate(E,p[0],h);v[x]=D.texCoordS,v[x+1]=D.texCoordT,x+=2,m+=i}}},t.mapScalarsToTexture=function(n,r){var a=e.lookupTable.getRange(),i=e.lookupTable.usingLogScale();i&&Hn.getLogRange(a,a);var o=e.lookupTable.getAlpha();if(e.colorMapColors=null,e.colorTextureMap==null||t.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getAlpha()!==r){e.lookupTable.setAlpha(r),e.colorTextureMap=null,e.lookupTable.build();var s=e.lookupTable.getNumberOfAvailableColors();s>4094&&(s=4094),s<64&&(s=64),s+=2;for(var c=(a[1]-a[0])/(s-2),u=new Float64Array(s*2),f=0;f<s;++f)u[f]=a[0]+f*c-c/2,i&&(u[f]=Math.pow(10,u[f]));for(var l=0;l<s;++l)u[l+s]=NaN;e.colorTextureMap=w0.newInstance(),e.colorTextureMap.setExtent(0,s-1,0,1,0,0);var p=de.newInstance({numberOfComponents:1,values:u});e.colorTextureMap.getPointData().setScalars(e.lookupTable.mapScalars(p,e.colorMode,0)),e.lookupTable.setAlpha(o)}if(!e.colorCoordinates||t.getMTime()>e.colorCoordinates.getMTime()||t.getInputData(0).getMTime()>e.colorCoordinates.getMTime()||e.lookupTable.getMTime()>e.colorCoordinates.getMTime()){e.colorCoordinates=null;var h=n.getNumberOfComponents(),v=n.getNumberOfTuples();e.colorCoordinates=de.newInstance({numberOfComponents:2,values:new Float32Array(v*2)});var y=e.lookupTable.getVectorComponent();e.lookupTable.getVectorMode()===P9.MAGNITUDE&&n.getNumberOfComponents()>1&&(y=-1),t.createColorTextureCoordinates(n,e.colorCoordinates,v,h,y,a,e.lookupTable.getRange(),e.colorTextureMap.getPointData().getScalars().getNumberOfTuples()/2-2,i)}},t.getIsOpaque=function(){var n=t.getInputData(),r=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName),a=r.scalars;if(!e.scalarVisibility||a==null)return!0;var i=t.getLookupTable();return i?(i.build(),i.areScalarsOpaque(a,e.colorMode,-1)):!0},t.canUseTextureMapForColoring=function(n){if(!e.interpolateScalarsBeforeMapping||e.lookupTable&&e.lookupTable.getIndexedLookup())return!1;var r=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName),a=r.scalars;return!(!a||r.cellFlag||e.colorMode===N0.DEFAULT&&a.getDataType()===I9.UNSIGNED_CHAR||e.colorMode===N0.DIRECT_SCALARS)},t.clearColorArrays=function(){e.colorMapColors=null,e.colorCoordinates=null,e.colorTextureMap=null},t.getLookupTable=function(){return e.lookupTable||t.createDefaultLookupTable(),e.lookupTable},t.getMTime=function(){var n=e.mtime;if(e.lookupTable!==null){var r=e.lookupTable.getMTime();n=r>n?r:n}return n},t.getPrimitiveCount=function(){var n=t.getInputData(),r={points:n.getPoints().getNumberOfValues()/3,verts:n.getVerts().getNumberOfValues()-n.getVerts().getNumberOfCells(),lines:n.getLines().getNumberOfValues()-2*n.getLines().getNumberOfCells(),triangles:n.getPolys().getNumberOfValues()-3*n.getPolys().getNumberOfCells()};return r},t.acquireInvertibleLookupTable=$a("AcquireInvertibleLookupTable"),t.valueToColor=$a("ValueToColor"),t.colorToValue=$a("ColorToValue"),t.useInvertibleColorFor=$a("UseInvertibleColorFor"),t.clearInvertibleColor=$a("ClearInvertibleColor"),t.processSelectorPixelBuffers=function(n,r){if(!(!n||!e.selectionWebGLIdsToVTKIds||!e.populateSelectionSettings)){var a=n.getRawPixelBuffer(_t.ID_LOW24),i=n.getRawPixelBuffer(_t.ID_HIGH24),o=n.getCurrentPass(),s=n.getFieldAssociation(),c=null;s===T1.FIELD_ASSOCIATION_POINTS?c=e.selectionWebGLIdsToVTKIds.points:s===T1.FIELD_ASSOCIATION_CELLS&&(c=e.selectionWebGLIdsToVTKIds.cells),c&&r.forEach(function(u){if(o===_t.ID_LOW24){var f=0;i&&(f+=i[u],f*=256),f+=a[u+2],f*=256,f+=a[u+1],f*=256,f+=a[u];var l=c[f],p=n.getPixelBuffer(_t.ID_LOW24);p[u]=l&255,p[u+1]=(l&65280)>>8,p[u+2]=(l&16711680)>>16}else if(o===_t.ID_HIGH24&&i){var h=0;h+=i[u],h*=256,h+=a[u],h*=256,h+=a[u+1],h*=256,h+=a[u+2];var v=c[h],y=n.getPixelBuffer(_t.ID_HIGH24);y[u]=(v&4278190080)>>24}})}}}var z9={colorMapColors:null,static:!1,lookupTable:null,scalarVisibility:!0,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,fieldDataTupleId:-1,populateSelectionSettings:!0,selectionWebGLIdsToVTKIds:null,interpolateScalarsBeforeMapping:!1,colorCoordinates:null,colorTextureMap:null,forceCompileOnly:0,useInvertibleColors:!1,invertibleScalars:null,customShaderAttributes:[]};function w1(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,z9,n),ql.extend(t,e,n),B.get(t,e,["colorCoordinates","colorMapColors","colorTextureMap"]),B.setGet(t,e,["colorByArrayName","arrayAccessMode","colorMode","fieldDataTupleId","interpolateScalarsBeforeMapping","lookupTable","populateSelectionSettings","renderTime","scalarMode","scalarVisibility","selectionWebGLIdsToVTKIds","static","useLookupTableScalarRange","customShaderAttributes"]),B.setGetArray(t,e,["scalarRange"],2),$n.implementCoincidentTopologyMethods(t,e),j9(t,e)}var W9=B.newInstance(w1,"vtkMapper"),Cr=M0(M0(M0({newInstance:W9,extend:w1},U9),G9),Br);function E1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function L0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E1(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function D1(t){var e=0;return t.filter(function(n,r){return r===e?(e+=n+1,!0):!1})}function O1(t){for(var e=0,n=0;n<t.length;)n+=t[n]+1,e++;return e}var H9={extractCellSizes:D1,getNumberOfCells:O1};function $9(t,e){e.classHierarchy.push("vtkCellArray");var n=L0({},t);t.getNumberOfCells=function(r){return e.numberOfCells!==void 0&&!r||(e.cellSizes?e.numberOfCells=e.cellSizes.length:e.numberOfCells=O1(t.getData())),e.numberOfCells},t.getCellSizes=function(r){return e.cellSizes!==void 0&&!r||(e.cellSizes=D1(t.getData())),e.cellSizes},t.resize=function(r){var a=t.getNumberOfTuples();n.resize(r);var i=t.getNumberOfTuples();i<a&&(i===0?(e.numberOfCells=0,e.cellSizes=[]):(e.numberOfCells=void 0,e.cellSizes=void 0))},t.setData=function(r){n.setData(r,1),e.numberOfCells=void 0,e.cellSizes=void 0},t.getCell=function(r){var a=r,i=e.values[a++];return e.values.subarray(a,a+i)},t.insertNextCell=function(r){var a=t.getNumberOfCells();return t.insertNextTuples([r.length].concat(ve(r))),++e.numberOfCells,e.cellSizes!=null&&e.cellSizes.push(r.length),a}}function K9(t){return L0({empty:!0,numberOfComponents:1,dataType:He.UNSIGNED_INT},t)}function _1(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};de.extend(t,e,K9(n)),$9(t,e)}var X9=B.newInstance(_1,"vtkCellArray"),Kn=L0({newInstance:X9,extend:_1},H9),q9=B.vtkErrorMacro,Y9=[1,-1,1,-1,1,-1];function J9(t,e){e.classHierarchy.push("vtkPoints"),t.getNumberOfPoints=t.getNumberOfTuples,t.setNumberOfPoints=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;t.getNumberOfPoints()!==n&&(e.size=n*r,e.values=B.newTypedArray(e.dataType,e.size),t.setNumberOfComponents(r),t.modified())},t.setPoint=function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];t.setTuple(n,a)},t.getPoint=t.getTuple,t.insertNextPoint=function(n,r,a){return t.insertNextTuple([n,r,a])},t.getBounds=function(){if(t.getNumberOfComponents()===3){var n=t.getRange(0);e.bounds[0]=n[0],e.bounds[1]=n[1];var r=t.getRange(1);e.bounds[2]=r[0],e.bounds[3]=r[1];var a=t.getRange(2);return e.bounds[4]=a[0],e.bounds[5]=a[1],e.bounds}if(t.getNumberOfComponents()!==2)return q9(`getBounds called on an array with components of
        `.concat(t.getNumberOfComponents())),Y9;var i=t.getRange(0);e.bounds[0]=i[0],e.bounds[1]=i[1];var o=t.getRange(1);return e.bounds[2]=o[0],e.bounds[3]=o[1],e.bounds[4]=0,e.bounds[5]=0,e.bounds},t.computeBounds=t.getBounds,t.setNumberOfComponents(e.numberOfComponents<2?3:e.numberOfComponents)}var Z9={empty:!0,numberOfComponents:3,dataType:He.FLOAT,bounds:[1,-1,1,-1,1,-1]};function b1(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Z9,n),de.extend(t,e,n),J9(t,e)}var Q9=B.newInstance(b1,"vtkPoints"),Sr={newInstance:Q9,extend:b1};function e8(t,e){e.classHierarchy.push("vtkCell"),t.initialize=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(r){e.pointsIds=r;var i=e.points.getData();i.length!==3*e.pointsIds.length&&(i=B.newTypedArray(n.getDataType(),3*e.pointsIds.length));var o=n.getData();e.pointsIds.forEach(function(s,c){var u=3*s,f=3*c;i[f]=o[u],i[++f]=o[++u],i[++f]=o[++u]}),e.points.setData(i)}else{e.points=n,e.pointsIds=new Array(n.getNumberOfPoints());for(var a=n.getNumberOfPoints()-1;a>=0;--a)e.pointsIds[a]=a}},t.getBounds=function(){var n=e.points.getNumberOfPoints(),r=[];if(n){e.points.getPoint(0,r),e.bounds[0]=r[0],e.bounds[1]=r[0],e.bounds[2]=r[1],e.bounds[3]=r[1],e.bounds[4]=r[2],e.bounds[5]=r[2];for(var a=1;a<n;a++)e.points.getPoint(a,r),e.bounds[0]=r[0]<e.bounds[0]?r[0]:e.bounds[0],e.bounds[1]=r[0]>e.bounds[1]?r[0]:e.bounds[1],e.bounds[2]=r[1]<e.bounds[2]?r[1]:e.bounds[2],e.bounds[3]=r[1]>e.bounds[3]?r[1]:e.bounds[3],e.bounds[4]=r[2]<e.bounds[4]?r[2]:e.bounds[4],e.bounds[5]=r[2]>e.bounds[5]?r[2]:e.bounds[5]}else Wn(e.bounds);return e.bounds},t.getLength2=function(){t.getBounds();for(var n=0,r=0,a=0;a<3;a++)r=e.bounds[2*a+1]-e.bounds[2*a],n+=r*r;return n},t.getParametricDistance=function(n){for(var r,a=0,i=0;i<3;i++)n[i]<0?r=-n[i]:n[i]>1?r=n[i]-1:r=0,r>a&&(a=r);return a},t.getNumberOfPoints=function(){return e.points.getNumberOfPoints()},t.deepCopy=function(n){n.initialize(e.points,e.pointsIds)},t.getCellDimension=function(){},t.intersectWithLine=function(n,r,a,i,o,s,c){},t.evaluatePosition=function(n,r,a,i,o,s){B.vtkErrorMacro("vtkCell.evaluatePosition is not implemented.")}}var t8={bounds:[-1,-1,-1,-1,-1,-1],pointsIds:[]};function M1(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,t8,n),B.obj(t,e),e.points||(e.points=Sr.newInstance()),B.get(t,e,["points","pointsIds"]),e8(t,e)}var r8=B.newInstance(M1,"vtkCell"),lo={newInstance:r8,extend:M1};function n8(t,e){var n=e;for(e>=t.array.length&&(n+=t.array.length);n>t.array.length;)t.array.push({ncells:0,cells:null});t.array.length=n}function a8(t,e){e.classHierarchy.push("vtkCellLinks"),t.buildLinks=function(n){var r=n.getPoints().getNumberOfPoints(),a=n.getNumberOfCells(),i=new Uint32Array(r);if(n.isA("vtkPolyData")){for(var o=0;o<a;++o){var s=n.getCellPoints(o),c=s.cellPointIds;c.forEach(function(y){t.incrementLinkCount(y)})}t.allocateLinks(r),e.maxId=r-1;for(var u=function(m){var x=n.getCellPoints(m),g=x.cellPointIds;g.forEach(function(d){t.insertCellReference(d,i[d]++,m)})},f=0;f<a;++f)u(f)}else{for(var l=0;l<a;l++){var p=lo.newInstance();p.getPointsIds().forEach(function(y){t.incrementLinkCount(y)})}t.allocateLinks(r),e.maxId=r-1;for(var h=function(m){var x=lo.newInstance();x.getPointsIds().forEach(function(g){t.insertCellReference(g,i[g]++,m)})},v=0;v<a;++v)h(v)}},t.allocate=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.array=Array(n).fill().map(function(){return{ncells:0,cells:null}}),e.extend=r,e.maxId=-1},t.initialize=function(){e.array=null},t.getLink=function(n){return e.array[n]},t.getNcells=function(n){return e.array[n].ncells},t.getCells=function(n){return e.array[n].cells},t.insertNextPoint=function(n){e.array.push({ncells:n,cells:Array(n)}),++e.maxId},t.insertNextCellReference=function(n,r){e.array[n].cells[e.array[n].ncells++]=r},t.deletePoint=function(n){e.array[n].ncells=0,e.array[n].cells=null},t.removeCellReference=function(n,r){e.array[r].cells=e.array[r].cells.filter(function(a){return a!==n}),e.array[r].ncells=e.array[r].cells.length},t.addCellReference=function(n,r){e.array[r].cells[e.array[r].ncells++]=n},t.resizeCellList=function(n,r){e.array[n].cells.length=r},t.squeeze=function(){n8(e,e.maxId+1)},t.reset=function(){e.maxId=-1},t.deepCopy=function(n){e.array=ve(n.array),e.extend=n.extend,e.maxId=n.maxId},t.incrementLinkCount=function(n){++e.array[n].ncells},t.allocateLinks=function(n){for(var r=0;r<n;++r)e.array[r].cells=new Array(e.array[r].ncells)},t.insertCellReference=function(n,r,a){e.array[n].cells[r]=a}}var i8={array:null,maxId:0,extend:0};function N1(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,i8,n),B.obj(t,e),a8(t,e)}var o8=B.newInstance(N1,"vtkCellLinks"),s8={newInstance:o8,extend:N1},tt={VTK_EMPTY_CELL:0,VTK_VERTEX:1,VTK_POLY_VERTEX:2,VTK_LINE:3,VTK_POLY_LINE:4,VTK_TRIANGLE:5,VTK_TRIANGLE_STRIP:6,VTK_POLYGON:7,VTK_PIXEL:8,VTK_QUAD:9,VTK_TETRA:10,VTK_VOXEL:11,VTK_HEXAHEDRON:12,VTK_WEDGE:13,VTK_PYRAMID:14,VTK_PENTAGONAL_PRISM:15,VTK_HEXAGONAL_PRISM:16,VTK_QUADRATIC_EDGE:21,VTK_QUADRATIC_TRIANGLE:22,VTK_QUADRATIC_QUAD:23,VTK_QUADRATIC_POLYGON:36,VTK_QUADRATIC_TETRA:24,VTK_QUADRATIC_HEXAHEDRON:25,VTK_QUADRATIC_WEDGE:26,VTK_QUADRATIC_PYRAMID:27,VTK_BIQUADRATIC_QUAD:28,VTK_TRIQUADRATIC_HEXAHEDRON:29,VTK_QUADRATIC_LINEAR_QUAD:30,VTK_QUADRATIC_LINEAR_WEDGE:31,VTK_BIQUADRATIC_QUADRATIC_WEDGE:32,VTK_BIQUADRATIC_QUADRATIC_HEXAHEDRON:33,VTK_BIQUADRATIC_TRIANGLE:34,VTK_CUBIC_LINE:35,VTK_CONVEX_POINT_SET:41,VTK_POLYHEDRON:42,VTK_PARAMETRIC_CURVE:51,VTK_PARAMETRIC_SURFACE:52,VTK_PARAMETRIC_TRI_SURFACE:53,VTK_PARAMETRIC_QUAD_SURFACE:54,VTK_PARAMETRIC_TETRA_REGION:55,VTK_PARAMETRIC_HEX_REGION:56,VTK_HIGHER_ORDER_EDGE:60,VTK_HIGHER_ORDER_TRIANGLE:61,VTK_HIGHER_ORDER_QUAD:62,VTK_HIGHER_ORDER_POLYGON:63,VTK_HIGHER_ORDER_TETRAHEDRON:64,VTK_HIGHER_ORDER_WEDGE:65,VTK_HIGHER_ORDER_PYRAMID:66,VTK_HIGHER_ORDER_HEXAHEDRON:67,VTK_LAGRANGE_CURVE:68,VTK_LAGRANGE_TRIANGLE:69,VTK_LAGRANGE_QUADRILATERAL:70,VTK_LAGRANGE_TETRAHEDRON:71,VTK_LAGRANGE_HEXAHEDRON:72,VTK_LAGRANGE_WEDGE:73,VTK_LAGRANGE_PYRAMID:74,VTK_NUMBER_OF_CELL_TYPES:75},k0=["vtkEmptyCell","vtkVertex","vtkPolyVertex","vtkLine","vtkPolyLine","vtkTriangle","vtkTriangleStrip","vtkPolygon","vtkPixel","vtkQuad","vtkTetra","vtkVoxel","vtkHexahedron","vtkWedge","vtkPyramid","vtkPentagonalPrism","vtkHexagonalPrism","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkQuadraticEdge","vtkQuadraticTriangle","vtkQuadraticQuad","vtkQuadraticTetra","vtkQuadraticHexahedron","vtkQuadraticWedge","vtkQuadraticPyramid","vtkBiQuadraticQuad","vtkTriQuadraticHexahedron","vtkQuadraticLinearQuad","vtkQuadraticLinearWedge","vtkBiQuadraticQuadraticWedge","vtkBiQuadraticQuadraticHexahedron","vtkBiQuadraticTriangle","vtkCubicLine","vtkQuadraticPolygon","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkConvexPointSet","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkParametricCurve","vtkParametricSurface","vtkParametricTriSurface","vtkParametricQuadSurface","vtkParametricTetraRegion","vtkParametricHexRegion","UnknownClass","UnknownClass","UnknownClass","vtkHigherOrderEdge","vtkHigherOrderTriangle","vtkHigherOrderQuad","vtkHigherOrderPolygon","vtkHigherOrderTetrahedron","vtkHigherOrderWedge","vtkHigherOrderPyramid","vtkHigherOrderHexahedron"];function R1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function u8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R1(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function c8(t){return t<k0.length?k0[t]:"UnknownClass"}function f8(t){return k0.findIndex(t)}function l8(t){return t<tt.VTK_QUADRATIC_EDGE||t===tt.VTK_CONVEX_POINT_SET||t===tt.VTK_POLYHEDRON}function p8(t){return t===tt.VTK_TRIANGLE_STRIP||t===tt.VTK_POLY_LINE||t===tt.VTK_POLY_VERTEX}var h8={getClassNameFromTypeId:c8,getTypeIdFromClassName:f8,isLinear:l8,hasSubCells:p8};function v8(t,e){e.classHierarchy.push("vtkCellTypes"),t.allocate=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:512,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.size=n>0?n:1,e.extend=r>0?r:1,e.maxId=-1,e.typeArray=new Uint8Array(n),e.locationArray=new Uint32Array(n)},t.insertCell=function(n,r,a){e.typeArray[n]=r,e.locationArray[n]=a,n>e.maxId&&(e.maxId=n)},t.insertNextCell=function(n,r){return t.insertCell(++e.maxId,n,r),e.maxId},t.setCellTypes=function(n,r,a){e.size=n,e.typeArray=r,e.locationArray=a,e.maxId=n-1},t.getCellLocation=function(n){return e.locationArray[n]},t.deleteCell=function(n){e.typeArray[n]=tt.VTK_EMPTY_CELL},t.getNumberOfTypes=function(){return e.maxId+1},t.isType=function(n){for(var r=t.getNumberOfTypes(),a=0;a<r;++a)if(n===t.getCellType(a))return!0;return!1},t.insertNextType=function(n){return t.insertNextCell(n,-1)},t.getCellType=function(n){return e.typeArray[n]},t.reset=function(){e.maxId=-1},t.deepCopy=function(n){t.allocate(n.getSize(),n.getExtend()),e.typeArray.set(n.getTypeArray()),e.locationArray.set(n.getLocationArray()),e.maxId=n.getMaxId()}}var g8={size:0,maxId:-1,extend:1e3};function L1(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,g8,n),B.obj(t,e),B.get(t,e,["size","maxId","extend"]),B.getArray(t,e,["typeArray","locationArray"]),v8(t,e)}var d8=B.newInstance(L1,"vtkCellTypes"),y8=u8({newInstance:d8,extend:L1},h8),m8={NO_INTERSECTION:0,YES_INTERSECTION:1,ON_LINE:2},k1={IntersectionState:m8};function F1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function A1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F1(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var po=k1.IntersectionState;function Xn(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,a={t:Number.MIN_VALUE,distance:0},i=[],o;i[0]=n[0]-e[0],i[1]=n[1]-e[1],i[2]=n[2]-e[2];var s=i[0]*(t[0]-e[0])+i[1]*(t[1]-e[1])+i[2]*(t[2]-e[2]),c=_e(i,i),u=1e-5*s;return c!==0&&(a.t=s/c),u<0&&(u=-u),-u<c&&c<u||c<=0||a.t<0?o=e:a.t>1?o=n:(o=i,i[0]=e[0]+a.t*i[0],i[1]=e[1]+a.t*i[1],i[2]=e[2]+a.t*i[2]),r&&(r[0]=o[0],r[1]=o[1],r[2]=o[2]),a.distance=Ut(o,t),a}function V1(t,e,n,r,a,i){var o=[],s=[],c=[];a[0]=0,i[0]=0,yt(e,t,o),yt(r,n,s),yt(n,t,c);var u=[_e(o,o),-_e(o,s),-_e(o,s),_e(s,s)],f=[];if(f[0]=_e(o,c),f[1]=-_e(s,c),Kf(u,f,2)===0){for(var l=Number.MAX_VALUE,p=[t,e,n,r],h=[n,n,t,t],v=[r,r,e,e],y=[i[0],i[0],a[0],a[0]],m=[a[0],a[0],i[0],i[0]],x,g=0;g<4;g++)x=Xn(p[g],h[g],v[g]),x.distance<l&&(l=x.distance,y[g]=x.t,m[g]=g%2);return po.ON_LINE}return a[0]=f[0],i[0]=f[1],a[0]>=0&&a[0]<=1&&i[0]>=0&&i[0]<=1?po.YES_INTERSECTION:po.NO_INTERSECTION}var x8={distanceToLine:Xn,intersection:V1};function C8(t,e){e.classHierarchy.push("vtkLine");function n(r){return r>=0&&r<=1}t.getCellDimension=function(){return 1},t.intersectWithLine=function(r,a,i,o,s){var c={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null};s[1]=0,s[2]=0;var u=[],f=[],l=[];e.points.getPoint(0,f),e.points.getPoint(1,l);var p=[],h=[],v=V1(r,a,f,l,p,h);if(c.t=p[0],c.betweenPoints=n(c.t),s[0]=h[0],v===po.YES_INTERSECTION){for(var y=0;y<3;y++)o[y]=f[y]+s[0]*(l[y]-f[y]),u[y]=r[y]+c.t*(a[y]-r[y]);if(Ut(o,u)<=i*i)return c.intersect=1,c}else{var m;if(c.t<0)return m=Xn(r,f,l,o),m.distance<=i*i&&(c.t=0,c.intersect=1,c.betweenPoints=!0),c;if(c.t>1)return m=Xn(a,f,l,o),m.distance<=i*i&&(c.t=1,c.intersect=1,c.betweenPoints=!0),c;if(s[0]<0)return s[0]=0,m=Xn(f,r,a,o),c.t=m.t,m.distance<=i*i&&(c.intersect=1),c;if(s[0]>1)return s[0]=1,m=Xn(l,r,a,o),c.t=m.t,m.distance<=i*i&&(c.intersect=1),c}return c},t.evaluateLocation=function(r,a,i){var o=[],s=[];e.points.getPoint(0,o),e.points.getPoint(1,s);for(var c=0;c<3;c++)a[c]=o[c]+r[0]*(s[c]-o[c]);i[0]=1-r[0],i[1]=r[0]},t.evaluateOrientation=function(r,a,i){return e.orientations?(Ti(a,e.orientations[0],e.orientations[1],r[0]),i[0]=1-r[0],i[1]=r[0],!0):!1}}var S8={orientations:null};function B1(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,S8,n),lo.extend(t,e,n),B.setGet(t,e,["orientations"]),C8(t,e)}var T8=B.newInstance(B1,"vtkLine"),Wt=A1(A1({newInstance:T8,extend:B1},x8),k1);function w8(t,e){e.classHierarchy.push("vtkPointSet"),e.points?e.points=wt(e.points):e.points=Sr.newInstance(),t.getNumberOfPoints=function(){return e.points.getNumberOfPoints()},t.getBounds=function(){return e.points.getBounds()},t.computeBounds=function(){t.getBounds()};var n=t.shallowCopy;t.shallowCopy=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n(r,a),e.points=Sr.newInstance(),e.points.shallowCopy(r.getPoints())}}var E8={};function U1(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,E8,n),dn.extend(t,e,n),B.setGet(t,e,["points"]),w8(t,e)}var D8=B.newInstance(U1,"vtkPointSet"),O8={newInstance:D8,extend:U1};function G1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function _8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G1(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function F0(t,e,n,r){var a=n[0]-e[0],i=n[1]-e[1],o=n[2]-e[2],s=t[0]-e[0],c=t[1]-e[1],u=t[2]-e[2];r[0]=i*u-o*c,r[1]=o*s-a*u,r[2]=a*c-i*s}function ho(t,e,n,r){F0(t,e,n,r);var a=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);a!==0&&(r[0]/=a,r[1]/=a,r[2]/=a)}function b8(t,e,n,r,a,i){var o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1e-6,s=!1,c=[],u=[],f=[],l=[],p=[];ho(t,e,n,l),ho(r,a,i,p);var h=-_e(l,t),v=-_e(p,r),y=[_e(p,t)+v,_e(p,e)+v,_e(p,n)+v];if(y[0]*y[1]>o&&y[0]*y[2]>o)return{intersect:!1,coplanar:s,pt1:c,pt2:u,surfaceId:f};var m=[_e(l,r)+h,_e(l,a)+h,_e(l,i)+h];if(m[0]*m[1]>o&&m[0]*m[2]>o)return{intersect:!1,coplanar:s,pt1:c,pt2:u,surfaceId:f};if(Math.abs(l[0]-p[0])<1e-9&&Math.abs(l[1]-p[1])<1e-9&&Math.abs(l[2]-p[2])<1e-9&&Math.abs(h-v)<1e-9)return s=!0,{intersect:!1,coplanar:s,pt1:c,pt2:u,surfaceId:f};var x=[t,e,n],g=[r,a,i],d=_e(l,p),C=(h-v*d)/(d*d-1),S=(v-h*d)/(d*d-1),T=[C*l[0]+S*p[0],C*l[1]+S*p[1],C*l[2]+S*p[2]],w=lt(l,p,[]);ot(w);for(var E=0,D=0,b=[],O=[],M=50,R=50,N=0;N<3;N++){var U=N,W=(N+1)%3,I=Fr.intersectWithLine(x[U],x[W],r,p);I.intersection&&I.t>0-o&&I.t<1+o&&(I.t<1+o&&I.t>1-o&&(M=E),b[E++]=_e(I.x,w)-_e(T,w));var G=Fr.intersectWithLine(g[U],g[W],t,l);G.intersection&&G.t>0-o&&G.t<1+o&&(G.t<1+o&&G.t>1-o&&(R=D),O[D++]=_e(G.x,w)-_e(T,w))}if(E>2){E--;var F=b[2];b[2]=b[M],b[M]=F}if(D>2){D--;var A=O[2];O[2]=O[R],O[R]=A}if(E!==2||D!==2)return{intersect:!1,coplanar:s,pt1:c,pt2:u,surfaceId:f};if(Number.isNaN(b[0])||Number.isNaN(b[1])||Number.isNaN(O[0])||Number.isNaN(O[1]))return{intersect:!1,coplanar:s,pt1:c,pt2:u,surfaceId:f};if(b[0]>b[1]){var H=b[1];b[1]=b[0],b[0]=H}if(O[0]>O[1]){var $=O[1];O[1]=O[0],O[0]=$}var X,Y;return b[1]<O[0]||O[1]<b[0]?{intersect:!1,coplanar:s,pt1:c,pt2:u,surfaceId:f}:(b[0]<O[0]?b[1]<O[1]?(f[0]=2,f[1]=1,X=O[0],Y=b[1]):(f[0]=2,f[1]=2,X=O[0],Y=O[1]):b[1]<O[1]?(f[0]=1,f[1]=1,X=b[0],Y=b[1]):(f[0]=1,f[1]=2,X=b[0],Y=O[1]),Js(T,w,X,c),Js(T,w,Y,u),{intersect:!0,coplanar:s,pt1:c,pt2:u,surfaceId:f})}var M8={computeNormalDirection:F0,computeNormal:ho,intersectWithTriangle:b8};function N8(t,e){e.classHierarchy.push("vtkTriangle"),t.getCellDimension=function(){return 2},t.intersectWithLine=function(n,r,a,i,o){var s={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1};o[2]=0;var c=[],u=a*a,f=[],l=[],p=[];e.points.getPoint(0,f),e.points.getPoint(1,l),e.points.getPoint(2,p);var h=[],v=[];if(ho(f,l,p,h),h[0]!==0||h[1]!==0||h[2]!==0){var y=Fr.intersectWithLine(n,r,f,h);if(s.betweenPoints=y.betweenPoints,s.t=y.t,i[0]=y.x[0],i[1]=y.x[1],i[2]=y.x[2],!y.intersection)return o[0]=0,o[1]=0,s.intersect=0,s;var m=t.evaluatePosition(i,c,o,v);if(m.evaluation>=0)return m.dist2<=u?(s.intersect=1,s):(s.intersect=m.evaluation,s)}var x=Ut(f,l),g=Ut(l,p),d=Ut(p,f);e.line||(e.line=Wt.newInstance()),x>g&&x>d?(e.line.getPoints().setPoint(0,f),e.line.getPoints().setPoint(1,l)):g>d&&g>x?(e.line.getPoints().setPoint(0,l),e.line.getPoints().setPoint(1,p)):(e.line.getPoints().setPoint(0,p),e.line.getPoints().setPoint(1,f));var C=e.line.intersectWithLine(n,r,a,i,o);if(s.betweenPoints=C.betweenPoints,s.t=C.t,C.intersect){for(var S=[],T=[],w=[],E=0;E<3;E++)S[E]=f[E]-p[E],T[E]=l[E]-p[E],w[E]=i[E]-p[E];return o[0]=_e(w,S)/d,o[1]=_e(w,T)/g,s.intersect=1,s}return o[0]=0,o[1]=0,s.intersect=0,s},t.evaluatePosition=function(n,r,a,i){var o={subId:0,dist2:0,evaluation:-1},s,c,u=[],f=[],l=[],p=[],h,v=[],y=[],m=[],x=0,g=0,d=[],C,S,T,w=[],E=[],D=[],b=[];o.subId=0,a[2]=0,e.points.getPoint(1,u),e.points.getPoint(2,f),e.points.getPoint(0,l),F0(u,f,l,p),Fr.generalizedProjectPoint(n,u,p,b);var O=0;for(s=0;s<3;s++)p[s]<0?h=-p[s]:h=p[s],h>O&&(O=h,g=s);for(c=0,s=0;s<3;s++)s!==g&&(d[c++]=s);for(s=0;s<2;s++)v[s]=b[d[s]]-l[d[s]],y[s]=u[d[s]]-l[d[s]],m[s]=f[d[s]]-l[d[s]];if(x=st(y,m),x===0)return a[0]=0,a[1]=0,o.evaluation=-1,o;if(a[0]=st(v,m)/x,a[1]=st(y,v)/x,i[0]=1-(a[0]+a[1]),i[1]=a[0],i[2]=a[1],i[0]>=0&&i[0]<=1&&i[1]>=0&&i[1]<=1&&i[2]>=0&&i[2]<=1)r&&(o.dist2=Ut(b,n),r[0]=b[0],r[1]=b[1],r[2]=b[2]),o.evaluation=1;else{var M;if(r){if(i[1]<0&&i[2]<0)for(C=Ut(n,l),S=Wt.distanceToLine(n,u,l,M,E),T=Wt.distanceToLine(n,l,f,M,D),C<S?(o.dist2=C,w=l):(o.dist2=S,w=E),T<o.dist2&&(o.dist2=T,w=D),s=0;s<3;s++)r[s]=w[s];else if(i[2]<0&&i[0]<0)for(C=Ut(n,u),S=Wt.distanceToLine(n,u,l,M,E),T=Wt.distanceToLine(n,u,f,M,D),C<S?(o.dist2=C,w=u):(o.dist2=S,w=E),T<o.dist2&&(o.dist2=T,w=D),s=0;s<3;s++)r[s]=w[s];else if(i[1]<0&&i[0]<0)for(C=Ut(n,f),S=Wt.distanceToLine(n,f,l,M,E),T=Wt.distanceToLine(n,u,f,M,D),C<S?(o.dist2=C,w=f):(o.dist2=S,w=E),T<o.dist2&&(o.dist2=T,w=D),s=0;s<3;s++)r[s]=w[s];else if(i[0]<0){var R=Wt.distanceToLine(n,u,f,r);o.dist2=R.distance}else if(i[1]<0){var N=Wt.distanceToLine(n,f,l,r);o.dist2=N.distance}else if(i[2]<0){var U=Wt.distanceToLine(n,u,l,r);o.dist2=U.distance}}o.evaluation=0}return o},t.evaluateLocation=function(n,r,a){var i=[],o=[],s=[];e.points.getPoint(0,i),e.points.getPoint(1,o),e.points.getPoint(2,s);for(var c=1-n[0]-n[1],u=0;u<3;u++)r[u]=i[u]*c+o[u]*n[0]+s[u]*n[1];a[0]=c,a[1]=n[0],a[2]=n[1]},t.getParametricDistance=function(n){var r,a=0,i=[];i[0]=n[0],i[1]=n[1],i[2]=1-n[0]-n[1];for(var o=0;o<3;o++)i[o]<0?r=-i[o]:i[o]>1?r=i[o]-1:r=0,r>a&&(a=r);return a}}var R8={};function P1(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,R8,n),lo.extend(t,e,n),N8(t,e)}var L8=B.newInstance(P1,"vtkTriangle"),k8=_8({newInstance:L8,extend:P1},M8),A0=["verts","lines","polys","strips"],Ka,I1=B.vtkWarningMacro,F8=(Ka={},Ce(Ka,tt.VTK_LINE,Wt),Ce(Ka,tt.VTK_POLY_LINE,Wt),Ce(Ka,tt.VTK_TRIANGLE,k8),Ka);function A8(t,e){e.classHierarchy.push("vtkPolyData");function n(a){return a.replace(/(?:^\w|[A-Z]|\b\w)/g,function(i){return i.toUpperCase()}).replace(/\s+/g,"")}A0.forEach(function(a){t["getNumberOf".concat(n(a))]=function(){return e[a].getNumberOfCells()},e[a]?e[a]=wt(e[a]):e[a]=Kn.newInstance()}),t.getNumberOfCells=function(){return A0.reduce(function(a,i){return a+e[i].getNumberOfCells()},0)};var r=t.shallowCopy;t.shallowCopy=function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r(a,i),A0.forEach(function(o){e[o]=Kn.newInstance(),e[o].shallowCopy(a.getReferenceByName(o))})},t.buildCells=function(){var a=t.getNumberOfVerts(),i=t.getNumberOfLines(),o=t.getNumberOfPolys(),s=t.getNumberOfStrips(),c=a+i+o+s,u=new Uint8Array(c),f=u,l=new Uint32Array(c),p=l;if(a){var h=0;e.verts.getCellSizes().forEach(function(x,g){p[g]=h,f[g]=x>1?tt.VTK_POLY_VERTEX:tt.VTK_VERTEX,h+=x+1}),p=p.subarray(a),f=f.subarray(a)}if(i){var v=0;e.lines.getCellSizes().forEach(function(x,g){p[g]=v,f[g]=x>2?tt.VTK_POLY_LINE:tt.VTK_LINE,x===1&&I1("Building VTK_LINE ",g," with only one point, but VTK_LINE needs at least two points. Check the input."),v+=x+1}),p=p.subarray(i),f=f.subarray(i)}if(o){var y=0;e.polys.getCellSizes().forEach(function(x,g){switch(p[g]=y,x){case 3:f[g]=tt.VTK_TRIANGLE;break;case 4:f[g]=tt.VTK_QUAD;break;default:f[g]=tt.VTK_POLYGON;break}x<3&&I1("Building VTK_TRIANGLE ",g," with less than three points, but VTK_TRIANGLE needs at least three points. Check the input."),y+=x+1}),p+=p.subarray(o),f+=f.subarray(o)}if(s){var m=0;f.fill(tt.VTK_TRIANGLE_STRIP,0,s),e.strips.getCellSizes().forEach(function(x,g){p[g]=m,m+=x+1})}e.cells=y8.newInstance(),e.cells.setCellTypes(c,u,l)},t.buildLinks=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;e.cells===void 0&&t.buildCells(),e.links=s8.newInstance(),a>0?e.links.allocate(a):e.links.allocate(t.getPoints().getNumberOfPoints()),e.links.buildLinks(t)},t.getCellType=function(a){return e.cells.getCellType(a)},t.getCellPoints=function(a){var i=t.getCellType(a),o=null;switch(i){case tt.VTK_VERTEX:case tt.VTK_POLY_VERTEX:o=e.verts;break;case tt.VTK_LINE:case tt.VTK_POLY_LINE:o=e.lines;break;case tt.VTK_TRIANGLE:case tt.VTK_QUAD:case tt.VTK_POLYGON:o=e.polys;break;case tt.VTK_TRIANGLE_STRIP:o=e.strips;break;default:return o=null,{type:0,cellPointIds:null}}var s=e.cells.getCellLocation(a),c=o.getCell(s);return{cellType:i,cellPointIds:c}},t.getPointCells=function(a){return e.links.getCells(a)},t.getCellEdgeNeighbors=function(a,i,o){var s=e.links.getLink(i),c=e.links.getLink(o);return s.cells.filter(function(u){return u!==a&&c.cells.indexOf(u)!==-1})},t.getCell=function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,o=t.getCellPoints(a),s=i||F8[o.cellType].newInstance();return s.initialize(t.getPoints(),o.cellPointIds),s}}var V8={};function j1(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,V8,n),O8.extend(t,e,n),B.get(t,e,["cells","links"]),B.setGet(t,e,["verts","lines","polys","strips"]),A8(t,e)}var B8=B.newInstance(j1,"vtkPolyData"),Ye={newInstance:B8,extend:j1};function z1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function U8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z1(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function G8(t,e){e.classHierarchy.push("vtkTexture"),t.imageLoaded=function(){e.image.removeEventListener("load",t.imageLoaded),e.imageLoaded=!0,t.modified()},t.setJsImageData=function(n){e.jsImageData!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.canvas=null),e.jsImageData=n,e.imageLoaded=!0,t.modified())},t.setCanvas=function(n){e.canvas!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.jsImageData=null),e.canvas=n,t.modified())},t.setImage=function(n){e.image!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.canvas=null,e.jsImageData=null),e.image=n,e.imageLoaded=!1,n.complete?t.imageLoaded():n.addEventListener("load",t.imageLoaded),t.modified())},t.getDimensionality=function(){var n=0,r=0,a=1;if(t.getInputData()){var i=t.getInputData();n=i.getDimensions()[0],r=i.getDimensions()[1],a=i.getDimensions()[2]}e.jsImageData&&(n=e.jsImageData.width,r=e.jsImageData.height),e.canvas&&(n=e.canvas.width,r=e.canvas.height),e.image&&(n=e.image.width,r=e.image.height);var o=(n>1)+(r>1)+(a>1);return o},t.getInputAsJsImageData=function(){if(!e.imageLoaded||t.getInputData())return null;if(e.jsImageData)return e.jsImageData();if(e.canvas){var n=e.canvas.getContext("2d"),r=n.getImageData(0,0,e.canvas.width,e.canvas.height);return r}if(e.image){var a=document.createElement("canvas");a.width=e.image.width,a.height=e.image.height;var i=a.getContext("2d");i.translate(0,a.height),i.scale(1,-1),i.drawImage(e.image,0,0,e.image.width,e.image.height);var o=i.getImageData(0,0,a.width,a.height);return o}return null}}var P8=function(e,n,r,a){for(var i=[1,2,1],o=4,s=i,c=o,u=e.length/(n*r),f=n,l=r,p=e,h=[p],v=0;v<a;v++){var y=ve(p);f/=2,l/=2,p=new Uint8ClampedArray(f*l*u);for(var m=u*f,x=0,g=0;g<p.length;g+=u){g%m===0&&(x+=2*u*f);for(var d=0;d<u;d++){var C=y[x+d];C+=y[x+u+d],C+=y[x-2*m+d],C+=y[x-2*m+u+d],C/=4,p[g+d]=C}x+=2*u}for(var S=ve(p),T=0;T<p.length;T+=u)for(var w=0;w<u;w++){for(var E=-(s.length-1)/2,D=c,b=0,O=0;O<s.length;O++){var M=T+w+E*u,R=M%m-(T+w)%m;R>u&&(M+=m),R<-u&&(M-=m),S[M]?b+=S[M]*s[O]:D-=s[O],E+=1}p[T+w]=b/D}S=ve(p);for(var N=0;N<p.length;N+=u)for(var U=0;U<u;U++){for(var W=-(s.length-1)/2,I=c,G=0,F=0;F<s.length;F++){var A=N+U+W*m;S[A]?G+=S[A]*s[F]:I-=s[F],W+=1}p[N+U]=G/I}h.push(p)}return h},I8={image:null,canvas:null,jsImageData:null,imageLoaded:!1,repeat:!1,interpolate:!1,edgeClamp:!1,mipLevel:0,resizable:!1};function W1(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,I8,n),B.obj(t,e),B.algo(t,e,6,0),B.get(t,e,["canvas","image","jsImageData","imageLoaded","resizable"]),B.setGet(t,e,["repeat","edgeClamp","interpolate","mipLevel"]),G8(t,e)}var j8=B.newInstance(W1,"vtkTexture"),z8={generateMipmaps:P8},V0=U8({newInstance:j8,extend:W1},z8);function H1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Xa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H1(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var W8=[[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]],$1=[[8,7,11,3],[9,1,10,5],[4,9,0,8],[2,11,6,10],[0,3,2,1],[4,5,6,7]],vo=[[0,1],[1,3],[2,3],[0,2],[4,5],[5,7],[6,7],[4,6],[0,4],[1,5],[3,7],[2,6]],K1=[0,1,0,1,0,1,0,1,2,2,2,2],at=[[1,2],[1,2],[0,2],[0,2],[0,1],[0,1]],Ne=new Float64Array(3),go=new Float64Array(3),qe=new Float64Array(3),Sn=new Float64Array(3),Tn=new Float64Array(3),yo=new Float64Array(3),B0=new Float64Array(16);function U0(t,e){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor,t.font="".concat(e.fontStyle," ").concat(e.fontSize,"px ").concat(e.fontFamily)}function H8(t,e){e.classHierarchy.push("vtkCubeAxesActorHelper"),t.setRenderable=function(n){e.renderable!==n&&(e.renderable=n,e.tmActor.addTexture(e.renderable.getTmTexture()),e.tmActor.setProperty(n.getProperty()),e.tmActor.setParentProp(n),t.modified())},t.createPolyDataForOneLabel=function(n,r,a,i,o,s,c){var u=e.renderable.get_tmAtlas().get(n);if(u){var f=e.renderable.getTextPolyData().getPoints().getData(),l=e.lastSize;Ne[0]=f[r*3],Ne[1]=f[r*3+1],Ne[2]=f[r*3+2],be(qe,Ne,a),qe[0]+=.1,be(go,qe,i),gr(Tn,go,Ne),qe[0]-=.1,qe[1]+=.1,be(go,qe,i),gr(yo,go,Ne);for(var p=0;p<3;p++)Tn[p]/=.5*.1*l[0],yo[p]/=.5*.1*l[1];var h=c.ptIdx,v=c.cellIdx;Ne[0]=f[r*3],Ne[1]=f[r*3+1],Ne[2]=f[r*3+2],o[0]<-.5?dr(qe,Tn,o[0]*s-u.width):o[0]>.5?dr(qe,Tn,o[0]*s):dr(qe,Tn,o[0]*s-u.width/2),ma(Ne,Ne,qe),dr(qe,yo,o[1]*s-u.height/2),ma(Ne,Ne,qe),c.points[h*3]=Ne[0],c.points[h*3+1]=Ne[1],c.points[h*3+2]=Ne[2],c.tcoords[h*2]=u.tcoords[0],c.tcoords[h*2+1]=u.tcoords[1],h++,dr(qe,Tn,u.width),ma(Ne,Ne,qe),c.points[h*3]=Ne[0],c.points[h*3+1]=Ne[1],c.points[h*3+2]=Ne[2],c.tcoords[h*2]=u.tcoords[2],c.tcoords[h*2+1]=u.tcoords[3],h++,dr(qe,yo,u.height),ma(Ne,Ne,qe),c.points[h*3]=Ne[0],c.points[h*3+1]=Ne[1],c.points[h*3+2]=Ne[2],c.tcoords[h*2]=u.tcoords[4],c.tcoords[h*2+1]=u.tcoords[5],h++,dr(qe,Tn,u.width),gr(Ne,Ne,qe),c.points[h*3]=Ne[0],c.points[h*3+1]=Ne[1],c.points[h*3+2]=Ne[2],c.tcoords[h*2]=u.tcoords[6],c.tcoords[h*2+1]=u.tcoords[7],h++,c.polys[v*4]=3,c.polys[v*4+1]=h-4,c.polys[v*4+2]=h-3,c.polys[v*4+3]=h-2,v++,c.polys[v*4]=3,c.polys[v*4+1]=h-4,c.polys[v*4+2]=h-2,c.polys[v*4+3]=h-1,c.ptIdx+=4,c.cellIdx+=2}},t.updateTexturePolyData=function(){var n=e.camera.getCompositeProjectionMatrix(e.lastAspectRatio,-1,1);We(n,n);var r=e.renderable.getTextValues().length,a=r*4,i=r*2,o=new Float64Array(a*3),s=new Uint16Array(i*4),c=new Float32Array(a*2);Ft(B0,n);for(var u={ptIdx:0,cellIdx:0,polys:s,points:o,tcoords:c},f=0,l=0,p=0,h=e.renderable.getTextPolyData().getPoints().getData(),v=e.renderable.getTextValues();f<h.length/3;){Ne[0]=h[f*3],Ne[1]=h[f*3+1],Ne[2]=h[f*3+2],be(qe,Ne,n),Ne[0]=h[f*3+3],Ne[1]=h[f*3+4],Ne[2]=h[f*3+5],be(Sn,Ne,n),gr(qe,qe,Sn);var y=[qe[0],qe[1]];Gf(y),t.createPolyDataForOneLabel(v[l],f,n,B0,y,e.renderable.getAxisTitlePixelOffset(),u),f+=2,l++;for(var m=0;m<e.renderable.getTickCounts()[p];m++)t.createPolyDataForOneLabel(v[l],f,n,B0,y,e.renderable.getTickLabelPixelOffset(),u),f++,l++;p++}var x=de.newInstance({numberOfComponents:2,values:c,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(x),e.tmPolyData.getPoints().setData(o,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(s,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updateAPISpecificData=function(n,r,a){(e.lastSize[0]!==n[0]||e.lastSize[1]!==n[1])&&(e.lastSize[0]=n[0],e.lastSize[1]=n[1],e.lastAspectRatio=n[0]/n[1],e.forceUpdate=!0),e.camera=r,t.updateTexturePolyData()}}var $8=B.newInstance(function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},n),B.obj(t,e),e.tmPolyData=Ye.newInstance(),e.tmMapper=Cr.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmActor=mr.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),B.setGet(t,e,["renderable"]),B.get(t,e,["lastSize","lastAspectRatio","axisTextStyle","tickTextStyle","tmActor","ticks"]),e.forceUpdate=!1,e.lastRedrawTime={},B.obj(e.lastRedrawTime,{mtime:0}),e.lastRebuildTime={},B.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.lastTickBounds=[],H8(t,e)},"vtkCubeAxesActorHelper");function K8(t,e){e.classHierarchy.push("vtkCubeAxesActor"),t.setCamera=function(r){e.camera!==r&&(e.cameraModifiedSub&&(e.cameraModifiedSub.unsubscribe(),e.cameraModifiedSub=null),e.camera=r,r&&(e.cameraModifiedSub=r.onModified(t.update)),t.update(),t.modified())},t.computeFacesToDraw=function(){var r=e.camera.getViewMatrix();We(r,r);for(var a=!1,i=Ve.getDiagonalLength(e.dataBounds),o=Math.sin(e.faceVisibilityAngle*Math.PI/180),s=0;s<6;s++){var c=!1,u=Math.floor(s/2),f=(u+1)%3,l=(u+2)%3;e.dataBounds[f*2]!==e.dataBounds[f*2+1]&&e.dataBounds[l*2]!==e.dataBounds[l*2+1]&&(Ne[u]=e.dataBounds[s]-.1*i*W8[s][u],Ne[f]=.5*(e.dataBounds[f*2]+e.dataBounds[f*2+1]),Ne[l]=.5*(e.dataBounds[l*2]+e.dataBounds[l*2+1]),be(qe,Ne,r),Ne[u]=e.dataBounds[s],be(Sn,Ne,r),gr(qe,Sn,qe),It(qe,qe),c=qe[2]>o,e.camera.getParallelProjection()||(It(Sn,Sn),c=Yr(Sn,qe)>o)),c!==e.lastFacesToDraw[s]&&(e.lastFacesToDraw[s]=c,a=!0)}return a},t.updatePolyData=function(r,a,i){var o=0,s=0;o+=8;for(var c=0,u=0;u<12;u++)a[u]>0&&c++;if(s+=c,e.gridLines)for(var f=0;f<6;f++)r[f]&&(o+=i[at[f][0]].length*2+i[at[f][1]].length*2,s+=i[at[f][0]].length+i[at[f][1]].length);for(var l=new Float64Array(o*3),p=new Uint32Array(s*3),h=0,v=0,y=0;y<2;y++)for(var m=0;m<2;m++)for(var x=0;x<2;x++)l[h*3]=e.dataBounds[x],l[h*3+1]=e.dataBounds[2+m],l[h*3+2]=e.dataBounds[4+y],h++;for(var g=0;g<12;g++)a[g]>0&&(p[v*3]=2,p[v*3+1]=vo[g][0],p[v*3+2]=vo[g][1],v++);if(e.gridLines){for(var d=0;d<6;d++)if(r[d]){for(var C=Math.floor(d/2),S=i[at[d][0]],T=0;T<S.length;T++)l[h*3+C]=e.dataBounds[d],l[h*3+at[d][0]]=S[T],l[h*3+at[d][1]]=e.dataBounds[at[d][1]*2],h++,l[h*3+C]=e.dataBounds[d],l[h*3+at[d][0]]=S[T],l[h*3+at[d][1]]=e.dataBounds[at[d][1]*2+1],h++,p[v*3]=2,p[v*3+1]=h-2,p[v*3+2]=h-1,v++;S=i[at[d][1]];for(var w=0;w<S.length;w++)l[h*3+C]=e.dataBounds[d],l[h*3+at[d][1]]=S[w],l[h*3+at[d][0]]=e.dataBounds[at[d][0]*2],h++,l[h*3+C]=e.dataBounds[d],l[h*3+at[d][1]]=S[w],l[h*3+at[d][0]]=e.dataBounds[at[d][0]*2+1],h++,p[v*3]=2,p[v*3+1]=h-2,p[v*3+2]=h-1,v++}}e.polyData.getPoints().setData(l,3),e.polyData.getPoints().modified(),e.polyData.getLines().setData(p,1),e.polyData.getLines().modified(),e.polyData.modified()},t.updateTextData=function(r,a,i,o){for(var s=0,c=0;c<12;c++)a[c]===1&&(s+=2,s+=i[K1[c]].length);for(var u=e.polyData.getPoints().getData(),f=new Float64Array(s*3),l=0,p=0,h=0,v=0;v<6;v++)if(r[v])for(var y=0;y<4;y++){var m=$1[v][y];if(a[m]===1){var x=K1[m],g=vo[m][0]*3,d=vo[m][1]*3;f[l*3]=.5*(u[g]+u[d]),f[l*3+1]=.5*(u[g+1]+u[d+1]),f[l*3+2]=.5*(u[g+2]+u[d+2]),l++;var C=Math.floor(v/2);f[l*3+C]=e.dataBounds[v],f[l*3+at[v][0]]=.5*(e.dataBounds[at[v][0]*2]+e.dataBounds[at[v][0]*2+1]),f[l*3+at[v][1]]=.5*(e.dataBounds[at[v][1]*2]+e.dataBounds[at[v][1]*2+1]),l++,e.textValues[p]=e.axisLabels[x],p++;var S=(x+1)%3,T=(x+2)%3,w=i[x],E=o[x];e.tickCounts[h]=w.length;for(var D=0;D<w.length;D++)f[l*3+x]=w[D],f[l*3+S]=u[g+S],f[l*3+T]=u[g+T],l++,e.textValues[p]=E[D],p++;h++}}e.textPolyData.getPoints().setData(f,3),e.textPolyData.modified()},t.update=function(){if(e.camera){for(var r=t.computeFacesToDraw(),a=e.lastFacesToDraw,i=!1,o=0;o<6;o++)e.dataBounds[o]!==e.lastTickBounds[o]&&(i=!0,e.lastTickBounds[o]=e.dataBounds[o]);if(r||i||e.forceUpdate){for(var s=new Array(12).fill(0),c=0;c<6;c++)if(a[c])for(var u=0;u<4;u++)s[$1[c][u]]++;for(var f=[],l=[],p=0;p<3;p++){var h=Gs().domain([e.dataBounds[p*2],e.dataBounds[p*2+1]]);f[p]=h.ticks(5);var v=h.tickFormat(5);l[p]=f[p].map(v)}t.updatePolyData(a,s,f),t.updateTextData(a,s,f,l),(i||e.forceUpdate)&&t.updateTextureAtlas(l)}e.forceUpdate=!1}},t.updateTextureAtlas=function(r){e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e._tmAtlas.clear();for(var a=0,i=1,o=0;o<3;o++){if(!e._tmAtlas.has(e.axisLabels[o])){U0(e.tmContext,e.axisTextStyle);var s=e.tmContext.measureText(e.axisLabels[o]),c={height:s.actualBoundingBoxAscent+2,startingHeight:i,width:s.width+2,textStyle:e.axisTextStyle};e._tmAtlas.set(e.axisLabels[o],c),i+=c.height,a<c.width&&(a=c.width)}U0(e.tmContext,e.tickTextStyle);for(var u=0;u<r[o].length;u++)if(!e._tmAtlas.has(r[o][u])){var f=e.tmContext.measureText(r[o][u]),l={height:f.actualBoundingBoxAscent+2,startingHeight:i,width:f.width+2,textStyle:e.tickTextStyle};e._tmAtlas.set(r[o][u],l),i+=l.height,a<l.width&&(a=l.width)}}a=zt(a),i=zt(i),e._tmAtlas.forEach(function(p){p.tcoords=[0,(i-p.startingHeight-p.height)/i,p.width/a,(i-p.startingHeight-p.height)/i,p.width/a,(i-p.startingHeight)/i,0,(i-p.startingHeight)/i]}),e.tmCanvas.width=a,e.tmCanvas.height=i,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,a,i),e._tmAtlas.forEach(function(p,h){U0(e.tmContext,p.textStyle),e.tmContext.fillText(h,1,p.startingHeight+p.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified()},t.onModified(function(){e.forceUpdate=!0,t.update()}),t.setTickTextStyle=function(r){e.tickTextStyle=Xa(Xa({},e.tickTextStyle),r),t.modified()},t.setAxisTextStyle=function(r){e.axisTextStyle=Xa(Xa({},e.axisTextStyle),r),t.modified()},t.get_tmAtlas=function(){return e._tmAtlas},t.getBounds=function(){return t.update(),Ve.setBounds(e.bounds,e.gridActor.getBounds()),Ve.scaleAboutCenter(e.bounds,e.boundsScaleFactor,e.boundsScaleFactor,e.boundsScaleFactor),e.bounds};var n=B.chain(t.setProperty,e.gridActor.setProperty);t.setProperty=function(r){return n(r)[0]}}function X8(t){return Xa({boundsScaleFactor:1.3,camera:null,dataBounds:ve(Ve.INIT_BOUNDS),faceVisibilityAngle:8,gridLines:!0,axisLabels:null,axisTitlePixelOffset:35,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},tickLabelPixelOffset:12,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"}},t)}function X1(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,X8(n)),mr.extend(t,e,n),e.lastFacesToDraw=[!1,!1,!1,!1,!1,!1],e.axisLabels=["X-Axis","Y-Axis","Z-Axis"],e.tickCounts=[],e.textValues=[],e.lastTickBounds=[],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.tmTexture=V0.newInstance(),e.tmTexture.setInterpolate(!1),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),e.gridMapper=Cr.newInstance(),e.polyData=Ye.newInstance(),e.gridMapper.setInputData(e.polyData),e.gridActor=mr.newInstance(),e.gridActor.setMapper(e.gridMapper),e.gridActor.setProperty(t.getProperty()),e.gridActor.setParentProp(t),e.textPolyData=Ye.newInstance(),B.setGet(t,e,["axisTitlePixelOffset","boundsScaleFactor","faceVisibilityAngle","gridLines","tickLabelPixelOffset"]),B.setGetArray(t,e,["dataBounds"],6),B.setGetArray(t,e,["axisLabels"],3),B.get(t,e,["axisTextStyle","tickTextStyle","camera","tmTexture","textValues","textPolyData","tickCounts","gridActor"]),K8(t,e)}var q8=B.newInstance(X1,"vtkCubeAxesActor"),G0={newInstance:q8,extend:X1,newCubeAxesActorHelper:$8};function Y8(t,e){e.classHierarchy.push("vtkOpenGLCubeAxesActor"),t.buildPass=function(n){n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.CubeAxesActorHelper.getRenderable()||e.CubeAxesActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.CubeAxesActorHelper.getTmActor()),t.addMissingNode(e.renderable.getGridActor()),t.removeUnusedNodes())},t.opaquePass=function(n,r){if(n){var a=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,i=e._openGLRenderer.getTiledSizeAndOrigin();e.CubeAxesActorHelper.updateAPISpecificData([i.usize,i.vsize],a,e._openGLRenderWindow.getRenderable())}}}var J8={};function Z8(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,J8,n),xt.extend(t,e,n),e.CubeAxesActorHelper=G0.newCubeAxesActorHelper(),Y8(t,e)}var Q8=Je(Z8,"vtkOpenGLCubeAxesActor");ft("vtkCubeAxesActor",Q8);var Tr={ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2},q1={ObjectType:Tr};function Y1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function J1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y1(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var mo=q1.ObjectType,e6={};function t6(t,e){e.classHierarchy.push("vtkOpenGLBufferObject");function n(s){switch(s){case mo.ELEMENT_ARRAY_BUFFER:return e.context.ELEMENT_ARRAY_BUFFER;case mo.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in e.context)return e.context.TEXTURE_BUFFER;case mo.ARRAY_BUFFER:default:return e.context.ARRAY_BUFFER}}var r=null,a=null,i=!0,o="";t.getType=function(){return r},t.setType=function(s){r=s},t.getHandle=function(){return a},t.isReady=function(){return i===!1},t.generateBuffer=function(s){var c=n(s);return a===null&&(a=e.context.createBuffer(),r=s),n(r)===c},t.upload=function(s,c){var u=t.generateBuffer(c);return u?(e.context.bindBuffer(n(r),a),e.context.bufferData(n(r),s,e.context.STATIC_DRAW),i=!1,!0):(o="Trying to upload array buffer to incompatible buffer.",!1)},t.bind=function(){return a?(e.context.bindBuffer(n(r),a),!0):!1},t.release=function(){return a?(e.context.bindBuffer(n(r),null),!0):!1},t.releaseGraphicsResources=function(){a!==null&&(e.context.bindBuffer(n(r),null),e.context.deleteBuffer(a),a=null)},t.setOpenGLRenderWindow=function(s){e._openGLRenderWindow!==s&&(t.releaseGraphicsResources(),e._openGLRenderWindow=s,e.context=null,s&&(e.context=e._openGLRenderWindow.getContext()))},t.getError=function(){return o}}var r6={objectType:mo.ARRAY_BUFFER,context:null};function Z1(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,r6,n),B.obj(t,e),B.get(t,e,["_openGLRenderWindow"]),B.moveToProtected(t,e,["openGLRenderWindow"]),t6(t,e)}var n6=B.newInstance(Z1),wr=J1(J1({newInstance:n6,extend:Z1},e6),q1),Q1=B.vtkErrorMacro;function a6(t,e){var n=new Float64Array(3);ps(n,e);var r=new Float64Array(16);return ss(r,Zr(),t,n),r}function i6(t,e){return t===null||e===null?!1:!(Fn(t,[0,0,0])&&Fn(e,[1,1,1]))}function o6(t,e){e.classHierarchy.push("vtkOpenGLCellArrayBufferObject"),t.setType(Tr.ARRAY_BUFFER),t.createVBO=function(n,r,a,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!n.getData()||!n.getData().length)return e.elementCount=0,0;e.blockSize=3,e.vertexOffset=0,e.normalOffset=0,e.tCoordOffset=0,e.tCoordComponents=0,e.colorComponents=0,e.colorOffset=0,e.customData=[];var s=i.points.getData(),c=null,u=null,f=null,l=i.colors?i.colors.getNumberOfComponents():0,p=i.tcoords?i.tcoords.getNumberOfComponents():0;i.normals&&(e.normalOffset=4*e.blockSize,e.blockSize+=3,c=i.normals.getData()),i.customAttributes&&i.customAttributes.forEach(function(V){V&&(e.customData.push({data:V.getData(),offset:4*e.blockSize,components:V.getNumberOfComponents(),name:V.getName()}),e.blockSize+=V.getNumberOfComponents())}),i.tcoords&&(e.tCoordOffset=4*e.blockSize,e.tCoordComponents=p,e.blockSize+=p,u=i.tcoords.getData()),i.colors?(e.colorComponents=i.colors.getNumberOfComponents(),e.colorOffset=0,f=i.colors.getData(),e.colorBO||(e.colorBO=wr.newInstance()),e.colorBO.setOpenGLRenderWindow(e._openGLRenderWindow)):e.colorBO=null,e.stride=4*e.blockSize;var h=0,v=0,y=0,m=0,x=0,g=0,d,C={anythingToPoints:function(k,P,j){for(var z=0;z<k;++z)d(P[j+z])},linesToWireframe:function(k,P,j){for(var z=0;z<k-1;++z)d(P[j+z]),d(P[j+z+1])},polysToWireframe:function(k,P,j){if(k>2)for(var z=0;z<k;++z)d(P[j+z]),d(P[j+(z+1)%k])},stripsToWireframe:function(k,P,j){if(k>2){for(var z=0;z<k-1;++z)d(P[j+z]),d(P[j+z+1]);for(var Z=0;Z<k-2;Z++)d(P[j+Z]),d(P[j+Z+2])}},polysToSurface:function(k,P,j){for(var z=0;z<k-2;z++)d(P[j+0]),d(P[j+z+1]),d(P[j+z+2])},stripsToSurface:function(k,P,j){for(var z=0;z<k-2;z++)d(P[j+z]),d(P[j+z+1+z%2]),d(P[j+z+1+(z+1)%2])}},S={anythingToPoints:function(k,P){return k},linesToWireframe:function(k,P){return k>1?(k-1)*2:0},polysToWireframe:function(k,P){return k>2?k*2:0},stripsToWireframe:function(k,P){return k>2?k*4-6:0},polysToSurface:function(k,P){return k>2?(k-2)*3:0},stripsToSurface:function(k,P,j){return k>2?(k-2)*3:0}},T=null,w=null;a===Zt.POINTS||r==="verts"?(T=C.anythingToPoints,w=S.anythingToPoints):a===Zt.WIREFRAME||r==="lines"?(T=C["".concat(r,"ToWireframe")],w=S["".concat(r,"ToWireframe")]):(T=C["".concat(r,"ToSurface")],w=S["".concat(r,"ToSurface")]);for(var E=n.getData(),D=E.length,b=0,O=0;O<D;)b+=w(E[O],E),O+=E[O]+1;var M=null,R=new Float32Array(b*e.blockSize);f&&(M=new Uint8Array(b*4));for(var N=0,U=0,W=0,I=0,G=0;G<3;++G){var F=i.points.getRange(G),A=F[1]-F[0];W+=A*A;var H=.5*(F[1]+F[0]);I+=H*H}var $=W>0&&(Math.abs(I)/W>1e6||Math.abs(Math.log10(W))>3||W===0&&I>1e6);if($){for(var X=new Float64Array(3),Y=new Float64Array(3),q=0;q<3;++q){var J=i.points.getRange(q),ne=J[1]-J[0];X[q]=.5*(J[1]+J[0]),Y[q]=ne>0?1/ne:1}t.setCoordShiftAndScale(X,Y)}else e.coordShiftAndScaleEnabled===!0&&t.setCoordShiftAndScale(null,null);if(o)if(!o.points&&!o.cells)o.points=new Int32Array(b),o.cells=new Int32Array(b);else{var Q=new Int32Array(b+o.points.length);Q.set(o.points),o.points=Q;var te=new Int32Array(b+o.cells.length);te.set(o.cells),o.cells=te}var L=i.vertexOffset;d=function(k){if(o&&(o.points[L]=k,o.cells[L]=g+i.cellOffset),++L,h=k*3,e.coordShiftAndScaleEnabled?(R[N++]=(s[h++]-e.coordShift[0])*e.coordScale[0],R[N++]=(s[h++]-e.coordShift[1])*e.coordScale[1],R[N++]=(s[h++]-e.coordShift[2])*e.coordScale[2]):(R[N++]=s[h++],R[N++]=s[h++],R[N++]=s[h++]),c!==null&&(i.haveCellNormals?v=(g+i.cellOffset)*3:v=k*3,R[N++]=c[v++],R[N++]=c[v++],R[N++]=c[v++]),e.customData.forEach(function(j){x=k*j.components;for(var z=0;z<j.components;++z)R[N++]=j.data[x++]}),u!==null){y=k*p;for(var P=0;P<p;++P)R[N++]=u[y++]}f!==null&&(i.haveCellScalars?m=(g+i.cellOffset)*l:m=k*l,M[U++]=f[m++],M[U++]=f[m++],M[U++]=f[m++],M[U++]=l===4?f[m++]:255)};for(var _=0;_<D;)T(E[_],E,_+1),_+=E[_]+1,g++;return e.elementCount=b,t.upload(R,Tr.ARRAY_BUFFER),e.colorBO&&(e.colorBOStride=4,e.colorBO.upload(M,Tr.ARRAY_BUFFER)),g},t.setCoordShiftAndScale=function(n,r){if(n!==null&&(n.constructor!==Float64Array||n.length!==3)){Q1("Wrong type for coordShift, expected vec3 or null");return}if(r!==null&&(r.constructor!==Float64Array||r.length!==3)){Q1("Wrong type for coordScale, expected vec3 or null");return}(e.coordShift===null||n===null||!hs(n,e.coordShift))&&(e.coordShift=n),(e.coordScale===null||r===null||!hs(r,e.coordScale))&&(e.coordScale=r),e.coordShiftAndScaleEnabled=i6(e.coordShift,e.coordScale),e.coordShiftAndScaleEnabled?e.inverseShiftAndScaleMatrix=a6(e.coordShift,e.coordScale):e.inverseShiftAndScaleMatrix=null}}var s6={elementCount:0,stride:0,colorBOStride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0,tcoordBO:null,customData:[],coordShift:null,coordScale:null,coordShiftAndScaleEnabled:!1,inverseShiftAndScaleMatrix:null};function ep(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,s6,n),wr.extend(t,e,n),B.setGet(t,e,["colorBO","elementCount","stride","colorBOStride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents","customData"]),B.get(t,e,["coordShift","coordScale","coordShiftAndScaleEnabled","inverseShiftAndScaleMatrix"]),o6(t,e)}var u6=B.newInstance(ep),c6={newInstance:u6,extend:ep},f6=B.vtkErrorMacro;function l6(t,e){e.classHierarchy.push("vtkShader"),t.compile=function(){var n=e.context.VERTEX_SHADER;if(!e.source||!e.source.length||e.shaderType==="Unknown")return!1;switch(e.handle!==0&&(e.context.deleteShader(e.handle),e.handle=0),e.shaderType){case"Fragment":n=e.context.FRAGMENT_SHADER;break;case"Vertex":default:n=e.context.VERTEX_SHADER;break}e.handle=e.context.createShader(n),e.context.shaderSource(e.handle,e.source),e.context.compileShader(e.handle);var r=e.context.getShaderParameter(e.handle,e.context.COMPILE_STATUS);if(!r){var a=e.context.getShaderInfoLog(e.handle);return f6("Error compiling shader '".concat(e.source,"': ").concat(a)),e.context.deleteShader(e.handle),e.handle=0,!1}return!0},t.cleanup=function(){e.shaderType==="Unknown"||e.handle===0||(e.context.deleteShader(e.handle),e.handle=0,e.dirty=!0)}}var p6={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null};function tp(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,p6,n),B.obj(t,e),B.setGet(t,e,["shaderType","source","error","handle","context"]),l6(t,e)}var h6=B.newInstance(tp,"vtkShader"),P0={newInstance:h6,extend:tp},lr=B.vtkErrorMacro;function v6(t,e,n,r){var a=typeof n=="string"?n:n.join(`
`),i=r===!1?e:new RegExp(e,"g"),o=t.replace(i,a);return{replace:o!==a,result:o}}function g6(t,e){e.classHierarchy.push("vtkShaderProgram"),t.compileShader=function(){return e.vertexShader.compile()?e.fragmentShader.compile()?!t.attachShader(e.vertexShader)||!t.attachShader(e.fragmentShader)?(lr(e.error),0):t.link()?(t.setCompiled(!0),1):(lr("Links failed: ".concat(e.error)),0):(lr(e.fragmentShader.getSource().split(`
`).map(function(n,r){return"".concat(r,": ").concat(n)}).join(`
`)),lr(e.fragmentShader.getError()),0):(lr(e.vertexShader.getSource().split(`
`).map(function(n,r){return"".concat(r,": ").concat(n)}).join(`
`)),lr(e.vertexShader.getError()),0)},t.cleanup=function(){e.shaderType==="Unknown"||e.handle===0||(e.context.deleteShader(e.handle),e.handle=0)},t.bind=function(){return!e.linked&&!t.link()?!1:(e.context.useProgram(e.handle),t.setBound(!0),!0)},t.isBound=function(){return!!e.bound},t.release=function(){e.context.useProgram(null),t.setBound(!1)},t.setContext=function(n){e.vertexShader.setContext(n),e.fragmentShader.setContext(n),e.geometryShader.setContext(n)},t.link=function(){if(e.linked)return!0;if(e.handle===0)return e.error="Program has not been initialized, and/or does not have shaders.",!1;e.uniformLocs={},e.context.linkProgram(e.handle);var n=e.context.getProgramParameter(e.handle,e.context.LINK_STATUS);if(!n){var r=e.context.getProgramInfoLog(e.handle);return lr("Error linking shader ".concat(r)),e.handle=0,!1}return t.setLinked(!0),e.attributeLocs={},!0},t.setUniformMatrix=function(n,r){var a=t.findUniform(n);if(a===-1)return e.error="Could not set uniform ".concat(n," . No such uniform."),!1;var i=new Float32Array(r);return e.context.uniformMatrix4fv(a,!1,i),!0},t.setUniformMatrix3x3=function(n,r){var a=t.findUniform(n);if(a===-1)return e.error="Could not set uniform ".concat(n," . No such uniform."),!1;var i=new Float32Array(r);return e.context.uniformMatrix3fv(a,!1,i),!0},t.setUniformf=function(n,r){var a=t.findUniform(n);return a===-1?(e.error="Could not set uniform ".concat(n," . No such uniform."),!1):(e.context.uniform1f(a,r),!0)},t.setUniformfv=function(n,r){var a=t.findUniform(n);return a===-1?(e.error="Could not set uniform ".concat(n," . No such uniform."),!1):(e.context.uniform1fv(a,r),!0)},t.setUniformi=function(n,r){var a=t.findUniform(n);return a===-1?(e.error="Could not set uniform ".concat(n," . No such uniform."),!1):(e.context.uniform1i(a,r),!0)},t.setUniformiv=function(n,r){var a=t.findUniform(n);return a===-1?(e.error="Could not set uniform ".concat(n," . No such uniform."),!1):(e.context.uniform1iv(a,r),!0)},t.setUniform2f=function(n,r,a){var i=t.findUniform(n);if(i===-1)return e.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(a===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2f(i,r,a),!0},t.setUniform2fv=function(n,r){var a=t.findUniform(n);return a===-1?(e.error="Could not set uniform ".concat(n," . No such uniform."),!1):(e.context.uniform2fv(a,r),!0)},t.setUniform2i=function(n,r,a){var i=t.findUniform(n);if(i===-1)return e.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(a===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2i(i,r,a),!0},t.setUniform2iv=function(n,r){var a=t.findUniform(n);return a===-1?(e.error="Could not set uniform ".concat(n," . No such uniform."),!1):(e.context.uniform2iv(a,r),!0)},t.setUniform3f=function(n,r,a,i){var o=t.findUniform(n);if(o===-1)return e.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(i===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(o,r,a,i),!0},t.setUniform3fArray=function(n,r){var a=t.findUniform(n);if(a===-1)return e.error="Could not set uniform ".concat(n," . No such uniform."),!1;if(!Array.isArray(r)||r.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(a,r[0],r[1],r[2]),!0},t.setUniform3fv=function(n,r){var a=t.findUniform(n);return a===-1?(e.error="Could not set uniform ".concat(n," . No such uniform."),!1):(e.context.uniform3fv(a,r),!0)},t.setUniform3i=function(n){var r=t.findUniform(n);if(r===-1)return e.error="Could not set uniform ".concat(n," . No such uniform."),!1;for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];var s=i;if(s.length===1&&Array.isArray(s[0])&&(s=s[0]),s.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3i(r,s[0],s[1],s[2]),!0},t.setUniform3iv=function(n,r){var a=t.findUniform(n);return a===-1?(e.error="Could not set uniform ".concat(n," . No such uniform."),!1):(e.context.uniform3iv(a,r),!0)},t.setUniform4f=function(n){var r=t.findUniform(n);if(r===-1)return e.error="Could not set uniform ".concat(n," . No such uniform."),!1;for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];var s=i;if(s.length===1&&Array.isArray(s[0])&&(s=s[0]),s.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4f(r,s[0],s[1],s[2],s[3]),!0},t.setUniform4fv=function(n,r){var a=t.findUniform(n);return a===-1?(e.error="Could not set uniform ".concat(n," . No such uniform."),!1):(e.context.uniform4fv(a,r),!0)},t.setUniform4i=function(n){var r=t.findUniform(n);if(r===-1)return e.error="Could not set uniform ".concat(n," . No such uniform."),!1;for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];var s=i;if(s.length===1&&Array.isArray(s[0])&&(s=s[0]),s.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4i(r,s[0],s[1],s[2],s[3]),!0},t.setUniform4iv=function(n,r){var a=t.findUniform(n);return a===-1?(e.error="Could not set uniform ".concat(n," . No such uniform."),!1):(e.context.uniform4iv(a,r),!0)},t.findUniform=function(n){if(!n||!e.linked)return-1;var r=e.uniformLocs[n];return r!==void 0?r:(r=e.context.getUniformLocation(e.handle,n),r===null?(e.error="Uniform ".concat(n," not found in current shader program."),e.uniformLocs[n]=-1,-1):(e.uniformLocs[n]=r,r))},t.isUniformUsed=function(n){if(!n)return!1;var r=e.uniformLocs[n];return r!==void 0?r!==null:e.linked?(r=e.context.getUniformLocation(e.handle,n),e.uniformLocs[n]=r,r!==null):(lr("attempt to find uniform when the shader program is not linked"),!1)},t.isAttributeUsed=function(n){if(!n)return!1;if(n in e.attributeLocs)return!0;if(!e.linked)return lr("attempt to find uniform when the shader program is not linked"),!1;var r=e.context.getAttribLocation(e.handle,n);return r===-1?!1:(e.attributeLocs[n]=r,!0)},t.attachShader=function(n){if(n.getHandle()===0)return e.error="Shader object was not initialized, cannot attach it.",!1;if(n.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;if(e.handle===0){var r=e.context.createProgram();if(r===0)return e.error="Could not create shader program.",!1;e.handle=r,e.linked=!1}return n.getShaderType()==="Vertex"&&(e.vertexShaderHandle!==0&&e.comntext.detachShader(e.handle,e.vertexShaderHandle),e.vertexShaderHandle=n.getHandle()),n.getShaderType()==="Fragment"&&(e.fragmentShaderHandle!==0&&e.context.detachShader(e.handle,e.fragmentShaderHandle),e.fragmentShaderHandle=n.getHandle()),e.context.attachShader(e.handle,n.getHandle()),t.setLinked(!1),!0},t.detachShader=function(n){if(n.getHandle()===0)return e.error="shader object was not initialized, cannot attach it.",!1;if(n.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;switch(e.handle===0&&(e.error="This shader program has not been initialized yet."),n.getShaderType()){case"Vertex":return e.vertexShaderHandle!==n.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,n.getHandle()),e.vertexShaderHandle=0,e.linked=!1,!0);case"Fragment":return e.fragmentShaderHandle!==n.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,n.getHandle()),e.fragmentShaderHandle=0,e.linked=!1,!0);default:return!1}},t.setContext=function(n){e.context=n,e.vertexShader.setContext(n),e.fragmentShader.setContext(n),e.geometryShader.setContext(n)},t.setLastCameraMTime=function(n){e.lastCameraMTime=n}}var d6={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null,lastCameraMTime:null};function rp(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,d6,n),e.attributesLocs={},e.uniformLocs={},e.vertexShader=P0.newInstance(),e.vertexShader.setShaderType("Vertex"),e.fragmentShader=P0.newInstance(),e.fragmentShader.setShaderType("Fragment"),e.geometryShader=P0.newInstance(),e.geometryShader.setShaderType("Geometry"),B.obj(t,e),B.get(t,e,["lastCameraMTime"]),B.setGet(t,e,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),g6(t,e)}var y6=B.newInstance(rp,"vtkShaderProgram"),ee={newInstance:y6,extend:rp,substitute:v6};function m6(t,e){e.classHierarchy.push("vtkOpenGLVertexArrayObject"),t.exposedMethod=function(){},t.initialize=function(){e.instancingExtension=null,e._openGLRenderWindow.getWebgl2()||(e.instancingExtension=e.context.getExtension("ANGLE_instanced_arrays")),!e.forceEmulation&&e._openGLRenderWindow&&e._openGLRenderWindow.getWebgl2()?(e.extension=null,e.supported=!0,e.handleVAO=e.context.createVertexArray()):(e.extension=e.context.getExtension("OES_vertex_array_object"),!e.forceEmulation&&e.extension?(e.supported=!0,e.handleVAO=e.extension.createVertexArrayOES()):e.supported=!1)},t.isReady=function(){return e.handleVAO!==0||e.supported===!1},t.bind=function(){if(t.isReady()||t.initialize(),t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(e.handleVAO):e.context.bindVertexArray(e.handleVAO);else if(t.isReady())for(var n=e.context,r=0;r<e.buffers.length;++r){var a=e.buffers[r];e.context.bindBuffer(n.ARRAY_BUFFER,a.buffer);for(var i=0;i<a.attributes.length;++i)for(var o=a.attributes[i],s=o.isMatrix?o.size:1,c=0;c<s;++c)n.enableVertexAttribArray(o.index+c),n.vertexAttribPointer(o.index+c,o.size,o.type,o.normalize,o.stride,o.offset+o.stride*c/o.size),o.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(o.index+c,1):n.vertexAttribDivisor(o.index+c,1))}},t.release=function(){if(t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(null):e.context.bindVertexArray(null);else if(t.isReady())for(var n=e.context,r=0;r<e.buffers.length;++r){var a=e.buffers[r];e.context.bindBuffer(n.ARRAY_BUFFER,a.buffer);for(var i=0;i<a.attributes.length;++i)for(var o=a.attributes[i],s=o.isMatrix?o.size:1,c=0;c<s;++c)n.enableVertexAttribArray(o.index+c),n.vertexAttribPointer(o.index+c,o.size,o.type,o.normalize,o.stride,o.offset+o.stride*c/o.size),o.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(o.index+c,0):n.vertexAttribDivisor(o.index+c,0)),n.disableVertexAttribArray(o.index+c)}},t.shaderProgramChanged=function(){t.release(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.handleProgram=0},t.releaseGraphicsResources=function(){t.shaderProgramChanged(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.supported=!0,e.handleProgram=0},t.addAttributeArray=function(n,r,a,i,o,s,c,u){return t.addAttributeArrayWithDivisor(n,r,a,i,o,s,c,u,0,!1)},t.addAttributeArrayWithDivisor=function(n,r,a,i,o,s,c,u,f,l){if(!n||!n.isBound()||r.getHandle()===0||r.getType()!==Tr.ARRAY_BUFFER||(e.handleProgram===0&&(e.handleProgram=n.getHandle()),t.isReady()||t.initialize(),!t.isReady()||e.handleProgram!==n.getHandle()))return!1;var p=e.context,h={};if(h.name=a,h.index=p.getAttribLocation(e.handleProgram,a),h.offset=i,h.stride=o,h.type=s,h.size=c,h.normalize=u,h.isMatrix=l,h.divisor=f,h.Index===-1)return!1;if(r.bind(),p.enableVertexAttribArray(h.index),p.vertexAttribPointer(h.index,h.size,h.type,h.normalize,h.stride,h.offset),f>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(h.index,1):p.vertexAttribDivisor(h.index,1)),h.buffer=r.getHandle(),!e.supported){for(var v=!1,y=0;y<e.buffers.length;++y){var m=e.buffers[y];if(m.buffer===h.buffer){v=!0;for(var x=!1,g=0;g<m.attributes.length;++g){var d=m.attributes[g];d.name===a&&(x=!0,m.attributes[g]=h)}x||m.attributes.push(h)}}v||e.buffers.push({buffer:h.buffer,attributes:[h]})}return!0},t.addAttributeMatrixWithDivisor=function(n,r,a,i,o,s,c,u,f){var l=t.addAttributeArrayWithDivisor(n,r,a,i,o,s,c,u,f,!0);if(!l)return l;for(var p=e.context,h=p.getAttribLocation(e.handleProgram,a),v=1;v<c;v++)p.enableVertexAttribArray(h+v),p.vertexAttribPointer(h+v,c,s,u,o,i+o*v/c),f>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(h+v,1):p.vertexAttribDivisor(h+v,1));return!0},t.removeAttributeArray=function(n){if(!t.isReady()||e.handleProgram===0)return!1;if(!e.supported)for(var r=0;r<e.buffers.length;++r)for(var a=e.buffers[r],i=0;i<a.attributes.length;++i){var o=a.attributes[i];if(o.name===n)return a.attributes.splice(i,1),a.attributes.length||e.buffers.splice(r,1),!0}return!0},t.setOpenGLRenderWindow=function(n){e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))}}var x6={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null};function np(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,x6,n),e.buffers=[],B.obj(t,e),B.get(t,e,["supported"]),B.setGet(t,e,["forceEmulation"]),m6(t,e)}var C6=B.newInstance(np,"vtkOpenGLVertexArrayObject"),qa={newInstance:C6,extend:np},Ur={Start:0,Points:0,Lines:1,Tris:2,TriStrips:3,TrisEdges:4,TriStripsEdges:5,End:6};function S6(t,e){e.classHierarchy.push("vtkOpenGLHelper"),t.setOpenGLRenderWindow=function(n){e.context=n.getContext(),e.program.setContext(e.context),e.VAO.setOpenGLRenderWindow(n),e.CABO.setOpenGLRenderWindow(n)},t.releaseGraphicsResources=function(n){e.VAO.releaseGraphicsResources(),e.CABO.releaseGraphicsResources(),e.CABO.setElementCount(0)},t.drawArrays=function(n,r,a,i){if(e.CABO.getElementCount()){var o=t.getOpenGLMode(a),s=t.haveWideLines(n,r),c=e.context,u=c.getParameter(c.DEPTH_WRITEMASK);e.pointPicking&&c.depthMask(!1);var f=o===c.LINES;f&&s?(t.updateShaders(n,r,i),c.drawArraysInstanced(o,0,e.CABO.getElementCount(),2*Math.ceil(r.getProperty().getLineWidth()))):(c.lineWidth(r.getProperty().getLineWidth()),t.updateShaders(n,r,i),c.drawArrays(o,0,e.CABO.getElementCount()),c.lineWidth(1));var l=(o===c.POINTS?1:0)||(o===c.LINES?2:3);return e.pointPicking&&c.depthMask(u),e.CABO.getElementCount()/l}return 0},t.getOpenGLMode=function(n){if(e.pointPicking)return e.context.POINTS;var r=e.primitiveType;return n===Zt.POINTS||r===Ur.Points?e.context.POINTS:n===Zt.WIREFRAME||r===Ur.Lines||r===Ur.TrisEdges||r===Ur.TriStripsEdges?e.context.LINES:e.context.TRIANGLES},t.haveWideLines=function(n,r){return r.getProperty().getLineWidth()>1?!(e.CABO.getOpenGLRenderWindow()&&e.CABO.getOpenGLRenderWindow().getHardwareMaximumLineWidth()>=r.getProperty().getLineWidth()):!1},t.getNeedToRebuildShaders=function(n,r,a){return!!(a.getNeedToRebuildShaders(t,n,r)||t.getProgram()===0||t.getShaderSourceTime().getMTime()<a.getMTime()||t.getShaderSourceTime().getMTime()<r.getMTime())},t.updateShaders=function(n,r,a){if(t.getNeedToRebuildShaders(n,r,a)){var i={Vertex:null,Fragment:null,Geometry:null};a.buildShaders(i,n,r);var o=e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgramArray(i.Vertex,i.Fragment,i.Geometry);o!==t.getProgram()&&(t.setProgram(o),t.getVAO().releaseGraphicsResources()),t.getShaderSourceTime().modified()}else e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgram(t.getProgram());t.getVAO().bind(),a.setMapperShaderParameters(t,n,r),a.setPropertyShaderParameters(t,n,r),a.setCameraShaderParameters(t,n,r),a.setLightingShaderParameters(t,n,r),a.invokeShaderCallbacks(t,n,r)},t.setMapperShaderParameters=function(n,r,a){if(t.haveWideLines(n,r)){t.getProgram().setUniform2f("viewportSize",a.usize,a.vsize);var i=parseFloat(r.getProperty().getLineWidth()),o=i/2;t.getProgram().setUniformf("lineWidthStepSize",i/Math.ceil(i)),t.getProgram().setUniformf("halfLineWidth",o)}e.primitiveType===Ur.Points||r.getProperty().getRepresentation()===Zt.POINTS?t.getProgram().setUniformf("pointSize",r.getProperty().getPointSize()):e.pointPicking&&t.getProgram().setUniformf("pointSize",t.getPointPickingPrimitiveSize())},t.replaceShaderPositionVC=function(n,r,a){var i=n.Vertex;i=ee.substitute(i,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform float pointSize;"]).result,i=ee.substitute(i,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl","  gl_PointSize = pointSize;"],!1).result,t.getOpenGLMode(a.getProperty().getRepresentation())===e.context.LINES&&t.haveWideLines(r,a)&&(i=ee.substitute(i,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform vec2 viewportSize;","uniform float lineWidthStepSize;","uniform float halfLineWidth;"]).result,i=ee.substitute(i,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl"," if (halfLineWidth > 0.0)","   {","   float offset = float(gl_InstanceID / 2) * lineWidthStepSize - halfLineWidth;","   vec4 tmpPos = gl_Position;","   vec3 tmpPos2 = tmpPos.xyz / tmpPos.w;","   tmpPos2.x = tmpPos2.x + 2.0 * mod(float(gl_InstanceID), 2.0) * offset / viewportSize[0];","   tmpPos2.y = tmpPos2.y + 2.0 * mod(float(gl_InstanceID + 1), 2.0) * offset / viewportSize[1];","   gl_Position = vec4(tmpPos2.xyz * tmpPos.w, tmpPos.w);","   }"]).result),n.Vertex=i},t.getPointPickingPrimitiveSize=function(){return e.primitiveType===Ur.Points?2:e.primitiveType===Ur.Lines?4:6}}var T6={context:null,program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null,primitiveType:0,pointPicking:!1};function ap(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,T6,n),B.obj(t,e),e.shaderSourceTime={},B.obj(e.shaderSourceTime),e.attributeUpdateTime={},B.obj(e.attributeUpdateTime),B.setGet(t,e,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO","primitiveType","pointPicking"]),e.program=ee.newInstance(),e.VAO=qa.newInstance(),e.CABO=c6.newInstance(),S6(t,e)}var w6=B.newInstance(ap),Ht={newInstance:w6,extend:ap,primTypes:Ur},Ya={CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},Ee={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5},I0={Wrap:Ya,Filter:Ee},ip=new Float32Array(1),E6=new Int32Array(ip.buffer);function D6(t){ip[0]=t;var e=E6[0],n=e>>16&32768,r=e>>12&2047,a=e>>23&255;return a<103?n:a>142?(n|=31744,n|=(a===255?0:1)&&e&8388607,n):a<113?(r|=2048,n|=(r>>114-a)+(r>>113-a&1),n):(n|=a-112<<10|r>>1,n+=r&1,n)}function O6(t){var e=(t&32768)>>15,n=(t&31744)>>10,r=t&1023;return n===0?(e?-1:1)*Math.pow(2,-14)*(r/Math.pow(2,10)):n===31?r?NaN:(e?-1:1)*(1/0):(e?-1:1)*Math.pow(2,n-15)*(1+r/Math.pow(2,10))}var qn={fromHalf:O6,toHalf:D6};function op(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function _6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?op(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):op(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Er=I0.Wrap,Et=I0.Filter,je=de.VtkDataTypes,j0=an,Yn=Me,b6=Ea,M6=qn.toHalf;function N6(t,e){e.classHierarchy.push("vtkOpenGLTexture"),t.render=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(u?e._openGLRenderWindow=u:(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent()),e.context=e._openGLRenderWindow.getContext(),e.renderable.getInterpolate()?(e.generateMipmap?t.setMinificationFilter(Et.LINEAR_MIPMAP_LINEAR):t.setMinificationFilter(Et.LINEAR),t.setMagnificationFilter(Et.LINEAR)):(t.setMinificationFilter(Et.NEAREST),t.setMagnificationFilter(Et.NEAREST)),e.renderable.getRepeat()&&(t.setWrapR(Er.REPEAT),t.setWrapS(Er.REPEAT),t.setWrapT(Er.REPEAT)),e.renderable.getInputData()&&e.renderable.setImage(null),!e.handle||e.renderable.getMTime()>e.textureBuildTime.getMTime()){if(e.renderable.getImage()!==null&&(e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(Et.LINEAR_MIPMAP_LINEAR)),e.renderable.getImage()&&e.renderable.getImageLoaded()&&(t.create2DFromImage(e.renderable.getImage()),t.activate(),t.sendParameters(),e.textureBuildTime.modified())),e.renderable.getCanvas()!==null){e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(Et.LINEAR_MIPMAP_LINEAR));var f=e.renderable.getCanvas();t.create2DFromRaw(f.width,f.height,4,je.UNSIGNED_CHAR,f,!0),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}if(e.renderable.getJsImageData()!==null){var l=e.renderable.getJsImageData();e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(Et.LINEAR_MIPMAP_LINEAR)),t.create2DFromRaw(l.width,l.height,4,je.UNSIGNED_CHAR,l.data,!0),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}var p=e.renderable.getInputData(0);if(p&&p.getPointData().getScalars()){for(var h=p.getExtent(),v=p.getPointData().getScalars(),y=[],m=0;m<e.renderable.getNumberOfInputPorts();++m){var x=e.renderable.getInputData(m),g=x?x.getPointData().getScalars().getData():null;g&&y.push(g)}e.renderable.getInterpolate()&&v.getNumberOfComponents()===4&&(e.generateMipmap=!0,t.setMinificationFilter(Et.LINEAR_MIPMAP_LINEAR)),y.length%6===0?t.createCubeFromRaw(h[1]-h[0]+1,h[3]-h[2]+1,v.getNumberOfComponents(),v.getDataType(),y):t.create2DFromRaw(h[1]-h[0]+1,h[3]-h[2]+1,v.getNumberOfComponents(),v.getDataType(),v.getData()),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}}e.handle&&t.activate()},t.destroyTexture=function(){t.deactivate(),e.context&&e.handle&&e.context.deleteTexture(e.handle),e.handle=0,e.numberOfDimensions=0,e.target=0,e.components=0,e.width=0,e.height=0,e.depth=0,t.resetFormatAndType()},t.createTexture=function(){e.handle||(e.handle=e.context.createTexture(),e.target&&(e.context.bindTexture(e.target,e.handle),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.bindTexture(e.target,null)))},t.getTextureUnit=function(){return e._openGLRenderWindow?e._openGLRenderWindow.getTextureUnitForTexture(t):-1},t.activate=function(){e._openGLRenderWindow.activateTexture(t),t.bind()},t.deactivate=function(){e._openGLRenderWindow&&e._openGLRenderWindow.deactivateTexture(t)},t.releaseGraphicsResources=function(u){u&&e.handle&&(u.activateTexture(t),u.deactivateTexture(t),e.context.deleteTexture(e.handle),e.handle=0,e.numberOfDimensions=0,e.target=0,e.internalFormat=0,e.format=0,e.openGLDataType=0,e.components=0,e.width=0,e.height=0,e.depth=0),e.shaderProgram&&(e.shaderProgram.releaseGraphicsResources(u),e.shaderProgram=null)},t.bind=function(){e.context.bindTexture(e.target,e.handle),e.autoParameters&&t.getMTime()>e.sendParametersTime.getMTime()&&t.sendParameters()},t.isBound=function(){var u=!1;if(e.context&&e.handle){var f=0;switch(e.target){case e.context.TEXTURE_2D:f=e.context.TEXTURE_BINDING_2D;break;default:b6("impossible case");break}var l=e.context.getIntegerv(f);u=l===e.handle}return u},t.sendParameters=function(){e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e._openGLRenderWindow.getWebgl2()&&(e.context.texParameteri(e.target,e.context.TEXTURE_BASE_LEVEL,e.baseLevel),e.context.texParameteri(e.target,e.context.TEXTURE_MAX_LEVEL,e.maxLevel)),e.sendParametersTime.modified()},t.getInternalFormat=function(u,f){return e._forceInternalFormat||(e.internalFormat=t.getDefaultInternalFormat(u,f)),e.internalFormat||j0("Unable to find suitable internal format for T=".concat(u," NC= ").concat(f)),e.internalFormat},t.getDefaultInternalFormat=function(u,f){var l=0;return l=e._openGLRenderWindow.getDefaultTextureInternalFormat(u,f,e.oglNorm16Ext,e.useHalfFloat),l||(l||(j0("Unsupported internal texture type!"),j0("Unable to find suitable internal format for T=".concat(u," NC= ").concat(f))),l)},t.setInternalFormat=function(u){e._forceInternalFormat=!0,u!==e.internalFormat&&(e.internalFormat=u,t.modified())},t.getFormat=function(u,f){return e.format=t.getDefaultFormat(u,f),e.format},t.getDefaultFormat=function(u,f){if(e._openGLRenderWindow.getWebgl2())switch(f){case 1:return e.context.RED;case 2:return e.context.RG;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}else switch(f){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}},t.resetFormatAndType=function(){e.format=0,e.internalFormat=0,e._forceInternalFormat=!1,e.openGLDataType=0},t.getDefaultDataType=function(u){if(e._openGLRenderWindow.getWebgl2())switch(u){case je.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case(e.oglNorm16Ext&&!e.useHalfFloat&&je.SHORT):return e.context.SHORT;case(e.oglNorm16Ext&&!e.useHalfFloat&&je.UNSIGNED_SHORT):return e.context.UNSIGNED_SHORT;case(e.useHalfFloat&&je.SHORT):return e.context.HALF_FLOAT;case(e.useHalfFloat&&je.UNSIGNED_SHORT):return e.context.HALF_FLOAT;case je.FLOAT:case je.VOID:default:return e.context.FLOAT}switch(u){case je.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case je.FLOAT:case je.VOID:default:if(e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear"))return e.context.FLOAT;{var f=e.context.getExtension("OES_texture_half_float");if(f&&e.context.getExtension("OES_texture_half_float_linear"))return f.HALF_FLOAT_OES}return e.context.UNSIGNED_BYTE}},t.getOpenGLDataType=function(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(!e.openGLDataType||f)&&(e.openGLDataType=t.getDefaultDataType(u)),e.openGLDataType},t.getShiftAndScale=function(){var u=0,f=1;switch(e.openGLDataType){case e.context.BYTE:f=127.5,u=f-128;break;case e.context.UNSIGNED_BYTE:f=255,u=0;break;case e.context.SHORT:f=32767.5,u=f-32768;break;case e.context.UNSIGNED_SHORT:f=65536,u=0;break;case e.context.INT:f=21474836475e-1,u=f-2147483648;break;case e.context.UNSIGNED_INT:f=4294967295,u=0;break;case e.context.FLOAT:}return{shift:u,scale:f}},t.getOpenGLFilterMode=function(u){switch(u){case Et.NEAREST:return e.context.NEAREST;case Et.LINEAR:return e.context.LINEAR;case Et.NEAREST_MIPMAP_NEAREST:return e.context.NEAREST_MIPMAP_NEAREST;case Et.NEAREST_MIPMAP_LINEAR:return e.context.NEAREST_MIPMAP_LINEAR;case Et.LINEAR_MIPMAP_NEAREST:return e.context.LINEAR_MIPMAP_NEAREST;case Et.LINEAR_MIPMAP_LINEAR:return e.context.LINEAR_MIPMAP_LINEAR;default:return e.context.NEAREST}},t.getOpenGLWrapMode=function(u){switch(u){case Er.CLAMP_TO_EDGE:return e.context.CLAMP_TO_EDGE;case Er.REPEAT:return e.context.REPEAT;case Er.MIRRORED_REPEAT:return e.context.MIRRORED_REPEAT;default:return e.context.CLAMP_TO_EDGE}};function n(u,f){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,p=[],h=e.width*e.height*e.components;if(l&&(h*=e.depth),u!==je.FLOAT&&e.openGLDataType===e.context.FLOAT)for(var v=0;v<f.length;v++)if(f[v]){var y=f[v].length>h?f[v].subarray(0,h):f[v];p.push(new Float32Array(y))}else p.push(null);if(u!==je.UNSIGNED_CHAR&&e.openGLDataType===e.context.UNSIGNED_BYTE)for(var m=0;m<f.length;m++)if(f[m]){var x=f[m].length>h?f[m].subarray(0,h):f[m];p.push(new Uint8Array(x))}else p.push(null);var g=!1;if(e._openGLRenderWindow.getWebgl2())g=e.openGLDataType===e.context.HALF_FLOAT;else{var d=e.context.getExtension("OES_texture_half_float");g=d&&e.openGLDataType===d.HALF_FLOAT_OES}if(g)for(var C=0;C<f.length;C++)if(f[C]){for(var S=new Uint16Array(h),T=f[C],w=0;w<h;w++)S[w]=M6(T[w]);p.push(S)}else p.push(null);if(p.length===0)for(var E=0;E<f.length;E++)p.push(f[E]);return p}function r(u){if(e._openGLRenderWindow.getWebgl2())return u;var f=[],l=e.width,p=e.height,h=e.components;if(u&&(!Ba(l)||!Ba(p)))for(var v=e.context.getExtension("OES_texture_half_float"),y=zt(l),m=zt(p),x=y*m*e.components,g=0;g<u.length;g++)if(u[g]!==null){var d=null,C=p/m,S=l/y,T=!1;e.openGLDataType===e.context.FLOAT?d=new Float32Array(x):v&&e.openGLDataType===v.HALF_FLOAT_OES?(d=new Uint16Array(x),T=!0):d=new Uint8Array(x);for(var w=0;w<m;w++){var E=w*y*h,D=w*C,b=Math.floor(D),O=Math.ceil(D);O>=p&&(O=p-1);var M=D-b,R=1-M;b=b*l*h,O=O*l*h;for(var N=0;N<y;N++){var U=N*h,W=N*S,I=Math.floor(W),G=Math.ceil(W);G>=l&&(G=l-1);var F=W-I;I*=h,G*=h;for(var A=0;A<h;A++)T?d[E+U+A]=qn.toHalf(qn.fromHalf(u[g][b+I+A])*R*(1-F)+qn.fromHalf(u[g][b+G+A])*R*F+qn.fromHalf(u[g][O+I+A])*M*(1-F)+qn.fromHalf(u[g][O+G+A])*M*F):d[E+U+A]=u[g][b+I+A]*R*(1-F)+u[g][b+G+A]*R*F+u[g][O+I+A]*M*(1-F)+u[g][O+G+A]*M*F}}f.push(d),e.width=y,e.height=m}else f.push(null);if(f.length===0)for(var H=0;H<u.length;H++)f.push(u[H]);return f}function a(u){if(e._openGLRenderWindow){var f;if(e.resizable||(f=e.renderable)!==null&&f!==void 0&&f.getResizable())return!1;if(e._openGLRenderWindow.getWebgl2()){var l=e._openGLRenderWindow.getGLInformations();return!(l.RENDERER.value.match(/WebKit/gi)&&navigator.platform.match(/Mac/gi)&&e.oglNorm16Ext&&(u===je.UNSIGNED_SHORT||u===je.SHORT))}return!1}return!1}t.create2DFromRaw=function(u,f,l,p,h){var v=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;if(t.getOpenGLDataType(p,!0),t.getInternalFormat(p,l),t.getFormat(p,l),!e.internalFormat||!e.format||!e.openGLDataType)return Yn("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=l,e.width=u,e.height=f,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();var y=[h],m=n(p,y),x=r(m);return e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,v),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),a(p)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),x[0]!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,x[0])):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,x[0]),e.generateMipmap&&e.context.generateMipmap(e.target),v&&e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,!1),t.deactivate(),!0},t.createCubeFromRaw=function(u,f,l,p,h){if(t.getOpenGLDataType(p),t.getInternalFormat(p,l),t.getFormat(p,l),!e.internalFormat||!e.format||!e.openGLDataType)return Yn("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_CUBE_MAP,e.components=l,e.width=u,e.height=f,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),e.maxLevel=h.length/6-1,t.createTexture(),t.bind();for(var v=n(p,h),y=r(v),m=[],x=e.width,g=e.height,d=0;d<y.length;d++){d%6===0&&d!==0&&(x/=2,g/=2),m[d]=Gn(p,g*x*e.components);for(var C=0;C<g;++C){var S=C*x*e.components,T=(g-C-1)*x*e.components;m[d].set(y[d].slice(T,T+x*e.components),S)}}e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),a(p)&&e.context.texStorage2D(e.target,6,e.internalFormat,e.width,e.height);for(var w=0;w<6;w++)for(var E=0,D=e.width,b=e.height;D>=1&&b>=1;){var O=null;E<=e.maxLevel&&(O=m[6*E+w]),a(p)?O!=null&&e.context.texSubImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+w,E,0,0,D,b,e.format,e.openGLDataType,O):e.context.texImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+w,E,e.internalFormat,D,b,0,e.format,e.openGLDataType,O),E++,D/=2,b/=2}return t.deactivate(),!0},t.createDepthFromRaw=function(u,f,l,p){return t.getOpenGLDataType(l),e.format=e.context.DEPTH_COMPONENT,e._openGLRenderWindow.getWebgl2()?l===je.FLOAT?e.internalFormat=e.context.DEPTH_COMPONENT32F:e.internalFormat=e.context.DEPTH_COMPONENT16:e.internalFormat=e.context.DEPTH_COMPONENT,!e.internalFormat||!e.format||!e.openGLDataType?(Yn("Failed to determine texture parameters."),!1):(e.target=e.context.TEXTURE_2D,e.components=1,e.width=u,e.height=f,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),a(l)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),p!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,p)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,p),e.generateMipmap&&e.context.generateMipmap(e.target),t.deactivate(),!0)},t.create2DFromImage=function(u){if(t.getOpenGLDataType(je.UNSIGNED_CHAR),t.getInternalFormat(je.UNSIGNED_CHAR,4),t.getFormat(je.UNSIGNED_CHAR,4),!e.internalFormat||!e.format||!e.openGLDataType)return Yn("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=4,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1);var f=!e._openGLRenderWindow.getWebgl2()&&(!Ba(u.width)||!Ba(u.height)),l=document.createElement("canvas");l.width=f?zt(u.width):u.width,l.height=f?zt(u.height):u.height,e.width=l.width,e.height=l.height;var p=l.getContext("2d");p.translate(0,l.height),p.scale(1,-1),p.drawImage(u,0,0,u.width,u.height,0,0,l.width,l.height);var h=l;return a(je.UNSIGNED_CHAR)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),h!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,h)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,h),e.generateMipmap&&e.context.generateMipmap(e.target),t.deactivate(),!0};function i(u,f,l){for(var p=new Array(l),h=new Array(l),v=0;v<l;++v)p[v]=u[v],h[v]=f[v]-u[v]||1;return{scale:h,offset:p}}function o(u,f){for(var l=0;l<u.length;l++){var p=u[l],h=f[l]+p;if(p<-2048||p>2048||h<-2048||h>2048)return!1}return!0}function s(u,f,l,p){t.getOpenGLDataType(u);var h=!1;if(e._openGLRenderWindow.getWebgl2())h=e.openGLDataType===e.context.HALF_FLOAT;else{var v=e.context.getExtension("OES_texture_half_float");h=v&&e.openGLDataType===v.HALF_FLOAT_OES}var y=h&&(o(f,l)||p);e.useHalfFloat=y}function c(u,f){for(var l=u.getNumberOfComponents(),p=u.getDataType(),h=u.getData(),v=new Array(l),y=new Array(l),m=0;m<l;++m){var x=u.getRange(m),g=ze(x,2),d=g[0],C=g[1];v[m]=d,y[m]=C}var S=i(v,y,l);return s(p,S.offset,S.scale,f),e.useHalfFloat||t.getOpenGLDataType(p,!0),{numComps:l,dataType:p,data:h,scaleOffsets:S}}t.create2DFilterableFromRaw=function(u,f,l,p,h){var v=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;return t.create2DFilterableFromDataArray(u,f,de.newInstance({numberOfComponents:l,dataType:p,values:h}),v)},t.create2DFilterableFromDataArray=function(u,f,l){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,h=c(l,p),v=h.numComps,y=h.dataType,m=h.data;t.create2DFromRaw(u,f,v,y,m)},t.create3DFromRaw=function(u,f,l,p,h,v){if(t.getOpenGLDataType(h),t.getInternalFormat(h,p),t.getFormat(h,p),!e.internalFormat||!e.format||!e.openGLDataType)return Yn("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_3D,e.components=p,e.width=u,e.height=f,e.depth=l,e.numberOfDimensions=3,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();var y=[v],m=!0,x=n(h,y,m),g=r(x);return e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),a(h)?(e.context.texStorage3D(e.target,1,e.internalFormat,e.width,e.height,e.depth),g[0]!=null&&e.context.texSubImage3D(e.target,0,0,0,0,e.width,e.height,e.depth,e.format,e.openGLDataType,g[0])):e.context.texImage3D(e.target,0,e.internalFormat,e.width,e.height,e.depth,0,e.format,e.openGLDataType,g[0]),e.generateMipmap&&e.context.generateMipmap(e.target),t.deactivate(),!0},t.create3DFilterableFromRaw=function(u,f,l,p,h,v){var y=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1;return t.create3DFilterableFromDataArray(u,f,l,de.newInstance({numberOfComponents:p,dataType:h,values:v}),y)},t.create3DFilterableFromDataArray=function(u,f,l,p){for(var h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,v=c(p,h),y=v.numComps,m=v.dataType,x=v.data,g=v.scaleOffsets,d=u*f*l,C=[],S=[],T=0;T<y;++T)C[T]=0,S[T]=1;e.volumeInfo={scale:S,offset:C,dataComputedScale:g.scale,dataComputedOffset:g.offset,width:u,height:f,depth:l};var w=structuredClone(g);if(e._openGLRenderWindow.getWebgl2()){if(e.oglNorm16Ext&&!e.useHalfFloat&&m===je.SHORT){for(var E=0;E<y;++E)e.volumeInfo.scale[E]=32767;return t.create3DFromRaw(u,f,l,y,m,x)}if(e.oglNorm16Ext&&!e.useHalfFloat&&m===je.UNSIGNED_SHORT){for(var D=0;D<y;++D)e.volumeInfo.scale[D]=65535;return t.create3DFromRaw(u,f,l,y,m,x)}if(m===je.FLOAT||e.useHalfFloat&&(m===je.SHORT||m===je.UNSIGNED_SHORT))return t.create3DFromRaw(u,f,l,y,m,x);if(m===je.UNSIGNED_CHAR){for(var b=0;b<y;++b)e.volumeInfo.scale[b]=255;return t.create3DFromRaw(u,f,l,y,m,x)}var O=new Float32Array(d*y);e.volumeInfo.offset=w.offset,e.volumeInfo.scale=w.scale;for(var M=0,R=w.scale.map(function(ie){return 1/ie}),N=0;N<d;N++)for(var U=0;U<y;U++)O[M]=(x[M]-w.offset[U])*R[U],M++;return t.create3DFromRaw(u,f,l,y,je.FLOAT,O)}var W=function(oe,he,ye,Re,De){oe[he]=ye},I=je.UNSIGNED_CHAR;if(m===je.UNSIGNED_CHAR)for(var G=0;G<y;++G)w.offset[G]=0,w.scale[G]=255;else e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear")?(I=je.FLOAT,W=function(oe,he,ye,Re,De){oe[he]=(ye-Re)/De}):(I=je.UNSIGNED_CHAR,W=function(oe,he,ye,Re,De){oe[he]=255*(ye-Re)/De});if(t.getOpenGLDataType(I),t.getInternalFormat(I,y),t.getFormat(I,y),!e.internalFormat||!e.format||!e.openGLDataType)return Yn("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=y,e.depth=1,e.numberOfDimensions=2;var F=e.context.getParameter(e.context.MAX_TEXTURE_SIZE);F>4096&&(I===je.FLOAT||y>=3)&&(F=4096);var A=1,H=1;d>F*F&&(A=Math.ceil(Math.sqrt(d/(F*F))),H=A);var $=Math.sqrt(d)/A;$=zt($);var X=Math.floor($*A/u),Y=Math.ceil(l/X),q=zt(f*Y/H);e.width=$,e.height=q,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.volumeInfo.xreps=X,e.volumeInfo.yreps=Y,e.volumeInfo.xstride=A,e.volumeInfo.ystride=H,e.volumeInfo.offset=w.offset,e.volumeInfo.scale=w.scale;var J,ne=$*q*y;I===je.FLOAT?J=new Float32Array(ne):J=new Uint8Array(ne);for(var Q=0,te=Math.floor(u/A),L=Math.floor(f/H),_=0;_<Y;_++)for(var V=Math.min(X,l-_*X),k=y*(e.width-V*Math.floor(u/A)),P=0;P<L;P++){for(var j=0;j<V;j++)for(var z=y*((_*X+j)*u*f+H*P*u),Z=0;Z<te;Z++)for(var re=0;re<y;re++)W(J,Q,x[z+A*Z*y+re],w.offset[re],w.scale[re]),Q++;Q+=k}return e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),a(I)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),J!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,J)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,J),t.deactivate(),!0},t.setOpenGLRenderWindow=function(u){e._openGLRenderWindow!==u&&(t.releaseGraphicsResources(),e._openGLRenderWindow=u,e.context=null,u&&(e.context=e._openGLRenderWindow.getContext()))},t.getMaximumTextureSize=function(u){return u&&u.isCurrent()?u.getIntegerv(u.MAX_TEXTURE_SIZE):-1}}var R6={_openGLRenderWindow:null,_forceInternalFormat:!1,context:null,handle:0,sendParametersTime:null,textureBuildTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:Er.CLAMP_TO_EDGE,wrapT:Er.CLAMP_TO_EDGE,wrapR:Er.CLAMP_TO_EDGE,minificationFilter:Et.NEAREST,magnificationFilter:Et.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:1e3,generateMipmap:!1,useHalfFloat:!0,oglNorm16Ext:null};function sp(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,R6,n),xt.extend(t,e,n),e.sendParametersTime={},ht(e.sendParametersTime,{mtime:0}),e.textureBuildTime={},ht(e.textureBuildTime,{mtime:0}),Mi(t,e,["format","openGLDataType"]),dt(t,e,["keyMatrixTime","minificationFilter","magnificationFilter","wrapS","wrapT","wrapR","generateMipmap","oglNorm16Ext"]),jt(t,e,["width","height","volumeInfo","components","handle","target"]),Ri(t,e,["openGLRenderWindow"]),N6(t,e)}var up=Je(sp,"vtkOpenGLTexture"),Fe=_6({newInstance:up,extend:sp},I0);ft("vtkTexture",up);var z0=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

attribute vec4 vertexMC;

// frag position in VC
//VTK::PositionVC::Dec

// optional normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// Texture coordinates
//VTK::TCoord::Dec

// material property values
//VTK::Color::Dec

// clipping plane vars
//VTK::Clip::Dec

// camera and actor matrix values
//VTK::Camera::Dec

// Apple Bug
//VTK::PrimID::Dec

// picking support
//VTK::Picking::Dec

void main()
{
  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Clip::Impl

  //VTK::PrimID::Impl

  //VTK::PositionVC::Impl

  //VTK::Light::Impl

  //VTK::Picking::Impl
}
`,Ja=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the polydata mappers fragment shader

uniform int PrimitiveIDOffset;

// VC position of this fragment
//VTK::PositionVC::Dec

// optional color passed in from the vertex shader, vertexColor
//VTK::Color::Dec

// optional surface normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// Depth Peeling Support
//VTK::DepthPeeling::Dec

// clipping plane vars
//VTK::Clip::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

// handle coincident offsets
//VTK::Coincident::Dec

//VTK::ZBuffer::Dec

void main()
{
  // VC position of this fragment. This should not branch/return/discard.
  //VTK::PositionVC::Impl

  // Place any calls that require uniform flow (e.g. dFdx) here.
  //VTK::UniformFlow::Impl

  // Set gl_FragDepth here (gl_FragCoord.z by default)
  //VTK::Depth::Impl

  // Early depth peeling abort:
  //VTK::DepthPeeling::PreColor

  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Clip::Impl

  //VTK::Color::Impl

  // Generate the normal if we are not passed in one
  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Light::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }

  //VTK::DepthPeeling::Impl

  //VTK::Picking::Impl

  // handle coincident offsets
  //VTK::Coincident::Impl

  //VTK::ZBuffer::Impl

  //VTK::RenderPassFragmentShader::Impl
}
`;function L6(t,e){t.replaceShaderCoincidentOffset=function(n,r,a){var i=t.getCoincidentParameters(r,a);if(i&&(i.factor!==0||i.offset!==0)){var o=n.Fragment;o=ee.substitute(o,"//VTK::Coincident::Dec",["uniform float cfactor;","uniform float coffset;"]).result,e.context.getExtension("EXT_frag_depth")&&(i.factor!==0?(o=ee.substitute(o,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,o=ee.substitute(o,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):o=ee.substitute(o,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + 0.000016*coffset;").result),e._openGLRenderWindow.getWebgl2()&&(i.factor!==0?(o=ee.substitute(o,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,o=ee.substitute(o,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):o=ee.substitute(o,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + 0.000016*coffset;").result),n.Fragment=o}}}function k6(t,e){t.applyShaderReplacements=function(n,r,a){var i=null;if(r&&(i=r.ShaderReplacements),i)for(var o=0;o<i.length;o++){var s=i[o];if(a&&s.replaceFirst||!a&&!s.replaceFirst){var c=s.shaderType,u=n[c],f=ee.substitute(u,s.originalValue,s.replacementValue,s.replaceAll);n[c]=f.result}}},t.buildShaders=function(n,r,a){t.getReplacedShaderTemplate(n,r,a),e.lastRenderPassShaderReplacement=e.currentRenderPass?e.currentRenderPass.getShaderReplacement():null,e.lastRenderPassShaderReplacement&&e.lastRenderPassShaderReplacement(n);var i=e.renderable.getViewSpecificProperties().OpenGL;t.applyShaderReplacements(n,i,!0),t.replaceShaderValues(n,r,a),t.applyShaderReplacements(n,i)},t.getReplacedShaderTemplate=function(n,r,a){var i=e.renderable.getViewSpecificProperties().OpenGL;t.getShaderTemplate(n,r,a);var o=n.Vertex;if(i){var s=i.VertexShaderCode;s!==void 0&&s!==""&&(o=s)}n.Vertex=o;var c=n.Fragment;if(i){var u=i.FragmentShaderCode;u!==void 0&&u!==""&&(c=u)}n.Fragment=c;var f=n.Geometry;if(i){var l=i.GeometryShaderCode;l!==void 0&&(f=l)}n.Geometry=f}}var Dr={implementReplaceShaderCoincidentOffset:L6,implementBuildShadersWithReplacements:k6};function cp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function fp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cp(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cp(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var W0=dn.FieldAssociations,mt=Ht.primTypes,Jn=Ar.Representation,lp=Ar.Shading,xo=Cr.ScalarMode,pp=Fe.Filter,hp=Fe.Wrap,wn=Me,F6={type:"StartEvent"},A6={type:"EndEvent"},V6=Fl.CoordinateSystem;function B6(t){var e=t.getSelector();return e?e.getCurrentPass():_t.MIN_KNOWN_PASS-1}function U6(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper"),t.buildPass=function(r){r&&(e.currentRenderPass=null,e.openGLActor=t.getFirstAncestorOfType("vtkOpenGLActor"),e._openGLRenderer=e.openGLActor.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()))},t.translucentPass=function(r,a){r&&(e.currentRenderPass=a,t.render())},t.zBufferPass=function(r){r&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=function(r){return t.zBufferPass(r)},t.opaquePass=function(r){r&&t.render()},t.render=function(){var r=e._openGLRenderWindow.getContext();if(e.context!==r){e.context=r;for(var a=mt.Start;a<mt.End;a++)e.primitives[a].setOpenGLRenderWindow(e._openGLRenderWindow)}var i=e.openGLActor.getRenderable(),o=e._openGLRenderer.getRenderable();t.renderPiece(o,i)},t.getShaderTemplate=function(r,a,i){r.Vertex=z0,r.Fragment=Ja,r.Geometry=""},t.replaceShaderColor=function(r,a,i){var o=r.Vertex,s=r.Geometry,c=r.Fragment,u=e.lastBoundBO.getReferenceByName("lastLightComplexity"),f=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity","uniform vec3 ambientColorUniform;","uniform vec3 diffuseColorUniform;"];u&&(f=f.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));var l=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];u&&(l=l.concat(["  vec3 specularColor;","  float specularPower;"])),l=l.concat(["  ambientColor = ambientColorUniform;","  diffuseColor = diffuseColorUniform;","  opacity = opacityUniform;"]),u&&(l=l.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges&&(f=f.concat(["varying vec4 vertexColorVSOutput;"]),o=ee.substitute(o,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,o=ee.substitute(o,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,s=ee.substitute(s,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,s=ee.substitute(s,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges?c=ee.substitute(c,"//VTK::Color::Impl",l.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result:e.renderable.getInterpolateScalarsBeforeMapping()&&e.renderable.getColorCoordinates()&&!e.drawingEdges?c=ee.substitute(c,"//VTK::Color::Impl",l.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  ambientColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:(i.getBackfaceProperty()&&!e.drawingEdges&&(f=f.concat(["uniform float opacityUniformBF; // the fragment opacity","uniform float ambientIntensityBF; // the material ambient","uniform float diffuseIntensityBF; // the material diffuse","uniform vec3 ambientColorUniformBF; // ambient material color","uniform vec3 diffuseColorUniformBF; // diffuse material color"]),u?(f=f.concat(["uniform float specularIntensityBF; // the material specular intensity","uniform vec3 specularColorUniformBF; // intensity weighted color","uniform float specularPowerUniformBF;"]),l=l.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  specularColor = specularIntensityBF * specularColorUniformBF;","  specularPower = specularPowerUniformBF;","  opacity = opacityUniformBF; }"])):l=l.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  opacity = opacityUniformBF; }"])),e.haveCellScalars&&!e.drawingEdges&&(f=f.concat(["uniform samplerBuffer texture1;"])),c=ee.substitute(c,"//VTK::Color::Impl",l).result),c=ee.substitute(c,"//VTK::Color::Dec",f).result,r.Vertex=o,r.Geometry=s,r.Fragment=c},t.replaceShaderLight=function(r,a,i){var o=r.Fragment,s="",c=e.lastBoundBO.getReferenceByName("lastLightComplexity"),u=e.lastBoundBO.getReferenceByName("lastLightCount"),f=[];switch(c){case 0:o=ee.substitute(o,"//VTK::Light::Impl",["  gl_FragData[0] = vec4(ambientColor * ambient + diffuseColor * diffuse, opacity);","  //VTK::Light::Impl"],!1).result;break;case 1:o=ee.substitute(o,"//VTK::Light::Impl",["  float df = max(0.0, normalVCVSOutput.z);","  float sf = pow(df, specularPower);","  vec3 diffuseL = df * diffuseColor;","  vec3 specularL = sf * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 2:for(var l=0;l<u;++l)f=f.concat(["uniform vec3 lightColor".concat(l,";"),"uniform vec3 lightDirectionVC".concat(l,"; // normalized"),"uniform vec3 lightHalfAngleVC".concat(l,"; // normalized")]);o=ee.substitute(o,"//VTK::Light::Dec",f).result,f=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  float df;"];for(var p=0;p<u;++p)f=f.concat(["  df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC".concat(p,"));"),"  diffuseL += ((df".concat(s,") * lightColor").concat(p,");"),"  if (dot(normalVCVSOutput, lightDirectionVC".concat(p,") < 0.0)"),"    {","    float sf = pow( max(0.0, dot(lightHalfAngleVC".concat(p,",normalVCVSOutput)), specularPower);"),"    specularL += ((sf".concat(s,") * lightColor").concat(p,");"),"    }"]);f=f.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),o=ee.substitute(o,"//VTK::Light::Impl",f,!1).result;break;case 3:for(var h=0;h<u;++h)f=f.concat(["uniform vec3 lightColor".concat(h,";"),"uniform vec3 lightDirectionVC".concat(h,"; // normalized"),"uniform vec3 lightHalfAngleVC".concat(h,"; // normalized"),"uniform vec3 lightPositionVC".concat(h,";"),"uniform vec3 lightAttenuation".concat(h,";"),"uniform float lightConeAngle".concat(h,";"),"uniform float lightExponent".concat(h,";"),"uniform int lightPositional".concat(h,";")]);o=ee.substitute(o,"//VTK::Light::Dec",f).result,f=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  vec3 vertLightDirectionVC;","  float attenuation;","  float df;"];for(var v=0;v<u;++v)f=f.concat(["  attenuation = 1.0;","  if (lightPositional".concat(v," == 0)"),"    {","      vertLightDirectionVC = lightDirectionVC".concat(v,";"),"    }","  else","    {","    vertLightDirectionVC = vertexVC.xyz - lightPositionVC".concat(v,";"),"    float distanceVC = length(vertLightDirectionVC);","    vertLightDirectionVC = normalize(vertLightDirectionVC);","    attenuation = 1.0 /","      (lightAttenuation".concat(v,".x"),"       + lightAttenuation".concat(v,".y * distanceVC"),"       + lightAttenuation".concat(v,".z * distanceVC * distanceVC);"),"    // per OpenGL standard cone angle is 90 or less for a spot light","    if (lightConeAngle".concat(v," <= 90.0)"),"      {","      float coneDot = dot(vertLightDirectionVC, lightDirectionVC".concat(v,");"),"      // if inside the cone","      if (coneDot >= cos(radians(lightConeAngle".concat(v,")))"),"        {","        attenuation = attenuation * pow(coneDot, lightExponent".concat(v,");"),"        }","      else","        {","        attenuation = 0.0;","        }","      }","    }","    df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));","    diffuseL += ((df".concat(s,") * lightColor").concat(v,");"),"    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)","      {","      float sf = attenuation*pow( max(0.0, dot(lightHalfAngleVC".concat(v,",normalVCVSOutput)), specularPower);"),"    specularL += ((sf".concat(s,") * lightColor").concat(v,");"),"    }"]);f=f.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),o=ee.substitute(o,"//VTK::Light::Impl",f,!1).result;break;default:wn("bad light complexity")}r.Fragment=o},t.replaceShaderNormal=function(r,a,i){var o=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(o>0){var s=r.Vertex,c=r.Geometry,u=r.Fragment;e.lastBoundBO.getCABO().getNormalOffset()?(s=ee.substitute(s,"//VTK::Normal::Dec",["attribute vec3 normalMC;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,s=ee.substitute(s,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * normalMC;"]).result,c=ee.substitute(c,"//VTK::Normal::Dec",["in vec3 normalVCVSOutput[];","out vec3 normalVCGSOutput;"]).result,c=ee.substitute(c,"//VTK::Normal::Impl",["normalVCGSOutput = normalVCVSOutput[i];"]).result,u=ee.substitute(u,"//VTK::Normal::Dec",["varying vec3 normalVCVSOutput;"]).result,u=ee.substitute(u,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalVCVSOutput);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.haveCellNormals?(u=ee.substitute(u,"//VTK::Normal::Dec",["uniform mat3 normalMatrix;","uniform samplerBuffer textureN;"]).result,u=ee.substitute(u,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalMatrix *","    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.lastBoundBO.getOpenGLMode(i.getProperty().getRepresentation())===e.context.LINES?(u=ee.substitute(u,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,u=ee.substitute(u,"//VTK::Normal::Impl",["vec3 normalVCVSOutput;","  if (abs(fdx.x) > 0.0)","    { fdx = normalize(fdx); normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }","  else { fdy = normalize(fdy); normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}"]).result):(u=ee.substitute(u,"//VTK::Normal::Dec",["uniform int cameraParallel;"]).result,u=ee.substitute(u,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,u=ee.substitute(u,"//VTK::Normal::Impl",["  fdx = normalize(fdx);","  fdy = normalize(fdy);","  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));","  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }","  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }"]).result),r.Vertex=s,r.Geometry=c,r.Fragment=u}},t.replaceShaderPositionVC=function(r,a,i){e.lastBoundBO.replaceShaderPositionVC(r,a,i);var o=r.Vertex,s=r.Geometry,c=r.Fragment,u=e.lastBoundBO.getReferenceByName("lastLightComplexity");u>0?(o=ee.substitute(o,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,o=ee.substitute(o,"//VTK::PositionVC::Impl",["vertexVCVSOutput = MCVCMatrix * vertexMC;","  gl_Position = MCPCMatrix * vertexMC;"]).result,o=ee.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result,s=ee.substitute(s,"//VTK::PositionVC::Dec",["in vec4 vertexVCVSOutput[];","out vec4 vertexVCGSOutput;"]).result,s=ee.substitute(s,"//VTK::PositionVC::Impl",["vertexVCGSOutput = vertexVCVSOutput[i];"]).result,c=ee.substitute(c,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,c=ee.substitute(c,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;"]).result):(o=ee.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,o=ee.substitute(o,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result),r.Vertex=o,r.Geometry=s,r.Fragment=c},t.replaceShaderTCoord=function(r,a,i){if(e.lastBoundBO.getCABO().getTCoordOffset()){var o=r.Vertex,s=r.Geometry,c=r.Fragment;if(e.drawingEdges)return;o=ee.substitute(o,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;var u=e.openGLActor.getActiveTextures(),f=2,l=2;if(u&&u.length>0&&(f=u[0].getComponents(),u[0].getTarget()===e.context.TEXTURE_CUBE_MAP&&(l=3)),e.renderable.getColorTextureMap()&&(f=e.renderable.getColorTextureMap().getPointData().getScalars().getNumberOfComponents(),l=2),l===2){if(o=ee.substitute(o,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,s=ee.substitute(s,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];","out vec2 tcoordVCGSOutput;"]).result,s=ee.substitute(s,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,c=ee.substitute(c,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,u&&u.length>=1)switch(f){case 1:c=ee.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:c=ee.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:c=ee.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}}else switch(o=ee.substitute(o,"//VTK::TCoord::Dec","attribute vec3 tcoordMC; varying vec3 tcoordVCVSOutput;").result,s=ee.substitute(s,"//VTK::TCoord::Dec",["in vec3 tcoordVCVSOutput[];","out vec3 tcoordVCGSOutput;"]).result,s=ee.substitute(s,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,c=ee.substitute(c,"//VTK::TCoord::Dec",["varying vec3 tcoordVCVSOutput;","uniform samplerCube texture1;"]).result,f){case 1:c=ee.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:c=ee.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:c=ee.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}r.Vertex=o,r.Geometry=s,r.Fragment=c}},t.replaceShaderClip=function(r,a,i){var o=r.Vertex,s=r.Fragment;if(e.renderable.getNumberOfClippingPlanes()){var c=e.renderable.getNumberOfClippingPlanes();o=ee.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[".concat(c,"];"),"varying float clipDistancesVSOutput[".concat(c,"];")]).result,o=ee.substitute(o,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < ".concat(c,"; planeNum++)"),"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,s=ee.substitute(s,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[".concat(c,"];")]).result,s=ee.substitute(s,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < ".concat(c,"; planeNum++)"),"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}r.Vertex=o,r.Fragment=s},t.getCoincidentParameters=function(r,a){var i={factor:0,offset:0},o=a.getProperty();if(e.renderable.getResolveCoincidentTopology()||o.getEdgeVisibility()&&o.getRepresentation()===Jn.SURFACE){var s=e.lastBoundBO.getPrimitiveType();s===mt.Points||o.getRepresentation()===Jn.POINTS?i=e.renderable.getCoincidentTopologyPointOffsetParameter():s===mt.Lines||o.getRepresentation()===Jn.WIREFRAME?i=e.renderable.getCoincidentTopologyLineOffsetParameters():(s===mt.Tris||s===mt.TriStrips)&&(i=e.renderable.getCoincidentTopologyPolygonOffsetParameters()),(s===mt.TrisEdges||s===mt.TriStripsEdges)&&(i=e.renderable.getCoincidentTopologyPolygonOffsetParameters(),i.factor/=2,i.offset/=2)}var c=e._openGLRenderer.getSelector();return c&&c.getFieldAssociation()===W0.FIELD_ASSOCIATION_POINTS&&(i.offset-=2),i},t.replaceShaderPicking=function(r,a,i){var o=r.Fragment,s=r.Vertex;if(o=ee.substitute(o,"//VTK::Picking::Dec",["uniform int picking;","//VTK::Picking::Dec"]).result,!!e._openGLRenderer.getSelector()){switch((e.lastSelectionState===_t.ID_LOW24||e.lastSelectionState===_t.ID_HIGH24)&&(s=ee.substitute(s,"//VTK::Picking::Dec",[`flat out int vertexIDVSOutput;
`,`uniform int VertexIDOffset;
`]).result,s=ee.substitute(s,"//VTK::Picking::Impl",`  vertexIDVSOutput = gl_VertexID + VertexIDOffset;
`).result,o=ee.substitute(o,"//VTK::Picking::Dec",`flat in int vertexIDVSOutput;
`).result,o=ee.substitute(o,"//VTK::Picking::Impl",["  int idx = vertexIDVSOutput;","//VTK::Picking::Impl"]).result),e.lastSelectionState){case _t.ID_LOW24:o=ee.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float(idx%256)/255.0, float((idx/256)%256)/255.0, float((idx/65536)%256)/255.0, 1.0);").result;break;case _t.ID_HIGH24:o=ee.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float(idx)/255.0, 0.0, 0.0, 1.0);").result;break;default:o=ee.substitute(o,"//VTK::Picking::Dec","uniform vec3 mapperIndex;").result,o=ee.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result}r.Fragment=o,r.Vertex=s}},t.replaceShaderValues=function(r,a,i){if(t.replaceShaderColor(r,a,i),t.replaceShaderNormal(r,a,i),t.replaceShaderLight(r,a,i),t.replaceShaderTCoord(r,a,i),t.replaceShaderPicking(r,a,i),t.replaceShaderClip(r,a,i),t.replaceShaderCoincidentOffset(r,a,i),t.replaceShaderPositionVC(r,a,i),e.haveSeenDepthRequest){var o=r.Fragment;o=ee.substitute(o,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,o=ee.substitute(o,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,r.Fragment=o}},t.getNeedToRebuildShaders=function(r,a,i){var o=0,s=0,c=r.getPrimitiveType(),u=e.currentInput,f=!1,l=u.getPointData().getNormals(),p=u.getCellData().getNormals(),h=i.getProperty().getInterpolation()===lp.FLAT,v=i.getProperty().getRepresentation(),y=r.getOpenGLMode(v,c);if((y===e.context.TRIANGLES||p&&!l||!h&&l||!h&&y===e.context.LINES)&&(f=!0),i.getProperty().getLighting()&&f){o=0;for(var m=a.getLightsByReference(),x=0;x<m.length;++x){var g=m[x],d=g.getSwitch();d>0&&(s++,o===0&&(o=1)),o===1&&(s>1||g.getIntensity()!==1||!g.lightTypeIsHeadLight())&&(o=2),o<3&&g.getPositional()&&(o=3)}}var C=!1,S=e.lastBoundBO.getReferenceByName("lastLightComplexity"),T=e.lastBoundBO.getReferenceByName("lastLightCount");return(S!==o||T!==s)&&(e.lastBoundBO.set({lastLightComplexity:o},!0),e.lastBoundBO.set({lastLightCount:s},!0),C=!0),(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(C=!0),e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||r.getShaderSourceTime().getMTime()<e.renderable.getMTime()||r.getShaderSourceTime().getMTime()<e.currentInput.getMTime()||r.getShaderSourceTime().getMTime()<e.selectionStateChanged.getMTime()||C?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,!0):!1},t.invokeShaderCallbacks=function(r,a,i){var o=e.renderable.getViewSpecificProperties().ShadersCallbacks;o&&o.forEach(function(s){s.callback(s.userData,r,a,i)})},t.setMapperShaderParameters=function(r,a,i){if(r.getProgram().isUniformUsed("PrimitiveIDOffset")&&r.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),r.getProgram().isUniformUsed("VertexIDOffset")&&r.getProgram().setUniformi("VertexIDOffset",e.vertexIDOffset),r.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){var o=e.lastBoundBO.getReferenceByName("lastLightComplexity");r.getProgram().isAttributeUsed("vertexMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"vertexMC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||wn("Error setting vertexMC in shader VAO.")),r.getProgram().isAttributeUsed("normalMC")&&r.getCABO().getNormalOffset()&&o>0?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"normalMC",r.getCABO().getNormalOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||wn("Error setting normalMC in shader VAO."):r.getVAO().removeAttributeArray("normalMC"),e.renderable.getCustomShaderAttributes().forEach(function(T,w){r.getProgram().isAttributeUsed("".concat(T,"MC"))&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"".concat(T,"MC"),r.getCABO().getCustomData()[w].offset,r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getCustomData()[w].components,!1)||wn("Error setting ".concat(T,"MC in shader VAO.")))}),r.getProgram().isAttributeUsed("tcoordMC")&&r.getCABO().getTCoordOffset()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"tcoordMC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getTCoordComponents(),!1)||wn("Error setting tcoordMC in shader VAO."):r.getVAO().removeAttributeArray("tcoordMC"),r.getProgram().isAttributeUsed("scalarColor")&&r.getCABO().getColorComponents()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO().getColorBO(),"scalarColor",r.getCABO().getColorOffset(),r.getCABO().getColorBOStride(),e.context.UNSIGNED_BYTE,4,!0)||wn("Error setting scalarColor in shader VAO."):r.getVAO().removeAttributeArray("scalarColor"),r.getAttributeUpdateTime().modified()}if(e.renderable.getNumberOfClippingPlanes()){var s=e.renderable.getNumberOfClippingPlanes(),c=[],u=r.getCABO().getCoordShiftAndScaleEnabled(),f=u?r.getCABO().getInverseShiftAndScaleMatrix():null,l=f?St(e.tmpMat4,i.getMatrix()):i.getMatrix();f&&(We(l,l),Ke(l,l,f),We(l,l));for(var p=0;p<s;p++){var h=[];e.renderable.getClippingPlaneInDataCoords(l,p,h);for(var v=0;v<4;v++)c.push(h[v])}r.getProgram().setUniformi("numClipPlanes",s),r.getProgram().setUniform4fv("clipPlanes",c)}e.internalColorTexture&&r.getProgram().isUniformUsed("texture1")&&r.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());var y=e.openGLActor.getActiveTextures();if(y)for(var m=0;m<y.length;++m){var x=y[m],g=x.getTextureUnit(),d="texture".concat(g+1);r.getProgram().isUniformUsed(d)&&r.getProgram().setUniformi(d,g)}if(e.haveSeenDepthRequest&&r.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),r.getProgram().isUniformUsed("coffset")){var C=t.getCoincidentParameters(a,i);r.getProgram().setUniformf("coffset",C.offset),r.getProgram().isUniformUsed("cfactor")&&r.getProgram().setUniformf("cfactor",C.factor)}r.setMapperShaderParameters(a,i,e._openGLRenderer.getTiledSizeAndOrigin());var S=e._openGLRenderer.getSelector();r.getProgram().setUniform3fArray("mapperIndex",S?S.getPropColorValue():[0,0,0]),r.getProgram().setUniformi("picking",S?S.getCurrentPass()+1:0)},t.setLightingShaderParameters=function(r,a,i){var o=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(!(o<2)){for(var s=r.getProgram(),c=0,u=a.getLightsByReference(),f=0;f<u.length;++f){var l=u[f],p=l.getSwitch();if(p>0){var h=l.getColorByReference(),v=l.getIntensity();e.lightColor[0]=h[0]*v,e.lightColor[1]=h[1]*v,e.lightColor[2]=h[2]*v;var y=l.getDirection(),m=a.getActiveCamera().getViewMatrix(),x=ve(y);l.lightTypeIsSceneLight()&&(x[0]=m[0]*y[0]+m[1]*y[1]+m[2]*y[2],x[1]=m[4]*y[0]+m[5]*y[1]+m[6]*y[2],x[2]=m[8]*y[0]+m[9]*y[1]+m[10]*y[2],ot(x)),e.lightDirection[0]=x[0],e.lightDirection[1]=x[1],e.lightDirection[2]=x[2],e.lightHalfAngle[0]=-e.lightDirection[0],e.lightHalfAngle[1]=-e.lightDirection[1],e.lightHalfAngle[2]=-e.lightDirection[2]+1,ot(e.lightDirection),s.setUniform3fArray("lightColor".concat(c),e.lightColor),s.setUniform3fArray("lightDirectionVC".concat(c),e.lightDirection),s.setUniform3fArray("lightHalfAngleVC".concat(c),e.lightHalfAngle),c++}}if(!(o<3)){var g=a.getActiveCamera(),d=g.getViewMatrix();We(d,d),c=0;for(var C=0;C<u.length;++C){var S=u[C],T=S.getSwitch();if(T>0){var w=S.getTransformedPosition(),E=new Float64Array(3);be(E,w,d),s.setUniform3fArray("lightAttenuation".concat(c),S.getAttenuationValuesByReference()),s.setUniformi("lightPositional".concat(c),S.getPositional()),s.setUniformf("lightExponent".concat(c),S.getExponent()),s.setUniformf("lightConeAngle".concat(c),S.getConeAngle()),s.setUniform3fArray("lightPositionVC".concat(c),[E[0],E[1],E[2]]),c++}}}}};function n(r,a,i){return a.identity(i),r.reduce(function(o,s,c){return c===0?s?a.copy(o,s):a.identity(o):s?a.multiply(o,o,s):o},i)}t.setCameraShaderParameters=function(r,a,i){var o=r.getProgram(),s=e.openGLCamera.getKeyMatrices(a),c=a.getActiveCamera(),u=e.openGLCamera.getKeyMatrixTime().getMTime(),f=o.getLastCameraMTime(),l=r.getCABO().getCoordShiftAndScaleEnabled(),p=l?r.getCABO().getInverseShiftAndScaleMatrix():null,h=i.getIsIdentity(),v=h?{mcwc:null,normalMatrix:null}:e.openGLActor.getKeyMatrices();if(i.getCoordinateSystem()===V6.DISPLAY){var y=e._openGLRenderer.getTiledSizeAndOrigin();Oe(e.tmpMat4),e.tmpMat4[0]=2/y.usize,e.tmpMat4[12]=-1,e.tmpMat4[5]=2/y.vsize,e.tmpMat4[13]=-1,Ke(e.tmpMat4,e.tmpMat4,p),o.setUniformMatrix("MCPCMatrix",e.tmpMat4)}else o.setUniformMatrix("MCPCMatrix",n([s.wcpc,v.mcwc,p],ya,e.tmpMat4));o.isUniformUsed("MCVCMatrix")&&o.setUniformMatrix("MCVCMatrix",n([s.wcvc,v.mcwc,p],ya,e.tmpMat4)),o.isUniformUsed("normalMatrix")&&o.setUniformMatrix3x3("normalMatrix",n([s.normalMatrix,v.normalMatrix],k2,e.tmpMat3)),f!==u&&(o.isUniformUsed("cameraParallel")&&o.setUniformi("cameraParallel",c.getParallelProjection()),o.setLastCameraMTime(u)),h||o.setLastCameraMTime(0)},t.setPropertyShaderParameters=function(r,a,i){var o=r.getProgram(),s=i.getProperty(),c=s.getOpacity(),u=e.drawingEdges?s.getEdgeColorByReference():s.getAmbientColorByReference(),f=e.drawingEdges?s.getEdgeColorByReference():s.getDiffuseColorByReference(),l=e.drawingEdges?1:s.getAmbient(),p=e.drawingEdges?0:s.getDiffuse(),h=e.drawingEdges?0:s.getSpecular(),v=s.getSpecularPower();o.setUniformf("opacityUniform",c),o.setUniform3fArray("ambientColorUniform",u),o.setUniform3fArray("diffuseColorUniform",f),o.setUniformf("ambient",l),o.setUniformf("diffuse",p);var y=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(!(y<1)){var m=s.getSpecularColorByReference();if(o.setUniform3fArray("specularColorUniform",m),o.setUniformf("specularPowerUniform",v),o.setUniformf("specular",h),o.isUniformUsed("ambientIntensityBF")){if(s=i.getBackfaceProperty(),c=s.getOpacity(),u=s.getAmbientColor(),l=s.getAmbient(),f=s.getDiffuseColor(),p=s.getDiffuse(),m=s.getSpecularColor(),h=s.getSpecular(),o.setUniformf("ambientIntensityBF",l),o.setUniformf("diffuseIntensityBF",p),o.setUniformf("opacityUniformBF",c),o.setUniform3fArray("ambientColorUniformBF",u),o.setUniform3fArray("diffuseColorUniformBF",f),y<1)return;o.setUniformf("specularIntensityBF",h),o.setUniform3fArray("specularColorUniformBF",m),o.setUniformf("specularPowerUniformBF",v)}}},t.updateMaximumPointCellIds=function(r,a){var i,o,s,c,u=e._openGLRenderer.getSelector();if(u){if((i=e.selectionWebGLIdsToVTKIds)!==null&&i!==void 0&&(o=i.points)!==null&&o!==void 0&&o.length){var f=e.selectionWebGLIdsToVTKIds.points.length;u.setMaximumPointId(f-1)}if((s=e.selectionWebGLIdsToVTKIds)!==null&&s!==void 0&&(c=s.cells)!==null&&c!==void 0&&c.length){var l=e.selectionWebGLIdsToVTKIds.cells.length;u.setMaximumCellId(l-1)}var p=u.getFieldAssociation();p===W0.FIELD_ASSOCIATION_POINTS&&(e.pointPicking=!0)}},t.renderPieceStart=function(r,a){e.primitiveIDOffset=0,e.vertexIDOffset=0;var i=B6(e._openGLRenderer);if(e.lastSelectionState!==i&&(e.selectionStateChanged.modified(),e.lastSelectionState=i),e._openGLRenderer.getSelector())switch(i){default:e._openGLRenderer.getSelector().renderProp(a)}t.updateBufferObjects(r,a),e.renderable.getColorTextureMap()&&e.internalColorTexture.activate(),e.lastBoundBO=null},t.renderPieceDraw=function(r,a){for(var i=a.getProperty().getRepresentation(),o=a.getProperty().getEdgeVisibility()&&i===Jn.SURFACE,s=e._openGLRenderer.getSelector(),c=s&&s.getFieldAssociation()===W0.FIELD_ASSOCIATION_POINTS&&(e.lastSelectionState===_t.ID_LOW24||e.lastSelectionState===_t.ID_HIGH24),u=mt.Start;u<mt.End;u++){e.primitives[u].setPointPicking(c);var f=e.primitives[u].getCABO();f.getElementCount()&&(e.drawingEdges=o&&(u===mt.TrisEdges||u===mt.TriStripsEdges),(!e.drawingEdges||!(e.renderDepth||e.lastSelectionState>=0))&&(e.lastBoundBO=e.primitives[u],e.primitiveIDOffset+=e.primitives[u].drawArrays(r,a,i,t),e.vertexIDOffset+=e.primitives[u].getCABO().getElementCount()))}},t.renderPieceFinish=function(r,a){e.LastBoundBO&&e.LastBoundBO.getVAO().release(),e.renderable.getColorTextureMap()&&e.internalColorTexture.deactivate()},t.renderPiece=function(r,a){if(t.invokeEvent(F6),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent(A6),!e.currentInput){wn("No input!");return}if(!(!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues())){var i=e.context,o=a.getProperty().getBackfaceCulling(),s=a.getProperty().getFrontfaceCulling();!o&&!s?e._openGLRenderWindow.disableCullFace():s?(e._openGLRenderWindow.enableCullFace(),i.cullFace(i.FRONT)):(e._openGLRenderWindow.enableCullFace(),i.cullFace(i.BACK)),t.renderPieceStart(r,a),t.renderPieceDraw(r,a),t.renderPieceFinish(r,a)}},t.computeBounds=function(r,a){if(!t.getInput()){Wn(e.bounds);return}e.bounds=t.getInput().getBounds()},t.updateBufferObjects=function(r,a){t.getNeedToRebuildBufferObjects(r,a)&&t.buildBufferObjects(r,a)},t.getNeedToRebuildBufferObjects=function(r,a){var i=e.VBOBuildTime.getMTime();return i<t.getMTime()||i<e.renderable.getMTime()||i<a.getMTime()||i<e.currentInput.getMTime()},t.buildBufferObjects=function(r,a){var i=e.currentInput;if(i!==null){e.renderable.mapScalars(i,1);var o=e.renderable.getColorMapColors();e.haveCellScalars=!1;var s=e.renderable.getScalarMode();e.renderable.getScalarVisibility()&&(s===xo.USE_CELL_DATA||s===xo.USE_CELL_FIELD_DATA||s===xo.USE_FIELD_DATA||!i.getPointData().getScalars())&&s!==xo.USE_POINT_FIELD_DATA&&o&&(e.haveCellScalars=!0);var c=a.getProperty().getInterpolation()!==lp.FLAT?i.getPointData().getNormals():null;c===null&&i.getCellData().getNormals()&&(e.haveCellNormals=!0,c=i.getCellData().getNormals());var u=a.getProperty().getRepresentation(),f=i.getPointData().getTCoords();if(e.openGLActor.getActiveTextures()||(f=null),e.renderable.getColorCoordinates()){f=e.renderable.getColorCoordinates(),e.internalColorTexture||(e.internalColorTexture=Fe.newInstance({resizable:!0}));var l=e.internalColorTexture;l.setMinificationFilter(pp.NEAREST),l.setMagnificationFilter(pp.NEAREST),l.setWrapS(hp.CLAMP_TO_EDGE),l.setWrapT(hp.CLAMP_TO_EDGE),l.setOpenGLRenderWindow(e._openGLRenderWindow);var p=e.renderable.getColorTextureMap(),h=p.getExtent(),v=p.getPointData().getScalars();l.create2DFromRaw(h[1]-h[0]+1,h[3]-h[2]+1,v.getNumberOfComponents(),v.getDataType(),v.getData()),l.activate(),l.sendParameters(),l.deactivate()}var y="".concat(i.getMTime(),"A").concat(u,"B").concat(i.getMTime())+"C".concat(c?c.getMTime():1,"D").concat(o?o.getMTime():1)+"E".concat(a.getProperty().getEdgeVisibility())+"F".concat(f?f.getMTime():1);if(e.VBOBuildString!==y){var m=i.getPoints(),x={points:m,normals:c,tcoords:f,colors:o,cellOffset:0,vertexOffset:0,haveCellScalars:e.haveCellScalars,haveCellNormals:e.haveCellNormals,customAttributes:e.renderable.getCustomShaderAttributes().map(function(S){return i.getPointData().getArrayByName(S)})};e.renderable.getPopulateSelectionSettings()&&(e.selectionWebGLIdsToVTKIds={points:null,cells:null});for(var g=[{inRep:"verts",cells:i.getVerts()},{inRep:"lines",cells:i.getLines()},{inRep:"polys",cells:i.getPolys()},{inRep:"strips",cells:i.getStrips()},{inRep:"polys",cells:i.getPolys()},{inRep:"strips",cells:i.getStrips()}],d=a.getProperty().getEdgeVisibility()&&u===Jn.SURFACE,C=mt.Start;C<mt.End;C++)C!==mt.TrisEdges&&C!==mt.TriStripsEdges?(x.cellOffset+=e.primitives[C].getCABO().createVBO(g[C].cells,g[C].inRep,u,x,e.selectionWebGLIdsToVTKIds),x.vertexOffset+=e.primitives[C].getCABO().getElementCount()):d?e.primitives[C].getCABO().createVBO(g[C].cells,g[C].inRep,Jn.WIREFRAME,fp(fp({},x),{},{tcoords:null,colors:null,haveCellScalars:!1,haveCellNormals:!1})):e.primitives[C].releaseGraphicsResources();e.renderable.getPopulateSelectionSettings()&&(e.renderable.setSelectionWebGLIdsToVTKIds(e.selectionWebGLIdsToVTKIds),t.updateMaximumPointCellIds()),e.VBOBuildTime.modified(),e.VBOBuildString=y}}}}var G6={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null,tmpMat4:null,ambientColor:[],diffuseColor:[],specularColor:[],lightColor:[],lightHalfAngle:[],lightDirection:[],lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastSelectionState:_t.MIN_KNOWN_PASS-1,selectionStateChanged:null,selectionWebGLIdsToVTKIds:null,pointPicking:!1};function vp(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,G6,n),xt.extend(t,e,n),Dr.implementReplaceShaderCoincidentOffset(t,e,n),Dr.implementBuildShadersWithReplacements(t,e,n),e.primitives=[],e.primTypes=mt,e.tmpMat3=sr(new Float64Array(9)),e.tmpMat4=Oe(new Float64Array(16));for(var r=mt.Start;r<mt.End;r++)e.primitives[r]=Ht.newInstance(),e.primitives[r].setPrimitiveType(r),e.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);dt(t,e,["context"]),e.VBOBuildTime={},ht(e.VBOBuildTime,{mtime:0}),e.selectionStateChanged={},ht(e.selectionStateChanged,{mtime:0}),U6(t,e)}var gp=Je(vp,"vtkOpenGLPolyDataMapper"),Co={newInstance:gp,extend:vp};ft("vtkMapper",gp);var P6=Br.ColorMode,En=Br.ScalarMode,H0=Br.GetArray;function I6(t,e){e.classHierarchy.push("vtkMapper2D"),t.createDefaultLookupTable=function(){e.lookupTable=Hn.newInstance()},t.getColorModeAsString=function(){return B.enumToString(P6,e.colorMode)},t.setColorModeToDefault=function(){return t.setColorMode(0)},t.setColorModeToMapScalars=function(){return t.setColorMode(1)},t.setColorModeToDirectScalars=function(){return t.setColorMode(2)},t.getScalarModeAsString=function(){return B.enumToString(En,e.scalarMode)},t.setScalarModeToDefault=function(){return t.setScalarMode(0)},t.setScalarModeToUsePointData=function(){return t.setScalarMode(1)},t.setScalarModeToUseCellData=function(){return t.setScalarMode(2)},t.setScalarModeToUsePointFieldData=function(){return t.setScalarMode(3)},t.setScalarModeToUseCellFieldData=function(){return t.setScalarMode(4)},t.setScalarModeToUseFieldData=function(){return t.setScalarMode(5)},t.getAbstractScalars=function(n,r,a,i,o){if(!n||!e.scalarVisibility)return{scalars:null,cellFLag:!1};var s=null,c=!1;if(r===En.DEFAULT)s=n.getPointData().getScalars(),s||(s=n.getCellData().getScalars(),c=!0);else if(r===En.USE_POINT_DATA)s=n.getPointData().getScalars();else if(r===En.USE_CELL_DATA)s=n.getCellData().getScalars(),c=!0;else if(r===En.USE_POINT_FIELD_DATA){var u=n.getPointData();a===H0.BY_ID?s=u.getArrayByIndex(i):s=u.getArrayByName(o)}else if(r===En.USE_CELL_FIELD_DATA){var f=n.getCellData();c=!0,a===H0.BY_ID?s=f.getArrayByIndex(i):s=f.getArrayByName(o)}else if(r===En.USE_FIELD_DATA){var l=n.getFieldData();a===H0.BY_ID?s=l.getArrayByIndex(i):s=l.getArrayByName(o)}return{scalars:s,cellFlag:c}},t.getLookupTable=function(){return e.lookupTable||t.createDefaultLookupTable(),e.lookupTable},t.getMTime=function(){var n=e.mtime;if(e.lookupTable!==null){var r=e.lookupTable.getMTime();n=r>n?r:n}return n},t.mapScalars=function(n,r){var a=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;if(!a){e.colorMapColors=null;return}var i="".concat(t.getMTime()).concat(a.getMTime()).concat(r);if(e.colorBuildString!==i){e.useLookupTableScalarRange||t.getLookupTable().setRange(e.scalarRange[0],e.scalarRange[1]);var o=t.getLookupTable();o&&(o.build(),e.colorMapColors=o.mapScalars(a,e.colorMode,e.fieldDataTupleId)),e.colorBuildString="".concat(t.getMTime()).concat(a.getMTime()).concat(r)}}}var j6={static:!1,lookupTable:null,scalarVisibility:!1,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,transformCoordinate:null,viewSpecificProperties:null,customShaderAttributes:[]};function dp(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,j6,n),C0.extend(t,e,n),B.get(t,e,["colorMapColors"]),B.setGet(t,e,["arrayAccessMode","colorByArrayName","colorMode","lookupTable","renderTime","scalarMode","scalarVisibility","static","transformCoordinate","useLookupTableScalarRange","viewSpecificProperties","customShaderAttributes"]),B.setGetArray(t,e,["scalarRange"],2),e.viewSpecificProperties||(e.viewSpecificProperties={}),I6(t,e)}var z6=B.newInstance(dp,"vtkMapper2D"),W6={newInstance:z6,extend:dp},H6=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

uniform int PrimitiveIDOffset;

// Texture coordinates
//VTK::TCoord::Dec

// Scalar coloring
//VTK::Color::Dec

// Depth Peeling
//VTK::DepthPeeling::Dec

// picking support
//VTK::Picking::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Color::Impl
  //VTK::TCoord::Impl

  //VTK::DepthPeeling::Impl
  //VTK::Picking::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }
}
`,$6=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

// all variables that represent positions or directions have a suffix
// indicating the coordinate system they are in. The possible values are
// MC - Model Coordinates
// WC - WC world coordinates
// VC - View Coordinates
// DC - Display Coordinates

in vec4 vertexWC;

// frag position in VC
//VTK::PositionVC::Dec

// material property values
//VTK::Color::Dec

// Texture coordinates
//VTK::TCoord::Dec

// Apple Bug
//VTK::PrimID::Dec

uniform mat4 WCVCMatrix;  // World to view matrix

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  gl_Position = WCVCMatrix*vertexWC;

  //VTK::TCoord::Impl

  //VTK::Color::Impl

  //VTK::PositionVC::Impl
}
`,K6={BACKGROUND:0,FOREGROUND:1},er=Ht.primTypes,So=W6.ScalarMode,To=Me,X6={type:"StartEvent"},q6={type:"EndEvent"};function Y6(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper2D"),t.buildPass=function(r){r&&(e.openGLActor2D=t.getFirstAncestorOfType("vtkOpenGLActor2D"),e._openGLRenderer=e.openGLActor2D.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()))},t.overlayPass=function(r){r&&t.render()},t.getShaderTemplate=function(r,a,i){r.Vertex=$6,r.Fragment=H6,r.Geometry=""},t.render=function(){var r=e._openGLRenderWindow.getContext();if(e.context!==r){e.context=r;for(var a=er.Start;a<er.End;a++)e.primitives[a].setOpenGLRenderWindow(e._openGLRenderWindow)}var i=e.openGLActor2D.getRenderable(),o=e._openGLRenderer.getRenderable();t.renderPiece(o,i)},t.renderPiece=function(r,a){if(t.invokeEvent(X6),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent(q6),!e.currentInput){To("No input!");return}!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues()||(t.renderPieceStart(r,a),t.renderPieceDraw(r,a),t.renderPieceFinish(r,a))},t.renderPieceStart=function(r,a){if(e.primitiveIDOffset=0,e._openGLRenderer.getSelector())switch(e._openGLRenderer.getSelector().getCurrentPass()){default:e._openGLRenderer.getSelector().renderProp(a)}t.updateBufferObjects(r,a),e.lastBoundBO=null},t.getNeedToRebuildShaders=function(r,a,i){return r.getShaderSourceTime().getMTime()<e.renderable.getMTime()||r.getShaderSourceTime().getMTime()<e.currentInput.getMTime()},t.updateBufferObjects=function(r,a){t.getNeedToRebuildBufferObjects(r,a)&&t.buildBufferObjects(r,a)},t.getNeedToRebuildBufferObjects=function(r,a){var i=e.VBOBuildTime.getMTime();return!!(i<t.getMTime()||i<e._openGLRenderWindow.getMTime()||i<e.renderable.getMTime()||i<a.getMTime()||i<e.currentInput.getMTime()||e.renderable.getTransformCoordinate()&&i<r.getMTime())},t.buildBufferObjects=function(r,a){var i=e.currentInput;if(i!==null){e.renderable.mapScalars(i,a.getProperty().getOpacity());var o=e.renderable.getColorMapColors();e.haveCellScalars=!1;var s=e.renderable.getScalarMode();e.renderable.getScalarVisibility()&&(s===So.USE_CELL_DATA||s===So.USE_CELL_FIELD_DATA||s===So.USE_FIELD_DATA||!i.getPointData().getScalars())&&s!==So.USE_POINT_FIELD_DATA&&o&&(e.haveCellScalars=!0);var c=a.getProperty().getRepresentation(),u=i.getPointData().getTCoords();e.openGLActor2D.getActiveTextures()||(u=null);var f=e.renderable.getTransformCoordinate(),l=r.getRenderWindow().getViews()[0],p=l.getViewportSize(r),h="".concat(i.getMTime(),"A").concat(c,"B").concat(i.getMTime())+"C".concat(o?o.getMTime():1)+"D".concat(u?u.getMTime():1)+"E".concat(f?r.getMTime():1)+"F".concat(p);if(e.VBOBuildString!==h){var v=i.getPoints();if(f){var y=Sr.newInstance(),m=v.getNumberOfPoints();y.setNumberOfPoints(m);for(var x=[],g=0;g<m;++g){v.getPoint(g,x),f.setValue(x);var d=f.getComputedDoubleViewportValue(r);y.setPoint(g,d[0],d[1],0)}v=y}var C={points:v,tcoords:u,colors:o,cellOffset:0,haveCellScalars:e.haveCellSCalars,customAttributes:e.renderable.getCustomShaderAttributes().map(function(S){return i.getPointData().getArrayByName(S)})};C.cellOffset+=e.primitives[er.Points].getCABO().createVBO(i.getVerts(),"verts",c,C),C.cellOffset+=e.primitives[er.Lines].getCABO().createVBO(i.getLines(),"lines",c,C),C.cellOffset+=e.primitives[er.Tris].getCABO().createVBO(i.getPolys(),"polys",c,C),C.cellOffset+=e.primitives[er.TriStrips].getCABO().createVBO(i.getStrips(),"strips",c,C),e.VBOBuildTime.modified(),e.VBOBuildString=h}}},t.renderPieceDraw=function(r,a){var i=a.getProperty().getRepresentation(),o=e.context;o.depthMask(!0);for(var s=er.Start;s<er.End;s++){var c=e.primitives[s].getCABO();c.getElementCount()&&(e.lastBoundBO=e.primitives[s],e.primitiveIDOffset+=e.primitives[s].drawArrays(r,a,i,t))}},t.renderPieceFinish=function(r,a){e.lastBoundBO&&e.lastBoundBO.getVAO().release()},t.replaceShaderValues=function(r,a,i){t.replaceShaderColor(r,a,i),t.replaceShaderTCoord(r,a,i),t.replaceShaderPicking(r,a,i),t.replaceShaderPositionVC(r,a,i)},t.replaceShaderColor=function(r,a,i){var o=r.Vertex,s=r.Geometry,c=r.Fragment;e.haveCellScalars&&(c=ee.substitute(c,"//VTK::Color::Dec",["uniform samplerBuffer texture1;"]).result,c=ee.substitute(c,"//VTK::Color::Impl",["gl_FragData[0] = texelFetchBuffer(texture1, gl_PrimitiveID + PrimitiveIDOffset);"]).result),e.lastBoundBO.getCABO().getColorComponents()!==0?(o=ee.substitute(o,"//VTK::Color::Dec",["in vec4 diffuseColor;","out vec4 fcolorVSOutput;"]).result,o=ee.substitute(o,"//VTK::Color::Impl",["fcolorVSOutput = diffuseColor;"]).result,s=ee.substitute(s,"//VTK::Color::Dec",[`in vec4 fcolorVSOutput[];
`,"out vec4 fcolorGSOutput;"]).result,s=ee.substitute(s,"//VTK::Color::Impl",["fcolorGSOutput = fcolorVSOutput[i];"]).result,c=ee.substitute(c,"//VTK::Color::Dec",["in vec4 fcolorVSOutput;"]).result,c=ee.substitute(c,"//VTK::Color::Impl",["gl_FragData[0] = fcolorVSOutput;"]).result):(c=ee.substitute(c,"//VTK::Color::Dec",["uniform vec4 diffuseColor;"]).result,c=ee.substitute(c,"//VTK::Color::Impl",["gl_FragData[0] = diffuseColor;"]).result),r.Vertex=o,r.Geometry=s,r.Fragment=c},t.replaceShaderTCoord=function(r,a,i){if(e.lastBoundBO.getCABO().getTCoordOffset()){var o=r.Vertex,s=r.Geometry,c=r.Fragment,u=e.lastBoundBO.getCABO().getTCoordComponents();u===1?(o=ee.substitute(o,"//VTK::TCoord::Dec",["in float tcoordMC;","out float tcoordVCVSOutput;"]).result,o=ee.substitute(o,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,s=ee.substitute(s,"//VTK::TCoord::Dec",[`in float tcoordVCVSOutput[];
`,"out float tcoordVCGSOutput;"]).result,s=ee.substitute(s,["//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,c=ee.substitute(c,"//VTK::TCoord::Dec",["in float tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,c=ee.substitute(c,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, vec2(tcoordVCVSOutput,0));"]).result):u===2&&(o=ee.substitute(o,"//VTK::TCoord::Dec",["in vec2 tcoordMC;","out vec2 tcoordVCVSOutput;"]).result,o=ee.substitute(o,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,s=ee.substitute(s,"//VTK::TCoord::Dec",[`in vec2 tcoordVCVSOutput[];
`,"out vec2 tcoordVCGSOutput;"]).result,s=ee.substitute(s,"//VTK::TCoord::Impl",["tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,c=ee.substitute(c,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,c=ee.substitute(c,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, tcoordVCVSOutput.st);"]).result),e.haveCellScalars&&(s=ee.substitute(s,"//VTK::PrimID::Impl",["gl_PrimitiveID = gl_PrimitiveIDIn;"]).result),r.Vertex=o,r.Geometry=s,r.Fragment=c}},t.replaceShaderPicking=function(r,a,i){var o=r.Fragment;o=ee.substitute(o,"//VTK::Picking::Dec",["uniform vec3 mapperIndex;","uniform int picking;"]).result,o=ee.substitute(o,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result,r.Fragment=o},t.replaceShaderPositionVC=function(r,a,i){e.lastBoundBO.replaceShaderPositionVC(r,a,i)},t.invokeShaderCallbacks=function(r,a,i){var o=e.renderable.getViewSpecificProperties().ShadersCallbacks;o&&o.forEach(function(s){s.callback(s.userData,r,a,i)})},t.setMapperShaderParameters=function(r,a,i){if(r.getProgram().isUniformUsed("PrimitiveIDOffset")&&r.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),r.getProgram().isAttributeUsed("vertexWC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"vertexWC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||To("Error setting vertexWC in shader VAO.")),r.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){e.renderable.getCustomShaderAttributes().forEach(function(p,h){r.getProgram().isAttributeUsed("".concat(p,"MC"))&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"".concat(p,"MC"),r.getCABO().getCustomData()[h].offset,r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getCustomData()[h].components,!1)||To("Error setting ".concat(p,"MC in shader VAO.")))}),r.getProgram().isAttributeUsed("tcoordMC")&&r.getCABO().getTCoordOffset()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"tcoordMC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getTCoordComponents(),!1)||To("Error setting tcoordMC in shader VAO."):r.getVAO().removeAttributeArray("tcoordMC"),e.internalColorTexture&&r.getProgram().isUniformUsed("texture1")&&r.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());var o=e.openGLActor2D.getActiveTextures();if(o)for(var s=0;s<o.length;++s){var c=o[s],u=c.getTextureUnit(),f="texture".concat(u+1);r.getProgram().isUniformUsed(f)&&r.getProgram().setUniformi(f,u)}r.setMapperShaderParameters(a,i,e._openGLRenderer.getTiledSizeAndOrigin());var l=e._openGLRenderer.getSelector();r.getProgram().setUniform3fArray("mapperIndex",l?l.getPropColorValue():[0,0,0]),r.getProgram().setUniformi("picking",l?l.getCurrentPass()+1:0)}},t.setPropertyShaderParameters=function(r,a,i){var o=e.renderable.getColorMapColors();if(!o||o.getNumberOfComponents()===0){var s=r.getProgram(),c=i.getProperty(),u=c.getOpacity(),f=c.getColor(),l=[f[0],f[1],f[2],u];s.setUniform4f("diffuseColor",l)}},t.setLightingShaderParameters=function(r,a,i){};function n(r,a,i){return a.identity(i),r.reduce(function(o,s,c){return c===0?s?a.copy(o,s):a.identity(o):s?a.multiply(o,o,s):o},i)}t.setCameraShaderParameters=function(r,a,i){var o=r.getProgram(),s=r.getCABO().getCoordShiftAndScaleEnabled(),c=s?r.getCABO().getInverseShiftAndScaleMatrix():null,u=a.getRenderWindow().getViews()[0],f=u.getViewportSize(a),l=a.getViewport(),p=i.getActualPositionCoordinate().getComputedDoubleViewportValue(a),h=[0,0,1,1],v=[0,0,1,1];if(v[0]=l[0]>=h[0]?l[0]:h[0],v[1]=l[1]>=h[1]?l[1]:h[1],v[2]=l[2]<=h[2]?l[2]:h[2],v[3]=l[3]<=h[3]?l[3]:h[3],!(v[0]>=v[2])&&!(v[1]>=v[3])){f[0]=Va(f[0]*(v[2]-v[0])/(l[2]-l[0])),f[1]=Va(f[1]*(v[3]-v[1])/(l[3]-l[1]));var y=e._openGLRenderer.getParent().getSize(),m=Va(p[0]-(v[0]-l[0])*y[0]),x=Va(p[1]-(v[1]-l[1])*y[1]),g=-m,d=-m+f[0],C=-x,S=-x+f[1];g===d&&(d=g+1),C===S&&(S=C+1);var T=Oe(new Float64Array(16));T[0]=2/(d-g),T[1*4+1]=2/(S-C),T[0*4+3]=-1*(d+g)/(d-g),T[1*4+3]=-1*(S+C)/(S-C),T[2*4+2]=0,T[2*4+3]=i.getProperty().getDisplayLocation()===K6.FOREGROUND?-1:1,T[3*4+3]=1,We(T,T),o.setUniformMatrix("WCVCMatrix",n([T,c],ya,e.tmpMat4))}}}var J6={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null};function Z6(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,J6,n),xt.extend(t,e,n),Dr.implementReplaceShaderCoincidentOffset(t,e,n),Dr.implementBuildShadersWithReplacements(t,e,n),e.primitives=[],e.primTypes=er,e.tmpMat4=Oe(new Float64Array(16));for(var r=er.Start;r<er.End;r++)e.primitives[r]=Ht.newInstance(),e.primitives[r].setPrimitiveType(r),e.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);dt(t,e,["context"]),e.VBOBuildTime={},ht(e.VBOBuildTime,{mtime:0}),Y6(t,e)}var Q6=Je(Z6,"vtkOpenGLPolyDataMapper2D");ft("vtkMapper2D",Q6);function yp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Or(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yp(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yp(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var e7=co.VectorMode;function $0(t,e){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor,t.font="".concat(e.fontStyle," ").concat(e.fontSize,"px ").concat(e.fontFamily)}function mp(t,e){return function(n){var r=n.getLastSize(),a=Math.pow(r[0]/700,.8),i=Math.pow(r[1]/700,.8),o=Math.min(a,i),s=n.getAxisTextStyle(),c=n.getTickTextStyle();Object.assign(s,e.axisTextStyle),Object.assign(c,e.tickTextStyle),s.fontSize=Math.max(24*o,12),n.getLastAspectRatio()>1?c.fontSize=Math.max(20*o,10):c.fontSize=Math.max(16*o,10);var u=n.updateTextureAtlas();n.setTopTitle(!1);var f=n.getBoxSizeByReference();if(n.getLastAspectRatio()>1)n.setTickLabelPixelOffset(.3*c.fontSize),u.titleWidth<=u.tickWidth+n.getTickLabelPixelOffset()+.8*c.fontSize?(n.setTopTitle(!0),n.setAxisTitlePixelOffset(.2*c.fontSize),f[0]=2*(u.tickWidth+n.getTickLabelPixelOffset()+.8*c.fontSize)/r[0],n.setBoxPosition([.98-f[0],-.92])):(n.setAxisTitlePixelOffset(.2*c.fontSize),f[0]=2*(u.titleHeight+n.getAxisTitlePixelOffset()+u.tickWidth+n.getTickLabelPixelOffset()+.8*c.fontSize)/r[0],n.setBoxPosition([.99-f[0],-.92])),f[1]=Math.max(1.2,Math.min(1.84/i,1.84));else{n.setAxisTitlePixelOffset(1.2*c.fontSize),n.setTickLabelPixelOffset(.1*c.fontSize);var l=2*(.8*c.fontSize+u.titleHeight+n.getAxisTitlePixelOffset())/r[1],p=2*u.tickWidth/r[0];f[0]=Math.min(1.9,Math.max(1.4,1.4*p*(n.getTicks().length+3))),f[1]=l,n.setBoxPosition([-.5*f[0],-.97])}n.recomputeBarSegments(u)}}function xp(t,e){return function(n){var r=n.getLastTickBounds(),a=Gs().domain([r[0],r[1]]),i=a.ticks(5),o=a.tickFormat(5);n.setTicks(i),n.setTickStrings(i.map(o))}}function t7(t,e){e.classHierarchy.push("vtkScalarBarActorHelper"),t.setRenderable=function(a){e.renderable!==a&&(e.renderable=a,e.barActor.setProperty(a.getProperty()),e.barActor.setParentProp(a),e.barActor.setCoordinateSystemToDisplay(),e.tmActor.setProperty(a.getProperty()),e.tmActor.setParentProp(a),e.tmActor.setCoordinateSystemToDisplay(),e.generateTicks=a.generateTicks,e.axisTextStyle=Or({},a.getAxisTextStyle()),e.tickTextStyle=Or({},a.getTickTextStyle()),t.modified())},t.updateAPISpecificData=function(a,i,o){(e.lastSize[0]!==a[0]||e.lastSize[1]!==a[1])&&(e.lastSize[0]=a[0],e.lastSize[1]=a[1],e.lastAspectRatio=a[0]/a[1],e.forceUpdate=!0);var s=e.renderable.getScalarsToColors();if(!(!s||!e.renderable.getVisibility())&&(e.barMapper.setLookupTable(s),e.camera=i,e.renderWindow=o,e.forceUpdate||Math.max(s.getMTime(),t.getMTime(),e.renderable.getMTime())>e.lastRebuildTime.getMTime())){var c=s.getMappingRange();if(e.lastTickBounds=ve(c),e.renderable.getGenerateTicks()(t),e.renderable.getAutomated())e.renderable.getAutoLayout()(t);else{e.axisTextStyle=Or({},e.renderable.getAxisTextStyle()),e.tickTextStyle=Or({},e.renderable.getTickTextStyle()),e.barPosition=ve(e.renderable.getBarPosition()),e.barSize=ve(e.renderable.getBarSize()),e.boxPosition=ve(e.renderable.getBoxPosition()),e.boxSize=ve(e.renderable.getBoxSize()),e.axisTitlePixelOffset=e.renderable.getAxisTitlePixelOffset(),e.tickLabelPixelOffset=e.renderable.getTickLabelPixelOffset();var u=t.updateTextureAtlas();t.recomputeBarSegments(u)}t.updatePolyDataForLabels(),t.updatePolyDataForBarSegments(),e.lastRebuildTime.modified(),e.forceUpdate=!1}},t.updateTextureAtlas=function(){e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left";var a={},i=new Map,o=0,s=1;$0(e.tmContext,e.axisTextStyle);var c=e.tmContext.measureText(e.renderable.getAxisLabel()),u={height:c.actualBoundingBoxAscent+2,startingHeight:s,width:c.width+2,textStyle:e.axisTextStyle};i.set(e.renderable.getAxisLabel(),u),s+=u.height,o=u.width,a.titleWidth=u.width,a.titleHeight=u.height,a.tickWidth=0,a.tickHeight=0,$0(e.tmContext,e.tickTextStyle);for(var f=[].concat(ve(t.getTickStrings()),["NaN","Below","Above"]),l=0;l<f.length;l++)i.has(f[l])||(c=e.tmContext.measureText(f[l]),u={height:c.actualBoundingBoxAscent+2,startingHeight:s,width:c.width+2,textStyle:e.tickTextStyle},i.set(f[l],u),s+=u.height,o<u.width&&(o=u.width),a.tickWidth<u.width&&(a.tickWidth=u.width),a.tickHeight<u.height&&(a.tickHeight=u.height));return o=zt(o),s=zt(s),i.forEach(function(p){p.tcoords=[0,(s-p.startingHeight-p.height)/s,p.width/o,(s-p.startingHeight-p.height)/s,p.width/o,(s-p.startingHeight)/s,0,(s-p.startingHeight)/s]}),e.tmCanvas.width=o,e.tmCanvas.height=s,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,o,s),i.forEach(function(p,h){$0(e.tmContext,p.textStyle),e.tmContext.fillText(h,1,p.startingHeight+p.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified(),e._tmAtlas=i,a},t.computeBarSize=function(a){e.vertical=e.boxSize[1]>e.boxSize[0];var i=2*a.tickHeight/e.lastSize[1],o=[1,1];if(e.vertical){var s=2*(a.tickWidth+e.tickLabelPixelOffset)/e.lastSize[0];if(e.topTitle){var c=2*(a.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0]-s,e.barSize[1]=e.boxSize[1]-c}else{var u=2*(a.titleHeight+e.axisTitlePixelOffset)/e.lastSize[0];e.barSize[0]=e.boxSize[0]-u-s,e.barSize[1]=e.boxSize[1]}e.barPosition[0]=e.boxPosition[0]+s,e.barPosition[1]=e.boxPosition[1],o[1]=i}else{var f=(2*a.tickWidth-8)/e.lastSize[0],l=2*(a.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0],e.barPosition[0]=e.boxPosition[0],e.barSize[1]=e.boxSize[1]-l,e.barPosition[1]=e.boxPosition[1],o[0]=f}return o},t.recomputeBarSegments=function(a){var i,o,s,c,u=t.computeBarSize(a);e.barSegments=[];var f=[0,0],l=e.vertical?1:0,p=e.vertical?.01:.02;function h(m,x){e.barSegments.push({corners:[[].concat(f),[f[0]+u[0],f[1]],[f[0]+u[0],f[1]+u[1]],[f[0],f[1]+u[1]]],scalars:x,title:m}),f[l]+=u[l]+p}e.renderable.getDrawNanAnnotation()&&e.renderable.getScalarsToColors().getNanColor()&&h("NaN",[NaN,NaN,NaN,NaN]),e.renderable.getDrawBelowRangeSwatch()&&(i=(o=e.renderable.getScalarsToColors()).getUseBelowRangeColor)!==null&&i!==void 0&&i.call(o)&&h("Below",[-.1,-.1,-.1,-.1]);var v=(s=(c=e.renderable.getScalarsToColors()).getUseAboveRangeColor)===null||s===void 0?void 0:s.call(c);f[l]+=p;var y=u[l];u[l]=v?1-2*p-u[l]-f[l]:1-p-f[l],h("ticks",e.vertical?[0,0,.995,.995]:[0,.995,.995,0]),e.renderable.getDrawAboveRangeSwatch()&&v&&(u[l]=y,f[l]+=p,h("Above",[1.1,1.1,1.1,1.1]))};var n=new Float64Array(3);t.createPolyDataForOneLabel=function(a,i,o,s,c,u){var f=e._tmAtlas.get(a);if(f){var l=u.ptIdx,p=u.cellIdx;n[0]=(.5*i[0]+.5)*e.lastSize[0],n[1]=(.5*i[1]+.5)*e.lastSize[1],n[2]=i[2],n[0]+=c[0],n[1]+=c[1];var h=[],v=s==="vertical"?[1,0]:[0,1];s==="vertical"?(h[0]=f.width,h[1]=-f.height,o[0]==="middle"?n[1]-=f.width/2:o[0]==="right"&&(n[1]-=f.width),o[1]==="middle"?n[0]+=f.height/2:o[1]==="top"&&(n[0]+=f.height)):(h[0]=f.width,h[1]=f.height,o[0]==="middle"?n[0]-=f.width/2:o[0]==="right"&&(n[0]-=f.width),o[1]==="middle"?n[1]-=f.height/2:o[1]==="top"&&(n[1]-=f.height)),u.points[l*3]=n[0],u.points[l*3+1]=n[1],u.points[l*3+2]=n[2],u.tcoords[l*2]=f.tcoords[0],u.tcoords[l*2+1]=f.tcoords[1],l++,n[v[0]]+=h[0],u.points[l*3]=n[0],u.points[l*3+1]=n[1],u.points[l*3+2]=n[2],u.tcoords[l*2]=f.tcoords[2],u.tcoords[l*2+1]=f.tcoords[3],l++,n[v[1]]+=h[1],u.points[l*3]=n[0],u.points[l*3+1]=n[1],u.points[l*3+2]=n[2],u.tcoords[l*2]=f.tcoords[4],u.tcoords[l*2+1]=f.tcoords[5],l++,n[v[0]]-=h[0],u.points[l*3]=n[0],u.points[l*3+1]=n[1],u.points[l*3+2]=n[2],u.tcoords[l*2]=f.tcoords[6],u.tcoords[l*2+1]=f.tcoords[7],l++,u.polys[p*4]=3,u.polys[p*4+1]=l-4,u.polys[p*4+2]=l-3,u.polys[p*4+3]=l-2,p++,u.polys[p*4]=3,u.polys[p*4+1]=l-4,u.polys[p*4+2]=l-2,u.polys[p*4+3]=l-1,u.ptIdx+=4,u.cellIdx+=2}};var r=new Float64Array(3);t.updatePolyDataForLabels=function(){var a=t.getTickStrings().length+e.barSegments.length,i=a*4,o=a*2,s=new Float64Array(i*3),c=new Uint16Array(o*4),u=new Float32Array(i*2),f={ptIdx:0,cellIdx:0,polys:c,points:s,tcoords:u},l=e.vertical?0:1,p=e.vertical?1:0;r[2]=-.99;var h=e.vertical?["right","middle"]:["middle","bottom"],v=[0,1],y=[0,0];e.vertical?(y[0]=-e.tickLabelPixelOffset,e.topTitle?(r[0]=e.boxPosition[0]+.5*e.boxSize[0],r[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],f)):(r[0]=e.barPosition[0]+e.barSize[0],r[1]=e.barPosition[1]+.5*e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","top"],"vertical",[e.axisTitlePixelOffset,0],f)),v=[-1,0]):(y[1]=e.tickLabelPixelOffset,r[0]=e.barPosition[0]+.5*e.barSize[0],r[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],f)),r[l]=e.barPosition[l]+(.5*v[l]+.5)*e.barSize[l],r[p]=e.barPosition[p]+e.barSize[p]*.5;for(var m=null,x=0;x<e.barSegments.length;x++){var g=e.barSegments[x];g.title==="ticks"?m=g:(r[p]=e.barPosition[p]+.5*e.barSize[p]*(g.corners[2][p]+g.corners[0][p]),t.createPolyDataForOneLabel(g.title,r,h,"horizontal",y,f))}for(var d=e.barPosition[p]+e.barSize[p]*m.corners[0][p],C=e.barSize[p]*(m.corners[2][p]-m.corners[0][p]),S=t.getTicks(),T=t.getTickStrings(),w=0;w<S.length;w++){var E=(S[w]-e.lastTickBounds[0])/(e.lastTickBounds[1]-e.lastTickBounds[0]);r[p]=d+C*E,t.createPolyDataForOneLabel(T[w],r,h,"horizontal",y,f)}var D=de.newInstance({numberOfComponents:2,values:u,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(D),e.tmPolyData.getPoints().setData(s,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(c,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updatePolyDataForBarSegments=function(){var a,i,o=e.renderable.getScalarsToColors(),s=0;e.renderable.getDrawNanAnnotation()&&o.getNanColor()&&(s+=1),e.renderable.getDrawBelowRangeSwatch()&&(a=o.getUseBelowRangeColor)!==null&&a!==void 0&&a.call(o)&&(s+=1),e.renderable.getDrawAboveRangeSwatch()&&(i=o.getUseAboveRangeColor)!==null&&i!==void 0&&i.call(o)&&(s+=1);var c=4*(1+s),u=c,f=1;o.getVectorMode()===e7.COMPONENT&&(f=o.getVectorComponent()+1);for(var l=new Float64Array(c*3),p=new Uint16Array(u*5),h=new Float32Array(c*f),v=0,y=0,m=0;m<e.barSegments.length;m++){for(var x=e.barSegments[m],g=0;g<4;g++){r[0]=e.barPosition[0]+x.corners[g][0]*e.barSize[0],r[1]=e.barPosition[1]+x.corners[g][1]*e.barSize[1],l[v*3]=(.5*r[0]+.5)*e.lastSize[0],l[v*3+1]=(.5*r[1]+.5)*e.lastSize[1],l[v*3+2]=r[2];for(var d=0;d<f;d++)h[v*f+d]=e.lastTickBounds[0]+x.scalars[g]*(e.lastTickBounds[1]-e.lastTickBounds[0]);v++}p[y*5]=4,p[y*5+1]=v-4,p[y*5+2]=v-3,p[y*5+3]=v-2,p[y*5+4]=v-1,y++}var C=de.newInstance({numberOfComponents:f,values:h,name:"Scalars"});e.polyData.getPointData().setScalars(C),e.polyData.getPoints().setData(l,3),e.polyData.getPoints().modified(),e.polyData.getPolys().setData(p,1),e.polyData.getPolys().modified(),e.polyData.modified()}}var r7=B.newInstance(function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},n),B.obj(t,e),B.setGet(t,e,["axisTitlePixelOffset","tickLabelPixelOffset","renderable","topTitle","ticks","tickStrings"]),B.get(t,e,["lastSize","lastAspectRatio","lastTickBounds","axisTextStyle","tickTextStyle","barActor","tmActor"]),B.getArray(t,e,["boxPosition","boxSize"]),B.setArray(t,e,["boxPosition","boxSize"],2),e.forceUpdate=!1,e.lastRebuildTime={},B.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.barMapper=Cr.newInstance(),e.barMapper.setInterpolateScalarsBeforeMapping(!0),e.barMapper.setUseLookupTableScalarRange(!0),e.polyData=Ye.newInstance(),e.barMapper.setInputData(e.polyData),e.barActor=mr.newInstance(),e.barActor.setMapper(e.barMapper),e.tmPolyData=Ye.newInstance(),e.tmMapper=Cr.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmTexture=V0.newInstance({resizable:!0}),e.tmTexture.setInterpolate(!1),e.tmActor=mr.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),e.tmActor.addTexture(e.tmTexture),e.barPosition=[0,0],e.barSize=[0,0],e.boxPosition=[.88,-.92],e.boxSize=[.1,1.1],e.lastTickBounds=[],t7(t,e)},"vtkScalarBarActorHelper");function n7(t,e){e.classHierarchy.push("vtkScalarBarActor"),t.setTickTextStyle=function(n){e.tickTextStyle=Or(Or({},e.tickTextStyle),n),t.modified()},t.setAxisTextStyle=function(n){e.axisTextStyle=Or(Or({},e.axisTextStyle),n),t.modified()},t.resetAutoLayoutToDefault=function(){t.setAutoLayout(mp(t,e))},t.resetGenerateTicksToDefault=function(){t.setGenerateTicks(xp())}}function a7(t){return Or({automated:!0,autoLayout:null,axisLabel:"Scalar Value",barPosition:[0,0],barSize:[0,0],boxPosition:[.88,-.92],boxSize:[.1,1.1],scalarToColors:null,axisTitlePixelOffset:36,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},tickLabelPixelOffset:14,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"},generateTicks:null,drawNanAnnotation:!0,drawBelowRangeSwatch:!0,drawAboveRangeSwatch:!0},t)}function Cp(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,a7(n)),e.autoLayout||(e.autoLayout=mp(t,e)),e.generateTicks||(e.generateTicks=xp()),mr.extend(t,e,n),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),B.setGet(t,e,["automated","autoLayout","axisTitlePixelOffset","axisLabel","scalarsToColors","tickLabelPixelOffset","generateTicks","drawNanAnnotation","drawBelowRangeSwatch","drawAboveRangeSwatch"]),B.get(t,e,["axisTextStyle","tickTextStyle"]),B.getArray(t,e,["barPosition","barSize","boxPosition","boxSize"]),B.setArray(t,e,["barPosition","barSize","boxPosition","boxSize"],2),n7(t,e)}var i7=B.newInstance(Cp,"vtkScalarBarActor"),Sp={newInstance:i7,extend:Cp,newScalarBarActorHelper:r7};function o7(t,e){e.classHierarchy.push("vtkOpenGLScalarBarActor"),t.buildPass=function(n){n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.scalarBarActorHelper.getRenderable()||e.scalarBarActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.scalarBarActorHelper.getBarActor()),t.addMissingNode(e.scalarBarActorHelper.getTmActor()),t.removeUnusedNodes())},t.opaquePass=function(n,r){if(n){var a=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,i=e._openGLRenderer.getTiledSizeAndOrigin();e.scalarBarActorHelper.updateAPISpecificData([i.usize,i.vsize],a,e._openGLRenderWindow.getRenderable())}}}var s7={};function u7(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,s7,n),xt.extend(t,e,n),e.scalarBarActorHelper=Sp.newScalarBarActorHelper(),o7(t,e)}var c7=Je(u7,"vtkOpenGLScalarBarActor");ft("vtkScalarBarActor",c7);var Tp=Me;function f7(t,e){e.classHierarchy.push("vtkOpenGLSkybox"),t.buildPass=function(n){if(n){e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow);var r=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(r.getActiveCamera())}},t.queryPass=function(n,r){if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementOpaqueActorCount()}},t.opaquePass=function(n,r){if(n&&!e._openGLRenderer.getSelector()){t.updateBufferObjects(),e.context.depthMask(!0),e._openGLRenderWindow.getShaderCache().readyShaderProgram(e.tris.getProgram()),e.openGLTexture.render(e._openGLRenderWindow);var a=e.openGLTexture.getTextureUnit();e.tris.getProgram().setUniformi("sbtexture",a);var i=e._openGLRenderer.getRenderable(),o=e.openGLCamera.getKeyMatrices(i),s=new Float64Array(16);if(Ft(s,o.wcpc),e.tris.getProgram().setUniformMatrix("IMCPCMatrix",s),e.lastFormat==="box"){var c=i.getActiveCamera().getPosition();e.tris.getProgram().setUniform3f("camPos",c[0],c[1],c[2])}e.tris.getVAO().bind(),e.context.drawArrays(e.context.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),e.openGLTexture.deactivate()}},t.updateBufferObjects=function(){if(!e.tris.getCABO().getElementCount()){for(var n=new Float32Array(12),r=0;r<4;r++)n[r*3]=r%2*2-1,n[r*3+1]=r>1?1:-1,n[r*3+2]=1;var a=de.newInstance({numberOfComponents:3,values:n});a.setName("points");var i=new Uint16Array(8);i[0]=3,i[1]=0,i[2]=1,i[3]=3,i[4]=3,i[5]=0,i[6]=3,i[7]=2;var o=de.newInstance({numberOfComponents:1,values:i});e.tris.getCABO().createVBO(o,"polys",Zt.SURFACE,{points:a,cellOffset:0})}e.renderable.getFormat()!==e.lastFormat&&(e.lastFormat=e.renderable.getFormat(),e.lastFormat==="box"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec3 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = wpos.xyz/wpos.w;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec3 TexCoords;
             uniform samplerCube sbtexture;
             uniform vec3 camPos;
             void main () {
               // skybox looks from inside out
               // which means we have to adjust
               // our tcoords. Otherwise text would
               // be flipped
               vec3 tc = normalize(TexCoords - camPos);
               if (abs(tc.z) < max(abs(tc.x),abs(tc.y)))
               {
                 tc = vec3(1.0, 1.0, -1.0) * tc;
               }
               else
               {
                 tc = vec3(-1.0, 1.0, 1.0) * tc;
               }
               gl_FragData[0] = textureCube(sbtexture, tc);
             }`,"")),e.lastFormat==="background"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec2 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = vec2(vertexMC.x, vertexMC.y)*0.5 + 0.5;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec2 TexCoords;
             uniform sampler2D sbtexture;
             void main () {
               gl_FragData[0] = texture2D(sbtexture, TexCoords);
             }`,"")),e.tris.getShaderSourceTime().modified(),e.tris.getVAO().bind(),e.tris.getVAO().addAttributeArray(e.tris.getProgram(),e.tris.getCABO(),"vertexMC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||Tp("Error setting vertexMC in shader VAO."));var s=e.renderable.getTextures();s.length||Tp("vtkSkybox requires a texture map"),e.openGLTexture.getRenderable()!==s[0]&&(e.openGLTexture.releaseGraphicsResources(e._openGLRenderWindow),e.openGLTexture.setRenderable(s[0]))}}var l7={context:null};function p7(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,l7,n),xt.extend(t,e,n),e.openGLTexture=Fe.newInstance(),e.tris=Ht.newInstance(),e.keyMatrixTime={},ht(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:sr(new Float64Array(9)),mcwc:Oe(new Float64Array(16))},dt(t,e,["context"]),jt(t,e,["activeTextures"]),f7(t,e)}var h7=Je(p7);ft("vtkSkybox",h7);function wp(t,e,n,r,a,i,o){try{var s=t[i](o),c=s.value}catch(u){n(u);return}s.done?e(c):Promise.resolve(c).then(r,a)}function Zn(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function o(c){wp(i,r,a,o,s,"next",c)}function s(c){wp(i,r,a,o,s,"throw",c)}o(void 0)})}}var K0={},v7={get exports(){return K0},set exports(t){K0=t}},X0={},g7={get exports(){return X0},set exports(t){X0=t}};(function(t){var e=function(n){var r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(F,A,H){F[A]=H.value},o,s=typeof Symbol=="function"?Symbol:{},c=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",f=s.toStringTag||"@@toStringTag";function l(F,A,H){return Object.defineProperty(F,A,{value:H,enumerable:!0,configurable:!0,writable:!0}),F[A]}try{l({},"")}catch{l=function(A,H,$){return A[H]=$}}function p(F,A,H,$){var X=A&&A.prototype instanceof d?A:d,Y=Object.create(X.prototype),q=new W($||[]);return i(Y,"_invoke",{value:M(F,H,q)}),Y}n.wrap=p;function h(F,A,H){try{return{type:"normal",arg:F.call(A,H)}}catch($){return{type:"throw",arg:$}}}var v="suspendedStart",y="suspendedYield",m="executing",x="completed",g={};function d(){}function C(){}function S(){}var T={};l(T,c,function(){return this});var w=Object.getPrototypeOf,E=w&&w(w(I([])));E&&E!==r&&a.call(E,c)&&(T=E);var D=S.prototype=d.prototype=Object.create(T);C.prototype=S,i(D,"constructor",{value:S,configurable:!0}),i(S,"constructor",{value:C,configurable:!0}),C.displayName=l(S,f,"GeneratorFunction");function b(F){["next","throw","return"].forEach(function(A){l(F,A,function(H){return this._invoke(A,H)})})}n.isGeneratorFunction=function(F){var A=typeof F=="function"&&F.constructor;return A?A===C||(A.displayName||A.name)==="GeneratorFunction":!1},n.mark=function(F){return Object.setPrototypeOf?Object.setPrototypeOf(F,S):(F.__proto__=S,l(F,f,"GeneratorFunction")),F.prototype=Object.create(D),F},n.awrap=function(F){return{__await:F}};function O(F,A){function H(Y,q,J,ne){var Q=h(F[Y],F,q);if(Q.type==="throw")ne(Q.arg);else{var te=Q.arg,L=te.value;return L&&typeof L=="object"&&a.call(L,"__await")?A.resolve(L.__await).then(function(_){H("next",_,J,ne)},function(_){H("throw",_,J,ne)}):A.resolve(L).then(function(_){te.value=_,J(te)},function(_){return H("throw",_,J,ne)})}}var $;function X(Y,q){function J(){return new A(function(ne,Q){H(Y,q,ne,Q)})}return $=$?$.then(J,J):J()}i(this,"_invoke",{value:X})}b(O.prototype),l(O.prototype,u,function(){return this}),n.AsyncIterator=O,n.async=function(F,A,H,$,X){X===void 0&&(X=Promise);var Y=new O(p(F,A,H,$),X);return n.isGeneratorFunction(A)?Y:Y.next().then(function(q){return q.done?q.value:Y.next()})};function M(F,A,H){var $=v;return function(Y,q){if($===m)throw new Error("Generator is already running");if($===x){if(Y==="throw")throw q;return G()}for(H.method=Y,H.arg=q;;){var J=H.delegate;if(J){var ne=R(J,H);if(ne){if(ne===g)continue;return ne}}if(H.method==="next")H.sent=H._sent=H.arg;else if(H.method==="throw"){if($===v)throw $=x,H.arg;H.dispatchException(H.arg)}else H.method==="return"&&H.abrupt("return",H.arg);$=m;var Q=h(F,A,H);if(Q.type==="normal"){if($=H.done?x:y,Q.arg===g)continue;return{value:Q.arg,done:H.done}}else Q.type==="throw"&&($=x,H.method="throw",H.arg=Q.arg)}}}function R(F,A){var H=A.method,$=F.iterator[H];if($===o)return A.delegate=null,H==="throw"&&F.iterator.return&&(A.method="return",A.arg=o,R(F,A),A.method==="throw")||H!=="return"&&(A.method="throw",A.arg=new TypeError("The iterator does not provide a '"+H+"' method")),g;var X=h($,F.iterator,A.arg);if(X.type==="throw")return A.method="throw",A.arg=X.arg,A.delegate=null,g;var Y=X.arg;if(!Y)return A.method="throw",A.arg=new TypeError("iterator result is not an object"),A.delegate=null,g;if(Y.done)A[F.resultName]=Y.value,A.next=F.nextLoc,A.method!=="return"&&(A.method="next",A.arg=o);else return Y;return A.delegate=null,g}b(D),l(D,f,"Generator"),l(D,c,function(){return this}),l(D,"toString",function(){return"[object Generator]"});function N(F){var A={tryLoc:F[0]};1 in F&&(A.catchLoc=F[1]),2 in F&&(A.finallyLoc=F[2],A.afterLoc=F[3]),this.tryEntries.push(A)}function U(F){var A=F.completion||{};A.type="normal",delete A.arg,F.completion=A}function W(F){this.tryEntries=[{tryLoc:"root"}],F.forEach(N,this),this.reset(!0)}n.keys=function(F){var A=Object(F),H=[];for(var $ in A)H.push($);return H.reverse(),function X(){for(;H.length;){var Y=H.pop();if(Y in A)return X.value=Y,X.done=!1,X}return X.done=!0,X}};function I(F){if(F){var A=F[c];if(A)return A.call(F);if(typeof F.next=="function")return F;if(!isNaN(F.length)){var H=-1,$=function X(){for(;++H<F.length;)if(a.call(F,H))return X.value=F[H],X.done=!1,X;return X.value=o,X.done=!0,X};return $.next=$}}return{next:G}}n.values=I;function G(){return{value:o,done:!0}}return W.prototype={constructor:W,reset:function(F){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(U),!F)for(var A in this)A.charAt(0)==="t"&&a.call(this,A)&&!isNaN(+A.slice(1))&&(this[A]=o)},stop:function(){this.done=!0;var F=this.tryEntries[0],A=F.completion;if(A.type==="throw")throw A.arg;return this.rval},dispatchException:function(F){if(this.done)throw F;var A=this;function H(ne,Q){return Y.type="throw",Y.arg=F,A.next=ne,Q&&(A.method="next",A.arg=o),!!Q}for(var $=this.tryEntries.length-1;$>=0;--$){var X=this.tryEntries[$],Y=X.completion;if(X.tryLoc==="root")return H("end");if(X.tryLoc<=this.prev){var q=a.call(X,"catchLoc"),J=a.call(X,"finallyLoc");if(q&&J){if(this.prev<X.catchLoc)return H(X.catchLoc,!0);if(this.prev<X.finallyLoc)return H(X.finallyLoc)}else if(q){if(this.prev<X.catchLoc)return H(X.catchLoc,!0)}else if(J){if(this.prev<X.finallyLoc)return H(X.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(F,A){for(var H=this.tryEntries.length-1;H>=0;--H){var $=this.tryEntries[H];if($.tryLoc<=this.prev&&a.call($,"finallyLoc")&&this.prev<$.finallyLoc){var X=$;break}}X&&(F==="break"||F==="continue")&&X.tryLoc<=A&&A<=X.finallyLoc&&(X=null);var Y=X?X.completion:{};return Y.type=F,Y.arg=A,X?(this.method="next",this.next=X.finallyLoc,g):this.complete(Y)},complete:function(F,A){if(F.type==="throw")throw F.arg;return F.type==="break"||F.type==="continue"?this.next=F.arg:F.type==="return"?(this.rval=this.arg=F.arg,this.method="return",this.next="end"):F.type==="normal"&&A&&(this.next=A),g},finish:function(F){for(var A=this.tryEntries.length-1;A>=0;--A){var H=this.tryEntries[A];if(H.finallyLoc===F)return this.complete(H.completion,H.afterLoc),U(H),g}},catch:function(F){for(var A=this.tryEntries.length-1;A>=0;--A){var H=this.tryEntries[A];if(H.tryLoc===F){var $=H.completion;if($.type==="throw"){var X=$.arg;U(H)}return X}}throw new Error("illegal catch attempt")},delegateYield:function(F,A,H){return this.delegate={iterator:I(F),resultName:A,nextLoc:H},this.method==="next"&&(this.arg=o),g}},n}(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(g7),function(t){t.exports=X0}(v7);const $t=jd(K0);var d7=dn.FieldAssociations;function y7(t,e){e.classHierarchy.push("vtkHardwareSelector"),t.getSourceDataAsync=function(){var n=Zn($t.mark(function r(a,i,o,s,c){return $t.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:case"end":return f.stop()}},r)}));return function(r,a,i,o,s){return n.apply(this,arguments)}}(),t.selectAsync=function(){var n=Zn($t.mark(function r(a,i,o,s,c){var u;return $t.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,t.getSourceDataAsync(a,i,o,s,c);case 2:if(u=l.sent,!u){l.next=5;break}return l.abrupt("return",u.generateSelection(i,o,s,c));case 5:return l.abrupt("return",[]);case 6:case"end":return l.stop()}},r)}));return function(r,a,i,o,s){return n.apply(this,arguments)}}()}var m7={fieldAssociation:d7.FIELD_ASSOCIATION_CELLS,captureZValues:!1};function Ep(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,m7,n),B.obj(t,e),B.setGet(t,e,["fieldAssociation","captureZValues"]),y7(t,e)}var x7=B.newInstance(Ep,"vtkHardwareSelector"),C7={newInstance:x7,extend:Ep};function S7(t,e){e.classHierarchy.push("vtkFramebuffer"),t.getBothMode=function(){return e.context.FRAMEBUFFER},t.saveCurrentBindingsAndBuffers=function(n){var r=typeof n<"u"?n:t.getBothMode();t.saveCurrentBindings(r),t.saveCurrentBuffers(r)},t.saveCurrentBindings=function(n){if(!e.context){Me("you must set the OpenGLRenderWindow before calling saveCurrentBindings");return}var r=e.context;e.previousDrawBinding=r.getParameter(e.context.FRAMEBUFFER_BINDING),e.previousActiveFramebuffer=e._openGLRenderWindow.getActiveFramebuffer()},t.saveCurrentBuffers=function(n){},t.restorePreviousBindingsAndBuffers=function(n){var r=typeof n<"u"?n:t.getBothMode();t.restorePreviousBindings(r),t.restorePreviousBuffers(r)},t.restorePreviousBindings=function(n){if(!e.context){Me("you must set the OpenGLRenderWindow before calling restorePreviousBindings");return}var r=e.context;r.bindFramebuffer(r.FRAMEBUFFER,e.previousDrawBinding),e._openGLRenderWindow.setActiveFramebuffer(e.previousActiveFramebuffer)},t.restorePreviousBuffers=function(n){},t.bind=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=n;r===null&&(r=e.context.FRAMEBUFFER),e.context.bindFramebuffer(r,e.glFramebuffer);for(var a=0;a<e.colorBuffers.length;a++)e.colorBuffers[a].bind();e._openGLRenderWindow.setActiveFramebuffer(t)},t.create=function(n,r){if(!e.context){Me("you must set the OpenGLRenderWindow before calling create");return}e.glFramebuffer=e.context.createFramebuffer(),e.glFramebuffer.width=n,e.glFramebuffer.height=r},t.setColorBuffer=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=e.context;if(!a){Me("you must set the OpenGLRenderWindow before calling setColorBuffer");return}var i=a.COLOR_ATTACHMENT0;if(r>0)if(e._openGLRenderWindow.getWebgl2())i+=r;else{Me("Using multiple framebuffer attachments requires WebGL 2");return}e.colorBuffers[r]=n,a.framebufferTexture2D(a.FRAMEBUFFER,i,a.TEXTURE_2D,n.getHandle(),0)},t.removeColorBuffer=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=e.context;if(!r){Me("you must set the OpenGLRenderWindow before calling removeColorBuffer");return}var a=r.COLOR_ATTACHMENT0;if(n>0)if(e._openGLRenderWindow.getWebgl2())a+=n;else{Me("Using multiple framebuffer attachments requires WebGL 2");return}r.framebufferTexture2D(r.FRAMEBUFFER,a,r.TEXTURE_2D,null,0),e.colorBuffers=e.colorBuffers.splice(n,1)},t.setDepthBuffer=function(n){if(!e.context){Me("you must set the OpenGLRenderWindow before calling setDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){var r=e.context;r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,n.getHandle(),0)}else Me("Attaching depth buffer textures to fbo requires WebGL 2")},t.removeDepthBuffer=function(){if(!e.context){Me("you must set the OpenGLRenderWindow before calling removeDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){var n=e.context;n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,null,0)}else Me("Attaching depth buffer textures to framebuffers requires WebGL 2")},t.getGLFramebuffer=function(){return e.glFramebuffer},t.setOpenGLRenderWindow=function(n){e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))},t.releaseGraphicsResources=function(){e.glFramebuffer&&e.context.deleteFramebuffer(e.glFramebuffer)},t.getSize=function(){var n=[0,0];return e.glFramebuffer!==null&&(n[0]=e.glFramebuffer.width,n[1]=e.glFramebuffer.height),n},t.populateFramebuffer=function(){if(!e.context){Me("you must set the OpenGLRenderWindow before calling populateFrameBuffer");return}t.bind();var n=e.context,r=Fe.newInstance();r.setOpenGLRenderWindow(e._openGLRenderWindow),r.setMinificationFilter(Ee.LINEAR),r.setMagnificationFilter(Ee.LINEAR),r.create2DFromRaw(e.glFramebuffer.width,e.glFramebuffer.height,4,He.UNSIGNED_CHAR,null),t.setColorBuffer(r),e.depthTexture=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,e.depthTexture),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e.glFramebuffer.width,e.glFramebuffer.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,e.depthTexture)},t.getColorTexture=function(){return e.colorBuffers[0]}}var T7={glFramebuffer:null,colorBuffers:null,depthTexture:null,previousDrawBinding:0,previousReadBinding:0,previousDrawBuffer:0,previousReadBuffer:0,previousActiveFramebuffer:null};function Dp(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,T7,n),ht(t,e),e.colorBuffers&&Me("you cannot initialize colorBuffers through the constructor. You should call setColorBuffer() instead."),e.colorBuffers=[],Ni(t,e,["colorBuffers"]),S7(t,e)}var w7=Je(Dp,"vtkFramebuffer"),Dn={newInstance:w7,extend:Dp},E7={GLOBALIDS:0,PEDIGREEIDS:1,VALUES:2,INDICES:3,FRUSTUM:4,LOCATIONS:5,THRESHOLDS:6,BLOCKS:7,QUERY:8},D7={CELL:0,POINT:1,FIELD:2,VERTEX:3,EDGE:4,ROW:5},O7={SelectionContent:E7,SelectionField:D7};function Op(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function _7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Op(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Op(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function b7(t,e){e.classHierarchy.push("vtkSelectionNode"),t.getBounds=function(){return e.points.getBounds()}}var M7={contentType:-1,fieldType:-1,properties:null,selectionList:[]};function _p(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,M7,n),B.obj(t,e),e.properties={},B.setGet(t,e,["contentType","fieldType","properties","selectionList"]),b7(t,e)}var N7=B.newInstance(_p,"vtkSelectionNode"),q0=_7({newInstance:N7,extend:_p},O7);function bp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function R7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bp(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bp(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var vt=C1.PassTypes,L7=q0.SelectionContent,Mp=q0.SelectionField,Za=dn.FieldAssociations,Np=B.vtkErrorMacro,Gr=1;function Rp(t){return"".concat(t.propID," ").concat(t.compositeID)}function Lp(t,e,n,r){if(!n)return 0;var a=(e*(r[2]-r[0]+1)+t)*4;return n[a+3]}function _r(t,e,n,r){if(!n)return 0;var a=(e*(r[2]-r[0]+1)+t)*4,i=n[a],o=n[a+1],s=n[a+2];return(s*256+o)*256+i}function kp(t,e){var n=e;return n<<=24,n|=t,n}function Qn(t,e,n,r){var a=n<0?0:n;if(a===0){if(r[0]=e[0],r[1]=e[1],e[0]<t.area[0]||e[0]>t.area[2]||e[1]<t.area[1]||e[1]>t.area[3])return null;var i=[e[0]-t.area[0],e[1]-t.area[1]],o=_r(i[0],i[1],t.pixBuffer[vt.ACTOR_PASS],t.area);if(o<=0||o-Gr>=t.props.length)return null;var s={};s.valid=!0,s.propID=o-Gr,s.prop=t.props[s.propID];var c=_r(i[0],i[1],t.pixBuffer[vt.COMPOSITE_INDEX_PASS],t.area);if((c<0||c>16777215)&&(c=0),s.compositeID=c-Gr,t.captureZValues){var u=(i[1]*(t.area[2]-t.area[0]+1)+i[0])*4;s.zValue=(256*t.zBuffer[u]+t.zBuffer[u+1])/65535,s.displayPosition=e}if(t.pixBuffer[vt.ID_LOW24]&&Lp(i[0],i[1],t.pixBuffer[vt.ID_LOW24],t.area)===0)return s;var f=_r(i[0],i[1],t.pixBuffer[vt.ID_LOW24],t.area),l=_r(i[0],i[1],t.pixBuffer[vt.ID_HIGH24],t.area);return s.attributeID=kp(f,l),s}var p=[e[0],e[1]],h=[0,0],v=Qn(t,e,0,r);if(v&&v.valid)return v;for(var y=1;y<a;++y){for(var m=p[1]>y?p[1]-y:0;m<=p[1]+y;++m)if(h[1]=m,p[0]>=y&&(h[0]=p[0]-y,v=Qn(t,h,0,r),v&&v.valid)||(h[0]=p[0]+y,v=Qn(t,h,0,r),v&&v.valid))return v;for(var x=p[0]>=y?p[0]-(y-1):0;x<=p[0]+(y-1);++x)if(h[0]=x,p[1]>=y&&(h[1]=p[1]-y,v=Qn(t,h,0,r),v&&v.valid)||(h[1]=p[1]+y,v=Qn(t,h,0,r),v&&v.valid))return v}return r[0]=e[0],r[1]=e[1],null}function Fp(t,e,n,r,a){var i=[],o=0;return e.forEach(function(s,c){var u=q0.newInstance();switch(u.setContentType(L7.INDICES),t){case Za.FIELD_ASSOCIATION_CELLS:u.setFieldType(Mp.CELL);break;case Za.FIELD_ASSOCIATION_POINTS:u.setFieldType(Mp.POINT);break;default:Np("Unknown field association")}u.getProperties().propID=s.info.propID,u.getProperties().prop=s.info.prop,u.getProperties().compositeID=s.info.compositeID,u.getProperties().attributeID=s.info.attributeID,u.getProperties().pixelCount=s.pixelCount,n&&(u.getProperties().displayPosition=[s.info.displayPosition[0],s.info.displayPosition[1],s.info.zValue],u.getProperties().worldPosition=a.displayToWorld(s.info.displayPosition[0],s.info.displayPosition[1],s.info.zValue,r)),u.setSelectionList(s.attributeIDs),i[o]=u,o++}),i}function k7(t,e,n,r,a){for(var i=Math.floor(e),o=Math.floor(n),s=Math.floor(r),c=Math.floor(a),u=new Map,f=[0,0],l=o;l<=c;l++)for(var p=i;p<=s;p++){var h=[p,l],v=Qn(t,h,0,f);if(v&&v.valid){var y=Rp(v);if(!u.has(y))u.set(y,{info:v,pixelCount:1,attributeIDs:[v.attributeID]});else{var m=u.get(y);m.pixelCount++,t.captureZValues&&v.zValue<m.info.zValue&&(m.info=v),m.attributeIDs.indexOf(v.attributeID)===-1&&m.attributeIDs.push(v.attributeID)}}}return Fp(t.fieldAssociation,u,t.captureZValues,t.renderer,t.openGLRenderWindow)}function F7(t,e){e.classHierarchy.push("vtkOpenGLHardwareSelector"),t.releasePixBuffers=function(){e.rawPixBuffer=[],e.pixBuffer=[],e.zBuffer=null},t.beginSelection=function(){e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer),e.maxAttributeId=0;var r=e._openGLRenderWindow.getSize();if(!e.framebuffer)e.framebuffer=Dn.newInstance(),e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.create(r[0],r[1]),e.framebuffer.populateFramebuffer();else{e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers();var a=e.framebuffer.getSize();a[0]!==r[0]||a[1]!==r[1]?(e.framebuffer.create(r[0],r[1]),e.framebuffer.populateFramebuffer()):e.framebuffer.bind()}if(e._openGLRenderer.clear(),e._openGLRenderer.setSelector(t),e.hitProps={},e.propPixels={},e.props=[],t.releasePixBuffers(),e.fieldAssociation===Za.FIELD_ASSOCIATION_POINTS){var i=e._openGLRenderWindow.getContext(),o=i.isEnabled(i.BLEND);i.disable(i.BLEND),e._openGLRenderWindow.traverseAllPasses(),o&&i.enable(i.BLEND)}},t.endSelection=function(){e.hitProps={},e._openGLRenderer.setSelector(null),e.framebuffer.restorePreviousBindingsAndBuffers()},t.preCapturePass=function(){var r=e._openGLRenderWindow.getContext();e.originalBlending=r.isEnabled(r.BLEND),r.disable(r.BLEND)},t.postCapturePass=function(){var r=e._openGLRenderWindow.getContext();e.originalBlending&&r.enable(r.BLEND)},t.select=function(){var r=null;return t.captureBuffers()&&(r=t.generateSelection(e.area[0],e.area[1],e.area[2],e.area[3]),t.releasePixBuffers()),r},t.getSourceDataAsync=function(){var r=Zn($t.mark(function a(i,o,s,c,u){var f,l;return $t.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(e._renderer=i,o===void 0?(f=e._openGLRenderWindow.getSize(),t.setArea(0,0,f[0]-1,f[1]-1)):t.setArea(o,s,c,u),t.captureBuffers()){h.next=4;break}return h.abrupt("return",!1);case 4:return l={area:ve(e.area),pixBuffer:ve(e.pixBuffer),captureZValues:e.captureZValues,zBuffer:e.zBuffer,props:ve(e.props),fieldAssociation:e.fieldAssociation,renderer:i,openGLRenderWindow:e._openGLRenderWindow},l.generateSelection=function(){for(var v=arguments.length,y=new Array(v),m=0;m<v;m++)y[m]=arguments[m];return k7.apply(void 0,[l].concat(y))},h.abrupt("return",l);case 7:case"end":return h.stop()}},a)}));return function(a,i,o,s,c){return r.apply(this,arguments)}}(),t.captureBuffers=function(){if(!e._renderer||!e._openGLRenderWindow)return Np("Renderer and view must be set before calling Select."),!1;e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer),e._openGLRenderWindow.getRenderable().preRender(),t.invokeEvent({type:"StartEvent"}),e.originalBackground=e._renderer.getBackgroundByReference(),e._renderer.setBackground(0,0,0,0);var r=e._openGLRenderWindow.getRenderPasses();for(t.beginSelection(),e.currentPass=vt.MIN_KNOWN_PASS;e.currentPass<=vt.MAX_KNOWN_PASS;e.currentPass++)t.passRequired(e.currentPass)&&(t.preCapturePass(e.currentPass),e.captureZValues&&e.currentPass===vt.ACTOR_PASS&&typeof r[0].requestDepth=="function"&&typeof r[0].getFramebuffer=="function"&&r[0].requestDepth(),e._openGLRenderWindow.traverseAllPasses(),t.postCapturePass(e.currentPass),t.savePixelBuffer(e.currentPass),t.processPixelBuffers());return t.endSelection(),e._renderer.setBackground(e.originalBackground),t.invokeEvent({type:"EndEvent"}),!0},t.processPixelBuffers=function(){e.props.forEach(function(r,a){t.isPropHit(a)&&r.processSelectorPixelBuffers(t,e.propPixels[a])})},t.passRequired=function(r){if(r===vt.ID_HIGH24){if(e.fieldAssociation===Za.FIELD_ASSOCIATION_POINTS)return e.maximumPointId>16777215;if(e.fieldAssociation===Za.FIELD_ASSOCIATION_CELLS)return e.maximumCellId>16777215}return!0},t.savePixelBuffer=function(r){if(e.pixBuffer[r]=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),!e.rawPixBuffer[r]){var a=(e.area[2]-e.area[0]+1)*(e.area[3]-e.area[1]+1)*4;e.rawPixBuffer[r]=new Uint8Array(a),e.rawPixBuffer[r].set(e.pixBuffer[r])}if(r===vt.ACTOR_PASS){if(e.captureZValues){var i=e._openGLRenderWindow.getRenderPasses();if(typeof i[0].requestDepth=="function"&&typeof i[0].getFramebuffer=="function"){var o=i[0].getFramebuffer();o.saveCurrentBindingsAndBuffers(),o.bind(),e.zBuffer=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),o.restorePreviousBindingsAndBuffers()}}t.buildPropHitList(e.rawPixBuffer[r])}},t.buildPropHitList=function(r){for(var a=0,i=0;i<=e.area[3]-e.area[1];i++)for(var o=0;o<=e.area[2]-e.area[0];o++){var s=_r(o,i,r,e.area);s>0&&(s--,s in e.hitProps||(e.hitProps[s]=!0,e.propPixels[s]=[]),e.propPixels[s].push(a*4)),++a}},t.renderProp=function(r){e.currentPass===vt.ACTOR_PASS&&(t.setPropColorValueFromInt(e.props.length+Gr),e.props.push(r))},t.renderCompositeIndex=function(r){e.currentPass===vt.COMPOSITE_INDEX_PASS&&t.setPropColorValueFromInt(r+Gr)},t.renderAttributeId=function(r){r<0||(e.maxAttributeId=r>e.maxAttributeId?r:e.maxAttributeId)},t.passTypeToString=function(r){return B.enumToString(vt,r)},t.isPropHit=function(r){return Boolean(e.hitProps[r])},t.setPropColorValueFromInt=function(r){e.propColorValue[0]=r%256/255,e.propColorValue[1]=Math.floor(r/256)%256/255,e.propColorValue[2]=Math.floor(r/65536)%256/255},t.getPixelInformation=function(r,a,i){var o=a<0?0:a;if(o===0){if(i[0]=r[0],i[1]=r[1],r[0]<e.area[0]||r[0]>e.area[2]||r[1]<e.area[1]||r[1]>e.area[3])return null;var s=[r[0]-e.area[0],r[1]-e.area[1]],c=_r(s[0],s[1],e.pixBuffer[vt.ACTOR_PASS],e.area);if(c<=0||c-Gr>=e.props.length)return null;var u={};u.valid=!0,u.propID=c-Gr,u.prop=e.props[u.propID];var f=_r(s[0],s[1],e.pixBuffer[vt.COMPOSITE_INDEX_PASS],e.area);if((f<0||f>16777215)&&(f=0),u.compositeID=f-Gr,e.captureZValues){var l=(s[1]*(e.area[2]-e.area[0]+1)+s[0])*4;u.zValue=(256*e.zBuffer[l]+e.zBuffer[l+1])/65535,u.displayPosition=r}if(e.pixBuffer[vt.ID_LOW24]&&Lp(s[0],s[1],e.pixBuffer[vt.ID_LOW24],e.area)===0)return u;var p=_r(s[0],s[1],e.pixBuffer[vt.ID_LOW24],e.area),h=_r(s[0],s[1],e.pixBuffer[vt.ID_HIGH24],e.area);return u.attributeID=kp(p,h),u}var v=[r[0],r[1]],y=[0,0],m=t.getPixelInformation(r,0,i);if(m&&m.valid)return m;for(var x=1;x<o;++x){for(var g=v[1]>x?v[1]-x:0;g<=v[1]+x;++g)if(y[1]=g,v[0]>=x&&(y[0]=v[0]-x,m=t.getPixelInformation(y,0,i),m&&m.valid)||(y[0]=v[0]+x,m=t.getPixelInformation(y,0,i),m&&m.valid))return m;for(var d=v[0]>=x?v[0]-(x-1):0;d<=v[0]+(x-1);++d)if(y[0]=d,v[1]>=x&&(y[1]=v[1]-x,m=t.getPixelInformation(y,0,i),m&&m.valid)||(y[1]=v[1]+x,m=t.getPixelInformation(y,0,i),m&&m.valid))return m}return i[0]=r[0],i[1]=r[1],null},t.generateSelection=function(r,a,i,o){for(var s=Math.floor(r),c=Math.floor(a),u=Math.floor(i),f=Math.floor(o),l=new Map,p=[0,0],h=c;h<=f;h++)for(var v=s;v<=u;v++){var y=[v,h],m=t.getPixelInformation(y,0,p);if(m&&m.valid){var x=Rp(m);if(!l.has(x))l.set(x,{info:m,pixelCount:1,attributeIDs:[m.attributeID]});else{var g=l.get(x);g.pixelCount++,e.captureZValues&&m.zValue<g.info.zValue&&(g.info=m),g.attributeIDs.indexOf(m.attributeID)===-1&&g.attributeIDs.push(m.attributeID)}}}return Fp(e.fieldAssociation,l,e.captureZValues,e._renderer,e._openGLRenderWindow)},t.getRawPixelBuffer=function(r){return e.rawPixBuffer[r]},t.getPixelBuffer=function(r){return e.pixBuffer[r]},t.attach=function(r,a){e._openGLRenderWindow=r,e._renderer=a};var n=t.setArea;t.setArea=function(){return n.apply(void 0,arguments)?(e.area[0]=Math.floor(e.area[0]),e.area[1]=Math.floor(e.area[1]),e.area[2]=Math.floor(e.area[2]),e.area[3]=Math.floor(e.area[3]),!0):!1}}var A7={area:void 0,currentPass:-1,propColorValue:null,props:null,maximumPointId:0,maximumCellId:0,idOffset:1};function Ap(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,A7,n),C7.extend(t,e,n),e.propColorValue=[0,0,0],e.props=[],e.area||(e.area=[0,0,0,0]),B.setGetArray(t,e,["area"],4),B.setGet(t,e,["_renderer","currentPass","_openGLRenderWindow","maximumPointId","maximumCellId"]),B.setGetArray(t,e,["propColorValue"],3),B.moveToProtected(t,e,["renderer","openGLRenderWindow"]),B.event(t,e,"event"),F7(t,e)}var V7=B.newInstance(Ap,"vtkOpenGLHardwareSelector"),wo=R7({newInstance:V7,extend:Ap},C1);function Vp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function B7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vp(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vp(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Qa=Me,U7=Ar.Representation,Eo=wr.ObjectType,G7=wo.PassTypes,P7={type:"StartEvent"},I7={type:"EndEvent"};function j7(t,e){e.classHierarchy.push("vtkOpenGLGlyph3DMapper");var n=B7({},t);t.renderPiece=function(r,a){if(t.invokeEvent(P7),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(1),t.invokeEvent(I7),!e.currentInput){Qa("No input!");return}if(!(!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues())){var i=e.context;e._openGLRenderWindow.getWebgl2()?(e.hardwareSupport=!0,e.extension=null):e.extension||(e.extension=e.context.getExtension("ANGLE_instanced_arrays"),e.hardwareSupport=!!e.extension);var o=a.getProperty().getBackfaceCulling(),s=a.getProperty().getFrontfaceCulling();!o&&!s?e._openGLRenderWindow.disableCullFace():s?(e._openGLRenderWindow.enableCullFace(),i.cullFace(i.FRONT)):(e._openGLRenderWindow.enableCullFace(),i.cullFace(i.BACK)),t.renderPieceStart(r,a),t.renderPieceDraw(r,a),t.renderPieceFinish(r,a)}},t.multiply4x4WithOffset=function(r,a,i,o){var s=a[0],c=a[1],u=a[2],f=a[3],l=a[4],p=a[5],h=a[6],v=a[7],y=a[8],m=a[9],x=a[10],g=a[11],d=a[12],C=a[13],S=a[14],T=a[15],w=i[o],E=i[o+1],D=i[o+2],b=i[o+3];r[0]=w*s+E*l+D*y+b*d,r[1]=w*c+E*p+D*m+b*C,r[2]=w*u+E*h+D*x+b*S,r[3]=w*f+E*v+D*g+b*T,w=i[o+4],E=i[o+5],D=i[o+6],b=i[o+7],r[4]=w*s+E*l+D*y+b*d,r[5]=w*c+E*p+D*m+b*C,r[6]=w*u+E*h+D*x+b*S,r[7]=w*f+E*v+D*g+b*T,w=i[o+8],E=i[o+9],D=i[o+10],b=i[o+11],r[8]=w*s+E*l+D*y+b*d,r[9]=w*c+E*p+D*m+b*C,r[10]=w*u+E*h+D*x+b*S,r[11]=w*f+E*v+D*g+b*T,w=i[o+12],E=i[o+13],D=i[o+14],b=i[o+15],r[12]=w*s+E*l+D*y+b*d,r[13]=w*c+E*p+D*m+b*C,r[14]=w*u+E*h+D*x+b*S,r[15]=w*f+E*v+D*g+b*T},t.replaceShaderNormal=function(r,a,i){if(e.hardwareSupport){var o=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(o>0){var s=r.Vertex;e.lastBoundBO.getCABO().getNormalOffset()&&(s=ee.substitute(s,"//VTK::Normal::Dec",["attribute vec3 normalMC;","attribute mat3 gNormal;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,s=ee.substitute(s,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * gNormal * normalMC;"]).result),r.Vertex=s}}n.replaceShaderNormal(r,a,i)},t.replaceShaderColor=function(r,a,i){if(e.hardwareSupport&&e.renderable.getColorArray()){var o=r.Vertex,s=r.Geometry,c=r.Fragment,u=e.lastBoundBO.getReferenceByName("lastLightComplexity"),f=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity"];u&&(f=f.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));var l=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];u&&(l=l.concat(["  vec3 specularColor;","  float specularPower;"])),l=l.concat(["  opacity = opacityUniform;"]),u&&(l=l.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),e.drawingEdges||(f=f.concat(["varying vec4 vertexColorVSOutput;"]),o=ee.substitute(o,"//VTK::Color::Dec",["attribute vec4 gColor;","varying vec4 vertexColorVSOutput;"]).result,o=ee.substitute(o,"//VTK::Color::Impl",["vertexColorVSOutput = gColor;"]).result,s=ee.substitute(s,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,s=ee.substitute(s,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result,l=l.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])),c=ee.substitute(c,"//VTK::Color::Impl",l).result,c=ee.substitute(c,"//VTK::Color::Dec",f).result,r.Vertex=o,r.Geometry=s,r.Fragment=c}n.replaceShaderColor(r,a,i)},t.replaceShaderPositionVC=function(r,a,i){if(e.hardwareSupport){var o=r.Vertex,s=e.lastBoundBO.getReferenceByName("lastLightComplexity");s>0?(o=ee.substitute(o,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","vertexVCVSOutput = MCVCMatrix * gVertexMC;","  gl_Position = MCPCMatrix * gVertexMC;"]).result,o=ee.substitute(o,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result):(o=ee.substitute(o,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCPCMatrix;"]).result,o=ee.substitute(o,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","  gl_Position = MCPCMatrix * gVertexMC;"]).result),r.Vertex=o}n.replaceShaderPositionVC(r,a,i)},t.replaceShaderPicking=function(r,a,i){if(e.hardwareSupport){var o=r.Fragment,s=r.Vertex;s=ee.substitute(s,"//VTK::Picking::Dec",["attribute vec3 mapperIndexVS;","varying vec3 mapperIndexVSOutput;"]).result,s=ee.substitute(s,"//VTK::Picking::Impl","  mapperIndexVSOutput = mapperIndexVS;").result,r.Vertex=s,o=ee.substitute(o,"//VTK::Picking::Dec",["varying vec3 mapperIndexVSOutput;","uniform vec3 mapperIndex;","uniform int picking;"]).result,o=ee.substitute(o,"//VTK::Picking::Impl",["  vec4 pickColor = picking == 2 ? vec4(mapperIndexVSOutput,1.0) : vec4(mapperIndex,1.0);","  gl_FragData[0] = picking != 0 ? pickColor : gl_FragData[0];"]).result,r.Fragment=o}else n.replaceShaderPicking(r,a,i)},t.updateGlyphShaderParameters=function(r,a,i,o,s,c,u,f){var l=i.getProgram();if(r){var p=e.normalMatrix,h=c,v=u*9,y=e.tmpMat3,m=p[0],x=p[1],g=p[2],d=p[3],C=p[4],S=p[5],T=p[6],w=p[7],E=p[8],D=h[v],b=h[v+1],O=h[v+2],M=h[v+3],R=h[v+4],N=h[v+5],U=h[v+6],W=h[v+7],I=h[v+8];y[0]=D*m+b*d+O*T,y[1]=D*x+b*C+O*w,y[2]=D*g+b*S+O*E,y[3]=M*m+R*d+N*T,y[4]=M*x+R*C+N*w,y[5]=M*g+R*S+N*E,y[6]=U*m+W*d+I*T,y[7]=U*x+W*C+I*w,y[8]=U*g+W*S+I*E,l.setUniformMatrix3x3("normalMatrix",e.tmpMat3)}if(t.multiply4x4WithOffset(e.tmpMat4,e.mcpcMatrix,s,u*16),l.setUniformMatrix("MCPCMatrix",e.tmpMat4),a&&(t.multiply4x4WithOffset(e.tmpMat4,e.mcvcMatrix,s,u*16),l.setUniformMatrix("MCVCMatrix",e.tmpMat4)),o){var G=o.getData();e.tmpColor[0]=G[u*4]/255,e.tmpColor[1]=G[u*4+1]/255,e.tmpColor[2]=G[u*4+2]/255,l.setUniform3fArray("ambientColorUniform",e.tmpColor),l.setUniform3fArray("diffuseColorUniform",e.tmpColor)}f&&l.setUniform3fArray("mapperIndex",f.getPropColorValue())},t.renderPieceDraw=function(r,a){var i=a.getProperty().getRepresentation(),o=e.context,s=a.getProperty().getEdgeVisibility()&&i===U7.SURFACE,c=e.openGLCamera.getKeyMatrices(r),u=e.openGLActor.getKeyMatrices();kn(e.normalMatrix,c.normalMatrix,u.normalMatrix),Ke(e.mcpcMatrix,c.wcpc,u.mcwc),Ke(e.mcvcMatrix,c.wcvc,u.mcwc);var f=e.renderable.getMatrixArray(),l=e.renderable.getNormalArray(),p=e.renderable.getColorArray(),h=f.length/16,v=!1;e._openGLRenderer.getSelector()&&e._openGLRenderer.getSelector().getCurrentPass()===G7.COMPOSITE_INDEX_PASS&&(v=!0);for(var y=e.primTypes.Start;y<e.primTypes.End;y++){var m=e.primitives[y].getCABO();if(m.getElementCount()){e.drawingEdges=s&&(y===e.primTypes.TrisEdges||y===e.primTypes.TriStripsEdges),e.lastBoundBO=e.primitives[y],e.primitives[y].updateShaders(r,a,t);var x=e.primitives[y].getProgram(),g=e.primitives[y].getOpenGLMode(i),d=x.isUniformUsed("normalMatrix"),C=x.isUniformUsed("MCVCMatrix");if(e.hardwareSupport)e.extension?e.extension.drawArraysInstancedANGLE(g,0,m.getElementCount(),h):o.drawArraysInstanced(g,0,m.getElementCount(),h);else for(var S=0;S<h;++S)v&&e._openGLRenderer.getSelector().renderCompositeIndex(S),t.updateGlyphShaderParameters(d,C,e.primitives[y],p,f,l,S,v?e._openGLRenderer.getSelector():null),o.drawArrays(g,0,m.getElementCount())}}},t.setMapperShaderParameters=function(r,a,i){if(r.getCABO().getElementCount()&&(e.glyphBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){r.getProgram().isAttributeUsed("gMatrix")?r.getVAO().addAttributeMatrixWithDivisor(r.getProgram(),e.matrixBuffer,"gMatrix",0,64,e.context.FLOAT,4,!1,1)||Qa("Error setting gMatrix in shader VAO."):r.getVAO().removeAttributeArray("gMatrix"),r.getProgram().isAttributeUsed("gNormal")?r.getVAO().addAttributeMatrixWithDivisor(r.getProgram(),e.normalBuffer,"gNormal",0,36,e.context.FLOAT,3,!1,1)||Qa("Error setting gNormal in shader VAO."):r.getVAO().removeAttributeArray("gNormal"),r.getProgram().isAttributeUsed("gColor")?r.getVAO().addAttributeArrayWithDivisor(r.getProgram(),e.colorBuffer,"gColor",0,4,e.context.UNSIGNED_BYTE,4,!0,1,!1)||Qa("Error setting gColor in shader VAO."):r.getVAO().removeAttributeArray("gColor"),r.getProgram().isAttributeUsed("mapperIndexVS")?r.getVAO().addAttributeArrayWithDivisor(r.getProgram(),e.pickBuffer,"mapperIndexVS",0,4,e.context.UNSIGNED_BYTE,4,!0,1,!1)||Qa("Error setting mapperIndexVS in shader VAO."):r.getVAO().removeAttributeArray("mapperIndexVS"),n.setMapperShaderParameters(r,a,i),r.getAttributeUpdateTime().modified();return}n.setMapperShaderParameters(r,a,i)},t.getNeedToRebuildBufferObjects=function(r,a){e.renderable.buildArrays();var i=e.VBOBuildTime.getMTime();return i<e.renderable.getBuildTime().getMTime()?!0:n.getNeedToRebuildBufferObjects(r,a)},t.getNeedToRebuildShaders=function(r,a,i){return!!(n.getNeedToRebuildShaders(r,a,i)||r.getShaderSourceTime().getMTime()<e.renderable.getMTime()||r.getShaderSourceTime().getMTime()<e.currentInput.getMTime())},t.buildBufferObjects=function(r,a){if(e.hardwareSupport){var i=e.renderable.getMatrixArray(),o=e.renderable.getNormalArray(),s=e.renderable.getColorArray();if(e.matrixBuffer||(e.matrixBuffer=wr.newInstance(),e.matrixBuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.normalBuffer=wr.newInstance(),e.normalBuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.colorBuffer=wr.newInstance(),e.colorBuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.pickBuffer=wr.newInstance(),e.pickBuffer.setOpenGLRenderWindow(e._openGLRenderWindow)),e.renderable.getBuildTime().getMTime()>e.glyphBOBuildTime.getMTime()){e.matrixBuffer.upload(i,Eo.ARRAY_BUFFER),e.normalBuffer.upload(o,Eo.ARRAY_BUFFER),s?e.colorBuffer.upload(s.getData(),Eo.ARRAY_BUFFER):e.colorBuffer.releaseGraphicsResources();for(var c=i.length/16,u=new Uint8Array(4*c),f=0;f<c;++f){var l=f+1,p=f*4;u[p]=l%256,l-=u[p],l/=256,u[p+1]=l%256,l-=u[p+1],l/=256,u[p+2]=l%256,u[p+3]=255}e.pickBuffer.upload(u,Eo.ARRAY_BUFFER),e.glyphBOBuildTime.modified()}}return n.buildBufferObjects(r,a)}}var z7={normalMatrix:null,mcpcMatrix:null,mcwcMatrix:null};function W7(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,z7,n),Co.extend(t,e,n),e.tmpMat3=sr(new Float64Array(9)),e.normalMatrix=sr(new Float64Array(9)),e.mcpcMatrix=Oe(new Float64Array(16)),e.mcvcMatrix=Oe(new Float64Array(16)),e.tmpColor=[],e.glyphBOBuildTime={},ht(e.glyphBOBuildTime,{mtime:0}),j7(t,e)}var H7=Je(W7,"vtkOpenGLGlyph3DMapper");ft("vtkGlyph3DMapper",H7);var $7=B.vtkErrorMacro,K7=function(){function t(){Ta(this,t),this.segmentMapping={},this.segments=[null],this.faces=[]}return wa(t,[{key:"addSegment",value:function(n){var r=n[0],a=n[n.length-1];if(!(r===a||n.length<2)){var i=this.segmentMapping[r],o=this.segmentMapping[a];if(i!==void 0&&o!==void 0)if(Math.abs(i)===Math.abs(o)){var s=i<o?o:i,c=this.segments[s];if(i>0)for(var u=1;u<n.length-1;u++)c.push(n[u]);else for(var f=1;f<n.length-1;f++)c.unshift(n[n.length-1-f]);this.faces.push(c),this.segments[s]=null,this.segmentMapping[r]=void 0,this.segmentMapping[a]=void 0}else{var l=Math.abs(i),p=Math.abs(o),h=this.segments[l],v=this.segments[p];this.segments[l]=null,this.segments[p]=null,this.segmentMapping[h[0]]=void 0,this.segmentMapping[v[0]]=void 0,this.segmentMapping[h[h.length-1]]=void 0,this.segmentMapping[v[v.length-1]]=void 0,this.addSegment(n),this.addSegment(h),this.addSegment(v)}else if(i!==void 0){if(i>0){for(var y=this.segments[i],m=1;m<n.length;m++)y.push(n[m]);this.segmentMapping[a]=i}else{var x=this.segments[-i];this.segmentMapping[a]=i;for(var g=1;g<n.length;g++)x.unshift(n[g])}this.segmentMapping[r]=void 0}else if(o!==void 0){if(o>0){for(var d=this.segments[o],C=1;C<n.length;C++)d.push(n[n.length-1-C]);this.segmentMapping[r]=o}else{var S=this.segments[-o];this.segmentMapping[r]=o;for(var T=1;T<n.length;T++)S.unshift(n[n.length-T-1])}this.segmentMapping[a]=void 0}else{var w=this.segments.length;this.segments.push(n),this.segmentMapping[r]=-w,this.segmentMapping[a]=w}}}}]),t}();function X7(t,e){e.classHierarchy.push("vtkClosedPolyLineToSurfaceFilter"),t.requestData=function(n,r){var a=n[0];if(!a){$7("Invalid or missing input");return}var i=Ye.newInstance();i.shallowCopy(a);for(var o=new K7,s=a.getLines().getData(),c=0;c<s.length;){for(var u=s[c++],f=[],l=0;l<u;l++)f.push(s[c+l]);o.addSegment(f),c+=u}for(var p=o.faces,h=p.length,v=0;v<p.length;v++)h+=p[v].length;var y=new Uint16Array(h);c=0;for(var m=0;m<p.length;m++){var x=p[m];y[c++]=x.length;for(var g=0;g<x.length;g++)y[c++]=x[g]}i.setPolys(Kn.newInstance({values:y,name:"faces"})),r[0]=i}}var q7={};function Bp(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,q7,n),B.obj(t,e),B.algo(t,e,1,1),X7(t,e)}var Y7=B.newInstance(Bp,"vtkClosedPolyLineToSurfaceFilter"),J7={newInstance:Y7,extend:Bp},Z7=function(e){return e},Up=1e-6,Gp=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Ta(this,t),this.matrix=Oe(new Float64Array(16)),this.tmp=new Float64Array(3),this.angleConv=e?s2:Z7}return wa(t,[{key:"rotateFromDirections",value:function(n,r){var a=new Float64Array(3),i=new Float64Array(3),o=new Float64Array(16);Xe(a,n[0],n[1],n[2]),Xe(i,r[0],r[1],r[2]),It(a,a),It(i,i);var s=Yr(a,i);return s>=1?this:(Jr(this.tmp,a,i),qr(this.tmp)<Up&&(Jr(this.tmp,[1,0,0],n),qr(this.tmp)<Up&&Jr(this.tmp,[0,1,0],n)),rc(o,Math.acos(s),this.tmp),Ke(this.matrix,this.matrix,o),this)}},{key:"rotate",value:function(n,r){return Xe.apply(bd,[this.tmp].concat(ve(r))),It(this.tmp,this.tmp),Tt(this.matrix,this.matrix,this.angleConv(n),this.tmp),this}},{key:"rotateX",value:function(n){return mi(this.matrix,this.matrix,this.angleConv(n)),this}},{key:"rotateY",value:function(n){return da(this.matrix,this.matrix,this.angleConv(n)),this}},{key:"rotateZ",value:function(n){return xi(this.matrix,this.matrix,this.angleConv(n)),this}},{key:"translate",value:function(n,r,a){return Xe(this.tmp,n,r,a),rt(this.matrix,this.matrix,this.tmp),this}},{key:"scale",value:function(n,r,a){return Xe(this.tmp,n,r,a),Xr(this.matrix,this.matrix,this.tmp),this}},{key:"multiply",value:function(n){return Ke(this.matrix,this.matrix,n),this}},{key:"multiply3x3",value:function(n){return Ke(this.matrix,this.matrix,[n[0],n[1],n[2],0,n[3],n[4],n[5],0,n[6],n[7],n[8],0,0,0,0,1]),this}},{key:"invert",value:function(){return Ft(this.matrix,this.matrix),this}},{key:"identity",value:function(){return Oe(this.matrix),this}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(Pa(kf,this.matrix))return this;for(var i=a===-1?n.length:r+a*3,o=r;o<i;o+=3)Xe(this.tmp,n[o],n[o+1],n[o+2]),be(this.tmp,this.tmp,this.matrix),n[o]=this.tmp[0],n[o+1]=this.tmp[1],n[o+2]=this.tmp[2];return this}},{key:"getMatrix",value:function(){return this.matrix}},{key:"setMatrix",value:function(n){return n&&n.length===16&&St(this.matrix,n),this}}]),t}();function Q7(){return new Gp(!0)}function ex(){return new Gp(!1)}var kt={buildFromDegree:Q7,buildFromRadian:ex};function tx(t,e){e.classHierarchy.push("vtkCubeSource");function n(r,a){var i;if(!e.deleted){var o=Ye.newInstance();a[0]=o;var s=6,c=24,u=B.newTypedArray(e.pointType,c*3);o.getPoints().setData(u,3);var f=B.newTypedArray(e.pointType,c*3),l=de.newInstance({name:"Normals",values:f,numberOfComponents:3});o.getPointData().setNormals(l);var p=2;e.generate3DTextureCoordinates===!0&&(p=3);var h=B.newTypedArray(e.pointType,c*p),v=de.newInstance({name:"TextureCoordinates",values:h,numberOfComponents:p});o.getPointData().setTCoords(v);var y=[0,0,0],m=[0,0,0],x=[0,0],g=0;y[0]=-e.xLength/2,m[0]=-1,m[1]=0,m[2]=0;for(var d=0;d<2;d++){y[1]=-e.yLength/2;for(var C=0;C<2;C++){x[1]=y[1]+.5,y[2]=-e.zLength/2;for(var S=0;S<2;S++)x[0]=(y[2]+.5)*(1-2*d),u[g*3]=y[0],u[g*3+1]=y[1],u[g*3+2]=y[2],f[g*3]=m[0],f[g*3+1]=m[1],f[g*3+2]=m[2],p===2?(h[g*p]=x[0],h[g*p+1]=x[1]):(h[g*p]=2*d-1,h[g*p+1]=2*C-1,h[g*p+2]=2*S-1),g++,y[2]+=e.zLength;y[1]+=e.yLength}y[0]+=e.xLength,m[0]+=2}y[1]=-e.yLength/2,m[1]=-1,m[0]=0,m[2]=0;for(var T=0;T<2;T++){y[0]=-e.xLength/2;for(var w=0;w<2;w++){x[0]=(y[0]+.5)*(2*T-1),y[2]=-e.zLength/2;for(var E=0;E<2;E++)x[1]=(y[2]+.5)*-1,u[g*3]=y[0],u[g*3+1]=y[1],u[g*3+2]=y[2],f[g*3]=m[0],f[g*3+1]=m[1],f[g*3+2]=m[2],p===2?(h[g*p]=x[0],h[g*p+1]=x[1]):(h[g*p]=2*w-1,h[g*p+1]=2*T-1,h[g*p+2]=2*E-1),g++,y[2]+=e.zLength;y[0]+=e.xLength}y[1]+=e.yLength,m[1]+=2}y[2]=-e.zLength/2,m[2]=-1,m[0]=0,m[1]=0;for(var D=0;D<2;D++){y[1]=-e.yLength/2;for(var b=0;b<2;b++){x[1]=y[1]+.5,y[0]=-e.xLength/2;for(var O=0;O<2;O++)x[0]=(y[0]+.5)*(2*D-1),u[g*3]=y[0],u[g*3+1]=y[1],u[g*3+2]=y[2],f[g*3]=m[0],f[g*3+1]=m[1],f[g*3+2]=m[2],p===2?(h[g*p]=x[0],h[g*p+1]=x[1]):(h[g*p]=2*O-1,h[g*p+1]=2*b-1,h[g*p+2]=2*D-1),g++,y[0]+=e.xLength;y[1]+=e.yLength}y[2]+=e.zLength,m[2]+=2}kt.buildFromDegree().rotateX(e.rotations[0]).rotateY(e.rotations[1]).rotateZ(e.rotations[2]).apply(u).apply(f),(i=kt.buildFromRadian()).translate.apply(i,ve(e.center)).apply(u);var M=new Uint16Array(s*5);o.getPolys().setData(M,1);var R=0;M[R++]=4,M[R++]=0,M[R++]=1,M[R++]=3,M[R++]=2,M[R++]=4,M[R++]=4,M[R++]=6,M[R++]=7,M[R++]=5,M[R++]=4,M[R++]=8,M[R++]=10,M[R++]=11,M[R++]=9,M[R++]=4,M[R++]=12,M[R++]=13,M[R++]=15,M[R++]=14,M[R++]=4,M[R++]=16,M[R++]=18,M[R++]=19,M[R++]=17,M[R++]=4,M[R++]=20,M[R++]=21,M[R++]=23,M[R]=22}}t.setBounds=function(){var r=[];if(Array.isArray(arguments.length<=0?void 0:arguments[0]))r=arguments.length<=0?void 0:arguments[0];else for(var a=0;a<arguments.length;a++)r.push(a<0||arguments.length<=a?void 0:arguments[a]);r.length===6&&(e.xLength=r[1]-r[0],e.yLength=r[3]-r[2],e.zLength=r[5]-r[4],e.center=[(r[0]+r[1])/2,(r[2]+r[3])/2,(r[4]+r[5])/2])},t.requestData=n}var rx={xLength:1,yLength:1,zLength:1,center:[0,0,0],rotations:[0,0,0],pointType:"Float64Array",generate3DTextureCoordinates:!1};function Pp(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,rx,n),B.obj(t,e),B.setGet(t,e,["xLength","yLength","zLength","generate3DTextureCoordinates"]),B.setGetArray(t,e,["center","rotations"],3),B.algo(t,e,0,1),tx(t,e)}var nx=B.newInstance(Pp,"vtkCubeSource"),ax={newInstance:nx,extend:Pp};function Ip(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function ix(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ip(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ip(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var jp=Me;function ox(t){var e=t.getPolys().getData(),n=t.getStrips().getData(),r={done:!1,polyIdx:0,stripIdx:0,remainingStripLength:0,next:function(){var i=null;if(r.polyIdx<e.length){var o=e[r.polyIdx],s=r.polyIdx+1,c=s+o;r.polyIdx=c,i=e.subarray(s,c)}else if(r.stripIdx<n.length){r.remainingStripLength===0&&(r.remainingStripLength=n[r.stripIdx]-2,r.stripIdx+=3);var u=r.stripIdx-2,f=r.stripIdx+1;r.stripIdx++,r.remainingStripLength--,i=n.subarray(u,f)}else if(r.done)throw new Error("Iterator is done");return r.done=r.polyIdx>=e.length&&r.stripIdx>=n.length,i}};return r}function sx(t,e){e.classHierarchy.push("vtkCutter");var n=ix({},t);t.getMTime=function(){var a=n.getMTime();return e.cutFunction&&(a=Math.max(a,e.cutFunction.getMTime())),a};function r(a,i){var o=a.getPoints(),s=o.getData(),c=o.getNumberOfPoints(),u=[],f=[],l=[];(!e.cutScalars||e.cutScalars.length<c)&&(e.cutScalars=new Float32Array(c));for(var p=0,h=0;p<s.length;)e.cutScalars[h++]=e.cutFunction.evaluateFunction(s[p++],s[p++],s[p++]);for(var v=[],y=new Array(3),m=new Array(3),x=ox(a);!x.done;){var g=x.next();if(!(g.length<=2)){for(var d=[],C=void 0,S=0;S<g.length;S++)C=g[S],d.push(e.cutScalars[C]);for(var T=d[0]>0,w=!0,E=1;E<d.length;E++){var D=d[E]>0;if(D!==T){w=!1;break}}if(!w){for(var b=[],O=0;O<g.length;O++){var M=O+1===g.length?0:O+1,R=d[O]>0,N=d[M]>0;if(N!==R){var U=O,W=M,I=d[W]-d[U];I<=0&&(U=M,W=O,I*=-1);var G=0;I!==0&&(G=(e.cutValue-d[U])/I);var F=g[U],A=g[W];y[0]=s[F*3],y[1]=s[F*3+1],y[2]=s[F*3+2],m[0]=s[A*3],m[1]=s[A*3+1],m[2]=s[A*3+2];var H=[y[0]+G*(m[0]-y[0]),y[1]+G*(m[1]-y[1]),y[2]+G*(m[2]-y[2])];b.push({pointEdge1:F,pointEdge2:A,intersectedPoint:H,newPointID:-1})}}for(var $=0;$<b.length;$++){for(var X=b[$],Y=!1,q=0;q<v.length;q++){var J=v[q],ne=X.pointEdge1===J.pointEdge1&&X.pointEdge2===J.pointEdge2,Q=X.intersectedPoint[0]===J.intersectedPoint[0]&&X.intersectedPoint[1]===J.intersectedPoint[1]&&X.intersectedPoint[2]===J.intersectedPoint[2];if(ne||Q){Y=!0,b[$].newPointID=v[q].newPointID;break}}Y||(u.push(X.intersectedPoint[0]),u.push(X.intersectedPoint[1]),u.push(X.intersectedPoint[2]),b[$].newPointID=u.length/3-1,v.push(b[$]))}var te=b.length;te===2?f.push(te,b[0].newPointID,b[1].newPointID):te>2&&(l.push(te),b.forEach(function(_){l.push(_.newPointID)}))}}}var L=i.getPoints();L.setData(_s(o.getDataType(),u),3),f.length!==0&&i.getLines().setData(Uint16Array.from(f)),l.length!==0&&i.getPolys().setData(Uint16Array.from(l))}t.requestData=function(a,i){var o=a[0];if(!o){jp("Invalid or missing input");return}if(!e.cutFunction){jp("Missing cut function");return}var s=Ye.newInstance();r(o,s),i[0]=s}}var ux={cutFunction:null,cutScalars:null,cutValue:0};function zp(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ux,n),ht(t,e),Zc(t,e,1,1),dt(t,e,["cutFunction","cutValue"]),sx(t,e)}var cx=Je(zp,"vtkCutter"),fx={newInstance:cx,extend:zp},lx=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkImageResliceMapperVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

// all variables that represent positions or directions have a suffix
// indicating the coordinate system they are in. The possible values are
// MC - Model coordinates
// WC - World coordinates
// VC - View coordinates
// DC - Display coordinates
// TC - Texture coordinates

// frag position in VC
//VTK::PositionVC::Dec

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// camera and actor matrix values
//VTK::Camera::Dec

void main()
{
  //VTK::PositionVC::Impl

  //VTK::TCoord::Impl

  //VTK::Picking::Impl
}
`,px=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkImageResliceMapperFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the gpu image mapper fragment shader

// VC position of this fragment
//VTK::PositionVC::Dec

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// handle coincident offsets
//VTK::Coincident::Dec

//VTK::ZBuffer::Dec

// the output of this shader
//VTK::Output::Dec

void main()
{
  // VC position of this fragment. This should not branch/return/discard.
  //VTK::PositionVC::Impl

  // Place any calls that require uniform flow (e.g. dFdx) here.
  //VTK::UniformFlow::Impl

  // Set gl_FragDepth here (gl_FragCoord.z by default)
  //VTK::Depth::Impl

  // Early depth peeling abort:
  //VTK::DepthPeeling::PreColor

  //VTK::TCoord::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }

  //VTK::DepthPeeling::Impl

  //VTK::Picking::Impl

  // handle coincident offsets
  //VTK::Coincident::Impl

  //VTK::ZBuffer::Impl

  //VTK::RenderPassFragmentShader::Impl
}
`,ei={NEAREST:0,LINEAR:1},hx={InterpolationType:ei},On=Me;function Wp(t,e,n){var r=e.apply(t);if(r){var a=t.getIndependentComponents();return"".concat(t.getMTime(),"-").concat(a,"-").concat(n)}return"0"}function Hp(t,e,n){return e.identity(n),t.reduce(function(r,a,i){return i===0?a?e.copy(r,a):e.identity(r):a?e.multiply(r,r,a):r},n)}function vx(t,e){e.classHierarchy.push("vtkOpenGLImageResliceMapper"),t.buildPass=function(r){if(r){e.currentRenderPass=null,e._openGLImageSlice=t.getFirstAncestorOfType("vtkOpenGLImageSlice"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer");var a=e._openGLRenderer.getRenderable();e._openGLCamera=e._openGLRenderer.getViewNodeFor(a.getActiveCamera()),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLTexture||(e.openGLTexture=Fe.newInstance()),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.pwfTexture.setOpenGLRenderWindow(e._openGLRenderWindow)}},t.translucentPass=function(r,a){r&&(e.currentRenderPass=a,t.render())},t.zBufferPass=function(r){r&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=function(r){return t.zBufferPass(r)},t.opaquePass=function(r){r&&t.render()},t.getCoincidentParameters=function(r,a){return e.renderable.getResolveCoincidentTopology()?e.renderable.getCoincidentTopologyPolygonOffsetParameters():null},t.render=function(){var r=e._openGLImageSlice.getRenderable(),a=e._openGLRenderer.getRenderable();t.renderPiece(a,r)},t.renderPiece=function(r,a){if(t.invokeEvent({type:"StartEvent"}),e.renderable.update(),e.currentInput=e.renderable.getInputData(),!e.currentInput){On("No input!");return}t.updateResliceGeometry(),t.renderPieceStart(r,a),t.renderPieceDraw(r,a),t.renderPieceFinish(r,a),t.invokeEvent({type:"EndEvent"})},t.renderPieceStart=function(r,a){t.updateBufferObjects(r,a);var i=a.getProperty().getInterpolationType();i===ei.NEAREST?(e.openGLTexture.setMinificationFilter(Ee.NEAREST),e.openGLTexture.setMagnificationFilter(Ee.NEAREST),e.colorTexture.setMinificationFilter(Ee.NEAREST),e.colorTexture.setMagnificationFilter(Ee.NEAREST),e.pwfTexture.setMinificationFilter(Ee.NEAREST),e.pwfTexture.setMagnificationFilter(Ee.NEAREST)):(e.openGLTexture.setMinificationFilter(Ee.LINEAR),e.openGLTexture.setMagnificationFilter(Ee.LINEAR),e.colorTexture.setMinificationFilter(Ee.LINEAR),e.colorTexture.setMagnificationFilter(Ee.LINEAR),e.pwfTexture.setMinificationFilter(Ee.LINEAR),e.pwfTexture.setMagnificationFilter(Ee.LINEAR)),e.lastBoundBO=null},t.renderPieceDraw=function(r,a){var i=e.context;e.openGLTexture.activate(),e.colorTexture.activate(),e.pwfTexture.activate(),t.updateShaders(e.tris,r,a),i.drawArrays(i.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),e.openGLTexture.deactivate(),e.colorTexture.deactivate(),e.pwfTexture.deactivate()},t.renderPieceFinish=function(r,a){},t.updateBufferObjects=function(r,a){t.getNeedToRebuildBufferObjects(r,a)&&t.buildBufferObjects(r,a)},t.getNeedToRebuildBufferObjects=function(r,a){return e.VBOBuildTime.getMTime()<t.getMTime()||e.VBOBuildTime.getMTime()<a.getMTime()||e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<a.getProperty().getMTime()||e.VBOBuildTime.getMTime()<e.currentInput.getMTime()||e.VBOBuildTime.getMTime()<e.resliceGeom.getMTime()},t.buildBufferObjects=function(r,a){var i,o=e.currentInput;if(o){var s=(i=o.getPointData())===null||i===void 0?void 0:i.getScalars();if(s){var c=s.getNumberOfComponents();if(!e._externalOpenGLTexture){var u="".concat(o.getMTime(),"A").concat(s.getMTime());if(e.openGLTextureString!==u){var f=o.getDimensions();e.openGLTexture.getOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),e.openGLTexture.releaseGraphicsResources(e._openGLRenderWindow),e.openGLTexture.resetFormatAndType(),e.openGLTexture.create3DFilterableFromDataArray(f[0],f[1],f[2],s),e.openGLTextureString=u}}var l=a.getProperty(),p=l.getIndependentComponents(),h=p?c:1,v=p?2*h:1,y=Wp(l,l.getRGBTransferFunction,h);if(e.colorTextureString!==y){var m=1024,x=m*v*3,g=new Uint8Array(x),d=l.getRGBTransferFunction();if(d){for(var C=new Float32Array(m*3),S=0;S<h;S++){d=l.getRGBTransferFunction(S);var T=d.getRange();if(d.getTable(T[0],T[1],m,C,1),p)for(var w=0;w<m*3;w++)g[S*m*6+w]=255*C[w],g[S*m*6+w+m*3]=255*C[w];else for(var E=0;E<m*3;E++)g[S*m*6+E]=255*C[E]}e.colorTexture.releaseGraphicsResources(e._openGLRenderWindow),e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw(m,v,3,He.UNSIGNED_CHAR,g)}else{for(var D=0;D<m*3;++D)g[D]=255*D/((m-1)*3),g[D+1]=255*D/((m-1)*3),g[D+2]=255*D/((m-1)*3);e.colorTexture.create2DFromRaw(m,1,3,He.UNSIGNED_CHAR,g)}e.colorTextureString=y}var b=Wp(l,l.getPiecewiseFunction,h);if(e.pwfTextureString!==b){var O=1024,M=O*v,R=new Uint8Array(M),N=l.getPiecewiseFunction();if(e.pwfTexture.releaseGraphicsResources(e._openGLRenderWindow),e.pwfTexture.resetFormatAndType(),N){for(var U=new Float32Array(M),W=new Float32Array(O),I=0;I<h;++I)if(N=l.getPiecewiseFunction(I),N===null)U.fill(1);else{var G=N.getRange();if(N.getTable(G[0],G[1],O,W,1),p)for(var F=0;F<O;F++)U[I*O*2+F]=W[F],U[I*O*2+F+O]=W[F];else for(var A=0;A<O;A++)U[I*O*2+A]=W[A]}e.pwfTexture.create2DFromRaw(O,v,1,He.FLOAT,U)}else R.fill(255),e.pwfTexture.create2DFromRaw(O,1,1,He.UNSIGNED_CHAR,R);e.pwfTextureString=b}var H="".concat(e.resliceGeom.getMTime(),"A").concat(e.renderable.getSlabThickness());if(!e.tris.getCABO().getElementCount()||e.VBOBuildString!==H){var $=de.newInstance({numberOfComponents:3,values:e.resliceGeom.getPoints().getData()});$.setName("points");var X=de.newInstance({numberOfComponents:1,values:e.resliceGeom.getPolys().getData()}),Y={points:$,cellOffset:0};if(e.renderable.getSlabThickness()>0){var q=e.resliceGeom.getPointData().getNormals();q?Y.normals=q:On("Slab mode requested without normals")}e.tris.getCABO().createVBO(X,"polys",Zt.SURFACE,Y)}e.VBOBuildString=H,e.VBOBuildTime.modified()}}},t.updateShaders=function(r,a,i){if(e.lastBoundBO=r,t.getNeedToRebuildShaders(r,a,i)){var o={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(o,a,i);var s=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(o.Vertex,o.Fragment,o.Geometry);s!==r.getProgram()&&(r.setProgram(s),r.getVAO().releaseGraphicsResources()),r.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(r.getProgram());r.getVAO().bind(),t.setMapperShaderParameters(r,a,i),t.setCameraShaderParameters(r,a,i),t.setPropertyShaderParameters(r,a,i)},t.setMapperShaderParameters=function(r,a,i){var o=r.getProgram();if(r.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){o.isUniformUsed("texture1")&&o.setUniformi("texture1",e.openGLTexture.getTextureUnit()),o.isAttributeUsed("vertexWC")&&(r.getVAO().addAttributeArray(o,r.getCABO(),"vertexWC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||On("Error setting vertexWC in shader VAO.")),o.isAttributeUsed("normalWC")&&(r.getVAO().addAttributeArray(o,r.getCABO(),"normalWC",r.getCABO().getNormalOffset(),r.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||On("Error setting normalWC in shader VAO.")),o.isUniformUsed("slabThickness")&&o.setUniformf("slabThickness",e.renderable.getSlabThickness()),o.isUniformUsed("spacing")&&o.setUniform3fv("spacing",e.currentInput.getSpacing()),o.isUniformUsed("slabType")&&o.setUniformi("slabType",e.renderable.getSlabType()),o.isUniformUsed("slabType")&&o.setUniformi("slabType",e.renderable.getSlabType()),o.isUniformUsed("slabTrapezoid")&&o.setUniformi("slabTrapezoid",e.renderable.getSlabTrapezoidIntegration());var s=r.getCABO().getCoordShiftAndScaleEnabled(),c=s?r.getCABO().getInverseShiftAndScaleMatrix():null;if(o.isUniformUsed("WCTCMatrix")){var u=e.currentInput;Oe(e.tmpMat4);var f=u.getBounds(),l=[f[1]-f[0],f[3]-f[2],f[5]-f[4]],p=[f[0],f[2],f[4]],h=[0,0,0,1];ss(e.tmpMat4,h,p,l),Ft(e.tmpMat4,e.tmpMat4),c&&Ke(e.tmpMat4,e.tmpMat4,c),o.setUniformMatrix("WCTCMatrix",e.tmpMat4)}r.getAttributeUpdateTime().modified()}if(e.haveSeenDepthRequest&&r.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),r.getProgram().isUniformUsed("coffset")){var v=t.getCoincidentParameters(a,i);r.getProgram().setUniformf("coffset",v.offset),r.getProgram().isUniformUsed("cfactor")&&r.getProgram().setUniformf("cfactor",v.factor)}},t.setCameraShaderParameters=function(r,a,i){var o=e._openGLCamera.getKeyMatrices(a),s=e._openGLImageSlice.getKeyMatrices(),c=r.getCABO().getCoordShiftAndScaleEnabled(),u=c?r.getCABO().getInverseShiftAndScaleMatrix():null,f=r.getProgram();f.isUniformUsed("MCPCMatrix")&&(Oe(e.tmpMat4),f.setUniformMatrix("MCPCMatrix",Hp([o.wcpc,s.mcwc,u],ya,e.tmpMat4))),f.isUniformUsed("MCVCMatrix")&&(Oe(e.tmpMat4),f.setUniformMatrix("MCVCMatrix",Hp([o.wcvc,s.mcwc,u],ya,e.tmpMat4)))},t.setPropertyShaderParameters=function(r,a,i){var o=r.getProgram(),s=i.getProperty(),c=s.getOpacity();o.setUniformf("opacity",c);var u=e.openGLTexture.getComponents(),f=s.getIndependentComponents();if(f)for(var l=0;l<u;++l)o.setUniformf("mix".concat(l),s.getComponentWeight(l));for(var p=e.openGLTexture.getVolumeInfo(),h=0;h<u;h++){var v=s.getColorWindow(),y=s.getColorLevel(),m=f?h:0,x=s.getRGBTransferFunction(m);if(x&&s.getUseLookupTableScalarRange()){var g=x.getRange();v=g[1]-g[0],y=.5*(g[1]+g[0])}var d=p.scale[h]/v,C=(p.offset[h]-y)/v+.5;o.setUniformf("cshift".concat(h),C),o.setUniformf("cscale".concat(h),d)}var S=e.colorTexture.getTextureUnit();o.setUniformi("colorTexture1",S);for(var T=0;T<u;T++){var w=1,E=0,D=f?T:0,b=s.getPiecewiseFunction(D);if(b){var O=b.getRange(),M=O[1]-O[0],R=.5*(O[0]+O[1]);w=p.scale[T]/M,E=(p.offset[T]-R)/M+.5}o.setUniformf("pwfshift".concat(T),E),o.setUniformf("pwfscale".concat(T),w)}var N=e.pwfTexture.getTextureUnit();o.setUniformi("pwfTexture1",N),o.setUniform4fv("backgroundColor",e.renderable.getBackgroundColor())},t.getNeedToRebuildShaders=function(r,a,i){var o=e.openGLTexture.getComponents(),s=i.getProperty().getIndependentComponents(),c=e.renderable.getSlabThickness(),u=e.renderable.getSlabType(),f=e.renderable.getSlabTrapezoidIntegration(),l=!1;return(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(l=!0),l||e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||r.getProgram()===0||e.lastTextureComponents!==o||e.lastIndependentComponents!==s||e.lastSlabThickness!==c||e.lastSlabType!==u||e.lastSlabTrapezoidIntegration!==f?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,e.lastTextureComponents=o,e.lastIndependentComponents=s,e.lastSlabThickness=c,e.lastSlabType=u,e.lastSlabTrapezoidIntegration=f,!0):!1},t.getShaderTemplate=function(r,a,i){r.Vertex=lx,r.Fragment=px,r.Geometry=""},t.replaceShaderValues=function(r,a,i){if(t.replaceShaderTCoord(r,a,i),t.replaceShaderPositionVC(r,a,i),e.haveSeenDepthRequest){var o=r.Fragment;o=ee.substitute(o,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,o=ee.substitute(o,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,r.Fragment=o}t.replaceShaderCoincidentOffset(r,a,i)},t.replaceShaderTCoord=function(r,a,i){var o=r.Vertex,s=r.Geometry,c=r.Fragment,u=["uniform mat4 WCTCMatrix;","out vec3 fragTexCoord;"],f=e.renderable.getSlabThickness();o=ee.substitute(o,"//VTK::TCoord::Dec",u).result;var l=["fragTexCoord = (WCTCMatrix * vertexWC).xyz;"];o=ee.substitute(o,"//VTK::TCoord::Impl",l).result;var p=e.openGLTexture.getComponents(),h=i.getProperty().getIndependentComponents(),v=["in vec3 fragTexCoord;","uniform highp sampler3D texture1;","uniform mat4 WCTCMatrix;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform float opacity;","uniform vec4 backgroundColor;"];if(h){for(var y=1;y<p;y++)v=v.concat(["uniform float cshift".concat(y,";"),"uniform float cscale".concat(y,";"),"uniform float pwfshift".concat(y,";"),"uniform float pwfscale".concat(y,";")]);switch(p){case 1:v=v.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:v=v.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:v=v.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:v=v.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:On("Unsupported number of independent coordinates.")}}f>0&&(v=v.concat(["uniform vec3 spacing;","uniform float slabThickness;","uniform int slabType;","uniform int slabTrapezoid;"]),v=v.concat(["vec4 compositeValue(vec4 currVal, vec4 valToComp, int trapezoid)","{","  vec4 retVal = vec4(1.0);","  if (slabType == 0) // min","  {","    retVal = min(currVal, valToComp);","  }","  else if (slabType == 1) // max","  {","    retVal = max(currVal, valToComp);","  }","  else if (slabType == 3) // sum","  {","    retVal = currVal + (trapezoid > 0 ? 0.5 * valToComp : valToComp); ","  }","  else // mean","  {","    retVal = currVal + (trapezoid > 0 ? 0.5 * valToComp : valToComp); ","  }","  return retVal;","}"])),c=ee.substitute(c,"//VTK::TCoord::Dec",v).result;var m=["if (any(greaterThan(fragTexCoord, vec3(1.0))) || any(lessThan(fragTexCoord, vec3(0.0))))","{","  // set the background color and exit","  gl_FragData[0] = backgroundColor;","  return;","}","vec4 tvalue = texture(texture1, fragTexCoord);"];if(f>0&&(m=m.concat(["// Get the first and last samples","int numSlices = 1;","vec3 normalxspacing = normalWCVSOutput * spacing * 0.5;","float distTraveled = length(normalxspacing);","int trapezoid = 0;","while (distTraveled < slabThickness * 0.5)","{","  distTraveled += length(normalxspacing);","  float fnumSlices = float(numSlices);","  if (distTraveled > slabThickness * 0.5)","  {","    // Before stepping outside the slab, sample at the boundaries","    normalxspacing = normalWCVSOutput * slabThickness * 0.5 / fnumSlices;","    trapezoid = slabTrapezoid;","  }","  vec3 fragTCoordNeg = (WCTCMatrix * vec4(vertexWCVSOutput.xyz - fnumSlices * normalxspacing, 1.0)).xyz;","  if (!any(greaterThan(fragTCoordNeg, vec3(1.0))) && !any(lessThan(fragTCoordNeg, vec3(0.0))))","  {","    vec4 newVal = texture(texture1, fragTCoordNeg);","    tvalue = compositeValue(tvalue, newVal, trapezoid);","    numSlices += 1;","  }","  vec3 fragTCoordPos = (WCTCMatrix * vec4(vertexWCVSOutput.xyz + fnumSlices * normalxspacing, 1.0)).xyz;","  if (!any(greaterThan(fragTCoordNeg, vec3(1.0))) && !any(lessThan(fragTCoordNeg, vec3(0.0))))","  {","    vec4 newVal = texture(texture1, fragTCoordPos);","    tvalue = compositeValue(tvalue, newVal, trapezoid);","    numSlices += 1;","  }","}","// Finally, if slab type is *mean*, divide the sum by the numSlices","if (slabType == 2)","{","  tvalue = tvalue / float(numSlices);","}"])),h){for(var x=["r","g","b","a"],g=0;g<p;++g)m=m.concat(["vec3 tcolor".concat(g," = mix").concat(g," * texture2D(colorTexture1, vec2(tvalue.").concat(x[g]," * cscale").concat(g," + cshift").concat(g,", height").concat(g,")).rgb;"),"float compWeight".concat(g," = mix").concat(g," * texture2D(pwfTexture1, vec2(tvalue.").concat(x[g]," * pwfscale").concat(g," + pwfshift").concat(g,", height").concat(g,")).r;")]);switch(p){case 1:m=m.concat(["gl_FragData[0] = vec4(tcolor0.rgb, compWeight0 * opacity);"]);break;case 2:m=m.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:m=m.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:m=m.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:On("Unsupported number of independent coordinates.")}}else switch(p){case 1:m=m.concat(["// Dependent components","float intensity = tvalue.r;","vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;","float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;","gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);"]);break;case 2:m=m.concat(["float intensity = tvalue.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tvalue.g + pwfshift0);"]);break;case 3:m=m.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]);break;default:m=m.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"])}c=ee.substitute(c,"//VTK::TCoord::Impl",m).result,r.Vertex=o,r.Fragment=c,r.Geometry=s},t.replaceShaderPositionVC=function(r,a,i){var o=r.Vertex,s=r.Geometry,c=r.Fragment,u=e.renderable.getSlabThickness(),f=["attribute vec4 vertexWC;"];f=f.concat(["//".concat(t.getMTime()).concat(e.resliceGeomUpdateString)]),u>0&&(f=f.concat(["attribute vec3 normalWC;","varying vec3 normalWCVSOutput;","varying vec4 vertexWCVSOutput;"])),o=ee.substitute(o,"//VTK::PositionVC::Dec",f).result;var l=["gl_Position = MCPCMatrix * vertexWC;"];u>0&&(l=l.concat(["normalWCVSOutput = normalWC;","vertexWCVSOutput = vertexWC;"])),o=ee.substitute(o,"//VTK::PositionVC::Impl",l).result,o=ee.substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result;var p=[];u>0&&(p=p.concat(["varying vec3 normalWCVSOutput;","varying vec4 vertexWCVSOutput;"])),c=ee.substitute(c,"//VTK::PositionVC::Dec",p).result,r.Vertex=o,r.Geometry=s,r.Fragment=c};function n(r){Ji.normalize(r);for(var a=[0,0,0],i=0;i<3;++i){mc(a),a[i]=1;var o=Ji.dot(r,a);if(o<-.999||o>.999)return[!0,i]}return[!1,2]}t.updateResliceGeometry=function(){var r="",a=e.currentInput,i=a==null?void 0:a.getBounds(),o=!0,s=2,c=e.renderable.getSlicePolyData(),u=e.renderable.getSlicePlane();if(c)r=r.concat("PolyData".concat(c.getMTime()));else if(u){r=r.concat("Plane".concat(u.getMTime())),a&&(r=r.concat("Image".concat(a.getMTime())));var f=n(u.getNormal()),l=ze(f,2);o=l[0],s=l[1]}else{var p=Fr.newInstance();p.setNormal(0,0,1);var h=[0,1,0,1,0,1];a&&(h=i),p.setOrigin(h[0],h[2],.5*(h[5]+h[4])),e.renderable.setSlicePlane(p),r=r.concat("Plane".concat(u==null?void 0:u.getMTime())),a&&(r=r.concat("Image".concat(a.getMTime())))}if(!e.resliceGeom||e.resliceGeomUpdateString!==r){var v;if(c)e.resliceGeom||(e.resliceGeom=Ye.newInstance()),e.resliceGeom.getPoints().setData(c.getPoints().getData(),3),e.resliceGeom.getPolys().setData(c.getPolys().getData(),1),e.resliceGeom.getPointData().setNormals(c.getPointData().getNormals());else if(u){var y=a?i:[0,1,0,1,0,1];if(o){for(var D=new Float32Array(12),b=u.getOrigin(),O=[(s+1)%3,(s+2)%3].sort(),M=0,R=0;R<2;++R)for(var N=0;N<2;++N)D[M+s]=b[s],D[M+O[0]]=y[2*O[0]+N],D[M+O[1]]=y[2*O[1]+R],M+=3;var U=new Uint16Array(8);U[0]=3,U[1]=0,U[2]=1,U[3]=3,U[4]=3,U[5]=0,U[6]=3,U[7]=2;var W=u.getNormal();Ji.normalize(W);for(var I=new Float32Array(12),G=0;G<4;++G)I[3*G]=W[0],I[3*G+1]=W[1],I[3*G+2]=W[2];e.resliceGeom||(e.resliceGeom=Ye.newInstance()),e.resliceGeom.getPoints().setData(D,3),e.resliceGeom.getPolys().setData(U,1);var F=de.newInstance({numberOfComponents:3,values:I,name:"Normals"});e.resliceGeom.getPointData().setNormals(F)}else{var m=ax.newInstance();m.setCenter(.5*(y[0]+y[1]),.5*(y[2]+y[3]),.5*(y[4]+y[5])),m.setXLength(y[1]-y[0]),m.setYLength(y[3]-y[2]),m.setZLength(y[5]-y[4]);var x=fx.newInstance();x.setInputConnection(m.getOutputPort()),x.setCutFunction(u);var g=J7.newInstance();g.setInputConnection(x.getOutputPort()),g.update(),e.resliceGeom||(e.resliceGeom=Ye.newInstance());var d=g.getOutputData();e.resliceGeom.getPoints().setData(d.getPoints().getData(),3),e.resliceGeom.getPolys().setData(d.getPolys().getData(),1),e.resliceGeom.getPointData().setNormals(d.getPointData().getNormals());var C=u.getNormal(),S=e.resliceGeom.getNumberOfPoints();Ji.normalize(C);for(var T=new Float32Array(S*3),w=0;w<S;++w)T[3*w]=C[0],T[3*w+1]=C[1],T[3*w+2]=C[2];var E=de.newInstance({numberOfComponents:3,values:T,name:"Normals"});e.resliceGeom.getPointData().setNormals(E)}}else On("Something went wrong.","A default slice plane should have been created in the beginning of","updateResliceGeometry.");e.resliceGeomUpdateString=r,(v=e.resliceGeom)===null||v===void 0||v.modified()}},t.setOpenGLTexture=function(r){r&&(e.openGLTexture=r,e._externalOpenGLTexture=!0)}}var gx={VBOBuildTime:{},VBOBuildString:null,haveSeenDepthRequest:!1,lastHaveSeenDepthRequest:!1,lastIndependentComponents:!1,lastTextureComponents:0,lastSlabThickness:0,lastSlabTrapezoidIntegration:0,lastSlabType:-1,openGLTexture:null,openGLTextureString:null,colorTextureString:null,pwfTextureString:null,resliceGeom:null,resliceGeomUpdateString:null,tris:null,colorTexture:null,pwfTexture:null,_externalOpenGLTexture:!1};function dx(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,gx,n),xt.extend(t,e,n),Dr.implementReplaceShaderCoincidentOffset(t,e,n),Dr.implementBuildShadersWithReplacements(t,e,n),e.tris=Ht.newInstance(),e.openGLTexture=Fe.newInstance(),e.colorTexture=Fe.newInstance(),e.pwfTexture=Fe.newInstance(),e.VBOBuildTime={},ht(e.VBOBuildTime),e.tmpMat4=Oe(new Float64Array(16)),jt(t,e,["openGLTexture"]),vx(t,e)}var yx=Je(dx,"vtkOpenGLImageResliceMapper");ft("vtkImageResliceMapper",yx);var mx={NONE:-1,I:0,J:1,K:2,X:3,Y:4,Z:5},Y0={SlicingMode:mx},ea=Me,tr=Y0.SlicingMode;function $p(t,e,n){var r=e.apply(t);if(r){var a=t.getIndependentComponents();return"".concat(t.getMTime(),"-").concat(a,"-").concat(n)}return"0"}function xx(t,e){e.classHierarchy.push("vtkOpenGLImageMapper"),t.buildPass=function(n){if(n){e.currentRenderPass=null,e.openGLImageSlice=t.getFirstAncestorOfType("vtkOpenGLImageSlice"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.pwfTexture.setOpenGLRenderWindow(e._openGLRenderWindow);var r=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(r.getActiveCamera()),e.renderable.isA("vtkImageMapper")&&e.renderable.getSliceAtFocalPoint()&&e.renderable.setSliceFromCamera(r.getActiveCamera())}},t.translucentPass=function(n,r){n&&(e.currentRenderPass=r,t.render())},t.zBufferPass=function(n){n&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=function(n){return t.zBufferPass(n)},t.opaquePass=function(n){n&&t.render()},t.getCoincidentParameters=function(n,r){return e.renderable.getResolveCoincidentTopology()?e.renderable.getCoincidentTopologyPolygonOffsetParameters():null},t.render=function(){var n=e.openGLImageSlice.getRenderable(),r=e._openGLRenderer.getRenderable();t.renderPiece(r,n)},t.getShaderTemplate=function(n,r,a){n.Vertex=z0,n.Fragment=Ja,n.Geometry=""},t.replaceShaderValues=function(n,r,a){var i=n.Vertex,o=n.Fragment;i=ee.substitute(i,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,i=ee.substitute(i,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result,i=ee.substitute(i,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result,i=ee.substitute(i,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result;var s=e.openGLTexture.getComponents(),c=a.getProperty().getIndependentComponents(),u=["varying vec2 tcoordVCVSOutput;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;","uniform sampler2D texture1;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform float opacity;"];if(c){for(var f=1;f<s;f++)u=u.concat(["uniform float cshift".concat(f,";"),"uniform float cscale".concat(f,";"),"uniform float pwfshift".concat(f,";"),"uniform float pwfscale".concat(f,";")]);switch(s){case 1:u=u.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:u=u.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:u=u.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:u=u.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:ea("Unsupported number of independent coordinates.")}}if(o=ee.substitute(o,"//VTK::TCoord::Dec",u).result,c){for(var l=["r","g","b","a"],p=["vec4 tvalue = texture2D(texture1, tcoordVCVSOutput);"],h=0;h<s;h++)p=p.concat(["vec3 tcolor".concat(h," = mix").concat(h," * texture2D(colorTexture1, vec2(tvalue.").concat(l[h]," * cscale").concat(h," + cshift").concat(h,", height").concat(h,")).rgb;"),"float compWeight".concat(h," = mix").concat(h," * texture2D(pwfTexture1, vec2(tvalue.").concat(l[h]," * pwfscale").concat(h," + pwfshift").concat(h,", height").concat(h,")).r;")]);switch(s){case 1:p=p.concat(["gl_FragData[0] = vec4(tcolor0.rgb, opacity);"]);break;case 2:p=p.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:p=p.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:p=p.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:ea("Unsupported number of independent coordinates.")}o=ee.substitute(o,"//VTK::TCoord::Impl",p).result}else switch(s){case 1:o=ee.substitute(o,"//VTK::TCoord::Impl",["float intensity = texture2D(texture1, tcoordVCVSOutput).r;","vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;","float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;","gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);"]).result;break;case 2:o=ee.substitute(o,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","float intensity = tcolor.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tcolor.g + pwfshift0);"]).result;break;case 3:o=ee.substitute(o,"//VTK::TCoord::Impl",["vec4 tcolor = cscale0*texture2D(texture1, tcoordVCVSOutput.st) + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]).result;break;default:o=ee.substitute(o,"//VTK::TCoord::Impl",["vec4 tcolor = cscale0*texture2D(texture1, tcoordVCVSOutput.st) + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"]).result}e.haveSeenDepthRequest&&(o=ee.substitute(o,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,o=ee.substitute(o,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),n.Vertex=i,n.Fragment=o,t.replaceShaderClip(n,r,a),t.replaceShaderCoincidentOffset(n,r,a)},t.replaceShaderClip=function(n,r,a){var i=n.Vertex,o=n.Fragment;if(e.renderable.getNumberOfClippingPlanes()){var s=e.renderable.getNumberOfClippingPlanes();s>6&&(Me("OpenGL has a limit of 6 clipping planes"),s=6),i=ee.substitute(i,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[6];","varying float clipDistancesVSOutput[6];"]).result,i=ee.substitute(i,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,o=ee.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[6];"]).result,o=ee.substitute(o,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}n.Vertex=i,n.Fragment=o},t.getNeedToRebuildShaders=function(n,r,a){var i=e.openGLTexture.getComponents(),o=a.getProperty().getIndependentComponents(),s=!1;return(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(s=!0),s||e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||n.getProgram()===0||e.lastTextureComponents!==i||e.lastIndependentComponents!==o?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,e.lastTextureComponents=i,e.lastIndependentComponents=o,!0):!1},t.updateShaders=function(n,r,a){if(e.lastBoundBO=n,t.getNeedToRebuildShaders(n,r,a)){var i={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(i,r,a);var o=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(i.Vertex,i.Fragment,i.Geometry);o!==n.getProgram()&&(n.setProgram(o),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),t.setMapperShaderParameters(n,r,a),t.setCameraShaderParameters(n,r,a),t.setPropertyShaderParameters(n,r,a)},t.setMapperShaderParameters=function(n,r,a){n.getCABO().getElementCount()&&(e.VBOBuildTime>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&(n.getProgram().isAttributeUsed("vertexMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"vertexMC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||ea("Error setting vertexMC in shader VAO.")),n.getProgram().isAttributeUsed("tcoordMC")&&n.getCABO().getTCoordOffset()&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"tcoordMC",n.getCABO().getTCoordOffset(),n.getCABO().getStride(),e.context.FLOAT,n.getCABO().getTCoordComponents(),e.context.FALSE)||ea("Error setting tcoordMC in shader VAO.")),n.getAttributeUpdateTime().modified());var i=e.openGLTexture.getTextureUnit();n.getProgram().setUniformi("texture1",i);var o=e.openGLTexture.getComponents(),s=a.getProperty().getIndependentComponents();if(s)for(var c=0;c<o;c++)n.getProgram().setUniformf("mix".concat(c),a.getProperty().getComponentWeight(c));for(var u=e.openGLTexture.getShiftAndScale(),f=0;f<o;f++){var l=a.getProperty().getColorWindow(),p=a.getProperty().getColorLevel(),h=s?f:0,v=a.getProperty().getRGBTransferFunction(h);if(v&&a.getProperty().getUseLookupTableScalarRange()){var y=v.getRange();l=y[1]-y[0],p=.5*(y[1]+y[0])}var m=u.scale/l,x=(u.shift-p)/l+.5;n.getProgram().setUniformf("cshift".concat(f),x),n.getProgram().setUniformf("cscale".concat(f),m)}for(var g=0;g<o;g++){var d=1,C=0,S=s?g:0,T=a.getProperty().getPiecewiseFunction(S);if(T){var w=T.getRange(),E=w[1]-w[0],D=.5*(w[0]+w[1]);d=u.scale/E,C=(u.shift-D)/E+.5}n.getProgram().setUniformf("pwfshift".concat(g),C),n.getProgram().setUniformf("pwfscale".concat(g),d)}if(e.haveSeenDepthRequest&&n.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),n.getProgram().isUniformUsed("coffset")){var b=t.getCoincidentParameters(r,a);n.getProgram().setUniformf("coffset",b.offset),n.getProgram().isUniformUsed("cfactor")&&n.getProgram().setUniformf("cfactor",b.factor)}var O=e.colorTexture.getTextureUnit();n.getProgram().setUniformi("colorTexture1",O);var M=e.pwfTexture.getTextureUnit();if(n.getProgram().setUniformi("pwfTexture1",M),e.renderable.getNumberOfClippingPlanes()){var R=e.renderable.getNumberOfClippingPlanes();R>6&&(Me("OpenGL has a limit of 6 clipping planes"),R=6);var N=n.getCABO().getCoordShiftAndScaleEnabled(),U=N?n.getCABO().getInverseShiftAndScaleMatrix():null,W=U?St(e.imagematinv,a.getMatrix()):a.getMatrix();U&&(We(W,W),Ke(W,W,U),We(W,W)),We(e.imagemat,e.currentInput.getIndexToWorld()),Ke(e.imagematinv,W,e.imagemat);for(var I=[],G=0;G<R;G++){var F=[];e.renderable.getClippingPlaneInDataCoords(e.imagematinv,G,F);for(var A=0;A<4;A++)I.push(F[A])}n.getProgram().setUniformi("numClipPlanes",R),n.getProgram().setUniform4fv("clipPlanes",I)}},t.setCameraShaderParameters=function(n,r,a){var i=n.getProgram(),o=e.openGLImageSlice.getKeyMatrices(),s=e.currentInput,c=s.getIndexToWorld();Ke(e.imagemat,o.mcwc,c);var u=e.openGLCamera.getKeyMatrices(r);if(Ke(e.imagemat,u.wcpc,e.imagemat),n.getCABO().getCoordShiftAndScaleEnabled()){var f=n.getCABO().getInverseShiftAndScaleMatrix();Ke(e.imagemat,e.imagemat,f)}i.setUniformMatrix("MCPCMatrix",e.imagemat)},t.setPropertyShaderParameters=function(n,r,a){var i=n.getProgram(),o=a.getProperty(),s=o.getOpacity();i.setUniformf("opacity",s)},t.renderPieceStart=function(n,r){t.updateBufferObjects(n,r),e.lastBoundBO=null},t.renderPieceDraw=function(n,r){var a=e.context;e.openGLTexture.activate(),e.colorTexture.activate(),e.pwfTexture.activate(),e.tris.getCABO().getElementCount()&&(t.updateShaders(e.tris,n,r),a.drawArrays(a.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release()),e.openGLTexture.deactivate(),e.colorTexture.deactivate(),e.pwfTexture.deactivate()},t.renderPieceFinish=function(n,r){},t.renderPiece=function(n,r){if(t.invokeEvent({type:"StartEvent"}),e.renderable.update(),e.currentInput=e.renderable.getCurrentImage(),t.invokeEvent({type:"EndEvent"}),!e.currentInput){ea("No input!");return}t.renderPieceStart(n,r),t.renderPieceDraw(n,r),t.renderPieceFinish(n,r)},t.computeBounds=function(n,r){if(!t.getInput()){Wn(e.bounds);return}e.bounds=t.getInput().getBounds()},t.updateBufferObjects=function(n,r){t.getNeedToRebuildBufferObjects(n,r)&&t.buildBufferObjects(n,r)},t.getNeedToRebuildBufferObjects=function(n,r){return e.VBOBuildTime.getMTime()<t.getMTime()||e.VBOBuildTime.getMTime()<r.getMTime()||e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<r.getProperty().getMTime()||e.VBOBuildTime.getMTime()<e.currentInput.getMTime()},t.buildBufferObjects=function(n,r){var a=e.currentInput;if(a){var i=a.getPointData()&&a.getPointData().getScalars();if(i){var o=i.getDataType(),s=i.getNumberOfComponents(),c=r.getProperty(),u=c.getInterpolationType();u===ei.NEAREST?(e.colorTexture.setMinificationFilter(Ee.NEAREST),e.colorTexture.setMagnificationFilter(Ee.NEAREST),e.pwfTexture.setMinificationFilter(Ee.NEAREST),e.pwfTexture.setMagnificationFilter(Ee.NEAREST)):(e.colorTexture.setMinificationFilter(Ee.LINEAR),e.colorTexture.setMagnificationFilter(Ee.LINEAR),e.pwfTexture.setMinificationFilter(Ee.LINEAR),e.pwfTexture.setMagnificationFilter(Ee.LINEAR));var f=c.getIndependentComponents(),l=f?s:1,p=f?2*l:1,h=$p(c,c.getRGBTransferFunction,l);if(e.colorTextureString!==h){var v=1024,y=v*p*3,m=new Uint8Array(y),x=c.getRGBTransferFunction();if(x){for(var g=new Float32Array(v*3),d=0;d<l;d++){x=c.getRGBTransferFunction(d);var C=x.getRange();if(x.getTable(C[0],C[1],v,g,1),f)for(var S=0;S<v*3;S++)m[d*v*6+S]=255*g[S],m[d*v*6+S+v*3]=255*g[S];else for(var T=0;T<v*3;T++)m[d*v*6+T]=255*g[T]}e.colorTexture.create2DFromRaw(v,p,3,He.UNSIGNED_CHAR,m)}else{for(var w=0;w<v*3;++w)m[w]=255*w/((v-1)*3),m[w+1]=255*w/((v-1)*3),m[w+2]=255*w/((v-1)*3);e.colorTexture.create2DFromRaw(v,1,3,He.UNSIGNED_CHAR,m)}e.colorTextureString=h}var E=$p(c,c.getPiecewiseFunction,l);if(e.pwfTextureString!==E){var D=1024,b=D*p,O=new Uint8Array(b),M=c.getPiecewiseFunction();if(e.pwfTexture.resetFormatAndType(),M){for(var R=new Float32Array(b),N=new Float32Array(D),U=0;U<l;++U)if(M=c.getPiecewiseFunction(U),M===null)R.fill(1);else{var W=M.getRange();if(M.getTable(W[0],W[1],D,N,1),f)for(var I=0;I<D;I++)R[U*D*2+I]=N[I],R[U*D*2+I+D]=N[I];else for(var G=0;G<D;G++)R[U*D*2+G]=N[G]}e.pwfTexture.create2DFromRaw(D,p,1,He.FLOAT,R)}else O.fill(255),e.pwfTexture.create2DFromRaw(D,1,1,He.UNSIGNED_CHAR,O);e.pwfTextureString=E}var F=e.renderable.getClosestIJKAxis(),A=F.ijkMode,H=e.renderable.getSlice();A!==e.renderable.getSlicingMode()&&(H=e.renderable.getSliceAtPosition(H));var $=e.renderable.isA("vtkImageArrayMapper")?e.renderable.getSubSlice():Math.round(H),X=a.getExtent(),Y;A===tr.I&&(Y=$-X[0]),A===tr.J&&(Y=$-X[2]),(A===tr.K||A===tr.NONE)&&(Y=$-X[4]);var q="".concat(H,"A").concat(a.getMTime(),"A").concat(i.getMTime(),"B").concat(t.getMTime(),"C").concat(e.renderable.getSlicingMode(),"D").concat(r.getProperty().getInterpolationType());if(e.VBOBuildString!==q){var J,ne,Q=a.getDimensions();u===ei.NEAREST?(new Set([1,3,4]).has(s)&&o===He.UNSIGNED_CHAR&&!f&&e.openGLTexture.setGenerateMipmap(!0),e.openGLTexture.setMinificationFilter(Ee.NEAREST),e.openGLTexture.setMagnificationFilter(Ee.NEAREST)):(s===4&&o===He.UNSIGNED_CHAR&&!f?(e.openGLTexture.setGenerateMipmap(!0),e.openGLTexture.setMinificationFilter(Ee.LINEAR_MIPMAP_LINEAR)):e.openGLTexture.setMinificationFilter(Ee.LINEAR),e.openGLTexture.setMagnificationFilter(Ee.LINEAR)),e.openGLTexture.setWrapS(Ya.CLAMP_TO_EDGE),e.openGLTexture.setWrapT(Ya.CLAMP_TO_EDGE);for(var te=Q[0]*Q[1]*s,L=new Float32Array(12),_=new Float32Array(8),V=0;V<4;V++)_[V*2]=V%2?1:0,_[V*2+1]=V>1?1:0;var k=[tr.X,tr.Y,tr.Z].includes(e.renderable.getSlicingMode())?H:$,P=a.getSpatialExtent(),j=i.getData(),z=null;if(A===tr.I){z=new j.constructor(Q[2]*Q[1]*s);for(var Z=0,re=0;re<Q[2];re++)for(var ie=0;ie<Q[1];ie++){var oe=(Y+ie*Q[0]+re*Q[0]*Q[1])*s;Z=(re*Q[1]+ie)*s,z.set(j.subarray(oe,oe+s),Z)}Q[0]=Q[1],Q[1]=Q[2],L[0]=k,L[1]=P[2],L[2]=P[4],L[3]=k,L[4]=P[3],L[5]=P[4],L[6]=k,L[7]=P[2],L[8]=P[5],L[9]=k,L[10]=P[3],L[11]=P[5]}else if(A===tr.J){z=new j.constructor(Q[2]*Q[0]*s);for(var he=0,ye=0;ye<Q[2];ye++)for(var Re=0;Re<Q[0];Re++){var De=(Re+Y*Q[0]+ye*Q[0]*Q[1])*s;he=(ye*Q[0]+Re)*s,z.set(j.subarray(De,De+s),he)}Q[1]=Q[2],L[0]=P[0],L[1]=k,L[2]=P[4],L[3]=P[1],L[4]=k,L[5]=P[4],L[6]=P[0],L[7]=k,L[8]=P[5],L[9]=P[1],L[10]=k,L[11]=P[5]}else A===tr.K||A===tr.NONE?(z=j.subarray(Y*te,(Y+1)*te),L[0]=P[0],L[1]=P[2],L[2]=k,L[3]=P[1],L[4]=P[2],L[5]=k,L[6]=P[0],L[7]=P[3],L[8]=k,L[9]=P[1],L[10]=P[3],L[11]=k):ea("Reformat slicing not yet supported.");e.openGLTexture.create2DFilterableFromRaw(Q[0],Q[1],s,i.getDataType(),z,(J=(ne=e.renderable).getPreferSizeOverAccuracy)===null||J===void 0?void 0:J.call(ne)),e.openGLTexture.activate(),e.openGLTexture.sendParameters(),e.openGLTexture.deactivate();var ge=de.newInstance({numberOfComponents:3,values:L});ge.setName("points");var $e=de.newInstance({numberOfComponents:2,values:_});$e.setName("tcoords");var K=new Uint16Array(8);K[0]=3,K[1]=0,K[2]=1,K[3]=3,K[4]=3,K[5]=0,K[6]=3,K[7]=2;var we=de.newInstance({numberOfComponents:1,values:K});e.tris.getCABO().createVBO(we,"polys",Zt.SURFACE,{points:ge,tcoords:$e,cellOffset:0}),e.VBOBuildTime.modified(),e.VBOBuildString=q}}}}}var Cx={VBOBuildTime:0,VBOBuildString:null,openGLTexture:null,tris:null,imagemat:null,imagematinv:null,colorTexture:null,pwfTexture:null,lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastTextureComponents:0};function Sx(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Cx,n),xt.extend(t,e,n),Dr.implementReplaceShaderCoincidentOffset(t,e,n),Dr.implementBuildShadersWithReplacements(t,e,n),e.tris=Ht.newInstance(),e.openGLTexture=Fe.newInstance({resizable:!0}),e.colorTexture=Fe.newInstance({resizable:!0}),e.pwfTexture=Fe.newInstance({resizable:!0}),e.imagemat=Oe(new Float64Array(16)),e.imagematinv=Oe(new Float64Array(16)),dt(t,e,[]),e.VBOBuildTime={},ht(e.VBOBuildTime),xx(t,e)}var Tx=Je(Sx,"vtkOpenGLImageMapper");ft("vtkAbstractImageMapper",Tx);function Kp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function wx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kp(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kp(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Do=B.vtkErrorMacro;function Xp(t,e,n){var r=e.apply(t);if(r){var a=t.getIndependentComponents();return"".concat(t.getMTime(),"-").concat(a,"-").concat(n)}return"0"}function Ex(t,e){e.classHierarchy.push("vtkOpenGLImageCPRMapper"),t.buildPass=function(n){n&&(e.currentRenderPass=null,e.openGLImageSlice=t.getFirstAncestorOfType("vtkOpenGLImageSlice"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext(),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.volumeTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.pwfTexture.setOpenGLRenderWindow(e._openGLRenderWindow))},t.opaquePass=function(n,r){n&&(e.currentRenderPass=r,t.render())},t.opaqueZBufferPass=function(n){n&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.getCoincidentParameters=function(n,r){return e.renderable.getResolveCoincidentTopology()?e.renderable.getCoincidentTopologyPolygonOffsetParameters():null},t.render=function(){var n=e.openGLImageSlice.getRenderable(),r=e._openGLRenderer.getRenderable();t.renderPiece(r,n)},t.renderPiece=function(n,r){t.invokeEvent({type:"StartEvent"}),e.renderable.update(),t.invokeEvent({type:"EndEvent"}),e.renderable.preRenderCheck()&&(e.currentImageDataInput=e.renderable.getInputData(0),e.currentCenterlineInput=e.renderable.getOrientedCenterline(),t.renderPieceStart(n,r),t.renderPieceDraw(n,r),t.renderPieceFinish(n,r))},t.renderPieceStart=function(n,r){t.updateBufferObjects(n,r)},t.renderPieceDraw=function(n,r){var a=e.context;e.volumeTexture.activate(),e.colorTexture.activate(),e.pwfTexture.activate(),e.tris.getCABO().getElementCount()&&(t.updateShaders(e.tris,n,r),a.drawArrays(a.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release()),e.volumeTexture.deactivate(),e.colorTexture.deactivate(),e.pwfTexture.deactivate()},t.renderPieceFinish=function(n,r){},t.updateBufferObjects=function(n,r){t.getNeedToRebuildBufferObjects(n,r)&&t.buildBufferObjects(n,r)},t.getNeedToRebuildBufferObjects=function(n,r){var a=e.VBOBuildTime.getMTime();return a<t.getMTime()||a<e.renderable.getMTime()||a<r.getMTime()||a<e.currentImageDataInput.getMTime()||a<e.currentCenterlineInput.getMTime()},t.buildBufferObjects=function(n,r){var a=e.currentImageDataInput,i=e.currentCenterlineInput,o=r.getProperty();o.getInterpolationType()===ei.NEAREST?(e.volumeTexture.setMinificationFilter(Ee.NEAREST),e.volumeTexture.setMagnificationFilter(Ee.NEAREST),e.colorTexture.setMinificationFilter(Ee.NEAREST),e.colorTexture.setMagnificationFilter(Ee.NEAREST),e.pwfTexture.setMinificationFilter(Ee.NEAREST),e.pwfTexture.setMagnificationFilter(Ee.NEAREST)):(e.volumeTexture.setMinificationFilter(Ee.LINEAR),e.volumeTexture.setMagnificationFilter(Ee.LINEAR),e.colorTexture.setMinificationFilter(Ee.LINEAR),e.colorTexture.setMagnificationFilter(Ee.LINEAR),e.pwfTexture.setMinificationFilter(Ee.LINEAR),e.pwfTexture.setMagnificationFilter(Ee.LINEAR));var s=a.getMTime();if(e.volumeTextureTime!==s){var c=a.getDimensions(),u=a.getPointData().getScalars();if(!u)return;e.volumeTexture.setOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),e.volumeTexture.releaseGraphicsResources(e._openGLRenderWindow),e.volumeTexture.resetFormatAndType(),e.volumeTexture.create3DFilterableFromRaw(c[0],c[1],c[2],u.getNumberOfComponents(),u.getDataType(),u.getData(),e.renderable.getPreferSizeOverAccuracy()),e.volumeTextureTime=s}var f=a.getPointData()&&a.getPointData().getScalars();if(f){var l=f.getNumberOfComponents(),p=r.getProperty(),h=p.getIndependentComponents(),v=h?l:1,y=h?2*v:1,m=Xp(p,p.getRGBTransferFunction,v);if(e.colorTextureString!==m){var x=1024,g=x*y*3,d=new Uint8Array(g),C=p.getRGBTransferFunction();if(C){for(var S=new Float32Array(x*3),T=0;T<v;T++){C=p.getRGBTransferFunction(T);var w=C.getRange();if(C.getTable(w[0],w[1],x,S,1),h)for(var E=0;E<x*3;E++)d[T*x*6+E]=255*S[E],d[T*x*6+E+x*3]=255*S[E];else for(var D=0;D<x*3;D++)d[T*x*6+D]=255*S[D]}e.colorTexture.releaseGraphicsResources(e._openGLRenderWindow),e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw(x,y,3,He.UNSIGNED_CHAR,d)}else{for(var b=0;b<x*3;++b)d[b]=255*b/((x-1)*3),d[b+1]=255*b/((x-1)*3),d[b+2]=255*b/((x-1)*3);e.colorTexture.create2DFromRaw(x,1,3,He.UNSIGNED_CHAR,d)}e.colorTextureString=m}var O=Xp(p,p.getPiecewiseFunction,v);if(e.pwfTextureString!==O){var M=1024,R=M*y,N=new Uint8Array(R),U=p.getPiecewiseFunction();if(e.pwfTexture.releaseGraphicsResources(e._openGLRenderWindow),e.pwfTexture.resetFormatAndType(),U){for(var W=new Float32Array(R),I=new Float32Array(M),G=0;G<v;++G)if(U=p.getPiecewiseFunction(G),U===null)W.fill(1);else{var F=U.getRange();if(U.getTable(F[0],F[1],M,I,1),h)for(var A=0;A<M;A++)W[G*M*2+A]=I[A],W[G*M*2+A+M]=I[A];else for(var H=0;H<M;H++)W[G*M*2+H]=I[H]}e.pwfTexture.create2DFromRaw(M,y,1,He.FLOAT,W)}else N.fill(255),e.pwfTexture.create2DFromRaw(M,1,1,He.UNSIGNED_CHAR,N);e.pwfTextureString=O}if(e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<i.getMTime()){for(var $=i.getNumberOfPoints(),X=$<=1?0:$-1,Y=i.getDistancesToFirstPoint(),q=e.renderable.getHeight(),J=4*X,ne=new Float32Array(3*J),Q=e.renderable.getWidth(),te=0,L=0;te<X;++te)ne.set([0,q-Y[te],0],L),L+=3,ne.set([Q,q-Y[te],0],L),L+=3,ne.set([Q,q-Y[te+1],0],L),L+=3,ne.set([0,q-Y[te+1],0],L),L+=3;var _=de.newInstance({numberOfComponents:3,values:ne});_.setName("points");for(var V=new Uint16Array(5*X),k=0,P=0,j=0;k<X;++k)V.set([4,j+3,j+2,j+1,j],P),P+=5,j+=4;for(var z=de.newInstance({numberOfComponents:1,values:V}),Z=i.getPoints(),re=new Float32Array(3*J),ie=new Array(3),oe=new Array(3),he=0,ye=0;he<X;++he)Z.getPoint(he,ie),Z.getPoint(he+1,oe),re.set(ie,ye),ye+=3,re.set(ie,ye),ye+=3,re.set(oe,ye),ye+=3,re.set(oe,ye),ye+=3;for(var Re=de.newInstance({numberOfComponents:3,values:re,name:"centerlinePosition"}),De=new Float32Array(J),ge=0,$e=0;ge<X;++ge)De.set([0,1,3,2],$e),$e+=4;var K=de.newInstance({numberOfComponents:1,values:De,name:"quadIndex"}),we=[Re,K];if(!e.renderable.getUseUniformOrientation()){for(var Te=e.renderable.getCenterlineTangentDirections(),me=new Float32Array(3*J),ae=new Float32Array(3*J),ue=0,pe=0;ue<X;++ue)for(var fe=3*ue,xe=0;xe<4;++xe)me[pe+0]=Te[fe+0],me[pe+1]=Te[fe+1],me[pe+2]=Te[fe+2],ae[pe+0]=Te[fe+3],ae[pe+1]=Te[fe+4],ae[pe+2]=Te[fe+5],pe+=3;var Ae=de.newInstance({numberOfComponents:3,values:me,name:"centerlineTopDirection"}),Se=de.newInstance({numberOfComponents:3,values:ae,name:"centerlineBotDirection"});we.push(Ae,Se)}e.tris.getCABO().createVBO(z,"polys",Zt.SURFACE,{points:_,customAttributes:we}),e.VBOBuildTime.modified()}}},t.getNeedToRebuildShaders=function(n,r,a){var i=e.volumeTexture.getComponents(),o=a.getProperty().getIndependentComponents();return e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||n.getProgram()===0||e.lastTextureComponents!==i||e.lastIndependentComponents!==o?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,e.lastTextureComponents=i,e.lastIndependentComponents=o,!0):!1},t.buildShaders=function(n,r,a){t.getShaderTemplate(n,r,a),t.replaceShaderValues(n,r,a)},t.replaceShaderValues=function(n,r,a){var i=n.Vertex,o=n.Fragment;i=ee.substitute(i,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,i=ee.substitute(i,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result;var s=["attribute vec3 centerlinePosition;","attribute float quadIndex;","uniform float width;","out vec2 quadOffsetVSOutput;","out vec3 centerlinePosVSOutput;"],c=e.renderable.getUseUniformOrientation();c?s.push("out vec3 centerlineDirVSOutput;","uniform vec3 centerlineDirection;"):s.push("out vec3 centerlineTopDirVSOutput;","out vec3 centerlineBotDirVSOutput;","out float centerlineAngleVSOutput;","attribute vec3 centerlineTopDirection;","attribute vec3 centerlineBotDirection;"),i=ee.substitute(i,"//VTK::Color::Dec",s).result;var u=["quadOffsetVSOutput = vec2(width * (mod(quadIndex, 2.0) == 0.0 ? -0.5 : 0.5), quadIndex > 1.0 ? 0.0 : 1.0);","centerlinePosVSOutput = centerlinePosition;"];c?u.push("centerlineDirVSOutput = centerlineDirection;"):u.push("vec3 sumVec = centerlineTopDirection + centerlineBotDirection;","float sumLen2 = dot(sumVec, sumVec);","float diffLen2 = 4.0 - sumLen2;","if (diffLen2 < 0.001) {","  // vectors are too close to each other, use lerp","  centerlineAngleVSOutput = -1.0; // use negative angle as a flag for lerp","  centerlineTopDirVSOutput = centerlineTopDirection;","  centerlineBotDirVSOutput = centerlineBotDirection;","} else if (sumLen2 == 0.0) {","  // vector are opposite to each other, don't make a choice for the user","  // use slerp without direction, it will display the centerline color on each row of pixel","  centerlineAngleVSOutput = 0.0;","  centerlineTopDirVSOutput = vec3(0.0);","  centerlineBotDirVSOutput = vec3(0.0);","} else {","  // use slerp","  centerlineAngleVSOutput = 2.0 * atan(sqrt(diffLen2/sumLen2));","  float sinAngle = sin(centerlineAngleVSOutput);","  centerlineTopDirVSOutput = centerlineTopDirection / sinAngle;","  centerlineBotDirVSOutput = centerlineBotDirection / sinAngle;","}"),i=ee.substitute(i,"//VTK::Color::Impl",u).result;var f=e.volumeTexture.getComponents(),l=a.getProperty().getIndependentComponents(),p=["uniform mat4 MCTCMatrix; // Model coordinates to texture coordinates","in vec2 quadOffsetVSOutput;","in vec3 centerlinePosVSOutput;","uniform highp sampler3D volumeTexture;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform float opacity;","uniform vec4 backgroundColor;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;"];if(c?p.push("in vec3 centerlineDirVSOutput;"):p.push("in vec3 centerlineTopDirVSOutput;","in vec3 centerlineBotDirVSOutput;","in float centerlineAngleVSOutput;"),l){for(var h=1;h<f;h++)p=p.concat(["uniform float cshift".concat(h,";"),"uniform float cscale".concat(h,";"),"uniform float pwfshift".concat(h,";"),"uniform float pwfscale".concat(h,";")]);switch(f){case 1:p=p.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:p=p.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:p=p.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:p=p.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:Do("Unsupported number of independent coordinates.")}}o=ee.substitute(o,"//VTK::TCoord::Dec",p).result;var v=[];if(c?v.push("vec3 interpolatedCenterlineDir = centerlineDirVSOutput;"):v.push("vec3 interpolatedCenterlineDir;","if (centerlineAngleVSOutput < 0.0) {","  // Lerp","  interpolatedCenterlineDir = quadOffsetVSOutput.y * centerlineTopDirVSOutput + (1.0 - quadOffsetVSOutput.y) * centerlineBotDirVSOutput;","} else {","  // Slerp","  float topInterpolationAngle = quadOffsetVSOutput.y * centerlineAngleVSOutput;","  float botInterpolationAngle = centerlineAngleVSOutput - topInterpolationAngle;","  interpolatedCenterlineDir = sin(topInterpolationAngle) * centerlineTopDirVSOutput + sin(botInterpolationAngle) * centerlineBotDirVSOutput;","}","// Slerp should give a normalized vector but when sin(angle) is small, rounding error occurs","// Normalize for both lerp and slerp","interpolatedCenterlineDir = normalize(interpolatedCenterlineDir);"),v.push("vec3 volumePosMC = centerlinePosVSOutput + quadOffsetVSOutput.x * interpolatedCenterlineDir;","vec3 volumePosTC = (MCTCMatrix * vec4(volumePosMC, 1.0)).xyz;","if (any(lessThan(volumePosTC, vec3(0.0))) || any(greaterThan(volumePosTC, vec3(1.0))))","{","  // set the background color and exit","  gl_FragData[0] = backgroundColor;","  return;","}","vec4 tvalue = texture(volumeTexture, volumePosTC);"),l){for(var y=["r","g","b","a"],m=0;m<f;++m)v=v.concat(["vec3 tcolor".concat(m," = mix").concat(m," * texture2D(colorTexture1, vec2(tvalue.").concat(y[m]," * cscale").concat(m," + cshift").concat(m,", height").concat(m,")).rgb;"),"float compWeight".concat(m," = mix").concat(m," * texture2D(pwfTexture1, vec2(tvalue.").concat(y[m]," * pwfscale").concat(m," + pwfshift").concat(m,", height").concat(m,")).r;")]);switch(f){case 1:v=v.concat(["gl_FragData[0] = vec4(tcolor0.rgb, compWeight0 * opacity);"]);break;case 2:v=v.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:v=v.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:v=v.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:Do("Unsupported number of independent coordinates.")}}else switch(f){case 1:v=v.concat(["// Dependent components","float intensity = tvalue.r;","vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;","float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;","gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);"]);break;case 2:v=v.concat(["float intensity = tvalue.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tvalue.g + pwfshift0);"]);break;case 3:v=v.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]);break;default:v=v.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"])}o=ee.substitute(o,"//VTK::TCoord::Impl",v).result,e.haveSeenDepthRequest&&(o=ee.substitute(o,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,o=ee.substitute(o,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),n.Vertex=i,n.Fragment=o,t.replaceShaderClip(n,r,a),t.replaceShaderCoincidentOffset(n,r,a)},t.replaceShaderClip=function(n,r,a){var i=n.Vertex,o=n.Fragment;if(e.renderable.getNumberOfClippingPlanes()){var s=e.renderable.getNumberOfClippingPlanes();s>6&&(B.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),s=6),i=ee.substitute(i,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[6];","varying float clipDistancesVSOutput[6];"]).result,i=ee.substitute(i,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,o=ee.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[6];"]).result,o=ee.substitute(o,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}n.Vertex=i,n.Fragment=o},t.getShaderTemplate=function(n,r,a){n.Vertex=z0,n.Fragment=Ja,n.Geometry=""},t.setMapperShaderParameters=function(n,r,a){var i;n.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&(n.getProgram().isAttributeUsed("vertexMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"vertexMC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||Do("Error setting vertexMC in shader VAO.")),n.getCABO().getCustomData().forEach(function(S){S&&n.getProgram().isAttributeUsed(S.name)&&!n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),S.name,S.offset,n.getCABO().getStride(),e.context.FLOAT,S.components,e.context.FALSE)&&Do("Error setting ".concat(S.name," in shader VAO."))}),n.getAttributeUpdateTime().modified());var o=e.volumeTexture.getTextureUnit();if(n.getProgram().setUniformi("volumeTexture",o),n.getProgram().setUniformf("width",e.renderable.getWidth()),(i=n.getProgram()).setUniform4f.apply(i,["backgroundColor"].concat(ve(e.renderable.getBackgroundColor()))),n.getProgram().isUniformUsed("centerlineDirection")){var s=e.renderable.getUniformDirection();n.getProgram().setUniform3fArray("centerlineDirection",s)}var c=e.currentImageDataInput,u=c.getWorldToIndex(),f=os(new Float32Array(16),ps([],c.getDimensions())),l=lc(f,f,u);if(n.getProgram().setUniformMatrix("MCTCMatrix",l),e.haveSeenDepthRequest&&n.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),e.renderable.getNumberOfClippingPlanes()){var p=e.renderable.getNumberOfClippingPlanes();p>6&&(B.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),p=6);var h=n.getCABO().getCoordShiftAndScaleEnabled(),v=h?n.getCABO().getInverseShiftAndScaleMatrix():null,y=v?St(e.imagematinv,a.getMatrix()):a.getMatrix();v&&(We(y,y),Ke(y,y,v),We(y,y)),We(e.imagemat,e.currentImageDataInput.getIndexToWorld()),Ke(e.imagematinv,y,e.imagemat);for(var m=[],x=0;x<p;x++){var g=[];e.renderable.getClippingPlaneInDataCoords(e.imagematinv,x,g);for(var d=0;d<4;d++)m.push(g[d])}n.getProgram().setUniformi("numClipPlanes",p),n.getProgram().setUniform4fv("clipPlanes",m)}if(n.getProgram().isUniformUsed("coffset")){var C=t.getCoincidentParameters(r,a);n.getProgram().setUniformf("coffset",C.offset),n.getProgram().isUniformUsed("cfactor")&&n.getProgram().setUniformf("cfactor",C.factor)}},t.setCameraShaderParameters=function(n,r,a){var i=e.openGLImageSlice.getKeyMatrices().mcwc,o=e.openGLCamera.getKeyMatrices(r).wcpc;if(Ke(e.imagemat,o,i),n.getCABO().getCoordShiftAndScaleEnabled()){var s=n.getCABO().getInverseShiftAndScaleMatrix();Ke(e.imagemat,e.imagemat,s)}n.getProgram().setUniformMatrix("MCPCMatrix",e.imagemat)},t.setPropertyShaderParameters=function(n,r,a){var i=n.getProgram(),o=a.getProperty(),s=o.getOpacity();i.setUniformf("opacity",s);var c=e.volumeTexture.getComponents(),u=o.getIndependentComponents();if(u)for(var f=0;f<c;++f)i.setUniformf("mix".concat(f),o.getComponentWeight(f));for(var l=e.volumeTexture.getVolumeInfo(),p=0;p<c;p++){var h=o.getColorWindow(),v=o.getColorLevel(),y=u?p:0,m=o.getRGBTransferFunction(y);if(m&&o.getUseLookupTableScalarRange()){var x=m.getRange();h=x[1]-x[0],v=.5*(x[1]+x[0])}var g=l.scale[p]/h,d=(l.offset[p]-v)/h+.5;i.setUniformf("cshift".concat(p),d),i.setUniformf("cscale".concat(p),g)}var C=e.colorTexture.getTextureUnit();i.setUniformi("colorTexture1",C);for(var S=0;S<c;S++){var T=1,w=0,E=u?S:0,D=o.getPiecewiseFunction(E);if(D){var b=D.getRange(),O=b[1]-b[0],M=.5*(b[0]+b[1]);T=l.scale[S]/O,w=(l.offset[S]-M)/O+.5}i.setUniformf("pwfshift".concat(S),w),i.setUniformf("pwfscale".concat(S),T)}var R=e.pwfTexture.getTextureUnit();i.setUniformi("pwfTexture1",R)},t.updateShaders=function(n,r,a){if(t.getNeedToRebuildShaders(n,r,a)){var i={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(i,r,a);var o=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(i.Vertex,i.Fragment,i.Geometry);o!==n.getProgram()&&(n.setProgram(o),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),t.setMapperShaderParameters(n,r,a),t.setCameraShaderParameters(n,r,a),t.setPropertyShaderParameters(n,r,a)}}var Dx={currentRenderPass:null,volumeTexture:null,volumeTextureTime:0,colorTexture:null,colorTextureString:null,pwfTexture:null,pwfTextureString:null,tris:null,lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastTextureComponents:0,lastIndependentComponents:0,imagemat:null,imagematinv:null};function qp(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Dx,n),xt.extend(t,e,n),Dr.implementReplaceShaderCoincidentOffset(t,e,n),B.algo(t,e,2,0),e.tris=Ht.newInstance(),e.volumeTexture=Fe.newInstance(),e.colorTexture=Fe.newInstance(),e.pwfTexture=Fe.newInstance(),e.imagemat=Oe(new Float64Array(16)),e.imagematinv=Oe(new Float64Array(16)),e.VBOBuildTime={},B.obj(e.VBOBuildTime,{mtime:0}),Ex(t,e)}var Yp=B.newInstance(qp,"vtkOpenGLImageCPRMapper"),Ox={};wx({newInstance:Yp,extend:qp},Ox),ft("vtkImageCPRMapper",Yp);function _x(t,e){e.classHierarchy.push("vtkOpenGLImageSlice"),t.buildPass=function(n){if(!(!e.renderable||!e.renderable.getVisibility())&&n){if(!e.renderable)return;e._openGLRenderWindow=t.getFirstAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes()}},t.traverseZBufferPass=function(n){!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children.forEach(function(r){r.traverse(n)}),t.apply(n,!1))},t.traverseOpaqueZBufferPass=function(n){return t.traverseOpaquePass(n)},t.traverseOpaquePass=function(n){!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children.forEach(function(r){r.traverse(n)}),t.apply(n,!1))},t.traverseTranslucentPass=function(n){!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children.forEach(function(r){r.traverse(n)}),t.apply(n,!1))},t.queryPass=function(n,r){if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.zBufferPass=function(n,r){return t.opaquePass(n,r)},t.opaqueZBufferPass=function(n,r){return t.opaquePass(n,r)},t.opaquePass=function(n,r){n&&e.context.depthMask(!0)},t.translucentPass=function(n,r){e.context.depthMask(!n)},t.getKeyMatrices=function(){return e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(St(e.keyMatrices.mcwc,e.renderable.getMatrix()),We(e.keyMatrices.mcwc,e.keyMatrices.mcwc),e.keyMatrixTime.modified()),e.keyMatrices}}var bx={context:null,keyMatrixTime:null,keyMatrices:null};function Mx(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bx,n),xt.extend(t,e,n),e.keyMatrixTime={},ht(e.keyMatrixTime,{mtime:0}),e.keyMatrices={mcwc:Oe(new Float64Array(16))},dt(t,e,["context"]),_x(t,e)}var Nx=Je(Mx,"vtkOpenGLImageSlice");ft("vtkImageSlice",Nx);function Rx(t,e){e.classHierarchy.push("vtkOpenGLVolume"),t.buildPass=function(n){!e.renderable||!e.renderable.getVisibility()||n&&(e._openGLRenderWindow=t.getFirstAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.queryPass=function(n,r){if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementVolumeCount()}},t.traverseVolumePass=function(n){!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0].traverse(n),t.apply(n,!1))},t.volumePass=function(n){!e.renderable||!e.renderable.getVisibility()||e.context.depthMask(!n)},t.getKeyMatrices=function(){return e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(e.renderable.computeMatrix(),St(e.MCWCMatrix,e.renderable.getMatrix()),We(e.MCWCMatrix,e.MCWCMatrix),e.renderable.getIsIdentity()?sr(e.normalMatrix):(va(e.normalMatrix,e.MCWCMatrix),ga(e.normalMatrix,e.normalMatrix)),e.keyMatrixTime.modified()),{mcwc:e.MCWCMatrix,normalMatrix:e.normalMatrix}}}var Lx={};function kx(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Lx,n),xt.extend(t,e,n),e.keyMatrixTime={},ht(e.keyMatrixTime,{mtime:0}),e.normalMatrix=new Float64Array(9),e.MCWCMatrix=new Float64Array(16),dt(t,e,["context"]),Rx(t,e)}var Fx=Je(kx,"vtkOpenGLVolume");ft("vtkVolume",Fx);var J0={NEAREST:0,LINEAR:1,FAST_LINEAR:2},Jp={FRACTIONAL:0,PROPORTIONAL:1},Z0={InterpolationType:J0,OpacityMode:Jp},Zp={COMPOSITE_BLEND:0,MAXIMUM_INTENSITY_BLEND:1,MINIMUM_INTENSITY_BLEND:2,AVERAGE_INTENSITY_BLEND:3,ADDITIVE_INTENSITY_BLEND:4,RADON_TRANSFORM_BLEND:5},Ax={OFF:0,NORMALIZED:1,RAW:2},Qp={BlendMode:Zp,FilterMode:Ax},Vx=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

attribute vec4 vertexDC;

varying vec3 vertexVCVSOutput;
uniform mat4 PCVCMatrix;

uniform float dcxmin;
uniform float dcxmax;
uniform float dcymin;
uniform float dcymax;

void main()
{
  // dcsmall is the device coords reduced to the
  // x y area covered by the volume
  vec4 dcsmall = vec4(
    dcxmin + 0.5 * (vertexDC.x + 1.0) * (dcxmax - dcxmin),
    dcymin + 0.5 * (vertexDC.y + 1.0) * (dcymax - dcymin),
    vertexDC.z,
    vertexDC.w);
  vec4 vcpos = PCVCMatrix * dcsmall;
  vertexVCVSOutput = vcpos.xyz/vcpos.w;
  gl_Position = dcsmall;
}
`,Bx=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkVolumeFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the volume mappers fragment shader

// the output of this shader
//VTK::Output::Dec

varying vec3 vertexVCVSOutput;

// first declare the settings from the mapper
// that impact the code paths in here

// always set vtkNumComponents 1,2,3,4
//VTK::NumComponents

// possibly define vtkTrilinearOn
//VTK::TrilinearOn

// possibly define vtkIndependentComponents
//VTK::IndependentComponentsOn

// possibly define any "proportional" components
//VTK::vtkProportionalComponents

// Define the blend mode to use
#define vtkBlendMode //VTK::BlendMode

// Possibly define vtkImageLabelOutlineOn
//VTK::ImageLabelOutlineOn

#ifdef vtkImageLabelOutlineOn
uniform int outlineThickness;
uniform float outlineOpacity;
uniform float vpWidth;
uniform float vpHeight;
uniform float vpOffsetX;
uniform float vpOffsetY;
uniform mat4 PCWCMatrix;
uniform mat4 vWCtoIDX;
#endif

// define vtkLightComplexity
//VTK::LightComplexity
#if vtkLightComplexity > 0
uniform float vSpecularPower;
uniform float vAmbient;
uniform float vDiffuse;
uniform float vSpecular;
//VTK::Light::Dec
#endif

//VTK::VolumeShadowOn
//VTK::SurfaceShadowOn
//VTK::localAmbientOcclusionOn
//VTK::LAO::Dec
//VTK::VolumeShadow::Dec

// define vtkComputeNormalFromOpacity
//VTK::vtkComputeNormalFromOpacity

// possibly define vtkGradientOpacityOn
//VTK::GradientOpacityOn
#ifdef vtkGradientOpacityOn
uniform float goscale0;
uniform float goshift0;
uniform float gomin0;
uniform float gomax0;
#if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)
uniform float goscale1;
uniform float goshift1;
uniform float gomin1;
uniform float gomax1;
#if vtkNumComponents >= 3
uniform float goscale2;
uniform float goshift2;
uniform float gomin2;
uniform float gomax2;
#endif
#if vtkNumComponents >= 4
uniform float goscale3;
uniform float goshift3;
uniform float gomin3;
uniform float gomax3;
#endif
#endif
#endif

// if you want to see the raw tiled
// data in webgl1 uncomment the following line
// #define debugtile

// camera values
uniform float camThick;
uniform float camNear;
uniform float camFar;
uniform int cameraParallel;

// values describing the volume geometry
uniform vec3 vOriginVC;
uniform vec3 vSpacing;
uniform ivec3 volumeDimensions; // 3d texture dimensions
uniform vec3 vPlaneNormal0;
uniform float vPlaneDistance0;
uniform vec3 vPlaneNormal1;
uniform float vPlaneDistance1;
uniform vec3 vPlaneNormal2;
uniform float vPlaneDistance2;
uniform vec3 vPlaneNormal3;
uniform float vPlaneDistance3;
uniform vec3 vPlaneNormal4;
uniform float vPlaneDistance4;
uniform vec3 vPlaneNormal5;
uniform float vPlaneDistance5;

//VTK::ClipPlane::Dec

// opacity and color textures
uniform sampler2D otexture;
uniform float oshift0;
uniform float oscale0;
uniform sampler2D ctexture;
uniform float cshift0;
uniform float cscale0;

// jitter texture
uniform sampler2D jtexture;

// some 3D texture values
uniform float sampleDistance;
uniform vec3 vVCToIJK;

// the heights defined below are the locations
// for the up to four components of the tfuns
// the tfuns have a height of 2XnumComps pixels so the
// values are computed to hit the middle of the two rows
// for that component
#ifdef vtkIndependentComponentsOn
#if vtkNumComponents == 2
uniform float mix0;
uniform float mix1;
#define height0 0.25
#define height1 0.75
#endif
#if vtkNumComponents == 3
uniform float mix0;
uniform float mix1;
uniform float mix2;
#define height0 0.17
#define height1 0.5
#define height2 0.83
#endif
#if vtkNumComponents == 4
uniform float mix0;
uniform float mix1;
uniform float mix2;
uniform float mix3;
#define height0 0.125
#define height1 0.375
#define height2 0.625
#define height3 0.875
#endif
#endif

#if vtkNumComponents >= 2
uniform float oshift1;
uniform float oscale1;
uniform float cshift1;
uniform float cscale1;
#endif
#if vtkNumComponents >= 3
uniform float oshift2;
uniform float oscale2;
uniform float cshift2;
uniform float cscale2;
#endif
#if vtkNumComponents >= 4
uniform float oshift3;
uniform float oscale3;
uniform float cshift3;
uniform float cscale3;
#endif

uniform vec4 ipScalarRangeMin;
uniform vec4 ipScalarRangeMax;

// declaration for intermixed geometry
//VTK::ZBuffer::Dec

//=======================================================================
// global and custom variables (a temporary section before photorealistics rendering module is complete)
vec3 rayDirVC;
float sampleDistanceISVS;
float sampleDistanceIS;

#define SQRT3    1.7321
#define INV4PI   0.0796
#define EPSILON  0.001
#define PI       3.1415
#define PI2      9.8696

//=======================================================================
// Webgl2 specific version of functions
#if __VERSION__ == 300

uniform highp sampler3D texture1;

vec4 getTextureValue(vec3 pos)
{
  vec4 tmp = texture(texture1, pos);
#if vtkNumComponents == 1
  tmp.a = tmp.r;
#endif
#if vtkNumComponents == 2
  tmp.a = tmp.g;
#endif
#if vtkNumComponents == 3
  tmp.a = length(tmp.rgb);
#endif
  return tmp;
}

//=======================================================================
// WebGL1 specific version of functions
#else

uniform sampler2D texture1;

uniform float texWidth;
uniform float texHeight;
uniform int xreps;
uniform int xstride;
uniform int ystride;

// if computing trilinear values from multiple z slices
#ifdef vtkTrilinearOn
vec4 getTextureValue(vec3 ijk)
{
  float zoff = 1.0/float(volumeDimensions.z);
  vec4 val1 = getOneTextureValue(ijk);
  vec4 val2 = getOneTextureValue(vec3(ijk.xy, ijk.z + zoff));

  float indexZ = float(volumeDimensions)*ijk.z;
  float zmix =  indexZ - floor(indexZ);

  return mix(val1, val2, zmix);
}

vec4 getOneTextureValue(vec3 ijk)
#else // nearest or fast linear
vec4 getTextureValue(vec3 ijk)
#endif
{
  vec3 tdims = vec3(volumeDimensions);

#ifdef debugtile
  vec2 tpos = vec2(ijk.x, ijk.y);
  vec4 tmp = texture2D(texture1, tpos);
  tmp.a = 1.0;

#else
  int z = int(ijk.z * tdims.z);
  int yz = z / xreps;
  int xz = z - yz*xreps;

  int tileWidth = volumeDimensions.x/xstride;
  int tileHeight = volumeDimensions.y/ystride;

  xz *= tileWidth;
  yz *= tileHeight;

  float ni = float(xz) + (ijk.x*float(tileWidth));
  float nj = float(yz) + (ijk.y*float(tileHeight));

  vec2 tpos = vec2(ni/texWidth, nj/texHeight);

  vec4 tmp = texture2D(texture1, tpos);

#if vtkNumComponents == 1
  tmp.a = tmp.r;
#endif
#if vtkNumComponents == 2
  tmp.g = tmp.a;
#endif
#if vtkNumComponents == 3
  tmp.a = length(tmp.rgb);
#endif
#endif

  return tmp;
}

// End of Webgl1 specific code
//=======================================================================
#endif

//=======================================================================
// transformation between VC and IS space

// convert vector position from idx to vc
#if (vtkLightComplexity > 0) || (defined vtkClippingPlanesOn)
vec3 IStoVC(vec3 posIS){
  vec3 posVC = posIS / vVCToIJK;
  return posVC.x * vPlaneNormal0 +
         posVC.y * vPlaneNormal2 +
         posVC.z * vPlaneNormal4 +
         vOriginVC;
}

// convert vector position from vc to idx
vec3 VCtoIS(vec3 posVC){
  posVC = posVC - vOriginVC;
  posVC = vec3(
    dot(posVC, vPlaneNormal0),
    dot(posVC, vPlaneNormal2),
    dot(posVC, vPlaneNormal4));
  return posVC * vVCToIJK;
}
#endif

//Rotate vector to view coordinate
#if (vtkLightComplexity > 0) || (defined vtkGradientOpacityOn)
void rotateToViewCoord(inout vec3 dirIS){
  dirIS.xyz =
    dirIS.x * vPlaneNormal0 +
    dirIS.y * vPlaneNormal2 +
    dirIS.z * vPlaneNormal4;
}

//Rotate vector to idx coordinate
vec3 rotateToIDX(vec3 dirVC){
  vec3 dirIS;
  dirIS.xyz = vec3(
    dot(dirVC, vPlaneNormal0),
    dot(dirVC, vPlaneNormal2),
    dot(dirVC, vPlaneNormal4));
  return dirIS;
}
#endif

//=======================================================================
// Given a normal compute the gradient opacity factors
float computeGradientOpacityFactor(
  float normalMag, float goscale, float goshift, float gomin, float gomax)
{
#if defined(vtkGradientOpacityOn)
  return clamp(normalMag * goscale + goshift, gomin, gomax);
#else
  return 1.0;
#endif
}

//=======================================================================
// compute the normal and gradient magnitude for a position, uses forward difference
#if (vtkLightComplexity > 0) || (defined vtkGradientOpacityOn)
#ifdef vtkClippingPlanesOn
  void adjustClippedVoxelValues(vec3 pos, vec3 texPos[3], inout vec3 g1)
  {
    vec3 g1VC[3];
    for (int i = 0; i < 3; ++i)
    {
      g1VC[i] = IStoVC(texPos[i]);
    }
    vec3 posVC = IStoVC(pos);
    for (int i = 0; i < clip_numPlanes; ++i)
    {
      for (int j = 0; j < 3; ++j)
      {
        if(dot(vec3(vClipPlaneOrigins[i] - g1VC[j].xyz), vClipPlaneNormals[i]) > 0.0)
        {
          g1[j] = 0.0;
        }
      }
    }
  }
#endif

  #ifdef vtkComputeNormalFromOpacity
    #ifdef vtkGradientOpacityOn
      vec4 computeDensityNormal(float gradientMag, vec3 scalarInterp[2])
      {
    #else
      //if gradient opacity not on but using density gradient
      vec4 computeDensityNormal(vec3 scalarInterp[2])
      {
    #endif
        vec3 opacityG1, opacityG2;
        opacityG1.x = texture2D(otexture, vec2(scalarInterp[0].x * oscale0 + oshift0, 0.5)).r;
        opacityG1.y = texture2D(otexture, vec2(scalarInterp[0].y * oscale0 + oshift0, 0.5)).r;
        opacityG1.z = texture2D(otexture, vec2(scalarInterp[0].z * oscale0 + oshift0, 0.5)).r;
        opacityG2.x = texture2D(otexture, vec2(scalarInterp[1].x * oscale0 + oshift0, 0.5)).r;
        opacityG2.y = texture2D(otexture, vec2(scalarInterp[1].y * oscale0 + oshift0, 0.5)).r;
        opacityG2.z = texture2D(otexture, vec2(scalarInterp[1].z * oscale0 + oshift0, 0.5)).r;
    #ifdef vtkGradientOpacityOn
        float gradOpacityFactor = 1.0f;
        if (gradientMag >= 0.0){
          gradOpacityFactor = computeGradientOpacityFactor(gradientMag, goscale0, goshift0, gomin0, gomax0);
        }
        opacityG1.xyz *= gradOpacityFactor;
        opacityG2.xyz *= gradOpacityFactor;
    #endif

        vec4 opacityG = vec4(opacityG1 - opacityG2, 1.0f);
        // divide by spacing
        opacityG.xyz /= vSpacing;
        opacityG.w = length(opacityG.xyz);
        // rotate to View Coords
        rotateToViewCoord(opacityG.xyz);
        if (length(opacityG.xyz) > 0.0) {
          return vec4(normalize(opacityG.xyz),opacityG.w);
        } else {
          return vec4(0.0);
        }
      }

      vec4 computeNormalForDensity(vec3 pos, vec3 tstep, out vec3 scalarInterp[2])
      {
        vec3 xvec = vec3(tstep.x, 0.0, 0.0);
        vec3 yvec = vec3(0.0, tstep.y, 0.0);
        vec3 zvec = vec3(0.0, 0.0, tstep.z);
        vec3 texPosPVec[3];
        texPosPVec[0] = pos + xvec;
        texPosPVec[1] = pos + yvec;
        texPosPVec[2] = pos + zvec;
        vec3 texPosNVec[3];
        texPosNVec[0] = pos - xvec;
        texPosNVec[1] = pos - yvec;
        texPosNVec[2] = pos - zvec;
        vec3 g1, g2;

        scalarInterp[0].x = getTextureValue(texPosPVec[0]).a;
        scalarInterp[0].y = getTextureValue(texPosPVec[1]).a;
        scalarInterp[0].z = getTextureValue(texPosPVec[2]).a;
        scalarInterp[1].x = getTextureValue(texPosNVec[0]).a;
        scalarInterp[1].y = getTextureValue(texPosNVec[1]).a;
        scalarInterp[1].z = getTextureValue(texPosNVec[2]).a;

        #ifdef vtkClippingPlanesOn
          adjustClippedVoxelValues(pos, texPosPVec, scalarInterp[0]);
          adjustClippedVoxelValues(pos, texPosNVec, scalarInterp[1]);
        #endif
        vec4 result;
        result.x = scalarInterp[0].x - scalarInterp[1].x;
        result.y = scalarInterp[0].y - scalarInterp[1].y;
        result.z = scalarInterp[0].z - scalarInterp[1].z;
        // divide by spacing
        result.xyz /= vSpacing;
        result.w = length(result.xyz);
        // rotate to View Coords
        rotateToViewCoord(result.xyz);
        if (length(result.xyz) > 0.0) {
          return vec4(normalize(result.xyz),result.w);
        } else {
          return vec4(0.0);
        }
      }
  #endif

  vec4 computeNormal(vec3 pos, vec3 tstep)
  {
    vec3 xvec = vec3(tstep.x, 0.0, 0.0);
    vec3 yvec = vec3(0.0, tstep.y, 0.0);
    vec3 zvec = vec3(0.0, 0.0, tstep.z);
    vec3 texPosPVec[3];
    texPosPVec[0] = pos + xvec;
    texPosPVec[1] = pos + yvec;
    texPosPVec[2] = pos + zvec;
    vec3 texPosNVec[3];
    texPosNVec[0] = pos - xvec;
    texPosNVec[1] = pos - yvec;
    texPosNVec[2] = pos - zvec;
    vec3 g1, g2;
    g1.x = getTextureValue(texPosPVec[0]).a;
    g1.y = getTextureValue(texPosPVec[1]).a;
    g1.z = getTextureValue(texPosPVec[2]).a;
    g2.x = getTextureValue(texPosNVec[0]).a;
    g2.y = getTextureValue(texPosNVec[1]).a;
    g2.z = getTextureValue(texPosNVec[2]).a;
    #ifdef vtkClippingPlanesOn
      adjustClippedVoxelValues(pos, texPosPVec, g1);
      adjustClippedVoxelValues(pos, texPosNVec, g2);
    #endif
    vec4 result;
    result = vec4(g1 - g2, -1.0);
    // divide by spacing
    result.xyz /= vSpacing;
    result.w = length(result.xyz);
    if (result.w > 0.0){
      // rotate to View Coords
      rotateToViewCoord(result.xyz);
      return vec4(normalize(result.xyz),result.w);
    } else {
      return vec4(0.0);
    }
  }
#endif

#ifdef vtkImageLabelOutlineOn
vec3 fragCoordToIndexSpace(vec4 fragCoord) {
  vec4 pcPos = vec4(
    (fragCoord.x / vpWidth - vpOffsetX - 0.5) * 2.0,
    (fragCoord.y / vpHeight - vpOffsetY - 0.5) * 2.0,
    (fragCoord.z - 0.5) * 2.0,
    1.0);

  vec4 worldCoord = PCWCMatrix * pcPos;
  vec4 vertex = (worldCoord/worldCoord.w);

  vec3 index = (vWCtoIDX * vertex).xyz;

  // half voxel fix for labelmapOutline
  return (index + vec3(0.5)) / vec3(volumeDimensions);
}
#endif

//=======================================================================
// compute the normals and gradient magnitudes for a position
// for independent components
mat4 computeMat4Normal(vec3 pos, vec4 tValue, vec3 tstep)
{
  mat4 result;
  vec4 distX = getTextureValue(pos + vec3(tstep.x, 0.0, 0.0)) - tValue;
  vec4 distY = getTextureValue(pos + vec3(0.0, tstep.y, 0.0)) - tValue;
  vec4 distZ = getTextureValue(pos + vec3(0.0, 0.0, tstep.z)) - tValue;

  // divide by spacing
  distX /= vSpacing.x;
  distY /= vSpacing.y;
  distZ /= vSpacing.z;

  mat3 rot;
  rot[0] = vPlaneNormal0;
  rot[1] = vPlaneNormal2;
  rot[2] = vPlaneNormal4;

#if !defined(vtkComponent0Proportional)
  result[0].xyz = vec3(distX.r, distY.r, distZ.r);
  result[0].a = length(result[0].xyz);
  result[0].xyz *= rot;
  if (result[0].w > 0.0)
  {
    result[0].xyz /= result[0].w;
  }
#endif

// optionally compute the 2nd component
#if vtkNumComponents >= 2 && !defined(vtkComponent1Proportional)
  result[1].xyz = vec3(distX.g, distY.g, distZ.g);
  result[1].a = length(result[1].xyz);
  result[1].xyz *= rot;
  if (result[1].w > 0.0)
  {
    result[1].xyz /= result[1].w;
  }
#endif

// optionally compute the 3rd component
#if vtkNumComponents >= 3 && !defined(vtkComponent2Proportional)
  result[2].xyz = vec3(distX.b, distY.b, distZ.b);
  result[2].a = length(result[2].xyz);
  result[2].xyz *= rot;
  if (result[2].w > 0.0)
  {
    result[2].xyz /= result[2].w;
  }
#endif

// optionally compute the 4th component
#if vtkNumComponents >= 4 && !defined(vtkComponent3Proportional)
  result[3].xyz = vec3(distX.a, distY.a, distZ.a);
  result[3].a = length(result[3].xyz);
  result[3].xyz *= rot;
  if (result[3].w > 0.0)
  {
    result[3].xyz /= result[3].w;
  }
#endif

  return result;
}

//=======================================================================
// global shadow - secondary ray
#if defined(VolumeShadowOn) || defined(localAmbientOcclusionOn)
float random()
{
  float rand = fract(sin(dot(gl_FragCoord.xy,vec2(12.9898,78.233)))*43758.5453123);
  float jitter=texture2D(jtexture,gl_FragCoord.xy/32.).r;
  uint pcg_state = floatBitsToUint(jitter);
  uint state = pcg_state;
  pcg_state = pcg_state * uint(747796405) + uint(2891336453);
  uint word = ((state >> ((state >> uint(28)) + uint(4))) ^ state) * uint(277803737);
  return (float((((word >> uint(22)) ^ word) >> 1 ))/float(2147483647) + rand)/2.0;
}
#endif

#ifdef VolumeShadowOn
// henyey greenstein phase function
float phase_function(float cos_angle)
{
  // divide by 2.0 instead of 4pi to increase intensity
  return ((1.0-anisotropy2)/pow(1.0+anisotropy2-2.0*anisotropy*cos_angle, 1.5))/2.0;
}

// Computes the intersection between a ray and a box
struct Hit
{
  float tmin;
  float tmax;
};

struct Ray
{
  vec3 origin;
  vec3 dir;
  vec3 invDir;
};

bool BBoxIntersect(vec3 boundMin, vec3 boundMax, const Ray r, out Hit hit)
{
  vec3 tbot = r.invDir * (boundMin - r.origin);
  vec3 ttop = r.invDir * (boundMax - r.origin);
  vec3 tmin = min(ttop, tbot);
  vec3 tmax = max(ttop, tbot);
  vec2 t = max(tmin.xx, tmin.yz);
  float t0 = max(t.x, t.y);
  t = min(tmax.xx, tmax.yz);
  float t1 = min(t.x, t.y);
  hit.tmin = t0;
  hit.tmax = t1;
  return t1 > max(t0,0.0);
}

// As BBoxIntersect requires the inverse of the ray coords,
// this function is used to avoid numerical issues
void safe_0_vector(inout Ray ray)
{
  if(abs(ray.dir.x) < EPSILON) ray.dir.x = sign(ray.dir.x) * EPSILON;
  if(abs(ray.dir.y) < EPSILON) ray.dir.y = sign(ray.dir.y) * EPSILON;
  if(abs(ray.dir.z) < EPSILON) ray.dir.z = sign(ray.dir.z) * EPSILON;
}

float volume_shadow(vec3 posIS, vec3 lightDirNormIS)
{
  float shadow = 1.0;
  float opacity = 0.0;

  // modify sample distance with a random number between 1.5 and 3.0
  float sampleDistanceISVS_jitter = sampleDistanceISVS * mix(1.5, 3.0, random());
  float opacityPrev = texture2D(otexture, vec2(getTextureValue(posIS).r * oscale0 + oshift0, 0.5)).r;

  // in case the first sample near surface has a very tiled light ray, we need to offset start position
  posIS += sampleDistanceISVS_jitter * lightDirNormIS;

  // compute the start and end points for the ray
  Ray ray;
  Hit hit;
  ray.origin = posIS;
  ray.dir = lightDirNormIS;
  safe_0_vector(ray);
  ray.invDir = 1.0/ray.dir;

  if(!BBoxIntersect(vec3(0.0),vec3(1.0), ray, hit))
  {
    return 1.0;
  }
  float maxdist = hit.tmax;

  // interpolate shadow ray length between: 1 unit of sample distance in IS to SQRT3, based on globalIlluminationReach
  float maxgi = mix(sampleDistanceISVS_jitter,SQRT3,giReach);
  maxdist = min(maxdist,maxgi);
  if(maxdist < EPSILON) {
    return 1.0;
  }

  // support gradient opacity
  #ifdef vtkGradientOpacityOn
    vec4 normal;
  #endif

  float current_dist = 0.0;
  float current_step = length(sampleDistanceISVS_jitter * lightDirNormIS);
  float clamped_step = 0.0;

  vec4 scalar = vec4(0.0);
  while(current_dist < maxdist)
  {
#ifdef vtkClippingPlanesOn
    vec3 posVC = IStoVC(posIS);
    for (int i = 0; i < clip_numPlanes; ++i)
    {
      if (dot(vec3(vClipPlaneOrigins[i] - posVC), vClipPlaneNormals[i]) > 0.0)
      {
        current_dist = maxdist;
      }
    }
#endif
    scalar = getTextureValue(posIS);
    opacity = texture2D(otexture, vec2(scalar.r * oscale0 + oshift0, 0.5)).r;
    #ifdef vtkGradientOpacityOn
      normal = computeNormal(posIS, vec3(1.0/vec3(volumeDimensions)));
      opacity *= computeGradientOpacityFactor(normal.w, goscale0, goshift0, gomin0, gomax0);
    #endif
    shadow *= 1.0 - opacity;

    // optimization: early termination
    if (shadow < EPSILON){
      return 0.0;
    }

    clamped_step = min(maxdist - current_dist, current_step);
    posIS += clamped_step * lightDirNormIS;
    current_dist += current_step;
  }

  return shadow;
}

vec3 applyShadowRay(vec3 tColor, vec3 posIS, vec3 viewDirectionVC)
{
  vec3 vertLight = vec3(0.0);
  vec3 secondary_contrib = vec3(0.0);
  // here we assume only positional light, no effect of cones
  for (int i = 0; i < lightNum; i++)
  {
    #if(vtkLightComplexity==3)
      if (lightPositional[i] == 1){
        vertLight = lightPositionVC[i] - IStoVC(posIS);
      }else{
        vertLight = - lightDirectionVC[i];
      }
    #else
      vertLight = - lightDirectionVC[i];
    #endif
    // here we assume achromatic light, only intensity
    float dDotL = dot(viewDirectionVC, normalize(vertLight));
    // isotropic scatter returns 0.5 instead of 1/4pi to increase intensity
    float phase_attenuation = 0.5;
    if (abs(anisotropy) > EPSILON){
      phase_attenuation = phase_function(dDotL);
    }
    float vol_shadow = volume_shadow(posIS, normalize(rotateToIDX(vertLight)));
    secondary_contrib += tColor * vDiffuse * lightColor[i] * vol_shadow * phase_attenuation;
    secondary_contrib += tColor * vAmbient;
  }
  return secondary_contrib;
}
#endif

//=======================================================================
// local ambient occlusion
#ifdef localAmbientOcclusionOn
vec3 sample_direction_uniform(int i)
{
  float rand = random() * 0.5;
  float theta = PI2 * (kernelSample[i][0] + rand);
  float phi = acos(2.0 * (kernelSample[i][1] + rand) -1.0) / 2.5;
  return normalize(vec3(cos(theta)*sin(phi), sin(theta)*sin(phi), cos(phi)));
}

// return a matrix that transform startDir into z axis; startDir should be normalized
mat3 zBaseRotationalMatrix(vec3 startDir){
  vec3 axis = cross(startDir, vec3(0.0,0.0,1.0));
  float cosA = startDir.z;
  float k = 1.0 / (1.0 + cosA);
  mat3 matrix = mat3((axis.x * axis.x * k) + cosA, (axis.y * axis.x * k) - axis.z, (axis.z * axis.x * k) + axis.y,
              (axis.x * axis.y * k) + axis.z, (axis.y * axis.y * k) + cosA, (axis.z * axis.y * k) - axis.x,
              (axis.x * axis.z * k) - axis.y, (axis.y * axis.z * k) + axis.x, (axis.z * axis.z * k) + cosA);
  return matrix;
}

float computeLAO(vec3 posIS, float op, vec3 lightDir, vec4 normal){
  // apply LAO only at selected locations, otherwise return full brightness
  if (normal.w > 0.0 && op > 0.05){
    float total_transmittance = 0.0;
    mat3 inverseRotateBasis = inverse(zBaseRotationalMatrix(normalize(-normal.xyz)));
    vec3 currPos, randomDirStep;
    float weight, transmittance, opacity;
    for (int i = 0; i < kernelSize; i++)
    {
      randomDirStep = inverseRotateBasis * sample_direction_uniform(i) * sampleDistanceIS;
      weight = 1.0 - dot(normalize(lightDir), normalize(randomDirStep));
      currPos = posIS;
      transmittance = 1.0;
      for (int j = 0; j < kernelRadius ; j++){
        currPos += randomDirStep;
        // check if it's at clipping plane, if so return full brightness
        if (all(greaterThan(currPos, vec3(EPSILON))) && all(lessThan(currPos,vec3(1.0-EPSILON)))){
          opacity = texture2D(otexture, vec2(getTextureValue(currPos).r * oscale0 + oshift0, 0.5)).r;
          #ifdef vtkGradientOpacityOn
             opacity *= computeGradientOpacityFactor(normal.w, goscale0, goshift0, gomin0, gomax0);
          #endif
          transmittance *= 1.0 - opacity;
        }
        else{
          break;
        }
      }
      total_transmittance += transmittance / float(kernelRadius) * weight;

      // early termination if fully translucent
      if (total_transmittance > 1.0 - EPSILON){
        return 1.0;
      }
    }
    // average transmittance and reduce variance
    return clamp(total_transmittance / float(kernelSize), 0.3, 1.0);
  } else {
    return 1.0;
  }
}
#endif

//=======================================================================
// surface light contribution
#if vtkLightComplexity > 0
  void applyLighting(inout vec3 tColor, vec4 normal)
  {
    vec3 diffuse = vec3(0.0, 0.0, 0.0);
    vec3 specular = vec3(0.0, 0.0, 0.0);
    float df, sf = 0.0;
    for (int i = 0; i < lightNum; i++){
        df = abs(dot(normal.rgb, -lightDirectionVC[i]));
        diffuse += df * lightColor[i];
        sf = pow( abs(dot(lightHalfAngleVC[i],normal.rgb)), vSpecularPower);
        specular += sf * lightColor[i];
    }
    tColor.rgb = tColor.rgb*(diffuse*vDiffuse + vAmbient) + specular*vSpecular;
  }
  #ifdef SurfaceShadowOn
  #if vtkLightComplexity < 3
    vec3 applyLightingDirectional(vec3 posIS, vec4 tColor, vec4 normal)
    {
      // everything in VC
      vec3 diffuse = vec3(0.0);
      vec3 specular = vec3(0.0);
      #ifdef localAmbientOcclusionOn
        vec3 ambient = vec3(0.0);
      #endif
      vec3 vertLightDirection;
      for (int i = 0; i < lightNum; i++){
        float ndotL,vdotR;
        vertLightDirection = lightDirectionVC[i];
        ndotL = dot(normal.xyz, vertLightDirection);
        if (ndotL < 0.0 && twoSidedLighting)
        {
          ndotL = -ndotL;
        }
        if (ndotL > 0.0)
        {
          diffuse += ndotL * lightColor[i];
          //specular
          vdotR = dot(-rayDirVC, normalize(2.0 * ndotL * -normal.xyz + vertLightDirection));
          if (vdotR > 0.0)
          {
            specular += pow(vdotR, vSpecularPower) * lightColor[i];
          }
        }
        #ifdef localAmbientOcclusionOn
            ambient += computeLAO(posIS, tColor.a, vertLightDirection, normal);
        #endif
      }
      #ifdef localAmbientOcclusionOn
        return tColor.rgb * (diffuse * vDiffuse + vAmbient * ambient) + specular*vSpecular;
      #else
        return tColor.rgb * (diffuse * vDiffuse + vAmbient) + specular*vSpecular;
      #endif
    }
  #else
    vec3 applyLightingPositional(vec3 posIS, vec4 tColor, vec4 normal, vec3 posVC)
    {
      // everything in VC
      vec3 diffuse = vec3(0.0);
      vec3 specular = vec3(0.0);
      #ifdef localAmbientOcclusionOn
        vec3 ambient = vec3(0.0);
      #endif
      vec3 vertLightDirection;
      for (int i = 0; i < lightNum; i++){
        float distance,attenuation,ndotL,vdotR;
        vec3 lightDir;
        if (lightPositional[i] == 1){
          lightDir = lightDirectionVC[i];
          vertLightDirection = posVC - lightPositionVC[i];
          distance = length(vertLightDirection);
          vertLightDirection = normalize(vertLightDirection);
          attenuation = 1.0 / (lightAttenuation[i].x
                              + lightAttenuation[i].y * distance
                              + lightAttenuation[i].z * distance * distance);
          // per OpenGL standard cone angle is 90 or less for a spot light
          if (lightConeAngle[i] <= 90.0){
            float coneDot = dot(vertLightDirection, lightDir);
            if (coneDot >= cos(radians(lightConeAngle[i]))){  // if inside cone
              attenuation = attenuation * pow(coneDot, lightExponent[i]);
            }
            else {
              attenuation = 0.0;
            }
          }
          ndotL = dot(normal.xyz, vertLightDirection);
          if (ndotL < 0.0 && twoSidedLighting)
          {
            ndotL = -ndotL;
          }
          if (ndotL > 0.0)
          {
            diffuse += ndotL * attenuation * lightColor[i];
            //specular
            vdotR = dot(-rayDirVC, normalize(2.0 * ndotL * -normal.xyz + vertLightDirection));
            if (vdotR > 0.0)
            {
              specular += pow(vdotR, vSpecularPower) * attenuation * lightColor[i];
            }
          }
          #ifdef localAmbientOcclusionOn
            ambient += computeLAO(posIS, tColor.a, vertLightDirection, normal);
          #endif
        } else {
          vertLightDirection = lightDirectionVC[i];
          ndotL = dot(normal.xyz, vertLightDirection);
          if (ndotL < 0.0 && twoSidedLighting)
          {
            ndotL = -ndotL;
          }
          if (ndotL > 0.0)
          {
            diffuse += ndotL * lightColor[i];
            //specular
            vdotR = dot(-rayDirVC, normalize(2.0 * ndotL * -normal.xyz + vertLightDirection));
            if (vdotR > 0.0)
            {
              specular += pow(vdotR, vSpecularPower) * lightColor[i];
            }
          }
          #ifdef localAmbientOcclusionOn
            ambient += computeLAO(posIS, tColor.a, vertLightDirection, normal);
          #endif
        }
      }
      #ifdef localAmbientOcclusionOn
        return tColor.rgb * (diffuse * vDiffuse + vAmbient * ambient) + specular*vSpecular;
      #else
        return tColor.rgb * (diffuse * vDiffuse + vAmbient) + specular*vSpecular;
      #endif
    }
  #endif
  #endif
#endif

//=======================================================================
// Given a texture value compute the color and opacity
//
vec4 getColorForValue(vec4 tValue, vec3 posIS, vec3 tstep)
{
#ifdef vtkImageLabelOutlineOn
  vec3 centerPosIS = fragCoordToIndexSpace(gl_FragCoord); // pos in texture space
  vec4 centerValue = getTextureValue(centerPosIS);
  bool pixelOnBorder = false;
  vec4 tColor = texture2D(ctexture, vec2(centerValue.r * cscale0 + cshift0, 0.5));

  // Get alpha of segment from opacity function.
  tColor.a = texture2D(otexture, vec2(centerValue.r * oscale0 + oshift0, 0.5)).r;

  // Only perform outline check on fragments rendering voxels that aren't invisible.
  // Saves a bunch of needless checks on the background.
  // TODO define epsilon when building shader?
  if (float(tColor.a) > 0.01) {
    for (int i = -outlineThickness; i <= outlineThickness; i++) {
      for (int j = -outlineThickness; j <= outlineThickness; j++) {
        if (i == 0 || j == 0) {
          continue;
        }

        vec4 neighborPixelCoord = vec4(gl_FragCoord.x + float(i),
          gl_FragCoord.y + float(j),
          gl_FragCoord.z, gl_FragCoord.w);

        vec3 neighborPosIS = fragCoordToIndexSpace(neighborPixelCoord);
        vec4 value = getTextureValue(neighborPosIS);

        // If any of my neighbours are not the same value as I
        // am, this means I am on the border of the segment.
        // We can break the loops
        if (any(notEqual(value, centerValue))) {
          pixelOnBorder = true;
          break;
        }
      }

      if (pixelOnBorder == true) {
        break;
      }
    }

    // If I am on the border, I am displayed at full opacity
    if (pixelOnBorder == true) {
      tColor.a = outlineOpacity;
    }
  }

#else
  // compute the normal and gradient magnitude if needed
  // We compute it as a vec4 if possible otherwise a mat4
  //
  vec4 goFactor = vec4(1.0,1.0,1.0,1.0);

  // compute the normal vectors as needed
  #if (vtkLightComplexity > 0) || defined(vtkGradientOpacityOn)
    #if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)
      mat4 normalMat = computeMat4Normal(posIS, tValue, tstep);
      #if !defined(vtkComponent0Proportional)
        vec4 normal0 = normalMat[0];
      #endif
      #if !defined(vtkComponent1Proportional)
        vec4 normal1 = normalMat[1];
      #endif
      #if vtkNumComponents > 2
        #if !defined(vtkComponent2Proportional)
          vec4 normal2 = normalMat[2];
        #endif
        #if vtkNumComponents > 3
          #if !defined(vtkComponent3Proportional)
            vec4 normal3 = normalMat[3];
          #endif
        #endif
      #endif
    #else
      vec4 normalLight;
      #ifdef vtkComputeNormalFromOpacity
        vec3 scalarInterp[2];
        vec4 normal0 = computeNormalForDensity(posIS, tstep, scalarInterp);
        if (length(normal0)>0.0){
          #ifdef vtkGradientOpacityOn
            normalLight = computeDensityNormal(normal0.w, scalarInterp);
          #else
            normalLight = computeDensityNormal(scalarInterp);
          #endif
          if (length(normalLight) == 0.0){
            normalLight = normal0;
          }
        }
      #else
        vec4 normal0 = computeNormal(posIS, tstep);
        normalLight = normal0;
      #endif
    #endif
  #endif

  // compute gradient opacity factors as needed
  #if defined(vtkGradientOpacityOn)
    #if !defined(vtkComponent0Proportional)
      goFactor.x =
        computeGradientOpacityFactor(normal0.a, goscale0, goshift0, gomin0, gomax0);
    #endif
    #if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)
      #if !defined(vtkComponent1Proportional)
        goFactor.y =
          computeGradientOpacityFactor(normal1.a, goscale1, goshift1, gomin1, gomax1);
      #endif
      #if vtkNumComponents > 2
        #if !defined(vtkComponent2Proportional)
          goFactor.z =
            computeGradientOpacityFactor(normal2.a, goscale2, goshift2, gomin2, gomax2);
        #endif
        #if vtkNumComponents > 3
          #if !defined(vtkComponent3Proportional)
            goFactor.w =
              computeGradientOpacityFactor(normal3.a, goscale3, goshift3, gomin3, gomax3);
          #endif
        #endif
      #endif
    #endif
  #endif

  // single component is always independent
  #if vtkNumComponents == 1
    vec4 tColor = texture2D(ctexture, vec2(tValue.r * cscale0 + cshift0, 0.5));
    tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;
    if (tColor.a < EPSILON){
      return vec4(0.0);
    }
  #endif

  #if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2
    vec4 tColor = mix0*texture2D(ctexture, vec2(tValue.r * cscale0 + cshift0, height0));
    #if !defined(vtkComponent0Proportional)
      tColor.a = goFactor.x*mix0*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, height0)).r;
    #else
      float pwfValue = texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, height0)).r;
      tColor *= pwfValue;
      tColor.a *= mix(pwfValue, 1.0, (1.0 - mix0));
    #endif

    vec3 tColor1 = mix1*texture2D(ctexture, vec2(tValue.g * cscale1 + cshift1, height1)).rgb;
    #if !defined(vtkComponent1Proportional)
      tColor.a += goFactor.y*mix1*texture2D(otexture, vec2(tValue.g * oscale1 + oshift1, height1)).r;
    #else
      float pwfValue = texture2D(otexture, vec2(tValue.g * oscale1 + oshift1, height1)).r;
      tColor1 *= pwfValue;
      tColor.a *= mix(pwfValue, 1.0, (1.0 - mix1));
    #endif

    #if vtkNumComponents >= 3
      vec3 tColor2 = mix2*texture2D(ctexture, vec2(tValue.b * cscale2 + cshift2, height2)).rgb;
      #if !defined(vtkComponent2Proportional)
        tColor.a += goFactor.z*mix2*texture2D(otexture, vec2(tValue.b * oscale2 + oshift2, height2)).r;
      #else
        float pwfValue = texture2D(otexture, vec2(tValue.b * oscale2 + oshift2, height2)).r;
        tColor2 *= pwfValue;
        tColor.a *= mix(pwfValue, 1.0, (1.0 - mix2));
      #endif

      #if vtkNumComponents >= 4
        vec3 tColor3 = mix3*texture2D(ctexture, vec2(tValue.a * cscale3 + cshift3, height3)).rgb;
        #if !defined(vtkComponent3Proportional)
          tColor.a += goFactor.w*mix3*texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, height3)).r;
        #else
          float pwfValue = texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, height3)).r;
          tColor3 *= pwfValue;
          tColor.a *= mix(pwfValue, 1.0, (1.0 - mix3));
        #endif
      #endif
    #endif
  #else // then not independent

  #if vtkNumComponents == 2
    float lum = tValue.r * cscale0 + cshift0;
    float alpha = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale1 + oshift1, 0.5)).r;
    vec4 tColor = vec4(lum, lum, lum, alpha);
  #endif
  #if vtkNumComponents == 3
    vec4 tColor;
    tColor.r = tValue.r * cscale0 + cshift0;
    tColor.g = tValue.g * cscale1 + cshift1;
    tColor.b = tValue.b * cscale2 + cshift2;
    tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale0 + oshift0, 0.5)).r;
  #endif
  #if vtkNumComponents == 4
    vec4 tColor;
    tColor.r = tValue.r * cscale0 + cshift0;
    tColor.g = tValue.g * cscale1 + cshift1;
    tColor.b = tValue.b * cscale2 + cshift2;
    tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, 0.5)).r;
  #endif
  #endif // dependent

  // apply lighting if requested as appropriate
  #if vtkLightComplexity > 0
    #if !defined(vtkComponent0Proportional)
      #if vtkNumComponents == 1
        #ifdef SurfaceShadowOn
            #if vtkLightComplexity < 3
                vec3 tColorS = applyLightingDirectional(posIS, tColor, normalLight);
            #else
                vec3 tColorS = applyLightingPositional(posIS, tColor, normalLight, IStoVC(posIS));
            #endif
        #endif

        #ifdef VolumeShadowOn
          vec3 tColorVS = applyShadowRay(tColor.rgb, posIS, rayDirVC);
          #ifdef SurfaceShadowOn
            float vol_coef = volumetricScatteringBlending * (1.0 - tColor.a / 2.0) * (1.0 - atan(normalLight.w) * INV4PI);
            tColor.rgb = (1.0-vol_coef) * tColorS + vol_coef * tColorVS;
          #else
            tColor.rgb = tColorVS;
          #endif
        #else
            tColor.rgb = tColorS;
        #endif

      #else
        applyLighting(tColor.rgb, normal0);
      #endif
    #endif

    #if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2
      #if !defined(vtkComponent1Proportional)
        applyLighting(tColor1, normal1);
      #endif
    #if vtkNumComponents >= 3
      #if !defined(vtkComponent2Proportional)
        applyLighting(tColor2, normal2);
      #endif
    #if vtkNumComponents >= 4
      #if !defined(vtkComponent3Proportional)
        applyLighting(tColor3, normal3);
      #endif
    #endif
    #endif
    #endif
  #endif

// perform final independent blend as needed
#if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2
  tColor.rgb += tColor1;
#if vtkNumComponents >= 3
  tColor.rgb += tColor2;
#if vtkNumComponents >= 4
  tColor.rgb += tColor3;
#endif
#endif
#endif

#endif
return tColor;
}

bool valueWithinScalarRange(vec4 val, vec4 min, vec4 max) {
  bool withinRange = false;
  #if vtkNumComponents == 1
    if (val.r >= min.r && val.r <= max.r) {
      withinRange = true;
    }
  #endif
  #if defined(vtkIndependentComponentsOn) && vtkNumComponents == 2
     if (val.r >= min.r && val.r <= max.r &&
        val.g >= min.g && val.g <= max.g) {
      withinRange = true;
    }
  #endif
  #if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 3
    if (all(greaterThanEqual(val, ipScalarRangeMin)) &&
        all(lessThanEqual(val, ipScalarRangeMax))) {
      withinRange = true;
    }
  #endif
  return withinRange;
}

//=======================================================================
// Apply the specified blend mode operation along the ray's path.
//
void applyBlend(vec3 posIS, vec3 endIS, vec3 tdims)
{
  vec3 tstep = 1.0/tdims;

  // start slightly inside and apply some jitter
  vec3 delta = endIS - posIS;
  vec3 stepIS = normalize(delta)*sampleDistanceIS;
  float raySteps = length(delta)/sampleDistanceIS;

  // avoid 0.0 jitter
  float jitter = 0.01 + 0.99*texture2D(jtexture, gl_FragCoord.xy/32.0).r;
  float stepsTraveled = jitter;

  // local vars for the loop
  vec4 color = vec4(0.0, 0.0, 0.0, 0.0);
  vec4 tValue;
  vec4 tColor;

  // if we have less than one step then pick the middle point
  // as our value
  // if (raySteps <= 1.0)
  // {
  //   posIS = (posIS + endIS)*0.5;
  // }

  // Perform initial step at the volume boundary
  // compute the scalar
  tValue = getTextureValue(posIS);

  #if vtkBlendMode == 0 // COMPOSITE_BLEND
    // now map through opacity and color
    tColor = getColorForValue(tValue, posIS, tstep);

    // handle very thin volumes
    if (raySteps <= 1.0)
    {
      tColor.a = 1.0 - pow(1.0 - tColor.a, raySteps);
      gl_FragData[0] = tColor;
      return;
    }

    tColor.a = 1.0 - pow(1.0 - tColor.a, jitter);
    color = vec4(tColor.rgb*tColor.a, tColor.a);
    posIS += (jitter*stepIS);

    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar
      tValue = getTextureValue(posIS);

      // now map through opacity and color
      tColor = getColorForValue(tValue, posIS, tstep);

      float mix = (1.0 - color.a);

      // this line should not be needed but nvidia seems to not handle
      // the break correctly on windows/chrome 58 angle
      //mix = mix * sign(max(raySteps - stepsTraveled - 1.0, 0.0));

      color = color + vec4(tColor.rgb*tColor.a, tColor.a)*mix;
      stepsTraveled++;
      posIS += stepIS;
      if (color.a > 0.99) { color.a = 1.0; break; }
    }

    if (color.a < 0.99 && (raySteps - stepsTraveled) > 0.0)
    {
      posIS = endIS;

      // compute the scalar
      tValue = getTextureValue(posIS);

      // now map through opacity and color
      tColor = getColorForValue(tValue, posIS, tstep);
      tColor.a = 1.0 - pow(1.0 - tColor.a, raySteps - stepsTraveled);

      float mix = (1.0 - color.a);
      color = color + vec4(tColor.rgb*tColor.a, tColor.a)*mix;
    }

    gl_FragData[0] = vec4(color.rgb/color.a, color.a);
  #endif
  #if vtkBlendMode == 1 || vtkBlendMode == 2
    // MAXIMUM_INTENSITY_BLEND || MINIMUM_INTENSITY_BLEND
    // Find maximum/minimum intensity along the ray.

    // Define the operation we will use (min or max)
    #if vtkBlendMode == 1
    #define OP max
    #else
    #define OP min
    #endif

    // If the clipping range is shorter than the sample distance
    // we can skip the sampling loop along the ray.
    if (raySteps <= 1.0)
    {
      gl_FragData[0] = getColorForValue(tValue, posIS, tstep);
      return;
    }

    vec4 value = tValue;
    posIS += (jitter*stepIS);

    // Sample along the ray until MaximumSamplesValue,
    // ending slightly inside the total distance
    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      // If we have reached the last step, break
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar
      tValue = getTextureValue(posIS);

      // Update the maximum value if necessary
      value = OP(tValue, value);

      // Otherwise, continue along the ray
      stepsTraveled++;
      posIS += stepIS;
    }

    // Perform the last step along the ray using the
    // residual distance
    posIS = endIS;
    tValue = getTextureValue(posIS);
    value = OP(tValue, value);

    // Now map through opacity and color
    gl_FragData[0] = getColorForValue(value, posIS, tstep);
  #endif
  #if vtkBlendMode == 3 || vtkBlendMode == 4 //AVERAGE_INTENSITY_BLEND || ADDITIVE_BLEND
    vec4 sum = vec4(0.);

    if (valueWithinScalarRange(tValue, ipScalarRangeMin, ipScalarRangeMax)) {
      sum += tValue;
    }

    if (raySteps <= 1.0) {
      gl_FragData[0] = getColorForValue(sum, posIS, tstep);
      return;
    }

    posIS += (jitter*stepIS);

    // Sample along the ray until MaximumSamplesValue,
    // ending slightly inside the total distance
    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      // If we have reached the last step, break
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar
      tValue = getTextureValue(posIS);

      // One can control the scalar range by setting the AverageIPScalarRange to disregard scalar values, not in the range of interest, from the average computation.
      // Notes:
      // - We are comparing all values in the texture to see if any of them
      //   are outside of the scalar range. In the future we might want to allow
      //   scalar ranges for each component.
      if (valueWithinScalarRange(tValue, ipScalarRangeMin, ipScalarRangeMax)) {
        // Sum the values across each step in the path
        sum += tValue;
      }
      stepsTraveled++;
      posIS += stepIS;
    }

    // Perform the last step along the ray using the
    // residual distance
    posIS = endIS;

    // compute the scalar
    tValue = getTextureValue(posIS);

    // One can control the scalar range by setting the IPScalarRange to disregard scalar values, not in the range of interest, from the average computation
    if (valueWithinScalarRange(tValue, ipScalarRangeMin, ipScalarRangeMax)) {
      sum += tValue;

      stepsTraveled++;
    }

    #if vtkBlendMode == 3 // Average
      sum /= vec4(stepsTraveled, stepsTraveled, stepsTraveled, 1.0);
    #endif

    gl_FragData[0] = getColorForValue(sum, posIS, tstep);
  #endif
  #if vtkBlendMode == 5 // RADON
    float normalizedRayIntensity = 1.0;

    // handle very thin volumes
    if (raySteps <= 1.0)
    {
      tValue = getTextureValue(posIS);
      normalizedRayIntensity = normalizedRayIntensity - sampleDistance*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;
      gl_FragData[0] = texture2D(ctexture, vec2(normalizedRayIntensity, 0.5));
      return;
    }

    posIS += (jitter*stepIS);

    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar value
      tValue = getTextureValue(posIS);

      // Convert scalar value to normalizedRayIntensity coefficient and accumulate normalizedRayIntensity
      normalizedRayIntensity = normalizedRayIntensity - sampleDistance*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;

      posIS += stepIS;
      stepsTraveled++;
    }

    // map normalizedRayIntensity to color
    gl_FragData[0] = texture2D(ctexture, vec2(normalizedRayIntensity , 0.5));

  #endif
}

//=======================================================================
// Compute a new start and end point for a given ray based
// on the provided bounded clipping plane (aka a rectangle)
void getRayPointIntersectionBounds(
  vec3 rayPos, vec3 rayDir,
  vec3 planeDir, float planeDist,
  inout vec2 tbounds, vec3 vPlaneX, vec3 vPlaneY,
  float vSize1, float vSize2)
{
  float result = dot(rayDir, planeDir);
  if (abs(result) < 1e-6)
  {
    return;
  }
  result = -1.0 * (dot(rayPos, planeDir) + planeDist) / result;
  vec3 xposVC = rayPos + rayDir*result;
  vec3 vxpos = xposVC - vOriginVC;
  vec2 vpos = vec2(
    dot(vxpos, vPlaneX),
    dot(vxpos, vPlaneY));

  // on some apple nvidia systems this does not work
  // if (vpos.x < 0.0 || vpos.x > vSize1 ||
  //     vpos.y < 0.0 || vpos.y > vSize2)
  // even just
  // if (vpos.x < 0.0 || vpos.y < 0.0)
  // fails
  // so instead we compute a value that represents in and out
  //and then compute the return using this value
  float xcheck = max(0.0, vpos.x * (vpos.x - vSize1)); //  0 means in bounds
  float check = sign(max(xcheck, vpos.y * (vpos.y - vSize2))); //  0 means in bounds, 1 = out

  tbounds = mix(
   vec2(min(tbounds.x, result), max(tbounds.y, result)), // in value
   tbounds, // out value
   check);  // 0 in 1 out
}

//=======================================================================
// given a
// - ray direction (rayDir)
// - starting point (vertexVCVSOutput)
// - bounding planes of the volume
// - optionally depth buffer values
// - far clipping plane
// compute the start/end distances of the ray we need to cast
vec2 computeRayDistances(vec3 rayDir, vec3 tdims)
{
  vec2 dists = vec2(100.0*camFar, -1.0);

  vec3 vSize = vSpacing*tdims;

  // all this is in View Coordinates
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal0, vPlaneDistance0, dists, vPlaneNormal2, vPlaneNormal4,
    vSize.y, vSize.z);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal1, vPlaneDistance1, dists, vPlaneNormal2, vPlaneNormal4,
    vSize.y, vSize.z);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal2, vPlaneDistance2, dists, vPlaneNormal0, vPlaneNormal4,
    vSize.x, vSize.z);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal3, vPlaneDistance3, dists, vPlaneNormal0, vPlaneNormal4,
    vSize.x, vSize.z);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal4, vPlaneDistance4, dists, vPlaneNormal0, vPlaneNormal2,
    vSize.x, vSize.y);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal5, vPlaneDistance5, dists, vPlaneNormal0, vPlaneNormal2,
    vSize.x, vSize.y);

  //VTK::ClipPlane::Impl

  // do not go behind front clipping plane
  dists.x = max(0.0,dists.x);

  // do not go PAST far clipping plane
  float farDist = -camThick/rayDir.z;
  dists.y = min(farDist,dists.y);

  // Do not go past the zbuffer value if set
  // This is used for intermixing opaque geometry
  //VTK::ZBuffer::Impl

  return dists;
}

//=======================================================================
// Compute the index space starting position (pos) and end
// position
//
void computeIndexSpaceValues(out vec3 pos, out vec3 endPos, vec3 rayDir, vec2 dists)
{
  // compute starting and ending values in volume space
  pos = vertexVCVSOutput + dists.x*rayDir;
  pos = pos - vOriginVC;
  // convert to volume basis and origin
  pos = vec3(
    dot(pos, vPlaneNormal0),
    dot(pos, vPlaneNormal2),
    dot(pos, vPlaneNormal4));

  endPos = vertexVCVSOutput + dists.y*rayDir;
  endPos = endPos - vOriginVC;
  endPos = vec3(
    dot(endPos, vPlaneNormal0),
    dot(endPos, vPlaneNormal2),
    dot(endPos, vPlaneNormal4));

  float delta = length(endPos - pos);

  pos *= vVCToIJK;
  endPos *= vVCToIJK;

  float delta2 = length(endPos - pos);
  sampleDistanceIS = sampleDistance*delta2/delta;
  #ifdef VolumeShadowOn
    sampleDistanceISVS = sampleDistanceIS * volumeShadowSamplingDistFactor;
  #endif
}

void main()
{

  if (cameraParallel == 1)
  {
    // Camera is parallel, so the rayDir is just the direction of the camera.
    rayDirVC = vec3(0.0, 0.0, -1.0);
  } else {
    // camera is at 0,0,0 so rayDir for perspective is just the vc coord
    rayDirVC = normalize(vertexVCVSOutput);
  }

  vec3 tdims = vec3(volumeDimensions);

  // compute the start and end points for the ray
  vec2 rayStartEndDistancesVC = computeRayDistances(rayDirVC, tdims);

  // do we need to composite? aka does the ray have any length
  // If not, bail out early
  if (rayStartEndDistancesVC.y <= rayStartEndDistancesVC.x)
  {
    discard;
  }

  // IS = Index Space
  vec3 posIS;
  vec3 endIS;
  computeIndexSpaceValues(posIS, endIS, rayDirVC, rayStartEndDistancesVC);

  // Perform the blending operation along the ray
  applyBlend(posIS, endIS, tdims);
}
`;function eh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Ux(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eh(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eh(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Gx=Ea,Q0=Me;function Px(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}function Ix(t,e){e.classHierarchy.push("vtkOpenGLVolumeMapper"),t.buildPass=function(){e.zBufferTexture=null},t.zBufferPass=function(n,r){if(n){var a=r.getZBufferTexture();a!==e.zBufferTexture&&(e.zBufferTexture=a)}},t.opaqueZBufferPass=function(n,r){return t.zBufferPass(n,r)},t.volumePass=function(n,r){if(n){e._openGLRenderWindow=t.getFirstAncestorOfType("vtkOpenGLRenderWindow"),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.jitterTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.scalarTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.opacityTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLVolume=t.getFirstAncestorOfType("vtkOpenGLVolume");var a=e.openGLVolume.getRenderable();e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer");var i=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(i.getActiveCamera()),t.renderPiece(i,a)}},t.buildShaders=function(n,r,a){t.getShaderTemplate(n,r,a),t.replaceShaderValues(n,r,a)},t.getShaderTemplate=function(n,r,a){n.Vertex=Vx,n.Fragment=Bx,n.Geometry=""},t.replaceShaderValues=function(n,r,a){var i=n.Fragment,o=a.getProperty().getInterpolationType();o===J0.LINEAR&&(i=ee.substitute(i,"//VTK::TrilinearOn","#define vtkTrilinearOn").result);var s=a.getProperty().getUseLabelOutline();s===!0&&(i=ee.substitute(i,"//VTK::ImageLabelOutlineOn","#define vtkImageLabelOutlineOn").result);var c=e.scalarTexture.getComponents();i=ee.substitute(i,"//VTK::NumComponents","#define vtkNumComponents ".concat(c)).result;var u=a.getProperty().getIndependentComponents();if(u){i=ee.substitute(i,"//VTK::IndependentComponentsOn","#define vtkIndependentComponentsOn").result;for(var f=[],l=0;l<c;l++)a.getProperty().getOpacityMode(l)===Jp.PROPORTIONAL&&f.push("#define vtkComponent".concat(l,"Proportional"));f.length>0&&(i=ee.substitute(i,"//VTK::vtkProportionalComponents",f.join(`
`)).result)}var p=e.currentInput.getSpatialExtent(),h=e.currentInput.getSpacing(),v=new Float64Array(3);Xe(v,(p[1]-p[0])*h[0],(p[3]-p[2])*h[1],(p[5]-p[4])*h[2]);var y=qr(v)/e.renderable.getSampleDistance();i=ee.substitute(i,"//VTK::MaximumSamplesValue","".concat(Math.ceil(y))).result,i=ee.substitute(i,"//VTK::LightComplexity","#define vtkLightComplexity ".concat(e.lastLightComplexity)).result,e.lastLightComplexity>0&&(e.renderable.getVolumetricScatteringBlending()>0&&(i=ee.substitute(i,"//VTK::VolumeShadowOn","#define VolumeShadowOn").result),e.renderable.getVolumetricScatteringBlending()<1&&(i=ee.substitute(i,"//VTK::SurfaceShadowOn","#define SurfaceShadowOn").result),e.renderable.getLocalAmbientOcclusion()&&a.getProperty().getAmbient()>0&&(i=ee.substitute(i,"//VTK::localAmbientOcclusionOn","#define localAmbientOcclusionOn").result)),e.gopacity=a.getProperty().getUseGradientOpacity(0);for(var m=1;u&&!e.gopacity&&m<c;++m)a.getProperty().getUseGradientOpacity(m)&&(e.gopacity=!0);e.gopacity&&(i=ee.substitute(i,"//VTK::GradientOpacityOn","#define vtkGradientOpacityOn").result),e.renderable.getComputeNormalFromOpacity()&&(i=ee.substitute(i,"//VTK::vtkComputeNormalFromOpacity","#define vtkComputeNormalFromOpacity").result),e.zBufferTexture!==null&&(i=ee.substitute(i,"//VTK::ZBuffer::Dec",["uniform sampler2D zBufferTexture;","uniform float vpWidth;","uniform float vpHeight;"]).result,i=ee.substitute(i,"//VTK::ZBuffer::Impl",["vec4 depthVec = texture2D(zBufferTexture, vec2(gl_FragCoord.x / vpWidth, gl_FragCoord.y/vpHeight));","float zdepth = (depthVec.r*256.0 + depthVec.g)/257.0;","zdepth = zdepth * 2.0 - 1.0;","if (cameraParallel == 0) {","zdepth = -2.0 * camFar * camNear / (zdepth*(camFar-camNear)-(camFar+camNear)) - camNear;}","else {",`zdepth = (zdepth + 1.0) * 0.5 * (camFar - camNear);}
`,"zdepth = -zdepth/rayDir.z;","dists.y = min(zdepth,dists.y);"]).result),i=ee.substitute(i,"//VTK::BlendMode","".concat(e.renderable.getBlendMode())).result,n.Fragment=i,t.replaceShaderLight(n,r,a),t.replaceShaderClippingPlane(n,r,a)},t.replaceShaderLight=function(n,r,a){if(e.lastLightComplexity!==0){var i=n.Fragment,o=0;r.getLights().forEach(function(s){s.getSwitch()&&(o+=1)}),i=ee.substitute(i,"//VTK::Light::Dec",["uniform int lightNum;","uniform bool twoSidedLighting;","uniform vec3 lightColor[".concat(o,"];"),"uniform vec3 lightDirectionVC[".concat(o,"]; // normalized"),"uniform vec3 lightHalfAngleVC[".concat(o,"];"),"//VTK::Light::Dec"],!1).result,e.lastLightComplexity===3&&(i=ee.substitute(i,"//VTK::Light::Dec",["uniform vec3 lightPositionVC[".concat(o,"];"),"uniform vec3 lightAttenuation[".concat(o,"];"),"uniform float lightConeAngle[".concat(o,"];"),"uniform float lightExponent[".concat(o,"];"),"uniform int lightPositional[".concat(o,"];")],!1).result),e.renderable.getVolumetricScatteringBlending()>0&&(i=ee.substitute(i,"//VTK::VolumeShadow::Dec",["uniform float volumetricScatteringBlending;","uniform float giReach;","uniform float volumeShadowSamplingDistFactor;","uniform float anisotropy;","uniform float anisotropy2;"],!1).result),e.renderable.getLocalAmbientOcclusion()&&a.getProperty().getAmbient()>0&&(i=ee.substitute(i,"//VTK::LAO::Dec",["uniform int kernelRadius;","uniform vec2 kernelSample[".concat(e.renderable.getLAOKernelRadius(),"];"),"uniform int kernelSize;"],!1).result),n.Fragment=i}},t.replaceShaderClippingPlane=function(n,r,a){var i=n.Fragment;if(e.renderable.getClippingPlanes().length>0){var o=e.renderable.getClippingPlanes().length;i=ee.substitute(i,"//VTK::ClipPlane::Dec",["uniform vec3 vClipPlaneNormals[6];","uniform float vClipPlaneDistances[6];","uniform vec3 vClipPlaneOrigins[6];","uniform int clip_numPlanes;","//VTK::ClipPlane::Dec","#define vtkClippingPlanesOn"],!1).result,i=ee.substitute(i,"//VTK::ClipPlane::Impl",["for(int i = 0; i < ".concat(o,"; i++) {"),"  float rayDirRatio = dot(rayDir, vClipPlaneNormals[i]);","  float equationResult = dot(vertexVCVSOutput, vClipPlaneNormals[i]) + vClipPlaneDistances[i];","  if (rayDirRatio == 0.0)","  {","    if (equationResult < 0.0) dists.x = dists.y;","    continue;","  }","  float result = -1.0 * equationResult / rayDirRatio;","  if (rayDirRatio < 0.0) dists.y = min(dists.y, result);","  else dists.x = max(dists.x, result);","}","//VTK::ClipPlane::Impl"],!1).result}n.Fragment=i},t.getNeedToRebuildShaders=function(n,r,a){var i=0;a.getProperty().getShade()&&e.renderable.getBlendMode()===Zp.COMPOSITE_BLEND&&(i=0,e.numberOfLights=0,r.getLights().forEach(function(x){var g=x.getSwitch();g>0&&(e.numberOfLights++,i===0&&(i=1)),i===1&&(e.numberOfLights>1||x.getIntensity()!==1||!x.lightTypeIsHeadLight())&&(i=2),i<3&&x.getPositional()&&(i=3)}));var o=!1;e.lastLightComplexity!==i&&(e.lastLightComplexity=i,o=!0);var s=e.scalarTexture.getComponents(),c=a.getProperty().getIndependentComponents(),u=!1,f=[];if(c){for(var l=0;l<s;l++)f.push(a.getProperty().getOpacityMode(l));f.length>0&&(u=!0)}var p=e.currentInput.getSpatialExtent(),h=e.currentInput.getSpacing(),v=new Float64Array(3);Xe(v,(p[1]-p[0])*h[0],(p[3]-p[2])*h[1],(p[5]-p[4])*h[2]);var y=qr(v)/e.renderable.getSampleDistance(),m={interpolationType:a.getProperty().getInterpolationType(),useLabelOutline:a.getProperty().getUseLabelOutline(),numComp:s,usesProportionalComponents:u,iComps:c,maxSamples:y,useGradientOpacity:a.getProperty().getUseGradientOpacity(0),blendMode:e.renderable.getBlendMode(),proportionalComponents:f};return!e.previousState||e.previousState.interpolationType!==m.interpolationType||e.previousState.useLabelOutline!==m.useLabelOutline||e.previousState.numComp!==m.numComp||e.previousState.usesProportionalComponents!==m.usesProportionalComponents||e.previousState.iComps!==m.iComps||e.previousState.maxSamples!==m.maxSamples||e.previousState.useGradientOpacity!==m.useGradientOpacity||e.previousState.blendMode!==m.blendMode||!Px(e.previousState.proportionalComponents,m.proportionalComponents)?(e.previousState=Ux({},m),!0):n.getProgram()===0||o||e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||!!e.lastZBufferTexture!=!!e.zBufferTexture||n.getShaderSourceTime().getMTime()<t.getMTime()||n.getShaderSourceTime().getMTime()<e.renderable.getMTime()?(e.lastZBufferTexture=e.zBufferTexture,!0):!1},t.updateShaders=function(n,r,a){if(e.lastBoundBO=n,t.getNeedToRebuildShaders(n,r,a)){var i={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(i,r,a);var o=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(i.Vertex,i.Fragment,i.Geometry);o!==n.getProgram()&&(n.setProgram(o),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),t.setMapperShaderParameters(n,r,a),t.setCameraShaderParameters(n,r,a),t.setPropertyShaderParameters(n,r,a),t.getClippingPlaneShaderParameters(n,r,a)},t.setMapperShaderParameters=function(n,r,a){var i=n.getProgram();n.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&(i.isAttributeUsed("vertexDC")&&(n.getVAO().addAttributeArray(i,n.getCABO(),"vertexDC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||Q0("Error setting vertexDC in shader VAO.")),n.getAttributeUpdateTime().modified()),i.setUniformi("texture1",e.scalarTexture.getTextureUnit()),i.setUniformf("sampleDistance",e.renderable.getSampleDistance());for(var o=e.scalarTexture.getVolumeInfo(),s=e.renderable.getIpScalarRange(),c=[],u=[],f=0;f<4;f++)c[f]=s[0]*o.dataComputedScale[f]+o.dataComputedOffset[f],u[f]=s[1]*o.dataComputedScale[f]+o.dataComputedOffset[f],c[f]=(c[f]-o.offset[f])/o.scale[f],u[f]=(u[f]-o.offset[f])/o.scale[f];if(i.setUniform4f("ipScalarRangeMin",c[0],c[1],c[2],c[3]),i.setUniform4f("ipScalarRangeMax",u[0],u[1],u[2],u[3]),e.zBufferTexture!==null){i.setUniformi("zBufferTexture",e.zBufferTexture.getTextureUnit());var l=e._useSmallViewport?[e._smallViewportWidth,e._smallViewportHeight]:e._openGLRenderWindow.getFramebufferSize();i.setUniformf("vpWidth",l[0]),i.setUniformf("vpHeight",l[1])}},t.setCameraShaderParameters=function(n,r,a){var i=e.openGLCamera.getKeyMatrices(r),o=e.openGLVolume.getKeyMatrices();Ke(e.modelToView,i.wcvc,o.mcwc);var s=n.getProgram(),c=e.openGLCamera.getRenderable(),u=c.getClippingRange();s.setUniformf("camThick",u[1]-u[0]),s.setUniformf("camNear",u[0]),s.setUniformf("camFar",u[1]);for(var f=e.currentInput.getBounds(),l=e.currentInput.getDimensions(),p=new Float64Array(3),h=new Float64Array(3),v=1,y=-1,m=1,x=-1,g=0;g<8;++g){if(Xe(p,f[g%2],f[2+Math.floor(g/2)%2],f[4+Math.floor(g/4)]),be(p,p,e.modelToView),!c.getParallelProjection()){It(h,p);var d=-u[0]/p[2];dr(p,h,d)}be(p,p,i.vcpc),v=Math.min(p[0],v),y=Math.max(p[0],y),m=Math.min(p[1],m),x=Math.max(p[1],x)}s.setUniformf("dcxmin",v),s.setUniformf("dcxmax",y),s.setUniformf("dcymin",m),s.setUniformf("dcymax",x),s.isUniformUsed("cameraParallel")&&s.setUniformi("cameraParallel",c.getParallelProjection());var C=e.currentInput.getSpatialExtent(),S=e.currentInput.getSpacing(),T=new Float64Array(3);Xe(T,(C[1]-C[0])*S[0],(C[3]-C[2])*S[1],(C[5]-C[4])*S[2]),s.setUniform3f("vSpacing",S[0],S[1],S[2]),Xe(p,C[0],C[2],C[4]),e.currentInput.indexToWorldVec3(p,p),be(p,p,e.modelToView),s.setUniform3f("vOriginVC",p[0],p[1],p[2]);var w=e.currentInput.getIndexToWorld();Ke(e.idxToView,e.modelToView,w),kn(e.idxNormalMatrix,i.normalMatrix,o.normalMatrix),kn(e.idxNormalMatrix,e.idxNormalMatrix,e.currentInput.getDirectionByReference());var E=qr(T)/e.renderable.getSampleDistance();E>e.renderable.getMaximumSamplesPerRay()&&Gx("The number of steps required ".concat(Math.ceil(E),` is larger than the
        specified maximum number of steps `).concat(e.renderable.getMaximumSamplesPerRay(),`.
        Please either change the
        volumeMapper sampleDistance or its maximum number of samples.`));var D=new Float64Array(3);if(Xe(D,1,1,1),ls(D,D,T),s.setUniform3f("vVCToIJK",D[0],D[1],D[2]),s.setUniform3i("volumeDimensions",l[0],l[1],l[2]),!e._openGLRenderWindow.getWebgl2()){var b=e.scalarTexture.getVolumeInfo();s.setUniformf("texWidth",e.scalarTexture.getWidth()),s.setUniformf("texHeight",e.scalarTexture.getHeight()),s.setUniformi("xreps",b.xreps),s.setUniformi("xstride",b.xstride),s.setUniformi("ystride",b.ystride)}for(var O=new Float64Array(3),M=new Float64Array(3),R=0;R<6;++R){switch(R){case 1:Xe(O,-1,0,0),Xe(M,C[0],C[2],C[4]);break;case 2:Xe(O,0,1,0),Xe(M,C[1],C[3],C[5]);break;case 3:Xe(O,0,-1,0),Xe(M,C[0],C[2],C[4]);break;case 4:Xe(O,0,0,1),Xe(M,C[1],C[3],C[5]);break;case 5:Xe(O,0,0,-1),Xe(M,C[0],C[2],C[4]);break;case 0:default:Xe(O,1,0,0),Xe(M,C[1],C[3],C[5]);break}Ci(O,O,e.idxNormalMatrix),be(M,M,e.idxToView);var N=-1*Yr(M,O);s.setUniform3f("vPlaneNormal".concat(R),O[0],O[1],O[2]),s.setUniformf("vPlaneDistance".concat(R),N)}if(a.getProperty().getUseLabelOutline()){var U=e.currentInput,W=U.getWorldToIndex();s.setUniformMatrix("vWCtoIDX",W);var I=r.getActiveCamera(),G=I.getClippingRange(),F=ze(G,2),A=F[0],H=F[1],$=I.getDistance();I.setClippingRange($,$+.1);var X=e.openGLCamera.getKeyMatrices(r);Ft(e.projectionToWorld,X.wcpc),I.setClippingRange(A,H),e.openGLCamera.getKeyMatrices(r),s.setUniformMatrix("PCWCMatrix",e.projectionToWorld);var Y=t.getRenderTargetSize();s.setUniformf("vpWidth",Y[0]),s.setUniformf("vpHeight",Y[1]);var q=t.getRenderTargetOffset();s.setUniformf("vpOffsetX",q[0]/Y[0]),s.setUniformf("vpOffsetY",q[1]/Y[1])}if(Ft(e.projectionToView,i.vcpc),s.setUniformMatrix("PCVCMatrix",e.projectionToView),e.lastLightComplexity!==0){var J=0,ne=[],Q=[],te=[];if(r.getLights().forEach(function(re){var ie=re.getSwitch();if(ie>0){var oe=re.getColor(),he=re.getIntensity();ne[0+J*3]=oe[0]*he,ne[1+J*3]=oe[1]*he,ne[2+J*3]=oe[2]*he;var ye=re.getDirection();Xe(O,ye[0],ye[1],ye[2]),Ci(O,O,i.normalMatrix),It(O,O),Q[0+J*3]=O[0],Q[1+J*3]=O[1],Q[2+J*3]=O[2],te[0+J*3]=-.5*O[0],te[1+J*3]=-.5*O[1],te[2+J*3]=-.5*(O[2]-1),J++}}),s.setUniformi("twoSidedLighting",r.getTwoSidedLighting()),s.setUniformi("lightNum",J),s.setUniform3fv("lightColor",ne),s.setUniform3fv("lightDirectionVC",Q),s.setUniform3fv("lightHalfAngleVC",te),e.lastLightComplexity===3){J=0;var L=[],_=[],V=[],k=[],P=[];r.getLights().forEach(function(re){var ie=re.getSwitch();if(ie>0){var oe=re.getAttenuationValues();_[0+J*3]=oe[0],_[1+J*3]=oe[1],_[2+J*3]=oe[2],k[J]=re.getExponent(),V[J]=re.getConeAngle(),P[J]=re.getPositional();var he=re.getTransformedPosition();be(he,he,e.modelToView),L[0+J*3]=he[0],L[1+J*3]=he[1],L[2+J*3]=he[2],J+=1}}),s.setUniform3fv("lightPositionVC",L),s.setUniform3fv("lightAttenuation",_),s.setUniformfv("lightConeAngle",V),s.setUniformfv("lightExponent",k),s.setUniformiv("lightPositional",P)}if(e.renderable.getVolumetricScatteringBlending()>0&&(s.setUniformf("giReach",e.renderable.getGlobalIlluminationReach()),s.setUniformf("volumetricScatteringBlending",e.renderable.getVolumetricScatteringBlending()),s.setUniformf("volumeShadowSamplingDistFactor",e.renderable.getVolumeShadowSamplingDistFactor()),s.setUniformf("anisotropy",e.renderable.getAnisotropy()),s.setUniformf("anisotropy2",Math.pow(e.renderable.getAnisotropy(),2))),e.renderable.getLocalAmbientOcclusion()&&a.getProperty().getAmbient()>0){var j=e.renderable.getLAOKernelSize();s.setUniformi("kernelSize",j);for(var z=[],Z=0;Z<j;Z++)z[Z*2]=Math.random()*.5,z[Z*2+1]=Math.random()*.5;s.setUniform2fv("kernelSample",z),s.setUniformi("kernelRadius",e.renderable.getLAOKernelRadius())}}},t.setPropertyShaderParameters=function(n,r,a){var i=n.getProgram();i.setUniformi("ctexture",e.colorTexture.getTextureUnit()),i.setUniformi("otexture",e.opacityTexture.getTextureUnit()),i.setUniformi("jtexture",e.jitterTexture.getTextureUnit());var o=e.scalarTexture.getVolumeInfo(),s=a.getProperty(),c=e.scalarTexture.getComponents(),u=a.getProperty().getIndependentComponents();if(u&&c>=2)for(var f=0;f<c;f++)i.setUniformf("mix".concat(f),a.getProperty().getComponentWeight(f));for(var l=0;l<c;l++){var p=u?l:0,h=o.scale[l],v=s.getScalarOpacity(p),y=v.getRange(),m=h/(y[1]-y[0]),x=(o.offset[l]-y[0])/(y[1]-y[0]);i.setUniformf("oshift".concat(l),x),i.setUniformf("oscale".concat(l),m);var g=s.getRGBTransferFunction(p),d=g.getRange(),C=(o.offset[l]-d[0])/(d[1]-d[0]),S=h/(d[1]-d[0]);i.setUniformf("cshift".concat(l),C),i.setUniformf("cscale".concat(l),S)}if(e.gopacity)if(u)for(var T=0;T<c;++T){var w=o.scale[T],E=s.getUseGradientOpacity(T);if(E){var D=s.getGradientOpacityMinimumOpacity(T),b=s.getGradientOpacityMaximumOpacity(T);i.setUniformf("gomin".concat(T),D),i.setUniformf("gomax".concat(T),b);var O=[s.getGradientOpacityMinimumValue(T),s.getGradientOpacityMaximumValue(T)];i.setUniformf("goscale".concat(T),w*(b-D)/(O[1]-O[0])),i.setUniformf("goshift".concat(T),-O[0]*(b-D)/(O[1]-O[0])+D)}else i.setUniformf("gomin".concat(T),1),i.setUniformf("gomax".concat(T),1),i.setUniformf("goscale".concat(T),0),i.setUniformf("goshift".concat(T),1)}else{var M=o.scale[c-1],R=s.getGradientOpacityMinimumOpacity(0),N=s.getGradientOpacityMaximumOpacity(0);i.setUniformf("gomin0",R),i.setUniformf("gomax0",N);var U=[s.getGradientOpacityMinimumValue(0),s.getGradientOpacityMaximumValue(0)];i.setUniformf("goscale0",M*(N-R)/(U[1]-U[0])),i.setUniformf("goshift0",-U[0]*(N-R)/(U[1]-U[0])+R)}var W=a.getProperty().getUseLabelOutline();if(W===!0){var I=a.getProperty().getLabelOutlineThickness(),G=a.getProperty().getLabelOutlineOpacity();i.setUniformi("outlineThickness",I),i.setUniformf("outlineOpacity",G)}e.lastLightComplexity>0&&(i.setUniformf("vAmbient",s.getAmbient()),i.setUniformf("vDiffuse",s.getDiffuse()),i.setUniformf("vSpecular",s.getSpecular()),i.setUniformf("vSpecularPower",s.getSpecularPower()))},t.getClippingPlaneShaderParameters=function(n,r,a){if(e.renderable.getClippingPlanes().length>0){for(var i=e.openGLCamera.getKeyMatrices(r),o=[],s=[],c=[],u=e.renderable.getClippingPlanes(),f=u.length,l=0;l<f;++l){var p=u[l].getNormal(),h=u[l].getOrigin();Ci(p,p,i.normalMatrix),be(h,h,i.wcvc);var v=-1*Yr(h,p);o.push(p[0]),o.push(p[1]),o.push(p[2]),s.push(v),c.push(h[0]),c.push(h[1]),c.push(h[2])}var y=n.getProgram();y.setUniform3fv("vClipPlaneNormals",o),y.setUniformfv("vClipPlaneDistances",s),y.setUniform3fv("vClipPlaneOrigins",c),y.setUniformi("clip_numPlanes",f)}},t.delete=_a(function(){e._animationRateSubscription&&(e._animationRateSubscription.unsubscribe(),e._animationRateSubscription=null)},t.delete),t.getRenderTargetSize=function(){if(e._useSmallViewport)return[e._smallViewportWidth,e._smallViewportHeight];var n=e._openGLRenderer.getTiledSizeAndOrigin(),r=n.usize,a=n.vsize;return[r,a]},t.getRenderTargetOffset=function(){var n=e._openGLRenderer.getTiledSizeAndOrigin(),r=n.lowerLeftU,a=n.lowerLeftV;return[r,a]},t.renderPieceStart=function(n,r){var a=n.getVTKWindow().getInteractor();if(e._useSmallViewport=!1,a.isAnimating()&&e._lastScale>1.5&&(e._useSmallViewport=!0),e._animationRateSubscription||(e._animationRateSubscription=a.onAnimationFrameRateUpdate(function(){if(e.renderable.getAutoAdjustSampleDistances()){var u=a.getRecentAnimationFrameRate(),f=a.getDesiredUpdateRate()/u;(f>1.15||f<.85)&&(e._lastScale*=f),e._lastScale>400&&(e._lastScale=400),e._lastScale<1.5&&(e._lastScale=1.5)}else e._lastScale=e.renderable.getImageSampleDistance()*e.renderable.getImageSampleDistance();var l=e._openGLRenderWindow.getFramebufferSize();e._smallViewportWidth=Math.ceil(l[0]/Math.sqrt(e._lastScale)),e._smallViewportHeight=Math.ceil(l[1]/Math.sqrt(e._lastScale))})),e._useSmallViewport){var i=e._openGLRenderWindow.getFramebufferSize();if(e._smallViewportHeight>i[1]&&(e._smallViewportHeight=i[1]),e._smallViewportWidth>i[0]&&(e._smallViewportWidth=i[0]),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.getGLFramebuffer()===null)e.framebuffer.create(i[0],i[1]),e.framebuffer.populateFramebuffer();else{var o=e.framebuffer.getSize();(o[0]!==i[0]||o[1]!==i[1])&&(e.framebuffer.create(i[0],i[1]),e.framebuffer.populateFramebuffer())}e.framebuffer.bind();var s=e.context;s.clearColor(0,0,0,0),s.colorMask(!0,!0,!0,!0),s.clear(s.COLOR_BUFFER_BIT),s.viewport(0,0,e._smallViewportWidth,e._smallViewportHeight),e.fvp=[e._smallViewportWidth/i[0],e._smallViewportHeight/i[1]]}e.context.disable(e.context.DEPTH_TEST),t.updateBufferObjects(n,r);var c=r.getProperty().getInterpolationType();c===J0.NEAREST?(e.scalarTexture.setMinificationFilter(Ee.NEAREST),e.scalarTexture.setMagnificationFilter(Ee.NEAREST)):(e.scalarTexture.setMinificationFilter(Ee.LINEAR),e.scalarTexture.setMagnificationFilter(Ee.LINEAR)),e.lastBoundBO=null,e.zBufferTexture!==null&&e.zBufferTexture.activate()},t.renderPieceDraw=function(n,r){var a=e.context;e.scalarTexture.activate(),e.opacityTexture.activate(),e.colorTexture.activate(),e.jitterTexture.activate(),t.updateShaders(e.tris,n,r),a.drawArrays(a.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),e.scalarTexture.deactivate(),e.colorTexture.deactivate(),e.opacityTexture.deactivate(),e.jitterTexture.deactivate()},t.renderPieceFinish=function(n,r){if(e.zBufferTexture!==null&&e.zBufferTexture.deactivate(),e._useSmallViewport){if(e.framebuffer.restorePreviousBindingsAndBuffers(),e.copyShader===null){e.copyShader=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","uniform vec2 tfactor;","varying vec2 tcoord;","void main() { tcoord = vec2(vertexDC.x*0.5 + 0.5, vertexDC.y*0.5 + 0.5) * tfactor; gl_Position = vertexDC; }"].join(`
`),["//VTK::System::Dec","//VTK::Output::Dec","uniform sampler2D texture1;","varying vec2 tcoord;","void main() { gl_FragData[0] = texture2D(texture1,tcoord); }"].join(`
`),"");var a=e.copyShader;e.copyVAO=qa.newInstance(),e.copyVAO.setOpenGLRenderWindow(e._openGLRenderWindow),e.tris.getCABO().bind(),e.copyVAO.addAttributeArray(a,e.tris.getCABO(),"vertexDC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||Q0("Error setting vertexDC in copy shader VAO.")}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(e.copyShader);var i=e._openGLRenderWindow.getFramebufferSize();e.context.viewport(0,0,i[0],i[1]);var o=e.framebuffer.getColorTexture();o.activate(),e.copyShader.setUniformi("texture",o.getTextureUnit()),e.copyShader.setUniform2f("tfactor",e.fvp[0],e.fvp[1]);var s=e.context;s.blendFuncSeparate(s.ONE,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA),e.context.drawArrays(e.context.TRIANGLES,0,e.tris.getCABO().getElementCount()),o.deactivate(),s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA)}},t.renderPiece=function(n,r){if(t.invokeEvent({type:"StartEvent"}),e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent({type:"EndEvent"}),!e.currentInput){Q0("No input!");return}t.renderPieceStart(n,r),t.renderPieceDraw(n,r),t.renderPieceFinish(n,r)},t.computeBounds=function(n,r){if(!t.getInput()){Wn(e.Bounds);return}e.bounds=t.getInput().getBounds()},t.updateBufferObjects=function(n,r){t.getNeedToRebuildBufferObjects(n,r)&&t.buildBufferObjects(n,r)},t.getNeedToRebuildBufferObjects=function(n,r){return e.VBOBuildTime.getMTime()<t.getMTime()||e.VBOBuildTime.getMTime()<r.getMTime()||e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<r.getProperty().getMTime()||e.VBOBuildTime.getMTime()<e.currentInput.getMTime()},t.buildBufferObjects=function(n,r){var a=e.currentInput;if(a){var i=a.getPointData()&&a.getPointData().getScalars();if(i){var o=r.getProperty();if(!e.jitterTexture.getHandle()){for(var s=new Uint8Array(1024),c=0;c<32*32;++c)s[c]=255*Math.random();e.jitterTexture.setMinificationFilter(Ee.LINEAR),e.jitterTexture.setMagnificationFilter(Ee.LINEAR),e.jitterTexture.create2DFromRaw(32,32,1,He.UNSIGNED_CHAR,s)}var u=i.getNumberOfComponents(),f=o.getIndependentComponents(),l=f?u:1,p="".concat(o.getMTime());if(e.opacityTextureString!==p){for(var h=1024,v=h*2*l,y=new Float32Array(v),m=new Float32Array(h),x=0;x<l;++x){var g=o.getScalarOpacity(x),d=e.renderable.getSampleDistance()/o.getScalarOpacityUnitDistance(x),C=g.getRange();g.getTable(C[0],C[1],h,m,1);for(var S=0;S<h;++S)y[x*h*2+S]=1-Math.pow(1-m[S],d),y[x*h*2+S+h]=y[x*h*2+S]}if(e.opacityTexture.releaseGraphicsResources(e._openGLRenderWindow),e.opacityTexture.setMinificationFilter(Ee.LINEAR),e.opacityTexture.setMagnificationFilter(Ee.LINEAR),e._openGLRenderWindow.getWebgl2()||e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear"))e.opacityTexture.create2DFromRaw(h,2*l,1,He.FLOAT,y);else{for(var T=new Uint8Array(v),w=0;w<v;++w)T[w]=255*y[w];e.opacityTexture.create2DFromRaw(h,2*l,1,He.UNSIGNED_CHAR,T)}e.opacityTextureString=p}if(p="".concat(o.getMTime()),e.colorTextureString!==p){for(var E=1024,D=E*2*l*3,b=new Uint8Array(D),O=new Float32Array(E*3),M=0;M<l;++M){var R=o.getRGBTransferFunction(M),N=R.getRange();R.getTable(N[0],N[1],E,O,1);for(var U=0;U<E*3;++U)b[M*E*6+U]=255*O[U],b[M*E*6+U+E*3]=255*O[U]}e.colorTexture.releaseGraphicsResources(e._openGLRenderWindow),e.colorTexture.setMinificationFilter(Ee.LINEAR),e.colorTexture.setMagnificationFilter(Ee.LINEAR),e.colorTexture.create2DFromRaw(E,2*l,3,He.UNSIGNED_CHAR,b),e.colorTextureString=p}if(p="".concat(a.getMTime()),e.scalarTextureString!==p){var W=a.getDimensions();e.scalarTexture.setOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),e.scalarTexture.releaseGraphicsResources(e._openGLRenderWindow),e.scalarTexture.resetFormatAndType(),e.scalarTexture.create3DFilterableFromDataArray(W[0],W[1],W[2],i,e.renderable.getPreferSizeOverAccuracy()),e.scalarTextureString=p}if(!e.tris.getCABO().getElementCount()){for(var I=new Float32Array(12),G=0;G<4;G++)I[G*3]=G%2*2-1,I[G*3+1]=G>1?1:-1,I[G*3+2]=-1;var F=new Uint16Array(8);F[0]=3,F[1]=0,F[2]=1,F[3]=3,F[4]=3,F[5]=0,F[6]=3,F[7]=2;var A=de.newInstance({numberOfComponents:3,values:I});A.setName("points");var H=de.newInstance({numberOfComponents:1,values:F});e.tris.getCABO().createVBO(H,"polys",Zt.SURFACE,{points:A,cellOffset:0})}e.VBOBuildTime.modified()}}}}var jx={context:null,VBOBuildTime:null,scalarTexture:null,scalarTextureString:null,opacityTexture:null,opacityTextureString:null,colorTexture:null,colorTextureString:null,jitterTexture:null,tris:null,framebuffer:null,copyShader:null,copyVAO:null,lastXYF:1,targetXYF:1,zBufferTexture:null,lastZBufferTexture:null,lastLightComplexity:0,fullViewportTime:1,idxToView:null,idxNormalMatrix:null,modelToView:null,projectionToView:null,avgWindowArea:0,avgFrameTime:0};function zx(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,jx,n),xt.extend(t,e,n),e.VBOBuildTime={},ht(e.VBOBuildTime,{mtime:0}),e.tris=Ht.newInstance(),e.scalarTexture=Fe.newInstance(),e.opacityTexture=Fe.newInstance(),e.colorTexture=Fe.newInstance(),e.jitterTexture=Fe.newInstance(),e.jitterTexture.setWrapS(Ya.REPEAT),e.jitterTexture.setWrapT(Ya.REPEAT),e.framebuffer=Dn.newInstance(),e.idxToView=Oe(new Float64Array(16)),e.idxNormalMatrix=sr(new Float64Array(9)),e.modelToView=Oe(new Float64Array(16)),e.projectionToView=Oe(new Float64Array(16)),e.projectionToWorld=Oe(new Float64Array(16)),e._lastScale=1,dt(t,e,["context"]),Ix(t,e)}var Wx=Je(zx,"vtkOpenGLVolumeMapper");ft("vtkVolumeMapper",Wx);var Hx=an;function $x(t,e){e.classHierarchy.push("vtkOpenGLPixelSpaceCallbackMapper"),t.opaquePass=function(n,r){e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent();var a=e._openGLRenderer.getAspectRatio(),i=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,o=e._openGLRenderer.getTiledSizeAndOrigin(),s=null;if(e.renderable.getUseZValues()){var c=r.getZBufferTexture(),u=Math.floor(c.getWidth()),f=Math.floor(c.getHeight()),l=e._openGLRenderWindow.getContext();c.bind();var p=r.getFramebuffer();p?p.saveCurrentBindingsAndBuffers():Hx("No framebuffer to save/restore");var h=l.createFramebuffer();l.bindFramebuffer(l.FRAMEBUFFER,h),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,c.getHandle(),0),l.checkFramebufferStatus(l.FRAMEBUFFER)===l.FRAMEBUFFER_COMPLETE&&(s=new Uint8Array(u*f*4),l.viewport(0,0,u,f),l.readPixels(0,0,u,f,l.RGBA,l.UNSIGNED_BYTE,s)),p&&p.restorePreviousBindingsAndBuffers(),l.deleteFramebuffer(h)}e.renderable.invokeCallback(e.renderable.getInputData(),i,a,o,s)},t.queryPass=function(n,r){n&&e.renderable.getUseZValues()&&r.requestDepth()}}var Kx={};function Xx(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Kx,n),xt.extend(t,e,n),$x(t,e)}var qx=Je(Xx,"vtkOpenGLPixelSpaceCallbackMapper");ft("vtkPixelSpaceCallbackMapper",qx);var Yx=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_LIC0.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

/**
This shader initializes the convolution for the LIC computation.
*/

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;

uniform sampler2D texMaskVectors;
uniform sampler2D texNoise;
uniform sampler2D texLIC;

uniform int   uStepNo;         // in step 0 initialize lic and seeds, else just seeds
uniform int   uPassNo;         // in pass 1 hpf of pass 0 is convolved.
uniform float uMaskThreshold;  // if |V| < uMaskThreshold render transparent
uniform vec2  uNoiseBoundsPt1; // tc of upper right pt of noise texture

in vec2 tcoordVC;

// convert from vector coordinate space to noise coordinate space.
// the noise texture is tiled across the *whole* domain
vec2 VectorTCToNoiseTC(vec2 vectc)
{
  return vectc/uNoiseBoundsPt1;
}

// get the texture coordidnate to lookup noise value. this
// depends on the pass number.
vec2 getNoiseTC(vec2 vectc)
{
  // in pass 1 : convert from vector tc to noise tc
  // in pass 2 : use vector tc
  if (uPassNo == 0)
    {
    return VectorTCToNoiseTC(vectc);
    }
  else
    {
    return vectc;
    }
}

// look up noise value at the given location. The location
// is supplied in vector texture coordinates, hence the
// need to convert to noise texture coordinates.
float getNoise(vec2 vectc)
{
  return texture2D(texNoise, getNoiseTC(vectc)).r;
}

void main(void)
{
  vec2 vectc = tcoordVC.st;

  // lic => (convolution, mask, 0, step count)
  if (uStepNo == 0)
    {
    float maskCriteria = length(texture2D(texMaskVectors, vectc).xyz);
    float maskFlag;
    if (maskCriteria <= uMaskThreshold)
      {
      maskFlag = 1.0;
      }
    else
      {
      maskFlag = 0.0;
      }
    float noise = getNoise(vectc);
    LICOutput = vec4(noise, maskFlag, 0.0, 1.0);
    }
  else
    {
    LICOutput = texture2D(texLIC, vectc);
    }

  // initial seed
  SeedOutput = vec4(vectc, 0.0, 1.0);
}
`,Jx=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_fs1.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;

uniform sampler2D  texVectors;
uniform sampler2D  texNoise;
uniform sampler2D  texLIC;
uniform sampler2D  texSeedPts;

uniform int   uPassNo;          // in pass 1 hpf of pass 0 is convolved.
uniform float uStepSize;        // step size in parametric space

uniform vec2  uNoiseBoundsPt1;  // tc of upper right pt of noise texture

in vec2 tcoordVC;

//VTK::LICVectorLookup::Impl

// We need to do this manually since CLAMP_TO_BORDER and and borderColor
// are very poorly supported in webgl
vec2 clampToBorder(vec2 uv){
  if(uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0)
  {
    return vec2(0.0, 0.0);
  }
  return getVector(uv);
}

// convert from vector coordinate space to noise coordinate space.
// the noise texture is tiled across the whole domain
vec2 VectorTCToNoiseTC(vec2 vectc)
{
  return vectc/uNoiseBoundsPt1;
}

// get the texture coordidnate to lookup noise value.
// in pass 1 repeatedly tile the noise texture across
// the computational domain.
vec2 getNoiseTC(vec2 tc)
{
  if (uPassNo == 0)
    {
    return VectorTCToNoiseTC(tc);
    }
  else
    {
    return tc;
    }
}

// look up noise value at the given location. The location
// is supplied in vector texture coordinates, hence the need
// to convert to either noise or lic texture coordinates in
// pass 1 and 2 respectively.
float getNoise(vec2 vectc)
{
  return texture2D(texNoise, getNoiseTC(vectc)).r;
}

// fourth-order Runge-Kutta streamline integration
// no bounds checks are made, therefore it's essential
// to have the entire texture initialized to 0
// and set clamp to border and have border color 0
// an integer is set if the step was taken, keeping
// an accurate step count is necessary to prevent
// boundary artifacts. Don't count the step if
// all vector lookups are identically 0. This is
// a proxy for "stepped outside valid domain"
vec2 rk4(vec2 pt0, float dt, out bool count)
{
  count=true;
  float dtHalf = dt * 0.5;
  vec2 pt1;

  vec2 v0 = clampToBorder(pt0);
  pt1 = pt0 + v0 * dtHalf;

  vec2 v1 = clampToBorder(pt1);
  pt1 = pt0 + v1 * dtHalf;

  vec2 v2 = clampToBorder(pt1);
  pt1 = pt0 + v2 * dt;

  vec2 v3 = clampToBorder(pt1);
  vec2 vSum = v0 + v1 + v1 + v2 + v2 + v3;

  if (vSum == vec2(0.0, 0.0))
    {
      count = false;
    }

  pt1 = pt0 + (vSum) * (dt * (1.0/6.0));

 return pt1;
}

void main(void)
{
  vec2 lictc = tcoordVC.st;
  vec4 lic = texture2D(texLIC, lictc);
  vec2 pt0 = texture2D(texSeedPts, lictc).st;

  bool count;
  vec2 pt1 = rk4(pt0, uStepSize, count);

  if (count)
    {
    // accumulate lic step
    // (lic, mask, 0, step count)
    float noise = getNoise(pt1);
    LICOutput = vec4(lic.r + noise, lic.g, 0.0, lic.a + 1.0);
    SeedOutput = vec4(pt1, 0.0, 1.0);
    }
  else
    {
    // keep existing values
    LICOutput = lic;
    SeedOutput = vec4(pt0, 0.0, 1.0);
    }
}
`,Zx=` //VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_LICN.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;

/**
This shader finalizes the convolution for the LIC computation
applying the normalization. eg. if box kernel is used the this
is the number of steps taken.
*/

uniform sampler2D texLIC;

in vec2 tcoordVC;

void main(void)
{
  vec4 conv = texture2D(texLIC, tcoordVC.st);
  conv.r = conv.r/conv.a;
  // lic => (convolution, mask, 0, 1)
  LICOutput = vec4(conv.rg , 0.0, 1.0);
  SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);
}
`,Qx=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_CE.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// gray scale contrast enhance stage implemented via histogram stretching
// if the min and max are tweaked it can generate out-of-range values
// these will be clamped in 0 to 1

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;


uniform sampler2D texLIC;  // most recent lic pass
uniform float uMin;        // min gray scale color value
uniform float uMaxMinDiff; // max-min

in vec2 tcoordVC;

void main( void )
{
  vec4 lic = texture2D(texLIC, tcoordVC.st);
  if (lic.g!=0.0)
    {
    LICOutput = lic;
    }
  else
    {
    float CElic = clamp((lic.r - uMin)/uMaxMinDiff, 0.0, 1.0);
    LICOutput = vec4(CElic, lic.gb, 1.0);
    }
    SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);
}
`,eC=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_fs2.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// high-pass filter stage employed by vtkLineIntegralConvolution2D
// between LIC pass 1 and LIC pass 2. filtered LIC pass 1, becomes
// noise for pass2.

// the output of this shader
layout(location = 0) out vec4 EEOutput;

uniform sampler2D texLIC; // most recent lic pass
uniform float     uDx;    // fragment size
uniform float     uDy;    // fragment size

in vec2 tcoordVC;

// kernel for simple laplace edge enhancement.
// p=Laplace(p)+p
float K[9] = float[9](
  -1.0, -1.0, -1.0,
  -1.0,  9.0, -1.0,
  -1.0, -1.0, -1.0
  );

// determine if the fragment was masked
bool Masked(float val) { return val != 0.0; }

void main(void)
{
  // tex coord neighbor offsets
  vec2 fragDx[9] = vec2[9](
    vec2(-uDx, uDy), vec2(0.0, uDy), vec2(uDx, uDy),
    vec2(-uDx, 0.0), vec2(0.0, 0.0), vec2(uDx, 0.0),
    vec2(-uDx,-uDy), vec2(0.0,-uDy), vec2(uDx,-uDy)
    );

  vec2 lictc = tcoordVC.st;

  // compute the convolution but don't use convovled values if
  // any masked fragments on the stencil. Fragments outside
  // the valid domain are masked during initialization, and
  // texture wrap parameters are clamp to border with border
  // color that contains masked flag
  float conv = 0.0;
  bool dontUse = false;
  for (int i=0; i<9; ++i)
    {
    vec2 tc = lictc + fragDx[i];
    vec4 lic = texture2D(texLIC, tc);
    dontUse = dontUse || Masked(lic.g);
    conv = conv + K[i] * lic.r;
    }

  if (dontUse)
    {
    EEOutput = vec4(texture2D(texLIC, lictc).rg, 0.0, 1.0);
    }
  else
    {
    conv = clamp(conv, 0.0, 1.0);
    EEOutput = vec4(conv,texture2D(texLIC, lictc).g, 0.0, 1.0);
    }

}
`,tC=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_AAH.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// Anti-alias stage in vtkLineIntegralConvolution2D
// horizontal pass of a Gaussian convolution

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;

uniform sampler2D texLIC; // input texture
uniform float     uDx;    // fragment size

in vec2 tcoordVC;

// factored 3x3 Gaussian kernel
// K^T*K = G
float K[3] = float[3](0.141421356, 0.707106781, 0.141421356);

// determine if the fragment was masked
bool Masked(float val){ return val != 0.0; }

void main(void)
{
// neighbor offsets
vec2 fragDx[3] = vec2[3](vec2(-uDx,0.0), vec2(0.0,0.0), vec2(uDx,0.0));

  vec2 lictc = tcoordVC.st;
  vec4 lic[3];
  bool dontUse = false;
  float conv = 0.0;
  for (int i=0; i<3; ++i)
    {
    vec2 tc = lictc + fragDx[i];
    lic[i] = texture2D(texLIC, tc);
    dontUse = dontUse || Masked(lic[i].g);
    conv = conv + K[i] * lic[i].r;
    }
  // output is (conv, mask, skip, 1)
  if (dontUse)
    {
    LICOutput = vec4(lic[1].rg, 1.0, 1.0);
    }
  else
    {
    LICOutput = vec4(conv, lic[1].gb, 1.0);
    }
  SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);
}
`,rC=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_VT.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// move vector field to normalized image space
// pre-processing for vtkLineIntegralConvolution2D

// the output of this shader
//VTK::Output::Dec

// Fragment shader used by the gaussian blur filter render pass.

uniform sampler2D texVectors; // input texture
uniform vec2      uTexSize;   // size of texture

in vec2 tcoordVC;

void main(void)
{
  //VTK::LICComponentSelection::Impl
  V = V/uTexSize;
  gl_FragData[0] = vec4(V, 0.0, 1.0);
}
`,nC=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_AAV.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// Anti-alias stage in vtkLineIntegralConvolution2D
// vertical pass of a Gaussian convolution

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;

uniform sampler2D texLIC; // input texture
uniform float     uDy;    // fragment size

in vec2 tcoordVC;


// factored 3x3 Gaussian kernel
// K^T*K = G
float K[3] = float[3](0.141421356, 0.707106781, 0.141421356);

// determine if the fragment was masked
bool Masked(float val){ return val != 0.0; }

void main(void)
{
// neighbor offsets
vec2 fragDy[3] = vec2[3](vec2(0.0,-uDy), vec2(0.0,0.0), vec2(0.0,uDy));


  vec2 lictc = tcoordVC.st;
  vec4 lic[3];
  bool dontUse = false;
  float conv = 0.0;
  for (int i=0; i<3; ++i)
    {
    vec2 tc = lictc + fragDy[i];
    lic[i] = texture2D(texLIC, tc);
    dontUse = dontUse || Masked(lic[i].g);
    conv = conv + K[i] * lic[i].r;
    }
  // output is (conv, mask, skip, 1)
  if (dontUse)
    {
    LICOutput = vec4(lic[1].rg, 1.0, 1.0);
    }
  else
    {
    LICOutput = vec4(conv, lic[1].gb, 1.0);
    }
  SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);
}
`,th=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtktextureObjectVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

attribute vec4 vertexDC;
attribute vec2 tcoordDC;
varying vec2 tcoordVC;

void main()
{
  tcoordVC = tcoordDC;
  gl_Position = vertexDC;
}
`,aC=Ar.Representation;function iC(t){var e=Ht.newInstance();e.setOpenGLRenderWindow(t);for(var n=new Float32Array(12),r=0;r<4;r++)n[r*3]=r%2*2-1,n[r*3+1]=r>1?1:-1,n[r*3+2]=0;var a=new Float32Array([0,0,1,0,0,1,1,1]),i=new Uint16Array(8);i[0]=3,i[1]=0,i[2]=1,i[3]=3,i[4]=3,i[5]=0,i[6]=3,i[7]=2;var o=de.newInstance({numberOfComponents:3,values:n});o.setName("points");var s=de.newInstance({numberOfComponents:1,values:i}),c=de.newInstance({numberOfComponents:2,values:a});return e.getCABO().createVBO(s,"polys",aC.SURFACE,{points:o,cellOffset:0,tcoords:c}),e}function eu(t,e,n,r){var a=ze(e,2),i=a[0],o=a[1],s=t.getContext(),c=Fe.newInstance({autoParameters:!1,wrapS:r,wrapT:r,minificationFilter:n,magnificationFilter:n,generateMipmap:!1,openGLDataType:s.FLOAT,baseLevel:0,maxLevel:0});return c.setOpenGLRenderWindow(t),c.setInternalFormat(s.RGBA32F),c.create2DFromRaw(i,o,4,"Float32Array",null),c.activate(),c.sendParameters(),c.deactivate(),c}function Oo(t,e){return eu(t,e,Fe.Filter.NEAREST,Fe.Wrap.CLAMP_TO_EDGE)}function oC(t,e){return eu(t,e,Fe.Filter.NEAREST,Fe.Wrap.CLAMP_TO_EDGE)}function sC(t,e){return eu(t,e,Fe.Filter.LINEAR,Fe.Wrap.CLAMP_TO_EDGE)}function uC(t,e){if(e.classHierarchy.push("vtkLICPingPongBufferManager"),!e._openGLRenderWindow){console.error("Pass renderwindow to ping pong manager");return}e.quad=iC(e._openGLRenderWindow),e.context=e._openGLRenderWindow.getContext(),e.licTexture0=Oo(e._openGLRenderWindow,e.size),e.seedTexture0=Oo(e._openGLRenderWindow,e.size),e.licTexture1=Oo(e._openGLRenderWindow,e.size),e.seedTexture1=Oo(e._openGLRenderWindow,e.size),e.eeTexture=e.doEEPass?oC(e._openGLRenderWindow,e.size):null,e.imageVectorTexture=e.doVTPass?sC(e._openGLRenderWindow,e.size):null,e.pingTextures[0]=e.licTexture0,e.pingTextures[1]=e.seedTexture0,e.pongTextures[0]=e.licTexture1,e.pongTextures[1]=e.seedTexture1,e.textures[0]=e.pingTextures,e.textures[1]=e.pongTextures,t.swap=function(){e.readIndex=1-e.readIndex},t.renderQuad=function(n,r){var a=e.quad,i=e.context,o=e.quadVAO;o||(o=qa.newInstance(),o.setOpenGLRenderWindow(e._openGLRenderWindow),e.quadVAO=o),e.previousProgramHash!==r.getMd5Hash()&&(o.shaderProgramChanged(),a.getCABO().bind(),o.addAttributeArray(r,a.getCABO(),"vertexDC",a.getCABO().getVertexOffset(),a.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE),o.addAttributeArray(r,a.getCABO(),"tcoordDC",a.getCABO().getTCoordOffset(),a.getCABO().getStride(),e.context.FLOAT,2,e.context.FALSE),e.previousProgramHash=r.getMd5Hash()),i.drawArrays(i.TRIANGLES,0,a.getCABO().getElementCount()),o.release()},t.getLastLICBuffer=function(){return e.readIndex===0?e.licTexture0:e.licTexture1},t.getLastSeedBuffer=function(){return e.readIndex===0?e.seedTexture0:e.seedTexture1},t.getLICBuffer=function(){return 1-e.readIndex===0?e.licTexture0:e.licTexture1},t.getSeedBuffer=function(){return 1-e.readIndex===0?e.seedTexture0:e.seedTexture1},t.getLICTextureUnit=function(){var n=e.textures[e.readIndex][0];return n.activate(),n.getTextureUnit()},t.getSeedTextureUnit=function(){var n=e.textures[e.readIndex][1];return n.activate(),n.getTextureUnit()},t.getNoiseTextureUnit=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return n===0?(e.noiseTexture.activate(),e.noiseTexture.getTextureUnit()):(e.eeTexture.activate(),e.eeTexture.getTextureUnit())},t.getVectorTextureUnit=function(){return e.vectorTexture.activate(),e.vectorTexture.getTextureUnit()},t.getImageVectorTextureUnit=function(){return e.imageVectorTexture?(e.imageVectorTexture.activate(),e.imageVectorTexture.getTextureUnit()):t.getVectorTextureUnit()},t.getMaskVectorTextureUnit=function(){return e.maskVectorTexture?(e.maskVectorTexture.activate(),e.maskVectorTexture.getTextureUnit()):t.getImageVectorTextureUnit()},t.clearBuffers=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=e.framebuffer,a=e.context;r.removeColorBuffer(0),r.removeColorBuffer(1),r.removeColorBuffer(2),r.removeColorBuffer(3),r.setColorBuffer(e.licTexture0,0),r.setColorBuffer(e.seedTexture0,1),r.setColorBuffer(e.licTexture1,2),r.setColorBuffer(e.seedTexture1,3);var i=[a.COLOR_ATTACHMENT0,a.COLOR_ATTACHMENT1,a.COLOR_ATTACHMENT2,a.COLOR_ATTACHMENT3];n&&(r.removeColorBuffer(4),r.setColorBuffer(e.eeTexture,4),i.push(a.COLOR_ATTACHMENT4)),a.drawBuffers(i),a.clearColor(0,1,0,0),a.disable(a.SCISSOR_TEST),a.disable(a.BLEND),a.clear(a.COLOR_BUFFER_BIT),r.removeColorBuffer(0),r.removeColorBuffer(1),r.removeColorBuffer(2),r.removeColorBuffer(3),n&&r.removeColorBuffer(4),a.drawBuffers([a.NONE])},t.clearBuffer=function(n){var r=e.framebuffer,a=e.context;r.removeColorBuffer(0),r.setColorBuffer(n,0),a.drawBuffers([a.COLOR_ATTACHMENT0]),a.clearColor(0,1,0,0),a.disable(a.SCISSOR_TEST),a.disable(a.BLEND),a.clear(a.COLOR_BUFFER_BIT),r.removeColorBuffer(n,0),a.drawBuffers([a.NONE])},t.activateVectorTextures=function(){e.imageVectorTexture?e.imageVectorTexture.activate():e.vectorTexture.activate(),e.maskVectorTexture&&e.maskVectorTexture.activate()},t.deactivateVectorTextures=function(){e.imageVectorTexture?e.imageVectorTexture.deactivate():e.vectorTexture.deactivate(),e.maskVectorTexture&&e.maskVectorTexture.deactivate()},t.activateNoiseTexture=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;switch(n){case 0:e.noiseTexture.activate();break;case 1:e.eeTexture.activate();break;default:console.error("Wrong LIC pass number")}},t.deactivateNoiseTexture=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;switch(n){case 0:e.noiseTexture.deactivate();break;case 1:e.eeTexture.deactivate();break;default:console.error("Wrong LIC pass number")}},t.attachLICBuffers=function(){var n=e.textures[e.readIndex],r=e.textures[1-e.readIndex],a=e.framebuffer,i=e.context;n[0].activate(),n[1].activate(),a.removeColorBuffer(0),a.removeColorBuffer(1),a.setColorBuffer(r[0],0),a.setColorBuffer(r[1],1),i.drawBuffers([i.COLOR_ATTACHMENT0,i.COLOR_ATTACHMENT1])},t.detachLICBuffers=function(){var n=e.textures[e.readIndex],r=e.context,a=e.framebuffer;n[0].deactivate(),n[1].deactivate(),a.removeColorBuffer(0),a.removeColorBuffer(1),r.drawBuffers([r.NONE])},t.attachImageVectorBuffer=function(){var n=e.framebuffer,r=e.context;e.vectorTexture.activate(),n.removeColorBuffer(0),n.setColorBuffer(e.imageVectorTexture,0),r.drawBuffers([r.COLOR_ATTACHMENT0])},t.detachImageVectorBuffer=function(){var n=e.context,r=e.framebuffer;e.vectorTexture.deactivate(),r.removeColorBuffer(0),n.drawBuffers([n.NONE])},t.attachEEBuffer=function(){var n=e.textures[e.readIndex];n[0].activate(),e.framebuffer.removeColorBuffer(0),e.framebuffer.setColorBuffer(e.eeTexture,0);var r=e.context;r.drawBuffers([r.COLOR_ATTACHMENT0])},t.detachEEBuffer=function(){var n=e.context,r=e.framebuffer;r.removeColorBuffer(0),n.drawBuffers([n.NONE]);var a=e.textures[e.readIndex];a[0].deactivate()},t.detachBuffers=function(){var n=e.context,r=e.framebuffer;r.removeColorBuffer(0),r.removeColorBuffer(1),n.drawBuffers([n.NONE]);var a=e.textures[e.readIndex],i=e.textures[1-e.readIndex];a[0]&&a[0].deactivate(),a[1]&&a[1].deactivate(),i[0]&&i[0].deactivate(),i[1]&&i[1].deactivate(),e.eeTexture&&e.eeTexture.deactivate(),e.noiseTexture&&e.noiseTexture.deactivate()},t.getWriteIndex=function(){return 1-e.readIndex},t.detachBuffers()}var cC={vectorTexture:null,maskVectorTexture:null,noiseTexture:null,doEEPass:!1,doVTPass:!1,readIndex:0,quad:null,lastProgramHash:null,framebuffer:null,size:null,pingTextures:[],pongTextures:[],textures:[]};function rh(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,cC,n),B.obj(t,e),B.get(t,e,["readIndex"]),B.setGet(t,e,["doEEPass","doVTPass","_openGLRenderWindow","vectorTexture","maskVectorTexture","noiseTexture","framebuffer","size"]),B.moveToProtected(t,e,["openGLRenderWindow"]),uC(t,e)}var fC=B.newInstance(rh,"vtkLICPingPongBufferManager"),lC={newInstance:fC,extend:rh},_n={NONE:0,LIC:1,COLOR:2,BOTH:3},tu={UNIFORM:0,GAUSSIAN:1},pC={BLEND:0,MULTIPLY:1};function hC(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=`
    vec2 getVector( vec2 vectc )

      {

      vec2 V = texture2D( texVectors, vectc ).xy;

      // normalize if |V| not 0

      float lenV = length( V );

      if ( lenV > 1.0e-8 )

        {

        return V/lenV;

        }

      else

        {

        return vec2( 0.0, 0.0 );

        }

      }

    `,n=`
    vec2 getVector( vec2 vectc )

      {

      return texture2D( texVectors, vectc ).xy;

      }

    `;return t?e:n}function vC(t,e){e.classHierarchy.push("vtkLineIntegralConvolution2D"),t.buildAShader=function(a){return e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(th,a,"")},t.dumpTextureValues=function(a,i){var o=ze(i,2),s=o[0],c=o[1],u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.context,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e._openGLRenderWindow,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:4,p=Dn.newInstance(),h=u,v=null;return p.setOpenGLRenderWindow(f),p.saveCurrentBindingsAndBuffers(),p.create(s,c),p.populateFramebuffer(),p.setColorBuffer(a),v=new Float32Array(s*c*l),h.readPixels(0,0,s,c,l===4?h.RGBA:h.RGB,h.FLOAT,v),p.restorePreviousBindingsAndBuffers(),v},t.getTextureMinMax=function(a,i){for(var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.context,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e._openGLRenderWindow,c=t.dumpTextureValues(a,i,o,s,4),u=Number.MAX_VALUE,f=Number.MIN_VALUE,l=0;l<c.length;l+=4)if(c[l+1]===0){var p=c[l];p<u&&(u=p),p>f&&(f=p)}return{min:u,max:f}},t.getComponentSelectionProgram=function(a){var i="xyzw";return".".concat(i[a[0]]).concat(i[a[1]])},t.buildShaders=function(){e.LIC0ShaderProgram=t.buildAShader(Yx);var a=ee.substitute(rC,"//VTK::LICComponentSelection::Impl","vec2 V = texture2D(texVectors, tcoordVC.st)".concat(t.getComponentSelectionProgram(e.componentIds),";")).result;e.VTProgram=t.buildAShader(a);var i=ee.substitute(Jx,"//VTK::LICVectorLookup::Impl",hC(e.normalizeVectors),!0).result;e.LICIShaderProgram=t.buildAShader(i),e.LICNShaderProgram=t.buildAShader(Zx),e.CEProgram=t.buildAShader(Qx),e.EEProgram=t.buildAShader(eC),e.AAHProgram=t.buildAShader(tC),e.AAVProgram=t.buildAShader(nC)};function n(a,i){a.setUniformi("texLIC",i.getLICTextureUnit()),a.setUniformi("texSeedPts",i.getSeedTextureUnit())}function r(a,i,o){a.attachLICBuffers(),a.renderQuad(i,o),a.detachLICBuffers(),a.swap()}t.executeLIC=function(a,i,o,s,c,u){if(e._openGLRenderWindow=c,e.context=c.getContext(),Object.assign(e,u),a[0]<=0||a[1]<=0)return null;var f=[1/a[0],1/a[1]],l=e.stepSize*Math.sqrt(f[0]*f[0]+f[1]*f[1]);l<=0&&(l=1e-10);var p=e.context,h=e.framebuffer;if(!h||a[0]!==h.getSize()[0]||a[1]!==h.getSize()[1]){var v;h=Dn.newInstance(),h.setOpenGLRenderWindow(e._openGLRenderWindow),h.saveCurrentBindingsAndBuffers(),(v=h).create.apply(v,ve(a)),h.populateFramebuffer(),h.restorePreviousBindingsAndBuffers(),e.framebuffer=h}h.saveCurrentBindingsAndBuffers(),h.bind(),p.viewport.apply(p,[0,0].concat(ve(a))),p.scissor.apply(p,[0,0].concat(ve(a))),e.shadersNeedBuild&&(t.buildShaders(),e.shadersNeedBuild=!1),e.bufs?(e.bufs.setVectorTexture(i),e.bufs.setMaskVectorTexture(o),e.bufs.setNoiseTexture(s)):e.bufs=lC.newInstance({openGLRenderWindow:c,doEEPass:e.enhancedLIC,doVTPass:e.transformVectors,vectorTexture:i,maskVectorTexture:o,noiseTexture:s,framebuffer:h,size:a});var y=[(s.getWidth()+1)/a[0],(s.getHeight()+1)/a[1]],m=1/a[0],x=1/a[1],g=e._openGLRenderWindow.getShaderCache();if(e.transformVectors){var d=e.VTProgram;g.readyShaderProgram(d),e.bufs.attachImageVectorBuffer(),d.setUniform2f.apply(d,["uTexSize"].concat(ve(a))),d.setUniformi("texVectors",e.bufs.getVectorTextureUnit()),p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),e.bufs.renderQuad(a,d),e.bufs.detachImageVectorBuffer()}e.bufs.clearBuffers(e.enhancedLIC),e.bufs.activateVectorTextures(),e.bufs.activateNoiseTexture(0);var C=e.LIC0ShaderProgram;g.readyShaderProgram(C),C.setUniformi("uStepNo",0),C.setUniformi("uPassNo",0),C.setUniformf("uMaskThreshold",e.maskThreshold),C.setUniform2f.apply(C,["uNoiseBoundsPt1"].concat(y)),C.setUniformi("texMaskVectors",e.bufs.getMaskVectorTextureUnit()),C.setUniformi("texLIC",e.bufs.getLICTextureUnit()),C.setUniformi("texNoise",e.bufs.getNoiseTextureUnit(0)),r(e.bufs,a,C);var S=e.LICIShaderProgram;g.readyShaderProgram(S),S.setUniformi("uPassNo",0),S.setUniformf("uStepSize",-l),S.setUniform2f.apply(S,["uNoiseBoundsPt1"].concat(y)),S.setUniformi("texVectors",e.bufs.getImageVectorTextureUnit()),S.setUniformi("texNoise",e.bufs.getNoiseTextureUnit(0));for(var T=0;T<e.numberOfSteps;++T)n(S,e.bufs),r(e.bufs,a,S);g.readyShaderProgram(C),C.setUniformi("uStepNo",1),n(C,e.bufs),r(e.bufs,a,C),g.readyShaderProgram(S),S.setUniformf("uStepSize",l);for(var w=0;w<e.numberOfSteps;++w)n(S,e.bufs),r(e.bufs,a,S);e.bufs.deactivateNoiseTexture(0),e.bufs.deactivateVectorTextures();var E=e.LICNShaderProgram;if(g.readyShaderProgram(E),E.setUniformi("texLIC",e.bufs.getLICTextureUnit()),r(e.bufs,a,E),e.enhancedLIC){(e.enhanceContrast===_n.LIC||e.enhanceContrast===_n.BOTH)&&t.contrastEnhance(!1,a),e.bufs.attachEEBuffer();var D=e.EEProgram;g.readyShaderProgram(D),D.setUniformi("texLIC",e.bufs.getLICTextureUnit()),D.setUniformf("uDx",m),D.setUniformf("uDy",x),e.bufs.renderQuad(a,D),e.bufs.detachEEBuffer(),e.bufs.detachBuffers(),e.bufs.clearBuffers(!1),e.bufs.activateVectorTextures(),e.bufs.activateNoiseTexture(1),g.readyShaderProgram(C),C.setUniformi("uStepNo",0),C.setUniformi("uPassNo",1),n(C,e.bufs),C.setUniformi("texNoise",e.bufs.getNoiseTextureUnit(1)),r(e.bufs,a,C),g.readyShaderProgram(S),S.setUniformi("uPassNo",1),S.setUniformf("uStepSize",-l),S.setUniformi("texNoise",e.bufs.getNoiseTextureUnit(1));for(var b=e.numberOfSteps/2,O=0;O<b;++O)n(S,e.bufs),r(e.bufs,a,S);g.readyShaderProgram(C),C.setUniformi("uStepNo",1),n(C,e.bufs),r(e.bufs,a,C),g.readyShaderProgram(S),S.setUniformf("uStepSize",l);for(var M=0;M<b;++M)n(S,e.bufs),r(e.bufs,a,S);e.bufs.deactivateNoiseTexture(1),e.bufs.deactivateVectorTextures(),g.readyShaderProgram(E),E.setUniformi("texLIC",e.bufs.getLICTextureUnit()),E.setUniformi("texSeedPts",e.bufs.getSeedTextureUnit()),r(e.bufs,a,E)}if(e.antiAlias){var R=e.AAHProgram;g.readyShaderProgram(R),R.setUniformi("texLIC",e.bufs.getLICTextureUnit()),R.setUniformf("uDx",m);var N=e.AAVProgram;g.readyShaderProgram(N),N.setUniformi("texLIC",e.bufs.getLICTextureUnit()),N.setUniformf("uDy",x);for(var U=0;U<e.antiAlias;++U)g.readyShaderProgram(R),n(R,e.bufs),r(e.bufs,a,R),g.readyShaderProgram(N),n(N,e.bufs),r(e.bufs,a,N)}return(e.enhanceContrast===_n.LIC||e.enhanceContrast===_n.BOTH)&&t.contrastEnhance(!0,a),e.bufs.detachBuffers(),h.restorePreviousBindingsAndBuffers(),e.bufs.getLastLICBuffer()},t.contrastEnhance=function(a,i){var o=e._openGLRenderWindow.getShaderCache(),s=t.getTextureMinMax(e.bufs.getLastLICBuffer(),i,e.context,e._openGLRenderWindow),c=s.min,u=s.max;(u<=c||u>1||c<0)&&(console.error("Invalid color range: ",c,u),c=0,u=1);var f=u-c;a&&(c+=f*e.lowLICContrastEnhancementFactor,u-=f*e.highLICContrastEnhancementFactor,f=u-c);var l=e.CEProgram;o.readyShaderProgram(l),l.setUniformi("texLIC",e.bufs.getLICTextureUnit()),l.setUniformf("uMin",c),l.setUniformf("uMaxMinDiff",f),r(e.bufs,i,l)}}var gC={shadersNeedBuild:!0,stepSize:1,numberOfSteps:10,enhancedLIC:!0,enhanceContrast:!1,lowContrastEnhancementFactor:0,highContrastEnhancementFactor:0,antiAlias:0,componentIds:[0,1],normalizeVectors:!0,maskThreshold:0,transformVectors:!0,bufs:null,isComposite:!0};function nh(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,gC,n),B.obj(t,e),B.setGet(t,e,["context","_openGLRenderWindow","nuberOfSteps","stepSize","normalizeVectors","maskThreshold","enhancedLIC","enhanceContrast","lowLICContrastEnhancementFactor","highLICContrastEnhancementFactor","antiAlias","componentIds","isComposite"]),B.moveToProtected(t,e,["openGLRenderWindow"]),vC(t,e)}var dC=B.newInstance(nh,"vtkLineIntegralConvolution2D"),yC={newInstance:dC,extend:nh},mC=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkSurfaceLICMapper_fs2.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// This shader combines surface geometry, LIC, and  scalar colors.

// the output of this shader
layout(location = 0) out vec4 RGBOutput;
layout(location = 1) out vec4 HSLOutput;

uniform sampler2D texVectors;       // vectors, depth
uniform sampler2D texGeomColors;    // scalar colors + lighting
uniform sampler2D texLIC;           // image lic
uniform int       uScalarColorMode; // select between blend, and map shader
uniform float     uLICIntensity;    // blend shader: blending factor for lic'd colors
uniform float     uMapBias;         // map shader: adjust the brightness of the result
uniform float     uMaskIntensity;   // blending factor for mask color
uniform vec3      uMaskColor;       // color for the masked out fragments

in vec2 tcoordVC;

/**
Convert from RGB color space into HSL colorspace.
*/
vec3 RGBToHSL(vec3 RGB)
{
  vec3 HSL = vec3(0.0, 0.0, 0.0);

  float RGBMin = min(min(RGB.r, RGB.g), RGB.b);
  float RGBMax = max(max(RGB.r, RGB.g), RGB.b);
  float RGBMaxMinDiff = RGBMax - RGBMin;

  HSL.z = (RGBMax + RGBMin) / 2.0;

  if (RGBMaxMinDiff == 0.0)
    {
    // Gray scale
    HSL.x = 0.0;
    HSL.y = 0.0;
    }
  else
    {
    // Color
    if (HSL.z < 0.5)
      HSL.y = RGBMaxMinDiff / (RGBMax + RGBMin);
    else
      HSL.y = RGBMaxMinDiff / (2.0 - RGBMax - RGBMin);

    float dR
      = (((RGBMax - RGB.r) / 6.0) + (RGBMaxMinDiff / 2.0)) / RGBMaxMinDiff;
    float dG
      = (((RGBMax - RGB.g) / 6.0) + (RGBMaxMinDiff / 2.0)) / RGBMaxMinDiff;
    float dB
      = (((RGBMax - RGB.b) / 6.0) + (RGBMaxMinDiff / 2.0)) / RGBMaxMinDiff;

    if (RGB.r == RGBMax)
      HSL.x = dB - dG;
    else
    if (RGB.g == RGBMax)
      HSL.x = (1.0 / 3.0) + dR - dB;
    else
    if (RGB.b == RGBMax)
      HSL.x = (2.0 / 3.0) + dG - dR;

    if (HSL.x < 0.0)
      HSL.x += 1.0;

    if (HSL.x > 1.0)
      HSL.x -= 1.0;
    }

  return HSL;
}

/**
Helper for HSL to RGB conversion.
*/
float Util(float v1, float v2, float vH)
{
  if (vH < 0.0)
    vH += 1.0;

  if (vH > 1.0)
     vH -= 1.0;

  if ((6.0 * vH) < 1.0)
    return (v1 + (v2 - v1) * 6.0 * vH);

  if ((2.0 * vH) < 1.0)
    return (v2);

  if ((3.0 * vH) < 2.0)
    return (v1 + (v2 - v1) * ((2.0 / 3.0) - vH) * 6.0);

  return v1;
}

/**
Convert from HSL space into RGB space.
*/
vec3 HSLToRGB(vec3 HSL)
{
  vec3 RGB;
  if (HSL.y == 0.0)
    {
    // Gray
    RGB.r = HSL.z;
    RGB.g = HSL.z;
    RGB.b = HSL.z;
    }
  else
    {
    // Chromatic
    float v2;
    if (HSL.z < 0.5)
      v2 = HSL.z * (1.0 + HSL.y);
    else
      v2 = (HSL.z + HSL.y) - (HSL.y * HSL.z);

    float v1 = 2.0 * HSL.z - v2;

    RGB.r = Util(v1, v2, HSL.x + (1.0 / 3.0));
    RGB.g = Util(v1, v2, HSL.x);
    RGB.b = Util(v1, v2, HSL.x - (1.0 / 3.0));
    }

  return RGB.rgb;
}

void main()
{
  vec4 lic = texture2D(texLIC, tcoordVC.st);
  vec4 geomColor = texture2D(texGeomColors, tcoordVC.st);

  // depth is used to determine which fragment belong to us
  // and we can change
  float depth = texture2D(texVectors, tcoordVC.st).a;

  vec3 fragColorRGB;
  float valid;
  if (depth > 1.0e-3)
    {
    // we own it
    // shade LIC'ed geometry, or apply mask
    if (lic.g!=0.0)
      {
      // it's masked
      // apply fragment mask
      fragColorRGB = uMaskIntensity * uMaskColor + (1.0 - uMaskIntensity) * geomColor.rgb;
      valid = 0.0;
      }
    else
      {
      if (uScalarColorMode==0)
        {
        // blend with scalars
        fragColorRGB = lic.rrr * uLICIntensity + geomColor.rgb * (1.0 - uLICIntensity);
        }
      else
        {
        // multiply with scalars
        fragColorRGB = geomColor.rgb * clamp((uMapBias + lic.r), 0.0, 1.0);
        }
      if (lic.b != 0.0)
        {
        // didn't have the required guard pixels
        // don't consider it in min max estimation
        // for histpgram stretching
        valid = 0.0;
        }
      else
        {
        // ok to use in min/max estimates for histogram
        // stretching
        valid = 1.0;
        }
      }
    }
  else
    {
    // we don't own it
    // pass through scalars
    fragColorRGB = geomColor.rgb;
    valid = 0.0;
    }

  // if no further stages this texture is
  // copied to the screen
  RGBOutput = vec4(fragColorRGB, geomColor.a);

  // if further stages, move to hsl space for contrast
  // enhancement. encoding validity saves moving a texture to the cpu
  vec3 fragColorHSL = RGBToHSL(fragColorRGB);
  HSLOutput = vec4(fragColorHSL, valid);
}
`,xC=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkSurfaceLICMapper_DCpy.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// This shader copies fragments and depths to the output buffer

// the output of this shader
//VTK::Output::Dec

uniform sampler2D texDepth;     // z values from vertex shader
uniform sampler2D texRGBColors; // final rgb LIC colors

in vec2 tcoordVC;

void main()
{
  gl_FragDepth = texture2D(texDepth, tcoordVC).x;
  gl_FragData[0] = texture2D(texRGBColors, tcoordVC);

  // since we render a screen aligned quad
  // we're going to be writing fragments
  // not touched by the original geometry
  // it's critical not to modify those
  // fragments.
  if (gl_FragDepth == 1.0)
    {
    discard;
    }
}
`,CC=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkSurfaceLICMapper_CE.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// color contrast enhance stage implemented via histogram stretching
// on lightness channel. if the min and max are tweaked it can generate
// out-of-range values these will be clamped in 0 to 1

// the output of this shader
//VTK::Output::Dec

uniform sampler2D texGeomColors; // scalars + lighting
uniform sampler2D texLIC;        // image lic, mask
uniform sampler2D texHSLColors;  // hsla colors

uniform float     uLMin;         // min lightness over all fragments
uniform float     uLMaxMinDiff;  // max - min lightness over all fragments

in vec2 tcoordVC;

vec3 HSLToRGB(vec3 HSL)
{
  vec3 RGB;
  float v;
  float h = HSL.x;
  float sl = HSL.y;
  float l = HSL.z;

  v = (l <= 0.5) ? (l * (1.0 + sl)) : (l + sl - l * sl);
  if (v <= 0.0) {
    RGB = vec3(0.0,0.0,0.0);
  } else {
    float m;
    int sextant;
    float fract, vsf, mid1, mid2;

    m = l + l - v;
    h *= 6.0;
    sextant = int(h);
    fract = h - float(sextant);

    vsf = (v - m) * fract;
    mid1 = m + vsf;
    mid2 = v - vsf;
    switch (sextant) {
      case 0: RGB.r = v; RGB.g = mid1; RGB.b = m; break;
      case 1: RGB.r = mid2; RGB.g = v; RGB.b = m; break;
      case 2: RGB.r = m; RGB.g = v; RGB.b = mid1; break;
      case 3: RGB.r = m; RGB.g = mid2; RGB.b = v; break;
      case 4: RGB.r = mid1; RGB.g = m; RGB.b = v; break;
      case 5: RGB.r = v; RGB.g = m; RGB.b = mid2; break;
    }
  }
  return RGB;
}

void main()
{
  // lookup hsl color , mask
  vec4 fragColor = texture2D(texHSLColors, tcoordVC.st);

  // don't modify masked fragments (masked => lic.g==1)
  vec4 lic = texture2D(texLIC, tcoordVC.st);
  if (lic.g==0.0)
    {
    // normalize lightness channel
    fragColor.z = clamp((fragColor.z - uLMin)/uLMaxMinDiff, 0.0, 1.0);
    }

  // back into rgb space
  fragColor.rgb = HSLToRGB(fragColor.xyz);

  // add alpha
  vec4 geomColor = texture2D(texGeomColors, tcoordVC.st);
  fragColor.a = geomColor.a;

  gl_FragData[0] = fragColor;
}
`;function SC(t,e){e.classHierarchy.push("vtkSurfaceLICInterface")}var TC={enableLIC:!1,nuberOfSteps:40,stepSize:.25,transformVectors:!0,normalizeVectors:!0,maskOnSurface:!1,maskThreshold:0,maskColor:[0,0,0],maskIntensity:0,enhancedLIC:!0,enhanceContrast:_n.NONE,lowLICContrastEnhancementFactor:0,highLICContrastEnhancementFactor:0,lowColorContrastEnhancementFactor:0,highColorContrastEnhancementFactor:0,antiAlias:0,colorMode:pC.BLEND,LICIntensity:1,mapModeBias:0,noiseTextureSize:200,noiseTextureType:tu.GAUSSIAN,noiseGrainSize:8,noiseImpulseProbability:.1,noiseImpulseBackgroundValue:0,noiseGeneratorSeed:0,minNoiseValue:0,maxNoiseValue:1,numberOfNoiseLevels:2,shadersNeedBuilding:!0,reallocateTextures:!0,rebuildNoiseTexture:!1,viewPortScale:1};function ah(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,TC,n),B.obj(t,e),B.setGet(t,e,["enableLIC","numberOfSteps","stepSize","normalizeVectors","transformVectors","maskOnSurface","maskThreshold","maskColor","maskIntensity","enhancedLIC","enhanceContrast","lowLICContrastEnhancementFactor","highLICContrastEnhancementFactor","lowColorContrastEnhancementFactor","highColorContrastEnhancementFactor","antiAlias","colorMode","LICIntensity","mapModeBias","noiseTextureSize","noiseTextureType","noiseGrainSize","minNoiseValue","maxNoiseValue","numberOfNoiseLevels","noiseImpulseProbability","noiseImpulseBackgroundValue","noiseGeneratorSeed","viewPortScale","rebuildNoiseTexture"]),SC(t,e)}var wC=B.newInstance(ah,"vtkSurfaceLICInterface"),ih={newInstance:wC,extend:ah},EC=Ar.Representation;function DC(t){var e=Ht.newInstance();e.setOpenGLRenderWindow(t);for(var n=new Float32Array(12),r=0;r<4;r++)n[r*3]=r%2*2-1,n[r*3+1]=r>1?1:-1,n[r*3+2]=0;var a=new Float32Array([0,0,1,0,0,1,1,1]),i=new Uint16Array(8);i[0]=3,i[1]=0,i[2]=1,i[3]=3,i[4]=3,i[5]=0,i[6]=3,i[7]=2;var o=de.newInstance({numberOfComponents:3,values:n});o.setName("points");var s=de.newInstance({numberOfComponents:1,values:i}),c=de.newInstance({numberOfComponents:2,values:a});return e.getCABO().createVBO(s,"polys",EC.SURFACE,{points:o,cellOffset:0,tcoords:c}),e}function OC(t,e){e.classHierarchy.push("vtkOpenGLSurfaceLICInterface"),t.renderQuad=function(a,i){var o=e.licQuad,s=e.context,c=e.licQuadVAO;c||(c=qa.newInstance(),c.setOpenGLRenderWindow(e._openGLRenderWindow),e.licQuadVAO=c),e.previousProgramHash!==i.getMd5Hash()&&(c.shaderProgramChanged(),o.getCABO().bind(),c.addAttributeArray(i,o.getCABO(),"vertexDC",o.getCABO().getVertexOffset(),o.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE),c.addAttributeArray(i,o.getCABO(),"tcoordDC",o.getCABO().getTCoordOffset(),o.getCABO().getStride(),e.context.FLOAT,2,e.context.FALSE),e.previousProgramHash=i.getMd5Hash()),s.drawArrays(s.TRIANGLES,0,o.getCABO().getElementCount()),c.release()};function n(a,i,o,s,c,u){var f=2048,l=Math.max(0,Math.min(1,o)),p=Float32Array.from({length:a*a},function(){var d=0;if(l===1||Math.random()>1-l)for(var C=0;C<f;++C)d+=Math.random();return d}),h=0,v=f+1;p.forEach(function(d){l===1?v=d<v?d:v:v=d<v&&d>0?d:v,h=d>h?d:h});var y=h-v;y===0&&(v=0,h===0?y=1:y=h);var m=i-1,x=m!==0?1/m:0,g=u-c;return p.map(function(d){var C=d<v?d:(d-v)/y,S=Math.floor(C*i),T=S>m?m:S;return d>=v?i===1?u:c+T*x*g:s})}function r(a,i,o,s){var c=ze(a,2),u=c[0],f=c[1],l=s-o;return Float32Array.from({length:u*f},function(){var p=Math.random();return p=Math.floor(p*i)/i,p=p*l+o,p>1?1:p<0?0:p})}t.generateNoiseTexture=function(a){if(!e.noiseTexture||e.licInterface.getRebuildNoiseTexture()){e.licInterface.setRebuildNoiseTexture(!1),e.noiseTexture&&e.noiseTexture.releaseGraphicsResources(),Lf(e.noiseGeneratorSeed,{global:!0});var i=[],o=e.licInterface.get("noiseTextureType","noiseGrainSize","numberOfNoiseLevels","noiseImpulseProbability","noiseImpulseBackgroundValue","minNoiseValue","maxNoiseValue"),s=o.noiseTextureType,c=o.noiseGrainSize,u=o.numberOfNoiseLevels,f=o.noiseImpulseProbability,l=o.noiseImpulseBackgroundValue,p=o.minNoiseValue,h=o.maxNoiseValue;switch(s){case tu.GAUSSIAN:i=n(Math.floor(a/c),u,f,l,p,h);break;case tu.UNIFORM:default:i=r([Math.ceil(a/c),Math.ceil(a/c)],u,p,h)}var v=1/c,y=Float32Array.from({length:a*a*4},function(x,g){var d=g/4;if(g%4===0){var C=Math.floor(d%a*v),S=Math.floor(d/a*v);return i[S*(a/c)+C]}return g%4===1||g%4===3?1:0}),m=Fe.newInstance({wrapS:Fe.Wrap.REPEAT,wrapT:Fe.Wrap.REPEAT,minificationFilter:Fe.Filter.NEAREST,magnificationFilter:Fe.Filter.NEAREST,generateMipMap:!1,openGLDataType:e.context.FLOAT,baseLevel:0,maxLevel:0,autoParameters:!1});m.setOpenGLRenderWindow(e._openGLRenderWindow),m.create2DFromRaw(a,a,4,"Float32Array",y),m.activate(),m.sendParameters(),m.deactivate(),e.noiseTexture=m}},t.buildAShader=function(a){return e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(th,a,"")},t.allocateTextures=function(){var a=Fe.Filter.NEAREST,i=Fe.Filter.LINEAR,o=e._openGLRenderWindow;e.geometryImage||(e.geometryImage=t.allocateTexture(o,a)),e.vectorImage||(e.vectorImage=t.allocateTexture(o,i)),e.maskVectorImage||(e.maskVectorImage=t.allocateTexture(o,i)),e.LICImage||(e.LICImage=t.allocateTexture(o,a)),e.RGBColorImage||(e.RGBColorImage=t.allocateTexture(o,a)),e.HSLColorImage||(e.HSLColorImage=t.allocateTexture(o,a)),e.depthTexture||(e.depthTexture=t.allocateDepthTexture(o))},t.allocateTexture=function(a,i){var o=e.context,s=Fe.newInstance({wrapS:Fe.Wrap.CLAMP_TO_EDGE,wrapT:Fe.Wrap.CLAMP_TO_EDGE,minificationFilter:i,magnificationFilter:i,generateMipmap:!1,openGLDataType:o.FLOAT,baseLevel:0,maxLevel:0,autoParameters:!1});return s.setOpenGLRenderWindow(a),s.setInternalFormat(o.RGBA32F),s.create2DFromRaw.apply(s,ve(e.size).concat([4,"Float32Array",null])),s.activate(),s.sendParameters(),s.deactivate(),s},t.allocateDepthTexture=function(a){var i=e.context,o=Fe.newInstance({generateMipmap:!1,openGLDataType:i.FLOAT,autoParameters:!1});return o.setOpenGLRenderWindow(a),o.createDepthFromRaw.apply(o,ve(e.size).concat(["Float32Array",null])),o.activate(),o.sendParameters(),o.deactivate(),o},t.createFBO=function(){if(!e.framebuffer){e.licHelper=null;var a=Dn.newInstance();a.setOpenGLRenderWindow(e._openGLRenderWindow),a.saveCurrentBindingsAndBuffers(),a.create.apply(a,ve(e.size)),a.populateFramebuffer(),e.framebuffer=a,a.restorePreviousBindingsAndBuffers()}},t.completedGeometry=function(){var a=e.context,i=e.framebuffer;i.removeColorBuffer(0),i.removeColorBuffer(1),i.removeColorBuffer(2),i.removeDepthBuffer(),a.drawBuffers([a.NONE]),i.restorePreviousBindingsAndBuffers()},t.buildAllShaders=function(){e.shadersNeedBuilding&&(e.licColorPass=t.buildAShader(mC),e.licCopyPass=t.buildAShader(xC),e.enhanceContrastPass=t.buildAShader(CC),e.shadersNeedBuilding=!1)},t.initializeResources=function(){t.createFBO(),t.generateNoiseTexture(e.licInterface.getNoiseTextureSize()),t.allocateTextures(),t.buildAllShaders(),e.licQuad||(e.licQuad=DC(e._openGLRenderWindow)),e.licHelper||(e.licHelper=yC.newInstance())},t.prepareForGeometry=function(){var a=e.framebuffer;a.saveCurrentBindingsAndBuffers(),a.bind(),e.geometryImage.activate(),e.vectorImage.activate(),e.maskVectorImage.activate(),a.removeColorBuffer(0),a.removeColorBuffer(2),a.removeColorBuffer(3),a.setColorBuffer(e.geometryImage,0),a.setColorBuffer(e.vectorImage,2),a.setColorBuffer(e.maskVectorImage,3),a.setDepthBuffer(e.depthTexture);var i=e.context;i.drawBuffers([i.COLOR_ATTACHMENT0,i.NONE,i.COLOR_ATTACHMENT2,i.COLOR_ATTACHMENT3]),i.viewport.apply(i,[0,0].concat(ve(e.size))),i.scissor.apply(i,[0,0].concat(ve(e.size))),i.disable(i.BLEND),i.disable(i.DEPTH_TEST),i.disable(i.SCISSOR_TEST),i.clearColor(0,0,0,0),i.clear(i.DEPTH_BUFFER_BIT|i.COLOR_BUFFER_BIT)},t.copyToScreen=function(a){e.RGBColorImage.activate(),e.depthTexture.activate(),e.licCopyPass||t.initializeResources();var i=e.licCopyPass;e._openGLRenderWindow.getShaderCache().readyShaderProgram(i);var o=e.context;o.viewport.apply(o,[0,0].concat(ve(a))),o.scissor.apply(o,[0,0].concat(ve(a))),o.disable(o.BLEND),o.enable(o.DEPTH_TEST),o.disable(o.SCISSOR_TEST),i.setUniformi("texDepth",e.depthTexture.getTextureUnit()),i.setUniformi("texRGBColors",e.RGBColorImage.getTextureUnit()),t.renderQuad(a,i),e.RGBColorImage.deactivate(),e.depthTexture.deactivate()},t.combineColorsAndLIC=function(){var a=e.context,i=e.framebuffer;i.saveCurrentBindingsAndBuffers(),i.bind(),i.create.apply(i,ve(e.size)),i.removeColorBuffer(0),i.removeColorBuffer(1),i.setColorBuffer(e.RGBColorImage,0),i.setColorBuffer(e.HSLColorImage,1),a.drawBuffers([a.COLOR_ATTACHMENT0,a.COLOR_ATTACHMENT1]),a.disable(a.DEPTH_TEST),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT),e.vectorImage.activate(),e.geometryImage.activate(),e.LICImage.activate(),e.licColorPass||t.initializeResources();var o=e.licColorPass;e._openGLRenderWindow.getShaderCache().readyShaderProgram(o),o.setUniformi("texVectors",e.vectorImage.getTextureUnit()),o.setUniformi("texGeomColors",e.geometryImage.getTextureUnit());var s=e.licInterface.get("colorMode","LICIntensity","mapModeBias","maskIntensity","maskColor","enhanceContrast","lowColorContrastEnhancementFactor","highColorContrastEnhancementFactor"),c=s.colorMode,u=s.LICIntensity,f=s.mapModeBias,l=s.maskIntensity,p=s.maskColor,h=s.enhanceContrast,v=s.lowColorContrastEnhancementFactor,y=s.highColorContrastEnhancementFactor;if(o.setUniformi("texLIC",e.LICImage.getTextureUnit()),o.setUniformi("uScalarColorMode",c),o.setUniformf("uLICIntensity",u),o.setUniformf("uMapBias",f),o.setUniformf("uMaskIntensity",l),o.setUniform3f.apply(o,["uMaskColor"].concat(ve(p))),t.renderQuad(e.size,o),e.vectorImage.deactivate(),e.geometryImage.deactivate(),e.LICImage.deactivate(),i.removeColorBuffer(0),i.removeColorBuffer(1),a.drawBuffers([a.NONE]),h===_n.COLOR||h===_n.BOTH){var m=0,x=1,g=x-m;m+=g*v,x-=g*y,g=x-m,i.setColorBuffer(e.RGBColorImage),a.drawBuffers([a.COLOR_ATTACHMENT0]),e.geometryImage.activate(),e.HSLColorImage.activate(),e.LICImage.activate(),e.enhanceContrastPass||t.initializeResources();var d=e.enhanceContrastPass;e._openGLRenderWindow.getShaderCache().readyShaderProgram(d),d.setUniformi("texGeomColors",e.geometryImage.getTextureUnit()),d.setUniformi("texHSLColors",e.HSLColorImage.getTextureUnit()),d.setUniformi("texLIC",e.LICImage.getTextureUnit()),d.setUniformf("uLMin",m),d.setUniformf("uLMaxMinDiff",g),t.renderQuad(e.size,d),e.geometryImage.deactivate(),e.HSLColorImage.deactivate(),e.LICImage.deactivate(),i.removeColorBuffer(0),a.drawBuffers([a.NONE])}i.restorePreviousBindingsAndBuffers()},t.applyLIC=function(){var a=e.licInterface.get("stepSize","numberOfSteps","enhancedLIC","enhanceContrast","lowLICContrastEnhancementFactor","highLICContrastEnhancementFactor","antiAlias","normalizeVectors","maskThreshold","transformVectors"),i=e.licHelper.executeLIC(e.size,e.vectorImage,e.maskVectorImage,e.noiseTexture,e._openGLRenderWindow,a);if(!i){console.error("Failed to compute image LIC"),e.LICImage=null;return}e.LICImage=i},t.setSize=function(a){Array.isArray(a)&&a.length===2&&(!e.size||e.size[0]!==a[0]||e.size[1]!==a[1])&&(e.size=a,t.releaseGraphicsResources())},t.releaseGraphicsResources=function(){e.geometryImage&&(e.geometryImage.releaseGraphicsResources(),e.geometryImage=null),e.vectorImage&&(e.vectorImage.releaseGraphicsResources(),e.vectorImage=null),e.maskVectorImage&&(e.maskVectorImage.releaseGraphicsResources(),e.maskVectorImage=null),e.LICImage&&(e.LICImage.releaseGraphicsResources(),e.LICImage=null),e.RGBColorImage&&(e.RGBColorImage.releaseGraphicsResources(),e.RGBColorImage=null),e.HSLColorImage&&(e.HSLColorImage.releaseGraphicsResources(),e.HSLColorImage=null),e.depthTexture&&(e.depthTexture.releaseGraphicsResources(),e.depthTexture=null),e.framebuffer&&(e.framebuffer.releaseGraphicsResources(),e.framebuffer=null)}}var _C={context:null,shadersNeedBuilding:!0,reallocateTextures:!0,size:null,licInterface:null};function oh(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_C,n),ih.extend(t,e,n),B.obj(t,e),B.setGet(t,e,["context","_openGLRenderWindow","reallocateTextures","licInterface","size"]),B.moveToProtected(t,e,["openGLRenderWindow"]),OC(t,e)}var bC=B.newInstance(oh,"vtkSurfaceLICInterface"),MC={newInstance:bC,extend:oh};function sh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function NC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sh(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sh(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var _o=Me;function RC(t,e){e.classHierarchy.push("vtkOpenGLSurfaceLICMapper");var n=NC({},t);t.getNeedToRebuildShaders=function(r,a,i){return e.rebuildLICShaders||n.getNeedToRebuildShaders(r,a,i)},t.replaceShaderValues=function(r,a,i){var o=e.lastBoundBO.getReferenceByName("lastLightComplexity"),s=r.Vertex,c=r.Fragment,u=e.renderable.getInputArrayToProcess(0);if(u&&e.canDrawLIC){c=ee.substitute(c,"//VTK::Output::Dec",["//VTK::Output::Dec","layout(location = 2) out vec4 vectorTexture;","layout(location = 3) out vec4 maskVectorTexture;"]).result;var f=u.getName(),l="".concat(f,"MC");o===0&&e.lastBoundBO.set({lastLightComplexity:1},!0),s=ee.substitute(s,"//VTK::TCoord::Dec",["attribute vec3 ".concat(l,";"),"out vec3 licOutput;","//VTK::TCoord::Dec"]).result,s=ee.substitute(s,"//VTK::TCoord::Impl",["licOutput = ".concat(l,";"),"//VTK::TCoord::Impl"]).result,c=ee.substitute(c,"//VTK::TCoord::Dec",["uniform int uMaskOnSurface;","uniform mat3 normalMatrix;","in vec3 licOutput;","//VTK::TCoord::Dec"]).result,c=ee.substitute(c,"//VTK::TCoord::Impl",["// projected vectors","  vec3 tcoordLIC = normalMatrix * licOutput;","  vec3 normN = normalize(normalVCVSOutput);","  float k = dot(tcoordLIC, normN);","  vec3 projected = (tcoordLIC - k*normN);","  vectorTexture = vec4(projected.x, projected.y, 0.0 , 1.0);","// vectors for fragment masking","  if (uMaskOnSurface == 0)","    {","    maskVectorTexture = vec4(licOutput, 1.0);","    }","  else","    {","    maskVectorTexture = vec4(projected.x, projected.y, 0.0 , 1.0);","    }","//VTK::TCoord::Impl"],!1).result,r.Vertex=s}e.rebuildLICShaders=!1,r.Fragment=c,n.replaceShaderValues(r,a,i),o>0&&e.lastBoundBO.set({lastLightComplexity:o},!0)},t.setMapperShaderParameters=function(r,a,i){n.setMapperShaderParameters(r,a,i),e.canDrawLIC&&r.getProgram().setUniformi("uMaskOnSurface",e.maskOnSurface)},t.getNeedToRebuildBufferObjects=function(r,a){return e.rebuildLICBuffers||n.getNeedToRebuildBufferObjects(r,a)},t.buildBufferObjects=function(r,a){if(e.canDrawLIC){var i=e.renderable.getInputArrayToProcess(0);i&&i.getNumberOfComponents()>1&&e.renderable.setCustomShaderAttributes([i.getName()])}e.rebuildLICBuffers=!1,n.buildBufferObjects(r,a)},t.pushState=function(r){var a;e.stateCache=(a={},Ce(a,r.BLEND,r.isEnabled(r.BLEND)),Ce(a,r.DEPTH_TEST,r.isEnabled(r.DEPTH_TEST)),Ce(a,r.SCISSOR_TEST,r.isEnabled(r.SCISSOR_TEST)),Ce(a,r.CULL_FACE,r.isEnabled(r.CULL_FACE)),a)},t.popState=function(r){var a=function(o){return e.stateCache[o]?r.enable(o):r.disable(o)};a(r.BLEND),a(r.DEPTH_TEST),a(r.SCISSOR_TEST),a(r.CULL_FACE)},t.renderPiece=function(r,a){var i=!0,o=e._openGLRenderWindow.getWebgl2();o||(_o("SurfaceLICMapper Requires WebGL 2"),i=!1),(!e.context.getExtension("EXT_color_buffer_float")||!e.context.getExtension("OES_texture_float_linear"))&&(_o("SurfaceLICMapper requires the EXT_color_buffer_float and OES_texture_float_linear WebGL2 extensions."),i=!1),e.currentInput=e.renderable.getInputData(),e.currentInput||(_o("No input"),i=!1);var s=e.renderable.getLicInterface();s||(s=ih.newInstance(),e.renderable.setLicInterface(s)),e.openGLLicInterface||(e.openGLLicInterface=MC.newInstance()),s!==e.openGLLicInterface.getLicInterface()&&e.openGLLicInterface.setLicInterface(s);var c=e.renderable.getInputArrayToProcess(0);if(s.getEnableLIC()&&(!c||c.getNumberOfComponents()<2)&&(_o("No vector input array"),i=!1),s.getEnableLIC()||(i=!1),e.canDrawLIC!==i&&(e.rebuildLICShaders=!0,e.rebuildLICBuffers=!0),e.canDrawLIC=i,!i||!s.getEnableLIC()){n.renderPiece(r,a);return}var u=e.context,f=a.getProperty().getBackfaceCulling(),l=a.getProperty().getFrontfaceCulling();!f&&!l?e._openGLRenderWindow.disableCullFace():l?(e._openGLRenderWindow.enableCullFace(),u.cullFace(u.FRONT)):(e._openGLRenderWindow.enableCullFace(),u.cullFace(u.BACK));var p=e._openGLRenderWindow.getSize(),h=p.map(function(v){return Math.round(v*s.getViewPortScale())});e.openGLLicInterface.setSize(h),e.openGLLicInterface.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLLicInterface.setContext(e.context),t.pushState(e.context),e.openGLLicInterface.initializeResources(),e.openGLLicInterface.prepareForGeometry(),t.popState(e.context),n.renderPieceStart(r,a),n.renderPieceDraw(r,a),n.renderPieceFinish(r,a),t.pushState(e.context),e.VBOBuildTime.modified(),e.openGLLicInterface.completedGeometry(),e.context.disable(e.context.CULL_FACE),e.openGLLicInterface.applyLIC(),e.openGLLicInterface.combineColorsAndLIC(),e.openGLLicInterface.copyToScreen(p),t.popState(e.context)}}var LC={canDrawLIC:!1,rebuildLICShaders:!1,rebuildLICBuffers:!1,openGLLicInterface:null};function kC(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,LC,n),Co.extend(t,e,n),RC(t,e),dt(t,e,["openGLLicInterface"])}var FC=Je(kC,"vtkOpenGLSurfaceLICMapper");ft("vtkSurfaceLICMapper",FC);var AC=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkSphereMapperVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// this shader implements imposters in OpenGL for Spheres

attribute vec4 vertexMC;
attribute vec2 offsetMC;

// optional normal declaration
//VTK::Normal::Dec

//VTK::Picking::Dec

// Texture coordinates
//VTK::TCoord::Dec

uniform mat3 normalMatrix; // transform model coordinate directions to view coordinates

// material property values
//VTK::Color::Dec

// clipping plane vars
//VTK::Clip::Dec

// camera and actor matrix values
//VTK::Camera::Dec

varying vec4 vertexVCVSOutput;
varying float radiusVCVSOutput;
varying vec3 centerVCVSOutput;

uniform int cameraParallel;
uniform float scaleFactor;

void main()
{
  //VTK::Picking::Impl

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Clip::Impl

  // compute the projected vertex position
  vec2 scaledOffsetMC = scaleFactor * offsetMC;
  vertexVCVSOutput = MCVCMatrix * vertexMC;
  centerVCVSOutput = vertexVCVSOutput.xyz;
  radiusVCVSOutput = length(scaledOffsetMC)*0.5;

  // make the triangle face the camera
  if (cameraParallel == 0)
    {
    vec3 dir = normalize(-vertexVCVSOutput.xyz);
    vec3 base2 = normalize(cross(dir,vec3(1.0,0.0,0.0)));
    vec3 base1 = cross(base2,dir);
    vertexVCVSOutput.xyz = vertexVCVSOutput.xyz + scaledOffsetMC.x*base1 + scaledOffsetMC.y*base2;
    }
  else
    {
    // add in the offset
    vertexVCVSOutput.xy = vertexVCVSOutput.xy + scaledOffsetMC;
    }

  gl_Position = VCPCMatrix * vertexVCVSOutput;
}
`;function uh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function VC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uh(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uh(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var BC=Me;function UC(t,e){e.classHierarchy.push("vtkOpenGLSphereMapper");var n=VC({},t);t.getShaderTemplate=function(r,a,i){r.Vertex=AC,r.Fragment=Ja,r.Geometry=""},t.replaceShaderValues=function(r,a,i){var o=r.Vertex,s=r.Fragment;o=ee.substitute(o,"//VTK::Camera::Dec",[`uniform mat4 VCPCMatrix;
`,"uniform mat4 MCVCMatrix;"]).result,s=ee.substitute(s,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,s=ee.substitute(s,"//VTK::PositionVC::Impl",[`vec4 vertexVC = vertexVCVSOutput;
`]).result;var c=[`uniform float invertedDepth;
`,`uniform int cameraParallel;
`,`varying float radiusVCVSOutput;
`,`varying vec3 centerVCVSOutput;
`,`uniform mat4 VCPCMatrix;
`];s=ee.substitute(s,"//VTK::Normal::Dec",c).result;var u="";e.context.getExtension("EXT_frag_depth")&&(u=`gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;
`),e._openGLRenderWindow.getWebgl2()&&(u=`gl_FragDepth = (pos.z / pos.w + 1.0) / 2.0;
`),s=ee.substitute(s,"//VTK::Depth::Impl",[`  vec3 EyePos;
`,`  vec3 EyeDir;
`,`  if (cameraParallel != 0) {
`,`    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);
`,`    EyeDir = vec3(0.0,0.0,-1.0); }
`,`  else {
`,`    EyeDir = vertexVC.xyz;
`,`    EyePos = vec3(0.0,0.0,0.0);
`,`    float lengthED = length(EyeDir);
`,`    EyeDir = normalize(EyeDir);
`,`    if (lengthED > radiusVCVSOutput*3.0) {
`,`      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }
`,`    }
`,`  EyePos = EyePos - centerVCVSOutput;
`,`  EyePos = EyePos/radiusVCVSOutput;
`,`  float b = 2.0*dot(EyePos,EyeDir);
`,`  float c = dot(EyePos,EyePos) - 1.0;
`,`  float d = b*b - 4.0*c;
`,`  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);
`,`  if (d < 0.0) { discard; }
`,`  else {
`,`    float t = (-b - invertedDepth*sqrt(d))*0.5;
`,`    normalVCVSOutput = invertedDepth*normalize(EyePos + t*EyeDir);
`,`    vertexVC.xyz = normalVCVSOutput*radiusVCVSOutput + centerVCVSOutput;
`,`    }
`,`  vec4 pos = VCPCMatrix * vertexVC;
`,u]).result,s=ee.substitute(s,"//VTK::Normal::Impl","").result,e.haveSeenDepthRequest&&(s=ee.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),r.Vertex=o,r.Fragment=s,n.replaceShaderValues(r,a,i)},t.setMapperShaderParameters=function(r,a,i){if(r.getCABO().getElementCount()&&(e.VBOBuildTime>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())&&r.getProgram().isAttributeUsed("offsetMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"offsetMC",12,r.getCABO().getStride(),e.context.FLOAT,2,!1)||BC("Error setting 'offsetMC' in shader VAO.")),r.getProgram().isUniformUsed("invertedDepth")&&r.getProgram().setUniformf("invertedDepth",e.invert?-1:1),r.getProgram().isUniformUsed("scaleFactor")){var o=e.currentInput,s=o.getPointData();e.renderable.getScaleArray()!=null&&s.hasArray(e.renderable.getScaleArray())?r.getProgram().setUniformf("scaleFactor",e.renderable.getScaleFactor()):r.getProgram().setUniformf("scaleFactor",1)}n.setMapperShaderParameters(r,a,i)},t.setCameraShaderParameters=function(r,a,i){var o=r.getProgram(),s=a.getActiveCamera(),c=e.openGLCamera.getKeyMatrices(a);if(o.isUniformUsed("VCPCMatrix")&&o.setUniformMatrix("VCPCMatrix",c.vcpc),o.isUniformUsed("MCVCMatrix"))if(i.getIsIdentity())o.setUniformMatrix("MCVCMatrix",c.wcvc);else{var u=e.openGLActor.getKeyMatrices(),f=new Float64Array(16);Ke(f,c.wcvc,u.mcwc),o.setUniformMatrix("MCVCMatrix",f)}o.isUniformUsed("cameraParallel")&&r.getProgram().setUniformi("cameraParallel",s.getParallelProjection())},t.getOpenGLMode=function(r,a){return e.context.TRIANGLES},t.buildBufferObjects=function(r,a){var i=e.currentInput;if(i!==null){e.renderable.mapScalars(i,1);var o=e.renderable.getColorMapColors(),s=e.primitives[e.primTypes.Tris].getCABO(),c=i.getPointData(),u=i.getPoints(),f=u.getNumberOfPoints(),l=u.getData(),p=5,h=null;e.renderable.getScaleArray()!=null&&c.hasArray(e.renderable.getScaleArray())&&(h=c.getArray(e.renderable.getScaleArray()).getData());var v=null,y=0,m=null;o?(y=o.getNumberOfComponents(),s.setColorOffset(0),s.setColorBOStride(4),v=o.getData(),m=new Uint8Array(3*f*4),s.getColorBO()||s.setColorBO(wr.newInstance()),s.getColorBO().setOpenGLRenderWindow(e._openGLRenderWindow)):s.getColorBO()&&s.setColorBO(null),s.setColorComponents(y);var x=new Float32Array(p*f*3);s.setStride(p*4);for(var g=Math.cos(et(30)),d=0,C=0,S=0,T=0,w=0;w<f;++w){var E=e.renderable.getRadius();h&&(E=h[w]),d=w*3,x[S++]=l[d++],x[S++]=l[d++],x[S++]=l[d++],x[S++]=-2*E*g,x[S++]=-E,v&&(C=w*y,m[T++]=v[C],m[T++]=v[C+1],m[T++]=v[C+2],m[T++]=v[C+3]),d=w*3,x[S++]=l[d++],x[S++]=l[d++],x[S++]=l[d++],x[S++]=2*E*g,x[S++]=-E,v&&(m[T++]=v[C],m[T++]=v[C+1],m[T++]=v[C+2],m[T++]=v[C+3]),d=w*3,x[S++]=l[d++],x[S++]=l[d++],x[S++]=l[d++],x[S++]=0,x[S++]=2*E,v&&(m[T++]=v[C],m[T++]=v[C+1],m[T++]=v[C+2],m[T++]=v[C+3])}s.setElementCount(S/p),s.upload(x,Tr.ARRAY_BUFFER),o&&s.getColorBO().upload(m,Tr.ARRAY_BUFFER),e.VBOBuildTime.modified()}}}var GC={};function PC(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,GC,n),Co.extend(t,e,n),UC(t,e)}var IC=Je(PC,"vtkOpenGLSphereMapper");ft("vtkSphereMapper",IC);var jC=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkStickMapperVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// this shader implements imposters in OpenGL for Sticks

attribute vec4 vertexMC;
attribute vec3 orientMC;
attribute vec4 offsetMC;
attribute float radiusMC;

// optional normal declaration
//VTK::Normal::Dec

//VTK::Picking::Dec

// Texture coordinates
//VTK::TCoord::Dec

uniform mat3 normalMatrix; // transform model coordinate directions to view coordinates

// material property values
//VTK::Color::Dec

// clipping plane vars
//VTK::Clip::Dec

// camera and actor matrix values
//VTK::Camera::Dec

varying vec4 vertexVCVSOutput;
varying float radiusVCVSOutput;
varying float lengthVCVSOutput;
varying vec3 centerVCVSOutput;
varying vec3 orientVCVSOutput;

uniform int cameraParallel;

void main()
{
  //VTK::Picking::Impl

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Clip::Impl

  vertexVCVSOutput = MCVCMatrix * vertexMC;
  centerVCVSOutput = vertexVCVSOutput.xyz;
  radiusVCVSOutput = radiusMC;
  lengthVCVSOutput = length(orientMC);
  orientVCVSOutput = normalMatrix * normalize(orientMC);

  // make sure it is pointing out of the screen
  if (orientVCVSOutput.z < 0.0)
    {
    orientVCVSOutput = -orientVCVSOutput;
    }

  // make the basis
  vec3 xbase;
  vec3 ybase;
  vec3 dir = vec3(0.0,0.0,1.0);
  if (cameraParallel == 0)
    {
    dir = normalize(-vertexVCVSOutput.xyz);
    }
  if (abs(dot(dir,orientVCVSOutput)) == 1.0)
    {
    xbase = normalize(cross(vec3(0.0,1.0,0.0),orientVCVSOutput));
    ybase = cross(xbase,orientVCVSOutput);
    }
  else
    {
    xbase = normalize(cross(orientVCVSOutput,dir));
    ybase = cross(orientVCVSOutput,xbase);
    }

  vec3 offsets = offsetMC.xyz*2.0-1.0;
  vertexVCVSOutput.xyz = vertexVCVSOutput.xyz +
    radiusVCVSOutput*offsets.x*xbase +
    radiusVCVSOutput*offsets.y*ybase +
    0.5*lengthVCVSOutput*offsets.z*orientVCVSOutput;

  gl_Position = VCPCMatrix * vertexVCVSOutput;
}
`;function ch(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function zC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ch(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ch(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var bo=Me;function WC(t,e){e.classHierarchy.push("vtkOpenGLStickMapper");var n=zC({},t);t.getShaderTemplate=function(r,a,i){r.Vertex=jC,r.Fragment=Ja,r.Geometry=""},t.replaceShaderValues=function(r,a,i){var o=r.Vertex,s=r.Fragment;o=ee.substitute(o,"//VTK::Camera::Dec",[`uniform mat4 VCPCMatrix;
`,"uniform mat4 MCVCMatrix;"]).result,s=ee.substitute(s,"//VTK::PositionVC::Dec","varying vec4 vertexVCVSOutput;").result,s=ee.substitute(s,"//VTK::PositionVC::Impl",`  vec4 vertexVC = vertexVCVSOutput;
`).result;var c=[`uniform int cameraParallel;
`,`varying float radiusVCVSOutput;
`,`varying vec3 orientVCVSOutput;
`,`varying float lengthVCVSOutput;
`,`varying vec3 centerVCVSOutput;
`,`uniform mat4 VCPCMatrix;
`];s=ee.substitute(s,"//VTK::Normal::Dec",c).result;var u="";e.context.getExtension("EXT_frag_depth")&&(u=`  gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;
`),e._openGLRenderWindow.getWebgl2()&&(u=`gl_FragDepth = (pos.z / pos.w + 1.0) / 2.0;
`),s=ee.substitute(s,"//VTK::Depth::Impl",[`  vec3 EyePos;
`,`  vec3 EyeDir;
`,`  if (cameraParallel != 0) {
`,`    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);
`,`    EyeDir = vec3(0.0,0.0,-1.0); }
`,`  else {
`,`    EyeDir = vertexVC.xyz;
`,`    EyePos = vec3(0.0,0.0,0.0);
`,`    float lengthED = length(EyeDir);
`,`    EyeDir = normalize(EyeDir);
`,`    if (lengthED > radiusVCVSOutput*3.0) {
`,`      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }
`,`    }
`,`  EyePos = EyePos - centerVCVSOutput;
`,`  vec3 base1;
`,`  if (abs(orientVCVSOutput.z) < 0.99) {
`,`    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,0.0,1.0))); }
`,`  else {
`,`    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,1.0,0.0))); }
`,`  vec3 base2 = cross(orientVCVSOutput,base1);
`,`  EyePos = vec3(dot(EyePos,base1),dot(EyePos,base2),dot(EyePos,orientVCVSOutput));
`,`  EyeDir = vec3(dot(EyeDir,base1),dot(EyeDir,base2),dot(EyeDir,orientVCVSOutput));
`,`  EyePos = EyePos/radiusVCVSOutput;
`,`  float a = EyeDir.x*EyeDir.x + EyeDir.y*EyeDir.y;
`,`  float b = 2.0*(EyePos.x*EyeDir.x + EyePos.y*EyeDir.y);
`,`  float c = EyePos.x*EyePos.x + EyePos.y*EyePos.y - 1.0;
`,`  float d = b*b - 4.0*a*c;
`,`  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);
`,`  if (d < 0.0) { discard; }
`,`  else {
`,`    float t =  (-b - sqrt(d))/(2.0*a);
`,`    float tz = EyePos.z + t*EyeDir.z;
`,`    vec3 iPoint = EyePos + t*EyeDir;
`,`    if (abs(iPoint.z)*radiusVCVSOutput > lengthVCVSOutput*0.5) {
`,`      float t2 = (-b + sqrt(d))/(2.0*a);
`,`      float tz2 = EyePos.z + t2*EyeDir.z;
`,`      if (tz2*radiusVCVSOutput > lengthVCVSOutput*0.5 || tz*radiusVCVSOutput < -0.5*lengthVCVSOutput) { discard; }
`,`      else {
`,`        normalVCVSOutput = orientVCVSOutput;
`,`        float t3 = (lengthVCVSOutput*0.5/radiusVCVSOutput - EyePos.z)/EyeDir.z;
`,`        iPoint = EyePos + t3*EyeDir;
`,`        vertexVC.xyz = radiusVCVSOutput*(iPoint.x*base1 + iPoint.y*base2 + iPoint.z*orientVCVSOutput) + centerVCVSOutput;
`,`        }
`,`      }
`,`    else {
`,`      normalVCVSOutput = iPoint.x*base1 + iPoint.y*base2;
`,`      vertexVC.xyz = radiusVCVSOutput*(normalVCVSOutput + iPoint.z*orientVCVSOutput) + centerVCVSOutput;
`,`      }
`,`    }
`,`  vec4 pos = VCPCMatrix * vertexVC;
`,u]).result,s=ee.substitute(s,"//VTK::Normal::Impl","").result,e.haveSeenDepthRequest&&(s=ee.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),r.Vertex=o,r.Fragment=s,n.replaceShaderValues(r,a,i)},t.setMapperShaderParameters=function(r,a,i){r.getCABO().getElementCount()&&(e.VBOBuildTime>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())&&(r.getProgram().isAttributeUsed("orientMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"orientMC",12,r.getCABO().getStride(),e.context.FLOAT,3,!1)||bo("Error setting 'orientMC' in shader VAO.")),r.getProgram().isAttributeUsed("offsetMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO().getColorBO(),"offsetMC",0,r.getCABO().getColorBOStride(),e.context.UNSIGNED_BYTE,3,!0)||bo("Error setting 'offsetMC' in shader VAO.")),r.getProgram().isAttributeUsed("radiusMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"radiusMC",24,r.getCABO().getStride(),e.context.FLOAT,1,!1)||bo("Error setting 'radiusMC' in shader VAO."))),n.setMapperShaderParameters(r,a,i)},t.setCameraShaderParameters=function(r,a,i){var o=r.getProgram(),s=a.getActiveCamera(),c=e.openGLCamera.getKeyMatrices(a);if(o.isUniformUsed("VCPCMatrix")&&o.setUniformMatrix("VCPCMatrix",c.vcpc),i.getIsIdentity())o.isUniformUsed("MCVCMatrix")&&o.setUniformMatrix("MCVCMatrix",c.wcvc),o.isUniformUsed("normalMatrix")&&o.setUniformMatrix3x3("normalMatrix",c.normalMatrix);else{var u=e.openGLActor.getKeyMatrices();if(o.isUniformUsed("MCVCMatrix")){var f=new Float64Array(16);Ke(f,c.wcvc,u.mcwc),o.setUniformMatrix("MCVCMatrix",f)}if(o.isUniformUsed("normalMatrix")){var l=new Float64Array(9);kn(l,c.normalMatrix,u.normalMatrix),o.setUniformMatrix3x3("normalMatrix",l)}}o.isUniformUsed("cameraParallel")&&r.getProgram().setUniformi("cameraParallel",s.getParallelProjection())},t.getOpenGLMode=function(r,a){return e.context.TRIANGLES},t.buildBufferObjects=function(r,a){var i=e.currentInput;if(i!==null){e.renderable.mapScalars(i,1);var o=e.renderable.getColorMapColors(),s=e.primitives[e.primTypes.Tris].getCABO(),c=i.getPointData(),u=i.getPoints(),f=u.getNumberOfPoints(),l=u.getData(),p=3;p+=4;var h=null,v=0;s.setColorBOStride(4),s.getColorBO()||s.setColorBO(wr.newInstance()),s.getColorBO().setOpenGLRenderWindow(e._openGLRenderWindow),o&&(v=o.getNumberOfComponents(),s.setColorOffset(4),h=o.getData(),s.setColorBOStride(8)),s.setColorComponents(v),s.setStride(p*4);var y=new Float32Array(p*f*12),m=new Uint8Array(12*f*(h?8:4)),x=null,g=null;e.renderable.getScaleArray()!=null&&c.hasArray(e.renderable.getScaleArray())&&(x=c.getArray(e.renderable.getScaleArray()).getData()),e.renderable.getOrientationArray()!=null&&c.hasArray(e.renderable.getOrientationArray())?g=c.getArray(e.renderable.getOrientationArray()).getData():bo([`Error setting orientationArray.
`,"You have to specify the stick orientation"]);for(var d=[0,1,3,0,3,2,2,3,5,2,5,4],C=0,S=0,T=0,w=0,E=0;E<f;++E){var D=e.renderable.getLength(),b=e.renderable.getRadius();x&&(D=x[E*2],b=x[E*2+1]);for(var O=0;O<d.length;++O)C=E*3,y[T++]=l[C++],y[T++]=l[C++],y[T++]=l[C++],C=E*3,y[T++]=g[C++]*D,y[T++]=g[C++]*D,y[T++]=g[C++]*D,y[T++]=b,m[w++]=255*(d[O]%2),m[w++]=d[O]>=4?255:0,m[w++]=d[O]>=2?255:0,m[w++]=255,S=E*v,h&&(m[w++]=h[S],m[w++]=h[S+1],m[w++]=h[S+2],m[w++]=h[S+3])}s.setElementCount(T/p),s.upload(y,Tr.ARRAY_BUFFER),s.getColorBO().upload(m,Tr.ARRAY_BUFFER),e.VBOBuildTime.modified()}}}var HC={};function $C(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,HC,n),Co.extend(t,e,n),WC(t,e)}var KC=Je($C,"vtkOpenGLStickMapper");ft("vtkStickMapper",KC);var Dt=Uint8Array,bn=Uint16Array,fh=Uint32Array,lh=new Dt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ph=new Dt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),XC=new Dt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),hh=function(t,e){for(var n=new bn(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var a=new fh(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)a[i]=i-n[r]<<5|r;return[n,a]},vh=hh(lh,2),gh=vh[0],qC=vh[1];gh[28]=258,qC[258]=28;for(var YC=hh(ph,0),JC=YC[0],ru=new bn(32768),nt=0;nt<32768;++nt){var Pr=(nt&43690)>>>1|(nt&21845)<<1;Pr=(Pr&52428)>>>2|(Pr&13107)<<2,Pr=(Pr&61680)>>>4|(Pr&3855)<<4,ru[nt]=((Pr&65280)>>>8|(Pr&255)<<8)>>>1}for(var ti=function(t,e,n){for(var r=t.length,a=0,i=new bn(e);a<r;++a)t[a]&&++i[t[a]-1];var o=new bn(e);for(a=0;a<e;++a)o[a]=o[a-1]+i[a-1]<<1;var s;if(n){s=new bn(1<<e);var c=15-e;for(a=0;a<r;++a)if(t[a])for(var u=a<<4|t[a],f=e-t[a],l=o[t[a]-1]++<<f,p=l|(1<<f)-1;l<=p;++l)s[ru[l]>>>c]=u}else for(s=new bn(r),a=0;a<r;++a)t[a]&&(s[a]=ru[o[t[a]-1]++]>>>15-t[a]);return s},ri=new Dt(288),nt=0;nt<144;++nt)ri[nt]=8;for(var nt=144;nt<256;++nt)ri[nt]=9;for(var nt=256;nt<280;++nt)ri[nt]=7;for(var nt=280;nt<288;++nt)ri[nt]=8;for(var dh=new Dt(32),nt=0;nt<32;++nt)dh[nt]=5;var ZC=ti(ri,9,1),QC=ti(dh,5,1),nu=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},rr=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},au=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},eS=function(t){return(t+7)/8|0},Mo=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var r=new(t.BYTES_PER_ELEMENT==2?bn:t.BYTES_PER_ELEMENT==4?fh:Dt)(n-e);return r.set(t.subarray(e,n)),r},tS=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],bt=function(t,e,n){var r=new Error(e||tS[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,bt),!n)throw r;return r},iu=function(t,e,n){var r=t.length;if(!r||n&&n.f&&!n.l)return e||new Dt(0);var a=!e||n,i=!n||n.i;n||(n={}),e||(e=new Dt(r*3));var o=function(J){var ne=e.length;if(J>ne){var Q=new Dt(Math.max(ne*2,J));Q.set(e),e=Q}},s=n.f||0,c=n.p||0,u=n.b||0,f=n.l,l=n.d,p=n.m,h=n.n,v=r*8;do{if(!f){s=rr(t,c,1);var y=rr(t,c+1,3);if(c+=3,y)if(y==1)f=ZC,l=QC,p=9,h=5;else if(y==2){var d=rr(t,c,31)+257,C=rr(t,c+10,15)+4,S=d+rr(t,c+5,31)+1;c+=14;for(var T=new Dt(S),w=new Dt(19),E=0;E<C;++E)w[XC[E]]=rr(t,c+E*3,7);c+=C*3;for(var D=nu(w),b=(1<<D)-1,O=ti(w,D,1),E=0;E<S;){var M=O[rr(t,c,b)];c+=M&15;var m=M>>>4;if(m<16)T[E++]=m;else{var R=0,N=0;for(m==16?(N=3+rr(t,c,3),c+=2,R=T[E-1]):m==17?(N=3+rr(t,c,7),c+=3):m==18&&(N=11+rr(t,c,127),c+=7);N--;)T[E++]=R}}var U=T.subarray(0,d),W=T.subarray(d);p=nu(U),h=nu(W),f=ti(U,p,1),l=ti(W,h,1)}else bt(1);else{var m=eS(c)+4,x=t[m-4]|t[m-3]<<8,g=m+x;if(g>r){i&&bt(0);break}a&&o(u+x),e.set(t.subarray(m,g),u),n.b=u+=x,n.p=c=g*8,n.f=s;continue}if(c>v){i&&bt(0);break}}a&&o(u+131072);for(var I=(1<<p)-1,G=(1<<h)-1,F=c;;F=c){var R=f[au(t,c)&I],A=R>>>4;if(c+=R&15,c>v){i&&bt(0);break}if(R||bt(2),A<256)e[u++]=A;else if(A==256){F=c,f=null;break}else{var H=A-254;if(A>264){var E=A-257,$=lh[E];H=rr(t,c,(1<<$)-1)+gh[E],c+=$}var X=l[au(t,c)&G],Y=X>>>4;X||bt(3),c+=X&15;var W=JC[Y];if(Y>3){var $=ph[Y];W+=au(t,c)&(1<<$)-1,c+=$}if(c>v){i&&bt(0);break}a&&o(u+131072);for(var q=u+H;u<q;u+=4)e[u]=e[u-W],e[u+1]=e[u+1-W],e[u+2]=e[u+2-W],e[u+3]=e[u+3-W];u=q}}n.l=f,n.p=F,n.b=u,n.f=s,f&&(s=1,n.m=p,n.d=l,n.n=h)}while(!s);return u==e.length?e:Mo(e,0,u)},rS=new Dt(0),pr=function(t,e){return t[e]|t[e+1]<<8},nr=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},ou=function(t,e){return nr(t,e)+nr(t,e+4)*4294967296},nS=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&bt(6,"invalid gzip data");var e=t[3],n=10;e&4&&(n+=t[10]|(t[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!t[n++]);return n+(e&2)},aS=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},iS=function(t){((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)&&bt(6,"invalid zlib data"),t[1]&32&&bt(6,"invalid zlib data: preset dictionaries not supported")};function yh(t,e){return iu(t,e)}function oS(t,e){return iu(t.subarray(nS(t),-8),e||new Dt(aS(t)))}function sS(t,e){return iu((iS(t),t.subarray(2,-4)),e)}function ar(t,e){return t[0]==31&&t[1]==139&&t[2]==8?oS(t,e):(t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31?yh(t,e):sS(t,e)}var mh=typeof TextEncoder<"u"&&new TextEncoder,su=typeof TextDecoder<"u"&&new TextDecoder,uS=0;try{su.decode(rS,{stream:!0}),uS=1}catch{}var cS=function(t){for(var e="",n=0;;){var r=t[n++],a=(r>127)+(r>223)+(r>239);if(n+a>t.length)return[e,Mo(t,n-1)];a?a==3?(r=((r&15)<<18|(t[n++]&63)<<12|(t[n++]&63)<<6|t[n++]&63)-65536,e+=String.fromCharCode(55296|r>>10,56320|r&1023)):a&1?e+=String.fromCharCode((r&31)<<6|t[n++]&63):e+=String.fromCharCode((r&15)<<12|(t[n++]&63)<<6|t[n++]&63):e+=String.fromCharCode(r)}};function fS(t,e){if(e){for(var n=new Dt(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}if(mh)return mh.encode(t);for(var a=t.length,i=new Dt(t.length+(t.length>>1)),o=0,s=function(f){i[o++]=f},r=0;r<a;++r){if(o+5>i.length){var c=new Dt(o+8+(a-r<<1));c.set(i),i=c}var u=t.charCodeAt(r);u<128||e?s(u):u<2048?(s(192|u>>6),s(128|u&63)):u>55295&&u<57344?(u=65536+(u&1023<<10)|t.charCodeAt(++r)&1023,s(240|u>>18),s(128|u>>12&63),s(128|u>>6&63),s(128|u&63)):(s(224|u>>12),s(128|u>>6&63),s(128|u&63))}return Mo(i,0,o)}function ir(t,e){if(e){for(var n="",r=0;r<t.length;r+=16384)n+=String.fromCharCode.apply(null,t.subarray(r,r+16384));return n}else{if(su)return su.decode(t);var a=cS(t),i=a[0],o=a[1];return o.length&&bt(8),i}}var lS=function(t,e){return e+30+pr(t,e+26)+pr(t,e+28)},pS=function(t,e,n){var r=pr(t,e+28),a=ir(t.subarray(e+46,e+46+r),!(pr(t,e+8)&2048)),i=e+46+r,o=nr(t,e+20),s=n&&o==4294967295?hS(t,i):[o,nr(t,e+24),nr(t,e+42)],c=s[0],u=s[1],f=s[2];return[pr(t,e+10),c,u,a,i+pr(t,e+30)+pr(t,e+32),f]},hS=function(t,e){for(;pr(t,e)!=1;e+=4+pr(t,e+2));return[ou(t,e+12),ou(t,e+4),ou(t,e+20)]};function xh(t,e){for(var n={},r=t.length-22;nr(t,r)!=101010256;--r)(!r||t.length-r>65558)&&bt(13);var a=pr(t,r+8);if(!a)return{};var i=nr(t,r+16),o=i==4294967295;o&&(r=nr(t,r-12),nr(t,r)!=101075792&&bt(13),a=nr(t,r+32),i=nr(t,r+48));for(var s=e&&e.filter,c=0;c<a;++c){var u=pS(t,i,o),f=u[0],l=u[1],p=u[2],h=u[3],v=u[4],y=u[5],m=lS(t,y);i=v,(!s||s({name:h,size:l,originalSize:p,compression:f}))&&(f?f==8?n[h]=yh(t.subarray(m,m+l),new Dt(p)):bt(14,"unknown compression type "+f):n[h]=Mo(t,m,m+l))}return n}function Ch(){var t=new ArrayBuffer(4),e=new Uint8Array(t),n=new Uint32Array(t);return e[0]=161,e[1]=178,e[2]=195,e[3]=212,n[0]===3569595041?"LittleEndian":n[0]===2712847316?"BigEndian":null}var vS=Ch();function gS(t,e){if(!(e<2))for(var n=new Int8Array(t),r=n.length,a=[],i=0;i<r;i+=e){for(var o=0;o<e;o++)a.push(n[i+o]);for(var s=0;s<e;s++)n[i+s]=a.pop()}}var br={ENDIANNESS:vS,getEndianness:Ch,swapBytes:gS},uu={};function Sh(t){return!!uu[t]}function dS(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"http",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return uu[t](e)}function No(t,e){uu[t]=e}var ta={get:dS,has:Sh,registerType:No},ni=B.vtkErrorMacro,yS=B.vtkDebugMacro,ra=0;function Ro(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=new XMLHttpRequest;return r.open(t,e,!0),n.headers&&Object.entries(n.headers).forEach(function(a){var i=ze(a,2),o=i[0],s=i[1];return r.setRequestHeader(o,s)}),n.progressCallback&&r.addEventListener("progress",n.progressCallback),r}function mS(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e&&e.compression&&e.compression!=="gz"&&(ni("Supported algorithms are: [gz]"),ni("Unkown compression algorithm: ".concat(e.compression))),new Promise(function(n,r){var a=Ro("GET",t,e);a.onreadystatechange=function(i){a.readyState===4&&(a.status===200||a.status===0?e.compression?n(ar(new Uint8Array(a.response)).buffer):n(a.response):r({xhr:a,e:i}))},a.responseType="arraybuffer",a.send()})}function xS(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n.ref&&!n.ref.pending?new Promise(function(a,i){var o=null;n.ref.url?o=n.ref.url:o=[e,n.ref.basepath,r.compression?"".concat(n.ref.id,".gz"):n.ref.id].join("/");var s=Ro("GET",o,r);s.onreadystatechange=function(c){s.readyState===1&&(n.ref.pending=!0,++ra===1&&t!==null&&t!==void 0&&t.invokeBusy&&t.invokeBusy(!0)),s.readyState===4&&(n.ref.pending=!1,s.status===200||s.status===0?(n.buffer=s.response,r.compression&&(n.dataType==="string"||n.dataType==="JSON"?n.buffer=ir(ar(new Uint8Array(n.buffer))):n.buffer=ar(new Uint8Array(n.buffer)).buffer),n.ref.encode==="JSON"?n.values=JSON.parse(n.buffer):(br.ENDIANNESS!==n.ref.encode&&br.ENDIANNESS&&(yS("Swap bytes of ".concat(n.name)),br.swapBytes(n.buffer,ao[n.dataType])),n.values=B.newTypedArray(n.dataType,n.buffer)),n.values.length!==n.size&&ni("Error in FetchArray: ".concat(n.name,", does not have the proper array size. Got ").concat(n.values.length,", instead of ").concat(n.size)),delete n.ref,--ra===0&&t!==null&&t!==void 0&&t.invokeBusy&&t.invokeBusy(!1),t!=null&&t.modified&&t.modified(),a(n)):i({xhr:s,e:c}))},s.responseType=r.compression||n.dataType!=="string"?"arraybuffer":"text",s.send()}):Promise.resolve(n)}function CS(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(r,a){var i=Ro("GET",e,n);i.onreadystatechange=function(o){i.readyState===1&&++ra===1&&t!==null&&t!==void 0&&t.invokeBusy&&t.invokeBusy(!0),i.readyState===4&&(--ra===0&&t!==null&&t!==void 0&&t.invokeBusy&&t.invokeBusy(!1),i.status===200||i.status===0?n.compression?r(JSON.parse(ir(ar(new Uint8Array(i.response))))):r(JSON.parse(i.responseText)):a({xhr:i,e:o}))},i.responseType=n.compression?"arraybuffer":"text",i.send()})}function SS(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n&&n.compression&&n.compression!=="gz"&&(ni("Supported algorithms are: [gz]"),ni("Unkown compression algorithm: ".concat(n.compression))),new Promise(function(r,a){var i=Ro("GET",e,n);i.onreadystatechange=function(o){i.readyState===1&&++ra===1&&t!==null&&t!==void 0&&t.invokeBusy&&t.invokeBusy(!0),i.readyState===4&&(--ra===0&&t!==null&&t!==void 0&&t.invokeBusy&&t.invokeBusy(!1),i.status===200||i.status===0?n.compression?r(ir(ar(new Uint8Array(i.response)))):r(i.responseText):a({xhr:i,e:o}))},i.responseType=n.compression?"arraybuffer":"text",i.send()})}function TS(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(r,a){var i=new Image;n.crossOrigin&&(i.crossOrigin=n.crossOrigin),i.onload=function(){return r(i)},i.onerror=a,i.src=e})}var wS={fetchArray:xS,fetchJSON:CS,fetchText:SS,fetchBinary:mS,fetchImage:TS};No("http",function(t){return wS});var Gt=[];Gt["-".charCodeAt(0)]=62,Gt["_".charCodeAt(0)]=63;for(var na="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Lo=0;Lo<na.length;Lo++)Gt[na.charCodeAt(Lo)]=Lo;function hr(t){return Gt[t.charCodeAt(0)]!==void 0}function ES(t){for(var e=t.length,n=[],r=null,a=0;a<e;a++)hr(t[a])?(r||(r={start:a,count:0}),r.count++,r.end=a):t[a]==="="&&r&&(n.push(r),r=null);return r&&n.push(r),n}function DS(t,e,n,r){for(var a=e.start,i=e.count,o=i%4,s=Math.floor(i/4),c=a,u=null,f=n,l=0;l<s;l++){for(;!hr(t[c]);)c++;for(u=Gt[t.charCodeAt(c++)]<<18;!hr(t[c]);)c++;for(u|=Gt[t.charCodeAt(c++)]<<12;!hr(t[c]);)c++;for(u|=Gt[t.charCodeAt(c++)]<<6;!hr(t[c]);)c++;u|=Gt[t.charCodeAt(c++)],r[f++]=u>>16&255,r[f++]=u>>8&255,r[f++]=u&255}switch(o){case 3:for(;!hr(t[c]);)c++;for(u=Gt[t.charCodeAt(c++)]<<10;!hr(t[c]);)c++;for(u|=Gt[t.charCodeAt(c++)]<<4;!hr(t[c]);)c++;u|=Gt[t.charCodeAt(c++)]>>2,r[f++]=u>>8&255,r[f++]=u&255;break;case 2:for(;!hr(t[c]);)c++;for(u=Gt[t.charCodeAt(c++)]<<2;!hr(t[c]);)c++;u|=Gt[t.charCodeAt(c++)]>>4,r[f++]=u&255;break;case 1:throw new Error("BASE64: remain 1 should not happen")}return f}function OS(t){for(var e=ES(t),n=e[e.length-1].end+1,r=(4-n%4)%4,a=(n+r)*3/4-r,i=new ArrayBuffer(a),o=new Uint8Array(i),s=0,c=0;c<e.length;c++)s+=DS(t,e[c],s,o),s+=(4-e[c].count%4)%4;return i}function Th(t,e,n){var r=(t<<16)+(e<<8)+n;return na[r>>18]+na[r>>12&63]+na[r>>6&63]+na[r&63]}function wh(t){for(var e=new Uint8Array(t),n=t.byteLength%3,r=t.byteLength-n,a=Array(r/3),i=0;i<a.length;i++){var o=i*3;a[i]=Th(e[o],e[o+1],e[o+2])}if(n>0){var s=Th(e[r],e[r+1]||0,e[r+2]||0);n===1?a.push("".concat(s.substr(0,2),"==")):n===2&&a.push("".concat(s.substr(0,3),"="))}return a.join("")}var aa={toArrayBuffer:OS,fromArrayBuffer:wh},ia=B.vtkErrorMacro,_S=B.vtkDebugMacro;function bS(t){var e=t.split(".").pop().toLowerCase();return e==="jpg"?"jpeg":e}function MS(t,e,n){return function(r){t.buffer=new ArrayBuffer(r.length);var a=new Uint8Array(t.buffer);a.set(r),e&&(t.dataType==="string"||t.dataType==="JSON"?t.buffer=ir(ar(new Uint8Array(t.buffer))):t.buffer=ar(new Uint8Array(t.buffer)).buffer),t.ref.encode==="JSON"?t.values=JSON.parse(t.buffer):(br.ENDIANNESS!==t.ref.encode&&br.ENDIANNESS&&(_S("Swap bytes of ".concat(t.name)),br.swapBytes(t.buffer,ao[t.dataType])),t.values=B.newTypedArray(t.dataType,t.buffer)),t.values.length!==t.size&&ia("Error in FetchArray: ".concat(t.name," does not have the proper array size. Got ").concat(t.values.length,", instead of ").concat(t.size)),n()}}function NS(t,e,n){return function(r){e?t.values=JSON.parse(ir(ar(r))):t.values=JSON.parse(r),n()}}function RS(t){return t[0]==="/"?t.substr(1):t}function LS(t){return new URL(t,"http://any").pathname}function ai(t){return RS(LS(t))}function kS(t){return new Promise(function(e,n){typeof t=="string"?e(fS(t)):t instanceof Blob?e(t.arrayBuffer().then(function(r){return new Uint8Array(r)})):t instanceof ArrayBuffer?e(new Uint8Array(t)):(t==null?void 0:t.buffer)instanceof ArrayBuffer?e(new Uint8Array(t.buffer)):n(new Error("Invalid datatype to unpack."))})}function FS(t){var e=!1,n=0,r=null,a="";return kS(t.zipContent).then(function(i){r=xh(i),e=!0;var o=[];Object.keys(r).forEach(function(s){s.endsWith("index.json")&&o.push(s)}),o.sort(function(s,c){return s.length-c.length}),a=o[0].replace(/index\.json$/,""),t.callback&&t.callback(r)}),{fetchArray:function(o,s,c){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return new Promise(function(f,l){e||ia("ERROR!!! zip not ready...");var p=ai([s,c.ref.basepath,u.compression?"".concat(c.ref.id,".gz"):c.ref.id].join("/"));++n===1&&o!==null&&o!==void 0&&o.invokeBusy&&o.invokeBusy(!0);function h(){delete c.ref,--n===0&&o!==null&&o!==void 0&&o.invokeBusy&&o.invokeBusy(!1),o!=null&&o.modified&&o.modified(),f(c)}var v=r["".concat(a).concat(p)];if(c.dataType==="string"&&!u.compression){var y=NS(c,u.compression,h);y(ir(v))}else{var m=MS(c,u.compression,h);m(v)}})},fetchJSON:function(o,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=ai(s);e||ia("ERROR!!! zip not ready...");var f=r["".concat(a).concat(u)];if(c.compression){if(c.compression==="gz"){var l=ir(ar(f));return Promise.resolve(JSON.parse(l))}return Promise.reject(new Error("Invalid compression"))}return Promise.resolve(JSON.parse(ir(f)))},fetchText:function(o,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=ai(s);e||ia("ERROR!!! zip not ready...");var f=r["".concat(a).concat(u)];return c.compression?c.compression==="gz"?Promise.resolve(ir(xh(f))):Promise.reject(new Error("Invalid compression")):Promise.resolve(ir(f))},fetchImage:function(o,s){var c=ai(s);e||ia("ERROR!!! zip not ready...");var u=r["".concat(a).concat(c)];return new Promise(function(f,l){var p=new Image;p.onload=function(){return f(p)},p.onerror=l;var h=wh(u.buffer);p.src="data:image/".concat(bS(c),";base64,").concat(h)})},fetchBinary:function(o,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=ai(s);e||ia("ERROR!!! zip not ready...");var f=r["".concat(a).concat(u)];return c.compression?c.compression==="gz"?Promise.resolve(ar(f).buffer):Promise.reject(new Error("Invalid compression")):Promise.resolve(f.buffer)}}}var AS={create:FS};No("zip",function(t){return AS.create(t)});function VS(t,e){e.classHierarchy.push("vtkConcentricCylinderSource");function n(){for(;e.cellFields.length<e.radius.length;)e.cellFields.push(e.cellFields.length)}t.clearRadius=function(){e.radius=[],e.cellFields=[],t.modified()},t.addRadius=function(a,i){e.radius.push(a),i!==void 0&&e.cellFields.push(i),n(),t.modified()},t.getNumberOfRadius=function(){return e.radius.length},t.getRadius=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.radius[a]},t.setRadius=function(a,i){e.radius[a]=i,t.modified()},t.setCellField=function(a,i){e.cellFields[a]=i,t.modified()},t.removeMask=function(){e.mask=null,t.modified()},t.setMaskLayer=function(a,i){var o=!1;!e.mask&&i&&(o=!0,e.mask=[]),e.mask&&(!e.mask[a]!=!i&&(o=!0),e.mask[a]=i),o&&t.modified()},t.getMaskLayer=function(a){return a===void 0?e.mask:e.mask[a]};function r(a,i){var o;if(!(e.deleted||!e.radius.length)){n();var s=i[0],c=e.radius.length,u=e.height/2,f=0,l=0,p=e.startTheta<e.endTheta?e.startTheta:e.endTheta;p*=Math.PI/180;var h=e.endTheta>e.startTheta?e.endTheta:e.startTheta;h*=Math.PI/180;var v=e.resolution,y=!1;h>=p+2*Math.PI?h=p+2*Math.PI:(++v,y=!0);var m=(h-p)/e.resolution,x=v*c*2+2;if(!e.skipInnerFaces&&!e.mask)f=2*(v+1)+5*v+(c-1)*v*20+(y?10*c:0),l=2+v+(c-1)*4*v+(y?2*c:0);else if(!e.skipInnerFaces&&e.mask){e.mask[0]||(f+=2*(v+1)+5*v+(y?10:0),l+=2+v+(y?2:0));for(var g=1;g<c;g++)e.mask[g]||(f+=v*20+(y?10:0),l+=4*v+(y?2:0))}else{(!e.skipInnerFaces||!e.mask||!e.mask[0])&&(f+=2*(v+1)+(y?10:0),l+=2+(y?2:0),(e.radius.length===1||!e.skipInnerFaces||e.mask&&e.mask[1])&&(f+=5*v,l+=v));for(var d=1;d<c;d++)if(!e.skipInnerFaces||!e.mask||!e.mask[d]){var C=c-1===d;f+=v*10+(y?10:0),l+=v*2+(y?2:0),(!e.skipInnerFaces||e.mask&&e.mask[d-1])&&(f+=v*5,l+=v),(C||!e.skipInnerFaces||e.mask&&e.mask[d+1])&&(f+=v*5,l+=v)}}var S=0,T=B.newTypedArray(e.pointType,x*3),w=0,E=new Uint32Array(f),D=0,b=new Float32Array(l);T[S*3+0]=0,T[S*3+1]=0,T[S*3+2]=u,S++,T[S*3+0]=0,T[S*3+1]=0,T[S*3+2]=-u,S++;for(var O=0;O<c;O++){for(var M=e.radius[O],R=0;R<v;R++){var N=p+R*m;T[S*3+0]=M*Math.cos(N),T[S*3+1]=M*Math.sin(N),T[S*3+2]=u,S++}for(var U=0;U<v;U++){var W=p+U*m;T[S*3+0]=M*Math.cos(W),T[S*3+1]=M*Math.sin(W),T[S*3+2]=-u,S++}}var I=e.cellFields[0];if(!e.mask||!e.mask[0]){b[D++]=I,E[w++]=v+(y?1:0),y&&(E[w++]=0);for(var G=0;G<v;G++)E[w++]=G+2;b[D++]=I,E[w++]=v+(y?1:0),y&&(E[w++]=1);for(var F=0;F<v;F++)E[w++]=2*v-F-1+2;if(!e.skipInnerFaces||e.mask&&e.mask[1]||c===1)for(var A=0;A<e.resolution;A++)E[w++]=4,E[w++]=(A+1)%v+2,E[w++]=A+2,E[w++]=A+v+2,E[w++]=(A+1)%v+v+2,b[D++]=I;y&&(E[w++]=4,E[w++]=2,E[w++]=0,E[w++]=1,E[w++]=v+2,b[D++]=I,E[w++]=4,E[w++]=0,E[w++]=v+1,E[w++]=2*v+1,E[w++]=1,b[D++]=I)}for(var H=1;H<c;H++)if(!(e.mask&&e.mask[H])){var $=v*2*(H-1)+2,X=$+2*v,Y=c-1===H;I=e.cellFields[H];for(var q=0;q<e.resolution;q++)E[w++]=4,E[w++]=q+$,E[w++]=(q+1)%v+$,E[w++]=(q+1)%v+X,E[w++]=q+X,b[D++]=I;for(var J=0;J<e.resolution;J++)E[w++]=4,E[w++]=(J+1)%v+$+v,E[w++]=J+$+v,E[w++]=J+X+v,E[w++]=(J+1)%v+X+v,b[D++]=I;if(!e.skipInnerFaces||e.mask&&e.mask[H-1])for(var ne=0;ne<e.resolution;ne++)E[w++]=4,E[w++]=ne+$,E[w++]=(ne+1)%v+$,E[w++]=(ne+1)%v+v+$,E[w++]=ne+v+$,b[D++]=I;if(!e.skipInnerFaces||Y||e.mask&&(e.mask[H+1]||Y))for(var Q=0;Q<e.resolution;Q++)E[w++]=4,E[w++]=(Q+1)%v+X,E[w++]=Q+X,E[w++]=Q+v+X,E[w++]=(Q+1)%v+v+X,b[D++]=I;y&&(E[w++]=4,E[w++]=X,E[w++]=$,E[w++]=v+$,E[w++]=v+X,b[D++]=I,E[w++]=4,E[w++]=e.resolution+X,E[w++]=e.resolution+$,E[w++]=e.resolution+v+$,E[w++]=e.resolution+v+X,b[D++]=I)}(o=kt.buildFromRadian()).translate.apply(o,ve(e.center)).rotateFromDirections([0,0,1],e.direction).apply(T),s=Ye.newInstance(),s.getPoints().setData(T,3),s.getPolys().setData(E,1),s.getCellData().setScalars(de.newInstance({name:"layer",values:b})),i[0]=s}}t.requestData=r}var BS={height:1,radius:[.5],cellFields:[1],resolution:6,startTheta:0,endTheta:360,center:[0,0,0],direction:[0,0,1],skipInnerFaces:!0,mask:null,pointType:"Float64Array"};function US(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,BS,n),B.obj(t,e),B.setGet(t,e,["height","resolution","startTheta","endTheta","skipInnerFaces"]),B.setGetArray(t,e,["center","direction"],3),B.getArray(t,e,["cellFields"]),B.algo(t,e,0,1),VS(t,e)}B.newInstance(US,"vtkConcentricCylinderSource");function GS(t,e){e.classHierarchy.push("vtkConeSource");function n(r,a){var i;if(!e.deleted){var o=a[0],s=2*Math.PI/e.resolution,c=-e.height/2,u=e.resolution+1,f=4*e.resolution+1+e.resolution,l=0,p=B.newTypedArray(e.pointType,u*3),h=0,v=new Uint32Array(f);p[0]=e.height/2,p[1]=0,p[2]=0,e.capping&&(v[h++]=e.resolution);for(var y=0;y<e.resolution;y++)l++,p[l*3+0]=c,p[l*3+1]=e.radius*Math.cos(y*s),p[l*3+2]=e.radius*Math.sin(y*s),e.capping&&(v[e.resolution-h+++1]=l);for(var m=0;m<e.resolution;m++)v[h++]=3,v[h++]=0,v[h++]=m+1,v[h++]=m+2>e.resolution?1:m+2;(i=kt.buildFromRadian()).translate.apply(i,ve(e.center)).rotateFromDirections([1,0,0],e.direction).apply(p),o=Ye.newInstance(),o.getPoints().setData(p,3),o.getPolys().setData(v,1),a[0]=o}}t.requestData=n}var PS={height:1,radius:.5,resolution:6,center:[0,0,0],direction:[1,0,0],capping:!0,pointType:"Float64Array"};function Eh(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,PS,n),B.obj(t,e),B.setGet(t,e,["height","radius","resolution","capping"]),B.setGetArray(t,e,["center","direction"],3),B.algo(t,e,0,1),GS(t,e)}var IS=B.newInstance(Eh,"vtkConeSource"),jS={newInstance:IS,extend:Eh};function zS(t,e){e.classHierarchy.push("vtkCylinderSource");function n(r,a){var i,o;if(!e.deleted){var s=a[0],c=2*Math.PI/e.resolution,u=2*e.resolution,f=5*e.resolution;e.capping&&(u=4*e.resolution,f=7*e.resolution+2);for(var l=B.newTypedArray(e.pointType,u*3),p=0,h=new Uint32Array(f),v=new Float32Array(u*3),y=de.newInstance({numberOfComponents:3,values:v,name:"Normals"}),m=new Float32Array(u*2),x=de.newInstance({numberOfComponents:2,values:m,name:"TCoords"}),g=[0,0,0],d=[0,0,0],C=[0,0,0],S=[0,0,0],T=[0,0],w=[0,0],E=e.otherRadius==null?e.radius:e.otherRadius,D=0;D<e.resolution;D++){g[0]=Math.cos(D*c+e.initAngle),d[0]=g[0],C[0]=e.radius*g[0]+e.center[0],S[0]=C[0],T[0]=Math.abs(2*D/e.resolution-1),w[0]=T[0],C[1]=.5*e.height+e.center[1],S[1]=-.5*e.height+e.center[1],T[1]=0,w[1]=1,g[2]=-Math.sin(D*c+e.initAngle),d[2]=g[2],C[2]=E*g[2]+e.center[2],S[2]=C[2];for(var b=2*D,O=0;O<3;O++)v[b*3+O]=g[O],v[(b+1)*3+O]=d[O],l[b*3+O]=C[O],l[(b+1)*3+O]=S[O],O<2&&(m[b*2+O]=T[O],m[(b+1)*2+O]=w[O])}for(var M=0;M<e.resolution;M++){h[p++]=4,h[p++]=2*M,h[p++]=2*M+1;var R=(2*M+3)%(2*e.resolution);h[p++]=R,h[p++]=R-1}if(e.capping){for(var N=0;N<e.resolution;N++){C[0]=e.radius*Math.cos(N*c+e.initAngle),S[0]=C[0],T[0]=C[0],w[0]=C[0],C[0]+=e.center[0],S[0]+=e.center[0],g[1]=1,d[1]=-1,C[1]=.5*e.height+e.center[1],S[1]=-.5*e.height+e.center[1],C[2]=-E*Math.sin(N*c+e.initAngle),S[2]=C[2],T[1]=C[2],w[1]=C[2],C[2]+=e.center[2],S[2]+=e.center[2];for(var U=2*e.resolution+N,W=3*e.resolution+e.resolution-N-1,I=0;I<3;I++)v[3*U+I]=g[I],v[3*W+I]=d[I],l[3*U+I]=C[I],l[3*W+I]=S[I],I<2&&(m[2*U+I]=T[I],m[2*W+I]=w[I])}h[p++]=e.resolution;for(var G=0;G<e.resolution;G++)h[p++]=2*e.resolution+G;h[p++]=e.resolution;for(var F=0;F<e.resolution;F++)h[p++]=3*e.resolution+F}(i=(o=kt.buildFromRadian()).translate.apply(o,ve(e.center)).rotateFromDirections([0,1,0],e.direction)).translate.apply(i,ve(e.center.map(function(A){return A*-1}))).apply(l),s=Ye.newInstance(),s.getPoints().setData(l,3),s.getPolys().setData(h,1),s.getPointData().setNormals(y),s.getPointData().setTCoords(x),a[0]=s}}t.requestData=n}var WS={height:1,initAngle:0,radius:1,resolution:6,center:[0,0,0],direction:[0,1,0],capping:!0,pointType:"Float64Array"};function Dh(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,WS,n),B.obj(t,e),B.setGet(t,e,["height","initAngle","otherRadius","radius","resolution","capping"]),B.setGetArray(t,e,["center","direction"],3),B.algo(t,e,0,1),zS(t,e)}var HS=B.newInstance(Dh,"vtkCylinderSource"),$S={newInstance:HS,extend:Dh},KS=B.vtkWarningMacro;function XS(t,e){e.classHierarchy.push("vtkLineSource"),t.requestData=function(n,r){if(!e.deleted){var a=r[0],i=a?a.getPoints().getDataType():e.pointType,o=Ye.newInstance(),s=[];if(yt(e.point2,e.point1,s),Bt(s)<=0){KS("Zero-length line definition");return}var c=e.resolution,u=c+1,f=B.newTypedArray(i,u*3);o.getPoints().setData(f,3);var l=new Uint32Array(u+1);o.getLines().setData(l,1);for(var p=0,h=0,v=0;v<c+1;v++)h=v/c,f[p*3]=e.point1[0]+h*s[0],f[p*3+1]=e.point1[1]+h*s[1],f[p*3+2]=e.point1[2]+h*s[2],p++;p=0,l[0]=u;for(var y=0;y<u;y++)l[y+1]=y;r[0]=o}}}var qS={resolution:10,point1:[-1,0,0],point2:[1,0,0],pointType:"Float64Array"};function YS(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,qS,n),B.obj(t,e),B.setGet(t,e,["resolution"]),B.setGetArray(t,e,["point1","point2"],3),B.algo(t,e,0,1),XS(t,e)}B.newInstance(YS,"vtkLineSource");var JS=B.vtkWarningMacro,ZS=1e-6;function QS(t,e){e.classHierarchy.push("vtkPlaneSource"),t.requestData=function(n,r){if(!e.deleted){var a=r[0],i=a?a.getPoints().getDataType():e.pointType,o=Ye.newInstance(),s=[],c=[];if(yt(e.point1,e.origin,s),yt(e.point2,e.origin,c),!t.updatePlane(s,c)){JS("Bad plane definition");return}var u=e.xResolution,f=e.yResolution,l=(u+1)*(f+1),p=u*f,h=B.newTypedArray(i,l*3);o.getPoints().setData(h,3);var v=new Uint32Array(5*p);o.getPolys().setData(v,1);var y=new Float32Array(l*3),m=de.newInstance({numberOfComponents:3,values:y,name:"Normals"});o.getPointData().setNormals(m);var x=new Float32Array(l*2),g=de.newInstance({numberOfComponents:2,values:x,name:"TextureCoordinates"});o.getPointData().setTCoords(g);for(var d=new Float32Array(2),C=0,S=0;S<f+1;S++){d[1]=S/f;for(var T=0;T<u+1;T++)d[0]=T/u,h[C*3]=e.origin[0]+d[0]*s[0]+d[1]*c[0],h[C*3+1]=e.origin[1]+d[0]*s[1]+d[1]*c[1],h[C*3+2]=e.origin[2]+d[0]*s[2]+d[1]*c[2],x[C*2]=d[0],x[C*2+1]=d[1],y[C*3]=e.normal[0],y[C*3+1]=e.normal[1],y[C*3+2]=e.normal[2],C++}C=0;for(var w=0;w<f;w++)for(var E=0;E<u;E++)v[C*5+0]=4,v[C*5+1]=E+w*(u+1),v[C*5+2]=v[C*5+1]+1,v[C*5+3]=v[C*5+1]+u+2,v[C*5+4]=v[C*5+1]+u+1,C++;r[0]=o}},t.setNormal=function(){var n=[];if(arguments.length===1||Array.isArray(arguments.length<=0?void 0:arguments[0])?n=ve(arguments.length<=0?void 0:arguments[0]):arguments.length===3&&(n=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),ot(n)!==0){var r=_e(e.normal,n),a=0,i=[];r<1&&(r<=-1?(a=et(180),yt(e.point1,e.origin,i)):(lt(e.normal,n,i),a=Math.acos(r)),t.rotate(a,i))}},t.rotate=function(n,r){if(!(Math.abs(n)<ZS)){var a=Oe(new Float64Array(16)),i=[];yc(i,e.center),rt(a,a,e.center),Tt(a,a,n,r),rt(a,a,i),be(e.origin,e.origin,a),be(e.point1,e.point1,a),be(e.point2,e.point2,a),kt.buildFromRadian().rotate(n,r).apply(e.normal),t.modified()}},t.setCenter=function(){var n=[];if(arguments.length===1||Array.isArray(arguments.length<=0?void 0:arguments[0])?n=ve(arguments.length<=0?void 0:arguments[0]):arguments.length===3&&(n=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),!Fn(n,e.center)){var r=[];yt(e.point1,e.origin,r);var a=[];yt(e.point2,e.origin,a);for(var i=0;i<3;i++)e.center[i]=n[i],e.origin[i]=e.center[i]-.5*(r[i]+a[i]),e.point1[i]=e.origin[i]+r[i],e.point2[i]=e.origin[i]+a[i];t.modified()}},t.setPoint1=function(){var n=[];if(arguments.length===1||Array.isArray(arguments.length<=0?void 0:arguments[0])?n=ve(arguments.length<=0?void 0:arguments[0]):arguments.length===3&&(n=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),!Fn(n,e.point1)){var r=[],a=[];e.point1=ve(n),yt(e.point1,e.origin,r),yt(e.point2,e.origin,a),t.updatePlane(r,a),t.modified()}},t.setPoint2=function(){var n=[];if(arguments.length===1||Array.isArray(arguments.length<=0?void 0:arguments[0])?n=ve(arguments.length<=0?void 0:arguments[0]):arguments.length===3&&(n=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),!Fn(n,e.point2)){var r=[],a=[];e.point2=ve(n),yt(e.point1,e.origin,r),yt(e.point2,e.origin,a),t.updatePlane(r,a),t.modified()}},t.updatePlane=function(n,r){for(var a=0;a<3;a++)e.center[a]=e.origin[a]+.5*(n[a]+r[a]);return lt(n,r,e.normal),ot(e.normal)!==0}}var eT={xResolution:10,yResolution:10,origin:[0,0,0],point1:[1,0,0],point2:[0,1,0],pointType:"Float64Array"};function tT(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,eT,n),e.normal=[0,0,1],e.center=[0,0,0],B.obj(t,e),B.setGet(t,e,["xResolution","yResolution"]),B.setGetArray(t,e,["origin"],3),B.getArray(t,e,["point1","point2","normal","center"],3),B.algo(t,e,0,1),QS(t,e),t.setPoint1(e.point1),t.setPoint2(e.point2)}B.newInstance(tT,"vtkPlaneSource");function rT(t,e){e.classHierarchy.push("vtkPointSource"),t.requestData=function(n,r){if(!e.deleted){var a=r[0],i=a?a.getPoints().getDataType():e.pointType,o=Ye.newInstance(),s=e.numberOfPoints,c=B.newTypedArray(i,s*3);o.getPoints().setData(c,3);var u=new Uint32Array(s+1);o.getVerts().setData(u,1);for(var f,l,p,h,v,y=0;y<s;y++)f=1-2*Wi(),l=Math.sqrt(1-f*f),p=e.radius*Math.pow(Wi(),.33333333),h=p*l,v=2*Math.PI*Wi(),c[y*3]=e.center[0]+h*Math.cos(v),c[y*3+1]=e.center[1]+h*Math.sin(v),c[y*3+2]=e.center[2]+p*f;u[0]=s;for(var m=0;m<s;m++)u[m+1]=m;r[0]=o}}}var nT={numberOfPoints:10,center:[0,0,0],radius:.5,pointType:"Float64Array"};function aT(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,nT,n),B.obj(t,e),B.setGet(t,e,["numberOfPoints","radius"]),B.setGetArray(t,e,["center"],3),B.algo(t,e,0,1),rT(t,e)}B.newInstance(aT,"vtkPointSource");function iT(t,e){e.classHierarchy.push("vtkSphereSource"),t.requestData=function(n,r){if(!e.deleted){var a=r[0],i=a?a.getPoints().getDataType():e.pointType;a=Ye.newInstance();var o=0,s=e.thetaResolution,c=e.startTheta<e.endTheta?e.startTheta:e.endTheta;c*=Math.PI/180;var u=e.endTheta>e.startTheta?e.endTheta:e.startTheta;u*=Math.PI/180;var f=e.startPhi<e.endPhi?e.startPhi:e.endPhi;f*=Math.PI/180;var l=e.endPhi>e.startPhi?e.endPhi:e.startPhi;l*=Math.PI/180,Math.abs(c-u)<2*Math.PI&&++s;var p=(u-c)/e.thetaResolution,h=e.startPhi<=0?1:0,v=e.phiResolution+(e.endPhi>=180?-1:0),y=e.phiResolution*s+2,m=e.phiResolution*2*e.thetaResolution,x=0,g=B.newTypedArray(i,y*3),d=new Float32Array(y*3),C=0,S=new Uint32Array(m*5);e.startPhi<=0&&(g[x*3+0]=e.center[0],g[x*3+1]=e.center[1],g[x*3+2]=e.center[2]+e.radius,d[x*3+0]=0,d[x*3+1]=0,d[x*3+2]=1,x++,o++),e.endPhi>=180&&(g[x*3+0]=e.center[0],g[x*3+1]=e.center[1],g[x*3+2]=e.center[2]-e.radius,d[x*3+0]=0,d[x*3+1]=0,d[x*3+2]=-1,x++,o++);for(var T=e.phiResolution-o,w=(l-f)/(e.phiResolution-1),E=0;E<s;E++)for(var D=c+E*p,b=h;b<v;b++){var O=f+b*w,M=e.radius*Math.sin(O);d[x*3+0]=M*Math.cos(D),d[x*3+1]=M*Math.sin(D),d[x*3+2]=e.radius*Math.cos(O),g[x*3+0]=d[x*3+0]+e.center[0],g[x*3+1]=d[x*3+1]+e.center[1],g[x*3+2]=d[x*3+2]+e.center[2];var R=Math.sqrt(d[x*3+0]*d[x*3+0]+d[x*3+1]*d[x*3+1]+d[x*3+2]*d[x*3+2]);R=R===0?1:R,d[x*3+0]/=R,d[x*3+1]/=R,d[x*3+2]/=R,x++}var N=T*s;if(Math.abs(c-u)<2*Math.PI&&--s,e.startPhi<=0)for(var U=0;U<s;U++)S[C++]=3,S[C++]=T*U+o,S[C++]=T*(U+1)%N+o,S[C++]=0;if(e.endPhi>=180)for(var W=T-1+o,I=0;I<s;I++)S[C++]=3,S[C++]=T*I+W,S[C++]=o-1,S[C++]=T*(I+1)%N+W;for(var G=0;G<s;G++)for(var F=0;F<T-1;F++){var A=T*G+F+o,H=A+1,$=(T*(G+1)+F)%N+o+1;e.latLongTessellation?(S[C++]=4,S[C++]=A,S[C++]=H,S[C++]=$,S[C++]=$-1):(S[C++]=3,S[C++]=A,S[C++]=H,S[C++]=$,S[C++]=3,S[C++]=A,S[C++]=$,S[C++]=$-1)}g=g.subarray(0,x*3),a.getPoints().setData(g,3),d=d.subarray(0,x*3);var X=de.newInstance({name:"Normals",values:d,numberOfComponents:3});a.getPointData().setNormals(X),S=S.subarray(0,C),a.getPolys().setData(S,1),r[0]=a}}}var oT={radius:.5,latLongTessellation:!1,thetaResolution:8,startTheta:0,endTheta:360,phiResolution:8,startPhi:0,endPhi:180,center:[0,0,0],pointType:"Float64Array"};function sT(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,oT,n),B.obj(t,e),B.setGet(t,e,["radius","latLongTessellation","thetaResolution","startTheta","endTheta","phiResolution","startPhi","endPhi"]),B.setGetArray(t,e,["center"],3),B.algo(t,e,0,1),iT(t,e)}B.newInstance(sT,"vtkSphereSource");var ko=B.vtkDebugMacro,uT=B.vtkErrorMacro;function cT(t,e){e.classHierarchy.push("vtkWarpScalar"),t.requestData=function(n,r){var a=n[0];if(!a)return uT("Invalid or missing input"),1;var i=a.getPoints(),o=a.getPointData(),s=o.getNormals(),c=t.getInputArrayToProcess(0);if(!i||!c)return ko("No data to warp",!!i,!!c),r[0]=n[0],1;var u=i.getNumberOfPoints(),f=null,l=[0,0,1];s&&!e.useNormal?(f=function(w,E){return[E.getData()[w*3],E.getData()[w*3+1],E.getData()[w*3+2]]},ko("Using data normals")):t.getXyPlane()?(f=function(w,E){return l},ko("Using x-y plane normal")):(f=function(w,E){return e.normal},ko("Using Normal instance variable"));for(var p=new Float32Array(u*3),h=i.getData(),v=0,y=[0,0,1],m=1,x=c.getData(),g=c.getNumberOfComponents(),d=0;d<u;++d)v=d*3,y=f(d,s),e.xyPlane?m=h[v+2]:m=x[d*g],p[v]=h[v]+e.scaleFactor*m*y[0],p[v+1]=h[v+1]+e.scaleFactor*m*y[1],p[v+2]=h[v+2]+e.scaleFactor*m*y[2];var C=wt({vtkClass:a.getClassName()});C.shallowCopy(a);var S=Sr.newInstance();return S.setData(p,3),C.setPoints(S),r[0]=C,1}}var fT={scaleFactor:1,useNormal:!1,normal:[0,0,1],xyPlane:!1};function lT(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,fT,n),B.obj(t,e),B.algo(t,e,1,1),B.setGet(t,e,["scaleFactor","useNormal","xyPlane"]),B.setGetArray(t,e,["normal"],3),cT(t,e)}B.newInstance(lT,"vtkWarpScalar");var pT={VARY_RADIUS_OFF:0,VARY_RADIUS_BY_SCALAR:1,VARY_RADIUS_BY_VECTOR:2,VARY_RADIUS_BY_ABSOLUTE_SCALAR:3},hT={TCOORDS_OFF:0,TCOORDS_FROM_NORMALIZED_LENGTH:1,TCOORDS_FROM_LENGTH:2,TCOORDS_FROM_SCALARS:3},Oh={VaryRadius:pT,GenerateTCoords:hT},ii=Oh.VaryRadius,Mn=Oh.GenerateTCoords,vT=B.vtkDebugMacro,gT=B.vtkErrorMacro,oi=B.vtkWarningMacro;function dT(t,e){e.classHierarchy.push("vtkTubeFilter");function n(c,u){var f=c;return e.sidesShareVertices?f+=e.numberOfSides*u:f+=2*e.numberOfSides*u,e.capping&&(f+=2*e.numberOfSides),f}function r(c,u,f){for(var l=u[f],p=c.slice(3*l,3*(l+1)),h=f+1;h<u.length;){var v=u[h],y=c.slice(3*v,3*(v+1));if(p!==y)return h-1;++h}return u.length}function a(c,u,f){for(var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,p=[0,0,1],h=u,v=h[0],y=0;y<h.length;y+=v+1)if(v=h[y],v===1)f.setTuple(h[y+1],p);else if(v>1){var m=0,x=[0,0,0],g=[0,0,0],d=h.slice(y+1,y+1+v);if(m=r(c,d,0),m!==v)(function(){var S=d[m],T=c.slice(3*S,3*(S+1)),w=d[m+1],E=c.slice(3*w,3*(w+1));if(x=E.map(function($,X){return $-T[X]}),ot(x),l)p=l;else{for(;++m<v;)if(m=r(c,d,m),m!==v){S=d[m],T=c.slice(3*S,3*(S+1)),w=d[m+1],E=c.slice(3*w,3*(w+1));for(var D=0;D<3;++D)g[D]=E[D]-T[D];ot(g);var b=[0,0,0];if(lt(x,g,b),Bt(b)>.001){p=b,x=g;break}}if(m>=v){for(var O=0;O<3;++O)if(x[O]!==0){p[(O+2)%3]=0,p[(O+1)%3]=1,p[O]=-x[(O+1)%3]/x[O];break}}}ot(p);for(var M=0;++m<v&&(m=r(c,d,m),m!==v);){S=d[m],T=c.slice(3*S,3*(S+1)),w=d[m+1],E=c.slice(3*w,3*(w+1));for(var R=0;R<3;++R)g[R]=E[R]-T[R];ot(g);var N=[0,0,0];if(lt(x,p,N),ot(N)!==0){var U=[0,0,0];if(lt(g,x,U),ot(U)!==0){var W=_e(U,p),I=1-W*W;I>0?I=Math.sqrt(I):I=0;for(var G=[0,0,0],F=0;F<3;++F)G[F]=g[F]+x[F];ot(G),lt(G,U,N),lt(x,U,G),_e(p,G)*_e(N,G)<0&&(I*=-1);for(var A=M;A<m;++A)f.setTuple(d[A],p);M=m,x=g,p=W*U+I*N}}}for(var H=M;H<v;++H)f.setTuple(d[H],p)})();else for(var C=0;C<v;++C)f.setTuple(d[C],p)}return 1}function i(c,u,f,l,p,h,v,y,m,x,g,d,C,S){for(var T=[0,0,0],w=[0,0,0],E=[0,0,0],D=[0,0,0],b=[0,0,0],O=[0,0,0],M=[0,0,0],R=[0,0,0],N=[0,0,0],U=[0,0,0],W=[0,0,0],I=1,G=c,F=[],A=0;A<u;++A){if(A===0){b=l.slice(3*f[0],3*(f[0]+1)),O=l.slice(3*f[1],3*(f[1]+1));for(var H=0;H<3;++H)T[H]=O[H]-b[H],w[H]=T[H],E[H]=-w[H];ot(E)}else if(A===u-1){for(var $=0;$<3;++$)w[$]=T[$],b[$]=O[$],D[$]=T[$];ot(D)}else{for(var X=0;X<3;++X)b[X]=O[X];O=l.slice(3*f[A+1],3*(f[A+1]+1));for(var Y=0;Y<3;++Y)w[Y]=T[Y],T[Y]=O[Y]-b[Y]}if(ot(T)===0)return oi("Coincident points!"),0;for(var q=0;q<3;++q)M[q]=(w[q]+T[q])/2;if(R=C.slice(3*f[A],3*(f[A]+1)),ot(M)===0&&(lt(w,R,M),ot(M)===0&&vT("Using alternate bevel vector")),lt(M,R,N),ot(N)===0){var J="Bad normal: s = ";return J+="".concat(M[0],",  ").concat(M[1],", ").concat(M[2]),J+=" n = ".concat(R[0],",  ").concat(R[1],", ").concat(R[2]),oi(J),0}if(lt(N,M,U),ot(U),m&&e.varyRadius===ii.VARY_RADIUS_BY_SCALAR)I=1+(e.radiusFactor-1)*(m.getComponent(f[A],0)-x[0])/(x[1]-x[0]);else if(g&&e.varyRadius===ii.VARY_RADIUS_BY_VECTOR)I=Math.sqrt(d/Bt(g.getTuple(f[A],F))),I>e.radiusFactor&&(I=e.radiusFactor);else if(m&&e.varyRadius===ii.VARY_RADIUS_BY_ABSOLUTE_SCALAR&&(I=m.getComponent(f[A],0),I<0))return oi("Scalar value less than zero, skipping line"),0;if(e.sidesShareVertices)for(var ne=0;ne<e.numberOfSides;++ne){for(var Q=0;Q<3;++Q)W[Q]=N[Q]*Math.cos(ne*S)+U[Q]*Math.sin(ne*S),M[Q]=b[Q]+e.radius*I*W[Q],p[3*G+Q]=M[Q],y[3*G+Q]=W[Q];v.passData(h,f[A],G),G++}else for(var te=[0,0,0],L=[0,0,0],_=0;_<e.numberOfSides;++_){for(var V=0;V<3;++V)W[V]=N[V]*Math.cos(_*S)+U[V]*Math.sin(_*S),te[V]=N[V]*Math.cos((_-.5)*S)+U[V]*Math.sin((_-.5)*S),L[V]=N[V]*Math.cos((_+.5)*S)+U[V]*Math.sin((_+.5)*S),M[V]=b[V]+e.radius*I*W[V],p[3*G+V]=M[V],y[3*G+V]=te[V],p[3*(G+1)+V]=M[V],y[3*(G+1)+V]=L[V];v.passData(h,f[A],G+1),G+=2}}if(e.capping){var k=e.numberOfSides,P=1;e.sidesShareVertices||(k=2*e.numberOfSides,P=2);for(var j=0;j<k;j+=P){M=p.slice(3*(c+j),3*(c+j+1));for(var z=0;z<3;++z)p[3*G+z]=M[z],y[3*G+z]=E[z];v.passData(h,f[0],G),G++}var Z=c+(u-1)*e.numberOfSides;e.sidesShareVertices||(Z=c+2*(u-1)*e.numberOfSides);for(var re=0;re<k;re+=P){M=p.slice(3*(Z+re),3*(Z+re+1));for(var ie=0;ie<3;++ie)p[3*G+ie]=M[ie],y[3*G+ie]=D[ie];v.passData(h,f[u-1],G),G++}}return 1}function o(c,u,f,l,p,h,v){for(var y=0,m=0,x=0,g=l,d=0,C=v.getData(),S=0;d<C.length&&S!==l;)d+=C[d]+1,S++;if(e.sidesShareVertices)for(var T=c;T<e.numberOfSides+c;T+=e.onRatio){y=T%e.numberOfSides,m=(T+1)%e.numberOfSides,C[d++]=u*2;for(var w=0;w<u;++w)x=w*e.numberOfSides,C[d++]=c+m+x,C[d++]=c+y+x;h.passData(p,f,g++)}else for(var E=c;E<e.numberOfSides+c;E+=e.onRatio){y=2*(E%e.numberOfSides)+1,m=2*((E+1)%e.numberOfSides),C[d]=u*2,d++;for(var D=0;D<u;++D)x=D*2*e.numberOfSides,C[d++]=c+m+x,C[d++]=c+y+x;h.passData(p,f,g++)}if(e.capping){var b=c+u*e.numberOfSides,O=0;e.sidesShareVertices||(b=c+2*u*e.numberOfSides),C[d++]=e.numberOfSides,C[d++]=b,C[d++]=b+1;var M=0;for(y=e.numberOfSides-1,m=2,M=0;M<e.numberOfSides-2;++M)M%2?(O=b+m,C[d++]=O,m++):(O=b+y,C[d++]=O,y--);for(h.passData(p,f,g++),b+=e.numberOfSides,C[d++]=e.numberOfSides,C[d++]=b,C[d++]=b+e.numberOfSides-1,y=e.numberOfSides-2,m=1,M=0;M<e.numberOfSides-2;++M)M%2?(O=b+y,C[d++]=O,y--):(O=b+m,C[d++]=O,m++);h.passData(p,f,g++)}return g}function s(c,u,f,l,p,h){var v=e.numberOfSides;e.sidesShareVertices||(v=2*e.numberOfSides);var y=0,m=0,x=0,g=p.getData();if(e.generateTCoords===Mn.TCOORDS_FROM_SCALARS){m=g[f[0]];for(var d=0;d<u;++d){x=g[f[d]],y=(x-m)/e.textureLength;for(var C=0;C<v;++C){var S=C/(v-1),T=2*(c+d*v+C);h[T]=y,h[T+1]=S}}}else if(e.generateTCoords===Mn.TCOORDS_FROM_LENGTH)for(var w=0,E=l.slice(3*f[0],3*(f[0]+1)),D=0;D<u;++D){var b=l.slice(3*f[D],3*(f[D]+1));w+=Math.sqrt(Ut(b,E)),y=w/e.textureLength;for(var O=0;O<v;++O){var M=O/(v-1),R=2*(c+D*v+O);h[R]=y,h[R+1]=M}for(var N=0;N<3;++N)E[N]=b[N]}else if(e.generateTCoords===Mn.TCOORDS_FROM_NORMALIZED_LENGTH){for(var U=0,W=0,I=l.slice(3*f[0],3*(f[0]+1)),G=0;G<u;++G){var F=l.slice(3*f[G],3*(f[G]+1));W+=Math.sqrt(Ut(F,I));for(var A=0;A<3;++A)I[A]=F[A]}I=l.slice(3*f[0],3*(f[0]+1));for(var H=0;H<u;++H){var $=l.slice(3*f[H],3*(f[H]+1));U+=Math.sqrt(Ut($,I)),y=U/W;for(var X=0;X<v;++X){var Y=X/(v-1),q=2*(c+H*v+X);h[q]=y,h[q+1]=Y}for(var J=0;J<3;++J)I[J]=$[J]}}if(e.capping){for(var ne=c+u*v,Q=0;Q<e.numberOfSides;++Q){var te=2*(ne+Q);h[te]=0,h[te+1]=0}for(var L=0;L<e.numberOfSides;++L){var _=2*(ne+e.numberOfSides+L);h[_]=0,h[_+1]=0}}}t.requestData=function(c,u){var f=Ye.newInstance();u[0]=f;var l=c[0];if(!l){gT("Invalid or missing input");return}var p=l.getPoints();if(p){var h=p.getNumberOfPoints();if(!(h<1)){var v=l.getLines();if(v){var y=v.getNumberOfCells();if(!(y<1)){for(var m=0,x=0,g=v.getData(),d=g[0],C=0;C<g.length;C+=d+1)d=g[C],m=n(m,d),x+=(2*d+1)*Math.ceil(e.numberOfSides/e.onRatio),e.capping&&(x+=2*(e.numberOfSides+1));var S=p.getDataType();e.outputPointsPrecision===vn.SINGLE?S=He.FLOAT:e.outputPointsPrecision===vn.DOUBLE&&(S=He.DOUBLE);var T=Sr.newInstance({dataType:S,size:m*3,numberOfComponents:3}),w=3*m,E=new Float32Array(w),D=de.newInstance({numberOfComponents:3,values:E,name:"TubeNormals"}),b=new Uint32Array(x),O=Kn.newInstance({values:b}),M=0,R=l.getPointData().getNormals(),N=null,U=!1;(!R||e.useDefaultNormal)&&(N=new Float32Array(3*h),R=de.newInstance({numberOfComponents:3,values:N,name:"Normals"}),e.useDefaultNormal?N=N.map(function(re,ie){var oe=ie%3;return e.defaultNormal[oe]}):U=!0);for(var W=l.getPointData().getNumberOfArrays(),I=null,G=null,F=0;F<W;F++)I=l.getPointData().getArrayByIndex(F),G=de.newInstance({name:I.getName(),dataType:I.getDataType(),numberOfComponents:I.getNumberOfComponents(),size:m*I.getNumberOfComponents()}),f.getPointData().removeArrayByIndex(0),f.getPointData().addArray(G);var A=v.getNumberOfCells()*e.numberOfSides;e.capping&&(A+=2);for(var H=l.getCellData().getNumberOfArrays(),$=0;$<H;$++)I=l.getCellData().getArrayByIndex($),G=de.newInstance({name:I.getName(),dataType:I.getDataType(),numberOfComponents:I.getNumberOfComponents(),size:A*I.getNumberOfComponents()}),f.getCellData().removeArrayByIndex(0),f.getCellData().addArray(G);var X=t.getInputArrayToProcess(0),Y=null,q=[];X&&(Y=de.newInstance({name:X.getName(),dataType:X.getDataType(),numberOfComponents:X.getNumberOfComponents(),size:m*X.getNumberOfComponents()}),q=X.getRange(),q[1]-q[0]===0&&(e.varyRadius===ii.VARY_RADIUS_BY_SCALAR&&oi("Scalar range is zero!"),q[1]=q[0]+1));var J=t.getInputArrayToProcess(1),ne=0;J&&(ne=J.getMaxNorm());var Q=f.getCellData();Q.copyNormalsOff(),Q.passData(l.getCellData());var te=f.getPointData();te.getNormals()!==null&&te.copyNormalsOff(),X&&Y&&te.setScalars(Y);var L=null;if(e.generateTCoords===Mn.TCOORDS_FROM_SCALARS&&X||e.generateTCoords===Mn.TCOORDS_FROM_LENGTH||e.generateTCoords===Mn.TCOORDS_FROM_NORMALIZED_LENGTH){var _=new Float32Array(2*m);L=de.newInstance({numberOfComponents:2,values:_,name:"TCoords"}),te.copyTCoordsOff()}te.passData(l.getPointData());var V=2*Math.PI/e.numberOfSides;d=g[0];for(var k=0,P=l.getVerts().getNumberOfCells(),j=0;j<g.length;j+=d+1){d=g[j];var z=g.slice(j+1,j+1+d);if(d>1&&U){var Z=g.slice(j,j+d+1);a(p.getData(),Z,R)}i(k,d,z,p.getData(),T.getData(),l.getPointData(),te,E,X,q,J,ne,N,V)?(M=o(k,d,P,M,l.getCellData(),Q,O),L&&s(k,d,z,p.getData(),X,L.getData())):oi("Could not generate points"),k=n(k,d),P++}f.setPoints(T),f.setStrips(O),f.setPointData(te),te.setNormals(D),u[0]=f}}}}}}var yT={outputPointsPrecision:vn.DEFAULT,radius:.5,varyRadius:ii.VARY_RADIUS_OFF,numberOfSides:3,radiusFactor:10,defaultNormal:[0,0,1],useDefaultNormal:!1,sidesShareVertices:!0,capping:!1,onRatio:1,offset:0,generateTCoords:Mn.TCOORDS_OFF,textureLength:1};function mT(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,yT,n),B.setGet(t,e,["outputPointsPrecision","radius","varyRadius","numberOfSides","radiusFactor","defaultNormal","useDefaultNormal","sidesShareVertices","capping","onRatio","offset","generateTCoords","textureLength"]),B.obj(t,e),B.algo(t,e,1,1),dT(t,e)}B.newInstance(mT,"vtkTubeFilter");function _h(t){var e=new TextDecoder("latin1");return e.decode(t)}function xT(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=_h(t),a=e.exec(r);if(!a)return{text:r};var i=a.index+a[0].length,o=r.substring(0,i),s=null,c=n?n.exec(r):null;if(c){var u=r.substr(c.index);s={text:o+u,binaryBuffer:t.slice(i,c.index)}}else s={text:o,binaryBuffer:t.slice(i)};return s}var si={arrayBufferToString:_h,extractBinary:xT},bh=B.vtkErrorMacro,CT=B.vtkDebugMacro,cu=function(){return bh("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead."),Promise.reject(new Error("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead."))},oa=0;function Fo(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=new XMLHttpRequest;return r.open(t,e,!0),n.headers&&Object.entries(n.headers).forEach(function(a){var i=ze(a,2),o=i[0],s=i[1];return r.setRequestHeader(o,s)}),n.progressCallback&&r.addEventListener("progress",n.progressCallback),r}function ST(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(n,r){var a=Fo("GET",t,e);a.onreadystatechange=function(i){a.readyState===4&&(a.status===200||a.status===0?n(a.response):r({xhr:a,e:i}))},a.responseType="arraybuffer",a.send()})}function TT(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return r&&r.compression?cu():n.ref&&!n.ref.pending?new Promise(function(a,i){var o=[e,n.ref.basepath,n.ref.id].join("/"),s=Fo("GET",o,r);s.onreadystatechange=function(c){s.readyState===1&&(n.ref.pending=!0,++oa===1&&t!==null&&t!==void 0&&t.invokeBusy&&t.invokeBusy(!0)),s.readyState===4&&(n.ref.pending=!1,s.status===200||s.status===0?(n.buffer=s.response,n.ref.encode==="JSON"?n.values=JSON.parse(n.buffer):(br.ENDIANNESS!==n.ref.encode&&br.ENDIANNESS&&(CT("Swap bytes of ".concat(n.name)),br.swapBytes(n.buffer,ao[n.dataType])),n.values=B.newTypedArray(n.dataType,n.buffer)),n.values.length!==n.size&&bh("Error in FetchArray: ".concat(n.name,", does not have the proper array size. Got ").concat(n.values.length,", instead of ").concat(n.size)),delete n.ref,--oa===0&&t!==null&&t!==void 0&&t.invokeBusy&&t.invokeBusy(!1),t!=null&&t.modified&&t.modified(),a(n)):i({xhr:s,e:c}))},s.responseType=n.dataType!=="string"?"arraybuffer":"text",s.send()}):Promise.resolve(n)}function wT(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n&&n.compression?cu():new Promise(function(r,a){var i=Fo("GET",e,n);i.onreadystatechange=function(o){i.readyState===1&&++oa===1&&t!==null&&t!==void 0&&t.invokeBusy&&t.invokeBusy(!0),i.readyState===4&&(--oa===0&&t!==null&&t!==void 0&&t.invokeBusy&&t.invokeBusy(!1),i.status===200||i.status===0?r(JSON.parse(i.responseText)):a({xhr:i,e:o}))},i.responseType="text",i.send()})}function ET(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n&&n.compression?cu():new Promise(function(r,a){var i=Fo("GET",e,n);i.onreadystatechange=function(o){i.readyState===1&&++oa===1&&t!==null&&t!==void 0&&t.invokeBusy&&t.invokeBusy(!0),i.readyState===4&&(--oa===0&&t!==null&&t!==void 0&&t.invokeBusy&&t.invokeBusy(!1),i.status===200||i.status===0?r(i.responseText):a({xhr:i,e:o}))},i.responseType="text",i.send()})}function DT(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise(function(r,a){var i=new Image;n.crossOrigin&&(i.crossOrigin=n.crossOrigin),i.onload=function(){return r(i)},i.onerror=a,i.src=e})}var OT={fetchArray:TT,fetchJSON:wT,fetchText:ET,fetchBinary:ST,fetchImage:DT};Sh("http")||No("http",function(t){return OT});var fu={ASCII:"ascii",BINARY_BIG_ENDIAN:"binary_big_endian",BINARY_LITTLE_ENDIAN:"binary_little_endian"},Mh={diffuse_red:"red",diffuse_green:"green",diffuse_blue:"blue"},Nh={patternHeader:/ply([\s\S]*)end_header\r?\n/,patternBody:/end_header\s([\s\S]*)$/};function Rh(t){var e="",n=0,r=Nh.patternHeader.exec(t);r!==null&&(e=r[1],n=r[0].length);for(var a={comments:[],elements:[],headerLength:n},i=e.split(`
`),o,s,c,u=0;u<i.length;u++){var f=i[u];if(f=f.trim(),f!==""){var l=void 0;switch(c=f.split(/\s+/),s=c.shift(),f=c.join(" "),s){case"format":a.format=c[0],a.version=c[1];break;case"comment":a.comments.push(f);break;case"element":o!==void 0&&a.elements.push(o),o={},o.name=c[0],o.count=parseInt(c[1],10),o.properties=[];break;case"property":l={type:c[0]},l.type==="list"?(l.name=c[3],l.countType=c[1],l.itemType=c[2]):l.name=c[1],l.name in Mh&&(l.name=Mh[l.name]),o.properties.push(l);break;case"obj_info":a.objInfo=f;break;default:console.warn("unhandled",s,c);break}}}return o!==void 0&&a.elements.push(o),a}function Lh(t,e){var n=e.find(function(M){return M.name==="vertex"}),r=e.find(function(M){return M.name==="face"}),a=0,i=0;n&&(a=n.count),r&&(i=r.count);for(var o=new Float32Array(a*3),s=new Uint8Array(a*3),c=new Float32Array(a*2),u=new Float32Array(a*3),f=t.colors.length>0,l=t.uvs.length>0,p=t.normals.length>0,h=t.faceVertexUvs.length>0,v=0;v<a;v++){var y=v*3+0,m=v*3+1,x=v*3+2;o[y]=t.vertices[y],o[m]=t.vertices[m],o[x]=t.vertices[x],f&&(s[y]=t.colors[y],s[m]=t.colors[m],s[x]=t.colors[x]),l&&(y=v*2+0,m=v*2+1,c[y]=t.uvs[y],c[m]=t.uvs[m]),p&&(u[y]=t.normals[y],u[m]=t.normals[m],u[x]=t.normals[x])}if(!l&&h)for(var g=0,d=0,C=0;C<i;++C){var S=t.indices[g++],T=t.faceVertexUvs[d++];if(T&&S*2===T.length)for(var w=0;w<S;++w){var E=t.indices[g++];c[E*2+0]=T[w*2+0],c[E*2+1]=T[w*2+1]}else g+=S}var D=Ye.newInstance();if(D.getPoints().setData(o,3),f&&D.getPointData().setScalars(de.newInstance({numberOfComponents:3,values:s,name:"Scalars"})),l||h){var b=de.newInstance({numberOfComponents:2,values:c,name:"TextureCoordinates"}),O=D.getPointData();O.addArray(b),O.setActiveTCoords(b.getName())}return p&&D.getPointData().setNormals(de.newInstance({numberOfComponents:3,name:"Normals",values:u})),D.getPolys().setData(Uint32Array.from(t.indices)),D}function lu(t,e){var n;switch(e){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":n=parseInt(t,10);break;case"float":case"double":case"float32":case"float64":n=parseFloat(t);break;default:console.log("Unsupported type");break}return n}function _T(t,e){for(var n=e.split(/\s+/),r={},a=0;a<t.length;a++)if(t[a].type==="list"){for(var i=[],o=lu(n.shift(),t[a].countType),s=0;s<o;s++)i.push(lu(n.shift(),t[a].itemType));r[t[a].name]=i}else r[t[a].name]=lu(n.shift(),t[a].type);return r}function kh(t,e,n){if(e==="vertex")t.vertices.push(n.x,n.y,n.z),"nx"in n&&"ny"in n&&"nz"in n&&t.normals.push(n.nx,n.ny,n.nz),"s"in n&&"t"in n?t.uvs.push(n.s,n.t):"u"in n&&"v"in n?t.uvs.push(n.u,n.v):"texture_u"in n&&"texture_v"in n&&t.uvs.push(n.texture_u,n.texture_v),"red"in n&&"green"in n&&"blue"in n&&t.colors.push(n.red,n.green,n.blue);else if(e==="face"){var r=n.vertex_indices||n.vertex_index,a=n.texcoord;r&&r.length>0&&(t.indices.push(r.length),r.forEach(function(i,o){t.indices.push(i)})),t.faceVertexUvs.push(a)}}function pu(t,e,n,r){var a;switch(n){case"int8":case"char":a=[t.getInt8(e),1];break;case"uint8":case"uchar":a=[t.getUint8(e),1];break;case"int16":case"short":a=[t.getInt16(e,r),2];break;case"uint16":case"ushort":a=[t.getUint16(e,r),2];break;case"int32":case"int":a=[t.getInt32(e,r),4];break;case"uint32":case"uint":a=[t.getUint32(e,r),4];break;case"float32":case"float":a=[t.getFloat32(e,r),4];break;case"float64":case"double":a=[t.getFloat64(e,r),8];break;default:console.log("Unsupported type");break}return a}function bT(t,e,n,r){for(var a={},i,o=0,s=0;s<n.length;s++)if(n[s].type==="list"){var c=[];i=pu(t,e+o,n[s].countType,r);var u=i[0];o+=i[1];for(var f=0;f<u;f++)i=pu(t,e+o,n[s].itemType,r),c.push(i[0]),o+=i[1];a[n[s].name]=c}else i=pu(t,e+o,n[s].type,r),a[n[s].name]=i[0],o+=i[1];return[a,o]}function MT(t,e){e.classHierarchy.push("vtkPLYReader"),e.dataAccessHelper||(e.dataAccessHelper=ta.get("http"));function n(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.compression,o=e.progressCallback;return a.binary?e.dataAccessHelper.fetchBinary(r,{compression:i,progressCallback:o}):e.dataAccessHelper.fetchText(t,r,{compression:i,progressCallback:o})}t.setUrl=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{binary:!0};e.url=r;var i=r.split("/");return i.pop(),e.baseURL=i.join("/"),e.compression=a.compression,t.loadData({progressCallback:a.progressCallback,binary:!!a.binary})},t.loadData=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=n(e.url,r);return a.then(t.parse),a},t.parse=function(r){typeof r=="string"?t.parseAsText(r):t.parseAsArrayBuffer(r)},t.parseAsArrayBuffer=function(r){if(r){if(r!==e.parseData)t.modified();else return;var a=si.arrayBufferToString(r),i=Rh(a),o=i.format!==fu.ASCII;if(!o){t.parseAsText(r);return}e.parseData=r;for(var s={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},c=i.format===fu.BINARY_LITTLE_ENDIAN,u=r instanceof ArrayBuffer?r:r.buffer,f=new DataView(u,i.headerLength),l,p=0,h=0;h<i.elements.length;h++)for(var v=0;v<i.elements[h].count;v++){l=bT(f,p,i.elements[h].properties,c),p+=l[1];var y=l[0];kh(s,i.elements[h].name,y)}var m=Lh(s,i.elements);e.output[0]=m}},t.parseAsText=function(r){if(r){if(r!==e.parseData)t.modified();else return;e.parseData=r;var a=si.arrayBufferToString(r),i=Rh(a),o=i.format!==fu.ASCII;if(o){t.parseAsArrayBuffer(r);return}var s={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},c=Nh.patternBody.exec(a),u="";c!==null&&(u=c[1]);for(var f=u.split(`
`),l=0,p=0,h=0;h<f.length;h++){var v=f[h];if(v=v.trim(),v!==""){p>=i.elements[l].count&&(l++,p=0);var y=_T(i.elements[l].properties,v);kh(s,i.elements[l].name,y),p++}}var m=Lh(s,i.elements);e.output[0]=m}},t.requestData=function(r,a){t.parse(e.parseData)}}var NT={};function RT(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,NT,n),B.obj(t,e),B.get(t,e,["url","baseURL"]),B.setGet(t,e,["dataAccessHelper"]),B.algo(t,e,0,1),MT(t,e),e.compression||(e.compression=null),e.progressCallback||(e.progressCallback=null)}B.newInstance(RT,"vtkPLYReader");var hu=B.vtkErrorMacro;function LT(t){for(var e=t.split(" "),n=e.filter(function(s){return s.indexOf("=")>-1}),r={},a=0;a<n.length;++a){var i=n[a],o=i.split("=");o.length===2&&(r[o[0]]=o[1])}return r}function Fh(t,e){for(var n=0;n<t.length;n++)e.push(t[n])}function kT(t,e,n,r,a){var i=t[e];if(i===void 0)return-1;if(i.indexOf("endfacet")!==-1||i.indexOf("facet")===-1)return e+1;var o=0,s=2,c=n.length/3,u=i.split(/[ \t]+/).filter(function(h){return h}).slice(-3).map(Number);for(Fh(u,a);t[e+s].indexOf("vertex")!==-1;){var f=t[e+s],l=f.split(/[ \t]+/).filter(function(h){return h}).slice(-3).map(Number);Fh(l,n),o++,s++}r.push(o);for(var p=0;p<o;p++)r.push(c+p);for(;t[e+s]&&t[e+s].indexOf("endfacet")!==-1;)s++;return e+s+2}function FT(t,e){e.classHierarchy.push("vtkSTLReader"),e.dataAccessHelper||(e.dataAccessHelper=ta.get("http"));function n(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.compression!==void 0?a.compression:e.compression,o=a.progressCallback!==void 0?a.progressCallback:e.progressCallback;return a.binary?e.dataAccessHelper.fetchBinary(r,{compression:i,progressCallback:o}):e.dataAccessHelper.fetchText(t,r,{compression:i,progressCallback:o})}t.setUrl=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{binary:!0};e.url=r;var i=r.split("/");return i.pop(),e.baseURL=i.join("/"),t.loadData(a)},t.loadData=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=n(e.url,r);return a.then(t.parse),a},t.parse=function(r){typeof r=="string"?t.parseAsText(r):t.parseAsArrayBuffer(r)},t.parseAsArrayBuffer=function(r){if(r){if(r!==e.parseData)t.modified();else return;e.parseData=r;var a=!1,i=new DataView(r,0,80+4),o=i.getUint32(80,!0);if(a=84+o*50===r.byteLength,!a){t.parseAsText(si.arrayBufferToString(r));return}for(var s=r.slice(0,80),c=si.arrayBufferToString(s),u=LT(c),f=new DataView(r,84),l=(r.byteLength-84)/50,p=new Float32Array(l*9),h=new Float32Array(l*3),v=new Uint32Array(l*4),y=new Uint16Array(l),m=0,x=0;x<l;x++){var g=x*50;h[x*3+0]=f.getFloat32(g+0,!0),h[x*3+1]=f.getFloat32(g+4,!0),h[x*3+2]=f.getFloat32(g+8,!0),p[x*9+0]=f.getFloat32(g+12,!0),p[x*9+1]=f.getFloat32(g+16,!0),p[x*9+2]=f.getFloat32(g+20,!0),p[x*9+3]=f.getFloat32(g+24,!0),p[x*9+4]=f.getFloat32(g+28,!0),p[x*9+5]=f.getFloat32(g+32,!0),p[x*9+6]=f.getFloat32(g+36,!0),p[x*9+7]=f.getFloat32(g+40,!0),p[x*9+8]=f.getFloat32(g+44,!0),v[m++]=3,v[m++]=x*3+0,v[m++]=x*3+1,v[m++]=x*3+2,y[x]=f.getUint16(g+48,!0)}var d="SPACE";if(d in u&&u[d]!=="LPS"){var C=u[d],S=new Float32Array(16);switch(S[15]=1,C[0]){case"L":S[0]=1;break;case"R":S[0]=-1;break;default:hu("Can not convert STL file from ".concat(C," to LPS space: ")+"permutations not supported. Use itk.js STL reader instead.");return}switch(C[1]){case"P":S[5]=1;break;case"A":S[5]=-1;break;default:hu("Can not convert STL file from ".concat(C," to LPS space: ")+"permutations not supported. Use itk.js STL reader instead.");return}switch(C[2]){case"S":S[10]=1;break;case"I":S[10]=-1;break;default:hu("Can not convert STL file from ".concat(C," to LPS space: ")+"permutations not supported. Use itk.js STL reader instead.");return}kt.buildFromDegree().setMatrix(S).apply(p).apply(h)}var T=Ye.newInstance();T.getPoints().setData(p,3),T.getPolys().setData(v),T.getCellData().setScalars(de.newInstance({name:"Attribute",values:y})),T.getCellData().setNormals(de.newInstance({name:"Normals",values:h,numberOfComponents:3})),e.output[0]=T}},t.parseAsText=function(r){if(r){if(r!==e.parseData)t.modified();else return;e.parseData=r;for(var a=r.split(`
`),i=1,o=[],s=[],c=[];i!==-1;)i=kT(a,i,o,s,c);var u=Ye.newInstance();u.getPoints().setData(Float32Array.from(o),3),u.getPolys().setData(Uint32Array.from(s)),u.getCellData().setNormals(de.newInstance({name:"Normals",values:Float32Array.from(c),numberOfComponents:3})),e.output[0]=u}},t.requestData=function(r,a){t.parse(e.parseData)}}var AT={};function VT(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,AT,n),B.obj(t,e),B.get(t,e,["url","baseURL"]),B.setGet(t,e,["dataAccessHelper"]),B.algo(t,e,0,1),FT(t,e),e.compression||(e.compression=null),e.progressCallback||(e.progressCallback=null)}B.newInstance(VT,"vtkSTLReader");function BT(t,e){e.classHierarchy.push("vtkElevationReader"),e.dataAccessHelper||(e.dataAccessHelper=ta.get("http"));function n(r,a){return e.dataAccessHelper.fetchText(t,r,a)}t.setUrl=function(r,a){return e.url=r,t.loadData(a)},t.loadData=function(r){return n(e.url,r).then(function(a){return t.parseAsText(a),!0})},t.parseAsText=function(r){e.csv=r,e.elevation=[];var a=e.csv.split(`
`);a.forEach(function(i,o){e.elevation.push(i.split(",").map(function(s){return Number(s)}))}),t.modified()},t.requestData=function(r,a){var i=Ye.newInstance();if(i.getPoints().setData(new Float32Array(0,0,0,1,1,1),3),e.elevation){var o=e.elevation.length,s=e.elevation[0].length,c=i.getPoints();c.setNumberOfPoints(s*o,3);var u=c.getData(),f=Kn.newInstance({size:5*(s-1)*(o-1)});i.setPolys(f);var l=f.getData(),p=0,h=new Float32Array(s*o*2),v=de.newInstance({numberOfComponents:2,values:h,name:"TextureCoordinates"});i.getPointData().setTCoords(v);for(var y=0;y<o;y++)for(var m=0;m<s;m++){var x=y*s+m,g=3*x;u[g+0]=e.origin[0]+m*e.xSpacing*e.xDirection,u[g+1]=e.origin[1]+y*e.ySpacing*e.yDirection,u[g+2]=e.origin[2]+e.elevation[y][m]*e.zScaling,h[x*2]=m/(s-1),h[x*2+1]=1-y/(o-1),m>0&&y>0&&(l[p++]=4,l[p++]=x,l[p++]=x-1,l[p++]=x-1-s,l[p++]=x-s)}}e.output[0]=i},t.isBusy=function(){return!!e.requestCount}}var UT={origin:[0,0,0],xSpacing:1,ySpacing:1,zScaling:1,xDirection:1,yDirection:-1,requestCount:0};function GT(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,UT,n),B.obj(t,e),B.get(t,e,["url"]),B.setGet(t,e,["dataAccessHelper","xSpacing","ySpacing","zScaling","xDirection","yDirection"]),B.algo(t,e,0,1),B.event(t,e,"busy"),BT(t,e)}B.newInstance(GT,"vtkElevationReader");function Ah(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function PT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ah(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ah(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Le={};function vu(t,e,n,r,a){for(var i=0;i<a;i++)n[r+i]=t[e+i]}function IT(t){Le.splitOn=t,Le.pieces=[],Le.v=[],Le.vt=[],Le.vn=[],Le.f=[[]],Le.size=0}function jT(t){var e=t.split("/").map(function(i){return Number(i)}),n=e[0]-1,r=e[1]?e[1]-1:n,a=e[2]?e[2]-1:n;return[n,r,a]}function zT(t){if(t[0]!=="#"){var e=t.split(/[ \t]+/);if(e[0]===Le.splitOn)e.shift(),Le.pieces.push(e.join(" ").trim()),Le.f.push([]),Le.size++;else if(e[0]==="v")Le.v.push(Number(e[1])),Le.v.push(Number(e[2])),Le.v.push(Number(e[3]));else if(e[0]==="vt")Le.vt.push(Number(e[1])),Le.vt.push(Number(e[2]));else if(e[0]==="vn")Le.vn.push(Number(e[1])),Le.vn.push(Number(e[2])),Le.vn.push(Number(e[3]));else if(e[0]==="f"){Le.size===0&&Le.size++;var n=Le.f[Le.size-1];e.shift();var r=e.filter(function(o){return o.length>0&&o!=="\r"}),a=r.length;n.push(a);for(var i=0;i<a;i++)n.push(jT(r[i]))}}}function WT(t){var e=!!Le.vt.length,n=!!Le.vn.length;if(t.splitMode){t.numberOfOutputs=Le.size;for(var r=0;r<Le.size;r++){var a=Le.f[r],i=a.length,o=Le.v.length/3,s={},c=void 0;if(t.trackDuplicates){for(var u=[],f=0,l=0;l<i;)for(var p=a[l++],h=0;h<p;h++){var v=ze(a[l++],3),y=v[0],m=v[1],x=v[2],g="".concat(y,"/").concat(m,"/").concat(x);s[g]===void 0&&(u[y]===void 0?u[y]=[g]:(u[y].push(g),++f),s[g]=y)}c=new Uint16Array(o+f);for(var d=0,C=0;C<u.length;++C){var S=u[C]?u[C].length:0;c[C]=S>1?o+d:C;for(var T=1;T<S;++T){var w=o+d++;c[w]=C,s[u[C][T]]=w}}}for(var E={},D=Ye.newInstance({name:Le.pieces[r]}),b=[],O=[],M=[],R=[],N=0;N<i;){var U=a[N];R.push(U);for(var W=0;W<U;W++){var I=ze(a[N+W+1],3),G=I[0],F=I[1],A=I[2],H="".concat(G,"/").concat(F,"/").concat(A);if(E[H]===void 0){var $=t.trackDuplicates?s[H]:b.length/3;E[H]=$,vu(Le.v,G*3,b,$*3,3),e&&vu(Le.vt,F*2,O,$*2,2),n&&vu(Le.vn,A*3,M,$*3,3)}R.push(E[H])}N+=U+1}if(D.getPoints().setData(Float32Array.from(b),3),t.trackDuplicates){var X=de.newInstance({name:"Duplicates",values:c});D.getPointData().addArray(X)}if(D.getPolys().setData(Uint32Array.from(R)),e){var Y=de.newInstance({numberOfComponents:2,values:Float32Array.from(O),name:"TextureCoordinates"});D.getPointData().setTCoords(Y)}if(n){var q=de.newInstance({numberOfComponents:3,values:Float32Array.from(M),name:"Normals"});D.getPointData().setNormals(q)}t.output[r]=D}}else{t.numberOfOutputs=1;var J=Ye.newInstance();if(J.getPoints().setData(Float32Array.from(Le.v),3),e&&Le.v.length/3===Le.vt.length/2){var ne=de.newInstance({numberOfComponents:2,values:Float32Array.from(Le.vt),name:"TextureCoordinates"});J.getPointData().setTCoords(ne)}if(n&&Le.v.length===Le.vn.length){var Q=de.newInstance({numberOfComponents:3,values:Float32Array.from(Le.vn),name:"Normals"});J.getPointData().setNormals(Q)}for(var te=[],L=Le.f[0],_=L.length,V=0;V<_;){var k=L[V];te.push(k);for(var P=0;P<k;P++){var j=ze(L[V+P+1],1),z=j[0];te.push(z)}V+=k+1}J.getPolys().setData(Uint32Array.from(te)),t.output[0]=J}}function HT(t,e){var n=[],r=t.getPointData().getArrayByName("Duplicates");if(r==null)return n;var a=r.getData(),i=Math.min(e,a[e]);n.push(i);var o=a[i];if(o!==i)for(;o<a.length&&a[o]===i;)n.push(o++);return n}var $T={getPointDuplicateIds:HT};function KT(t,e){e.classHierarchy.push("vtkOBJReader"),e.dataAccessHelper||(e.dataAccessHelper=ta.get("http"));function n(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.dataAccessHelper.fetchText(t,r,a)}t.setUrl=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r.indexOf(".obj")===-1&&!a.fullpath)e.baseURL=r,e.url="".concat(r,"/index.obj");else{e.url=r;var i=r.split("/");i.pop(),e.baseURL=i.join("/")}return t.loadData(a)},t.loadData=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return n(e.url,r).then(function(a){return t.isDeleted()?!1:t.parseAsText(a)})},t.parseAsText=function(r){return r&&(r!==e.parseData&&t.modified(),e.parseData=r,e.numberOfOutputs=0,IT(e.splitMode),r.split(`
`).forEach(zT),WT(e)),!0},t.requestData=function(r,a){t.parseAsText(e.parseData)},t.isBusy=function(){return!!e.requestCount},t.getNumberOfOutputPorts=function(){return e.numberOfOutputs}}var XT={numberOfOutputs:1,requestCount:0,splitMode:null,trackDuplicates:!1};function Vh(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,XT,n),B.obj(t,e),B.get(t,e,["url","baseURL"]),B.setGet(t,e,["dataAccessHelper","splitMode","trackDuplicates"]),B.algo(t,e,0,1),B.event(t,e,"busy"),KT(t,e)}var qT=B.newInstance(Vh,"vtkOBJReader");PT({newInstance:qT,extend:Vh},$T);var YT=["chemical json","name","inchi","formula","atoms","bonds","properties"];function JT(t,e){e.classHierarchy.push("vtkMolecule")}var ZT={"chemical json":0,name:"",inchi:"",formula:"",atoms:null,bonds:null,properties:null};function Bh(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ZT,n),B.obj(t,e),e.atoms||(e.atoms={}),e.bonds||(e.bonds={}),e.properties||(e.properties={}),B.setGet(t,e,YT),JT(t,e)}var QT=B.newInstance(Bh,"vtkMolecule"),ew={newInstance:QT,extend:Bh},tw=[1],rw=[2],nw=[3],aw=[4],iw=[5],ow=[6],sw=[7],uw=[8],cw=[9],fw=[10],lw=[11],pw=[12],hw=[13],vw=[14],gw=[15],dw=[16],yw=[17],mw=[18],xw=[19],Cw=[20],Sw=[21],Tw=[22],ww=[23],Ew=[24],Dw=[25],Ow=[26],_w=[27],bw=[28],Mw=[29],Nw=[30],Rw=[31],Lw=[32],kw=[33],Fw=[34],Aw=[35],Vw=[36],Bw=[37],Uw=[38],Gw=[39],Pw=[40],Iw=[41],jw=[42],zw=[43],Ww=[44],Hw=[45],$w=[46],Kw=[47],Xw=[48],qw=[49],Yw=[50],Jw=[51],Zw=[52],Qw=[53],eE=[54],tE=[55],rE=[56],nE=[57],aE=[58],iE=[59],oE=[60],sE=[61],uE=[62],cE=[63],fE=[64],lE=[65],pE=[66],hE=[67],vE=[68],gE=[69],dE=[70],yE=[71],mE=[72],xE=[73],CE=[74],SE=[75],TE=[76],wE=[77],EE=[78],DE=[79],OE=[80],_E=[81],bE=[82],ME=[83],NE=[84],RE=[85],LE=[86],kE=[87],FE=[88],AE=[89],VE=[90],BE=[91],UE=[92],GE=[93],PE=[94],IE=[95],jE=[96],zE=[97],WE=[98],HE=[99],$E=[100],KE=[101],XE=[102],qE=[103],YE=[104],JE=[105],ZE=[106],QE=[107],eD=[108],tD=[109],rD=[110],nD=[111],aD=[112],iD=[113],oD=[114],sD=[115],uD=[116],cD=[117],fD=[118],lD={H:tw,He:rw,Li:nw,Be:aw,B:iw,C:ow,N:sw,O:uw,F:cw,Ne:fw,Na:lw,Mg:pw,Al:hw,Si:vw,P:gw,S:dw,Cl:yw,Ar:mw,K:xw,Ca:Cw,Sc:Sw,Ti:Tw,V:ww,Cr:Ew,Mn:Dw,Fe:Ow,Co:_w,Ni:bw,Cu:Mw,Zn:Nw,Ga:Rw,Ge:Lw,As:kw,Se:Fw,Br:Aw,Kr:Vw,Rb:Bw,Sr:Uw,Y:Gw,Zr:Pw,Nb:Iw,Mo:jw,Tc:zw,Ru:Ww,Rh:Hw,Pd:$w,Ag:Kw,Cd:Xw,In:qw,Sn:Yw,Sb:Jw,Te:Zw,I:Qw,Xe:eE,Cs:tE,Ba:rE,La:nE,Ce:aE,Pr:iE,Nd:oE,Pm:sE,Sm:uE,Eu:cE,Gd:fE,Tb:lE,Dy:pE,Ho:hE,Er:vE,Tm:gE,Yb:dE,Lu:yE,Hf:mE,Ta:xE,W:CE,Re:SE,Os:TE,Ir:wE,Pt:EE,Au:DE,Hg:OE,Tl:_E,Pb:bE,Bi:ME,Po:NE,At:RE,Rn:LE,Fr:kE,Ra:FE,Ac:AE,Th:VE,Pa:BE,U:UE,Np:GE,Pu:PE,Am:IE,Cm:jE,Bk:zE,Cf:WE,Es:HE,Fm:$E,Md:KE,No:XE,Lr:qE,Rf:YE,Db:JE,Sg:ZE,Bh:QE,Hs:eD,Mt:tD,Ds:rD,Rg:nD,Cn:aD,Uut:iD,Uuq:oD,Uup:sD,Uuh:uD,Uus:cD,Uuo:fD};function pD(t,e){e.classHierarchy.push("vtkPDBReader"),e.dataAccessHelper||(e.dataAccessHelper=ta.get("http"));function n(r,a){return e.dataAccessHelper.fetchText(t,r,a)}t.setUrl=function(r,a){if(r.indexOf(".pdb")===-1)e.baseURL=r,e.url="".concat(r);else{e.url=r;var i=r.split("/");i.pop(),e.baseURL=i.join("/")}return t.loadData(a)},t.loadData=function(r){return n(e.url,r).then(t.parseAsText)},t.parseAsText=function(r){return e.pdb=r,e.molecule=[],e.molecule=e.pdb.split(`
`),t.modified(),!0},t.requestData=function(r,a){var i=ew.newInstance();if(e.molecule){var o=e.molecule.length,s=[],c=[];e.numberOfAtoms=0;for(var u=0;u<o&&e.molecule[u]!=="END";){var f=e.molecule[u].length,l=e.molecule[u],p=l.substr(0,6).replace(/\s+/g,"");if(p.toUpperCase(),p==="ATOM"||p==="HETATM"){var h=l.substr(12,4).replace(/\s+/g,""),v=l.substr(30,8).replace(/\s+/g,""),y=l.substr(38,8).replace(/\s+/g,""),m=l.substr(46,8).replace(/\s+/g,""),x="";f>=78&&(x=l.substr(76,2).replace(/\s+/g,"")),x===""&&(x=h.substr(0,2).replace(/\d/g,"")),s.push(v),s.push(y),s.push(m);var g=ze(lD[x],1),d=g[0];c.push(d),e.numberOfAtoms++}u++}i.getAtoms().elements={},i.getAtoms().elements.number=Int8Array.from(c),i.getAtoms().coords={},i.getAtoms().coords["3d"]=Float32Array.from(s)}e.output[0]=i},t.isBusy=function(){return!!e.requestCount}}var hD={numberOfAtoms:0,requestCount:0};function vD(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,hD,n),B.obj(t,e),B.get(t,e,["url","baseURL","numberOfAtoms","requestCount"]),B.setGet(t,e,["dataAccessHelper"]),B.algo(t,e,0,1),B.event(t,e,"busy"),pD(t,e)}B.newInstance(vD,"vtkPDBReader");var gu={},gD={get exports(){return gu},set exports(t){gu=t}};(function(t,e){(function(n,r){t.exports=r()})(At,function(){return function(n){var r={};function a(i){if(r[i])return r[i].exports;var o=r[i]={i,l:!1,exports:{}};return n[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=n,a.c=r,a.d=function(i,o,s){a.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:s})},a.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a.t=function(i,o){if(1&o&&(i=a(i)),8&o||4&o&&typeof i=="object"&&i&&i.__esModule)return i;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:i}),2&o&&typeof i!="string")for(var c in i)a.d(s,c,function(u){return i[u]}.bind(null,c));return s},a.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(o,"a",o),o},a.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},a.p="",a(a.s=184)}([function(n,r,a){function i(o){for(var s in o)r.hasOwnProperty(s)||(r[s]=o[s])}Object.defineProperty(r,"__esModule",{value:!0}),i(a(240)),i(a(251)),i(a(175)),i(a(107)),i(a(29)),i(a(73)),i(a(106)),i(a(30)),i(a(252)),i(a(52)),i(a(97)),i(a(253)),i(a(37)),i(a(51)),i(a(173)),i(a(176)),i(a(172)),i(a(108)),i(a(254)),i(a(255)),i(a(256)),i(a(72)),i(a(177)),i(a(105)),i(a(17)),i(a(257)),i(a(12)),i(a(174))},function(n,r,a){var i=this&&this.__values||function(d){var C=typeof Symbol=="function"&&Symbol.iterator,S=C&&d[C],T=0;if(S)return S.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&T>=d.length&&(d=void 0),{value:d&&d[T++],done:!d}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(212);r.FixedSizeSet=o.FixedSizeSet;var s=a(213);r.ObjectCache=s.ObjectCache;var c=a(214);r.CompareCache=c.CompareCache;var u=a(215);r.Lazy=u.Lazy;var f=a(216);function l(d,C,S){if(x(d))d.forEach(function(w,E){return C.call(S,E,w)});else for(var T in d)d.hasOwnProperty(T)&&C.call(S,T,d[T])}function p(d){var C,S;if(h(d))return d;if(y(d)){var T=[];try{for(var w=i(d),E=w.next();!E.done;E=w.next()){var D=E.value;T.push(p(D))}}catch(M){C={error:M}}finally{try{E&&!E.done&&(S=w.return)&&S.call(w)}finally{if(C)throw C.error}}return T}if(v(d)){T={};for(var b in d)if(d.hasOwnProperty(b)){var O=d[b];T[b]=p(O)}return T}return d}function h(d){return!!d&&Object.prototype.toString.call(d)==="[object Function]"}function v(d){var C=typeof d;return!!d&&(C==="function"||C==="object")}function y(d){return Array.isArray(d)}function m(d){return d instanceof Set}function x(d){return d instanceof Map}function g(d){if(v(d)){var C=Object.getPrototypeOf(d),S=C.constructor;return C&&S&&typeof S=="function"&&S instanceof S&&Function.prototype.toString.call(S)===Function.prototype.toString.call(Object)}return!1}r.StringWalker=f.StringWalker,r.applyMixin=function(d,C){for(var S=[],T=2;T<arguments.length;T++)S[T-2]=arguments[T];Object.getOwnPropertyNames(C.prototype).forEach(function(w){if(w!=="constructor"){if(S.indexOf(w)!==-1){var E=Object.getOwnPropertyDescriptor(d.prototype,w);E&&Object.defineProperty(d.prototype,"_"+w,E)}var D=Object.getOwnPropertyDescriptor(C.prototype,w);D&&Object.defineProperty(d.prototype,w,D)}})},r.applyDefaults=function d(C,S,T){T===void 0&&(T=!1);var w=p(C||{});return l(S,function(E,D){g(D)?w[E]=d(w[E],D,T):(T||w[E]===void 0)&&(w[E]=D)}),w},r.forEachArray=function(d,C,S){d.forEach(C,S)},r.forEachObject=l,r.arrayLength=function(d){return m(d)?d.size:d.length},r.objectLength=function(d){return x(d)?d.size:Object.keys(d).length},r.getObjectValue=function(d,C){return x(d)?d.get(C):d[C]},r.removeObjectValue=function(d,C){x(d)?d.delete(C):delete d[C]},r.clone=p,r.isBoolean=function(d){return typeof d=="boolean"},r.isNumber=function(d){return typeof d=="number"},r.isString=function(d){return typeof d=="string"},r.isFunction=h,r.isObject=v,r.isArray=y,r.isSet=m,r.isMap=x,r.isEmpty=function(d){if(y(d))return!d.length;if(m(d)||x(d))return!d.size;if(v(d)){for(var C in d)if(d.hasOwnProperty(C))return!1;return!0}return!1},r.isPlainObject=g,r.isIterable=function(d){return d&&typeof d[Symbol.iterator]=="function"},r.getValue=function(d){return h(d.valueOf)?d.valueOf():d},r.utf8Encode=function(d){for(var C=new Uint8Array(4*d.length),S=0,T=0;T<d.length;T++){var w=d.charCodeAt(T);if(w<128)C[S++]=w;else{if(w<2048)C[S++]=w>>6|192;else{if(w>55295&&w<56320){if(++T>=d.length)throw new Error("Incomplete surrogate pair.");var E=d.charCodeAt(T);if(E<56320||E>57343)throw new Error("Invalid surrogate character.");w=65536+((1023&w)<<10)+(1023&E),C[S++]=w>>18|240,C[S++]=w>>12&63|128}else C[S++]=w>>12|224;C[S++]=w>>6&63|128}C[S++]=63&w|128}}return C.subarray(0,S)},r.utf8Decode=function(d){for(var C="",S=0;S<d.length;){var T=d[S++];if(T>127)if(T>191&&T<224){if(S>=d.length)throw new Error("Incomplete 2-byte sequence.");T=(31&T)<<6|63&d[S++]}else if(T>223&&T<240){if(S+1>=d.length)throw new Error("Incomplete 3-byte sequence.");T=(15&T)<<12|(63&d[S++])<<6|63&d[S++]}else{if(!(T>239&&T<248))throw new Error("Unknown multi-byte start.");if(S+2>=d.length)throw new Error("Incomplete 4-byte sequence.");T=(7&T)<<18|(63&d[S++])<<12|(63&d[S++])<<6|63&d[S++]}if(T<=65535)C+=String.fromCharCode(T);else{if(!(T<=1114111))throw new Error("Code point exceeds UTF-16 limit.");T-=65536,C+=String.fromCharCode(T>>10|55296),C+=String.fromCharCode(1023&T|56320)}}return C}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),function(i){i[i.Before=0]="Before",i[i.Equal=1]="Equal",i[i.After=2]="After"}(r.BoundaryPosition||(r.BoundaryPosition={})),function(i){i[i.None=0]="None",i[i.Capturing=1]="Capturing",i[i.AtTarget=2]="AtTarget",i[i.Bubbling=3]="Bubbling"}(r.EventPhase||(r.EventPhase={})),function(i){i[i.Element=1]="Element",i[i.Attribute=2]="Attribute",i[i.Text=3]="Text",i[i.CData=4]="CData",i[i.EntityReference=5]="EntityReference",i[i.Entity=6]="Entity",i[i.ProcessingInstruction=7]="ProcessingInstruction",i[i.Comment=8]="Comment",i[i.Document=9]="Document",i[i.DocumentType=10]="DocumentType",i[i.DocumentFragment=11]="DocumentFragment",i[i.Notation=12]="Notation"}(r.NodeType||(r.NodeType={})),function(i){i[i.Disconnected=1]="Disconnected",i[i.Preceding=2]="Preceding",i[i.Following=4]="Following",i[i.Contains=8]="Contains",i[i.ContainedBy=16]="ContainedBy",i[i.ImplementationSpecific=32]="ImplementationSpecific"}(r.Position||(r.Position={})),function(i){i[i.Accept=1]="Accept",i[i.Reject=2]="Reject",i[i.Skip=3]="Skip"}(r.FilterResult||(r.FilterResult={})),function(i){i[i.All=4294967295]="All",i[i.Element=1]="Element",i[i.Attribute=2]="Attribute",i[i.Text=4]="Text",i[i.CDataSection=8]="CDataSection",i[i.EntityReference=16]="EntityReference",i[i.Entity=32]="Entity",i[i.ProcessingInstruction=64]="ProcessingInstruction",i[i.Comment=128]="Comment",i[i.Document=256]="Document",i[i.DocumentType=512]="DocumentType",i[i.DocumentFragment=1024]="DocumentFragment",i[i.Notation=2048]="Notation"}(r.WhatToShow||(r.WhatToShow={})),function(i){i[i.StartToStart=0]="StartToStart",i[i.StartToEnd=1]="StartToEnd",i[i.EndToEnd=2]="EndToEnd",i[i.EndToStart=3]="EndToStart"}(r.HowToCompare||(r.HowToCompare={}))},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(241);r.Cast=i.Cast;var o=a(150);r.Guard=o.Guard;var s=a(242);r.EmptySet=s.EmptySet},function(n,r,a){var i=a(11),o=a(55).f,s=a(21),c=a(25),u=a(80),f=a(119),l=a(123);n.exports=function(p,h){var v,y,m,x,g,d=p.target,C=p.global,S=p.stat;if(v=C?i:S?i[d]||u(d,{}):(i[d]||{}).prototype)for(y in h){if(x=h[y],m=p.noTargetGet?(g=o(v,y))&&g.value:v[y],!l(C?y:d+(S?".":"#")+y,p.forced)&&m!==void 0){if(typeof x==typeof m)continue;f(x,m)}(p.sham||m&&m.sham)&&s(x,"sham",!0),c(v,y,x,p)}}},function(n,r,a){var i=a(11),o=a(81),s=a(14),c=a(58),u=a(86),f=a(124),l=o("wks"),p=i.Symbol,h=f?p:p&&p.withoutSetter||c;n.exports=function(v){return s(l,v)||(u&&s(p,v)?l[v]=p[v]:l[v]=h("Symbol."+v)),l[v]}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(1),o=a(29),s=function(){function c(){this._features={mutationObservers:!0,customElements:!0,slots:!0,steps:!0},this._window=null,this._compareCache=new i.CompareCache,this._rangeList=new i.FixedSizeSet}return c.prototype.setFeatures=function(u){if(u===void 0&&(u=!0),i.isObject(u))for(var f in u)this._features[f]=u[f]||!1;else for(var f in this._features)this._features[f]=u},Object.defineProperty(c.prototype,"features",{get:function(){return this._features},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"window",{get:function(){return this._window===null&&(this._window=o.create_window()),this._window},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"compareCache",{get:function(){return this._compareCache},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"rangeList",{get:function(){return this._rangeList},enumerable:!0,configurable:!0}),Object.defineProperty(c,"instance",{get:function(){return c._instance||(c._instance=new c),c._instance},enumerable:!0,configurable:!0}),c}();r.dom=s.instance},function(n,r,a){var i=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var d={};if(g!=null)for(var C in g)Object.hasOwnProperty.call(g,C)&&(d[C]=g[C]);return d.default=g,d};Object.defineProperty(r,"__esModule",{value:!0});var o=i(a(228));r.base64=o;var s=i(a(146));r.byte=s;var c=i(a(147));r.byteSequence=c;var u=i(a(96));r.codePoint=u;var f=i(a(232));r.json=f;var l=i(a(233));r.list=l;var p=i(a(234));r.map=p;var h=i(a(235));r.namespace=h;var v=i(a(236));r.queue=v;var y=i(a(237));r.set=y;var m=i(a(238));r.stack=m;var x=i(a(239));r.string=x},function(n,r){n.exports=function(a){try{return!!a()}catch{return!0}}},function(n,r,a){var i,o=this&&this.__extends||(i=function(G,F){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,H){A.__proto__=H}||function(A,H){for(var $ in H)H.hasOwnProperty($)&&(A[$]=H[$])})(G,F)},function(G,F){function A(){this.constructor=G}i(G,F),G.prototype=F===null?Object.create(F):(A.prototype=F.prototype,new A)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(G){function F(A,H){H===void 0&&(H="");var $=G.call(this,H)||this;return $.name=A,$}return o(F,G),F}(Error);r.DOMException=s;var c=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"DOMStringSizeError",A)||this}return o(F,G),F}(s);r.DOMStringSizeError=c;var u=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"WrongDocumentError","The object is in the wrong document. "+A)||this}return o(F,G),F}(s);r.WrongDocumentError=u;var f=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"NoDataAllowedError",A)||this}return o(F,G),F}(s);r.NoDataAllowedError=f;var l=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"NoModificationAllowedError","The object can not be modified. "+A)||this}return o(F,G),F}(s);r.NoModificationAllowedError=l;var p=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"NotSupportedError","The operation is not supported. "+A)||this}return o(F,G),F}(s);r.NotSupportedError=p;var h=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"InUseAttributeError",A)||this}return o(F,G),F}(s);r.InUseAttributeError=h;var v=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"InvalidStateError","The object is in an invalid state. "+A)||this}return o(F,G),F}(s);r.InvalidStateError=v;var y=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"InvalidModificationError","The object can not be modified in this way. "+A)||this}return o(F,G),F}(s);r.InvalidModificationError=y;var m=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"NamespaceError","The operation is not allowed by Namespaces in XML. [XMLNS] "+A)||this}return o(F,G),F}(s);r.NamespaceError=m;var x=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"InvalidAccessError","The object does not support the operation or argument. "+A)||this}return o(F,G),F}(s);r.InvalidAccessError=x;var g=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"ValidationError",A)||this}return o(F,G),F}(s);r.ValidationError=g;var d=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"TypeMismatchError",A)||this}return o(F,G),F}(s);r.TypeMismatchError=d;var C=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"SecurityError","The operation is insecure. "+A)||this}return o(F,G),F}(s);r.SecurityError=C;var S=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"NetworkError","A network error occurred. "+A)||this}return o(F,G),F}(s);r.NetworkError=S;var T=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"AbortError","The operation was aborted. "+A)||this}return o(F,G),F}(s);r.AbortError=T;var w=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"URLMismatchError","The given URL does not match another URL. "+A)||this}return o(F,G),F}(s);r.URLMismatchError=w;var E=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"QuotaExceededError","The quota has been exceeded. "+A)||this}return o(F,G),F}(s);r.QuotaExceededError=E;var D=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"TimeoutError","The operation timed out. "+A)||this}return o(F,G),F}(s);r.TimeoutError=D;var b=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"InvalidNodeTypeError","The supplied node is incorrect or has an incorrect ancestor for this operation. "+A)||this}return o(F,G),F}(s);r.InvalidNodeTypeError=b;var O=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"DataCloneError","The object can not be cloned. "+A)||this}return o(F,G),F}(s);r.DataCloneError=O;var M=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"NotImplementedError","The DOM method is not implemented by this module. "+A)||this}return o(F,G),F}(s);r.NotImplementedError=M;var R=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"HierarchyRequestError","The operation would yield an incorrect node tree. "+A)||this}return o(F,G),F}(s);r.HierarchyRequestError=R;var N=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"NotFoundError","The object can not be found here. "+A)||this}return o(F,G),F}(s);r.NotFoundError=N;var U=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"IndexSizeError","The index is not in the allowed range. "+A)||this}return o(F,G),F}(s);r.IndexSizeError=U;var W=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"SyntaxError","The string did not match the expected pattern. "+A)||this}return o(F,G),F}(s);r.SyntaxError=W;var I=function(G){function F(A){return A===void 0&&(A=""),G.call(this,"InvalidCharacterError","The string contains invalid characters. "+A)||this}return o(F,G),F}(s);r.InvalidCharacterError=I},function(n,r,a){var i=a(53),o=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],s=["scalar","sequence","mapping"];n.exports=function(c,u){var f,l;if(u=u||{},Object.keys(u).forEach(function(p){if(o.indexOf(p)===-1)throw new i('Unknown option "'+p+'" is met in definition of "'+c+'" YAML type.')}),this.tag=c,this.kind=u.kind||null,this.resolve=u.resolve||function(){return!0},this.construct=u.construct||function(p){return p},this.instanceOf=u.instanceOf||null,this.predicate=u.predicate||null,this.represent=u.represent||null,this.defaultStyle=u.defaultStyle||null,this.styleAliases=(f=u.styleAliases||null,l={},f!==null&&Object.keys(f).forEach(function(p){f[p].forEach(function(h){l[String(h)]=p})}),l),s.indexOf(this.kind)===-1)throw new i('Unknown kind "'+this.kind+'" is specified for "'+c+'" YAML type.')}},function(n,r,a){(function(i){var o=function(s){return s&&s.Math==Math&&s};n.exports=o(typeof globalThis=="object"&&globalThis)||o(typeof window=="object"&&window)||o(typeof self=="object"&&self)||o(typeof i=="object"&&i)||Function("return this")()}).call(this,a(78))},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.idl_defineConst=function(i,o,s){Object.defineProperty(i,o,{writable:!1,enumerable:!0,configurable:!1,value:s})}},function(n,r){n.exports=function(a){return typeof a=="object"?a!==null:typeof a=="function"}},function(n,r){var a={}.hasOwnProperty;n.exports=function(i,o){return a.call(i,o)}},function(n,r,a){var i=a(16),o=a(115),s=a(18),c=a(56),u=Object.defineProperty;r.f=i?u:function(f,l,p){if(s(f),l=c(l,!0),s(p),o)try{return u(f,l,p)}catch{}if("get"in p||"set"in p)throw TypeError("Accessors not supported");return"value"in p&&(f[l]=p.value),f}},function(n,r,a){var i=a(8);n.exports=!i(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(n,r,a){var i=this&&this.__values||function(d){var C=typeof Symbol=="function"&&Symbol.iterator,S=C&&d[C],T=0;if(S)return S.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&T>=d.length&&(d=void 0),{value:d&&d[T++],done:!d}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(3),s=a(2);function c(d,C,S){if(S===void 0&&(S=!1),S&&o.Guard.isElementNode(C)&&o.Guard.isShadowRoot(C.shadowRoot)&&C.shadowRoot._firstChild)return C.shadowRoot._firstChild;if(C._firstChild)return C._firstChild;if(C===d)return null;if(C._nextSibling)return C._nextSibling;for(var T=C._parent;T&&T!==d;){if(T._nextSibling)return T._nextSibling;T=T._parent}return null}function u(){var d;return(d={})[Symbol.iterator]=function(){return{next:function(){return{done:!0,value:null}}}},d}function f(d,C,S,T){C===void 0&&(C=!1),S===void 0&&(S=!1);for(var w=C?d:c(d,d,S);w&&T&&!T(w);)w=c(d,w,S);return w}function l(d,C,S,T,w){T===void 0&&(T=!1);for(var E=c(d,C,T);E&&w&&!w(E);)E=c(d,E,T);return E}function p(d,C,S,T){var w;return C===void 0&&(C=!1),S===void 0&&(S=!1),C||d._children.size!==0?((w={})[Symbol.iterator]=function(){var E=C?d:c(d,d,S);return{next:function(){for(;E&&T&&!T(E);)E=c(d,E,S);if(E===null)return{done:!0,value:null};var D={done:!1,value:E};return E=c(d,E,S),D}}},w):u()}function h(d,C,S){C===void 0&&(C=!1);for(var T=C?d:d._parent;T&&S&&!S(T);)T=T._parent;return T}function v(d,C,S,T){for(var w=C._parent;w&&T&&!T(w);)w=w._parent;return w}function y(d){return o.Guard.isDocumentTypeNode(d)?0:o.Guard.isCharacterDataNode(d)?d._data.length:d._children.size}function m(d,C){if(C===void 0&&(C=!1),C){var S=m(d,!1);return o.Guard.isShadowRoot(S)?m(S._host,!0):S}return d._parent?m(d._parent):d}function x(d,C,S,T){S===void 0&&(S=!1),T===void 0&&(T=!1);for(var w=S?d:T&&o.Guard.isShadowRoot(d)?d._host:d._parent;w!==null;){if(w===C)return!0;w=T&&o.Guard.isShadowRoot(w)?w._host:w._parent}return!1}function g(d){for(var C=m(d),S=0,T=f(C);T!==null;){if(S++,T===d)return S;T=l(C,T)}return-1}r.tree_getFirstDescendantNode=f,r.tree_getNextDescendantNode=l,r.tree_getDescendantNodes=p,r.tree_getDescendantElements=function(d,C,S,T){var w;return C===void 0&&(C=!1),S===void 0&&(S=!1),C||d._children.size!==0?((w={})[Symbol.iterator]=function(){var E=p(d,C,S,function(b){return o.Guard.isElementNode(b)})[Symbol.iterator](),D=E.next().value;return{next:function(){for(;D&&T&&!T(D);)D=E.next().value;if(D===null)return{done:!0,value:null};var b={done:!1,value:D};return D=E.next().value,b}}},w):u()},r.tree_getSiblingNodes=function(d,C,S){var T;return C===void 0&&(C=!1),d._parent&&d._parent._children.size!==0?((T={})[Symbol.iterator]=function(){var w=d._parent?d._parent._firstChild:null;return{next:function(){for(;w&&(S&&!S(w)||!C&&w===d);)w=w._nextSibling;if(w===null)return{done:!0,value:null};var E={done:!1,value:w};return w=w._nextSibling,E}}},T):u()},r.tree_getFirstAncestorNode=h,r.tree_getNextAncestorNode=v,r.tree_getAncestorNodes=function(d,C,S){var T;return C===void 0&&(C=!1),C||d._parent?((T={})[Symbol.iterator]=function(){var w=h(d,C,S);return{next:function(){if(w===null)return{done:!0,value:null};var E={done:!1,value:w};return w=v(0,w,C,S),E}}},T):u()},r.tree_getCommonAncestor=function(d,C){if(d===C)return d._parent;for(var S=[],T=[],w=h(d,!0);w!==null;)S.push(w),w=v(0,w);for(var E=h(C,!0);E!==null;)T.push(E),E=v(0,E);for(var D=S.length,b=T.length,O=null,M=Math.min(D,b);M>0;M--){var R=S[--D];if(R!==T[--b])break;O=R}return O},r.tree_getFollowingNode=function(d,C){if(C._firstChild)return C._firstChild;if(C._nextSibling)return C._nextSibling;for(;;){var S=C._parent;if(S===null||S===d)return null;if(S._nextSibling)return S._nextSibling;C=S}},r.tree_getPrecedingNode=function(d,C){return C===d?null:C._previousSibling?(C=C._previousSibling)._lastChild?C._lastChild:C:C._parent},r.tree_isConstrained=function d(C){var S,T,w,E,D,b;switch(C._nodeType){case s.NodeType.Document:var O=!1,M=!1;try{for(var R=i(C._children),N=R.next();!N.done;N=R.next())switch(N.value._nodeType){case s.NodeType.ProcessingInstruction:case s.NodeType.Comment:break;case s.NodeType.DocumentType:if(O||M)return!1;O=!0;break;case s.NodeType.Element:if(M)return!1;M=!0;break;default:return!1}}catch(F){S={error:F}}finally{try{N&&!N.done&&(T=R.return)&&T.call(R)}finally{if(S)throw S.error}}break;case s.NodeType.DocumentFragment:case s.NodeType.Element:try{for(var U=i(C._children),W=U.next();!W.done;W=U.next())switch(W.value._nodeType){case s.NodeType.Element:case s.NodeType.Text:case s.NodeType.ProcessingInstruction:case s.NodeType.CData:case s.NodeType.Comment:break;default:return!1}}catch(F){w={error:F}}finally{try{W&&!W.done&&(E=U.return)&&E.call(U)}finally{if(w)throw w.error}}break;case s.NodeType.DocumentType:case s.NodeType.Text:case s.NodeType.ProcessingInstruction:case s.NodeType.CData:case s.NodeType.Comment:return!C.hasChildNodes()}try{for(var I=i(C._children),G=I.next();!G.done;G=I.next())if(!d(G.value))return!1}catch(F){D={error:F}}finally{try{G&&!G.done&&(b=I.return)&&b.call(I)}finally{if(D)throw D.error}}return!0},r.tree_nodeLength=y,r.tree_isEmpty=function(d){return y(d)===0},r.tree_rootNode=m,r.tree_isDescendantOf=function(d,C,S,T){S===void 0&&(S=!1),T===void 0&&(T=!1);for(var w=f(d,S,T);w!==null;){if(w===C)return!0;w=l(d,w,S,T)}return!1},r.tree_isAncestorOf=x,r.tree_isHostIncludingAncestorOf=function d(C,S,T){if(T===void 0&&(T=!1),x(C,S,T))return!0;var w=m(C);return!(!o.Guard.isDocumentFragmentNode(w)||w._host===null||!d(w._host,S,T))},r.tree_isSiblingOf=function(d,C,S){return S===void 0&&(S=!1),d!==C?d._parent!==null&&d._parent===C._parent:!!S},r.tree_isPreceding=function(d,C){var S=g(d),T=g(C);return S!==-1&&T!==-1&&m(d)===m(C)&&T<S},r.tree_isFollowing=function(d,C){var S=g(d),T=g(C);return S!==-1&&T!==-1&&m(d)===m(C)&&T>S},r.tree_isParentOf=function(d,C){return d._parent===C},r.tree_isChildOf=function(d,C){return C._parent===d},r.tree_previousSibling=function(d){return d._previousSibling},r.tree_nextSibling=function(d){return d._nextSibling},r.tree_firstChild=function(d){return d._firstChild},r.tree_lastChild=function(d){return d._lastChild},r.tree_treePosition=g,r.tree_index=function(d){for(var C=0;d._previousSibling!==null;)C++,d=d._previousSibling;return C},r.tree_retarget=function(d,C){for(;;){if(!d||!o.Guard.isNode(d))return d;var S=m(d);if(!o.Guard.isShadowRoot(S)||C&&o.Guard.isNode(C)&&x(S,C,!0,!0))return d;d=S.host}}},function(n,r,a){var i=a(13);n.exports=function(o){if(!i(o))throw TypeError(String(o)+" is not an object");return o}},function(n,r,a){var i=a(24),o=a(130),s=a(49),c=a(43),u=a(88),f=c.set,l=c.getterFor("Array Iterator");n.exports=u(Array,"Array",function(p,h){f(this,{type:"Array Iterator",target:i(p),index:0,kind:h})},function(){var p=l(this),h=p.target,v=p.kind,y=p.index++;return!h||y>=h.length?(p.target=void 0,{value:void 0,done:!0}):v=="keys"?{value:y,done:!1}:v=="values"?{value:h[y],done:!1}:{value:[y,h[y]],done:!1}},"values"),s.Arguments=s.Array,o("keys"),o("values"),o("entries")},function(n,r,a){var i=a(90),o=a(25),s=a(202);i||o(Object.prototype,"toString",s,{unsafe:!0})},function(n,r,a){var i=a(16),o=a(15),s=a(40);n.exports=i?function(c,u,f){return o.f(c,u,s(1,f))}:function(c,u,f){return c[u]=f,c}},function(n,r,a){var i=a(137).charAt,o=a(43),s=a(88),c=o.set,u=o.getterFor("String Iterator");s(String,"String",function(f){c(this,{type:"String Iterator",string:String(f),index:0})},function(){var f,l=u(this),p=l.string,h=l.index;return h>=p.length?{value:void 0,done:!0}:(f=i(p,h),l.index+=f.length,{value:f,done:!1})})},function(n,r,a){var i=a(11),o=a(203),s=a(19),c=a(21),u=a(5),f=u("iterator"),l=u("toStringTag"),p=s.values;for(var h in o){var v=i[h],y=v&&v.prototype;if(y){if(y[f]!==p)try{c(y,f,p)}catch{y[f]=p}if(y[l]||c(y,l,h),o[h]){for(var m in s)if(y[m]!==s[m])try{c(y,m,s[m])}catch{y[m]=s[m]}}}}},function(n,r,a){var i=a(41),o=a(35);n.exports=function(s){return i(o(s))}},function(n,r,a){var i=a(11),o=a(21),s=a(14),c=a(80),u=a(117),f=a(43),l=f.get,p=f.enforce,h=String(String).split("String");(n.exports=function(v,y,m,x){var g=!!x&&!!x.unsafe,d=!!x&&!!x.enumerable,C=!!x&&!!x.noTargetGet;typeof m=="function"&&(typeof y!="string"||s(m,"name")||o(m,"name",y),p(m).source=h.join(typeof y=="string"?y:"")),v!==i?(g?!C&&v[y]&&(d=!0):delete v[y],d?v[y]=m:o(v,y,m)):d?v[y]=m:c(y,m)})(Function.prototype,"toString",function(){return typeof this=="function"&&l(this).source||u(this)})},function(n,r,a){var i=a(47),o=Math.min;n.exports=function(s){return s>0?o(i(s),9007199254740991):0}},function(n,r,a){var i=a(35);n.exports=function(o){return Object(i(o))}},function(n,r,a){var i=a(16),o=a(8),s=a(14),c=Object.defineProperty,u={},f=function(l){throw l};n.exports=function(l,p){if(s(u,l))return u[l];p||(p={});var h=[][l],v=!!s(p,"ACCESSORS")&&p.ACCESSORS,y=s(p,0)?p[0]:f,m=s(p,1)?p[1]:void 0;return u[l]=!!h&&!o(function(){if(v&&!i)return!0;var x={length:-1};v?c(x,1,{enumerable:!0,get:f}):x[1]=1,h.call(x,y,m)})}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(148),o=a(149),s=a(151),c=a(98),u=a(153),f=a(154),l=a(155),p=a(99),h=a(100),v=a(156),y=a(157),m=a(101),x=a(158),g=a(159),d=a(160),C=a(161),S=a(162),T=a(163),w=a(164),E=a(165),D=a(166),b=a(167),O=a(168),M=a(169),R=a(170);r.create_domImplementation=function(N){return i.DOMImplementationImpl._create(N)},r.create_window=function(){return o.WindowImpl._create()},r.create_xmlDocument=function(){return new s.XMLDocumentImpl},r.create_document=function(){return new c.DocumentImpl},r.create_abortController=function(){return new u.AbortControllerImpl},r.create_abortSignal=function(){return f.AbortSignalImpl._create()},r.create_documentType=function(N,U,W,I){return l.DocumentTypeImpl._create(N,U,W,I)},r.create_element=function(N,U,W,I){return p.ElementImpl._create(N,U,W,I)},r.create_htmlElement=function(N,U,W,I){return p.ElementImpl._create(N,U,W,I)},r.create_htmlUnknownElement=function(N,U,W,I){return p.ElementImpl._create(N,U,W,I)},r.create_documentFragment=function(N){return h.DocumentFragmentImpl._create(N)},r.create_shadowRoot=function(N,U){return v.ShadowRootImpl._create(N,U)},r.create_attr=function(N,U){return y.AttrImpl._create(N,U)},r.create_text=function(N,U){return m.TextImpl._create(N,U)},r.create_cdataSection=function(N,U){return x.CDATASectionImpl._create(N,U)},r.create_comment=function(N,U){return g.CommentImpl._create(N,U)},r.create_processingInstruction=function(N,U,W){return d.ProcessingInstructionImpl._create(N,U,W)},r.create_htmlCollection=function(N,U){return U===void 0&&(U=function(){return!0}),C.HTMLCollectionImpl._create(N,U)},r.create_nodeList=function(N){return S.NodeListImpl._create(N)},r.create_nodeListStatic=function(N,U){return T.NodeListStaticImpl._create(N,U)},r.create_namedNodeMap=function(N){return w.NamedNodeMapImpl._create(N)},r.create_range=function(N,U){return E.RangeImpl._create(N,U)},r.create_nodeIterator=function(N,U,W){return D.NodeIteratorImpl._create(N,U,W)},r.create_treeWalker=function(N,U){return b.TreeWalkerImpl._create(N,U)},r.create_nodeFilter=function(){return O.NodeFilterImpl._create()},r.create_mutationRecord=function(N,U,W,I,G,F,A,H,$){return M.MutationRecordImpl._create(N,U,W,I,G,F,A,H,$)},r.create_domTokenList=function(N,U){return R.DOMTokenListImpl._create(N,U)}},function(n,r,a){var i=this&&this.__values||function(y){var m=typeof Symbol=="function"&&Symbol.iterator,x=m&&y[m],g=0;if(x)return x.call(y);if(y&&typeof y.length=="number")return{next:function(){return y&&g>=y.length&&(y=void 0),{value:y&&y[g++],done:!y}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(6),s=a(17),c=a(3),u=a(72),f=new Map;function l(y,m){if(m!==y._root&&s.tree_isAncestorOf(y._reference,m,!0)){if(y._pointerBeforeReference)for(;;){var x=s.tree_getFollowingNode(y._root,m);if(x!==null&&s.tree_isDescendantOf(y._root,x,!0)&&!s.tree_isDescendantOf(m,x,!0))return void(y._reference=x);if(x===null)return void(y._pointerBeforeReference=!1)}if(m._previousSibling===null)m._parent!==null&&(y._reference=m._parent);else{for(var g=m._previousSibling,d=s.tree_getFirstDescendantNode(m._previousSibling,!0,!1);d!==null;)d!==null&&(g=d),d=s.tree_getNextDescendantNode(m._previousSibling,d,!0,!1);y._reference=g}}}function p(y,m,x,g,d){if(c.Guard.isSlot(y)&&m==="name"&&d===null){if(g===x||g===null&&x===""||g===""&&x===null)return;y._name=g===null||g===""?"":g,u.shadowTree_assignSlotablesForATree(s.tree_rootNode(y))}}function h(y,m,x,g,d){if(c.Guard.isSlotable(y)&&m==="slot"&&d===null){if(g===x||g===null&&x===""||g===""&&x===null)return;y._name=g===null||g===""?"":g,u.shadowTree_isAssigned(y)&&u.shadowTree_assignSlotables(y._assignedSlot),u.shadowTree_assignASlot(y)}}function v(y,m,x,g){m==="id"&&g===null&&(y._uniqueIdentifier=x||void 0)}r.dom_runRemovingSteps=function(y,m){},r.dom_runCloningSteps=function(y,m,x,g){},r.dom_runAdoptingSteps=function(y,m){},r.dom_runAttributeChangeSteps=function(y,m,x,g,d){var C,S;o.dom.features.slots&&(h.call(y,y,m,x,g,d),p.call(y,y,m,x,g,d)),v.call(y,y,m,g,d);try{for(var T=i(y._attributeChangeSteps),w=T.next();!w.done;w=T.next())w.value.call(y,y,m,x,g,d)}catch(E){C={error:E}}finally{try{w&&!w.done&&(S=T.return)&&S.call(T)}finally{if(C)throw C.error}}},r.dom_runInsertionSteps=function(y){},r.dom_runNodeIteratorPreRemovingSteps=function(y,m){l.call(y,y,m)},r.dom_hasSupportedTokens=function(y){return f.has(y)},r.dom_getSupportedTokens=function(y){return f.get(y)||new Set},r.dom_runEventConstructingSteps=function(y){},r.dom_runChildTextContentChangeSteps=function(y){}},function(n,r,a){var i=a(4),o=a(11),s=a(46),c=a(44),u=a(16),f=a(86),l=a(124),p=a(8),h=a(14),v=a(59),y=a(13),m=a(18),x=a(27),g=a(24),d=a(56),C=a(40),S=a(60),T=a(61),w=a(82),E=a(190),D=a(85),b=a(55),O=a(15),M=a(79),R=a(21),N=a(25),U=a(81),W=a(57),I=a(45),G=a(58),F=a(5),A=a(125),H=a(126),$=a(62),X=a(43),Y=a(36).forEach,q=W("hidden"),J=F("toPrimitive"),ne=X.set,Q=X.getterFor("Symbol"),te=Object.prototype,L=o.Symbol,_=s("JSON","stringify"),V=b.f,k=O.f,P=E.f,j=M.f,z=U("symbols"),Z=U("op-symbols"),re=U("string-to-symbol-registry"),ie=U("symbol-to-string-registry"),oe=U("wks"),he=o.QObject,ye=!he||!he.prototype||!he.prototype.findChild,Re=u&&p(function(){return S(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a!=7})?function(ue,pe,fe){var xe=V(te,pe);xe&&delete te[pe],k(ue,pe,fe),xe&&ue!==te&&k(te,pe,xe)}:k,De=function(ue,pe){var fe=z[ue]=S(L.prototype);return ne(fe,{type:"Symbol",tag:ue,description:pe}),u||(fe.description=pe),fe},ge=l?function(ue){return typeof ue=="symbol"}:function(ue){return Object(ue)instanceof L},$e=function(ue,pe,fe){ue===te&&$e(Z,pe,fe),m(ue);var xe=d(pe,!0);return m(fe),h(z,xe)?(fe.enumerable?(h(ue,q)&&ue[q][xe]&&(ue[q][xe]=!1),fe=S(fe,{enumerable:C(0,!1)})):(h(ue,q)||k(ue,q,C(1,{})),ue[q][xe]=!0),Re(ue,xe,fe)):k(ue,xe,fe)},K=function(ue,pe){m(ue);var fe=g(pe),xe=T(fe).concat(ae(fe));return Y(xe,function(Ae){u&&!we.call(fe,Ae)||$e(ue,Ae,fe[Ae])}),ue},we=function(ue){var pe=d(ue,!0),fe=j.call(this,pe);return!(this===te&&h(z,pe)&&!h(Z,pe))&&(!(fe||!h(this,pe)||!h(z,pe)||h(this,q)&&this[q][pe])||fe)},Te=function(ue,pe){var fe=g(ue),xe=d(pe,!0);if(fe!==te||!h(z,xe)||h(Z,xe)){var Ae=V(fe,xe);return!Ae||!h(z,xe)||h(fe,q)&&fe[q][xe]||(Ae.enumerable=!0),Ae}},me=function(ue){var pe=P(g(ue)),fe=[];return Y(pe,function(xe){h(z,xe)||h(I,xe)||fe.push(xe)}),fe},ae=function(ue){var pe=ue===te,fe=P(pe?Z:g(ue)),xe=[];return Y(fe,function(Ae){!h(z,Ae)||pe&&!h(te,Ae)||xe.push(z[Ae])}),xe};f||(N((L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor");var ue=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,pe=G(ue),fe=function(xe){this===te&&fe.call(Z,xe),h(this,q)&&h(this[q],pe)&&(this[q][pe]=!1),Re(this,pe,C(1,xe))};return u&&ye&&Re(te,pe,{configurable:!0,set:fe}),De(pe,ue)}).prototype,"toString",function(){return Q(this).tag}),N(L,"withoutSetter",function(ue){return De(G(ue),ue)}),M.f=we,O.f=$e,b.f=Te,w.f=E.f=me,D.f=ae,A.f=function(ue){return De(F(ue),ue)},u&&(k(L.prototype,"description",{configurable:!0,get:function(){return Q(this).description}}),c||N(te,"propertyIsEnumerable",we,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:L}),Y(T(oe),function(ue){H(ue)}),i({target:"Symbol",stat:!0,forced:!f},{for:function(ue){var pe=String(ue);if(h(re,pe))return re[pe];var fe=L(pe);return re[pe]=fe,ie[fe]=pe,fe},keyFor:function(ue){if(!ge(ue))throw TypeError(ue+" is not a symbol");if(h(ie,ue))return ie[ue]},useSetter:function(){ye=!0},useSimple:function(){ye=!1}}),i({target:"Object",stat:!0,forced:!f,sham:!u},{create:function(ue,pe){return pe===void 0?S(ue):K(S(ue),pe)},defineProperty:$e,defineProperties:K,getOwnPropertyDescriptor:Te}),i({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:me,getOwnPropertySymbols:ae}),i({target:"Object",stat:!0,forced:p(function(){D.f(1)})},{getOwnPropertySymbols:function(ue){return D.f(x(ue))}}),_&&i({target:"JSON",stat:!0,forced:!f||p(function(){var ue=L();return _([ue])!="[null]"||_({a:ue})!="{}"||_(Object(ue))!="{}"})},{stringify:function(ue,pe,fe){for(var xe,Ae=[ue],Se=1;arguments.length>Se;)Ae.push(arguments[Se++]);if(xe=pe,(y(pe)||ue!==void 0)&&!ge(ue))return v(pe)||(pe=function(Be,Pe){if(typeof xe=="function"&&(Pe=xe.call(this,Be,Pe)),!ge(Pe))return Pe}),Ae[1]=pe,_.apply(null,Ae)}}),L.prototype[J]||R(L.prototype,J,L.prototype.valueOf),$(L,"Symbol"),I[q]=!0},function(n,r,a){var i=a(4),o=a(16),s=a(11),c=a(14),u=a(13),f=a(15).f,l=a(119),p=s.Symbol;if(o&&typeof p=="function"&&(!("description"in p.prototype)||p().description!==void 0)){var h={},v=function(){var d=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),C=this instanceof v?new p(d):d===void 0?p():p(d);return d===""&&(h[C]=!0),C};l(v,p);var y=v.prototype=p.prototype;y.constructor=v;var m=y.toString,x=String(p("test"))=="Symbol(test)",g=/^Symbol\((.*)\)[^)]+$/;f(y,"description",{configurable:!0,get:function(){var d=u(this)?this.valueOf():this,C=m.call(d);if(c(h,d))return"";var S=x?C.slice(7,-1):C.replace(g,"$1");return S===""?void 0:S}}),i({global:!0,forced:!0},{Symbol:v})}},function(n,r,a){a(126)("iterator")},function(n,r,a){var i,o=this&&this.__extends||(i=function(x,g){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,C){d.__proto__=C}||function(d,C){for(var S in C)C.hasOwnProperty(S)&&(d[S]=C[S])})(x,g)},function(x,g){function d(){this.constructor=x}i(x,g),x.prototype=g===null?Object.create(g):(d.prototype=g.prototype,new d)}),s=this&&this.__values||function(x){var g=typeof Symbol=="function"&&Symbol.iterator,d=g&&x[g],C=0;if(d)return d.call(x);if(x&&typeof x.length=="number")return{next:function(){return x&&C>=x.length&&(x=void 0),{value:x&&x[C++],done:!x}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var c=a(6),u=a(2),f=a(70),l=a(3),p=a(9),h=a(0),v=a(152),y=a(12),m=function(x){function g(){var d=x.call(this)||this;return d._parent=null,d._firstChild=null,d._lastChild=null,d._previousSibling=null,d._nextSibling=null,d}return o(g,x),Object.defineProperty(g.prototype,"_childNodes",{get:function(){return this.__childNodes||(this.__childNodes=h.create_nodeList(this))},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"_nodeDocument",{get:function(){return this._nodeDocumentOverride||c.dom.window._associatedDocument},set:function(d){this._nodeDocumentOverride=d},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"_registeredObserverList",{get:function(){return this.__registeredObserverList||(this.__registeredObserverList=[])},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"nodeType",{get:function(){return this._nodeType},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"nodeName",{get:function(){return l.Guard.isElementNode(this)?this._htmlUppercasedQualifiedName:l.Guard.isAttrNode(this)?this._qualifiedName:l.Guard.isExclusiveTextNode(this)?"#text":l.Guard.isCDATASectionNode(this)?"#cdata-section":l.Guard.isProcessingInstructionNode(this)?this._target:l.Guard.isCommentNode(this)?"#comment":l.Guard.isDocumentNode(this)?"#document":l.Guard.isDocumentTypeNode(this)?this._name:l.Guard.isDocumentFragmentNode(this)?"#document-fragment":""},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"baseURI",{get:function(){return v.urlSerializer(this._nodeDocument._URL)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"isConnected",{get:function(){return l.Guard.isElementNode(this)&&h.shadowTree_isConnected(this)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"ownerDocument",{get:function(){return this._nodeType===u.NodeType.Document?null:this._nodeDocument},enumerable:!0,configurable:!0}),g.prototype.getRootNode=function(d){return h.tree_rootNode(this,!!d&&d.composed)},Object.defineProperty(g.prototype,"parentNode",{get:function(){return this._nodeType===u.NodeType.Attribute?null:this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"parentElement",{get:function(){return this._parent&&l.Guard.isElementNode(this._parent)?this._parent:null},enumerable:!0,configurable:!0}),g.prototype.hasChildNodes=function(){return this._firstChild!==null},Object.defineProperty(g.prototype,"childNodes",{get:function(){return this._childNodes},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"firstChild",{get:function(){return this._firstChild},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"lastChild",{get:function(){return this._lastChild},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"previousSibling",{get:function(){return this._previousSibling},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"nextSibling",{get:function(){return this._nextSibling},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"nodeValue",{get:function(){return l.Guard.isAttrNode(this)?this._value:l.Guard.isCharacterDataNode(this)?this._data:null},set:function(d){d===null&&(d=""),l.Guard.isAttrNode(this)?h.attr_setAnExistingAttributeValue(this,d):l.Guard.isCharacterDataNode(this)&&h.characterData_replaceData(this,0,this._data.length,d)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"textContent",{get:function(){return l.Guard.isDocumentFragmentNode(this)||l.Guard.isElementNode(this)?h.text_descendantTextContent(this):l.Guard.isAttrNode(this)?this._value:l.Guard.isCharacterDataNode(this)?this._data:null},set:function(d){d===null&&(d=""),l.Guard.isDocumentFragmentNode(this)||l.Guard.isElementNode(this)?h.node_stringReplaceAll(d,this):l.Guard.isAttrNode(this)?h.attr_setAnExistingAttributeValue(this,d):l.Guard.isCharacterDataNode(this)&&h.characterData_replaceData(this,0,h.tree_nodeLength(this),d)},enumerable:!0,configurable:!0}),g.prototype.normalize=function(){for(var d,C,S,T,w=[],E=h.tree_getFirstDescendantNode(this,!1,!1,function(Y){return l.Guard.isExclusiveTextNode(Y)});E!==null;)w.push(E),E=h.tree_getNextDescendantNode(this,E,!1,!1,function(Y){return l.Guard.isExclusiveTextNode(Y)});for(var D=0;D<w.length;D++){var b=w[D];if(b._parent!==null){var O=h.tree_nodeLength(b);if(O!==0){var M=[],R="";try{for(var N=(d=void 0,s(h.text_contiguousExclusiveTextNodes(b))),U=N.next();!U.done;U=N.next()){var W=U.value;M.push(W),R+=W._data}}catch(Y){d={error:Y}}finally{try{U&&!U.done&&(C=N.return)&&C.call(N)}finally{if(d)throw d.error}}if(h.characterData_replaceData(b,O,0,R),c.dom.rangeList.size!==0)for(var I=b._nextSibling;I!==null&&l.Guard.isExclusiveTextNode(I);){var G=I,F=h.tree_index(G);try{for(var A=(S=void 0,s(c.dom.rangeList)),H=A.next();!H.done;H=A.next()){var $=H.value;$._start[0]===G&&($._start[0]=b,$._start[1]+=O),$._end[0]===G&&($._end[0]=b,$._end[1]+=O),$._start[0]===G._parent&&$._start[1]===F&&($._start[0]=b,$._start[1]=O),$._end[0]===G._parent&&$._end[1]===F&&($._end[0]=b,$._end[1]=O)}}catch(Y){S={error:Y}}finally{try{H&&!H.done&&(T=A.return)&&T.call(A)}finally{if(S)throw S.error}}O+=h.tree_nodeLength(I),I=I._nextSibling}for(var X=0;X<M.length;X++)(W=M[X])._parent!==null&&h.mutation_remove(W,W._parent)}else h.mutation_remove(b,b._parent)}}},g.prototype.cloneNode=function(d){if(d===void 0&&(d=!1),l.Guard.isShadowRoot(this))throw new p.NotSupportedError;return h.node_clone(this,null,d)},g.prototype.isEqualNode=function(d){return d===void 0&&(d=null),d!==null&&h.node_equals(this,d)},g.prototype.isSameNode=function(d){return d===void 0&&(d=null),this===d},g.prototype.compareDocumentPosition=function(d){if(d===this)return 0;var C=d,S=this,T=null,w=null;if(l.Guard.isAttrNode(C)&&(C=(T=C)._element),l.Guard.isAttrNode(S)&&(S=(w=S)._element,T&&C&&C===S))for(var E=0;E<S._attributeList.length;E++){var D=S._attributeList[E];if(h.node_equals(D,T))return u.Position.ImplementationSpecific|u.Position.Preceding;if(h.node_equals(D,w))return u.Position.ImplementationSpecific|u.Position.Following}return C===null||S===null||h.tree_rootNode(C)!==h.tree_rootNode(S)?u.Position.Disconnected|u.Position.ImplementationSpecific|(c.dom.compareCache.check(this,d)?u.Position.Preceding:u.Position.Following):!T&&h.tree_isAncestorOf(S,C)||w&&C===S?u.Position.Contains|u.Position.Preceding:!w&&h.tree_isDescendantOf(S,C)||T&&C===S?u.Position.ContainedBy|u.Position.Following:h.tree_isPreceding(S,C)?u.Position.Preceding:u.Position.Following},g.prototype.contains=function(d){return d!==null&&h.tree_isDescendantOf(this,d,!0)},g.prototype.lookupPrefix=function(d){return d?l.Guard.isElementNode(this)?h.node_locateANamespacePrefix(this,d):l.Guard.isDocumentNode(this)?this.documentElement===null?null:h.node_locateANamespacePrefix(this.documentElement,d):l.Guard.isDocumentTypeNode(this)||l.Guard.isDocumentFragmentNode(this)?null:l.Guard.isAttrNode(this)?this._element===null?null:h.node_locateANamespacePrefix(this._element,d):this._parent!==null&&l.Guard.isElementNode(this._parent)?h.node_locateANamespacePrefix(this._parent,d):null:null},g.prototype.lookupNamespaceURI=function(d){return h.node_locateANamespace(this,d||null)},g.prototype.isDefaultNamespace=function(d){return d||(d=null),h.node_locateANamespace(this,null)===d},g.prototype.insertBefore=function(d,C){return h.mutation_preInsert(d,this,C)},g.prototype.appendChild=function(d){return h.mutation_append(d,this)},g.prototype.replaceChild=function(d,C){return h.mutation_replace(C,d,this)},g.prototype.removeChild=function(d){return h.mutation_preRemove(d,this)},g.prototype._getTheParent=function(d){return l.Guard.isSlotable(this)&&h.shadowTree_isAssigned(this)?this._assignedSlot:this._parent},g.ELEMENT_NODE=1,g.ATTRIBUTE_NODE=2,g.TEXT_NODE=3,g.CDATA_SECTION_NODE=4,g.ENTITY_REFERENCE_NODE=5,g.ENTITY_NODE=6,g.PROCESSING_INSTRUCTION_NODE=7,g.COMMENT_NODE=8,g.DOCUMENT_NODE=9,g.DOCUMENT_TYPE_NODE=10,g.DOCUMENT_FRAGMENT_NODE=11,g.NOTATION_NODE=12,g.DOCUMENT_POSITION_DISCONNECTED=1,g.DOCUMENT_POSITION_PRECEDING=2,g.DOCUMENT_POSITION_FOLLOWING=4,g.DOCUMENT_POSITION_CONTAINS=8,g.DOCUMENT_POSITION_CONTAINED_BY=16,g.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,g}(f.EventTargetImpl);r.NodeImpl=m,m.prototype._children=new l.EmptySet,y.idl_defineConst(m.prototype,"ELEMENT_NODE",1),y.idl_defineConst(m.prototype,"ATTRIBUTE_NODE",2),y.idl_defineConst(m.prototype,"TEXT_NODE",3),y.idl_defineConst(m.prototype,"CDATA_SECTION_NODE",4),y.idl_defineConst(m.prototype,"ENTITY_REFERENCE_NODE",5),y.idl_defineConst(m.prototype,"ENTITY_NODE",6),y.idl_defineConst(m.prototype,"PROCESSING_INSTRUCTION_NODE",7),y.idl_defineConst(m.prototype,"COMMENT_NODE",8),y.idl_defineConst(m.prototype,"DOCUMENT_NODE",9),y.idl_defineConst(m.prototype,"DOCUMENT_TYPE_NODE",10),y.idl_defineConst(m.prototype,"DOCUMENT_FRAGMENT_NODE",11),y.idl_defineConst(m.prototype,"NOTATION_NODE",12),y.idl_defineConst(m.prototype,"DOCUMENT_POSITION_DISCONNECTED",1),y.idl_defineConst(m.prototype,"DOCUMENT_POSITION_PRECEDING",2),y.idl_defineConst(m.prototype,"DOCUMENT_POSITION_FOLLOWING",4),y.idl_defineConst(m.prototype,"DOCUMENT_POSITION_CONTAINS",8),y.idl_defineConst(m.prototype,"DOCUMENT_POSITION_CONTAINED_BY",16),y.idl_defineConst(m.prototype,"DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC",32)},function(n,r){n.exports=function(a){if(a==null)throw TypeError("Can't call method on "+a);return a}},function(n,r,a){var i=a(87),o=a(41),s=a(27),c=a(26),u=a(128),f=[].push,l=function(p){var h=p==1,v=p==2,y=p==3,m=p==4,x=p==6,g=p==5||x;return function(d,C,S,T){for(var w,E,D=s(d),b=o(D),O=i(C,S,3),M=c(b.length),R=0,N=T||u,U=h?N(d,M):v?N(d,0):void 0;M>R;R++)if((g||R in b)&&(E=O(w=b[R],R,D),p)){if(h)U[R]=E;else if(E)switch(p){case 3:return!0;case 5:return w;case 6:return R;case 2:f.call(U,w)}else if(m)return!1}return x?-1:y||m?m:U}};n.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},function(n,r,a){var i=this&&this.__values||function(D){var b=typeof Symbol=="function"&&Symbol.iterator,O=b&&D[b],M=0;if(O)return O.call(D);if(D&&typeof D.length=="number")return{next:function(){return D&&M>=D.length&&(D=void 0),{value:D&&D[M++],done:!D}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(D,b){var O=typeof Symbol=="function"&&D[Symbol.iterator];if(!O)return D;var M,R,N=O.call(D),U=[];try{for(;(b===void 0||b-- >0)&&!(M=N.next()).done;)U.push(M.value)}catch(W){R={error:W}}finally{try{M&&!M.done&&(O=N.return)&&O.call(N)}finally{if(R)throw R.error}}return U},s=this&&this.__spread||function(){for(var D=[],b=0;b<arguments.length;b++)D=D.concat(o(arguments[b]));return D};Object.defineProperty(r,"__esModule",{value:!0});var c=a(6),u=a(9),f=a(2),l=a(3),p=a(1),h=a(7),v=a(73),y=a(17),m=a(172),x=a(72),g=a(51),d=a(30),C=a(106);function S(D,b,O){var M,R,N,U,W,I,G,F,A=b._nodeType,H=D._nodeType,$=O?O._nodeType:null;if(A!==f.NodeType.Document&&A!==f.NodeType.DocumentFragment&&A!==f.NodeType.Element)throw new u.HierarchyRequestError("Only document, document fragment and element nodes can contain child nodes. Parent node is "+b.nodeName+".");if(y.tree_isHostIncludingAncestorOf(b,D,!0))throw new u.HierarchyRequestError("The node to be inserted cannot be an inclusive ancestor of parent node. Node is "+D.nodeName+", parent node is "+b.nodeName+".");if(O!==null&&O._parent!==b)throw new u.NotFoundError("The reference child node cannot be found under parent node. Child node is "+O.nodeName+", parent node is "+b.nodeName+".");if(H!==f.NodeType.DocumentFragment&&H!==f.NodeType.DocumentType&&H!==f.NodeType.Element&&H!==f.NodeType.Text&&H!==f.NodeType.ProcessingInstruction&&H!==f.NodeType.CData&&H!==f.NodeType.Comment)throw new u.HierarchyRequestError("Only document fragment, document type, element, text, processing instruction, cdata section or comment nodes can be inserted. Node is "+D.nodeName+".");if(H===f.NodeType.Text&&A===f.NodeType.Document)throw new u.HierarchyRequestError("Cannot insert a text node as a child of a document node. Node is "+D.nodeName+".");if(H===f.NodeType.DocumentType&&A!==f.NodeType.Document)throw new u.HierarchyRequestError("A document type node can only be inserted under a document node. Parent node is "+b.nodeName+".");if(A===f.NodeType.Document){if(H===f.NodeType.DocumentFragment){var X=0;try{for(var Y=i(D._children),q=Y.next();!q.done;q=Y.next()){var J=q.value;if(J._nodeType===f.NodeType.Element)X++;else if(J._nodeType===f.NodeType.Text)throw new u.HierarchyRequestError("Cannot insert text a node as a child of a document node. Node is "+J.nodeName+".")}}catch(j){M={error:j}}finally{try{q&&!q.done&&(R=Y.return)&&R.call(Y)}finally{if(M)throw M.error}}if(X>1)throw new u.HierarchyRequestError("A document node can only have one document element node. Document fragment to be inserted has "+X+" element nodes.");if(X===1){try{for(var ne=i(b._children),Q=ne.next();!Q.done;Q=ne.next())if(Q.value._nodeType===f.NodeType.Element)throw new u.HierarchyRequestError("The document node already has a document element node.")}catch(j){N={error:j}}finally{try{Q&&!Q.done&&(U=ne.return)&&U.call(ne)}finally{if(N)throw N.error}}if(O){if($===f.NodeType.DocumentType)throw new u.HierarchyRequestError("Cannot insert an element node before a document type node.");for(var te=O._nextSibling;te;){if(te._nodeType===f.NodeType.DocumentType)throw new u.HierarchyRequestError("Cannot insert an element node before a document type node.");te=te._nextSibling}}}}else if(H===f.NodeType.Element){try{for(var L=i(b._children),_=L.next();!_.done;_=L.next())if(_.value._nodeType===f.NodeType.Element)throw new u.HierarchyRequestError("Document already has a document element node. Node is "+D.nodeName+".")}catch(j){W={error:j}}finally{try{_&&!_.done&&(I=L.return)&&I.call(L)}finally{if(W)throw W.error}}if(O){if($===f.NodeType.DocumentType)throw new u.HierarchyRequestError("Cannot insert an element node before a document type node. Node is "+D.nodeName+".");for(te=O._nextSibling;te;){if(te._nodeType===f.NodeType.DocumentType)throw new u.HierarchyRequestError("Cannot insert an element node before a document type node. Node is "+D.nodeName+".");te=te._nextSibling}}}else if(H===f.NodeType.DocumentType){try{for(var V=i(b._children),k=V.next();!k.done;k=V.next())if(k.value._nodeType===f.NodeType.DocumentType)throw new u.HierarchyRequestError("Document already has a document type node. Node is "+D.nodeName+".")}catch(j){G={error:j}}finally{try{k&&!k.done&&(F=V.return)&&F.call(V)}finally{if(G)throw G.error}}if(O)for(var P=O._previousSibling;P;){if(P._nodeType===f.NodeType.Element)throw new u.HierarchyRequestError("Cannot insert a document type node before an element node. Node is "+D.nodeName+".");P=P._previousSibling}else for(P=b._firstChild;P;){if(P._nodeType===f.NodeType.Element)throw new u.HierarchyRequestError("Cannot insert a document type node before an element node. Node is "+D.nodeName+".");P=P._nextSibling}}}}function T(D,b,O){S(D,b,O);var M=O;return M===D&&(M=D._nextSibling),C.document_adopt(D,b._nodeDocument),w(D,b,M),D}function w(D,b,O,M){var R,N;if(O!==null||D._nodeType===f.NodeType.DocumentFragment){var U=D._nodeType===f.NodeType.DocumentFragment?D._children.size:1;if(O!==null&&c.dom.rangeList.size!==0){var W=y.tree_index(O);try{for(var I=i(c.dom.rangeList),G=I.next();!G.done;G=I.next()){var F=G.value;F._start[0]===b&&F._start[1]>W&&(F._start[1]+=U),F._end[0]===b&&F._end[1]>W&&(F._end[1]+=U)}}catch(Q){R={error:Q}}finally{try{G&&!G.done&&(N=I.return)&&N.call(I)}finally{if(R)throw R.error}}}var A=D._nodeType===f.NodeType.DocumentFragment?new(Array.bind.apply(Array,s([void 0],D._children))):[D];if(D._nodeType===f.NodeType.DocumentFragment)for(;D._firstChild;)E(D._firstChild,D,!0);c.dom.features.mutationObservers&&D._nodeType===f.NodeType.DocumentFragment&&g.observer_queueTreeMutationRecord(D,[],A,null,null);for(var H=O?O._previousSibling:b._lastChild,$=O===null?-1:y.tree_index(O),X=0;X<A.length;X++){var Y=A[X];if(l.Guard.isElementNode(Y)&&(l.Guard.isDocumentNode(b)&&(b._documentElement=Y),Y._nodeDocument._hasNamespaces||Y._namespace===null&&Y._namespacePrefix===null||(Y._nodeDocument._hasNamespaces=!0)),Y._parent=b,O===null?h.set.append(b._children,Y):(h.set.insert(b._children,Y,$),$++),b._firstChild===null)Y._previousSibling=null,Y._nextSibling=null,b._firstChild=Y,b._lastChild=Y;else{var q=O?O._previousSibling:b._lastChild,J=O||null;Y._previousSibling=q,Y._nextSibling=J,q&&(q._nextSibling=Y),J&&(J._previousSibling=Y),q||(b._firstChild=Y),J||(b._lastChild=Y)}c.dom.features.slots&&b._shadowRoot!==null&&l.Guard.isSlotable(Y)&&x.shadowTree_assignASlot(Y),c.dom.features.steps&&l.Guard.isTextNode(Y)&&d.dom_runChildTextContentChangeSteps(b),c.dom.features.slots&&l.Guard.isShadowRoot(y.tree_rootNode(b))&&l.Guard.isSlot(b)&&p.isEmpty(b._assignedNodes)&&x.shadowTree_signalASlotChange(b),c.dom.features.slots&&x.shadowTree_assignSlotablesForATree(y.tree_rootNode(Y));for(var ne=y.tree_getFirstDescendantNode(Y,!0,!0);ne!==null;)c.dom.features.steps&&d.dom_runInsertionSteps(ne),c.dom.features.customElements&&l.Guard.isElementNode(ne)&&x.shadowTree_isConnected(ne)&&(l.Guard.isCustomElementNode(ne)?v.customElement_enqueueACustomElementCallbackReaction(ne,"connectedCallback",[]):v.customElement_tryToUpgrade(ne)),ne=y.tree_getNextDescendantNode(Y,ne,!0,!0)}c.dom.features.mutationObservers&&(M||g.observer_queueTreeMutationRecord(b,A,[],H,O))}else(function(Q,te,L){var _=te._lastChild;if(l.Guard.isElementNode(Q)&&(l.Guard.isDocumentNode(te)&&(te._documentElement=Q),Q._nodeDocument._hasNamespaces||Q._namespace===null&&Q._namespacePrefix===null||(Q._nodeDocument._hasNamespaces=!0)),Q._parent=te,te._children.add(Q),te._firstChild===null)Q._previousSibling=null,Q._nextSibling=null,te._firstChild=Q,te._lastChild=Q;else{var V=te._lastChild;Q._previousSibling=V,Q._nextSibling=null,V&&(V._nextSibling=Q),V||(te._firstChild=Q),te._lastChild=Q}c.dom.features.slots&&te._shadowRoot!==null&&l.Guard.isSlotable(Q)&&x.shadowTree_assignASlot(Q),c.dom.features.steps&&l.Guard.isTextNode(Q)&&d.dom_runChildTextContentChangeSteps(te),c.dom.features.slots&&l.Guard.isShadowRoot(y.tree_rootNode(te))&&l.Guard.isSlot(te)&&p.isEmpty(te._assignedNodes)&&x.shadowTree_signalASlotChange(te),c.dom.features.slots&&x.shadowTree_assignSlotablesForATree(y.tree_rootNode(Q)),c.dom.features.steps&&d.dom_runInsertionSteps(Q),c.dom.features.customElements&&l.Guard.isElementNode(Q)&&x.shadowTree_isConnected(Q)&&(l.Guard.isCustomElementNode(Q)?v.customElement_enqueueACustomElementCallbackReaction(Q,"connectedCallback",[]):v.customElement_tryToUpgrade(Q)),c.dom.features.mutationObservers&&(L||g.observer_queueTreeMutationRecord(te,[Q],[],_,null))})(D,b,M)}function E(D,b,O){var M,R,N,U,W,I,G,F;if(c.dom.rangeList.size!==0){var A=y.tree_index(D);try{for(var H=i(c.dom.rangeList),$=H.next();!$.done;$=H.next()){var X=$.value;y.tree_isDescendantOf(D,X._start[0],!0)&&(X._start=[b,A]),y.tree_isDescendantOf(D,X._end[0],!0)&&(X._end=[b,A]),X._start[0]===b&&X._start[1]>A&&X._start[1]--,X._end[0]===b&&X._end[1]>A&&X._end[1]--}}catch(re){M={error:re}}finally{try{$&&!$.done&&(R=H.return)&&R.call(H)}finally{if(M)throw M.error}}try{for(var Y=i(c.dom.rangeList),q=Y.next();!q.done;q=Y.next())(X=q.value)._start[0]===b&&X._start[1]>A&&(X._start[1]-=1),X._end[0]===b&&X._end[1]>A&&(X._end[1]-=1)}catch(re){N={error:re}}finally{try{q&&!q.done&&(U=Y.return)&&U.call(Y)}finally{if(N)throw N.error}}}if(c.dom.features.steps)try{for(var J=i(m.nodeIterator_iteratorList()),ne=J.next();!ne.done;ne=J.next()){var Q=ne.value;Q._root._nodeDocument===D._nodeDocument&&d.dom_runNodeIteratorPreRemovingSteps(Q,D)}}catch(re){W={error:re}}finally{try{ne&&!ne.done&&(I=J.return)&&I.call(J)}finally{if(W)throw W.error}}var te=D._previousSibling,L=D._nextSibling;l.Guard.isDocumentNode(b)&&l.Guard.isElementNode(D)&&(b._documentElement=null),D._parent=null,b._children.delete(D);var _=D._previousSibling,V=D._nextSibling;D._previousSibling=null,D._nextSibling=null,_&&(_._nextSibling=V),V&&(V._previousSibling=_),_||(b._firstChild=V),V||(b._lastChild=_),c.dom.features.slots&&l.Guard.isSlotable(D)&&D._assignedSlot!==null&&x.shadowTree_isAssigned(D)&&x.shadowTree_assignSlotables(D._assignedSlot),c.dom.features.slots&&l.Guard.isShadowRoot(y.tree_rootNode(b))&&l.Guard.isSlot(b)&&p.isEmpty(b._assignedNodes)&&x.shadowTree_signalASlotChange(b),c.dom.features.slots&&y.tree_getFirstDescendantNode(D,!0,!1,function(re){return l.Guard.isSlot(re)})!==null&&(x.shadowTree_assignSlotablesForATree(y.tree_rootNode(b)),x.shadowTree_assignSlotablesForATree(D)),c.dom.features.steps&&d.dom_runRemovingSteps(D,b),c.dom.features.customElements&&l.Guard.isCustomElementNode(D)&&v.customElement_enqueueACustomElementCallbackReaction(D,"disconnectedCallback",[]);for(var k=y.tree_getFirstDescendantNode(D,!1,!0);k!==null;)c.dom.features.steps&&d.dom_runRemovingSteps(k,D),c.dom.features.customElements&&l.Guard.isCustomElementNode(k)&&v.customElement_enqueueACustomElementCallbackReaction(k,"disconnectedCallback",[]),k=y.tree_getNextDescendantNode(D,k,!1,!0);if(c.dom.features.mutationObservers)for(var P=y.tree_getFirstAncestorNode(b,!0);P!==null;){try{for(var j=(G=void 0,i(P._registeredObserverList)),z=j.next();!z.done;z=j.next()){var Z=z.value;Z.options.subtree&&D._registeredObserverList.push({observer:Z.observer,options:Z.options,source:Z})}}catch(re){G={error:re}}finally{try{z&&!z.done&&(F=j.return)&&F.call(j)}finally{if(G)throw G.error}}P=y.tree_getNextAncestorNode(b,P,!0)}c.dom.features.mutationObservers&&(O||g.observer_queueTreeMutationRecord(b,[],[D],te,L)),c.dom.features.steps&&l.Guard.isTextNode(D)&&d.dom_runChildTextContentChangeSteps(b)}r.mutation_ensurePreInsertionValidity=S,r.mutation_preInsert=T,r.mutation_insert=w,r.mutation_append=function(D,b){return T(D,b,null)},r.mutation_replace=function(D,b,O){var M,R,N,U,W,I,G,F;if(O._nodeType!==f.NodeType.Document&&O._nodeType!==f.NodeType.DocumentFragment&&O._nodeType!==f.NodeType.Element)throw new u.HierarchyRequestError("Only document, document fragment and element nodes can contain child nodes. Parent node is "+O.nodeName+".");if(y.tree_isHostIncludingAncestorOf(O,b,!0))throw new u.HierarchyRequestError("The node to be inserted cannot be an ancestor of parent node. Node is "+b.nodeName+", parent node is "+O.nodeName+".");if(D._parent!==O)throw new u.NotFoundError("The reference child node cannot be found under parent node. Child node is "+D.nodeName+", parent node is "+O.nodeName+".");if(b._nodeType!==f.NodeType.DocumentFragment&&b._nodeType!==f.NodeType.DocumentType&&b._nodeType!==f.NodeType.Element&&b._nodeType!==f.NodeType.Text&&b._nodeType!==f.NodeType.ProcessingInstruction&&b._nodeType!==f.NodeType.CData&&b._nodeType!==f.NodeType.Comment)throw new u.HierarchyRequestError("Only document fragment, document type, element, text, processing instruction, cdata section or comment nodes can be inserted. Node is "+b.nodeName+".");if(b._nodeType===f.NodeType.Text&&O._nodeType===f.NodeType.Document)throw new u.HierarchyRequestError("Cannot insert a text node as a child of a document node. Node is "+b.nodeName+".");if(b._nodeType===f.NodeType.DocumentType&&O._nodeType!==f.NodeType.Document)throw new u.HierarchyRequestError("A document type node can only be inserted under a document node. Parent node is "+O.nodeName+".");if(O._nodeType===f.NodeType.Document){if(b._nodeType===f.NodeType.DocumentFragment){var A=0;try{for(var H=i(b._children),$=H.next();!$.done;$=H.next()){var X=$.value;if(X._nodeType===f.NodeType.Element)A++;else if(X._nodeType===f.NodeType.Text)throw new u.HierarchyRequestError("Cannot insert text a node as a child of a document node. Node is "+X.nodeName+".")}}catch(Z){M={error:Z}}finally{try{$&&!$.done&&(R=H.return)&&R.call(H)}finally{if(M)throw M.error}}if(A>1)throw new u.HierarchyRequestError("A document node can only have one document element node. Document fragment to be inserted has "+A+" element nodes.");if(A===1){try{for(var Y=i(O._children),q=Y.next();!q.done;q=Y.next())if((_=q.value)._nodeType===f.NodeType.Element&&_!==D)throw new u.HierarchyRequestError("The document node already has a document element node.")}catch(Z){N={error:Z}}finally{try{q&&!q.done&&(U=Y.return)&&U.call(Y)}finally{if(N)throw N.error}}for(var J=D._nextSibling;J;){if(J._nodeType===f.NodeType.DocumentType)throw new u.HierarchyRequestError("Cannot insert an element node before a document type node.");J=J._nextSibling}}}else if(b._nodeType===f.NodeType.Element){try{for(var ne=i(O._children),Q=ne.next();!Q.done;Q=ne.next())if((_=Q.value)._nodeType===f.NodeType.Element&&_!==D)throw new u.HierarchyRequestError("Document already has a document element node. Node is "+b.nodeName+".")}catch(Z){W={error:Z}}finally{try{Q&&!Q.done&&(I=ne.return)&&I.call(ne)}finally{if(W)throw W.error}}for(J=D._nextSibling;J;){if(J._nodeType===f.NodeType.DocumentType)throw new u.HierarchyRequestError("Cannot insert an element node before a document type node. Node is "+b.nodeName+".");J=J._nextSibling}}else if(b._nodeType===f.NodeType.DocumentType){try{for(var te=i(O._children),L=te.next();!L.done;L=te.next()){var _;if((_=L.value)._nodeType===f.NodeType.DocumentType&&_!==D)throw new u.HierarchyRequestError("Document already has a document type node. Node is "+b.nodeName+".")}}catch(Z){G={error:Z}}finally{try{L&&!L.done&&(F=te.return)&&F.call(te)}finally{if(G)throw G.error}}for(var V=D._previousSibling;V;){if(V._nodeType===f.NodeType.Element)throw new u.HierarchyRequestError("Cannot insert a document type node before an element node. Node is "+b.nodeName+".");V=V._previousSibling}}}var k=D._nextSibling;k===b&&(k=b._nextSibling);var P=D._previousSibling;C.document_adopt(b,O._nodeDocument);var j=[];D._parent!==null&&(j.push(D),E(D,D._parent,!0));var z=[];return b._nodeType===f.NodeType.DocumentFragment?z=Array.from(b._children):z.push(b),w(b,O,k,!0),c.dom.features.mutationObservers&&g.observer_queueTreeMutationRecord(O,z,j,P,k),D},r.mutation_replaceAll=function(D,b){var O,M;D!==null&&C.document_adopt(D,b._nodeDocument);var R=Array.from(b._children),N=[];D&&D._nodeType===f.NodeType.DocumentFragment?N=Array.from(D._children):D!==null&&N.push(D);try{for(var U=i(R),W=U.next();!W.done;W=U.next())E(W.value,b,!0)}catch(I){O={error:I}}finally{try{W&&!W.done&&(M=U.return)&&M.call(U)}finally{if(O)throw O.error}}D!==null&&w(D,b,null,!0),c.dom.features.mutationObservers&&g.observer_queueTreeMutationRecord(b,N,R,null,null)},r.mutation_preRemove=function(D,b){if(D._parent!==b)throw new u.NotFoundError("The child node cannot be found under parent node. Child node is "+D.nodeName+", parent node is "+b.nodeName+".");return E(D,b),D},r.mutation_remove=E},function(n,r,a){function i(o){return o==null}n.exports.isNothing=i,n.exports.isObject=function(o){return typeof o=="object"&&o!==null},n.exports.toArray=function(o){return Array.isArray(o)?o:i(o)?[]:[o]},n.exports.repeat=function(o,s){var c,u="";for(c=0;c<s;c+=1)u+=o;return u},n.exports.isNegativeZero=function(o){return o===0&&Number.NEGATIVE_INFINITY===1/o},n.exports.extend=function(o,s){var c,u,f,l;if(s)for(c=0,u=(l=Object.keys(s)).length;c<u;c+=1)o[f=l[c]]=s[f];return o}},function(n,r,a){var i=a(38),o=a(53),s=a(10);function c(f,l,p){var h=[];return f.include.forEach(function(v){p=c(v,l,p)}),f[l].forEach(function(v){p.forEach(function(y,m){y.tag===v.tag&&y.kind===v.kind&&h.push(m)}),p.push(v)}),p.filter(function(v,y){return h.indexOf(y)===-1})}function u(f){this.include=f.include||[],this.implicit=f.implicit||[],this.explicit=f.explicit||[],this.implicit.forEach(function(l){if(l.loadKind&&l.loadKind!=="scalar")throw new o("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=c(this,"implicit",[]),this.compiledExplicit=c(this,"explicit",[]),this.compiledTypeMap=function(){var l,p,h={scalar:{},sequence:{},mapping:{},fallback:{}};function v(y){h[y.kind][y.tag]=h.fallback[y.tag]=y}for(l=0,p=arguments.length;l<p;l+=1)arguments[l].forEach(v);return h}(this.compiledImplicit,this.compiledExplicit)}u.DEFAULT=null,u.create=function(){var f,l;switch(arguments.length){case 1:f=u.DEFAULT,l=arguments[0];break;case 2:f=arguments[0],l=arguments[1];break;default:throw new o("Wrong number of arguments for Schema.create function")}if(f=i.toArray(f),l=i.toArray(l),!f.every(function(p){return p instanceof u}))throw new o("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!l.every(function(p){return p instanceof s}))throw new o("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new u({include:f,explicit:l})},n.exports=u},function(n,r){n.exports=function(a,i){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:i}}},function(n,r,a){var i=a(8),o=a(42),s="".split;n.exports=i(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return o(c)=="String"?s.call(c,""):Object(c)}:Object},function(n,r){var a={}.toString;n.exports=function(i){return a.call(i).slice(8,-1)}},function(n,r,a){var i,o,s,c=a(186),u=a(11),f=a(13),l=a(21),p=a(14),h=a(57),v=a(45),y=u.WeakMap;if(c){var m=new y,x=m.get,g=m.has,d=m.set;i=function(S,T){return d.call(m,S,T),T},o=function(S){return x.call(m,S)||{}},s=function(S){return g.call(m,S)}}else{var C=h("state");v[C]=!0,i=function(S,T){return l(S,C,T),T},o=function(S){return p(S,C)?S[C]:{}},s=function(S){return p(S,C)}}n.exports={set:i,get:o,has:s,enforce:function(S){return s(S)?o(S):i(S,{})},getterFor:function(S){return function(T){var w;if(!f(T)||(w=o(T)).type!==S)throw TypeError("Incompatible receiver, "+S+" required");return w}}}},function(n,r){n.exports=!1},function(n,r){n.exports={}},function(n,r,a){var i=a(120),o=a(11),s=function(c){return typeof c=="function"?c:void 0};n.exports=function(c,u){return arguments.length<2?s(i[c])||s(o[c]):i[c]&&i[c][u]||o[c]&&o[c][u]}},function(n,r){var a=Math.ceil,i=Math.floor;n.exports=function(o){return isNaN(o=+o)?0:(o>0?i:a)(o)}},function(n,r,a){var i=a(8);n.exports=function(o,s){var c=[][o];return!!c&&i(function(){c.call(null,s||function(){throw 1},1)})}},function(n,r){n.exports={}},function(n,r,a){a(31),a(32),a(33),a(220),a(64),a(19),a(65),a(20),a(68),a(66),a(92),a(144),a(22),a(94),a(23);var i=this&&this.__values||function(v){var y=typeof Symbol=="function"&&Symbol.iterator,m=y&&v[y],x=0;if(m)return m.call(v);if(v&&typeof v.length=="number")return{next:function(){return v&&x>=v.length&&(v=void 0),{value:v&&v[x++],done:!v}}};throw new TypeError(y?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(v,y){var m=typeof Symbol=="function"&&v[Symbol.iterator];if(!m)return v;var x,g,d=m.call(v),C=[];try{for(;(y===void 0||y-- >0)&&!(x=d.next()).done;)C.push(x.value)}catch(S){g={error:S}}finally{try{x&&!x.done&&(m=d.return)&&m.call(d)}finally{if(g)throw g.error}}return C},s=this&&this.__spread||function(){for(var v=[],y=0;y<arguments.length;y++)v=v.concat(o(arguments[y]));return v};Object.defineProperty(r,"__esModule",{value:!0});var c=a(2),u=a(69),f=a(95),l=a(7),p=a(0),h=function(){function v(y){this.level=0,this._builderOptions=y}return v.prototype.declaration=function(y,m,x){},v.prototype.docType=function(y,m,x){},v.prototype.comment=function(y){},v.prototype.text=function(y){},v.prototype.instruction=function(y,m){},v.prototype.cdata=function(y){},v.prototype.openTagBegin=function(y){},v.prototype.openTagEnd=function(y,m,x){},v.prototype.closeTag=function(y){},v.prototype.attributes=function(y){var m,x;try{for(var g=i(y),d=g.next();!d.done;d=g.next()){var C=d.value;this.attribute(C[1]===null?C[2]:C[1]+":"+C[2],C[3])}}catch(S){m={error:S}}finally{try{d&&!d.done&&(x=g.return)&&x.call(g)}finally{if(m)throw m.error}}},v.prototype.attribute=function(y,m){},v.prototype.beginElement=function(y){},v.prototype.endElement=function(y){},v.prototype.serializeNode=function(y,m){var x=y._nodeDocument!==void 0&&y._nodeDocument._hasNamespaces;if(this.level=0,this.currentNode=y,x){var g=new f.NamespacePrefixMap;g.set("xml",l.namespace.XML),this._serializeNodeNS(y,null,g,{value:1},m)}else this._serializeNode(y,m)},v.prototype._serializeNodeNS=function(y,m,x,g,d){switch(this.currentNode=y,y.nodeType){case c.NodeType.Element:this._serializeElementNS(y,m,x,g,d);break;case c.NodeType.Document:this._serializeDocumentNS(y,m,x,g,d);break;case c.NodeType.Comment:this._serializeComment(y,d);break;case c.NodeType.Text:this._serializeText(y,d);break;case c.NodeType.DocumentFragment:this._serializeDocumentFragmentNS(y,m,x,g,d);break;case c.NodeType.DocumentType:this._serializeDocumentType(y,d);break;case c.NodeType.ProcessingInstruction:this._serializeProcessingInstruction(y,d);break;case c.NodeType.CData:this._serializeCData(y,d);break;default:throw new Error("Unknown node type: "+y.nodeType)}},v.prototype._serializeNode=function(y,m){switch(this.currentNode=y,y.nodeType){case c.NodeType.Element:this._serializeElement(y,m);break;case c.NodeType.Document:this._serializeDocument(y,m);break;case c.NodeType.Comment:this._serializeComment(y,m);break;case c.NodeType.Text:this._serializeText(y,m);break;case c.NodeType.DocumentFragment:this._serializeDocumentFragment(y,m);break;case c.NodeType.DocumentType:this._serializeDocumentType(y,m);break;case c.NodeType.ProcessingInstruction:this._serializeProcessingInstruction(y,m);break;case c.NodeType.CData:this._serializeCData(y,m);break;default:throw new Error("Unknown node type: "+y.nodeType)}},v.prototype._serializeElementNS=function(y,m,x,g,d){var C,S,T=[];if(d&&(y.localName.indexOf(":")!==-1||!p.xml_isName(y.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var w="",E=!1,D=!1,b=x.copy(),O={},M=this._recordNamespaceInformation(y,b,O),R=m,N=y.namespaceURI;if(R===N)M!==null&&(D=!0),w=N===l.namespace.XML?"xml:"+y.localName:y.localName,this.beginElement(w),this.openTagBegin(w);else{var U=y.prefix,W=null;if(U===null&&N===M||(W=b.get(U,N)),U==="xmlns"){if(d)throw new Error("An element cannot have the 'xmlns' prefix (well-formed required).");W=U}W!==null?(w=W+":"+y.localName,M!==null&&M!==l.namespace.XML&&(R=M||null),this.beginElement(w),this.openTagBegin(w)):U!==null?(U in O&&(U=this._generatePrefix(N,b,g)),b.set(U,N),w+=U+":"+y.localName,this.beginElement(w),this.openTagBegin(w),T.push([null,"xmlns",U,this._serializeAttributeValue(N,d)]),M!==null&&(R=M||null)):M===null||M!==null&&M!==N?(D=!0,w+=y.localName,R=N,this.beginElement(w),this.openTagBegin(w),T.push([null,null,"xmlns",this._serializeAttributeValue(N,d)])):(w+=y.localName,R=N,this.beginElement(w),this.openTagBegin(w))}T.push.apply(T,s(this._serializeAttributesNS(y,b,g,O,D,d))),this.attributes(T);var I=N===l.namespace.HTML;if(I&&y.childNodes.length===0&&v._VoidElementNames.has(y.localName)?(this.openTagEnd(w,!0,!0),this.endElement(w),E=!0):I||y.childNodes.length!==0?this.openTagEnd(w,!1,!1):(this.openTagEnd(w,!0,!1),this.endElement(w),E=!0),!E){if(!(I&&y.localName==="template"))try{for(var G=i(y.childNodes),F=G.next();!F.done;F=G.next()){var A=F.value;this.level++,this._serializeNodeNS(A,R,b,g,d),this.level--}}catch(H){C={error:H}}finally{try{F&&!F.done&&(S=G.return)&&S.call(G)}finally{if(C)throw C.error}}this.closeTag(w),this.endElement(w)}},v.prototype._serializeElement=function(y,m){var x,g;if(m&&(y.localName.indexOf(":")!==-1||!p.xml_isName(y.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var d=!1,C=y.localName;this.beginElement(C),this.openTagBegin(C);var S=this._serializeAttributes(y,m);if(this.attributes(S),y.hasChildNodes()?this.openTagEnd(C,!1,!1):(this.openTagEnd(C,!0,!1),this.endElement(C),d=!0),!d){try{for(var T=i(y._children),w=T.next();!w.done;w=T.next()){var E=w.value;this.level++,this._serializeNode(E,m),this.level--}}catch(D){x={error:D}}finally{try{w&&!w.done&&(g=T.return)&&g.call(T)}finally{if(x)throw x.error}}this.closeTag(C),this.endElement(C)}},v.prototype._serializeDocumentNS=function(y,m,x,g,d){var C,S;if(d&&y.documentElement===null)throw new Error("Missing document element (well-formed required).");try{for(var T=i(y.childNodes),w=T.next();!w.done;w=T.next()){var E=w.value;this._serializeNodeNS(E,m,x,g,d)}}catch(D){C={error:D}}finally{try{w&&!w.done&&(S=T.return)&&S.call(T)}finally{if(C)throw C.error}}},v.prototype._serializeDocument=function(y,m){var x,g;if(m&&y.documentElement===null)throw new Error("Missing document element (well-formed required).");try{for(var d=i(y._children),C=d.next();!C.done;C=d.next()){var S=C.value;this._serializeNode(S,m)}}catch(T){x={error:T}}finally{try{C&&!C.done&&(g=d.return)&&g.call(d)}finally{if(x)throw x.error}}},v.prototype._serializeComment=function(y,m){if(m&&(!p.xml_isLegalChar(y.data)||y.data.indexOf("--")!==-1||y.data.endsWith("-")))throw new Error("Comment data contains invalid characters (well-formed required).");this.comment(y.data)},v.prototype._serializeText=function(y,m){if(m&&!p.xml_isLegalChar(y.data))throw new Error("Text data contains invalid characters (well-formed required).");var x=y.data.replace(/(?!&([^&;]*);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");this.text(x)},v.prototype._serializeDocumentFragmentNS=function(y,m,x,g,d){var C,S;try{for(var T=i(y.childNodes),w=T.next();!w.done;w=T.next()){var E=w.value;this._serializeNodeNS(E,m,x,g,d)}}catch(D){C={error:D}}finally{try{w&&!w.done&&(S=T.return)&&S.call(T)}finally{if(C)throw C.error}}},v.prototype._serializeDocumentFragment=function(y,m){var x,g;try{for(var d=i(y._children),C=d.next();!C.done;C=d.next()){var S=C.value;this._serializeNode(S,m)}}catch(T){x={error:T}}finally{try{C&&!C.done&&(g=d.return)&&g.call(d)}finally{if(x)throw x.error}}},v.prototype._serializeDocumentType=function(y,m){if(m&&!p.xml_isPubidChar(y.publicId))throw new Error("DocType public identifier does not match PubidChar construct (well-formed required).");if(m&&(!p.xml_isLegalChar(y.systemId)||y.systemId.indexOf('"')!==-1&&y.systemId.indexOf("'")!==-1))throw new Error("DocType system identifier contains invalid characters (well-formed required).");this.docType(y.name,y.publicId,y.systemId)},v.prototype._serializeProcessingInstruction=function(y,m){if(m&&(y.target.indexOf(":")!==-1||/^xml$/i.test(y.target)))throw new Error("Processing instruction target contains invalid characters (well-formed required).");if(m&&(!p.xml_isLegalChar(y.data)||y.data.indexOf("?>")!==-1))throw new Error("Processing instruction data contains invalid characters (well-formed required).");this.instruction(y.target,y.data)},v.prototype._serializeCData=function(y,m){if(m&&y.data.indexOf("]]>")!==-1)throw new Error("CDATA contains invalid characters (well-formed required).");this.cdata(y.data)},v.prototype._serializeAttributesNS=function(y,m,x,g,d,C){var S,T,w=[],E=C?new u.LocalNameSet:void 0;try{for(var D=i(y.attributes),b=D.next();!b.done;b=D.next()){var O=b.value;if(C||d||O.namespaceURI!==null){if(C&&E&&E.has(O.namespaceURI,O.localName))throw new Error("Element contains duplicate attributes (well-formed required).");C&&E&&E.set(O.namespaceURI,O.localName);var M=O.namespaceURI,R=null;if(M!==null)if(R=m.get(O.prefix,M),M===l.namespace.XMLNS){if(O.value===l.namespace.XML||O.prefix===null&&d||O.prefix!==null&&(!(O.localName in g)||g[O.localName]!==O.value)&&m.has(O.localName,O.value))continue;if(C&&O.value===l.namespace.XMLNS)throw new Error("XMLNS namespace is reserved (well-formed required).");if(C&&O.value==="")throw new Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required).");O.prefix==="xmlns"&&(R="xmlns")}else R===null&&(R=O.prefix===null||m.hasPrefix(O.prefix)&&!m.has(O.prefix,M)?this._generatePrefix(M,m,x):O.prefix,w.push([null,"xmlns",R,this._serializeAttributeValue(M,C)]));if(C&&(O.localName.indexOf(":")!==-1||!p.xml_isName(O.localName)||O.localName==="xmlns"&&M===null))throw new Error("Attribute local name contains invalid characters (well-formed required).");w.push([M,R,O.localName,this._serializeAttributeValue(O.value,C)])}else w.push([null,null,O.localName,this._serializeAttributeValue(O.value,C)])}}catch(N){S={error:N}}finally{try{b&&!b.done&&(T=D.return)&&T.call(D)}finally{if(S)throw S.error}}return w},v.prototype._serializeAttributes=function(y,m){var x,g,d=[],C=m?{}:void 0;try{for(var S=i(y.attributes),T=S.next();!T.done;T=S.next()){var w=T.value;if(m){if(m&&C&&w.localName in C)throw new Error("Element contains duplicate attributes (well-formed required).");if(m&&C&&(C[w.localName]=!0),m&&(w.localName.indexOf(":")!==-1||!p.xml_isName(w.localName)))throw new Error("Attribute local name contains invalid characters (well-formed required).");d.push([null,null,w.localName,this._serializeAttributeValue(w.value,m)])}else d.push([null,null,w.localName,this._serializeAttributeValue(w.value,m)])}}catch(E){x={error:E}}finally{try{T&&!T.done&&(g=S.return)&&g.call(S)}finally{if(x)throw x.error}}return d},v.prototype._recordNamespaceInformation=function(y,m,x){var g,d,C=null;try{for(var S=i(y.attributes),T=S.next();!T.done;T=S.next()){var w=T.value,E=w.namespaceURI,D=w.prefix;if(E===l.namespace.XMLNS){if(D===null){C=w.value;continue}var b=w.localName,O=w.value;if(O===l.namespace.XML||(O===""&&(O=null),m.has(b,O)))continue;m.set(b,O),x[b]=O||""}}}catch(M){g={error:M}}finally{try{T&&!T.done&&(d=S.return)&&d.call(S)}finally{if(g)throw g.error}}return C},v.prototype._generatePrefix=function(y,m,x){var g="ns"+x.value.toString();return x.value++,m.set(g,y),g},v.prototype._serializeAttributeValue=function(y,m){if(m&&y!==null&&!p.xml_isLegalChar(y))throw new Error("Invalid characters in attribute value.");return y===null?"":y.replace(/(?!&([^&;]*);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},v._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),v}();r.BaseWriter=h},function(n,r,a){var i=this&&this.__values||function(m){var x=typeof Symbol=="function"&&Symbol.iterator,g=x&&m[x],d=0;if(g)return g.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&d>=m.length&&(m=void 0),{value:m&&m[d++],done:!m}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(m,x){var g=typeof Symbol=="function"&&m[Symbol.iterator];if(!g)return m;var d,C,S=g.call(m),T=[];try{for(;(x===void 0||x-- >0)&&!(d=S.next()).done;)T.push(d.value)}catch(w){C={error:w}}finally{try{d&&!d.done&&(g=S.return)&&g.call(S)}finally{if(C)throw C.error}}return T};Object.defineProperty(r,"__esModule",{value:!0});var s=a(6),c=a(3),u=a(7),f=a(29),l=a(17),p=a(97);function h(){var m=s.dom.window;m._mutationObserverMicrotaskQueued||(m._mutationObserverMicrotaskQueued=!0,Promise.resolve().then(function(){v()}))}function v(){var m,x,g,d,C=s.dom.window;C._mutationObserverMicrotaskQueued=!1;var S=u.set.clone(C._mutationObservers),T=u.set.clone(C._signalSlots);u.set.empty(C._signalSlots);var w=function(R){var N=u.list.clone(R._recordQueue);u.list.empty(R._recordQueue);for(var U=0;U<R._nodeList.length;U++){var W=R._nodeList[U];u.list.remove(W._registeredObserverList,function(I){return c.Guard.isTransientRegisteredObserver(I)&&I.observer===R})}if(!u.list.isEmpty(N))try{R._callback.call(R,N,R)}catch{}};try{for(var E=i(S),D=E.next();!D.done;D=E.next())w(D.value)}catch(R){m={error:R}}finally{try{D&&!D.done&&(x=E.return)&&x.call(E)}finally{if(m)throw m.error}}if(s.dom.features.slots)try{for(var b=i(T),O=b.next();!O.done;O=b.next()){var M=O.value;p.event_fireAnEvent("slotchange",M,void 0,{bubbles:!0})}}catch(R){g={error:R}}finally{try{O&&!O.done&&(d=b.return)&&d.call(b)}finally{if(g)throw g.error}}}function y(m,x,g,d,C,S,T,w,E){for(var D,b,O=new Map,M=l.tree_getFirstAncestorNode(x,!0);M!==null;){for(var R=0;R<M._registeredObserverList.length;R++){var N=M._registeredObserverList[R],U=N.options;if((M===x||U.subtree)&&(m!=="attributes"||U.attributes)&&(m!=="attributes"||!U.attributeFilter||U.attributeFilter.indexOf(g||"")&&d===null)&&(m!=="characterData"||U.characterData)&&(m!=="childList"||U.childList)){var W=N.observer;O.has(W)||O.set(W,null),(m==="attributes"&&U.attributeOldValue||m==="characterData"&&U.characterDataOldValue)&&O.set(W,C)}}M=l.tree_getNextAncestorNode(x,M,!0)}try{for(var I=i(O),G=I.next();!G.done;G=I.next()){var F=o(G.value,2),A=F[0],H=F[1],$=f.create_mutationRecord(m,x,f.create_nodeListStatic(x,S),f.create_nodeListStatic(x,T),w,E,g,d,H);A._recordQueue.push($)}}catch(X){D={error:X}}finally{try{G&&!G.done&&(b=I.return)&&b.call(I)}finally{if(D)throw D.error}}h()}r.observer_queueAMutationObserverMicrotask=h,r.observer_notifyMutationObservers=v,r.observer_queueMutationRecord=y,r.observer_queueTreeMutationRecord=function(m,x,g,d,C){y("childList",m,null,null,null,x,g,d,C)},r.observer_queueAttributeMutationRecord=function(m,x,g,d){y("attributes",m,x,g,d,[],[],null,null)}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(6),o=a(7),s=a(3),c=a(9),u=a(29),f=a(73),l=a(51),p=a(30),h=a(37),v=a(106);function y(S,T,w){i.dom.features.mutationObservers&&l.observer_queueAttributeMutationRecord(T,S._localName,S._namespace,S._value),i.dom.features.customElements&&s.Guard.isCustomElementNode(T)&&f.customElement_enqueueACustomElementCallbackReaction(T,"attributeChangedCallback",[S._localName,S._value,w,S._namespace]),i.dom.features.steps&&p.dom_runAttributeChangeSteps(T,S._localName,S._value,w,S._namespace),S._value=w}function m(S,T){i.dom.features.mutationObservers&&l.observer_queueAttributeMutationRecord(T,S._localName,S._namespace,null),i.dom.features.customElements&&s.Guard.isCustomElementNode(T)&&f.customElement_enqueueACustomElementCallbackReaction(T,"attributeChangedCallback",[S._localName,null,S._value,S._namespace]),i.dom.features.steps&&p.dom_runAttributeChangeSteps(T,S._localName,null,S._value,S._namespace),T._attributeList._asArray().push(S),S._element=T,T._nodeDocument._hasNamespaces||S._namespace===null&&S._namespacePrefix===null&&S._localName!=="xmlns"||(T._nodeDocument._hasNamespaces=!0)}function x(S,T){i.dom.features.mutationObservers&&l.observer_queueAttributeMutationRecord(T,S._localName,S._namespace,S._value),i.dom.features.customElements&&s.Guard.isCustomElementNode(T)&&f.customElement_enqueueACustomElementCallbackReaction(T,"attributeChangedCallback",[S._localName,S._value,null,S._namespace]),i.dom.features.steps&&p.dom_runAttributeChangeSteps(T,S._localName,S._value,null,S._namespace);var w=T._attributeList._asArray().indexOf(S);T._attributeList._asArray().splice(w,1),S._element=null}function g(S,T,w){i.dom.features.mutationObservers&&l.observer_queueAttributeMutationRecord(w,S._localName,S._namespace,S._value),i.dom.features.customElements&&s.Guard.isCustomElementNode(w)&&f.customElement_enqueueACustomElementCallbackReaction(w,"attributeChangedCallback",[S._localName,S._value,T._value,S._namespace]),i.dom.features.steps&&p.dom_runAttributeChangeSteps(w,S._localName,S._value,T._value,S._namespace);var E=w._attributeList._asArray().indexOf(S);E!==-1&&(w._attributeList._asArray()[E]=T),S._element=null,T._element=w,w._nodeDocument._hasNamespaces||T._namespace===null&&T._namespacePrefix===null&&T._localName!=="xmlns"||(w._nodeDocument._hasNamespaces=!0)}function d(S,T){return T._namespace===o.namespace.HTML&&T._nodeDocument._type==="html"&&(S=S.toLowerCase()),T._attributeList._asArray().find(function(w){return w._qualifiedName===S})||null}function C(S,T,w){var E=S||null;return w._attributeList._asArray().find(function(D){return D._namespace===E&&D._localName===T})||null}r.element_has=function(S,T){return T._attributeList._asArray().indexOf(S)!==-1},r.element_change=y,r.element_append=m,r.element_remove=x,r.element_replace=g,r.element_getAnAttributeByName=d,r.element_getAnAttributeByNamespaceAndLocalName=C,r.element_getAnAttributeValue=function(S,T,w){w===void 0&&(w="");var E=C(w,T,S);return E===null?"":E._value},r.element_setAnAttribute=function(S,T){if(S._element!==null&&S._element!==T)throw new c.InUseAttributeError("This attribute already exists in the document: "+S._qualifiedName+" as a child of "+S._element._qualifiedName+".");var w=C(S._namespace||"",S._localName,T);return w===S?S:(w!==null?g(w,S,T):m(S,T),w)},r.element_setAnAttributeValue=function(S,T,w,E,D){E===void 0&&(E=null),D===void 0&&(D=null);var b=C(D||"",T,S);if(b===null){var O=u.create_attr(S._nodeDocument,T);return O._namespace=D,O._namespacePrefix=E,O._value=w,void m(O,S)}y(b,S,w)},r.element_removeAnAttributeByName=function(S,T){var w=d(S,T);return w!==null&&x(w,T),w},r.element_removeAnAttributeByNamespaceAndLocalName=function(S,T,w){var E=C(S,T,w);return E!==null&&x(E,w),E},r.element_createAnElement=function(S,T,w,E,D,b){E===void 0&&(E=null),D===void 0&&(D=null),b===void 0&&(b=!1);var O=null;if(!i.dom.features.customElements)return(O=u.create_element(S,T,w,E))._customElementState="uncustomized",O._customElementDefinition=null,O._is=D,O;var M=f.customElement_lookUpACustomElementDefinition(S,w,T,D);if(M!==null&&M.name!==M.localName)(O=new(v.document_elementInterface(T,o.namespace.HTML)))._localName=T,O._namespace=o.namespace.HTML,O._namespacePrefix=E,O._customElementState="undefined",O._customElementDefinition=null,O._is=D,O._nodeDocument=S,b?f.customElement_upgrade(M,O):f.customElement_enqueueACustomElementUpgradeReaction(O,M);else if(M!==null)if(b)try{var R=new M.constructor;if(console.assert(R._customElementState!==void 0),console.assert(R._customElementDefinition!==void 0),console.assert(R._namespace===o.namespace.HTML),R._attributeList.length!==0)throw new c.NotSupportedError("Custom element already has attributes.");if(R._children.size!==0)throw new c.NotSupportedError("Custom element already has child nodes.");if(R._parent!==null)throw new c.NotSupportedError("Custom element already has a parent node.");if(R._nodeDocument!==S)throw new c.NotSupportedError("Custom element is already in a document.");if(R._localName!==T)throw new c.NotSupportedError("Custom element has a different local name.");R._namespacePrefix=E,R._is=null}catch{(O=u.create_htmlUnknownElement(S,T,o.namespace.HTML,E))._customElementState="failed",O._customElementDefinition=null,O._is=null}else(O=u.create_htmlElement(S,T,o.namespace.HTML,E))._customElementState="undefined",O._customElementDefinition=null,O._is=null,f.customElement_enqueueACustomElementUpgradeReaction(O,M);else(O=new(v.document_elementInterface(T,w)))._localName=T,O._namespace=w,O._namespacePrefix=E,O._customElementState="uncustomized",O._customElementDefinition=null,O._is=D,O._nodeDocument=S,w!==o.namespace.HTML||D===null&&!f.customElement_isValidCustomElementName(T)||(O._customElementState="undefined");if(O===null)throw new Error("Unable to create element.");return O},r.element_insertAdjacent=function(S,T,w){switch(T.toLowerCase()){case"beforebegin":return S._parent===null?null:h.mutation_preInsert(w,S._parent,S);case"afterbegin":return h.mutation_preInsert(w,S,S._firstChild);case"beforeend":return h.mutation_preInsert(w,S,null);case"afterend":return S._parent===null?null:h.mutation_preInsert(w,S._parent,S._nextSibling);default:throw new c.SyntaxError(`Invalid 'where' argument. "beforebegin", "afterbegin", "beforeend" or "afterend" expected`)}}},function(n,r,a){function i(o,s){Error.call(this),this.name="YAMLException",this.reason=o,this.mark=s,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i.prototype.toString=function(o){var s=this.name+": ";return s+=this.reason||"(unknown reason)",!o&&this.mark&&(s+=" "+this.mark.toString()),s},n.exports=i},function(n,r,a){var i=a(39);n.exports=new i({include:[a(181)],implicit:[a(293),a(294)],explicit:[a(295),a(296),a(297),a(298)]})},function(n,r,a){var i=a(16),o=a(79),s=a(40),c=a(24),u=a(56),f=a(14),l=a(115),p=Object.getOwnPropertyDescriptor;r.f=i?p:function(h,v){if(h=c(h),v=u(v,!0),l)try{return p(h,v)}catch{}if(f(h,v))return s(!o.f.call(h,v),h[v])}},function(n,r,a){var i=a(13);n.exports=function(o,s){if(!i(o))return o;var c,u;if(s&&typeof(c=o.toString)=="function"&&!i(u=c.call(o))||typeof(c=o.valueOf)=="function"&&!i(u=c.call(o))||!s&&typeof(c=o.toString)=="function"&&!i(u=c.call(o)))return u;throw TypeError("Can't convert object to primitive value")}},function(n,r,a){var i=a(81),o=a(58),s=i("keys");n.exports=function(c){return s[c]||(s[c]=o(c))}},function(n,r){var a=0,i=Math.random();n.exports=function(o){return"Symbol("+String(o===void 0?"":o)+")_"+(++a+i).toString(36)}},function(n,r,a){var i=a(42);n.exports=Array.isArray||function(o){return i(o)=="Array"}},function(n,r,a){var i,o=a(18),s=a(188),c=a(84),u=a(45),f=a(189),l=a(116),p=a(57),h=p("IE_PROTO"),v=function(){},y=function(x){return"<script>"+x+"<\/script>"},m=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch{}var x,g;m=i?function(C){C.write(y("")),C.close();var S=C.parentWindow.Object;return C=null,S}(i):((g=l("iframe")).style.display="none",f.appendChild(g),g.src=String("javascript:"),(x=g.contentWindow.document).open(),x.write(y("document.F=Object")),x.close(),x.F);for(var d=c.length;d--;)delete m.prototype[c[d]];return m()};u[h]=!0,n.exports=Object.create||function(x,g){var d;return x!==null?(v.prototype=o(x),d=new v,v.prototype=null,d[h]=x):d=m(),g===void 0?d:s(d,g)}},function(n,r,a){var i=a(121),o=a(84);n.exports=Object.keys||function(s){return i(s,o)}},function(n,r,a){var i=a(15).f,o=a(14),s=a(5)("toStringTag");n.exports=function(c,u,f){c&&!o(c=f?c:c.prototype,s)&&i(c,s,{configurable:!0,value:u})}},function(n,r,a){var i=a(8),o=a(5),s=a(129),c=o("species");n.exports=function(u){return s>=51||!i(function(){var f=[];return(f.constructor={})[c]=function(){return{foo:1}},f[u](Boolean).foo!==1})}},function(n,r,a){var i=a(4),o=a(122).indexOf,s=a(48),c=a(28),u=[].indexOf,f=!!u&&1/[1].indexOf(1,-0)<0,l=s("indexOf"),p=c("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:f||!l||!p},{indexOf:function(h){return f?u.apply(this,arguments)||0:o(this,h,arguments.length>1?arguments[1]:void 0)}})},function(n,r,a){var i=a(16),o=a(15).f,s=Function.prototype,c=s.toString,u=/^\s*function ([^ (]*)/;i&&!("name"in s)&&o(s,"name",{configurable:!0,get:function(){try{return c.call(this).match(u)[1]}catch{return""}}})},function(n,r,a){var i=a(25),o=a(18),s=a(8),c=a(136),u=RegExp.prototype,f=u.toString,l=s(function(){return f.call({source:"a",flags:"b"})!="/a/b"}),p=f.name!="toString";(l||p)&&i(RegExp.prototype,"toString",function(){var h=o(this),v=String(h.source),y=h.flags;return"/"+v+"/"+String(y===void 0&&h instanceof RegExp&&!("flags"in u)?c.call(h):y)},{unsafe:!0})},function(n,r,a){a(31),a(32),a(33),a(19),a(138),a(20),a(66),a(22),a(23);var i,o=this&&this.__extends||(i=function(l,p){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(l,p)},function(l,p){function h(){this.constructor=l}i(l,p),l.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)}),s=this&&this.__values||function(l){var p=typeof Symbol=="function"&&Symbol.iterator,h=p&&l[p],v=0;if(h)return h.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&v>=l.length&&(l=void 0),{value:l&&l[v++],done:!l}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var c=a(1),u=a(2),f=function(l){function p(h,v){var y=l.call(this,h)||this;return y._writerOptions=c.applyDefaults(v,{format:"object",wellFormed:!1,group:!1,verbose:!1}),y}return o(p,l),p.prototype.serialize=function(h){return this._currentList=[],this._currentIndex=0,this._listRegister=[this._currentList],this.serializeNode(h,this._writerOptions.wellFormed),this._process(this._currentList,this._writerOptions)},p.prototype._process=function(h,v){var y,m,x,g,d,C,S;if(h.length===0)return{};for(var T={},w=!1,E=0,D=0,b=0,O=0,M=0;M<h.length;M++){var R=h[M];switch(te=Object.keys(R)[0]){case"@":continue;case"#":E++;break;case"!":D++;break;case"?":b++;break;case"$":O++;break;default:T[te]?w=!0:T[te]=!0}}var N=this._getAttrKey(),U=this._getNodeKey(u.NodeType.Text),W=this._getNodeKey(u.NodeType.Comment),I=this._getNodeKey(u.NodeType.ProcessingInstruction),G=this._getNodeKey(u.NodeType.CData);if(E===1&&h.length===1&&c.isString(h[0]["#"]))return h[0]["#"];if(w){var F={};for(M=0;M<h.length;M++)if(R=h[M],(te=Object.keys(R)[0])==="@"){var A=R["@"];(L=Object.keys(A)).length===1?F[N+L[0]]=A[L[0]]:F[N]=R["@"]}var H=[];for(M=0;M<h.length;M++)switch(R=h[M],te=Object.keys(R)[0]){case"@":break;case"#":H.push(((y={})[U]=R["#"],y));break;case"!":H.push(((m={})[W]=R["!"],m));break;case"?":H.push(((x={})[I]=R["?"],x));break;case"$":H.push(((g={})[G]=R.$,g));break;default:if((V=R)[te].length!==0&&c.isArray(V[te][0])){for(var $=[],X=V[te],Y=0;Y<X.length;Y++)$.push(this._process(X[Y],v));H.push(((d={})[te]=$,d))}else v.verbose?H.push(((C={})[te]=[this._process(V[te],v)],C)):H.push(((S={})[te]=this._process(V[te],v),S))}return F[U]=H,F}var q=1,J=1,ne=1,Q=1;for(F={},M=0;M<h.length;M++){var te;switch(R=h[M],te=Object.keys(R)[0]){case"@":A=R["@"];var L=Object.keys(A);if(v.group&&L.length!==1)F[N]=A;else for(var _ in A)F[N+_]=A[_];break;case"#":q=this._processSpecItem(R["#"],F,v.group,U,E,q);break;case"!":J=this._processSpecItem(R["!"],F,v.group,W,D,J);break;case"?":ne=this._processSpecItem(R["?"],F,v.group,I,b,ne);break;case"$":Q=this._processSpecItem(R.$,F,v.group,G,O,Q);break;default:var V;if((V=R)[te].length!==0&&c.isArray(V[te][0])){$=[],X=V[te];for(var k=0;k<X.length;k++)$.push(this._process(X[k],v));F[te]=$}else v.verbose?F[te]=[this._process(V[te],v)]:F[te]=this._process(V[te],v)}}return F},p.prototype._processSpecItem=function(h,v,y,m,x,g){var d,C;if(!y&&c.isArray(h)&&x+h.length>2)try{for(var S=s(h),T=S.next();!T.done;T=S.next()){var w=T.value;v[m+(g++).toString()]=w}}catch(E){d={error:E}}finally{try{T&&!T.done&&(C=S.return)&&C.call(S)}finally{if(d)throw d.error}}else v[x>1?m+(g++).toString():m]=h;return g},p.prototype.beginElement=function(h){var v,y,m=[];if(this._currentList.length===0)this._currentList.push(((v={})[h]=m,v));else{var x=this._currentList[this._currentList.length-1];this._isElementNode(x,h)?x[h].length!==0&&c.isArray(x[h][0])?x[h].push(m):x[h]=[x[h],m]:this._currentList.push(((y={})[h]=m,y))}this._currentIndex++,this._listRegister.length>this._currentIndex?this._listRegister[this._currentIndex]=m:this._listRegister.push(m),this._currentList=m},p.prototype.endElement=function(){this._currentList=this._listRegister[--this._currentIndex]},p.prototype.attribute=function(h,v){var y,m;if(this._currentList.length===0)this._currentList.push({"@":(y={},y[h]=v,y)});else{var x=this._currentList[this._currentList.length-1];this._isAttrNode(x)?x["@"][h]=v:this._currentList.push({"@":(m={},m[h]=v,m)})}},p.prototype.comment=function(h){if(this._currentList.length===0)this._currentList.push({"!":h});else{var v=this._currentList[this._currentList.length-1];this._isCommentNode(v)?c.isArray(v["!"])?v["!"].push(h):v["!"]=[v["!"],h]:this._currentList.push({"!":h})}},p.prototype.text=function(h){if(this._currentList.length===0)this._currentList.push({"#":h});else{var v=this._currentList[this._currentList.length-1];this._isTextNode(v)?c.isArray(v["#"])?v["#"].push(h):v["#"]=[v["#"],h]:this._currentList.push({"#":h})}},p.prototype.instruction=function(h,v){var y=v===""?h:h+" "+v;if(this._currentList.length===0)this._currentList.push({"?":y});else{var m=this._currentList[this._currentList.length-1];this._isInstructionNode(m)?c.isArray(m["?"])?m["?"].push(y):m["?"]=[m["?"],y]:this._currentList.push({"?":y})}},p.prototype.cdata=function(h){if(this._currentList.length===0)this._currentList.push({$:h});else{var v=this._currentList[this._currentList.length-1];this._isCDATANode(v)?c.isArray(v.$)?v.$.push(h):v.$=[v.$,h]:this._currentList.push({$:h})}},p.prototype._isAttrNode=function(h){return"@"in h},p.prototype._isTextNode=function(h){return"#"in h},p.prototype._isCommentNode=function(h){return"!"in h},p.prototype._isInstructionNode=function(h){return"?"in h},p.prototype._isCDATANode=function(h){return"$"in h},p.prototype._isElementNode=function(h,v){return v in h},p.prototype._getAttrKey=function(){return this._builderOptions.convert.att},p.prototype._getNodeKey=function(h){switch(h){case u.NodeType.Comment:return this._builderOptions.convert.comment;case u.NodeType.Text:return this._builderOptions.convert.text;case u.NodeType.ProcessingInstruction:return this._builderOptions.convert.ins;case u.NodeType.CData:return this._builderOptions.convert.cdata;default:throw new Error("Invalid node type.")}},p}(a(50).BaseWriter);r.ObjectWriter=f},function(n,r,a){var i=a(4),o=a(93);i({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function o(){this._items={},this._nullItems={}}return o.prototype.set=function(s,c){s===null?this._nullItems[c]=!0:(this._items[s]||(this._items[s]={}),this._items[s][c]=!0)},o.prototype.has=function(s,c){return s===null?this._nullItems[c]===!0:!!this._items[s]&&this._items[s][c]===!0},o}();r.LocalNameSet=i},function(n,r,a){var i=this&&this.__read||function(f,l){var p=typeof Symbol=="function"&&f[Symbol.iterator];if(!p)return f;var h,v,y=p.call(f),m=[];try{for(;(l===void 0||l-- >0)&&!(h=y.next()).done;)m.push(h.value)}catch(x){v={error:x}}finally{try{h&&!h.done&&(p=y.return)&&p.call(y)}finally{if(v)throw v.error}}return m};Object.defineProperty(r,"__esModule",{value:!0});var o=a(9),s=a(3),c=a(0),u=function(){function f(){}return Object.defineProperty(f.prototype,"_eventListenerList",{get:function(){return this.__eventListenerList||(this.__eventListenerList=[])},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"_eventHandlerMap",{get:function(){return this.__eventHandlerMap||(this.__eventHandlerMap={})},enumerable:!0,configurable:!0}),f.prototype.addEventListener=function(l,p,h){h===void 0&&(h={passive:!1,once:!1,capture:!1});var v,y=i(c.eventTarget_flattenMore(h),3),m=y[0],x=y[1],g=y[2];p&&(v=s.Guard.isEventListener(p)?p:{handleEvent:p},c.eventTarget_addEventListener(this,{type:l,callback:v,capture:m,passive:x,once:g,removed:!1}))},f.prototype.removeEventListener=function(l,p,h){h===void 0&&(h={capture:!1});var v=c.eventTarget_flatten(h);if(p)for(var y=0;y<this._eventListenerList.length;y++){var m=this._eventListenerList[y];if(m.type===l&&m.capture===v){if(s.Guard.isEventListener(p)&&m.callback===p){c.eventTarget_removeEventListener(this,m,y);break}if(p&&m.callback.handleEvent===p){c.eventTarget_removeEventListener(this,m,y);break}}}},f.prototype.dispatchEvent=function(l){if(l._dispatchFlag||!l._initializedFlag)throw new o.InvalidStateError;return l._isTrusted=!1,c.event_dispatch(l,this)},f.prototype._getTheParent=function(l){return null},f}();r.EventTargetImpl=u},function(n,r,a){var i,o=this&&this.__extends||(i=function(f,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var v in h)h.hasOwnProperty(v)&&(p[v]=h[v])})(f,l)},function(f,l){function p(){this.constructor=f}i(f,l),f.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(34),c=a(0),u=function(f){function l(p){var h=f.call(this)||this;return h._data=p,h}return o(l,f),Object.defineProperty(l.prototype,"data",{get:function(){return this._data},set:function(p){c.characterData_replaceData(this,0,this._data.length,p)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"length",{get:function(){return this._data.length},enumerable:!0,configurable:!0}),l.prototype.substringData=function(p,h){return c.characterData_substringData(this,p,h)},l.prototype.appendData=function(p){return c.characterData_replaceData(this,this._data.length,0,p)},l.prototype.insertData=function(p,h){c.characterData_replaceData(this,p,0,h)},l.prototype.deleteData=function(p,h){c.characterData_replaceData(this,p,h,"")},l.prototype.replaceData=function(p,h,v){c.characterData_replaceData(this,p,h,v)},Object.defineProperty(l.prototype,"previousElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"nextElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),l.prototype.before=function(){for(var p=[],h=0;h<arguments.length;h++)p[h]=arguments[h];throw new Error("Mixin: ChildNode not implemented.")},l.prototype.after=function(){for(var p=[],h=0;h<arguments.length;h++)p[h]=arguments[h];throw new Error("Mixin: ChildNode not implemented.")},l.prototype.replaceWith=function(){for(var p=[],h=0;h<arguments.length;h++)p[h]=arguments[h];throw new Error("Mixin: ChildNode not implemented.")},l.prototype.remove=function(){throw new Error("Mixin: ChildNode not implemented.")},l}(s.NodeImpl);r.CharacterDataImpl=u},function(n,r,a){var i=this&&this.__values||function(x){var g=typeof Symbol=="function"&&Symbol.iterator,d=g&&x[g],C=0;if(d)return d.call(x);if(x&&typeof x.length=="number")return{next:function(){return x&&C>=x.length&&(x=void 0),{value:x&&x[C++],done:!x}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(x,g){var d=typeof Symbol=="function"&&x[Symbol.iterator];if(!d)return x;var C,S,T=d.call(x),w=[];try{for(;(g===void 0||g-- >0)&&!(C=T.next()).done;)w.push(C.value)}catch(E){S={error:E}}finally{try{C&&!C.done&&(d=T.return)&&d.call(T)}finally{if(S)throw S.error}}return w},s=this&&this.__spread||function(){for(var x=[],g=0;g<arguments.length;g++)x=x.concat(o(arguments[g]));return x};Object.defineProperty(r,"__esModule",{value:!0});var c=a(6),u=a(3),f=a(1),l=a(17),p=a(51);function h(x){c.dom.window._signalSlots.add(x),p.observer_queueAMutationObserverMicrotask()}function v(x,g){g===void 0&&(g=!1);var d=u.Cast.asNode(x)._parent;if(d===null)return null;var C=d._shadowRoot||null;if(C===null||g&&C._mode!=="open")return null;for(var S=l.tree_getFirstDescendantNode(C,!1,!0,function(T){return u.Guard.isSlot(T)});S!==null;){if(S._name===x._name)return S;S=l.tree_getNextDescendantNode(C,S,!1,!0,function(T){return u.Guard.isSlot(T)})}return null}function y(x){var g,d,C=[],S=l.tree_rootNode(x);if(!u.Guard.isShadowRoot(S))return C;var T=S._host;try{for(var w=i(T._children),E=w.next();!E.done;E=w.next()){var D=E.value;u.Guard.isSlotable(D)&&v(D)===x&&C.push(D)}}catch(b){g={error:b}}finally{try{E&&!E.done&&(d=w.return)&&d.call(w)}finally{if(g)throw g.error}}return C}function m(x){var g,d,C=y(x);if(C.length===x._assignedNodes.length){for(var S=!0,T=0;T<C.length;T++)if(C[T]!==x._assignedNodes[T]){S=!1;break}S||h(x)}x._assignedNodes=C;try{for(var w=i(C),E=w.next();!E.done;E=w.next())E.value._assignedSlot=x}catch(D){g={error:D}}finally{try{E&&!E.done&&(d=w.return)&&d.call(w)}finally{if(g)throw g.error}}}r.shadowTree_signalASlotChange=h,r.shadowTree_isConnected=function(x){return u.Guard.isDocumentNode(l.tree_rootNode(x,!0))},r.shadowTree_isAssigned=function(x){return x._assignedSlot!==null},r.shadowTree_findASlot=v,r.shadowTree_findSlotables=y,r.shadowTree_findFlattenedSlotables=function x(g){var d,C,S,T,w=[],E=l.tree_rootNode(g);if(!u.Guard.isShadowRoot(E))return w;var D=y(g);if(f.isEmpty(D))try{for(var b=i(g._children),O=b.next();!O.done;O=b.next()){var M=O.value;u.Guard.isSlotable(M)&&D.push(M)}}catch(I){d={error:I}}finally{try{O&&!O.done&&(C=b.return)&&C.call(b)}finally{if(d)throw d.error}}try{for(var R=i(D),N=R.next();!N.done;N=R.next()){var U=N.value;if(u.Guard.isSlot(U)&&u.Guard.isShadowRoot(l.tree_rootNode(U))){var W=x(U);w.push.apply(w,s(W))}else w.push(U)}}catch(I){S={error:I}}finally{try{N&&!N.done&&(T=R.return)&&T.call(R)}finally{if(S)throw S.error}}return w},r.shadowTree_assignSlotables=m,r.shadowTree_assignSlotablesForATree=function(x){for(var g=l.tree_getFirstDescendantNode(x,!0,!1,function(d){return u.Guard.isSlot(d)});g!==null;)m(g),g=l.tree_getNextDescendantNode(x,g,!0,!1,function(d){return u.Guard.isSlot(d)})},r.shadowTree_assignASlot=function(x){var g=v(x);g!==null&&m(g)}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=/[a-z]([\0-\t\x2D\._a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*-([\0-\t\x2D\._a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*/,o=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]),s=new Set(["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"]),c=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),u=new Set(["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"]);r.customElement_isValidCustomElementName=function(f){return!!i.test(f)&&!o.has(f)},r.customElement_isValidElementName=function(f){return s.has(f)},r.customElement_isVoidElementName=function(f){return c.has(f)},r.customElement_isValidShadowHostName=function(f){return u.has(f)},r.customElement_enqueueACustomElementUpgradeReaction=function(f,l){},r.customElement_enqueueACustomElementCallbackReaction=function(f,l,p){},r.customElement_upgrade=function(f,l){},r.customElement_tryToUpgrade=function(f){},r.customElement_lookUpACustomElementDefinition=function(f,l,p,h){return null}},function(n,r,a){a(4)({target:"String",proto:!0},{repeat:a(259)})},function(n,r,a){a(278),a(68),a(179),a(94),Object.defineProperty(r,"__esModule",{value:!0});var i=a(109),o=function(){function s(c){this._builderOptions=c,c.parser&&Object.assign(this,c.parser)}return s.prototype._docType=function(c,u,f,l){return c.dtd({name:u,pubID:f,sysID:l})},s.prototype._comment=function(c,u){return c.com(u)},s.prototype._text=function(c,u){return c.txt(u)},s.prototype._instruction=function(c,u,f){return c.ins(u,f)},s.prototype._cdata=function(c,u){return c.dat(u)},s.prototype._element=function(c,u,f){return u===void 0?c.ele(f):c.ele(u,f)},s.prototype._attribute=function(c,u,f,l){return u===void 0?c.att(f,l):c.att(u,f,l)},s.prototype._sanitize=function(c){return i.sanitizeInput(c,this._builderOptions.invalidCharReplacement)},s.prototype._decodeText=function(c){return c==null?c:c.replace(/&(quot|amp|apos|lt|gt);/g,function(u,f){return s._entityTable[f]}).replace(/&#(?:x([a-fA-F0-9]+)|([0-9]+));/g,function(u,f,l){return String.fromCodePoint(parseInt(f||l,f?16:10))})},s.prototype._decodeAttributeValue=function(c){return this._decodeText(c)},s.prototype.parse=function(c,u){return this._parse(c,u)},s.prototype.docType=function(c,u,f,l){return this._docType(c,u,f,l)},s.prototype.comment=function(c,u){return this._comment(c,u)},s.prototype.text=function(c,u){return this._text(c,u)},s.prototype.instruction=function(c,u,f){return this._instruction(c,u,f)},s.prototype.cdata=function(c,u){return this._cdata(c,u)},s.prototype.element=function(c,u,f){return this._element(c,u,f)},s.prototype.attribute=function(c,u,f,l){return this._attribute(c,u,f,l)},s.prototype.sanitize=function(c){return this._sanitize(c)},s._entityTable={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},s}();r.BaseReader=o},function(n,r,a){var i=a(39);n.exports=i.DEFAULT=new i({include:[a(54)],explicit:[a(299),a(300),a(301)]})},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(185);r.XMLBuilderImpl=i.XMLBuilderImpl;var o=a(304);r.XMLBuilderCBImpl=o.XMLBuilderCBImpl;var s=a(183);r.builder=s.builder,r.create=s.create,r.fragment=s.fragment,r.convert=s.convert;var c=a(309);r.createCB=c.createCB,r.fragmentCB=c.fragmentCB},function(n,r){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch{typeof window=="object"&&(a=window)}n.exports=a},function(n,r,a){var i={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,s=o&&!i.call({1:2},1);r.f=s?function(c){var u=o(this,c);return!!u&&u.enumerable}:i},function(n,r,a){var i=a(11),o=a(21);n.exports=function(s,c){try{o(i,s,c)}catch{i[s]=c}return c}},function(n,r,a){var i=a(44),o=a(118);(n.exports=function(s,c){return o[s]||(o[s]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:i?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(n,r,a){var i=a(121),o=a(84).concat("length","prototype");r.f=Object.getOwnPropertyNames||function(s){return i(s,o)}},function(n,r,a){var i=a(47),o=Math.max,s=Math.min;n.exports=function(c,u){var f=i(c);return f<0?o(f+u,0):s(f,u)}},function(n,r){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,r){r.f=Object.getOwnPropertySymbols},function(n,r,a){var i=a(8);n.exports=!!Object.getOwnPropertySymbols&&!i(function(){return!String(Symbol())})},function(n,r,a){var i=a(127);n.exports=function(o,s,c){if(i(o),s===void 0)return o;switch(c){case 0:return function(){return o.call(s)};case 1:return function(u){return o.call(s,u)};case 2:return function(u,f){return o.call(s,u,f)};case 3:return function(u,f,l){return o.call(s,u,f,l)}}return function(){return o.apply(s,arguments)}}},function(n,r,a){var i=a(4),o=a(195),s=a(132),c=a(133),u=a(62),f=a(21),l=a(25),p=a(5),h=a(44),v=a(49),y=a(131),m=y.IteratorPrototype,x=y.BUGGY_SAFARI_ITERATORS,g=p("iterator"),d=function(){return this};n.exports=function(C,S,T,w,E,D,b){o(T,S,w);var O,M,R,N=function(H){if(H===E&&F)return F;if(!x&&H in I)return I[H];switch(H){case"keys":case"values":case"entries":return function(){return new T(this,H)}}return function(){return new T(this)}},U=S+" Iterator",W=!1,I=C.prototype,G=I[g]||I["@@iterator"]||E&&I[E],F=!x&&G||N(E),A=S=="Array"&&I.entries||G;if(A&&(O=s(A.call(new C)),m!==Object.prototype&&O.next&&(h||s(O)===m||(c?c(O,m):typeof O[g]!="function"&&f(O,g,d)),u(O,U,!0,!0),h&&(v[U]=d))),E=="values"&&G&&G.name!=="values"&&(W=!0,F=function(){return G.call(this)}),h&&!b||I[g]===F||f(I,g,F),v[S]=F,E)if(M={values:N("values"),keys:D?F:N("keys"),entries:N("entries")},b)for(R in M)(x||W||!(R in I))&&l(I,R,M[R]);else i({target:S,proto:!0,forced:x||W},M);return M}},function(n,r,a){var i=a(4),o=a(13),s=a(59),c=a(83),u=a(26),f=a(24),l=a(134),p=a(5),h=a(63),v=a(28),y=h("slice"),m=v("slice",{ACCESSORS:!0,0:0,1:2}),x=p("species"),g=[].slice,d=Math.max;i({target:"Array",proto:!0,forced:!y||!m},{slice:function(C,S){var T,w,E,D=f(this),b=u(D.length),O=c(C,b),M=c(S===void 0?b:S,b);if(s(D)&&(typeof(T=D.constructor)!="function"||T!==Array&&!s(T.prototype)?o(T)&&(T=T[x])===null&&(T=void 0):T=void 0,T===Array||T===void 0))return g.call(D,O,M);for(w=new(T===void 0?Array:T)(d(M-O,0)),E=0;O<M;O++,E++)O in D&&l(w,E,D[O]);return w.length=E,w}})},function(n,r,a){var i={};i[a(5)("toStringTag")]="z",n.exports=String(i)==="[object z]"},function(n,r,a){a(19),a(138),a(20),a(92),a(22),a(23),Object.defineProperty(r,"__esModule",{value:!0}),r.DefaultBuilderOptions={version:"1.0",encoding:void 0,standalone:void 0,keepNullNodes:!1,keepNullAttributes:!1,ignoreConverters:!1,convert:{att:"@",ins:"?",text:"#",cdata:"$",comment:"!"},defaultNamespace:{ele:void 0,att:void 0},namespaceAlias:{html:"http://www.w3.org/1999/xhtml",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},invalidCharReplacement:void 0,parser:void 0},r.XMLBuilderOptionKeys=new Set(Object.keys(r.DefaultBuilderOptions)),r.DefaultXMLBuilderCBOptions={format:"xml",wellFormed:!1,prettyPrint:!1,indent:"  ",newline:`
`,offset:0,width:0,allowEmptyTags:!1,spaceBeforeSlash:!1,keepNullNodes:!1,keepNullAttributes:!1,ignoreConverters:!1,convert:{att:"@",ins:"?",text:"#",cdata:"$",comment:"!"},defaultNamespace:{ele:void 0,att:void 0},namespaceAlias:{html:"http://www.w3.org/1999/xhtml",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"}}},function(n,r,a){var i=a(139),o=a(143);n.exports=i("Set",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},o)},function(n,r,a){var i,o,s=a(136),c=a(221),u=RegExp.prototype.exec,f=String.prototype.replace,l=u,p=(i=/a/,o=/b*/g,u.call(i,"a"),u.call(o,"a"),i.lastIndex!==0||o.lastIndex!==0),h=c.UNSUPPORTED_Y||c.BROKEN_CARET,v=/()??/.exec("")[1]!==void 0;(p||v||h)&&(l=function(y){var m,x,g,d,C=this,S=h&&C.sticky,T=s.call(C),w=C.source,E=0,D=y;return S&&((T=T.replace("y","")).indexOf("g")===-1&&(T+="g"),D=String(y).slice(C.lastIndex),C.lastIndex>0&&(!C.multiline||C.multiline&&y[C.lastIndex-1]!==`
`)&&(w="(?: "+w+")",D=" "+D,E++),x=new RegExp("^(?:"+w+")",T)),v&&(x=new RegExp("^"+w+"$(?!\\s)",T)),p&&(m=C.lastIndex),g=u.call(S?x:C,D),S?g?(g.input=g.input.slice(E),g[0]=g[0].slice(E),g.index=C.lastIndex,C.lastIndex+=g[0].length):C.lastIndex=0:p&&g&&(C.lastIndex=C.global?g.index+g[0].length:m),v&&g&&g.length>1&&f.call(g[0],x,function(){for(d=1;d<arguments.length-2;d++)arguments[d]===void 0&&(g[d]=void 0)}),g}),n.exports=l},function(n,r,a){var i=a(225),o=a(18),s=a(27),c=a(26),u=a(47),f=a(35),l=a(226),p=a(227),h=Math.max,v=Math.min,y=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,x=/\$([$&'`]|\d\d?)/g;i("replace",2,function(g,d,C,S){var T=S.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,w=S.REPLACE_KEEPS_$0,E=T?"$":"$0";return[function(b,O){var M=f(this),R=b==null?void 0:b[g];return R!==void 0?R.call(b,M,O):d.call(String(M),b,O)},function(b,O){if(!T&&w||typeof O=="string"&&O.indexOf(E)===-1){var M=C(d,b,this,O);if(M.done)return M.value}var R=o(b),N=String(this),U=typeof O=="function";U||(O=String(O));var W=R.global;if(W){var I=R.unicode;R.lastIndex=0}for(var G=[];;){var F=p(R,N);if(F===null||(G.push(F),!W))break;String(F[0])===""&&(R.lastIndex=l(N,c(R.lastIndex),I))}for(var A,H="",$=0,X=0;X<G.length;X++){F=G[X];for(var Y=String(F[0]),q=h(v(u(F.index),N.length),0),J=[],ne=1;ne<F.length;ne++)J.push((A=F[ne])===void 0?A:String(A));var Q=F.groups;if(U){var te=[Y].concat(J,q,N);Q!==void 0&&te.push(Q);var L=String(O.apply(void 0,te))}else L=D(Y,N,q,J,Q,O);q>=$&&(H+=N.slice($,q)+L,$=q+Y.length)}return H+N.slice($)}];function D(b,O,M,R,N,U){var W=M+b.length,I=R.length,G=x;return N!==void 0&&(N=s(N),G=m),d.call(U,G,function(F,A){var H;switch(A.charAt(0)){case"$":return"$";case"&":return b;case"`":return O.slice(0,M);case"'":return O.slice(W);case"<":H=N[A.slice(1,-1)];break;default:var $=+A;if($===0)return F;if($>I){var X=y($/10);return X===0?F:X<=I?R[X-1]===void 0?A.charAt(1):R[X-1]+A.charAt(1):F}H=R[$-1]}return H===void 0?"":H})}})},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function o(){this._items={},this._nullItems=[]}return o.prototype.copy=function(){var s=new o;for(var c in this._items)s._items[c]=this._items[c].slice(0);return s._nullItems=this._nullItems.slice(0),s},o.prototype.get=function(s,c){var u=c===null?this._nullItems:this._items[c]||null;if(u===null)return null;for(var f=null,l=0;l<u.length;l++)if((f=u[l])===s)return f;return f},o.prototype.has=function(s,c){var u=c===null?this._nullItems:this._items[c]||null;return u!==null&&u.indexOf(s)!==-1},o.prototype.hasPrefix=function(s){if(this._nullItems.indexOf(s)!==-1)return!0;for(var c in this._items)if(this._items[c].indexOf(s)!==-1)return!0;return!1},o.prototype.set=function(s,c){var u=c===null?this._nullItems:this._items[c]||null;c!==null&&u===null?this._items[c]=[s]:u.push(s)},o}();r.NamespacePrefixMap=i},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.Surrogate=/[\uD800-\uDFFF]/,r.ScalarValue=/[\uD800-\uDFFF]/,r.NonCharacter=/[\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]/,r.ASCIICodePoint=/[\u0000-\u007F]/,r.ASCIITabOrNewLine=/[\t\n\r]/,r.ASCIIWhiteSpace=/[\t\n\f\r ]/,r.C0Control=/[\u0000-\u001F]/,r.C0ControlOrSpace=/[\u0000-\u001F ]/,r.Control=/[\u0000-\u001F\u007F-\u009F]/,r.ASCIIDigit=/[0-9]/,r.ASCIIUpperHexDigit=/[0-9A-F]/,r.ASCIILowerHexDigit=/[0-9a-f]/,r.ASCIIHexDigit=/[0-9A-Fa-f]/,r.ASCIIUpperAlpha=/[A-Z]/,r.ASCIILowerAlpha=/[a-z]/,r.ASCIIAlpha=/[A-Za-z]/,r.ASCIIAlphanumeric=/[0-9A-Za-z]/},function(n,r,a){var i=this&&this.__values||function(O){var M=typeof Symbol=="function"&&Symbol.iterator,R=M&&O[M],N=0;if(R)return R.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&N>=O.length&&(O=void 0),{value:O&&O[N++],done:!O}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(O,M){var R=typeof Symbol=="function"&&O[Symbol.iterator];if(!R)return O;var N,U,W=R.call(O),I=[];try{for(;(M===void 0||M-- >0)&&!(N=W.next()).done;)I.push(N.value)}catch(G){U={error:G}}finally{try{N&&!N.done&&(R=W.return)&&R.call(W)}finally{if(U)throw U.error}}return I},s=this&&this.__spread||function(){for(var O=[],M=0;M<arguments.length;M++)O=O.concat(o(arguments[M]));return O};Object.defineProperty(r,"__esModule",{value:!0});var c=a(6),u=a(2),f=a(3),l=a(171),p=a(104),h=a(9),v=a(17),y=a(72),m=a(30);function x(O,M){M===void 0&&(M=void 0),M===void 0&&(M=null);var R=g(O,M,new Date,{});return R._isTrusted=!0,R}function g(O,M,R,N){var U=new O("");return U._initializedFlag=!0,U._timeStamp=R.getTime(),Object.assign(U,N),c.dom.features.steps&&m.dom_runEventConstructingSteps(U),U}function d(O,M,R,N){var U,W,I,G;R===void 0&&(R=!1),N===void 0&&(N={value:!1});var F=!1;O._dispatchFlag=!0;var A=M;if(R){var H=M._associatedDocument;f.Guard.isDocumentNode(H)&&(A=H)}var $=null,X=v.tree_retarget(O._relatedTarget,M);if(M!==X||M===O._relatedTarget){var Y=[];try{for(var q=i(O._touchTargetList),J=q.next();!J.done;J=q.next()){var ne=J.value;Y.push(v.tree_retarget(ne,M))}}catch(oe){U={error:oe}}finally{try{J&&!J.done&&(W=q.return)&&W.call(q)}finally{if(U)throw U.error}}C(O,M,A,X,Y,!1);var Q=f.Guard.isMouseEvent(O)&&O._type==="click";Q&&M._activationBehavior!==void 0&&($=M);for(var te=f.Guard.isSlotable(M)&&y.shadowTree_isAssigned(M)?M:null,L=!1,_=M._getTheParent(O);_!==null&&f.Guard.isNode(_);){if(te!==null){if(!f.Guard.isSlot(_))throw new Error("Parent node of a slotable should be a slot.");te=null;var V=v.tree_rootNode(_,!0);f.Guard.isShadowRoot(V)&&V._mode==="closed"&&(L=!0)}f.Guard.isSlotable(_)&&y.shadowTree_isAssigned(_)&&(te=_),X=v.tree_retarget(O._relatedTarget,_),Y=[];try{for(var k=(I=void 0,i(O._touchTargetList)),P=k.next();!P.done;P=k.next())ne=P.value,Y.push(v.tree_retarget(ne,_))}catch(oe){I={error:oe}}finally{try{P&&!P.done&&(G=k.return)&&G.call(k)}finally{if(I)throw I.error}}f.Guard.isWindow(_)||f.Guard.isNode(_)&&f.Guard.isNode(M)&&v.tree_isAncestorOf(v.tree_rootNode(M,!0),_,!0,!0)?(Q&&O._bubbles&&$===null&&_._activationBehavior&&($=_),C(O,_,null,X,Y,L)):_===X?_=null:(M=_,Q&&$===null&&M._activationBehavior&&($=M),C(O,_,M,X,Y,L)),_!==null&&(_=_._getTheParent(O)),L=!1}for(var j=null,z=O._path,Z=z.length-1;Z>=0;Z--)if((ie=z[Z]).shadowAdjustedTarget!==null){j=ie;break}if(j!==null)if(f.Guard.isNode(j.shadowAdjustedTarget)&&f.Guard.isShadowRoot(v.tree_rootNode(j.shadowAdjustedTarget,!0)))F=!0;else if(f.Guard.isNode(j.relatedTarget)&&f.Guard.isShadowRoot(v.tree_rootNode(j.relatedTarget,!0)))F=!0;else for(var re=0;re<j.touchTargetList.length;re++){var ie=j.touchTargetList[re];if(f.Guard.isNode(ie)&&f.Guard.isShadowRoot(v.tree_rootNode(ie,!0))){F=!0;break}}for($!==null&&$._legacyPreActivationBehavior!==void 0&&$._legacyPreActivationBehavior(O),Z=z.length-1;Z>=0;Z--)(ie=z[Z]).shadowAdjustedTarget!==null?O._eventPhase=u.EventPhase.AtTarget:O._eventPhase=u.EventPhase.Capturing,S(ie,O,"capturing",N);for(Z=0;Z<z.length;Z++){if((ie=z[Z]).shadowAdjustedTarget!==null)O._eventPhase=u.EventPhase.AtTarget;else{if(!O._bubbles)continue;O._eventPhase=u.EventPhase.Bubbling}S(ie,O,"bubbling",N)}}return O._eventPhase=u.EventPhase.None,O._currentTarget=null,O._path=[],O._dispatchFlag=!1,O._stopPropagationFlag=!1,O._stopImmediatePropagationFlag=!1,F&&(O._target=null,O._relatedTarget=null,O._touchTargetList=[]),$!==null&&(O._canceledFlag||$._activationBehavior===void 0?$._legacyCanceledActivationBehavior!==void 0&&$._legacyCanceledActivationBehavior(O):$._activationBehavior(O)),!O._canceledFlag}function C(O,M,R,N,U,W){var I=!1;f.Guard.isNode(M)&&f.Guard.isShadowRoot(v.tree_rootNode(M))&&(I=!0);var G=!1;f.Guard.isShadowRoot(M)&&M._mode==="closed"&&(G=!0),O._path.push({invocationTarget:M,invocationTargetInShadowTree:I,shadowAdjustedTarget:R,relatedTarget:N,touchTargetList:U,rootOfClosedTree:G,slotInClosedTree:W})}function S(O,M,R,N){N===void 0&&(N={value:!1});for(var U=M._path,W=-1,I=0;I<U.length;I++)if(U[I]===O){W=I;break}if(W!==-1){var G=U[W];(G.shadowAdjustedTarget!==null||W>0&&(G=U[W-1]).shadowAdjustedTarget!==null)&&(M._target=G.shadowAdjustedTarget)}if(M._relatedTarget=O.relatedTarget,M._touchTargetList=O.touchTargetList,!M._stopPropagationFlag){M._currentTarget=O.invocationTarget;var F=M._currentTarget._eventListenerList,A=new(Array.bind.apply(Array,s([void 0],F)));if(!T(M,A,R,O,N)&&M._isTrusted){var H=M._type;H==="animationend"?M._type="webkitAnimationEnd":H==="animationiteration"?M._type="webkitAnimationIteration":H==="animationstart"?M._type="webkitAnimationStart":H==="transitionend"&&(M._type="webkitTransitionEnd"),T(M,A,R,O,N),M._type=H}}}function T(O,M,R,N,U){U===void 0&&(U={value:!1});for(var W=!1,I=0;I<M.length;I++){var G=M[I];if(!G.removed){if(O._type!==G.type||(W=!0,R==="capturing"&&!G.capture)||R==="bubbling"&&G.capture)continue;if(G.once&&O._currentTarget!==null){for(var F=O._currentTarget,A=-1,H=0;H<F._eventListenerList.length;H++)if(F._eventListenerList[H]===G){A=H;break}A!==-1&&F._eventListenerList.splice(A,1)}var $=void 0,X=void 0;f.Guard.isWindow($)&&(X=$._currentEvent,N.invocationTargetInShadowTree===!1&&($._currentEvent=O)),G.passive&&(O._inPassiveListenerFlag=!0);try{G.callback.handleEvent.call(O._currentTarget,O)}catch{U.value=!0}if(G.passive&&(O._inPassiveListenerFlag=!1),f.Guard.isWindow($)&&($._currentEvent=X),O._stopImmediatePropagationFlag)return W}}return W}function w(O,M){return null}function E(O,M){return null}function D(O,M){}function b(O,M){}r.event_setTheCanceledFlag=function(O){O._cancelable&&!O._inPassiveListenerFlag&&(O._canceledFlag=!0)},r.event_initialize=function(O,M,R,N){O._initializedFlag=!0,O._stopPropagationFlag=!1,O._stopImmediatePropagationFlag=!1,O._canceledFlag=!1,O._isTrusted=!1,O._target=null,O._type=M,O._bubbles=R,O._cancelable=N},r.event_createAnEvent=x,r.event_innerEventCreationSteps=g,r.event_dispatch=d,r.event_appendToAnEventPath=C,r.event_invoke=S,r.event_innerInvoke=T,r.event_fireAnEvent=function(O,M,R,N,U){R===void 0&&(R=p.EventImpl);var W=x(R);if(W._type=O,N)for(var I in N)W[I]=N[I];return d(W,M,U)},r.event_createLegacyEvent=function(O){var M=null;switch(O.toLowerCase()){case"beforeunloadevent":case"compositionevent":break;case"customevent":M=l.CustomEventImpl;break;case"devicemotionevent":case"deviceorientationevent":case"dragevent":break;case"event":case"events":M=p.EventImpl}if(M===null)throw new h.NotSupportedError("Event constructor not found for interface "+O+".");var R=new M("");return R._type="",R._timeStamp=new Date().getTime(),R._isTrusted=!1,R._initializedFlag=!1,R},r.event_getterEventHandlerIDLAttribute=function(O,M){return null},r.event_setterEventHandlerIDLAttribute=function(O,M,R){},r.event_determineTheTargetOfAnEventHandler=w,r.event_getTheCurrentValueOfAnEventHandler=E,r.event_activateAnEventHandler=D,r.event_deactivateAnEventHandler=b},function(n,r,a){var i,o=this&&this.__extends||(i=function(C,S){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,w){T.__proto__=w}||function(T,w){for(var E in w)w.hasOwnProperty(E)&&(T[E]=w[E])})(C,S)},function(C,S){function T(){this.constructor=C}i(C,S),C.prototype=S===null?Object.create(S):(T.prototype=S.prototype,new T)}),s=this&&this.__values||function(C){var S=typeof Symbol=="function"&&Symbol.iterator,T=S&&C[S],w=0;if(T)return T.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&w>=C.length&&(C=void 0),{value:C&&C[w++],done:!C}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(C,S){var T=typeof Symbol=="function"&&C[Symbol.iterator];if(!T)return C;var w,E,D=T.call(C),b=[];try{for(;(S===void 0||S-- >0)&&!(w=D.next()).done;)b.push(w.value)}catch(O){E={error:O}}finally{try{w&&!w.done&&(T=D.return)&&T.call(D)}finally{if(E)throw E.error}}return b};Object.defineProperty(r,"__esModule",{value:!0});var u=a(6),f=a(2),l=a(9),p=a(34),h=a(3),v=a(1),y=a(7),m=a(152),x=a(0),g=a(12),d=function(C){function S(){var T=C.call(this)||this;return T._children=new Set,T._encoding={name:"UTF-8",labels:["unicode-1-1-utf-8","utf-8","utf8"]},T._contentType="application/xml",T._URL={scheme:"about",username:"",password:"",host:null,port:null,path:["blank"],query:null,fragment:null,_cannotBeABaseURLFlag:!0,_blobURLEntry:null},T._origin=null,T._type="xml",T._mode="no-quirks",T._documentElement=null,T._hasNamespaces=!1,T._nodeDocumentOverwrite=null,T}return o(S,C),Object.defineProperty(S.prototype,"_nodeDocument",{get:function(){return this._nodeDocumentOverwrite||this},set:function(T){this._nodeDocumentOverwrite=T},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"implementation",{get:function(){return this._implementation||(this._implementation=x.create_domImplementation(this))},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"URL",{get:function(){return m.urlSerializer(this._URL)},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"documentURI",{get:function(){return this.URL},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"origin",{get:function(){return"null"},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"compatMode",{get:function(){return this._mode==="quirks"?"BackCompat":"CSS1Compat"},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"characterSet",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"charset",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"inputEncoding",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"contentType",{get:function(){return this._contentType},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"doctype",{get:function(){var T,w;try{for(var E=s(this._children),D=E.next();!D.done;D=E.next()){var b=D.value;if(h.Guard.isDocumentTypeNode(b))return b}}catch(O){T={error:O}}finally{try{D&&!D.done&&(w=E.return)&&w.call(E)}finally{if(T)throw T.error}}return null},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"documentElement",{get:function(){return this._documentElement},enumerable:!0,configurable:!0}),S.prototype.getElementsByTagName=function(T){return x.node_listOfElementsWithQualifiedName(T,this)},S.prototype.getElementsByTagNameNS=function(T,w){return x.node_listOfElementsWithNamespace(T,w,this)},S.prototype.getElementsByClassName=function(T){return x.node_listOfElementsWithClassNames(T,this)},S.prototype.createElement=function(T,w){if(!x.xml_isName(T))throw new l.InvalidCharacterError;this._type==="html"&&(T=T.toLowerCase());var E=null;w!==void 0&&(E=v.isString(w)?w:w.is);var D=this._type==="html"||this._contentType==="application/xhtml+xml"?y.namespace.HTML:null;return x.element_createAnElement(this,T,D,null,E,!0)},S.prototype.createElementNS=function(T,w,E){return x.document_internalCreateElementNS(this,T,w,E)},S.prototype.createDocumentFragment=function(){return x.create_documentFragment(this)},S.prototype.createTextNode=function(T){return x.create_text(this,T)},S.prototype.createCDATASection=function(T){if(this._type==="html")throw new l.NotSupportedError;if(T.indexOf("]]>")!==-1)throw new l.InvalidCharacterError;return x.create_cdataSection(this,T)},S.prototype.createComment=function(T){return x.create_comment(this,T)},S.prototype.createProcessingInstruction=function(T,w){if(!x.xml_isName(T))throw new l.InvalidCharacterError;if(w.indexOf("?>")!==-1)throw new l.InvalidCharacterError;return x.create_processingInstruction(this,T,w)},S.prototype.importNode=function(T,w){if(w===void 0&&(w=!1),h.Guard.isDocumentNode(T)||h.Guard.isShadowRoot(T))throw new l.NotSupportedError;return x.node_clone(T,this,w)},S.prototype.adoptNode=function(T){if(h.Guard.isDocumentNode(T))throw new l.NotSupportedError;if(h.Guard.isShadowRoot(T))throw new l.HierarchyRequestError;return x.document_adopt(T,this),T},S.prototype.createAttribute=function(T){if(!x.xml_isName(T))throw new l.InvalidCharacterError;return this._type==="html"&&(T=T.toLowerCase()),x.create_attr(this,T)},S.prototype.createAttributeNS=function(T,w){var E=c(x.namespace_validateAndExtract(T,w),3),D=E[0],b=E[1],O=E[2],M=x.create_attr(this,O);return M._namespace=D,M._namespacePrefix=b,M},S.prototype.createEvent=function(T){return x.event_createLegacyEvent(T)},S.prototype.createRange=function(){var T=x.create_range();return T._start=[this,0],T._end=[this,0],T},S.prototype.createNodeIterator=function(T,w,E){w===void 0&&(w=f.WhatToShow.All),E===void 0&&(E=null);var D=x.create_nodeIterator(T,T,!0);return D._whatToShow=w,D._iteratorCollection=x.create_nodeList(T),v.isFunction(E)?(D._filter=x.create_nodeFilter(),D._filter.acceptNode=E):D._filter=E,D},S.prototype.createTreeWalker=function(T,w,E){w===void 0&&(w=f.WhatToShow.All),E===void 0&&(E=null);var D=x.create_treeWalker(T,T);return D._whatToShow=w,v.isFunction(E)?(D._filter=x.create_nodeFilter(),D._filter.acceptNode=E):D._filter=E,D},S.prototype._getTheParent=function(T){return T._type==="load"?null:u.dom.window},S.prototype.getElementById=function(T){throw new Error("Mixin: NonElementParentNode not implemented.")},Object.defineProperty(S.prototype,"children",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"firstElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"lastElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"childElementCount",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),S.prototype.prepend=function(){for(var T=[],w=0;w<arguments.length;w++)T[w]=arguments[w];throw new Error("Mixin: ParentNode not implemented.")},S.prototype.append=function(){for(var T=[],w=0;w<arguments.length;w++)T[w]=arguments[w];throw new Error("Mixin: ParentNode not implemented.")},S.prototype.querySelector=function(T){throw new Error("Mixin: ParentNode not implemented.")},S.prototype.querySelectorAll=function(T){throw new Error("Mixin: ParentNode not implemented.")},S}(p.NodeImpl);r.DocumentImpl=d,g.idl_defineConst(d.prototype,"_nodeType",f.NodeType.Document)},function(n,r,a){var i,o=this&&this.__extends||(i=function(m,x){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var C in d)d.hasOwnProperty(C)&&(g[C]=d[C])})(m,x)},function(m,x){function g(){this.constructor=m}i(m,x),m.prototype=x===null?Object.create(x):(g.prototype=x.prototype,new g)}),s=this&&this.__values||function(m){var x=typeof Symbol=="function"&&Symbol.iterator,g=x&&m[x],d=0;if(g)return g.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&d>=m.length&&(m=void 0),{value:m&&m[d++],done:!m}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(m,x){var g=typeof Symbol=="function"&&m[Symbol.iterator];if(!g)return m;var d,C,S=g.call(m),T=[];try{for(;(x===void 0||x-- >0)&&!(d=S.next()).done;)T.push(d.value)}catch(w){C={error:w}}finally{try{d&&!d.done&&(g=S.return)&&g.call(S)}finally{if(C)throw C.error}}return T};Object.defineProperty(r,"__esModule",{value:!0});var u=a(2),f=a(34),l=a(9),p=a(7),h=a(0),v=a(12),y=function(m){function x(){var g=m.call(this)||this;return g._children=new Set,g._namespace=null,g._namespacePrefix=null,g._localName="",g._customElementState="undefined",g._customElementDefinition=null,g._is=null,g._shadowRoot=null,g._attributeList=h.create_namedNodeMap(g),g._attributeChangeSteps=[],g._name="",g._assignedSlot=null,g}return o(x,m),Object.defineProperty(x.prototype,"namespaceURI",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"prefix",{get:function(){return this._namespacePrefix},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"localName",{get:function(){return this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"tagName",{get:function(){return this._htmlUppercasedQualifiedName},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"id",{get:function(){return h.element_getAnAttributeValue(this,"id")},set:function(g){h.element_setAnAttributeValue(this,"id",g)},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"className",{get:function(){return h.element_getAnAttributeValue(this,"class")},set:function(g){h.element_setAnAttributeValue(this,"class",g)},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"classList",{get:function(){var g=h.element_getAnAttributeByName("class",this);return g===null&&(g=h.create_attr(this._nodeDocument,"class")),h.create_domTokenList(this,g)},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"slot",{get:function(){return h.element_getAnAttributeValue(this,"slot")},set:function(g){h.element_setAnAttributeValue(this,"slot",g)},enumerable:!0,configurable:!0}),x.prototype.hasAttributes=function(){return this._attributeList.length!==0},Object.defineProperty(x.prototype,"attributes",{get:function(){return this._attributeList},enumerable:!0,configurable:!0}),x.prototype.getAttributeNames=function(){var g,d,C=[];try{for(var S=s(this._attributeList),T=S.next();!T.done;T=S.next()){var w=T.value;C.push(w._qualifiedName)}}catch(E){g={error:E}}finally{try{T&&!T.done&&(d=S.return)&&d.call(S)}finally{if(g)throw g.error}}return C},x.prototype.getAttribute=function(g){var d=h.element_getAnAttributeByName(g,this);return d?d._value:null},x.prototype.getAttributeNS=function(g,d){var C=h.element_getAnAttributeByNamespaceAndLocalName(g,d,this);return C?C._value:null},x.prototype.setAttribute=function(g,d){if(!h.xml_isName(g))throw new l.InvalidCharacterError;this._namespace===p.namespace.HTML&&this._nodeDocument._type==="html"&&(g=g.toLowerCase());for(var C=null,S=0;S<this._attributeList.length;S++){var T=this._attributeList[S];if(T._qualifiedName===g){C=T;break}}if(C===null)return(C=h.create_attr(this._nodeDocument,g))._value=d,void h.element_append(C,this);h.element_change(C,this,d)},x.prototype.setAttributeNS=function(g,d,C){var S=c(h.namespace_validateAndExtract(g,d),3),T=S[0],w=S[1],E=S[2];h.element_setAnAttributeValue(this,E,C,w,T)},x.prototype.removeAttribute=function(g){h.element_removeAnAttributeByName(g,this)},x.prototype.removeAttributeNS=function(g,d){h.element_removeAnAttributeByNamespaceAndLocalName(g,d,this)},x.prototype.hasAttribute=function(g){this._namespace===p.namespace.HTML&&this._nodeDocument._type==="html"&&(g=g.toLowerCase());for(var d=0;d<this._attributeList.length;d++)if(this._attributeList[d]._qualifiedName===g)return!0;return!1},x.prototype.toggleAttribute=function(g,d){if(!h.xml_isName(g))throw new l.InvalidCharacterError;this._namespace===p.namespace.HTML&&this._nodeDocument._type==="html"&&(g=g.toLowerCase());for(var C=null,S=0;S<this._attributeList.length;S++){var T=this._attributeList[S];if(T._qualifiedName===g){C=T;break}}return C===null?(d===void 0||d===!0)&&((C=h.create_attr(this._nodeDocument,g))._value="",h.element_append(C,this),!0):d!==void 0&&d!==!1||(h.element_removeAnAttributeByName(g,this),!1)},x.prototype.hasAttributeNS=function(g,d){for(var C=g||null,S=0;S<this._attributeList.length;S++){var T=this._attributeList[S];if(T._namespace===C&&T._localName===d)return!0}return!1},x.prototype.getAttributeNode=function(g){return h.element_getAnAttributeByName(g,this)},x.prototype.getAttributeNodeNS=function(g,d){return h.element_getAnAttributeByNamespaceAndLocalName(g,d,this)},x.prototype.setAttributeNode=function(g){return h.element_setAnAttribute(g,this)},x.prototype.setAttributeNodeNS=function(g){return h.element_setAnAttribute(g,this)},x.prototype.removeAttributeNode=function(g){for(var d=!1,C=0;C<this._attributeList.length;C++)if(this._attributeList[C]===g){d=!0;break}if(!d)throw new l.NotFoundError;return h.element_remove(g,this),g},x.prototype.attachShadow=function(g){if(this._namespace!==p.namespace.HTML)throw new l.NotSupportedError;if(!h.customElement_isValidCustomElementName(this._localName)&&!h.customElement_isValidShadowHostName(this._localName))throw new l.NotSupportedError;if(h.customElement_isValidCustomElementName(this._localName)||this._is!==null){var d=h.customElement_lookUpACustomElementDefinition(this._nodeDocument,this._namespace,this._localName,this._is);if(d!==null&&d.disableShadow===!0)throw new l.NotSupportedError}if(this._shadowRoot!==null)throw new l.NotSupportedError;var C=h.create_shadowRoot(this._nodeDocument,this);return C._mode=g.mode,this._shadowRoot=C,C},Object.defineProperty(x.prototype,"shadowRoot",{get:function(){var g=this._shadowRoot;return g===null||g.mode==="closed"?null:g},enumerable:!0,configurable:!0}),x.prototype.closest=function(g){throw new l.NotImplementedError},x.prototype.matches=function(g){throw new l.NotImplementedError},x.prototype.webkitMatchesSelector=function(g){return this.matches(g)},x.prototype.getElementsByTagName=function(g){return h.node_listOfElementsWithQualifiedName(g,this)},x.prototype.getElementsByTagNameNS=function(g,d){return h.node_listOfElementsWithNamespace(g,d,this)},x.prototype.getElementsByClassName=function(g){return h.node_listOfElementsWithClassNames(g,this)},x.prototype.insertAdjacentElement=function(g,d){return h.element_insertAdjacent(this,g,d)},x.prototype.insertAdjacentText=function(g,d){var C=h.create_text(this._nodeDocument,d);h.element_insertAdjacent(this,g,C)},Object.defineProperty(x.prototype,"_qualifiedName",{get:function(){return this._namespacePrefix?this._namespacePrefix+":"+this._localName:this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"_htmlUppercasedQualifiedName",{get:function(){var g=this._qualifiedName;return this._namespace===p.namespace.HTML&&this._nodeDocument._type==="html"&&(g=g.toUpperCase()),g},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"children",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"firstElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"lastElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"childElementCount",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),x.prototype.prepend=function(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];throw new Error("Mixin: ParentNode not implemented.")},x.prototype.append=function(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];throw new Error("Mixin: ParentNode not implemented.")},x.prototype.querySelector=function(g){throw new Error("Mixin: ParentNode not implemented.")},x.prototype.querySelectorAll=function(g){throw new Error("Mixin: ParentNode not implemented.")},Object.defineProperty(x.prototype,"previousElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"nextElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),x.prototype.before=function(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];throw new Error("Mixin: ChildNode not implemented.")},x.prototype.after=function(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];throw new Error("Mixin: ChildNode not implemented.")},x.prototype.replaceWith=function(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];throw new Error("Mixin: ChildNode not implemented.")},x.prototype.remove=function(){throw new Error("Mixin: ChildNode not implemented.")},Object.defineProperty(x.prototype,"assignedSlot",{get:function(){throw new Error("Mixin: Slotable not implemented.")},enumerable:!0,configurable:!0}),x._create=function(g,d,C,S){C===void 0&&(C=null),S===void 0&&(S=null);var T=new x;return T._localName=d,T._namespace=C,T._namespacePrefix=S,T._nodeDocument=g,T},x}(f.NodeImpl);r.ElementImpl=y,v.idl_defineConst(y.prototype,"_nodeType",u.NodeType.Element)},function(n,r,a){var i,o=this&&this.__extends||(i=function(l,p){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(l,p)},function(l,p){function h(){this.constructor=l}i(l,p),l.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(2),c=a(34),u=a(12),f=function(l){function p(h){h===void 0&&(h=null);var v=l.call(this)||this;return v._children=new Set,v._host=h,v}return o(p,l),p.prototype.getElementById=function(h){throw new Error("Mixin: NonElementParentNode not implemented.")},Object.defineProperty(p.prototype,"children",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"firstElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"lastElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"childElementCount",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),p.prototype.prepend=function(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];throw new Error("Mixin: ParentNode not implemented.")},p.prototype.append=function(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];throw new Error("Mixin: ParentNode not implemented.")},p.prototype.querySelector=function(h){throw new Error("Mixin: ParentNode not implemented.")},p.prototype.querySelectorAll=function(h){throw new Error("Mixin: ParentNode not implemented.")},p._create=function(h,v){v===void 0&&(v=null);var y=new p(v);return y._nodeDocument=h,y},p}(c.NodeImpl);r.DocumentFragmentImpl=f,u.idl_defineConst(f.prototype,"_nodeType",s.NodeType.DocumentFragment)},function(n,r,a){var i,o=this&&this.__extends||(i=function(h,v){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,m){y.__proto__=m}||function(y,m){for(var x in m)m.hasOwnProperty(x)&&(y[x]=m[x])})(h,v)},function(h,v){function y(){this.constructor=h}i(h,v),h.prototype=v===null?Object.create(v):(y.prototype=v.prototype,new y)}),s=this&&this.__values||function(h){var v=typeof Symbol=="function"&&Symbol.iterator,y=v&&h[v],m=0;if(y)return y.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&m>=h.length&&(h=void 0),{value:h&&h[m++],done:!h}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var c=a(2),u=a(71),f=a(0),l=a(12),p=function(h){function v(y){y===void 0&&(y="");var m=h.call(this,y)||this;return m._name="",m._assignedSlot=null,m}return o(v,h),Object.defineProperty(v.prototype,"wholeText",{get:function(){var y,m,x="";try{for(var g=s(f.text_contiguousTextNodes(this,!0)),d=g.next();!d.done;d=g.next())x+=d.value._data}catch(C){y={error:C}}finally{try{d&&!d.done&&(m=g.return)&&m.call(g)}finally{if(y)throw y.error}}return x},enumerable:!0,configurable:!0}),v.prototype.splitText=function(y){return f.text_split(this,y)},Object.defineProperty(v.prototype,"assignedSlot",{get:function(){throw new Error("Mixin: Slotable not implemented.")},enumerable:!0,configurable:!0}),v._create=function(y,m){m===void 0&&(m="");var x=new v(m);return x._nodeDocument=y,x},v}(u.CharacterDataImpl);r.TextImpl=p,l.idl_defineConst(p.prototype,"_nodeType",c.NodeType.Text)},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function o(){}return Object.defineProperty(o.prototype,"_startNode",{get:function(){return this._start[0]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"_startOffset",{get:function(){return this._start[1]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"_endNode",{get:function(){return this._end[0]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"_endOffset",{get:function(){return this._end[1]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"_collapsed",{get:function(){return this._start[0]===this._end[0]&&this._start[1]===this._end[1]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startContainer",{get:function(){return this._startNode},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"startOffset",{get:function(){return this._startOffset},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endContainer",{get:function(){return this._endNode},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"endOffset",{get:function(){return this._endOffset},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"collapsed",{get:function(){return this._collapsed},enumerable:!0,configurable:!0}),o}();r.AbstractRangeImpl=i},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(2),o=function(){function s(c){this._activeFlag=!1,this._root=c,this._whatToShow=i.WhatToShow.All,this._filter=null}return Object.defineProperty(s.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"whatToShow",{get:function(){return this._whatToShow},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"filter",{get:function(){return this._filter},enumerable:!0,configurable:!0}),s}();r.TraverserImpl=o},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(2),o=a(0),s=a(12),c=function(){function u(f,l){this._target=null,this._relatedTarget=null,this._touchTargetList=[],this._path=[],this._currentTarget=null,this._eventPhase=i.EventPhase.None,this._stopPropagationFlag=!1,this._stopImmediatePropagationFlag=!1,this._canceledFlag=!1,this._inPassiveListenerFlag=!1,this._composedFlag=!1,this._initializedFlag=!1,this._dispatchFlag=!1,this._isTrusted=!1,this._bubbles=!1,this._cancelable=!1,this._type=f,l&&(this._bubbles=l.bubbles||!1,this._cancelable=l.cancelable||!1,this._composedFlag=l.composed||!1),this._initializedFlag=!0,this._timeStamp=new Date().getTime()}return Object.defineProperty(u.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"srcElement",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"currentTarget",{get:function(){return this._currentTarget},enumerable:!0,configurable:!0}),u.prototype.composedPath=function(){var f=[],l=this._path;if(l.length===0)return f;var p=this._currentTarget;if(p===null)throw new Error("Event currentTarget is null.");f.push(p);for(var h=0,v=0,y=l.length-1;y>=0;){if(l[y].rootOfClosedTree&&v++,l[y].invocationTarget===p){h=y;break}l[y].slotInClosedTree&&v--,y--}var m=v,x=v;for(y=h-1;y>=0;)l[y].rootOfClosedTree&&m++,m<=x&&f.unshift(l[y].invocationTarget),l[y].slotInClosedTree&&--m<x&&(x=m),y--;for(m=v,x=v,y=h+1;y<l.length;)l[y].slotInClosedTree&&m++,m<=x&&f.push(l[y].invocationTarget),l[y].rootOfClosedTree&&--m<x&&(x=m),y++;return f},Object.defineProperty(u.prototype,"eventPhase",{get:function(){return this._eventPhase},enumerable:!0,configurable:!0}),u.prototype.stopPropagation=function(){this._stopPropagationFlag=!0},Object.defineProperty(u.prototype,"cancelBubble",{get:function(){return this._stopPropagationFlag},set:function(f){f&&this.stopPropagation()},enumerable:!0,configurable:!0}),u.prototype.stopImmediatePropagation=function(){this._stopPropagationFlag=!0,this._stopImmediatePropagationFlag=!0},Object.defineProperty(u.prototype,"bubbles",{get:function(){return this._bubbles},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"cancelable",{get:function(){return this._cancelable},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"returnValue",{get:function(){return!this._canceledFlag},set:function(f){f||o.event_setTheCanceledFlag(this)},enumerable:!0,configurable:!0}),u.prototype.preventDefault=function(){o.event_setTheCanceledFlag(this)},Object.defineProperty(u.prototype,"defaultPrevented",{get:function(){return this._canceledFlag},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"composed",{get:function(){return this._composedFlag},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isTrusted",{get:function(){return this._isTrusted},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"timeStamp",{get:function(){return this._timeStamp},enumerable:!0,configurable:!0}),u.prototype.initEvent=function(f,l,p){l===void 0&&(l=!1),p===void 0&&(p=!1),this._dispatchFlag||o.event_initialize(this,f,l,p)},u.NONE=0,u.CAPTURING_PHASE=1,u.AT_TARGET=2,u.BUBBLING_PHASE=3,u}();r.EventImpl=c,s.idl_defineConst(c.prototype,"NONE",0),s.idl_defineConst(c.prototype,"CAPTURING_PHASE",1),s.idl_defineConst(c.prototype,"AT_TARGET",2),s.idl_defineConst(c.prototype,"BUBBLING_PHASE",3)},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(2),o=a(9);r.traversal_filter=function(s,c){if(s._activeFlag)throw new o.InvalidStateError;var u=1<<c._nodeType-1;if(!(s.whatToShow&u))return i.FilterResult.Skip;if(!s.filter)return i.FilterResult.Accept;s._activeFlag=!0;var f=i.FilterResult.Reject;try{f=s.filter.acceptNode(c)}catch(l){throw s._activeFlag=!1,l}return s._activeFlag=!1,f}},function(n,r,a){var i=this&&this.__read||function(x,g){var d=typeof Symbol=="function"&&x[Symbol.iterator];if(!d)return x;var C,S,T=d.call(x),w=[];try{for(;(g===void 0||g-- >0)&&!(C=T.next()).done;)w.push(C.value)}catch(E){S={error:E}}finally{try{C&&!C.done&&(d=T.return)&&d.call(T)}finally{if(S)throw S.error}}return w},o=this&&this.__values||function(x){var g=typeof Symbol=="function"&&Symbol.iterator,d=g&&x[g],C=0;if(d)return d.call(x);if(x&&typeof x.length=="number")return{next:function(){return x&&C>=x.length&&(x=void 0),{value:x&&x[C++],done:!x}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var s=a(6),c=a(3),u=a(1),f=a(99),l=a(73),p=a(17),h=a(173),v=a(30),y=a(52),m=a(37);r.document_elementInterface=function(x,g){return f.ElementImpl},r.document_internalCreateElementNS=function(x,g,d,C){var S=i(h.namespace_validateAndExtract(g,d),3),T=S[0],w=S[1],E=S[2],D=null;return C!==void 0&&(D=u.isString(C)?C:C.is),y.element_createAnElement(x,E,T,w,D,!0)},r.document_adopt=function(x,g){var d,C;if(x._nodeDocument!==g||x._parent!==null){var S=x._nodeDocument;if(x._parent&&m.mutation_remove(x,x._parent),g!==S)for(var T=p.tree_getFirstDescendantNode(x,!0,!0);T!==null;){if(T._nodeDocument=g,c.Guard.isElementNode(T))try{for(var w=(d=void 0,o(T._attributeList._asArray())),E=w.next();!E.done;E=w.next())E.value._nodeDocument=g}catch(D){d={error:D}}finally{try{E&&!E.done&&(C=w.return)&&C.call(w)}finally{if(d)throw d.error}}s.dom.features.customElements&&c.Guard.isElementNode(T)&&T._customElementState==="custom"&&l.customElement_enqueueACustomElementCallbackReaction(T,"adoptedCallback",[S,g]),s.dom.features.steps&&v.dom_runAdoptingSteps(T,S),T=p.tree_getNextDescendantNode(x,T,!0,!0)}}}},function(n,r,a){var i=this&&this.__values||function(p){var h=typeof Symbol=="function"&&Symbol.iterator,v=h&&p[h],y=0;if(v)return v.call(p);if(p&&typeof p.length=="number")return{next:function(){return p&&y>=p.length&&(p=void 0),{value:p&&p[y++],done:!p}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(6),s=a(3),c=a(9),u=a(17),f=a(51),l=a(30);r.characterData_replaceData=function(p,h,v,y){var m,x,g=u.tree_nodeLength(p);if(h>g)throw new c.IndexSizeError("Offset exceeds character data length. Offset: "+h+", Length: "+g+", Node is "+p.nodeName+".");h+v>g&&(v=g-h),o.dom.features.mutationObservers&&f.observer_queueMutationRecord("characterData",p,null,null,p._data,[],[],null,null);var d=p._data.substring(0,h)+y+p._data.substring(h+v);p._data=d;try{for(var C=i(o.dom.rangeList),S=C.next();!S.done;S=C.next()){var T=S.value;T._start[0]===p&&T._start[1]>h&&T._start[1]<=h+v&&(T._start[1]=h),T._end[0]===p&&T._end[1]>h&&T._end[1]<=h+v&&(T._end[1]=h),T._start[0]===p&&T._start[1]>h+v&&(T._start[1]+=y.length-v),T._end[0]===p&&T._end[1]>h+v&&(T._end[1]+=y.length-v)}}catch(w){m={error:w}}finally{try{S&&!S.done&&(x=C.return)&&x.call(C)}finally{if(m)throw m.error}}o.dom.features.steps&&s.Guard.isTextNode(p)&&p._parent!==null&&l.dom_runChildTextContentChangeSteps(p._parent)},r.characterData_substringData=function(p,h,v){var y=u.tree_nodeLength(p);if(h>y)throw new c.IndexSizeError("Offset exceeds character data length. Offset: "+h+", Length: "+y+", Node is "+p.nodeName+".");return h+v>y?p._data.substr(h):p._data.substr(h,v)}},function(n,r,a){var i=this&&this.__read||function(l,p){var h=typeof Symbol=="function"&&l[Symbol.iterator];if(!h)return l;var v,y,m=h.call(l),x=[];try{for(;(p===void 0||p-- >0)&&!(v=m.next()).done;)x.push(v.value)}catch(g){y={error:g}}finally{try{v&&!v.done&&(h=m.return)&&h.call(m)}finally{if(y)throw y.error}}return x},o=this&&this.__spread||function(){for(var l=[],p=0;p<arguments.length;p++)l=l.concat(i(arguments[p]));return l},s=this&&this.__values||function(l){var p=typeof Symbol=="function"&&Symbol.iterator,h=p&&l[p],v=0;if(h)return h.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&v>=l.length&&(l=void 0),{value:l&&l[v++],done:!l}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var c=a(7);function u(l){var p=c.string.splitAStringOnASCIIWhitespace(l);return new Set(p)}function f(l){return o(l).join(" ")}r.orderedSet_parse=u,r.orderedSet_serialize=f,r.orderedSet_sanitize=function(l){return f(u(l))},r.orderedSet_contains=function(l,p,h){var v,y,m,x;try{for(var g=s(p),d=g.next();!d.done;d=g.next()){var C=d.value,S=!1;try{for(var T=(m=void 0,s(l)),w=T.next();!w.done;w=T.next()){var E=w.value;if(h){if(E===C){S=!0;break}}else if(E.toUpperCase()===C.toUpperCase()){S=!0;break}}}catch(D){m={error:D}}finally{try{w&&!w.done&&(x=T.return)&&x.call(T)}finally{if(m)throw m.error}}if(!S)return!1}}catch(D){v={error:D}}finally{try{d&&!d.done&&(y=g.return)&&y.call(g)}finally{if(v)throw v.error}}return!0}},function(n,r,a){a(179),Object.defineProperty(r,"__esModule",{value:!0});var i=a(262),o=a(110),s=a(1);o.dom.setFeatures(!1),r.createDocument=function(){var c=new i.DOMImplementation().createDocument(null,"root",null);return c.documentElement&&c.removeChild(c.documentElement),c},r.sanitizeInput=function(c,u){if(c==null)return c;if(u===void 0)return c+"";var f="";c+="";for(var l=0;l<c.length;l++){var p=c.charCodeAt(l);if(p===9||p===10||p===13||p>=32&&p<=55295||p>=57344&&p<=65533)f+=c.charAt(l);else if(p>=55296&&p<=56319&&l<c.length-1){var h=c.charCodeAt(l+1);h>=56320&&h<=57343?(p=1024*(p-55296)+h-56320+65536,f+=String.fromCodePoint(p),l++):f+=s.isString(u)?u:u(c.charAt(l),l,c)}else f+=s.isString(u)?u:u(c.charAt(l),l,c)}return f}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(1),o=a(153);r.AbortController=o.AbortControllerImpl;var s=a(154);r.AbortSignal=s.AbortSignalImpl;var c=a(102);r.AbstractRange=c.AbstractRangeImpl;var u=a(157);r.Attr=u.AttrImpl;var f=a(158);r.CDATASection=f.CDATASectionImpl;var l=a(71);r.CharacterData=l.CharacterDataImpl;var p=a(263),h=a(159);r.Comment=h.CommentImpl;var v=a(171);r.CustomEvent=v.CustomEventImpl;var y=a(100);r.DocumentFragment=y.DocumentFragmentImpl;var m=a(98);r.Document=m.DocumentImpl;var x=a(264),g=a(155);r.DocumentType=g.DocumentTypeImpl;var d=a(6);r.dom=d.dom;var C=a(148);r.DOMImplementation=C.DOMImplementationImpl;var S=a(170);r.DOMTokenList=S.DOMTokenListImpl;var T=a(99);r.Element=T.ElementImpl;var w=a(104);r.Event=w.EventImpl;var E=a(70);r.EventTarget=E.EventTargetImpl;var D=a(161);r.HTMLCollection=D.HTMLCollectionImpl;var b=a(265);r.MutationObserver=b.MutationObserverImpl;var O=a(169);r.MutationRecord=O.MutationRecordImpl;var M=a(164);r.NamedNodeMap=M.NamedNodeMapImpl;var R=a(168);r.NodeFilter=R.NodeFilterImpl;var N=a(34);r.Node=N.NodeImpl;var U=a(166);r.NodeIterator=U.NodeIteratorImpl;var W=a(162);r.NodeList=W.NodeListImpl;var I=a(163);r.NodeListStatic=I.NodeListStaticImpl;var G=a(266),F=a(267),A=a(268),H=a(160);r.ProcessingInstruction=H.ProcessingInstructionImpl;var $=a(165);r.Range=$.RangeImpl;var X=a(156);r.ShadowRoot=X.ShadowRootImpl;var Y=a(269),q=a(270);r.StaticRange=q.StaticRangeImpl;var J=a(101);r.Text=J.TextImpl;var ne=a(103);r.Traverser=ne.TraverserImpl;var Q=a(167);r.TreeWalker=Q.TreeWalkerImpl;var te=a(149);r.Window=te.WindowImpl;var L=a(151);r.XMLDocument=L.XMLDocumentImpl,i.applyMixin(T.ElementImpl,p.ChildNodeImpl),i.applyMixin(l.CharacterDataImpl,p.ChildNodeImpl),i.applyMixin(g.DocumentTypeImpl,p.ChildNodeImpl),i.applyMixin(m.DocumentImpl,x.DocumentOrShadowRootImpl),i.applyMixin(X.ShadowRootImpl,x.DocumentOrShadowRootImpl),i.applyMixin(T.ElementImpl,G.NonDocumentTypeChildNodeImpl),i.applyMixin(l.CharacterDataImpl,G.NonDocumentTypeChildNodeImpl),i.applyMixin(m.DocumentImpl,F.NonElementParentNodeImpl),i.applyMixin(y.DocumentFragmentImpl,F.NonElementParentNodeImpl),i.applyMixin(m.DocumentImpl,A.ParentNodeImpl),i.applyMixin(y.DocumentFragmentImpl,A.ParentNodeImpl),i.applyMixin(T.ElementImpl,A.ParentNodeImpl),i.applyMixin(J.TextImpl,Y.SlotableImpl),i.applyMixin(T.ElementImpl,Y.SlotableImpl)},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),function(i){i[i.EOF=0]="EOF",i[i.Declaration=1]="Declaration",i[i.DocType=2]="DocType",i[i.Element=3]="Element",i[i.Text=4]="Text",i[i.CDATA=5]="CDATA",i[i.PI=6]="PI",i[i.Comment=7]="Comment",i[i.ClosingTag=8]="ClosingTag"}(r.TokenType||(r.TokenType={}))},function(n,r,a){a(64),a(20),a(66);var i,o=this&&this.__extends||(i=function(u,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var h in p)p.hasOwnProperty(h)&&(l[h]=p[h])})(u,f)},function(u,f){function l(){this.constructor=u}i(u,f),u.prototype=f===null?Object.create(f):(l.prototype=f.prototype,new l)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(1),c=function(u){function f(){return u!==null&&u.apply(this,arguments)||this}return o(f,u),f.prototype._parse=function(l,p){var h=this,v=this._builderOptions,y=null;return s.isFunction(p)?y=this.parse(l,p.apply(this)):s.isArray(p)||s.isSet(p)?s.forEachArray(p,function(m){return y=h.parse(l,m)},this):s.isMap(p)||s.isObject(p)?s.forEachObject(p,function(m,x){if(s.isFunction(x)&&(x=x.apply(h)),v.ignoreConverters||m.indexOf(v.convert.att)!==0)if(v.ignoreConverters||m.indexOf(v.convert.text)!==0)if(v.ignoreConverters||m.indexOf(v.convert.cdata)!==0)if(v.ignoreConverters||m.indexOf(v.convert.comment)!==0)if(v.ignoreConverters||m.indexOf(v.convert.ins)!==0){if(!((s.isArray(x)||s.isSet(x))&&s.isEmpty(x))){if((s.isMap(x)||s.isObject(x))&&s.isEmpty(x))y=h.element(l,void 0,h.sanitize(m))||y;else if(v.keepNullNodes||x!=null)if(s.isArray(x)||s.isSet(x))s.forEachArray(x,function(T){var w={};w[m]=T,y=h.parse(l,w)},h);else if(s.isMap(x)||s.isObject(x))(g=h.element(l,void 0,h.sanitize(m)))&&(y=g,h.parse(g,x));else if(x!=null&&x!==""){var g;(g=h.element(l,void 0,h.sanitize(m)))&&(y=g,h.text(g,h._decodeText(h.sanitize(x))))}else y=h.element(l,void 0,h.sanitize(m))||y}}else if(s.isString(x)){var d=x.indexOf(" "),C=d===-1?x:x.substr(0,d),S=d===-1?"":x.substr(d+1);y=h.instruction(l,h.sanitize(C),h.sanitize(S))||y}else s.isArray(x)||s.isSet(x)?s.forEachArray(x,function(T){var w=T.indexOf(" "),E=w===-1?T:T.substr(0,w),D=w===-1?"":T.substr(w+1);y=h.instruction(l,h.sanitize(E),h.sanitize(D))||y},h):s.forEachObject(x,function(T,w){return y=h.instruction(l,h.sanitize(T),h.sanitize(w))||y},h);else s.isArray(x)||s.isSet(x)?s.forEachArray(x,function(T){return y=h.comment(l,h.sanitize(T))||y},h):y=h.comment(l,h.sanitize(x))||y;else s.isArray(x)||s.isSet(x)?s.forEachArray(x,function(T){return y=h.cdata(l,h.sanitize(T))||y},h):y=h.cdata(l,h.sanitize(x))||y;else y=s.isMap(x)||s.isObject(x)?h.parse(l,x):h.text(l,h._decodeText(h.sanitize(x)))||y;else if(m===v.convert.att){if(s.isArray(x)||s.isSet(x))throw new Error("Invalid attribute: "+x.toString()+". "+l._debugInfo());s.forEachObject(x,function(T,w){y=h.attribute(l,void 0,h.sanitize(T),h._decodeAttributeValue(h.sanitize(w)))||y})}else y=h.attribute(l,void 0,h.sanitize(m.substr(v.convert.att.length)),h._decodeAttributeValue(h.sanitize(x)))||y},this):(v.keepNullNodes||p!=null)&&(y=this.text(l,this._decodeText(this.sanitize(p)))||y),y||l},f}(a(75).BaseReader);r.ObjectReader=c},function(n,r,a){var i=a(39);n.exports=new i({explicit:[a(286),a(287),a(288)]})},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(o){this.level=0,this._builderOptions=o,this._writerOptions=o};r.BaseCBWriter=i},function(n,r,a){var i=a(16),o=a(8),s=a(116);n.exports=!i&&!o(function(){return Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a!=7})},function(n,r,a){var i=a(11),o=a(13),s=i.document,c=o(s)&&o(s.createElement);n.exports=function(u){return c?s.createElement(u):{}}},function(n,r,a){var i=a(118),o=Function.toString;typeof i.inspectSource!="function"&&(i.inspectSource=function(s){return o.call(s)}),n.exports=i.inspectSource},function(n,r,a){var i=a(11),o=a(80),s=i["__core-js_shared__"]||o("__core-js_shared__",{});n.exports=s},function(n,r,a){var i=a(14),o=a(187),s=a(55),c=a(15);n.exports=function(u,f){for(var l=o(f),p=c.f,h=s.f,v=0;v<l.length;v++){var y=l[v];i(u,y)||p(u,y,h(f,y))}}},function(n,r,a){var i=a(11);n.exports=i},function(n,r,a){var i=a(14),o=a(24),s=a(122).indexOf,c=a(45);n.exports=function(u,f){var l,p=o(u),h=0,v=[];for(l in p)!i(c,l)&&i(p,l)&&v.push(l);for(;f.length>h;)i(p,l=f[h++])&&(~s(v,l)||v.push(l));return v}},function(n,r,a){var i=a(24),o=a(26),s=a(83),c=function(u){return function(f,l,p){var h,v=i(f),y=o(v.length),m=s(p,y);if(u&&l!=l){for(;y>m;)if((h=v[m++])!=h)return!0}else for(;y>m;m++)if((u||m in v)&&v[m]===l)return u||m||0;return!u&&-1}};n.exports={includes:c(!0),indexOf:c(!1)}},function(n,r,a){var i=a(8),o=/#|\.prototype\./,s=function(p,h){var v=u[c(p)];return v==l||v!=f&&(typeof h=="function"?i(h):!!h)},c=s.normalize=function(p){return String(p).replace(o,".").toLowerCase()},u=s.data={},f=s.NATIVE="N",l=s.POLYFILL="P";n.exports=s},function(n,r,a){var i=a(86);n.exports=i&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(n,r,a){var i=a(5);r.f=i},function(n,r,a){var i=a(120),o=a(14),s=a(125),c=a(15).f;n.exports=function(u){var f=i.Symbol||(i.Symbol={});o(f,u)||c(f,u,{value:s.f(u)})}},function(n,r){n.exports=function(a){if(typeof a!="function")throw TypeError(String(a)+" is not a function");return a}},function(n,r,a){var i=a(13),o=a(59),s=a(5)("species");n.exports=function(c,u){var f;return o(c)&&(typeof(f=c.constructor)!="function"||f!==Array&&!o(f.prototype)?i(f)&&(f=f[s])===null&&(f=void 0):f=void 0),new(f===void 0?Array:f)(u===0?0:u)}},function(n,r,a){var i,o,s=a(11),c=a(193),u=s.process,f=u&&u.versions,l=f&&f.v8;l?o=(i=l.split("."))[0]+i[1]:c&&(!(i=c.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=c.match(/Chrome\/(\d+)/))&&(o=i[1]),n.exports=o&&+o},function(n,r,a){var i=a(5),o=a(60),s=a(15),c=i("unscopables"),u=Array.prototype;u[c]==null&&s.f(u,c,{configurable:!0,value:o(null)}),n.exports=function(f){u[c][f]=!0}},function(n,r,a){var i,o,s,c=a(132),u=a(21),f=a(14),l=a(5),p=a(44),h=l("iterator"),v=!1;[].keys&&("next"in(s=[].keys())?(o=c(c(s)))!==Object.prototype&&(i=o):v=!0),i==null&&(i={}),p||f(i,h)||u(i,h,function(){return this}),n.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:v}},function(n,r,a){var i=a(14),o=a(27),s=a(57),c=a(196),u=s("IE_PROTO"),f=Object.prototype;n.exports=c?Object.getPrototypeOf:function(l){return l=o(l),i(l,u)?l[u]:typeof l.constructor=="function"&&l instanceof l.constructor?l.constructor.prototype:l instanceof Object?f:null}},function(n,r,a){var i=a(18),o=a(197);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var s,c=!1,u={};try{(s=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(u,[]),c=u instanceof Array}catch{}return function(f,l){return i(f),o(l),c?s.call(f,l):f.__proto__=l,f}}():void 0)},function(n,r,a){var i=a(56),o=a(15),s=a(40);n.exports=function(c,u,f){var l=i(u);l in c?o.f(c,l,s(0,f)):c[l]=f}},function(n,r,a){var i=a(90),o=a(42),s=a(5)("toStringTag"),c=o(function(){return arguments}())=="Arguments";n.exports=i?o:function(u){var f,l,p;return u===void 0?"Undefined":u===null?"Null":typeof(l=function(h,v){try{return h[v]}catch{}}(f=Object(u),s))=="string"?l:c?o(f):(p=o(f))=="Object"&&typeof f.callee=="function"?"Arguments":p}},function(n,r,a){var i=a(18);n.exports=function(){var o=i(this),s="";return o.global&&(s+="g"),o.ignoreCase&&(s+="i"),o.multiline&&(s+="m"),o.dotAll&&(s+="s"),o.unicode&&(s+="u"),o.sticky&&(s+="y"),s}},function(n,r,a){var i=a(47),o=a(35),s=function(c){return function(u,f){var l,p,h=String(o(u)),v=i(f),y=h.length;return v<0||v>=y?c?"":void 0:(l=h.charCodeAt(v))<55296||l>56319||v+1===y||(p=h.charCodeAt(v+1))<56320||p>57343?c?h.charAt(v):l:c?h.slice(v,v+2):p-56320+(l-55296<<10)+65536}};n.exports={codeAt:s(!1),charAt:s(!0)}},function(n,r,a){var i=a(4),o=a(27),s=a(61);i({target:"Object",stat:!0,forced:a(8)(function(){s(1)})},{keys:function(c){return s(o(c))}})},function(n,r,a){var i=a(4),o=a(11),s=a(123),c=a(25),u=a(140),f=a(141),l=a(142),p=a(13),h=a(8),v=a(208),y=a(62),m=a(209);n.exports=function(x,g,d){var C=x.indexOf("Map")!==-1,S=x.indexOf("Weak")!==-1,T=C?"set":"add",w=o[x],E=w&&w.prototype,D=w,b={},O=function(I){var G=E[I];c(E,I,I=="add"?function(F){return G.call(this,F===0?0:F),this}:I=="delete"?function(F){return!(S&&!p(F))&&G.call(this,F===0?0:F)}:I=="get"?function(F){return S&&!p(F)?void 0:G.call(this,F===0?0:F)}:I=="has"?function(F){return!(S&&!p(F))&&G.call(this,F===0?0:F)}:function(F,A){return G.call(this,F===0?0:F,A),this})};if(s(x,typeof w!="function"||!(S||E.forEach&&!h(function(){new w().entries().next()}))))D=d.getConstructor(g,x,C,T),u.REQUIRED=!0;else if(s(x,!0)){var M=new D,R=M[T](S?{}:-0,1)!=M,N=h(function(){M.has(1)}),U=v(function(I){new w(I)}),W=!S&&h(function(){for(var I=new w,G=5;G--;)I[T](G,G);return!I.has(-0)});U||((D=g(function(I,G){l(I,D,x);var F=m(new w,I,D);return G!=null&&f(G,F[T],F,C),F})).prototype=E,E.constructor=D),(N||W)&&(O("delete"),O("has"),C&&O("get")),(W||R)&&O(T),S&&E.clear&&delete E.clear}return b[x]=D,i({global:!0,forced:D!=w},b),y(D,x),S||d.setStrong(D,x,C),D}},function(n,r,a){var i=a(45),o=a(13),s=a(14),c=a(15).f,u=a(58),f=a(204),l=u("meta"),p=0,h=Object.isExtensible||function(){return!0},v=function(m){c(m,l,{value:{objectID:"O"+ ++p,weakData:{}}})},y=n.exports={REQUIRED:!1,fastKey:function(m,x){if(!o(m))return typeof m=="symbol"?m:(typeof m=="string"?"S":"P")+m;if(!s(m,l)){if(!h(m))return"F";if(!x)return"E";v(m)}return m[l].objectID},getWeakData:function(m,x){if(!s(m,l)){if(!h(m))return!0;if(!x)return!1;v(m)}return m[l].weakData},onFreeze:function(m){return f&&y.REQUIRED&&h(m)&&!s(m,l)&&v(m),m}};i[l]=!0},function(n,r,a){var i=a(18),o=a(205),s=a(26),c=a(87),u=a(206),f=a(207),l=function(p,h){this.stopped=p,this.result=h};(n.exports=function(p,h,v,y,m){var x,g,d,C,S,T,w,E=c(h,v,y?2:1);if(m)x=p;else{if(typeof(g=u(p))!="function")throw TypeError("Target is not iterable");if(o(g)){for(d=0,C=s(p.length);C>d;d++)if((S=y?E(i(w=p[d])[0],w[1]):E(p[d]))&&S instanceof l)return S;return new l(!1)}x=g.call(p)}for(T=x.next;!(w=T.call(x)).done;)if(typeof(S=f(x,E,w.value,y))=="object"&&S&&S instanceof l)return S;return new l(!1)}).stop=function(p){return new l(!0,p)}},function(n,r){n.exports=function(a,i,o){if(!(a instanceof i))throw TypeError("Incorrect "+(o?o+" ":"")+"invocation");return a}},function(n,r,a){var i=a(15).f,o=a(60),s=a(210),c=a(87),u=a(142),f=a(141),l=a(88),p=a(211),h=a(16),v=a(140).fastKey,y=a(43),m=y.set,x=y.getterFor;n.exports={getConstructor:function(g,d,C,S){var T=g(function(b,O){u(b,T,d),m(b,{type:d,index:o(null),first:void 0,last:void 0,size:0}),h||(b.size=0),O!=null&&f(O,b[S],b,C)}),w=x(d),E=function(b,O,M){var R,N,U=w(b),W=D(b,O);return W?W.value=M:(U.last=W={index:N=v(O,!0),key:O,value:M,previous:R=U.last,next:void 0,removed:!1},U.first||(U.first=W),R&&(R.next=W),h?U.size++:b.size++,N!=="F"&&(U.index[N]=W)),b},D=function(b,O){var M,R=w(b),N=v(O);if(N!=="F")return R.index[N];for(M=R.first;M;M=M.next)if(M.key==O)return M};return s(T.prototype,{clear:function(){for(var b=w(this),O=b.index,M=b.first;M;)M.removed=!0,M.previous&&(M.previous=M.previous.next=void 0),delete O[M.index],M=M.next;b.first=b.last=void 0,h?b.size=0:this.size=0},delete:function(b){var O=w(this),M=D(this,b);if(M){var R=M.next,N=M.previous;delete O.index[M.index],M.removed=!0,N&&(N.next=R),R&&(R.previous=N),O.first==M&&(O.first=R),O.last==M&&(O.last=N),h?O.size--:this.size--}return!!M},forEach:function(b){for(var O,M=w(this),R=c(b,arguments.length>1?arguments[1]:void 0,3);O=O?O.next:M.first;)for(R(O.value,O.key,this);O&&O.removed;)O=O.previous},has:function(b){return!!D(this,b)}}),s(T.prototype,C?{get:function(b){var O=D(this,b);return O&&O.value},set:function(b,O){return E(this,b===0?0:b,O)}}:{add:function(b){return E(this,b=b===0?0:b,b)}}),h&&i(T.prototype,"size",{get:function(){return w(this).size}}),T},setStrong:function(g,d,C){var S=d+" Iterator",T=x(d),w=x(S);l(g,d,function(E,D){m(this,{type:S,target:E,state:T(E),kind:D,last:void 0})},function(){for(var E=w(this),D=E.kind,b=E.last;b&&b.removed;)b=b.previous;return E.target&&(E.last=b=b?b.next:E.state.first)?D=="keys"?{value:b.key,done:!1}:D=="values"?{value:b.value,done:!1}:{value:[b.key,b.value],done:!1}:(E.target=void 0,{value:void 0,done:!0})},C?"entries":"values",!C,!0),p(d)}}},function(n,r,a){var i,o=a(4),s=a(55).f,c=a(26),u=a(222),f=a(35),l=a(224),p=a(44),h="".endsWith,v=Math.min,y=l("endsWith");o({target:"String",proto:!0,forced:!!(p||y||(i=s(String.prototype,"endsWith"),!i||i.writable))&&!y},{endsWith:function(m){var x=String(f(this));u(m);var g=arguments.length>1?arguments[1]:void 0,d=c(x.length),C=g===void 0?d:v(c(g),d),S=String(m);return h?h.call(x,S,C):x.slice(C-S.length,C)===S}})},function(n,r,a){(function(i){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var o=a(229),s=a(230),c=a(231);function u(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(L,_){if(u()<_)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(L=new Uint8Array(_)).__proto__=l.prototype:(L===null&&(L=new l(_)),L.length=_),L}function l(L,_,V){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(L,_,V);if(typeof L=="number"){if(typeof _=="string")throw new Error("If encoding is specified then the first argument must be a string");return v(this,L)}return p(this,L,_,V)}function p(L,_,V,k){if(typeof _=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&_ instanceof ArrayBuffer?function(P,j,z,Z){if(j.byteLength,z<0||j.byteLength<z)throw new RangeError("'offset' is out of bounds");if(j.byteLength<z+(Z||0))throw new RangeError("'length' is out of bounds");return j=z===void 0&&Z===void 0?new Uint8Array(j):Z===void 0?new Uint8Array(j,z):new Uint8Array(j,z,Z),l.TYPED_ARRAY_SUPPORT?(P=j).__proto__=l.prototype:P=y(P,j),P}(L,_,V,k):typeof _=="string"?function(P,j,z){if(typeof z=="string"&&z!==""||(z="utf8"),!l.isEncoding(z))throw new TypeError('"encoding" must be a valid string encoding');var Z=0|x(j,z),re=(P=f(P,Z)).write(j,z);return re!==Z&&(P=P.slice(0,re)),P}(L,_,V):function(P,j){if(l.isBuffer(j)){var z=0|m(j.length);return(P=f(P,z)).length===0||j.copy(P,0,0,z),P}if(j){if(typeof ArrayBuffer<"u"&&j.buffer instanceof ArrayBuffer||"length"in j)return typeof j.length!="number"||(Z=j.length)!=Z?f(P,0):y(P,j);if(j.type==="Buffer"&&c(j.data))return y(P,j.data)}var Z;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(L,_)}function h(L){if(typeof L!="number")throw new TypeError('"size" argument must be a number');if(L<0)throw new RangeError('"size" argument must not be negative')}function v(L,_){if(h(_),L=f(L,_<0?0:0|m(_)),!l.TYPED_ARRAY_SUPPORT)for(var V=0;V<_;++V)L[V]=0;return L}function y(L,_){var V=_.length<0?0:0|m(_.length);L=f(L,V);for(var k=0;k<V;k+=1)L[k]=255&_[k];return L}function m(L){if(L>=u())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u().toString(16)+" bytes");return 0|L}function x(L,_){if(l.isBuffer(L))return L.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(L)||L instanceof ArrayBuffer))return L.byteLength;typeof L!="string"&&(L=""+L);var V=L.length;if(V===0)return 0;for(var k=!1;;)switch(_){case"ascii":case"latin1":case"binary":return V;case"utf8":case"utf-8":case void 0:return ne(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*V;case"hex":return V>>>1;case"base64":return Q(L).length;default:if(k)return ne(L).length;_=(""+_).toLowerCase(),k=!0}}function g(L,_,V){var k=!1;if((_===void 0||_<0)&&(_=0),_>this.length||((V===void 0||V>this.length)&&(V=this.length),V<=0)||(V>>>=0)<=(_>>>=0))return"";for(L||(L="utf8");;)switch(L){case"hex":return W(this,_,V);case"utf8":case"utf-8":return R(this,_,V);case"ascii":return N(this,_,V);case"latin1":case"binary":return U(this,_,V);case"base64":return M(this,_,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,_,V);default:if(k)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),k=!0}}function d(L,_,V){var k=L[_];L[_]=L[V],L[V]=k}function C(L,_,V,k,P){if(L.length===0)return-1;if(typeof V=="string"?(k=V,V=0):V>2147483647?V=2147483647:V<-2147483648&&(V=-2147483648),V=+V,isNaN(V)&&(V=P?0:L.length-1),V<0&&(V=L.length+V),V>=L.length){if(P)return-1;V=L.length-1}else if(V<0){if(!P)return-1;V=0}if(typeof _=="string"&&(_=l.from(_,k)),l.isBuffer(_))return _.length===0?-1:S(L,_,V,k,P);if(typeof _=="number")return _&=255,l.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?P?Uint8Array.prototype.indexOf.call(L,_,V):Uint8Array.prototype.lastIndexOf.call(L,_,V):S(L,[_],V,k,P);throw new TypeError("val must be string, number or Buffer")}function S(L,_,V,k,P){var j,z=1,Z=L.length,re=_.length;if(k!==void 0&&((k=String(k).toLowerCase())==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(L.length<2||_.length<2)return-1;z=2,Z/=2,re/=2,V/=2}function ie(Re,De){return z===1?Re[De]:Re.readUInt16BE(De*z)}if(P){var oe=-1;for(j=V;j<Z;j++)if(ie(L,j)===ie(_,oe===-1?0:j-oe)){if(oe===-1&&(oe=j),j-oe+1===re)return oe*z}else oe!==-1&&(j-=j-oe),oe=-1}else for(V+re>Z&&(V=Z-re),j=V;j>=0;j--){for(var he=!0,ye=0;ye<re;ye++)if(ie(L,j+ye)!==ie(_,ye)){he=!1;break}if(he)return j}return-1}function T(L,_,V,k){V=Number(V)||0;var P=L.length-V;k?(k=Number(k))>P&&(k=P):k=P;var j=_.length;if(j%2!=0)throw new TypeError("Invalid hex string");k>j/2&&(k=j/2);for(var z=0;z<k;++z){var Z=parseInt(_.substr(2*z,2),16);if(isNaN(Z))return z;L[V+z]=Z}return z}function w(L,_,V,k){return te(ne(_,L.length-V),L,V,k)}function E(L,_,V,k){return te(function(P){for(var j=[],z=0;z<P.length;++z)j.push(255&P.charCodeAt(z));return j}(_),L,V,k)}function D(L,_,V,k){return E(L,_,V,k)}function b(L,_,V,k){return te(Q(_),L,V,k)}function O(L,_,V,k){return te(function(P,j){for(var z,Z,re,ie=[],oe=0;oe<P.length&&!((j-=2)<0);++oe)z=P.charCodeAt(oe),Z=z>>8,re=z%256,ie.push(re),ie.push(Z);return ie}(_,L.length-V),L,V,k)}function M(L,_,V){return _===0&&V===L.length?o.fromByteArray(L):o.fromByteArray(L.slice(_,V))}function R(L,_,V){V=Math.min(L.length,V);for(var k=[],P=_;P<V;){var j,z,Z,re,ie=L[P],oe=null,he=ie>239?4:ie>223?3:ie>191?2:1;if(P+he<=V)switch(he){case 1:ie<128&&(oe=ie);break;case 2:(192&(j=L[P+1]))==128&&(re=(31&ie)<<6|63&j)>127&&(oe=re);break;case 3:j=L[P+1],z=L[P+2],(192&j)==128&&(192&z)==128&&(re=(15&ie)<<12|(63&j)<<6|63&z)>2047&&(re<55296||re>57343)&&(oe=re);break;case 4:j=L[P+1],z=L[P+2],Z=L[P+3],(192&j)==128&&(192&z)==128&&(192&Z)==128&&(re=(15&ie)<<18|(63&j)<<12|(63&z)<<6|63&Z)>65535&&re<1114112&&(oe=re)}oe===null?(oe=65533,he=1):oe>65535&&(oe-=65536,k.push(oe>>>10&1023|55296),oe=56320|1023&oe),k.push(oe),P+=he}return function(ye){var Re=ye.length;if(Re<=4096)return String.fromCharCode.apply(String,ye);for(var De="",ge=0;ge<Re;)De+=String.fromCharCode.apply(String,ye.slice(ge,ge+=4096));return De}(k)}r.Buffer=l,r.SlowBuffer=function(L){return+L!=L&&(L=0),l.alloc(+L)},r.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=i.TYPED_ARRAY_SUPPORT!==void 0?i.TYPED_ARRAY_SUPPORT:function(){try{var L=new Uint8Array(1);return L.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},L.foo()===42&&typeof L.subarray=="function"&&L.subarray(1,1).byteLength===0}catch{return!1}}(),r.kMaxLength=u(),l.poolSize=8192,l._augment=function(L){return L.__proto__=l.prototype,L},l.from=function(L,_,V){return p(null,L,_,V)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(L,_,V){return function(k,P,j,z){return h(P),P<=0?f(k,P):j!==void 0?typeof z=="string"?f(k,P).fill(j,z):f(k,P).fill(j):f(k,P)}(null,L,_,V)},l.allocUnsafe=function(L){return v(null,L)},l.allocUnsafeSlow=function(L){return v(null,L)},l.isBuffer=function(L){return!(L==null||!L._isBuffer)},l.compare=function(L,_){if(!l.isBuffer(L)||!l.isBuffer(_))throw new TypeError("Arguments must be Buffers");if(L===_)return 0;for(var V=L.length,k=_.length,P=0,j=Math.min(V,k);P<j;++P)if(L[P]!==_[P]){V=L[P],k=_[P];break}return V<k?-1:k<V?1:0},l.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(L,_){if(!c(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return l.alloc(0);var V;if(_===void 0)for(_=0,V=0;V<L.length;++V)_+=L[V].length;var k=l.allocUnsafe(_),P=0;for(V=0;V<L.length;++V){var j=L[V];if(!l.isBuffer(j))throw new TypeError('"list" argument must be an Array of Buffers');j.copy(k,P),P+=j.length}return k},l.byteLength=x,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var L=this.length;if(L%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var _=0;_<L;_+=2)d(this,_,_+1);return this},l.prototype.swap32=function(){var L=this.length;if(L%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var _=0;_<L;_+=4)d(this,_,_+3),d(this,_+1,_+2);return this},l.prototype.swap64=function(){var L=this.length;if(L%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var _=0;_<L;_+=8)d(this,_,_+7),d(this,_+1,_+6),d(this,_+2,_+5),d(this,_+3,_+4);return this},l.prototype.toString=function(){var L=0|this.length;return L===0?"":arguments.length===0?R(this,0,L):g.apply(this,arguments)},l.prototype.equals=function(L){if(!l.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L||l.compare(this,L)===0},l.prototype.inspect=function(){var L="",_=r.INSPECT_MAX_BYTES;return this.length>0&&(L=this.toString("hex",0,_).match(/.{2}/g).join(" "),this.length>_&&(L+=" ... ")),"<Buffer "+L+">"},l.prototype.compare=function(L,_,V,k,P){if(!l.isBuffer(L))throw new TypeError("Argument must be a Buffer");if(_===void 0&&(_=0),V===void 0&&(V=L?L.length:0),k===void 0&&(k=0),P===void 0&&(P=this.length),_<0||V>L.length||k<0||P>this.length)throw new RangeError("out of range index");if(k>=P&&_>=V)return 0;if(k>=P)return-1;if(_>=V)return 1;if(this===L)return 0;for(var j=(P>>>=0)-(k>>>=0),z=(V>>>=0)-(_>>>=0),Z=Math.min(j,z),re=this.slice(k,P),ie=L.slice(_,V),oe=0;oe<Z;++oe)if(re[oe]!==ie[oe]){j=re[oe],z=ie[oe];break}return j<z?-1:z<j?1:0},l.prototype.includes=function(L,_,V){return this.indexOf(L,_,V)!==-1},l.prototype.indexOf=function(L,_,V){return C(this,L,_,V,!0)},l.prototype.lastIndexOf=function(L,_,V){return C(this,L,_,V,!1)},l.prototype.write=function(L,_,V,k){if(_===void 0)k="utf8",V=this.length,_=0;else if(V===void 0&&typeof _=="string")k=_,V=this.length,_=0;else{if(!isFinite(_))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");_|=0,isFinite(V)?(V|=0,k===void 0&&(k="utf8")):(k=V,V=void 0)}var P=this.length-_;if((V===void 0||V>P)&&(V=P),L.length>0&&(V<0||_<0)||_>this.length)throw new RangeError("Attempt to write outside buffer bounds");k||(k="utf8");for(var j=!1;;)switch(k){case"hex":return T(this,L,_,V);case"utf8":case"utf-8":return w(this,L,_,V);case"ascii":return E(this,L,_,V);case"latin1":case"binary":return D(this,L,_,V);case"base64":return b(this,L,_,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,L,_,V);default:if(j)throw new TypeError("Unknown encoding: "+k);k=(""+k).toLowerCase(),j=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function N(L,_,V){var k="";V=Math.min(L.length,V);for(var P=_;P<V;++P)k+=String.fromCharCode(127&L[P]);return k}function U(L,_,V){var k="";V=Math.min(L.length,V);for(var P=_;P<V;++P)k+=String.fromCharCode(L[P]);return k}function W(L,_,V){var k=L.length;(!_||_<0)&&(_=0),(!V||V<0||V>k)&&(V=k);for(var P="",j=_;j<V;++j)P+=J(L[j]);return P}function I(L,_,V){for(var k=L.slice(_,V),P="",j=0;j<k.length;j+=2)P+=String.fromCharCode(k[j]+256*k[j+1]);return P}function G(L,_,V){if(L%1!=0||L<0)throw new RangeError("offset is not uint");if(L+_>V)throw new RangeError("Trying to access beyond buffer length")}function F(L,_,V,k,P,j){if(!l.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(_>P||_<j)throw new RangeError('"value" argument is out of bounds');if(V+k>L.length)throw new RangeError("Index out of range")}function A(L,_,V,k){_<0&&(_=65535+_+1);for(var P=0,j=Math.min(L.length-V,2);P<j;++P)L[V+P]=(_&255<<8*(k?P:1-P))>>>8*(k?P:1-P)}function H(L,_,V,k){_<0&&(_=4294967295+_+1);for(var P=0,j=Math.min(L.length-V,4);P<j;++P)L[V+P]=_>>>8*(k?P:3-P)&255}function $(L,_,V,k,P,j){if(V+k>L.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("Index out of range")}function X(L,_,V,k,P){return P||$(L,0,V,4),s.write(L,_,V,k,23,4),V+4}function Y(L,_,V,k,P){return P||$(L,0,V,8),s.write(L,_,V,k,52,8),V+8}l.prototype.slice=function(L,_){var V,k=this.length;if((L=~~L)<0?(L+=k)<0&&(L=0):L>k&&(L=k),(_=_===void 0?k:~~_)<0?(_+=k)<0&&(_=0):_>k&&(_=k),_<L&&(_=L),l.TYPED_ARRAY_SUPPORT)(V=this.subarray(L,_)).__proto__=l.prototype;else{var P=_-L;V=new l(P,void 0);for(var j=0;j<P;++j)V[j]=this[j+L]}return V},l.prototype.readUIntLE=function(L,_,V){L|=0,_|=0,V||G(L,_,this.length);for(var k=this[L],P=1,j=0;++j<_&&(P*=256);)k+=this[L+j]*P;return k},l.prototype.readUIntBE=function(L,_,V){L|=0,_|=0,V||G(L,_,this.length);for(var k=this[L+--_],P=1;_>0&&(P*=256);)k+=this[L+--_]*P;return k},l.prototype.readUInt8=function(L,_){return _||G(L,1,this.length),this[L]},l.prototype.readUInt16LE=function(L,_){return _||G(L,2,this.length),this[L]|this[L+1]<<8},l.prototype.readUInt16BE=function(L,_){return _||G(L,2,this.length),this[L]<<8|this[L+1]},l.prototype.readUInt32LE=function(L,_){return _||G(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+16777216*this[L+3]},l.prototype.readUInt32BE=function(L,_){return _||G(L,4,this.length),16777216*this[L]+(this[L+1]<<16|this[L+2]<<8|this[L+3])},l.prototype.readIntLE=function(L,_,V){L|=0,_|=0,V||G(L,_,this.length);for(var k=this[L],P=1,j=0;++j<_&&(P*=256);)k+=this[L+j]*P;return k>=(P*=128)&&(k-=Math.pow(2,8*_)),k},l.prototype.readIntBE=function(L,_,V){L|=0,_|=0,V||G(L,_,this.length);for(var k=_,P=1,j=this[L+--k];k>0&&(P*=256);)j+=this[L+--k]*P;return j>=(P*=128)&&(j-=Math.pow(2,8*_)),j},l.prototype.readInt8=function(L,_){return _||G(L,1,this.length),128&this[L]?-1*(255-this[L]+1):this[L]},l.prototype.readInt16LE=function(L,_){_||G(L,2,this.length);var V=this[L]|this[L+1]<<8;return 32768&V?4294901760|V:V},l.prototype.readInt16BE=function(L,_){_||G(L,2,this.length);var V=this[L+1]|this[L]<<8;return 32768&V?4294901760|V:V},l.prototype.readInt32LE=function(L,_){return _||G(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},l.prototype.readInt32BE=function(L,_){return _||G(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},l.prototype.readFloatLE=function(L,_){return _||G(L,4,this.length),s.read(this,L,!0,23,4)},l.prototype.readFloatBE=function(L,_){return _||G(L,4,this.length),s.read(this,L,!1,23,4)},l.prototype.readDoubleLE=function(L,_){return _||G(L,8,this.length),s.read(this,L,!0,52,8)},l.prototype.readDoubleBE=function(L,_){return _||G(L,8,this.length),s.read(this,L,!1,52,8)},l.prototype.writeUIntLE=function(L,_,V,k){L=+L,_|=0,V|=0,k||F(this,L,_,V,Math.pow(2,8*V)-1,0);var P=1,j=0;for(this[_]=255&L;++j<V&&(P*=256);)this[_+j]=L/P&255;return _+V},l.prototype.writeUIntBE=function(L,_,V,k){L=+L,_|=0,V|=0,k||F(this,L,_,V,Math.pow(2,8*V)-1,0);var P=V-1,j=1;for(this[_+P]=255&L;--P>=0&&(j*=256);)this[_+P]=L/j&255;return _+V},l.prototype.writeUInt8=function(L,_,V){return L=+L,_|=0,V||F(this,L,_,1,255,0),l.TYPED_ARRAY_SUPPORT||(L=Math.floor(L)),this[_]=255&L,_+1},l.prototype.writeUInt16LE=function(L,_,V){return L=+L,_|=0,V||F(this,L,_,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[_]=255&L,this[_+1]=L>>>8):A(this,L,_,!0),_+2},l.prototype.writeUInt16BE=function(L,_,V){return L=+L,_|=0,V||F(this,L,_,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[_]=L>>>8,this[_+1]=255&L):A(this,L,_,!1),_+2},l.prototype.writeUInt32LE=function(L,_,V){return L=+L,_|=0,V||F(this,L,_,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[_+3]=L>>>24,this[_+2]=L>>>16,this[_+1]=L>>>8,this[_]=255&L):H(this,L,_,!0),_+4},l.prototype.writeUInt32BE=function(L,_,V){return L=+L,_|=0,V||F(this,L,_,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[_]=L>>>24,this[_+1]=L>>>16,this[_+2]=L>>>8,this[_+3]=255&L):H(this,L,_,!1),_+4},l.prototype.writeIntLE=function(L,_,V,k){if(L=+L,_|=0,!k){var P=Math.pow(2,8*V-1);F(this,L,_,V,P-1,-P)}var j=0,z=1,Z=0;for(this[_]=255&L;++j<V&&(z*=256);)L<0&&Z===0&&this[_+j-1]!==0&&(Z=1),this[_+j]=(L/z>>0)-Z&255;return _+V},l.prototype.writeIntBE=function(L,_,V,k){if(L=+L,_|=0,!k){var P=Math.pow(2,8*V-1);F(this,L,_,V,P-1,-P)}var j=V-1,z=1,Z=0;for(this[_+j]=255&L;--j>=0&&(z*=256);)L<0&&Z===0&&this[_+j+1]!==0&&(Z=1),this[_+j]=(L/z>>0)-Z&255;return _+V},l.prototype.writeInt8=function(L,_,V){return L=+L,_|=0,V||F(this,L,_,1,127,-128),l.TYPED_ARRAY_SUPPORT||(L=Math.floor(L)),L<0&&(L=255+L+1),this[_]=255&L,_+1},l.prototype.writeInt16LE=function(L,_,V){return L=+L,_|=0,V||F(this,L,_,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[_]=255&L,this[_+1]=L>>>8):A(this,L,_,!0),_+2},l.prototype.writeInt16BE=function(L,_,V){return L=+L,_|=0,V||F(this,L,_,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[_]=L>>>8,this[_+1]=255&L):A(this,L,_,!1),_+2},l.prototype.writeInt32LE=function(L,_,V){return L=+L,_|=0,V||F(this,L,_,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[_]=255&L,this[_+1]=L>>>8,this[_+2]=L>>>16,this[_+3]=L>>>24):H(this,L,_,!0),_+4},l.prototype.writeInt32BE=function(L,_,V){return L=+L,_|=0,V||F(this,L,_,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),l.TYPED_ARRAY_SUPPORT?(this[_]=L>>>24,this[_+1]=L>>>16,this[_+2]=L>>>8,this[_+3]=255&L):H(this,L,_,!1),_+4},l.prototype.writeFloatLE=function(L,_,V){return X(this,L,_,!0,V)},l.prototype.writeFloatBE=function(L,_,V){return X(this,L,_,!1,V)},l.prototype.writeDoubleLE=function(L,_,V){return Y(this,L,_,!0,V)},l.prototype.writeDoubleBE=function(L,_,V){return Y(this,L,_,!1,V)},l.prototype.copy=function(L,_,V,k){if(V||(V=0),k||k===0||(k=this.length),_>=L.length&&(_=L.length),_||(_=0),k>0&&k<V&&(k=V),k===V||L.length===0||this.length===0)return 0;if(_<0)throw new RangeError("targetStart out of bounds");if(V<0||V>=this.length)throw new RangeError("sourceStart out of bounds");if(k<0)throw new RangeError("sourceEnd out of bounds");k>this.length&&(k=this.length),L.length-_<k-V&&(k=L.length-_+V);var P,j=k-V;if(this===L&&V<_&&_<k)for(P=j-1;P>=0;--P)L[P+_]=this[P+V];else if(j<1e3||!l.TYPED_ARRAY_SUPPORT)for(P=0;P<j;++P)L[P+_]=this[P+V];else Uint8Array.prototype.set.call(L,this.subarray(V,V+j),_);return j},l.prototype.fill=function(L,_,V,k){if(typeof L=="string"){if(typeof _=="string"?(k=_,_=0,V=this.length):typeof V=="string"&&(k=V,V=this.length),L.length===1){var P=L.charCodeAt(0);P<256&&(L=P)}if(k!==void 0&&typeof k!="string")throw new TypeError("encoding must be a string");if(typeof k=="string"&&!l.isEncoding(k))throw new TypeError("Unknown encoding: "+k)}else typeof L=="number"&&(L&=255);if(_<0||this.length<_||this.length<V)throw new RangeError("Out of range index");if(V<=_)return this;var j;if(_>>>=0,V=V===void 0?this.length:V>>>0,L||(L=0),typeof L=="number")for(j=_;j<V;++j)this[j]=L;else{var z=l.isBuffer(L)?L:ne(new l(L,k).toString()),Z=z.length;for(j=0;j<V-_;++j)this[j+_]=z[j%Z]}return this};var q=/[^+\/0-9A-Za-z-_]/g;function J(L){return L<16?"0"+L.toString(16):L.toString(16)}function ne(L,_){var V;_=_||1/0;for(var k=L.length,P=null,j=[],z=0;z<k;++z){if((V=L.charCodeAt(z))>55295&&V<57344){if(!P){if(V>56319){(_-=3)>-1&&j.push(239,191,189);continue}if(z+1===k){(_-=3)>-1&&j.push(239,191,189);continue}P=V;continue}if(V<56320){(_-=3)>-1&&j.push(239,191,189),P=V;continue}V=65536+(P-55296<<10|V-56320)}else P&&(_-=3)>-1&&j.push(239,191,189);if(P=null,V<128){if((_-=1)<0)break;j.push(V)}else if(V<2048){if((_-=2)<0)break;j.push(V>>6|192,63&V|128)}else if(V<65536){if((_-=3)<0)break;j.push(V>>12|224,V>>6&63|128,63&V|128)}else{if(!(V<1114112))throw new Error("Invalid code point");if((_-=4)<0)break;j.push(V>>18|240,V>>12&63|128,V>>6&63|128,63&V|128)}}return j}function Q(L){return o.toByteArray(function(_){if((_=function(V){return V.trim?V.trim():V.replace(/^\s+|\s+$/g,"")}(_).replace(q,"")).length<2)return"";for(;_.length%4!=0;)_+="=";return _}(L))}function te(L,_,V,k){for(var P=0;P<k&&!(P+V>=_.length||P>=L.length);++P)_[P+V]=L[P];return P}}).call(this,a(78))},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.isASCIIByte=function(i){return i>=0&&i<=127}},function(n,r,a){var i=this&&this.__read||function(s,c){var u=typeof Symbol=="function"&&s[Symbol.iterator];if(!u)return s;var f,l,p=u.call(s),h=[];try{for(;(c===void 0||c-- >0)&&!(f=p.next()).done;)h.push(f.value)}catch(v){l={error:v}}finally{try{f&&!f.done&&(u=p.return)&&u.call(p)}finally{if(l)throw l.error}}return h},o=this&&this.__spread||function(){for(var s=[],c=0;c<arguments.length;c++)s=s.concat(i(arguments[c]));return s};Object.defineProperty(r,"__esModule",{value:!0}),r.length=function(s){return s.length},r.byteLowercase=function(s){for(var c=0;c<s.length;c++){var u=s[c];u>=65&&u<=90&&(s[c]=u+32)}},r.byteUppercase=function(s){for(var c=0;c<s.length;c++){var u=s[c];u>=97&&u<=122&&(s[c]=u-32)}},r.byteCaseInsensitiveMatch=function(s,c){if(s.length!==c.length)return!1;for(var u=0;u<s.length;u++){var f=s[u],l=c[u];if(f>=65&&f<=90&&(f+=32),l>=65&&l<=90&&(l+=32),f!==l)return!1}return!0},r.startsWith=function(s,c){for(var u=0;;){if(u>=s.length)return!1;if(u>=c.length)return!0;if(s[u]!==c[u])return!1;u++}},r.byteLessThan=function(s,c){for(var u=0;;){if(u>=s.length)return!1;if(u>=c.length)return!0;var f=s[u],l=c[u];if(f<l)return!0;if(f>l)return!1;u++}},r.isomorphicDecode=function(s){return String.fromCodePoint.apply(String,o(s))}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(6),o=a(7),s=a(0),c=a(12),u=function(){function f(l){this._associatedDocument=l||i.dom.window.document}return f.prototype.createDocumentType=function(l,p,h){return s.namespace_validate(l),s.create_documentType(this._associatedDocument,l,p,h)},f.prototype.createDocument=function(l,p,h){h===void 0&&(h=null);var v=s.create_xmlDocument(),y=null;return p&&(y=s.document_internalCreateElementNS(v,l,p)),h&&v.appendChild(h),y&&v.appendChild(y),v._origin=this._associatedDocument._origin,l===o.namespace.HTML?v._contentType="application/xhtml+xml":l===o.namespace.SVG?v._contentType="image/svg+xml":v._contentType="application/xml",v},f.prototype.createHTMLDocument=function(l){var p=s.create_document();p._type="html",p._contentType="text/html",p.appendChild(s.create_documentType(p,"html","",""));var h=s.element_createAnElement(p,"html",o.namespace.HTML);p.appendChild(h);var v=s.element_createAnElement(p,"head",o.namespace.HTML);if(h.appendChild(v),l!==void 0){var y=s.element_createAnElement(p,"title",o.namespace.HTML);v.appendChild(y);var m=s.create_text(p,l);y.appendChild(m)}var x=s.element_createAnElement(p,"body",o.namespace.HTML);return h.appendChild(x),p._origin=this._associatedDocument._origin,p},f.prototype.hasFeature=function(){return!0},f._create=function(l){return new f(l)},f}();r.DOMImplementationImpl=u,c.idl_defineConst(u.prototype,"_ID","@oozcitak/dom")},function(n,r,a){var i,o=this&&this.__extends||(i=function(l,p){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(l,p)},function(l,p){function h(){this.constructor=l}i(l,p),l.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(70),c=a(1),u=a(0),f=function(l){function p(){var h=l.call(this)||this;return h._signalSlots=new Set,h._mutationObserverMicrotaskQueued=!1,h._mutationObservers=new Set,h._iteratorList=new c.FixedSizeSet,h._associatedDocument=u.create_document(),h}return o(p,l),Object.defineProperty(p.prototype,"document",{get:function(){return this._associatedDocument},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"event",{get:function(){return this._currentEvent},enumerable:!0,configurable:!0}),p._create=function(){return new p},p}(s.EventTargetImpl);r.WindowImpl=f},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(2),o=function(){function s(){}return s.isNode=function(c){return!!c&&c._nodeType!==void 0},s.isDocumentNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.Document},s.isDocumentTypeNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.DocumentType},s.isDocumentFragmentNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.DocumentFragment},s.isAttrNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.Attribute},s.isCharacterDataNode=function(c){if(!s.isNode(c))return!1;var u=c._nodeType;return u===i.NodeType.Text||u===i.NodeType.ProcessingInstruction||u===i.NodeType.Comment||u===i.NodeType.CData},s.isTextNode=function(c){return s.isNode(c)&&(c._nodeType===i.NodeType.Text||c._nodeType===i.NodeType.CData)},s.isExclusiveTextNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.Text},s.isCDATASectionNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.CData},s.isCommentNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.Comment},s.isProcessingInstructionNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.ProcessingInstruction},s.isElementNode=function(c){return s.isNode(c)&&c._nodeType===i.NodeType.Element},s.isCustomElementNode=function(c){return s.isElementNode(c)&&c._customElementState==="custom"},s.isShadowRoot=function(c){return!!c&&c.host!==void 0},s.isMouseEvent=function(c){return!!c&&c.screenX!==void 0&&c.screenY!=null},s.isSlotable=function(c){return!!c&&c._name!==void 0&&c._assignedSlot!==void 0&&(s.isTextNode(c)||s.isElementNode(c))},s.isSlot=function(c){return!!c&&c._name!==void 0&&c._assignedNodes!==void 0&&s.isElementNode(c)},s.isWindow=function(c){return!!c&&c.navigator!==void 0},s.isEventListener=function(c){return!!c&&c.handleEvent!==void 0},s.isRegisteredObserver=function(c){return!!c&&c.observer!==void 0&&c.options!==void 0},s.isTransientRegisteredObserver=function(c){return!!c&&c.source!==void 0&&s.isRegisteredObserver(c)},s}();r.Guard=o},function(n,r,a){var i,o=this&&this.__extends||(i=function(c,u){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,l){f.__proto__=l}||function(f,l){for(var p in l)l.hasOwnProperty(p)&&(f[p]=l[p])})(c,u)},function(c,u){function f(){this.constructor=c}i(c,u),c.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(c){function u(){return c.call(this)||this}return o(u,c),u}(a(98).DocumentImpl);r.XMLDocumentImpl=s},function(n,r,a){var i=this&&this.__values||function(k){var P=typeof Symbol=="function"&&Symbol.iterator,j=P&&k[P],z=0;if(j)return j.call(k);if(k&&typeof k.length=="number")return{next:function(){return k&&z>=k.length&&(k=void 0),{value:k&&k[z++],done:!k}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(k,P){var j=typeof Symbol=="function"&&k[Symbol.iterator];if(!j)return k;var z,Z,re=j.call(k),ie=[];try{for(;(P===void 0||P-- >0)&&!(z=re.next()).done;)ie.push(z.value)}catch(oe){Z={error:oe}}finally{try{z&&!z.done&&(j=re.return)&&j.call(re)}finally{if(Z)throw Z.error}}return ie};Object.defineProperty(r,"__esModule",{value:!0});var s,c=a(1),u=a(243),f=a(7),l=a(244),p={ftp:21,file:null,http:80,https:443,ws:80,wss:443},h=/[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,v=/[ "<>`]|[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,y=/[ "<>`#?{}]|[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,m=/[ "<>`#?{}/:;=@\[\]\\\^\|]|[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,x=/[0-9A-Za-z!\$&-\/:;=\?@_~\xA0-\uD7FF\uE000-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB40-\uDB7E\uDB80-\uDBBE\uDBC0-\uDBFE][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDC00-\uDFFD]/,g=/[\0\t\f\r #%/:?@\[\\\]]/;function d(k){s!==void 0&&s.call(null,"Validation Error: "+k)}function C(){return{scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,_cannotBeABaseURLFlag:!1,_blobURLEntry:null}}function S(k){return k in p}function T(k){return S(k.scheme)}function w(k){return p[k]||null}function E(k){return k.username!==""||k.password!==""}function D(k,P){var j,z;P===void 0&&(P=!1);var Z=k.scheme+":";if(k.host!==null?(Z+="//",E(k)&&(Z+=k.username,k.password!==""&&(Z+=":"+k.password),Z+="@"),Z+=b(k.host),k.port!==null&&(Z+=":"+k.port)):k.host===null&&k.scheme==="file"&&(Z+="//"),k._cannotBeABaseURLFlag)Z+=k.path[0];else try{for(var re=i(k.path),ie=re.next();!ie.done;ie=re.next())Z+="/"+ie.value}catch(oe){j={error:oe}}finally{try{ie&&!ie.done&&(z=re.return)&&z.call(re)}finally{if(j)throw j.error}}return k.query!==null&&(Z+="?"+k.query),P||k.fragment===null||(Z+="#"+k.fragment),Z}function b(k){return c.isNumber(k)?O(k):c.isArray(k)?"["+M(k)+"]":k}function O(k){for(var P="",j=k,z=1;z<=4;z++)P=(j%256).toString()+P,z!==4&&(P="."+P),j=Math.floor(j/256);return P}function M(k){for(var P="",j=null,z=-1,Z=0,re=0,ie=0;ie<8;ie++)if(k[ie]===0){Z=1;for(var oe=ie+1;oe<8&&k[oe]===0;oe++)Z++;Z>re&&(re=Z,z=ie)}re>1&&(j=z);for(var he=!1,ye=0;ye<8;ye++)he&&k[ye]===0||(he&&(he=!1),j!==ye?(P+=k[ye].toString(16),ye!==7&&(P+=":")):(P+=ye===0?"::":":",he=!0));return P}function R(k,P,j,z,Z){var re,ie,oe,he;if(z===void 0){z={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,_cannotBeABaseURLFlag:!1,_blobURLEntry:null};var ye=/^[\u0000-\u001F\u0020]+/,Re=/[\u0000-\u001F\u0020]+$/;(ye.test(k)||Re.test(k))&&d("Input string contains leading or trailing control characters or space."),k=(k=k.replace(ye,"")).replace(Re,"")}var De=/[\u0009\u000A\u000D]/g;De.test(k)&&d("Input string contains tab or newline characters."),k=k.replace(De,"");var ge=Z===void 0?u.ParserState.SchemeStart:Z;P===void 0&&(P=null);for(var $e=j===void 0||j==="replacement"||j==="UTF-16BE"||j==="UTF-16LE"?"UTF-8":j,K="",we=!1,Te=!1,me=!1,ae=new c.StringWalker(k);;){switch(ge){case u.ParserState.SchemeStart:if(f.codePoint.ASCIIAlpha.test(ae.c()))K+=ae.c().toLowerCase(),ge=u.ParserState.Scheme;else{if(Z!==void 0)return d("Invalid scheme start character."),null;ge=u.ParserState.NoScheme,ae.pointer--}break;case u.ParserState.Scheme:if(f.codePoint.ASCIIAlphanumeric.test(ae.c())||ae.c()==="+"||ae.c()==="-"||ae.c()===".")K+=ae.c().toLowerCase();else{if(ae.c()!==":"){if(Z===void 0){K="",ge=u.ParserState.NoScheme,ae.pointer=0;continue}return d("Invalid input string."),null}if(Z!==void 0&&(S(z.scheme)&&!S(K)||!S(z.scheme)&&S(K)||(E(z)||z.port!==null)&&K==="file"||z.scheme==="file"&&(z.host===""||z.host===null)))return z;if(z.scheme=K,Z!==void 0)return z.port===w(z.scheme)&&(z.port=null),z;K="",z.scheme==="file"?(ae.remaining().startsWith("//")||d("Invalid file URL scheme, '//' expected."),ge=u.ParserState.File):T(z)&&P!==null&&P.scheme===z.scheme?ge=u.ParserState.SpecialRelativeOrAuthority:T(z)?ge=u.ParserState.SpecialAuthoritySlashes:ae.remaining().startsWith("/")?(ge=u.ParserState.PathOrAuthority,ae.pointer++):(z._cannotBeABaseURLFlag=!0,z.path.push(""),ge=u.ParserState.CannotBeABaseURLPath)}break;case u.ParserState.NoScheme:if(P===null||P._cannotBeABaseURLFlag&&ae.c()!=="#")return d("Invalid input string."),null;P._cannotBeABaseURLFlag&&ae.c()==="#"?(z.scheme=P.scheme,z.path=f.list.clone(P.path),z.query=P.query,z.fragment="",z._cannotBeABaseURLFlag=!0,ge=u.ParserState.Fragment):P.scheme!=="file"?(ge=u.ParserState.Relative,ae.pointer--):(ge=u.ParserState.File,ae.pointer--);break;case u.ParserState.SpecialRelativeOrAuthority:ae.c()==="/"&&ae.remaining().startsWith("/")?(ge=u.ParserState.SpecialAuthorityIgnoreSlashes,ae.pointer++):(d("Invalid input string."),ge=u.ParserState.Relative,ae.pointer--);break;case u.ParserState.PathOrAuthority:ae.c()==="/"?ge=u.ParserState.Authority:(ge=u.ParserState.Path,ae.pointer--);break;case u.ParserState.Relative:if(P===null)throw new Error("Invalid parser state. Base URL is null.");switch(z.scheme=P.scheme,ae.c()){case"":z.username=P.username,z.password=P.password,z.host=P.host,z.port=P.port,z.path=f.list.clone(P.path),z.query=P.query;break;case"/":ge=u.ParserState.RelativeSlash;break;case"?":z.username=P.username,z.password=P.password,z.host=P.host,z.port=P.port,z.path=f.list.clone(P.path),z.query="",ge=u.ParserState.Query;break;case"#":z.username=P.username,z.password=P.password,z.host=P.host,z.port=P.port,z.path=f.list.clone(P.path),z.query=P.query,z.fragment="",ge=u.ParserState.Fragment;break;default:T(z)&&ae.c()==="\\"?(d("Invalid input string."),ge=u.ParserState.RelativeSlash):(z.username=P.username,z.password=P.password,z.host=P.host,z.port=P.port,z.path=f.list.clone(P.path),z.path.length!==0&&z.path.splice(z.path.length-1,1),ge=u.ParserState.Path,ae.pointer--)}break;case u.ParserState.RelativeSlash:if(!T(z)||ae.c()!=="/"&&ae.c()!=="\\")if(ae.c()==="/")ge=u.ParserState.Authority;else{if(P===null)throw new Error("Invalid parser state. Base URL is null.");z.username=P.username,z.password=P.password,z.host=P.host,z.port=P.port,ge=u.ParserState.Path,ae.pointer--}else ae.c()==="\\"&&d("Invalid input string."),ge=u.ParserState.SpecialAuthorityIgnoreSlashes;break;case u.ParserState.SpecialAuthoritySlashes:ae.c()==="/"&&ae.remaining().startsWith("/")?(ge=u.ParserState.SpecialAuthorityIgnoreSlashes,ae.pointer++):(d("Expected '//'."),ge=u.ParserState.SpecialAuthorityIgnoreSlashes,ae.pointer--);break;case u.ParserState.SpecialAuthorityIgnoreSlashes:ae.c()!=="/"&&ae.c()!=="\\"?(ge=u.ParserState.Authority,ae.pointer--):d("Unexpected '/' or '\\'.");break;case u.ParserState.Authority:if(ae.c()==="@"){d("Unexpected '@'."),we&&(K="%40"+K),we=!0;try{for(var ue=(re=void 0,i(K)),pe=ue.next();!pe.done;pe=ue.next()){var fe=pe.value;if(fe!==":"||me){var xe=te(fe,m);me?z.password+=xe:z.username+=xe}else me=!0}}catch(Kt){re={error:Kt}}finally{try{pe&&!pe.done&&(ie=ue.return)&&ie.call(ue)}finally{if(re)throw re.error}}K=""}else if(ae.c()===""||ae.c()==="/"||ae.c()==="?"||ae.c()==="#"||T(z)&&ae.c()==="\\"){if(we&&K==="")return d("Invalid input string."),null;ae.pointer-=K.length+1,K="",ge=u.ParserState.Host}else K+=ae.c();break;case u.ParserState.Host:case u.ParserState.Hostname:if(Z!==void 0&&z.scheme==="file")ae.pointer--,ge=u.ParserState.FileHost;else if(ae.c()!==":"||Te)if(ae.c()===""||ae.c()==="/"||ae.c()==="?"||ae.c()==="#"||T(z)&&ae.c()==="\\"){if(ae.pointer--,T(z)&&K==="")return d("Invalid input string."),null;if(Z!==void 0&&K===""&&(E(z)||z.port!==null))return d("Invalid input string."),z;if((Se=A(K,!T(z)))===null)return null;if(z.host=Se,K="",ge=u.ParserState.PathStart,Z!==void 0)return z}else ae.c()==="["&&(Te=!0),ae.c()==="]"&&(Te=!1),K+=ae.c();else{if(K==="")return d("Invalid input string."),null;if((Se=A(K,!T(z)))===null)return null;if(z.host=Se,K="",ge=u.ParserState.Port,Z===u.ParserState.Hostname)return z}break;case u.ParserState.Port:if(f.codePoint.ASCIIDigit.test(ae.c()))K+=ae.c();else{if(!(ae.c()===""||ae.c()==="/"||ae.c()==="?"||ae.c()==="#"||T(z)&&ae.c()==="\\"||Z))return d("Invalid input string."),null;if(K!==""&&K!==""){var Ae=parseInt(K,10);if(Ae>Math.pow(2,16)-1)return d("Invalid port number."),null;z.port=Ae===w(z.scheme)?null:Ae,K=""}if(Z!==void 0)return z;ge=u.ParserState.PathStart,ae.pointer--}break;case u.ParserState.File:if(z.scheme="file",ae.c()==="/"||ae.c()==="\\")ae.c()==="\\"&&d("Invalid input string."),ge=u.ParserState.FileSlash;else if(P!==null&&P.scheme==="file")switch(ae.c()){case"":z.host=P.host,z.path=f.list.clone(P.path),z.query=P.query;break;case"?":z.host=P.host,z.path=f.list.clone(P.path),z.query="",ge=u.ParserState.Query;break;case"#":z.host=P.host,z.path=f.list.clone(P.path),z.query=P.query,z.fragment="",ge=u.ParserState.Fragment;break;default:F(ae.substring())?d("Unexpected windows drive letter in input string."):(z.host=P.host,z.path=f.list.clone(P.path),W(z)),ge=u.ParserState.Path,ae.pointer--}else ge=u.ParserState.Path,ae.pointer--;break;case u.ParserState.FileSlash:ae.c()==="/"||ae.c()==="\\"?(ae.c()==="\\"&&d("Invalid input string."),ge=u.ParserState.FileHost):(P===null||P.scheme!=="file"||F(ae.substring())||(I(P.path[0])?z.path.push(P.path[0]):z.host=P.host),ge=u.ParserState.Path,ae.pointer--);break;case u.ParserState.FileHost:if(ae.c()===""||ae.c()==="/"||ae.c()==="\\"||ae.c()==="?"||ae.c()==="#")if(ae.pointer--,Z===void 0&&G(K))d("Unexpected windows drive letter in input string."),ge=u.ParserState.Path;else if(K===""){if(z.host="",Z!==void 0)return z;ge=u.ParserState.PathStart}else{var Se;if((Se=A(K,!T(z)))===null)return null;if(Se==="localhost"&&(Se=""),z.host=Se,Z!==void 0)return z;K="",ge=u.ParserState.PathStart}else K+=ae.c();break;case u.ParserState.PathStart:T(z)?(ae.c()==="\\"&&d("Invalid input string."),ge=u.ParserState.Path,ae.c()!=="/"&&ae.c()!=="\\"&&ae.pointer--):Z===void 0&&ae.c()==="?"?(z.query="",ge=u.ParserState.Query):Z===void 0&&ae.c()==="#"?(z.fragment="",ge=u.ParserState.Fragment):ae.c()!==""&&(ge=u.ParserState.Path,ae.c()!=="/"&&ae.pointer--);break;case u.ParserState.Path:if(ae.c()===""||ae.c()==="/"||T(z)&&ae.c()==="\\"||Z===void 0&&(ae.c()==="?"||ae.c()==="#")){if(T(z)&&ae.c()==="\\"&&d("Invalid input string."),U(K))W(z),ae.c()==="/"||T(z)&&ae.c()==="\\"||z.path.push("");else if(!N(K)||ae.c()==="/"||T(z)&&ae.c()==="\\"){if(!N(K)){if(z.scheme==="file"&&z.path.length===0&&G(K)){z.host!==null&&z.host!==""&&(d("Invalid input string."),z.host="");var Be=Array.from(K);K=Be.slice(0,1)+":"+Be.slice(2)}z.path.push(K)}}else z.path.push("");if(K="",z.scheme==="file"&&(ae.c()===""||ae.c()==="?"||ae.c()==="#"))for(;z.path.length>1&&z.path[0]==="";)d("Invalid input string."),z.path.splice(0,1);ae.c()==="?"&&(z.query="",ge=u.ParserState.Query),ae.c()==="#"&&(z.fragment="",ge=u.ParserState.Fragment)}else x.test(ae.c())||ae.c()==="%"||d("Character is not a URL code point or a percent encoded character."),ae.c()!=="%"||/^[0-9a-fA-F][0-9a-fA-F]/.test(ae.remaining())||d("Percent encoded character must be followed by two hex digits."),K+=te(ae.c(),y);break;case u.ParserState.CannotBeABaseURLPath:ae.c()==="?"?(z.query="",ge=u.ParserState.Query):ae.c()==="#"?(z.fragment="",ge=u.ParserState.Fragment):(ae.c()===""||x.test(ae.c())||ae.c()==="%"||d("Character is not a URL code point or a percent encoded character."),ae.c()!=="%"||/^[0-9a-fA-F][0-9a-fA-F]/.test(ae.remaining())||d("Percent encoded character must be followed by two hex digits."),ae.c()!==""&&(z.path[0]+=te(ae.c(),h)));break;case u.ParserState.Query:if($e==="UTF-8"||T(z)&&z.scheme!=="ws"&&z.scheme!=="wss"||($e="UTF-8"),Z===void 0&&ae.c()==="#")z.fragment="",ge=u.ParserState.Fragment;else if(ae.c()!==""){if(x.test(ae.c())||ae.c()==="%"||d("Character is not a URL code point or a percent encoded character."),ae.c()!=="%"||/^[0-9a-fA-F][0-9a-fA-F]/.test(ae.remaining())||d("Percent encoded character must be followed by two hex digits."),$e.toUpperCase()!=="UTF-8")throw new Error("Only UTF-8 encoding is supported.");var Pe=c.utf8Encode(ae.c());if(Pe.length>=3&&Pe[0]===38&&Pe[1]===35&&Pe[Pe.length-1]===59)Pe=Pe.subarray(2,Pe.length-1),z.query+="%26%23"+f.byteSequence.isomorphicDecode(Pe)+"%3B";else try{for(var Ct=(oe=void 0,i(Pe)),Rt=Ct.next();!Rt.done;Rt=Ct.next()){var it=Rt.value;it<33||it>126||it===34||it===35||it===60||it===62||it===39&&T(z)?z.query+=J(it):z.query+=String.fromCharCode(it)}}catch(Kt){oe={error:Kt}}finally{try{Rt&&!Rt.done&&(he=Ct.return)&&he.call(Ct)}finally{if(oe)throw oe.error}}}break;case u.ParserState.Fragment:ae.c()===""||(ae.c()==="\0"?d("NULL character in input string."):(x.test(ae.c())||ae.c()==="%"||d("Unexpected character in fragment string."),ae.c()!=="%"||/^[A-Za-z0-9][A-Za-z0-9]/.test(ae.remaining())||d("Unexpected character in fragment string."),z.fragment+=te(ae.c(),v)))}if(ae.eof)break;ae.pointer++}return z}function N(k){return k==="."||k.toLowerCase()==="%2e"}function U(k){var P=k.toLowerCase();return P===".."||P===".%2e"||P==="%2e."||P==="%2e%2e"}function W(k){var P=k.path;P.length!==0&&(k.scheme==="file"&&P.length===1&&I(P[0])||k.path.splice(k.path.length-1,1))}function I(k){return k.length>=2&&f.codePoint.ASCIIAlpha.test(k[0])&&k[1]===":"}function G(k){return k.length>=2&&f.codePoint.ASCIIAlpha.test(k[0])&&(k[1]===":"||k[1]==="|")}function F(k){return k.length>=2&&G(k)&&(k.length===2||k[2]==="/"||k[2]==="\\"||k[2]==="?"||k[2]==="#")}function A(k,P){if(P===void 0&&(P=!1),k.startsWith("["))return k.endsWith("]")?X(k.substring(1,k.length-1)):(d("Expected ']' after '['."),null);if(P)return Y(k);var j=V(c.utf8Decode(Q(k)));if(j===null||g.test(j))return d("Invalid domain."),null;var z=$(j);return z===null||c.isNumber(z)?z:j}function H(k,P){P===void 0&&(P={value:!1});var j=10;return k.startsWith("0x")||k.startsWith("0X")?(P.value=!0,k=k.substr(2),j=16):k.length>=2&&k[0]==="0"&&(P.value=!0,k=k.substr(1),j=8),k===""?0:(j===10?/^[0-9]+$/:j===16?/^[0-9A-Fa-f]+$/:/^[0-7]+$/).test(k)?parseInt(k,j):null}function $(k){var P,j,z,Z,re={value:!1},ie=k.split(".");if(ie[ie.length-1]===""&&(re.value=!0,ie.length>1&&ie.pop()),ie.length>4)return k;var oe=[];try{for(var he=i(ie),ye=he.next();!ye.done;ye=he.next()){var Re=ye.value;if(Re===""||(Te=H(Re,re))===null)return k;oe.push(Te)}}catch(me){P={error:me}}finally{try{ye&&!ye.done&&(j=he.return)&&j.call(he)}finally{if(P)throw P.error}}re.value&&d("Invalid IP v4 address.");for(var De=0;De<oe.length;De++)if(oe[De]>255&&(d("Invalid IP v4 address."),De<oe.length-1))return null;if(oe[oe.length-1]>=Math.pow(256,5-oe.length))return d("Invalid IP v4 address."),null;var ge=oe[oe.length-1];oe.pop();var $e=0;try{for(var K=i(oe),we=K.next();!we.done;we=K.next()){var Te;ge+=(Te=we.value)*Math.pow(256,3-$e),$e++}}catch(me){z={error:me}}finally{try{we&&!we.done&&(Z=K.return)&&Z.call(K)}finally{if(z)throw z.error}}return ge}function X(k){var P,j=[0,0,0,0,0,0,0,0],z=0,Z=null,re=new c.StringWalker(k);if(re.c()===":"){if(!re.remaining().startsWith(":"))return d("Invalid IP v6 address."),null;re.pointer+=2,Z=z+=1}for(;re.c()!=="";){if(z===8)return d("Invalid IP v6 address."),null;if(re.c()!==":"){for(var ie=0,oe=0;oe<4&&f.codePoint.ASCIIHexDigit.test(re.c());)ie=16*ie+parseInt(re.c(),16),re.pointer++,oe++;if(re.c()==="."){if(oe===0||(re.pointer-=oe,z>6))return d("Invalid IP v6 address."),null;for(var he=0;re.c()!=="";){var ye=null;if(he>0){if(!(re.c()==="."&&he<4))return d("Invalid IP v6 address."),null;re.pointer++}if(!f.codePoint.ASCIIDigit.test(re.c()))return d("Invalid IP v6 address."),null;for(;f.codePoint.ASCIIDigit.test(re.c());){var Re=parseInt(re.c(),10);if(ye===null)ye=Re;else{if(ye===0)return d("Invalid IP v6 address."),null;ye=10*ye+Re}if(ye>255)return d("Invalid IP v6 address."),null;re.pointer++}if(ye===null)return d("Invalid IP v6 address."),null;j[z]=256*j[z]+ye,++he!==2&&he!==4||z++}if(he!==4)return d("Invalid IP v6 address."),null;break}if(re.c()===":"){if(re.pointer++,re.c()==="")return d("Invalid IP v6 address."),null}else if(re.c()!=="")return d("Invalid IP v6 address."),null;j[z]=ie,z++}else{if(Z!==null)return d("Invalid IP v6 address."),null;re.pointer++,Z=++z}}if(Z!==null){var De=z-Z;for(z=7;z!==0&&De>0;)P=o([j[Z+De-1],j[z]],2),j[z]=P[0],j[Z+De-1]=P[1],z--,De--}else if(Z===null&&z!==8)return d("Invalid IP v6 address."),null;return j}function Y(k){var P,j;if(/[\x00\t\f\r #/:?@\[\\\]]/.test(k))return d("Invalid host string."),null;var z="";try{for(var Z=i(k),re=Z.next();!re.done;re=Z.next())z+=te(re.value,h)}catch(ie){P={error:ie}}finally{try{re&&!re.done&&(j=Z.return)&&j.call(Z)}finally{if(P)throw P.error}}return z}function q(k){return null}function J(k){return"%"+("00"+k.toString(16).toUpperCase()).slice(-2)}function ne(k){for(var P=function(oe){return oe>=48&&oe<=57||oe>=65&&oe<=70||oe>=97&&oe<=102},j=new Uint8Array(k.length),z=0,Z=0;Z<k.length;Z++){var re=k[Z];if(re!==37)j[z]=re,z++;else if(re===37&&Z>=k.length-2)j[z]=re,z++;else if(re!==37||P(k[Z+1])&&P(k[Z+2])){var ie=parseInt(c.utf8Decode(Uint8Array.of(k[Z+1],k[Z+2])),16);j[z]=ie,z++,Z+=2}else j[z]=re,z++}return j.subarray(0,z)}function Q(k){return ne(c.utf8Encode(k))}function te(k,P){var j,z;if(!P.test(k))return k;var Z=c.utf8Encode(k),re="";try{for(var ie=i(Z),oe=ie.next();!oe.done;oe=ie.next())re+=J(oe.value)}catch(he){j={error:he}}finally{try{oe&&!oe.done&&(z=ie.return)&&z.call(ie)}finally{if(j)throw j.error}}return re}function L(k){var P,j,z,Z,re=[],ie=[];try{for(var oe=i(k),he=oe.next();!he.done;he=oe.next()){var ye=he.value;ye===38?(re.push(Uint8Array.from(ie)),ie=[]):ie.push(ye)}}catch(pe){P={error:pe}}finally{try{he&&!he.done&&(j=oe.return)&&j.call(oe)}finally{if(P)throw P.error}}ie.length!==0&&re.push(Uint8Array.from(ie));var Re=[];try{for(var De=i(re),ge=De.next();!ge.done;ge=De.next()){var $e=ge.value;if($e.length!==0){for(var K=$e.indexOf(61),we=K!==-1?$e.slice(0,K):$e,Te=K!==-1?$e.slice(K+1):new Uint8Array,me=0;me<we.length;me++)we[me]===43&&(we[me]=32);for(me=0;me<Te.length;me++)Te[me]===43&&(Te[me]=32);var ae=c.utf8Decode(we),ue=c.utf8Decode(Te);Re.push([ae,ue])}}}catch(pe){z={error:pe}}finally{try{ge&&!ge.done&&(Z=De.return)&&Z.call(De)}finally{if(z)throw z.error}}return Re}function _(k){var P,j,z="";try{for(var Z=i(k),re=Z.next();!re.done;re=Z.next()){var ie=re.value;z+=ie===32?"+":ie===42||ie===45||ie===46||ie>=48&&ie<=57||ie>=65&&ie<=90||ie===95||ie>=97&&ie<=122?String.fromCodePoint(ie):J(ie)}}catch(oe){P={error:oe}}finally{try{re&&!re.done&&(j=Z.return)&&j.call(Z)}finally{if(P)throw P.error}}return z}function V(k,P){var j=l.domainToASCII(k);return j===""?(d("Invalid domain name."),null):j}r.setValidationErrorCallback=function(k){s=k},r.newURL=C,r.isSpecialScheme=S,r.isSpecial=T,r.defaultPort=w,r.includesCredentials=E,r.cannotHaveAUsernamePasswordPort=function(k){return k.host===null||k.host===""||k._cannotBeABaseURLFlag||k.scheme==="file"},r.urlSerializer=D,r.hostSerializer=b,r.iPv4Serializer=O,r.iPv6Serializer=M,r.urlParser=function(k,P,j){var z=R(k,P,j);return z===null?null:(z.scheme!=="blob"||(z._blobURLEntry=null),z)},r.basicURLParser=R,r.setTheUsername=function(k,P){var j,z,Z="";try{for(var re=i(P),ie=re.next();!ie.done;ie=re.next())Z+=te(ie.value,m)}catch(oe){j={error:oe}}finally{try{ie&&!ie.done&&(z=re.return)&&z.call(re)}finally{if(j)throw j.error}}k.username=Z},r.setThePassword=function(k,P){var j,z,Z="";try{for(var re=i(P),ie=re.next();!ie.done;ie=re.next())Z+=te(ie.value,m)}catch(oe){j={error:oe}}finally{try{ie&&!ie.done&&(z=re.return)&&z.call(re)}finally{if(j)throw j.error}}k.password=Z},r.isSingleDotPathSegment=N,r.isDoubleDotPathSegment=U,r.shorten=W,r.isNormalizedWindowsDriveLetter=I,r.isWindowsDriveLetter=G,r.startsWithAWindowsDriveLetter=F,r.hostParser=A,r.iPv4NumberParser=H,r.iPv4Parser=$,r.iPv6Parser=X,r.opaqueHostParser=Y,r.resolveABlobURL=q,r.percentEncode=J,r.percentDecode=ne,r.stringPercentDecode=Q,r.utf8PercentEncode=te,r.hostEquals=function(k,P){return k===P},r.urlEquals=function(k,P,j){return j===void 0&&(j=!1),D(k,j)===D(P,j)},r.urlEncodedStringParser=function(k){return L(c.utf8Encode(k))},r.urlEncodedParser=L,r.urlEncodedByteSerializer=_,r.urlEncodedSerializer=function(k,P){var j,z;if((P===void 0||P==="replacement"||P==="UTF-16BE"||P==="UTF-16LE"?"UTF-8":P).toUpperCase()!=="UTF-8")throw new Error("Only UTF-8 encoding is supported.");var Z="";try{for(var re=i(k),ie=re.next();!ie.done;ie=re.next()){var oe=ie.value,he=_(c.utf8Encode(oe[0])),ye=oe[1];ye=_(c.utf8Encode(ye)),Z!==""&&(Z+="&"),Z+=he+"="+ye}}catch(Re){j={error:Re}}finally{try{ie&&!ie.done&&(z=re.return)&&z.call(re)}finally{if(j)throw j.error}}return Z},r.origin=function k(P){switch(P.scheme){case"blob":P._blobURLEntry;var j=R(P.path[0]);return j===null?u.OpaqueOrigin:k(j);case"ftp":case"http":case"https":case"ws":case"wss":return[P.scheme,P.host===null?"":P.host,P.port,null];case"file":default:return u.OpaqueOrigin}},r.domainToASCII=V,r.domainToUnicode=function(k,P){var j=l.domainToUnicode(k);return j===""&&d("Invalid domain name."),j},r.asciiSerializationOfAnOrigin=function(k){if(k[0]===""&&k[1]===""&&k[2]===null&&k[3]===null)return"null";var P=k[0]+"://"+b(k[1]);return k[2]!==null&&(P+=":"+k[2].toString()),P}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(0),o=function(){function s(){this._signal=i.create_abortSignal()}return Object.defineProperty(s.prototype,"signal",{get:function(){return this._signal},enumerable:!0,configurable:!0}),s.prototype.abort=function(){i.abort_signalAbort(this._signal)},s}();r.AbortControllerImpl=o},function(n,r,a){var i,o=this&&this.__extends||(i=function(f,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var v in h)h.hasOwnProperty(v)&&(p[v]=h[v])})(f,l)},function(f,l){function p(){this.constructor=f}i(f,l),f.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(70),c=a(0),u=function(f){function l(){var p=f.call(this)||this;return p._abortedFlag=!1,p._abortAlgorithms=new Set,p}return o(l,f),Object.defineProperty(l.prototype,"aborted",{get:function(){return this._abortedFlag},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"onabort",{get:function(){return c.event_getterEventHandlerIDLAttribute(this,"onabort")},set:function(p){c.event_setterEventHandlerIDLAttribute(this,"onabort",p)},enumerable:!0,configurable:!0}),l._create=function(){return new l},l}(s.EventTargetImpl);r.AbortSignalImpl=u},function(n,r,a){var i,o=this&&this.__extends||(i=function(l,p){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(l,p)},function(l,p){function h(){this.constructor=l}i(l,p),l.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(2),c=a(34),u=a(12),f=function(l){function p(h,v,y){var m=l.call(this)||this;return m._name="",m._publicId="",m._systemId="",m._name=h,m._publicId=v,m._systemId=y,m}return o(p,l),Object.defineProperty(p.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"publicId",{get:function(){return this._publicId},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"systemId",{get:function(){return this._systemId},enumerable:!0,configurable:!0}),p.prototype.before=function(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];throw new Error("Mixin: ChildNode not implemented.")},p.prototype.after=function(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];throw new Error("Mixin: ChildNode not implemented.")},p.prototype.replaceWith=function(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];throw new Error("Mixin: ChildNode not implemented.")},p.prototype.remove=function(){throw new Error("Mixin: ChildNode not implemented.")},p._create=function(h,v,y,m){y===void 0&&(y=""),m===void 0&&(m="");var x=new p(v,y,m);return x._nodeDocument=h,x},p}(c.NodeImpl);r.DocumentTypeImpl=f,u.idl_defineConst(f.prototype,"_nodeType",s.NodeType.DocumentType)},function(n,r,a){var i,o=this&&this.__extends||(i=function(l,p){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(l,p)},function(l,p){function h(){this.constructor=l}i(l,p),l.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(100),c=a(1),u=a(0),f=function(l){function p(h,v){var y=l.call(this)||this;return y._host=h,y._mode=v,y}return o(p,l),Object.defineProperty(p.prototype,"mode",{get:function(){return this._mode},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"host",{get:function(){return this._host},enumerable:!0,configurable:!0}),p.prototype._getTheParent=function(h){return h._composedFlag||c.isEmpty(h._path)||u.tree_rootNode(h._path[0].invocationTarget)!==this?this._host:null},p._create=function(h,v){return new p(v,"closed")},p}(s.DocumentFragmentImpl);r.ShadowRootImpl=f},function(n,r,a){var i,o=this&&this.__extends||(i=function(p,h){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,y){v.__proto__=y}||function(v,y){for(var m in y)y.hasOwnProperty(m)&&(v[m]=y[m])})(p,h)},function(p,h){function v(){this.constructor=p}i(p,h),p.prototype=h===null?Object.create(h):(v.prototype=h.prototype,new v)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(2),c=a(34),u=a(0),f=a(12),l=function(p){function h(v){var y=p.call(this)||this;return y._namespace=null,y._namespacePrefix=null,y._element=null,y._value="",y._localName=v,y}return o(h,p),Object.defineProperty(h.prototype,"ownerElement",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"namespaceURI",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"prefix",{get:function(){return this._namespacePrefix},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"localName",{get:function(){return this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"name",{get:function(){return this._qualifiedName},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"value",{get:function(){return this._value},set:function(v){u.attr_setAnExistingAttributeValue(this,v)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"_qualifiedName",{get:function(){return this._namespacePrefix!==null?this._namespacePrefix+":"+this._localName:this._localName},enumerable:!0,configurable:!0}),h._create=function(v,y){var m=new h(y);return m._nodeDocument=v,m},h}(c.NodeImpl);r.AttrImpl=l,f.idl_defineConst(l.prototype,"_nodeType",s.NodeType.Attribute),f.idl_defineConst(l.prototype,"specified",!0)},function(n,r,a){var i,o=this&&this.__extends||(i=function(l,p){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(l,p)},function(l,p){function h(){this.constructor=l}i(l,p),l.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(101),c=a(2),u=a(12),f=function(l){function p(h){return l.call(this,h)||this}return o(p,l),p._create=function(h,v){v===void 0&&(v="");var y=new p(v);return y._nodeDocument=h,y},p}(s.TextImpl);r.CDATASectionImpl=f,u.idl_defineConst(f.prototype,"_nodeType",c.NodeType.CData)},function(n,r,a){var i,o=this&&this.__extends||(i=function(l,p){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(l,p)},function(l,p){function h(){this.constructor=l}i(l,p),l.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(2),c=a(71),u=a(12),f=function(l){function p(h){return h===void 0&&(h=""),l.call(this,h)||this}return o(p,l),p._create=function(h,v){v===void 0&&(v="");var y=new p(v);return y._nodeDocument=h,y},p}(c.CharacterDataImpl);r.CommentImpl=f,u.idl_defineConst(f.prototype,"_nodeType",s.NodeType.Comment)},function(n,r,a){var i,o=this&&this.__extends||(i=function(l,p){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(l,p)},function(l,p){function h(){this.constructor=l}i(l,p),l.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(2),c=a(71),u=a(12),f=function(l){function p(h,v){var y=l.call(this,v)||this;return y._target=h,y}return o(p,l),Object.defineProperty(p.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),p._create=function(h,v,y){var m=new p(v,y);return m._nodeDocument=h,m},p}(c.CharacterDataImpl);r.ProcessingInstructionImpl=f,u.idl_defineConst(f.prototype,"_nodeType",s.NodeType.ProcessingInstruction)},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(7),o=a(0),s=a(3),c=a(1),u=function(){function f(l,p){return this._live=!0,this._root=l,this._filter=p,new Proxy(this,this)}return Object.defineProperty(f.prototype,"length",{get:function(){for(var l=this,p=0,h=o.tree_getFirstDescendantNode(this._root,!1,!1,function(v){return s.Guard.isElementNode(v)&&l._filter(v)});h!==null;)p++,h=o.tree_getNextDescendantNode(this._root,h,!1,!1,function(v){return s.Guard.isElementNode(v)&&l._filter(v)});return p},enumerable:!0,configurable:!0}),f.prototype.item=function(l){for(var p=this,h=0,v=o.tree_getFirstDescendantNode(this._root,!1,!1,function(y){return s.Guard.isElementNode(y)&&p._filter(y)});v!==null;){if(h===l)return v;h++,v=o.tree_getNextDescendantNode(this._root,v,!1,!1,function(y){return s.Guard.isElementNode(y)&&p._filter(y)})}return null},f.prototype.namedItem=function(l){var p=this;if(l==="")return null;for(var h=o.tree_getFirstDescendantNode(this._root,!1,!1,function(m){return s.Guard.isElementNode(m)&&p._filter(m)});h!=null;){if(h._uniqueIdentifier===l)return h;if(h._namespace===i.namespace.HTML)for(var v=0;v<h._attributeList.length;v++){var y=h._attributeList[v];if(y._localName==="name"&&y._namespace===null&&y._namespacePrefix===null&&y._value===l)return h}h=o.tree_getNextDescendantNode(this._root,h,!1,!1,function(m){return s.Guard.isElementNode(m)&&p._filter(m)})}return null},f.prototype[Symbol.iterator]=function(){var l=this._root,p=this._filter,h=o.tree_getFirstDescendantNode(l,!1,!1,function(v){return s.Guard.isElementNode(v)&&p(v)});return{next:function(){if(h===null)return{done:!0,value:null};var v={done:!1,value:h};return h=o.tree_getNextDescendantNode(l,h,!1,!1,function(y){return s.Guard.isElementNode(y)&&p(y)}),v}}},f.prototype.get=function(l,p,h){if(!c.isString(p)||f.reservedNames.indexOf(p)!==-1)return Reflect.get(l,p,h);var v=Number(p);return isNaN(v)?l.namedItem(p)||void 0:l.item(v)||void 0},f.prototype.set=function(l,p,h,v){if(!c.isString(p)||f.reservedNames.indexOf(p)!==-1)return Reflect.set(l,p,h,v);var y=Number(p),m=isNaN(y)?l.namedItem(p)||void 0:l.item(y)||void 0;return!(!m||!m._parent)&&(o.mutation_replace(m,h,m._parent),!0)},f._create=function(l,p){return p===void 0&&(p=function(){return!0}),new f(l,p)},f.reservedNames=["_root","_live","_filter","length","item","namedItem","get","set"],f}();r.HTMLCollectionImpl=u},function(n,r,a){var i=this&&this.__values||function(f){var l=typeof Symbol=="function"&&Symbol.iterator,p=l&&f[l],h=0;if(p)return p.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&h>=f.length&&(f=void 0),{value:f&&f[h++],done:!f}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(6),s=a(1),c=a(0),u=function(){function f(l){return this._live=!0,this._filter=null,this._length=0,this._root=l,new Proxy(this,this)}return Object.defineProperty(f.prototype,"length",{get:function(){return this._root._children.size},enumerable:!0,configurable:!0}),f.prototype.item=function(l){if(l<0||l>this.length-1)return null;if(l<this.length/2){for(var p=0,h=this._root._firstChild;h!==null&&p!==l;)h=h._nextSibling,p++;return h}for(p=this.length-1,h=this._root._lastChild;h!==null&&p!==l;)h=h._previousSibling,p--;return h},f.prototype.keys=function(){var l;return(l={})[Symbol.iterator]=function(){var p=0;return{next:function(){return p===this.length?{done:!0,value:null}:{done:!1,value:p++}}.bind(this)}}.bind(this),l},f.prototype.values=function(){var l;return(l={})[Symbol.iterator]=function(){var p=this[Symbol.iterator]();return{next:function(){return p.next()}}}.bind(this),l},f.prototype.entries=function(){var l;return(l={})[Symbol.iterator]=function(){var p=this[Symbol.iterator](),h=0;return{next:function(){var v=p.next();return v.done?{done:!0,value:null}:{done:!1,value:[h++,v.value]}}}}.bind(this),l},f.prototype[Symbol.iterator]=function(){return this._root._children[Symbol.iterator]()},f.prototype.forEach=function(l,p){var h,v;p===void 0&&(p=o.dom.window);var y=0;try{for(var m=i(this._root._children),x=m.next();!x.done;x=m.next()){var g=x.value;l.call(p,g,y++,this)}}catch(d){h={error:d}}finally{try{x&&!x.done&&(v=m.return)&&v.call(m)}finally{if(h)throw h.error}}},f.prototype.get=function(l,p,h){if(!s.isString(p))return Reflect.get(l,p,h);var v=Number(p);return isNaN(v)?Reflect.get(l,p,h):l.item(v)||void 0},f.prototype.set=function(l,p,h,v){if(!s.isString(p))return Reflect.set(l,p,h,v);var y=Number(p);if(isNaN(y))return Reflect.set(l,p,h,v);var m=l.item(y)||void 0;return!!m&&!!m._parent&&(c.mutation_replace(m,h,m._parent),!0)},f._create=function(l){return new f(l)},f}();r.NodeListImpl=u},function(n,r,a){var i=this&&this.__values||function(u){var f=typeof Symbol=="function"&&Symbol.iterator,l=f&&u[f],p=0;if(l)return l.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&p>=u.length&&(u=void 0),{value:u&&u[p++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(6),s=a(1),c=function(){function u(f){return this._live=!1,this._items=[],this._length=0,this._root=f,this._items=[],this._filter=function(l){return!0},new Proxy(this,this)}return Object.defineProperty(u.prototype,"length",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),u.prototype.item=function(f){return f<0||f>this.length-1?null:this._items[f]},u.prototype.keys=function(){var f;return(f={})[Symbol.iterator]=function(){var l=0;return{next:function(){return l===this.length?{done:!0,value:null}:{done:!1,value:l++}}.bind(this)}}.bind(this),f},u.prototype.values=function(){var f;return(f={})[Symbol.iterator]=function(){var l=this[Symbol.iterator]();return{next:function(){return l.next()}}}.bind(this),f},u.prototype.entries=function(){var f;return(f={})[Symbol.iterator]=function(){var l=this[Symbol.iterator](),p=0;return{next:function(){var h=l.next();return h.done?{done:!0,value:null}:{done:!1,value:[p++,h.value]}}}}.bind(this),f},u.prototype[Symbol.iterator]=function(){var f=this._items[Symbol.iterator]();return{next:function(){return f.next()}}},u.prototype.forEach=function(f,l){var p,h;l===void 0&&(l=o.dom.window);var v=0;try{for(var y=i(this._items),m=y.next();!m.done;m=y.next()){var x=m.value;f.call(l,x,v++,this)}}catch(g){p={error:g}}finally{try{m&&!m.done&&(h=y.return)&&h.call(y)}finally{if(p)throw p.error}}},u.prototype.get=function(f,l,p){if(!s.isString(l))return Reflect.get(f,l,p);var h=Number(l);return isNaN(h)?Reflect.get(f,l,p):f._items[h]||void 0},u.prototype.set=function(f,l,p,h){if(!s.isString(l))return Reflect.set(f,l,p,h);var v=Number(l);return isNaN(v)?Reflect.set(f,l,p,h):v>=0&&v<f._items.length&&(f._items[v]=p,!0)},u._create=function(f,l){var p=new u(f);return p._items=l,p},u}();r.NodeListStaticImpl=c},function(n,r,a){var i,o=this&&this.__extends||(i=function(f,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var v in h)h.hasOwnProperty(v)&&(p[v]=h[v])})(f,l)},function(f,l){function p(){this.constructor=f}i(f,l),f.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(9),c=a(0),u=function(f){function l(p){var h=f.call(this)||this;return h._element=p,Object.setPrototypeOf(h,l.prototype),h}return o(l,f),l.prototype._asArray=function(){return this},l.prototype.item=function(p){return this[p]||null},l.prototype.getNamedItem=function(p){return c.element_getAnAttributeByName(p,this._element)},l.prototype.getNamedItemNS=function(p,h){return c.element_getAnAttributeByNamespaceAndLocalName(p||"",h,this._element)},l.prototype.setNamedItem=function(p){return c.element_setAnAttribute(p,this._element)},l.prototype.setNamedItemNS=function(p){return c.element_setAnAttribute(p,this._element)},l.prototype.removeNamedItem=function(p){var h=c.element_removeAnAttributeByName(p,this._element);if(h===null)throw new s.NotFoundError;return h},l.prototype.removeNamedItemNS=function(p,h){var v=c.element_removeAnAttributeByNamespaceAndLocalName(p||"",h,this._element);if(v===null)throw new s.NotFoundError;return v},l._create=function(p){return new l(p)},l}(Array);r.NamedNodeMapImpl=u},function(n,r,a){var i,o=this&&this.__extends||(i=function(m,x){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var C in d)d.hasOwnProperty(C)&&(g[C]=d[C])})(m,x)},function(m,x){function g(){this.constructor=m}i(m,x),m.prototype=x===null?Object.create(x):(g.prototype=x.prototype,new g)}),s=this&&this.__values||function(m){var x=typeof Symbol=="function"&&Symbol.iterator,g=x&&m[x],d=0;if(g)return g.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&d>=m.length&&(m=void 0),{value:m&&m[d++],done:!m}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var c=a(6),u=a(2),f=a(102),l=a(9),p=a(0),h=a(12),v=a(3),y=function(m){function x(){var g=m.call(this)||this,d=c.dom.window._associatedDocument;return g._start=[d,0],g._end=[d,0],c.dom.rangeList.add(g),g}return o(x,m),Object.defineProperty(x.prototype,"commonAncestorContainer",{get:function(){for(var g=this._start[0];!p.tree_isAncestorOf(this._end[0],g,!0);){if(g._parent===null)throw new Error("Parent node  is null.");g=g._parent}return g},enumerable:!0,configurable:!0}),x.prototype.setStart=function(g,d){p.range_setTheStart(this,g,d)},x.prototype.setEnd=function(g,d){p.range_setTheEnd(this,g,d)},x.prototype.setStartBefore=function(g){var d=g._parent;if(d===null)throw new l.InvalidNodeTypeError;p.range_setTheStart(this,d,p.tree_index(g))},x.prototype.setStartAfter=function(g){var d=g._parent;if(d===null)throw new l.InvalidNodeTypeError;p.range_setTheStart(this,d,p.tree_index(g)+1)},x.prototype.setEndBefore=function(g){var d=g._parent;if(d===null)throw new l.InvalidNodeTypeError;p.range_setTheEnd(this,d,p.tree_index(g))},x.prototype.setEndAfter=function(g){var d=g._parent;if(d===null)throw new l.InvalidNodeTypeError;p.range_setTheEnd(this,d,p.tree_index(g)+1)},x.prototype.collapse=function(g){g?this._end=this._start:this._start=this._end},x.prototype.selectNode=function(g){p.range_select(g,this)},x.prototype.selectNodeContents=function(g){if(v.Guard.isDocumentTypeNode(g))throw new l.InvalidNodeTypeError;var d=p.tree_nodeLength(g);this._start=[g,0],this._end=[g,d]},x.prototype.compareBoundaryPoints=function(g,d){if(g!==u.HowToCompare.StartToStart&&g!==u.HowToCompare.StartToEnd&&g!==u.HowToCompare.EndToEnd&&g!==u.HowToCompare.EndToStart)throw new l.NotSupportedError;if(p.range_root(this)!==p.range_root(d))throw new l.WrongDocumentError;var C,S;switch(g){case u.HowToCompare.StartToStart:C=this._start,S=d._start;break;case u.HowToCompare.StartToEnd:C=this._end,S=d._start;break;case u.HowToCompare.EndToEnd:C=this._end,S=d._end;break;case u.HowToCompare.EndToStart:C=this._start,S=d._end;break;default:throw new l.NotSupportedError}var T=p.boundaryPoint_position(C,S);return T===u.BoundaryPosition.Before?-1:T===u.BoundaryPosition.After?1:0},x.prototype.deleteContents=function(){var g,d,C,S;if(!p.range_collapsed(this)){var T=this._startNode,w=this._startOffset,E=this._endNode,D=this._endOffset;if(T===E&&v.Guard.isCharacterDataNode(T))p.characterData_replaceData(T,w,D-w,"");else{var b,O,M=[];try{for(var R=s(p.range_getContainedNodes(this)),N=R.next();!N.done;N=R.next()){var U=(F=N.value)._parent;U!==null&&p.range_isContained(U,this)||M.push(F)}}catch(A){g={error:A}}finally{try{N&&!N.done&&(d=R.return)&&d.call(R)}finally{if(g)throw g.error}}if(p.tree_isAncestorOf(E,T,!0))b=T,O=w;else{for(var W=T;W._parent!==null&&!p.tree_isAncestorOf(E,W._parent,!0);)W=W._parent;if(W._parent===null)throw new Error("Parent node is null.");b=W._parent,O=p.tree_index(W)+1}v.Guard.isCharacterDataNode(T)&&p.characterData_replaceData(T,w,p.tree_nodeLength(T)-w,"");try{for(var I=s(M),G=I.next();!G.done;G=I.next()){var F;(F=G.value)._parent&&p.mutation_remove(F,F._parent)}}catch(A){C={error:A}}finally{try{G&&!G.done&&(S=I.return)&&S.call(I)}finally{if(C)throw C.error}}v.Guard.isCharacterDataNode(E)&&p.characterData_replaceData(E,0,D,""),this._start=[b,O],this._end=[b,O]}}},x.prototype.extractContents=function(){return p.range_extract(this)},x.prototype.cloneContents=function(){return p.range_cloneTheContents(this)},x.prototype.insertNode=function(g){return p.range_insert(g,this)},x.prototype.surroundContents=function(g){var d,C;try{for(var S=s(p.range_getPartiallyContainedNodes(this)),T=S.next();!T.done;T=S.next()){var w=T.value;if(!v.Guard.isTextNode(w))throw new l.InvalidStateError}}catch(D){d={error:D}}finally{try{T&&!T.done&&(C=S.return)&&C.call(S)}finally{if(d)throw d.error}}if(v.Guard.isDocumentNode(g)||v.Guard.isDocumentTypeNode(g)||v.Guard.isDocumentFragmentNode(g))throw new l.InvalidNodeTypeError;var E=p.range_extract(this);g._children.size!==0&&p.mutation_replaceAll(null,g),p.range_insert(g,this),p.mutation_append(E,g),p.range_select(g,this)},x.prototype.cloneRange=function(){return p.create_range(this._start,this._end)},x.prototype.detach=function(){c.dom.rangeList.delete(this)},x.prototype.isPointInRange=function(g,d){if(p.tree_rootNode(g)!==p.range_root(this))return!1;if(v.Guard.isDocumentTypeNode(g))throw new l.InvalidNodeTypeError;if(d>p.tree_nodeLength(g))throw new l.IndexSizeError;var C=[g,d];return p.boundaryPoint_position(C,this._start)!==u.BoundaryPosition.Before&&p.boundaryPoint_position(C,this._end)!==u.BoundaryPosition.After},x.prototype.comparePoint=function(g,d){if(p.tree_rootNode(g)!==p.range_root(this))throw new l.WrongDocumentError;if(v.Guard.isDocumentTypeNode(g))throw new l.InvalidNodeTypeError;if(d>p.tree_nodeLength(g))throw new l.IndexSizeError;var C=[g,d];return p.boundaryPoint_position(C,this._start)===u.BoundaryPosition.Before?-1:p.boundaryPoint_position(C,this._end)===u.BoundaryPosition.After?1:0},x.prototype.intersectsNode=function(g){if(p.tree_rootNode(g)!==p.range_root(this))return!1;var d=g._parent;if(d===null)return!0;var C=p.tree_index(g);return p.boundaryPoint_position([d,C],this._end)===u.BoundaryPosition.Before&&p.boundaryPoint_position([d,C+1],this._start)===u.BoundaryPosition.After},x.prototype.toString=function(){var g,d,C="";if(this._startNode===this._endNode&&v.Guard.isTextNode(this._startNode))return this._startNode._data.substring(this._startOffset,this._endOffset);v.Guard.isTextNode(this._startNode)&&(C+=this._startNode._data.substring(this._startOffset));try{for(var S=s(p.range_getContainedNodes(this)),T=S.next();!T.done;T=S.next()){var w=T.value;v.Guard.isTextNode(w)&&(C+=w._data)}}catch(E){g={error:E}}finally{try{T&&!T.done&&(d=S.return)&&d.call(S)}finally{if(g)throw g.error}}return v.Guard.isTextNode(this._endNode)&&(C+=this._endNode._data.substring(0,this._endOffset)),C},x._create=function(g,d){var C=new x;return g&&(C._start=g),d&&(C._end=d),C},x.START_TO_START=0,x.START_TO_END=1,x.END_TO_END=2,x.END_TO_START=3,x}(f.AbstractRangeImpl);r.RangeImpl=y,h.idl_defineConst(y.prototype,"START_TO_START",0),h.idl_defineConst(y.prototype,"START_TO_END",1),h.idl_defineConst(y.prototype,"END_TO_END",2),h.idl_defineConst(y.prototype,"END_TO_START",3)},function(n,r,a){var i,o=this&&this.__extends||(i=function(f,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var v in h)h.hasOwnProperty(v)&&(p[v]=h[v])})(f,l)},function(f,l){function p(){this.constructor=f}i(f,l),f.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(103),c=a(0),u=function(f){function l(p,h,v){var y=f.call(this,p)||this;return y._iteratorCollection=void 0,y._reference=h,y._pointerBeforeReference=v,c.nodeIterator_iteratorList().add(y),y}return o(l,f),Object.defineProperty(l.prototype,"referenceNode",{get:function(){return this._reference},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"pointerBeforeReferenceNode",{get:function(){return this._pointerBeforeReference},enumerable:!0,configurable:!0}),l.prototype.nextNode=function(){return c.nodeIterator_traverse(this,!0)},l.prototype.previousNode=function(){return c.nodeIterator_traverse(this,!1)},l.prototype.detach=function(){c.nodeIterator_iteratorList().delete(this)},l._create=function(p,h,v){return new l(p,h,v)},l}(s.TraverserImpl);r.NodeIteratorImpl=u},function(n,r,a){var i,o=this&&this.__extends||(i=function(l,p){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(l,p)},function(l,p){function h(){this.constructor=l}i(l,p),l.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(2),c=a(103),u=a(0),f=function(l){function p(h,v){var y=l.call(this,h)||this;return y._current=v,y}return o(p,l),Object.defineProperty(p.prototype,"currentNode",{get:function(){return this._current},set:function(h){this._current=h},enumerable:!0,configurable:!0}),p.prototype.parentNode=function(){for(var h=this._current;h!==null&&h!==this._root;)if((h=h._parent)!==null&&u.traversal_filter(this,h)===s.FilterResult.Accept)return this._current=h,h;return null},p.prototype.firstChild=function(){return u.treeWalker_traverseChildren(this,!0)},p.prototype.lastChild=function(){return u.treeWalker_traverseChildren(this,!1)},p.prototype.nextSibling=function(){return u.treeWalker_traverseSiblings(this,!0)},p.prototype.previousNode=function(){for(var h=this._current;h!==this._root;){for(var v=h._previousSibling;v;){h=v;for(var y=u.traversal_filter(this,h);y!==s.FilterResult.Reject&&h._lastChild;)h=h._lastChild,y=u.traversal_filter(this,h);if(y===s.FilterResult.Accept)return this._current=h,h;v=h._previousSibling}if(h===this._root||h._parent===null)return null;if(h=h._parent,u.traversal_filter(this,h)===s.FilterResult.Accept)return this._current=h,h}return null},p.prototype.previousSibling=function(){return u.treeWalker_traverseSiblings(this,!1)},p.prototype.nextNode=function(){for(var h=this._current,v=s.FilterResult.Accept;;){for(;v!==s.FilterResult.Reject&&h._firstChild;)if(h=h._firstChild,(v=u.traversal_filter(this,h))===s.FilterResult.Accept)return this._current=h,h;for(var y=null,m=h;m!==null;){if(m===this._root)return null;if((y=m._nextSibling)!==null){h=y;break}m=m._parent}if((v=u.traversal_filter(this,h))===s.FilterResult.Accept)return this._current=h,h}},p._create=function(h,v){return new p(h,v)},p}(c.TraverserImpl);r.TreeWalkerImpl=f},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(2),o=a(12),s=function(){function c(){}return c.prototype.acceptNode=function(u){return i.FilterResult.Accept},c._create=function(){return new c},c.FILTER_ACCEPT=1,c.FILTER_REJECT=2,c.FILTER_SKIP=3,c.SHOW_ALL=4294967295,c.SHOW_ELEMENT=1,c.SHOW_ATTRIBUTE=2,c.SHOW_TEXT=4,c.SHOW_CDATA_SECTION=8,c.SHOW_ENTITY_REFERENCE=16,c.SHOW_ENTITY=32,c.SHOW_PROCESSING_INSTRUCTION=64,c.SHOW_COMMENT=128,c.SHOW_DOCUMENT=256,c.SHOW_DOCUMENT_TYPE=512,c.SHOW_DOCUMENT_FRAGMENT=1024,c.SHOW_NOTATION=2048,c}();r.NodeFilterImpl=s,o.idl_defineConst(s.prototype,"FILTER_ACCEPT",1),o.idl_defineConst(s.prototype,"FILTER_REJECT",2),o.idl_defineConst(s.prototype,"FILTER_SKIP",3),o.idl_defineConst(s.prototype,"SHOW_ALL",4294967295),o.idl_defineConst(s.prototype,"SHOW_ELEMENT",1),o.idl_defineConst(s.prototype,"SHOW_ATTRIBUTE",2),o.idl_defineConst(s.prototype,"SHOW_TEXT",4),o.idl_defineConst(s.prototype,"SHOW_CDATA_SECTION",8),o.idl_defineConst(s.prototype,"SHOW_ENTITY_REFERENCE",16),o.idl_defineConst(s.prototype,"SHOW_ENTITY",32),o.idl_defineConst(s.prototype,"SHOW_PROCESSING_INSTRUCTION",64),o.idl_defineConst(s.prototype,"SHOW_COMMENT",128),o.idl_defineConst(s.prototype,"SHOW_DOCUMENT",256),o.idl_defineConst(s.prototype,"SHOW_DOCUMENT_TYPE",512),o.idl_defineConst(s.prototype,"SHOW_DOCUMENT_FRAGMENT",1024),o.idl_defineConst(s.prototype,"SHOW_NOTATION",2048)},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function o(s,c,u,f,l,p,h,v,y){this._type=s,this._target=c,this._addedNodes=u,this._removedNodes=f,this._previousSibling=l,this._nextSibling=p,this._attributeName=h,this._attributeNamespace=v,this._oldValue=y}return Object.defineProperty(o.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"addedNodes",{get:function(){return this._addedNodes},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"removedNodes",{get:function(){return this._removedNodes},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"previousSibling",{get:function(){return this._previousSibling},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"nextSibling",{get:function(){return this._nextSibling},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"attributeName",{get:function(){return this._attributeName},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"attributeNamespace",{get:function(){return this._attributeNamespace},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"oldValue",{get:function(){return this._oldValue},enumerable:!0,configurable:!0}),o._create=function(s,c,u,f,l,p,h,v,y){return new o(s,c,u,f,l,p,h,v,y)},o}();r.MutationRecordImpl=i},function(n,r,a){var i=this&&this.__values||function(l){var p=typeof Symbol=="function"&&Symbol.iterator,h=p&&l[p],v=0;if(h)return h.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&v>=l.length&&(l=void 0),{value:l&&l[v++],done:!l}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(6),s=a(9),c=a(7),u=a(0),f=function(){function l(p,h){this._element=p,this._attribute=h,this._tokenSet=new Set;var v=h._localName,y=u.element_getAnAttributeValue(p,v),m=this;this._element._attributeChangeSteps.push(function(x,g,d,C,S){g===m._attribute._localName&&S===null&&(C?m._tokenSet=u.orderedSet_parse(C):m._tokenSet.clear())}),o.dom.features.steps&&u.dom_runAttributeChangeSteps(p,v,y,y,null)}return Object.defineProperty(l.prototype,"length",{get:function(){return this._tokenSet.size},enumerable:!0,configurable:!0}),l.prototype.item=function(p){var h,v,y=0;try{for(var m=i(this._tokenSet),x=m.next();!x.done;x=m.next()){var g=x.value;if(y===p)return g;y++}}catch(d){h={error:d}}finally{try{x&&!x.done&&(v=m.return)&&v.call(m)}finally{if(h)throw h.error}}return null},l.prototype.contains=function(p){return this._tokenSet.has(p)},l.prototype.add=function(){for(var p,h,v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];try{for(var m=i(v),x=m.next();!x.done;x=m.next()){var g=x.value;if(g==="")throw new s.SyntaxError("Cannot add an empty token.");if(c.codePoint.ASCIIWhiteSpace.test(g))throw new s.InvalidCharacterError("Token cannot contain whitespace.");this._tokenSet.add(g)}}catch(d){p={error:d}}finally{try{x&&!x.done&&(h=m.return)&&h.call(m)}finally{if(p)throw p.error}}u.tokenList_updateSteps(this)},l.prototype.remove=function(){for(var p,h,v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];try{for(var m=i(v),x=m.next();!x.done;x=m.next()){var g=x.value;if(g==="")throw new s.SyntaxError("Cannot remove an empty token.");if(c.codePoint.ASCIIWhiteSpace.test(g))throw new s.InvalidCharacterError("Token cannot contain whitespace.");this._tokenSet.delete(g)}}catch(d){p={error:d}}finally{try{x&&!x.done&&(h=m.return)&&h.call(m)}finally{if(p)throw p.error}}u.tokenList_updateSteps(this)},l.prototype.toggle=function(p,h){if(h===void 0&&(h=void 0),p==="")throw new s.SyntaxError("Cannot toggle an empty token.");if(c.codePoint.ASCIIWhiteSpace.test(p))throw new s.InvalidCharacterError("Token cannot contain whitespace.");return this._tokenSet.has(p)?h!==void 0&&h!==!1||(this._tokenSet.delete(p),u.tokenList_updateSteps(this),!1):(h===void 0||h===!0)&&(this._tokenSet.add(p),u.tokenList_updateSteps(this),!0)},l.prototype.replace=function(p,h){if(p===""||h==="")throw new s.SyntaxError("Cannot replace an empty token.");if(c.codePoint.ASCIIWhiteSpace.test(p)||c.codePoint.ASCIIWhiteSpace.test(h))throw new s.InvalidCharacterError("Token cannot contain whitespace.");return!!this._tokenSet.has(p)&&(c.set.replace(this._tokenSet,p,h),u.tokenList_updateSteps(this),!0)},l.prototype.supports=function(p){return u.tokenList_validationSteps(this,p)},Object.defineProperty(l.prototype,"value",{get:function(){return u.tokenList_serializeSteps(this)},set:function(p){u.element_setAnAttributeValue(this._element,this._attribute._localName,p)},enumerable:!0,configurable:!0}),l.prototype[Symbol.iterator]=function(){var p=this._tokenSet[Symbol.iterator]();return{next:function(){return p.next()}}},l._create=function(p,h){return new l(p,h)},l}();r.DOMTokenListImpl=f},function(n,r,a){var i,o=this&&this.__extends||(i=function(f,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var v in h)h.hasOwnProperty(v)&&(p[v]=h[v])})(f,l)},function(f,l){function p(){this.constructor=f}i(f,l),f.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(104),c=a(0),u=function(f){function l(p,h){var v=f.call(this,p,h)||this;return v._detail=null,v._detail=h&&h.detail||null,v}return o(l,f),Object.defineProperty(l.prototype,"detail",{get:function(){return this._detail},enumerable:!0,configurable:!0}),l.prototype.initCustomEvent=function(p,h,v,y){h===void 0&&(h=!1),v===void 0&&(v=!1),y===void 0&&(y=null),this._dispatchFlag||(c.event_initialize(this,p,h,v),this._detail=y)},l}(s.EventImpl);r.CustomEventImpl=u},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(6),o=a(2),s=a(105),c=a(17);r.nodeIterator_traverse=function(u,f){for(var l=u._reference,p=u._pointerBeforeReference;;){if(f)if(p)p=!1;else{var h=c.tree_getFollowingNode(u._root,l);if(!h)return null;l=h}else if(p){var v=c.tree_getPrecedingNode(u.root,l);if(!v)return null;l=v}else p=!0;if(s.traversal_filter(u,l)===o.FilterResult.Accept)break}return u._reference=l,u._pointerBeforeReference=p,l},r.nodeIterator_iteratorList=function(){return i.dom.window._iteratorList}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(9),o=a(7),s=a(174);function c(u){if(!s.xml_isName(u))throw new i.InvalidCharacterError("Invalid XML name: "+u);if(!s.xml_isQName(u))throw new i.InvalidCharacterError("Invalid XML qualified name: "+u+".")}r.namespace_validate=c,r.namespace_validateAndExtract=function(u,f){u||(u=null),c(f);var l=f.split(":"),p=l.length===2?l[0]:null,h=l.length===2?l[1]:f;if(p&&u===null)throw new i.NamespaceError("Qualified name includes a prefix but the namespace is null.");if(p==="xml"&&u!==o.namespace.XML)throw new i.NamespaceError('Qualified name includes the "xml" prefix but the namespace is not the XML namespace.');if(u!==o.namespace.XMLNS&&(p==="xmlns"||f==="xmlns"))throw new i.NamespaceError('Qualified name includes the "xmlns" prefix but the namespace is not the XMLNS namespace.');if(u===o.namespace.XMLNS&&p!=="xmlns"&&f!=="xmlns")throw new i.NamespaceError('Qualified name does not include the "xmlns" prefix but the namespace is the XMLNS namespace.');return[u,p,h]},r.namespace_extractQName=function(u){c(u);var f=u.split(":");return[f.length===2?f[0]:null,f.length===2?f[1]:u]}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.xml_isName=function(i){for(var o=0;o<i.length;o++){var s=i.charCodeAt(o);if(!(s>=97&&s<=122||s>=65&&s<=90||s===58||s===95||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8204&&s<=8205||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533)&&(o===0||!(s===45||s===46||s>=48&&s<=57||s===183||s>=768&&s<=879||s>=8255&&s<=8256))){if(s>=55296&&s<=56319&&o<i.length-1){var c=i.charCodeAt(o+1);if(c>=56320&&c<=57343&&(o++,(s=1024*(s-55296)+c-56320+65536)>=65536&&s<=983039))continue}return!1}}return!0},r.xml_isQName=function(i){for(var o=!1,s=0;s<i.length;s++){var c=i.charCodeAt(s);if(!(c>=97&&c<=122||c>=65&&c<=90||c===95||c>=192&&c<=214||c>=216&&c<=246||c>=248&&c<=767||c>=880&&c<=893||c>=895&&c<=8191||c>=8204&&c<=8205||c>=8304&&c<=8591||c>=11264&&c<=12271||c>=12289&&c<=55295||c>=63744&&c<=64975||c>=65008&&c<=65533)&&(s===0||!(c===45||c===46||c>=48&&c<=57||c===183||c>=768&&c<=879||c>=8255&&c<=8256))){if(s===0||c!==58){if(c>=55296&&c<=56319&&s<i.length-1){var u=i.charCodeAt(s+1);if(u>=56320&&u<=57343&&(s++,(c=1024*(c-55296)+u-56320+65536)>=65536&&c<=983039))continue}return!1}if(o||s===i.length-1)return!1;o=!0}}return!0},r.xml_isLegalChar=function(i){for(var o=0;o<i.length;o++){var s=i.charCodeAt(o);if(!(s===9||s===10||s===13||s>=32&&s<=55295||s>=57344&&s<=65533)){if(s>=55296&&s<=56319&&o<i.length-1){var c=i.charCodeAt(o+1);if(c>=56320&&c<=57343&&(o++,(s=1024*(s-55296)+c-56320+65536)>=65536&&s<=1114111))continue}return!1}}return!0},r.xml_isPubidChar=function(i){for(var o=0;o<i.length;o++){var s=i.charCodeAt(o);if(!(s>=97&&s<=122||s>=65&&s<=90||s>=39&&s<=59||s===32||s===13||s===10||s>=35&&s<=37||s===33||s===61||s===63||s===64||s===95))return!1}return!0}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(2),o=a(17);r.boundaryPoint_position=function s(c,u){var f=c[0],l=c[1],p=u[0],h=u[1];if(console.assert(o.tree_rootNode(f)===o.tree_rootNode(p),"Boundary points must share the same root node."),f===p)return l===h?i.BoundaryPosition.Equal:l<h?i.BoundaryPosition.Before:i.BoundaryPosition.After;if(o.tree_isFollowing(p,f)){var v=s([p,h],[f,l]);if(v===i.BoundaryPosition.Before)return i.BoundaryPosition.After;if(v===i.BoundaryPosition.After)return i.BoundaryPosition.Before}if(o.tree_isAncestorOf(p,f)){for(var y=p;!o.tree_isChildOf(f,y);)y._parent!==null&&(y=y._parent);if(o.tree_index(y)<l)return i.BoundaryPosition.After}return i.BoundaryPosition.Before}},function(n,r,a){var i=this&&this.__values||function(v){var y=typeof Symbol=="function"&&Symbol.iterator,m=y&&v[y],x=0;if(m)return m.call(v);if(v&&typeof v.length=="number")return{next:function(){return v&&x>=v.length&&(v=void 0),{value:v&&v[x++],done:!v}}};throw new TypeError(y?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(6),s=a(3),c=a(7),u=a(29),f=a(108),l=a(30),p=a(37),h=a(52);r.node_stringReplaceAll=function(v,y){var m=null;v!==""&&(m=u.create_text(y._nodeDocument,v)),p.mutation_replaceAll(m,y)},r.node_clone=function v(y,m,x){var g,d,C,S,T;if(m===void 0&&(m=null),x===void 0&&(x=!1),m===null&&(m=y._nodeDocument),s.Guard.isElementNode(y)){T=h.element_createAnElement(m,y._localName,y._namespace,y._namespacePrefix,y._is,!1);try{for(var w=i(y._attributeList),E=w.next();!E.done;E=w.next()){var D=v(E.value,m);h.element_append(D,T)}}catch(U){g={error:U}}finally{try{E&&!E.done&&(d=w.return)&&d.call(w)}finally{if(g)throw g.error}}}else if(s.Guard.isDocumentNode(y)){var b=u.create_document();b._encoding=y._encoding,b._contentType=y._contentType,b._URL=y._URL,b._origin=y._origin,b._type=y._type,b._mode=y._mode,T=b}else if(s.Guard.isDocumentTypeNode(y))T=u.create_documentType(m,y._name,y._publicId,y._systemId);else if(s.Guard.isAttrNode(y)){var O=u.create_attr(m,y.localName);O._namespace=y._namespace,O._namespacePrefix=y._namespacePrefix,O._value=y._value,T=O}else T=s.Guard.isExclusiveTextNode(y)?u.create_text(m,y._data):s.Guard.isCDATASectionNode(y)?u.create_cdataSection(m,y._data):s.Guard.isCommentNode(y)?u.create_comment(m,y._data):s.Guard.isProcessingInstructionNode(y)?u.create_processingInstruction(m,y._target,y._data):s.Guard.isDocumentFragmentNode(y)?u.create_documentFragment(m):Object.create(y);if(s.Guard.isDocumentNode(T)?(T._nodeDocument=T,m=T):T._nodeDocument=m,o.dom.features.steps&&l.dom_runCloningSteps(T,y,m,x),x)try{for(var M=i(y._children),R=M.next();!R.done;R=M.next()){var N=v(R.value,m,!0);p.mutation_append(N,T)}}catch(U){C={error:U}}finally{try{R&&!R.done&&(S=M.return)&&S.call(M)}finally{if(C)throw C.error}}return T},r.node_equals=function v(y,m){var x,g,d,C;if(y._nodeType!==m._nodeType)return!1;if(s.Guard.isDocumentTypeNode(y)&&s.Guard.isDocumentTypeNode(m)){if(y._name!==m._name||y._publicId!==m._publicId||y._systemId!==m._systemId)return!1}else if(s.Guard.isElementNode(y)&&s.Guard.isElementNode(m)){if(y._namespace!==m._namespace||y._namespacePrefix!==m._namespacePrefix||y._localName!==m._localName||y._attributeList.length!==m._attributeList.length)return!1}else if(s.Guard.isAttrNode(y)&&s.Guard.isAttrNode(m)){if(y._namespace!==m._namespace||y._localName!==m._localName||y._value!==m._value)return!1}else if(s.Guard.isProcessingInstructionNode(y)&&s.Guard.isProcessingInstructionNode(m)){if(y._target!==m._target||y._data!==m._data)return!1}else if(s.Guard.isCharacterDataNode(y)&&s.Guard.isCharacterDataNode(m)&&y._data!==m._data)return!1;if(s.Guard.isElementNode(y)&&s.Guard.isElementNode(m)){var S={};try{for(var T=i(y._attributeList),w=T.next();!w.done;w=T.next())S[(b=w.value)._localName]=b}catch(W){x={error:W}}finally{try{w&&!w.done&&(g=T.return)&&g.call(T)}finally{if(x)throw x.error}}try{for(var E=i(m._attributeList),D=E.next();!D.done;D=E.next()){var b,O=D.value;if(!(b=S[O._localName])||!v(b,O))return!1}}catch(W){d={error:W}}finally{try{D&&!D.done&&(C=E.return)&&C.call(E)}finally{if(d)throw d.error}}}if(y._children.size!==m._children.size)return!1;for(var M=y._children[Symbol.iterator](),R=m._children[Symbol.iterator](),N=M.next(),U=R.next();!N.done&&!U.done;){if(!v(N.value,U.value))return!1;N=M.next(),U=R.next()}return!0},r.node_listOfElementsWithQualifiedName=function(v,y){return v==="*"?u.create_htmlCollection(y):y._nodeDocument._type==="html"?u.create_htmlCollection(y,function(m){return m._namespace===c.namespace.HTML&&m._qualifiedName===v.toLowerCase()||m._namespace!==c.namespace.HTML&&m._qualifiedName===v}):u.create_htmlCollection(y,function(m){return m._qualifiedName===v})},r.node_listOfElementsWithNamespace=function(v,y,m){return v===""&&(v=null),v==="*"&&y==="*"?u.create_htmlCollection(m):v==="*"?u.create_htmlCollection(m,function(x){return x._localName===y}):y==="*"?u.create_htmlCollection(m,function(x){return x._namespace===v}):u.create_htmlCollection(m,function(x){return x._localName===y&&x._namespace===v})},r.node_listOfElementsWithClassNames=function(v,y){var m=f.orderedSet_parse(v);if(m.size===0)return u.create_htmlCollection(y,function(){return!1});var x=y._nodeDocument._mode!=="quirks";return u.create_htmlCollection(y,function(g){var d=g.classList;return f.orderedSet_contains(d._tokenSet,m,x)})},r.node_locateANamespacePrefix=function v(y,m){if(y._namespace===m&&y._namespacePrefix!==null)return y._namespacePrefix;for(var x=0;x<y._attributeList.length;x++){var g=y._attributeList[x];if(g._namespacePrefix==="xmlns"&&g._value===m)return g._localName}return y._parent&&s.Guard.isElementNode(y._parent)?v(y._parent,m):null},r.node_locateANamespace=function v(y,m){if(s.Guard.isElementNode(y)){if(y._namespace!==null&&y._namespacePrefix===m)return y._namespace;for(var x=0;x<y._attributeList.length;x++){var g=y._attributeList[x];if(g._namespace===c.namespace.XMLNS&&g._namespacePrefix==="xmlns"&&g._localName===m||m===null&&g._namespace===c.namespace.XMLNS&&g._namespacePrefix===null&&g._localName==="xmlns")return g._value||null}return y.parentElement===null?null:v(y.parentElement,m)}return s.Guard.isDocumentNode(y)?y.documentElement===null?null:v(y.documentElement,m):s.Guard.isDocumentTypeNode(y)||s.Guard.isDocumentFragmentNode(y)?null:s.Guard.isAttrNode(y)?y._element===null?null:v(y._element,m):y._parent&&s.Guard.isElementNode(y._parent)?v(y._parent,m):null}},function(n,r,a){var i=this&&this.__values||function(h){var v=typeof Symbol=="function"&&Symbol.iterator,y=v&&h[v],m=0;if(y)return y.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&m>=h.length&&(h=void 0),{value:h&&h[m++],done:!h}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(6),s=a(3),c=a(9),u=a(29),f=a(17),l=a(107),p=a(37);r.text_contiguousTextNodes=function(h,v){var y;return v===void 0&&(v=!1),(y={})[Symbol.iterator]=function(){for(var m=h;m&&s.Guard.isTextNode(m._previousSibling);)m=m._previousSibling;return{next:function(){if(m&&!v&&m===h&&(m=s.Guard.isTextNode(m._nextSibling)?m._nextSibling:null),m===null)return{done:!0,value:null};var x={done:!1,value:m};return m=s.Guard.isTextNode(m._nextSibling)?m._nextSibling:null,x}}},y},r.text_contiguousExclusiveTextNodes=function(h,v){var y;return v===void 0&&(v=!1),(y={})[Symbol.iterator]=function(){for(var m=h;m&&s.Guard.isExclusiveTextNode(m._previousSibling);)m=m._previousSibling;return{next:function(){if(m&&!v&&m===h&&(m=s.Guard.isExclusiveTextNode(m._nextSibling)?m._nextSibling:null),m===null)return{done:!0,value:null};var x={done:!1,value:m};return m=s.Guard.isExclusiveTextNode(m._nextSibling)?m._nextSibling:null,x}}},y},r.text_descendantTextContent=function(h){for(var v="",y=f.tree_getFirstDescendantNode(h,!1,!1,function(m){return s.Guard.isTextNode(m)});y!==null;)v+=y._data,y=f.tree_getNextDescendantNode(h,y,!1,!1,function(m){return s.Guard.isTextNode(m)});return v},r.text_split=function(h,v){var y,m,x=h._data.length;if(v>x)throw new c.IndexSizeError;var g=x-v,d=l.characterData_substringData(h,v,g),C=u.create_text(h._nodeDocument,d),S=h._parent;if(S!==null){p.mutation_insert(C,S,h._nextSibling);try{for(var T=i(o.dom.rangeList),w=T.next();!w.done;w=T.next()){var E=w.value;E._start[0]===h&&E._start[1]>v&&(E._start[0]=C,E._start[1]-=v),E._end[0]===h&&E._end[1]>v&&(E._end[0]=C,E._end[1]-=v);var D=f.tree_index(h);E._start[0]===S&&E._start[1]===D+1&&E._start[1]++,E._end[0]===S&&E._end[1]===D+1&&E._end[1]++}}catch(b){y={error:b}}finally{try{w&&!w.done&&(m=T.return)&&m.call(T)}finally{if(y)throw y.error}}}return l.characterData_replaceData(h,v,g,""),C}},function(n,r,a){var i=a(4),o=a(41),s=a(24),c=a(48),u=[].join,f=o!=Object,l=c("join",",");i({target:"Array",proto:!0,forced:f||!l},{join:function(p){return u.call(s(this),p===void 0?",":p)}})},function(n,r,a){var i=a(4),o=a(83),s=String.fromCharCode,c=String.fromCodePoint;i({target:"String",stat:!0,forced:!!c&&c.length!=1},{fromCodePoint:function(u){for(var f,l=[],p=arguments.length,h=0;p>h;){if(f=+arguments[h++],o(f,1114111)!==f)throw RangeError(f+" is not a valid code point");l.push(f<65536?s(f):s(55296+((f-=65536)>>10),f%1024+56320))}return l.join("")}})},function(n,r,a){var i=this&&this.__read||function(c,u){var f=typeof Symbol=="function"&&c[Symbol.iterator];if(!f)return c;var l,p,h=f.call(c),v=[];try{for(;(u===void 0||u-- >0)&&!(l=h.next()).done;)v.push(l.value)}catch(y){p={error:y}}finally{try{l&&!l.done&&(f=h.return)&&f.call(h)}finally{if(p)throw p.error}}return v};Object.defineProperty(r,"__esModule",{value:!0});var o=a(111),s=function(){function c(u,f){this._options={skipWhitespaceOnlyText:!1},this.err={line:-1,col:-1,index:-1,str:""},this._str=u,this._index=0,this._length=u.length,f&&(this._options.skipWhitespaceOnlyText=f.skipWhitespaceOnlyText||!1)}return c.prototype.nextToken=function(){if(this.eof())return{type:o.TokenType.EOF};var u=this.skipIfStartsWith("<")?this.openBracket():this.text();return this._options.skipWhitespaceOnlyText&&u.type===o.TokenType.Text&&c.isWhiteSpaceToken(u)&&(u=this.nextToken()),u},c.prototype.openBracket=function(){return this.skipIfStartsWith("?")?this.skipIfStartsWith("xml")?c.isSpace(this._str[this._index])?this.declaration():(this.seek(-3),this.pi()):this.pi():this.skipIfStartsWith("!")?this.skipIfStartsWith("--")?this.comment():this.skipIfStartsWith("[CDATA[")?this.cdata():this.skipIfStartsWith("DOCTYPE")?this.doctype():void this.throwError("Invalid '!' in opening tag."):this.skipIfStartsWith("/")?this.closeTag():this.openTag()},c.prototype.declaration=function(){for(var u="",f="",l="";!this.eof();){if(this.skipSpace(),this.skipIfStartsWith("?>"))return{type:o.TokenType.Declaration,version:u,encoding:f,standalone:l};var p=i(this.attribute(),2),h=p[0],v=p[1];h==="version"?u=v:h==="encoding"?f=v:h==="standalone"?l=v:this.throwError("Invalid attribute name: "+h)}this.throwError("Missing declaration end symbol `?>`")},c.prototype.doctype=function(){var u="",f="";this.skipSpace();var l=this.takeUntil2("[",">",!0);return this.skipSpace(),this.skipIfStartsWith("PUBLIC")?(u=this.quotedString(),f=this.quotedString()):this.skipIfStartsWith("SYSTEM")&&(f=this.quotedString()),this.skipSpace(),this.skipIfStartsWith("[")&&(this.skipUntil("]"),this.skipIfStartsWith("]")||this.throwError("Missing end bracket of DTD internal subset")),this.skipSpace(),this.skipIfStartsWith(">")||this.throwError("Missing doctype end symbol `>`"),{type:o.TokenType.DocType,name:l,pubId:u,sysId:f}},c.prototype.pi=function(){var u=this.takeUntilStartsWith("?>",!0);if(this.eof()&&this.throwError("Missing processing instruction end symbol `?>`"),this.skipSpace(),this.skipIfStartsWith("?>"))return{type:o.TokenType.PI,target:u,data:""};var f=this.takeUntilStartsWith("?>");return this.eof()&&this.throwError("Missing processing instruction end symbol `?>`"),this.seek(2),{type:o.TokenType.PI,target:u,data:f}},c.prototype.text=function(){var u=this.takeUntil("<");return{type:o.TokenType.Text,data:u}},c.prototype.comment=function(){var u=this.takeUntilStartsWith("-->");return this.eof()&&this.throwError("Missing comment end symbol `-->`"),this.seek(3),{type:o.TokenType.Comment,data:u}},c.prototype.cdata=function(){var u=this.takeUntilStartsWith("]]>");return this.eof()&&this.throwError("Missing CDATA end symbol `]>`"),this.seek(3),{type:o.TokenType.CDATA,data:u}},c.prototype.openTag=function(){this.skipSpace();var u=this.takeUntil2(">","/",!0);if(this.skipSpace(),this.skipIfStartsWith(">"))return{type:o.TokenType.Element,name:u,attributes:[],selfClosing:!1};if(this.skipIfStartsWith("/>"))return{type:o.TokenType.Element,name:u,attributes:[],selfClosing:!0};for(var f=[];!this.eof();){if(this.skipSpace(),this.skipIfStartsWith(">"))return{type:o.TokenType.Element,name:u,attributes:f,selfClosing:!1};if(this.skipIfStartsWith("/>"))return{type:o.TokenType.Element,name:u,attributes:f,selfClosing:!0};var l=this.attribute();f.push(l)}this.throwError("Missing opening element tag end symbol `>`")},c.prototype.closeTag=function(){this.skipSpace();var u=this.takeUntil(">",!0);return this.skipSpace(),this.skipIfStartsWith(">")||this.throwError("Missing closing element tag end symbol `>`"),{type:o.TokenType.ClosingTag,name:u}},c.prototype.attribute=function(){this.skipSpace();var u=this.takeUntil("=",!0);return this.skipSpace(),this.skipIfStartsWith("=")||this.throwError("Missing equals sign before attribute value"),[u,this.quotedString()]},c.prototype.quotedString=function(){this.skipSpace();var u=this.take(1);c.isQuote(u)||this.throwError("Missing start quote character before quoted value");var f=this.takeUntil(u);return this.skipIfStartsWith(u)||this.throwError("Missing end quote character after quoted value"),f},c.prototype.eof=function(){return this._index>=this._length},c.prototype.skipIfStartsWith=function(u){var f=u.length;if(f===1)return this._str[this._index]===u&&(this._index++,!0);for(var l=0;l<f;l++)if(this._str[this._index+l]!==u[l])return!1;return this._index+=f,!0},c.prototype.seek=function(u){this._index+=u,this._index<0&&(this._index=0),this._index>this._length&&(this._index=this._length)},c.prototype.skipSpace=function(){for(;!this.eof()&&c.isSpace(this._str[this._index]);)this._index++},c.prototype.take=function(u){if(u===1)return this._str[this._index++];var f=this._index;return this.seek(u),this._str.slice(f,this._index)},c.prototype.takeUntil=function(u,f){f===void 0&&(f=!1);for(var l=this._index;this._index<this._length;){var p=this._str[this._index];if(p===u||f&&c.isSpace(p))break;this._index++}return this._str.slice(l,this._index)},c.prototype.takeUntil2=function(u,f,l){l===void 0&&(l=!1);for(var p=this._index;this._index<this._length;){var h=this._str[this._index];if(h===u||h===f||l&&c.isSpace(h))break;this._index++}return this._str.slice(p,this._index)},c.prototype.takeUntilStartsWith=function(u,f){f===void 0&&(f=!1);for(var l=this._index,p=u.length;this._index<this._length;){for(var h=!0,v=0;v<p;v++){var y=this._str[this._index+v],m=u[v];if(f&&c.isSpace(y))return this._str.slice(l,this._index);if(y!==m){this._index++,h=!1;break}}if(h)return this._str.slice(l,this._index)}return this._index=this._length,this._str.slice(l)},c.prototype.skipUntil=function(u){for(;this._index<this._length&&this._str[this._index]!==u;)this._index++},c.isWhiteSpaceToken=function(u){for(var f=u.data,l=0;l<f.length;l++){var p=f[l];if(p!==" "&&p!==`
`&&p!=="\r"&&p!=="	"&&p!=="\f")return!1}return!0},c.isSpace=function(u){return u===" "||u===`
`||u==="\r"||u==="	"},c.isQuote=function(u){return u==='"'||u==="'"},c.prototype.throwError=function(u){for(var f=/\r\n|\r|\n/g,l=null,p=0,h=0,v=this._str.length;(l=f.exec(this._str))!==null&&l!==null;)if(p++,l.index<this._index&&(h=f.lastIndex),l.index>this._index){v=l.index;break}throw this.err={line:p,col:this._index-h,index:this._index,str:this._str.substring(h,v)},new Error(u+`
Index: `+this.err.index+`
Ln: `+this.err.line+", Col: "+this.err.col+`
Input: `+this.err.str)},c.prototype[Symbol.iterator]=function(){return this._index=0,{next:function(){var u=this.nextToken();return u.type===o.TokenType.EOF?{done:!0,value:null}:{done:!1,value:u}}.bind(this)}},c}();r.XMLStringLexer=s},function(n,r,a){var i=a(39);n.exports=new i({include:[a(182)]})},function(n,r,a){var i=a(39);n.exports=new i({include:[a(113)],implicit:[a(289),a(290),a(291),a(292)]})},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(91),o=a(1),s=a(3),c=a(77),u=a(109);function f(v,y){var m=p(v===void 0||l(v)?v:i.DefaultBuilderOptions),x=l(v)?y:v,g=u.createDocument();h(g,m);var d=new c.XMLBuilderImpl(g);return x!==void 0&&d.ele(x),d}function l(v){if(!o.isPlainObject(v))return!1;for(var y in v)if(v.hasOwnProperty(y)&&!i.XMLBuilderOptionKeys.has(y))return!1;return!0}function p(v){v===void 0&&(v={});var y=o.applyDefaults(v,i.DefaultBuilderOptions);if(y.convert.att.length===0||y.convert.ins.length===0||y.convert.text.length===0||y.convert.cdata.length===0||y.convert.comment.length===0)throw new Error("JS object converter strings cannot be zero length.");return y}function h(v,y,m){var x=v;x._xmlBuilderOptions=y,x._isFragment=m}r.builder=function(v,y){var m=p(l(v)?v:i.DefaultBuilderOptions),x=s.Guard.isNode(v)||o.isArray(v)?v:y;if(x===void 0)throw new Error("Invalid arguments.");if(o.isArray(x)){for(var g=[],d=0;d<x.length;d++){var C=new c.XMLBuilderImpl(x[d]);C.set(m),g.push(C)}return g}var S=new c.XMLBuilderImpl(x);return S.set(m),S},r.create=f,r.fragment=function(v,y){var m=p(v===void 0||l(v)?v:i.DefaultBuilderOptions),x=l(v)?y:v,g=u.createDocument();h(g,m,!0);var d=new c.XMLBuilderImpl(g.createDocumentFragment());return x!==void 0&&d.ele(x),d},r.convert=function(v,y,m){var x,g,d;return l(v)&&y!==void 0?(x=v,g=y,d=m):(x=i.DefaultBuilderOptions,g=v,d=y||void 0),f(x,g).end(d)}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(77);r.builder=i.builder,r.create=i.create,r.fragment=i.fragment,r.convert=i.convert,r.createCB=i.createCB,r.fragmentCB=i.fragmentCB},function(n,r,a){a(31),a(32),a(33),a(191),a(192),a(194),a(64),a(19),a(198),a(199),a(89),a(201),a(65),a(20),a(66),a(22),a(23);var i=this&&this.__read||function(x,g){var d=typeof Symbol=="function"&&x[Symbol.iterator];if(!d)return x;var C,S,T=d.call(x),w=[];try{for(;(g===void 0||g-- >0)&&!(C=T.next()).done;)w.push(C.value)}catch(E){S={error:E}}finally{try{C&&!C.done&&(d=T.return)&&d.call(T)}finally{if(S)throw S.error}}return w},o=this&&this.__values||function(x){var g=typeof Symbol=="function"&&Symbol.iterator,d=g&&x[g],C=0;if(d)return d.call(x);if(x&&typeof x.length=="number")return{next:function(){return x&&C>=x.length&&(x=void 0),{value:x&&x[C++],done:!x}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var s=a(91),c=a(1),u=a(217),f=a(2),l=a(3),p=a(0),h=a(109),v=a(7),y=a(276),m=function(){function x(g){this._domNode=g}return Object.defineProperty(x.prototype,"node",{get:function(){return this._domNode},enumerable:!0,configurable:!0}),Object.defineProperty(x.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),x.prototype.set=function(g){return this._options=c.applyDefaults(c.applyDefaults(this._options,g,!0),s.DefaultBuilderOptions),this},x.prototype.ele=function(g,d,C){var S,T,w,E,D,b;if(c.isObject(g))return new y.ObjectReader(this._options).parse(this,g);if(g!==null&&/^\s*</.test(g))return new y.XMLReader(this._options).parse(this,g);if(g!==null&&/^\s*[\{\[]/.test(g))return new y.JSONReader(this._options).parse(this,g);if(g!==null&&/^(\s*|(#.*)|(%.*))*---/.test(g))return new y.YAMLReader(this._options).parse(this,g);if((g===null||c.isString(g))&&c.isString(d))E=(S=i([g,d,C],3))[0],D=S[1],b=S[2];else{if(g===null)throw new Error("Element name cannot be null. "+this._debugInfo());E=(T=i([void 0,g,c.isObject(d)?d:void 0],3))[0],D=T[1],b=T[2]}if(b&&(b=c.getValue(b)),E=(w=i(this._extractNamespace(h.sanitizeInput(E,this._options.invalidCharReplacement),h.sanitizeInput(D,this._options.invalidCharReplacement),!0),2))[0],D=w[1],E===void 0){var O=i(p.namespace_extractQName(D),1)[0];E=this.node.lookupNamespaceURI(O)}var M=E!=null?this._doc.createElementNS(E,D):this._doc.createElement(D);this.node.appendChild(M);var R=new x(M),N=this._doc.doctype;if(M===this._doc.documentElement&&N!==null){var U=this._doc.implementation.createDocumentType(this._doc.documentElement.tagName,N.publicId,N.systemId);this._doc.replaceChild(U,N)}return b&&!c.isEmpty(b)&&R.att(b),R},x.prototype.remove=function(){var g=this.up();return g.node.removeChild(this.node),g},x.prototype.att=function(g,d,C){var S,T,w,E,D,b,O=this;if(c.isMap(g)||c.isObject(g))return c.forEachObject(g,function(G,F){return O.att(G,F)},this),this;if(g!=null&&(g=c.getValue(g+"")),d!=null&&(d=c.getValue(d+"")),C!=null&&(C=c.getValue(C+"")),g!==null&&!c.isString(g)||!c.isString(d)||C!==null&&!c.isString(C)){if(!c.isString(g)||d!=null&&!c.isString(d))throw new Error("Attribute name and value not specified. "+this._debugInfo());E=(T=i([void 0,g,d],3))[0],D=T[1],b=T[2]}else E=(S=i([g,d,C],3))[0],D=S[1],b=S[2];if(this._options.keepNullAttributes&&b==null)b="";else if(b==null)return this;if(!l.Guard.isElementNode(this.node))throw new Error("An attribute can only be assigned to an element node.");var M=this.node;E=(w=i(this._extractNamespace(E,D,!1),2))[0],D=w[1],D=h.sanitizeInput(D,this._options.invalidCharReplacement),E=h.sanitizeInput(E,this._options.invalidCharReplacement),b=h.sanitizeInput(b,this._options.invalidCharReplacement);var R=i(p.namespace_extractQName(D),2),N=R[0],U=R[1],W=i(p.namespace_extractQName(M.prefix?M.prefix+":"+M.localName:M.localName),1)[0],I=null;return N==="xmlns"?(E=v.namespace.XMLNS,M.namespaceURI===null&&W===U&&(I=b)):N===null&&U==="xmlns"&&W===null&&(E=v.namespace.XMLNS,I=b),I!==null&&(this._updateNamespace(I),M=this.node),E!==void 0?M.setAttributeNS(E,D,b):M.setAttribute(D,b),this},x.prototype.removeAtt=function(g,d){var C,S,T=this;if(!l.Guard.isElementNode(this.node))throw new Error("An attribute can only be removed from an element node.");if(g=c.getValue(g),d!==void 0&&(d=c.getValue(d)),g!==null&&d===void 0)S=g;else{if(g!==null&&!c.isString(g)||d===void 0)throw new Error("Attribute namespace must be a string. "+this._debugInfo());C=g,S=d}return c.isArray(S)||c.isSet(S)?c.forEachArray(S,function(w){return C===void 0?T.removeAtt(w):T.removeAtt(C,w)},this):C!==void 0?(S=h.sanitizeInput(S,this._options.invalidCharReplacement),C=h.sanitizeInput(C,this._options.invalidCharReplacement),this.node.removeAttributeNS(C,S)):(S=h.sanitizeInput(S,this._options.invalidCharReplacement),this.node.removeAttribute(S)),this},x.prototype.txt=function(g){if(g==null){if(!this._options.keepNullNodes)return this;g=""}var d=this._doc.createTextNode(h.sanitizeInput(g,this._options.invalidCharReplacement));return this.node.appendChild(d),this},x.prototype.com=function(g){if(g==null){if(!this._options.keepNullNodes)return this;g=""}var d=this._doc.createComment(h.sanitizeInput(g,this._options.invalidCharReplacement));return this.node.appendChild(d),this},x.prototype.dat=function(g){if(g==null){if(!this._options.keepNullNodes)return this;g=""}var d=this._doc.createCDATASection(h.sanitizeInput(g,this._options.invalidCharReplacement));return this.node.appendChild(d),this},x.prototype.ins=function(g,d){var C=this;if(d===void 0&&(d=""),d==null){if(!this._options.keepNullNodes)return this;d=""}if(c.isArray(g)||c.isSet(g))c.forEachArray(g,function(T){var w=(T+="").indexOf(" "),E=w===-1?T:T.substr(0,w),D=w===-1?"":T.substr(w+1);C.ins(E,D)},this);else if(c.isMap(g)||c.isObject(g))c.forEachObject(g,function(T,w){return C.ins(T,w)},this);else{var S=this._doc.createProcessingInstruction(h.sanitizeInput(g,this._options.invalidCharReplacement),h.sanitizeInput(d,this._options.invalidCharReplacement));this.node.appendChild(S)}return this},x.prototype.dec=function(g){return this._options.version=g.version||"1.0",this._options.encoding=g.encoding,this._options.standalone=g.standalone,this},x.prototype.dtd=function(g){var d=h.sanitizeInput(g&&g.name||(this._doc.documentElement?this._doc.documentElement.tagName:"ROOT"),this._options.invalidCharReplacement),C=h.sanitizeInput(g&&g.pubID||"",this._options.invalidCharReplacement),S=h.sanitizeInput(g&&g.sysID||"",this._options.invalidCharReplacement);if(this._doc.documentElement!==null&&d!==this._doc.documentElement.tagName)throw new Error("DocType name does not match document element name.");var T=this._doc.implementation.createDocumentType(d,C,S);return this._doc.doctype!==null?this._doc.replaceChild(T,this._doc.doctype):this._doc.insertBefore(T,this._doc.documentElement),this},x.prototype.import=function(g){var d,C,S=this._domNode,T=this._doc,w=g.node;if(l.Guard.isDocumentNode(w)){var E=w.documentElement;if(E===null)throw new Error("Imported document has no document element node. "+this._debugInfo());var D=T.importNode(E,!0);S.appendChild(D);var b=i(p.namespace_extractQName(D.prefix?D.prefix+":"+D.localName:D.localName),1)[0],O=S.lookupNamespaceURI(b);new x(D)._updateNamespace(O)}else if(l.Guard.isDocumentFragmentNode(w))try{for(var M=o(w.childNodes),R=M.next();!R.done;R=M.next()){var N=R.value;D=T.importNode(N,!0),S.appendChild(D),l.Guard.isElementNode(D)&&(b=i(p.namespace_extractQName(D.prefix?D.prefix+":"+D.localName:D.localName),1)[0],O=S.lookupNamespaceURI(b),new x(D)._updateNamespace(O))}}catch(U){d={error:U}}finally{try{R&&!R.done&&(C=M.return)&&C.call(M)}finally{if(d)throw d.error}}else D=T.importNode(w,!0),S.appendChild(D),l.Guard.isElementNode(D)&&(b=i(p.namespace_extractQName(D.prefix?D.prefix+":"+D.localName:D.localName),1)[0],O=S.lookupNamespaceURI(b),new x(D)._updateNamespace(O));return this},x.prototype.doc=function(){if(this._doc._isFragment){for(var g=this.node;g&&g.nodeType!==f.NodeType.DocumentFragment;)g=g.parentNode;if(g===null)throw new Error("Node has no parent node while searching for document fragment ancestor. "+this._debugInfo());return new x(g)}return new x(this._doc)},x.prototype.root=function(){var g=this._doc.documentElement;if(!g)throw new Error("Document root element is null. "+this._debugInfo());return new x(g)},x.prototype.up=function(){var g=this._domNode.parentNode;if(!g)throw new Error("Parent node is null. "+this._debugInfo());return new x(g)},x.prototype.prev=function(){var g=this._domNode.previousSibling;if(!g)throw new Error("Previous sibling node is null. "+this._debugInfo());return new x(g)},x.prototype.next=function(){var g=this._domNode.nextSibling;if(!g)throw new Error("Next sibling node is null. "+this._debugInfo());return new x(g)},x.prototype.first=function(){var g=this._domNode.firstChild;if(!g)throw new Error("First child node is null. "+this._debugInfo());return new x(g)},x.prototype.last=function(){var g=this._domNode.lastChild;if(!g)throw new Error("Last child node is null. "+this._debugInfo());return new x(g)},x.prototype.each=function(g,d,C,S){d===void 0&&(d=!1),C===void 0&&(C=!1);for(var T=this._getFirstDescendantNode(this._domNode,d,C);T[0];){var w=this._getNextDescendantNode(this._domNode,T[0],C,T[1],T[2]);g.call(S,new x(T[0]),T[1],T[2]),T=w}return this},x.prototype.map=function(g,d,C,S){d===void 0&&(d=!1),C===void 0&&(C=!1);var T=[];return this.each(function(w,E,D){return T.push(g.call(S,w,E,D))},d,C),T},x.prototype.reduce=function(g,d,C,S,T){C===void 0&&(C=!1),S===void 0&&(S=!1);var w=d;return this.each(function(E,D,b){return w=g.call(T,w,E,D,b)},C,S),w},x.prototype.find=function(g,d,C,S){d===void 0&&(d=!1),C===void 0&&(C=!1);for(var T=this._getFirstDescendantNode(this._domNode,d,C);T[0];){var w=new x(T[0]);if(g.call(S,w,T[1],T[2]))return w;T=this._getNextDescendantNode(this._domNode,T[0],C,T[1],T[2])}},x.prototype.filter=function(g,d,C,S){d===void 0&&(d=!1),C===void 0&&(C=!1);var T=[];return this.each(function(w,E,D){g.call(S,w,E,D)&&T.push(w)},d,C),T},x.prototype.every=function(g,d,C,S){d===void 0&&(d=!1),C===void 0&&(C=!1);for(var T=this._getFirstDescendantNode(this._domNode,d,C);T[0];){var w=new x(T[0]);if(!g.call(S,w,T[1],T[2]))return!1;T=this._getNextDescendantNode(this._domNode,T[0],C,T[1],T[2])}return!0},x.prototype.some=function(g,d,C,S){d===void 0&&(d=!1),C===void 0&&(C=!1);for(var T=this._getFirstDescendantNode(this._domNode,d,C);T[0];){var w=new x(T[0]);if(g.call(S,w,T[1],T[2]))return!0;T=this._getNextDescendantNode(this._domNode,T[0],C,T[1],T[2])}return!1},x.prototype.toArray=function(g,d){g===void 0&&(g=!1),d===void 0&&(d=!1);var C=[];return this.each(function(S){return C.push(S)},g,d),C},x.prototype.toString=function(g){return(g=g||{}).format===void 0&&(g.format="xml"),this._serialize(g)},x.prototype.toObject=function(g){return(g=g||{}).format===void 0&&(g.format="object"),this._serialize(g)},x.prototype.end=function(g){return(g=g||{}).format===void 0&&(g.format="xml"),this.doc()._serialize(g)},x.prototype._getFirstDescendantNode=function(g,d,C){return d?[this._domNode,0,0]:C?this._getNextDescendantNode(g,g,C,0,0):[this._domNode.firstChild,0,1]},x.prototype._getNextDescendantNode=function(g,d,C,S,T){if(!C)return g===d?[d.firstChild,0,T+1]:[d.nextSibling,S+1,T];if(d.firstChild)return[d.firstChild,0,T+1];if(d===g)return[null,-1,-1];if(d.nextSibling)return[d.nextSibling,S+1,T];for(var w=d.parentNode;w&&w!==g;){if(w.nextSibling)return[w.nextSibling,p.tree_index(w.nextSibling),T-1];w=w.parentNode,T--}return[null,-1,-1]},x.prototype._serialize=function(g){if(g.format==="xml")return new u.XMLWriter(this._options,g).serialize(this.node);if(g.format==="map")return new u.MapWriter(this._options,g).serialize(this.node);if(g.format==="object")return new u.ObjectWriter(this._options,g).serialize(this.node);if(g.format==="json")return new u.JSONWriter(this._options,g).serialize(this.node);if(g.format==="yaml")return new u.YAMLWriter(this._options,g).serialize(this.node);throw new Error("Invalid writer format: "+g.format+". "+this._debugInfo())},x.prototype._extractNamespace=function(g,d,C){var S=d.indexOf("@");if(S>0&&(g===void 0&&(g=d.slice(S+1)),d=d.slice(0,S)),g===void 0)g=C?this._options.defaultNamespace.ele:this._options.defaultNamespace.att;else if(g!==null&&g[0]==="@"){var T=g.slice(1);if((g=this._options.namespaceAlias[T])===void 0)throw new Error("Namespace alias `"+T+"` is not defined. "+this._debugInfo())}return[g,d]},x.prototype._updateNamespace=function(g){var d,C,S,T,w=this._domNode;if(l.Guard.isElementNode(w)&&g!==null&&w.namespaceURI!==g){var E=i(p.namespace_extractQName(w.prefix?w.prefix+":"+w.localName:w.localName),2),D=E[0],b=E[1],O=p.create_element(this._doc,b,g,D);try{for(var M=o(w.attributes),R=M.next();!R.done;R=M.next()){var N=R.value,U=N.prefix?N.prefix+":"+N.localName:N.localName,W=i(p.namespace_extractQName(U),1)[0],I=N.namespaceURI;I===null&&W!==null&&(I=w.lookupNamespaceURI(W)),I===null?O.setAttribute(U,N.value):O.setAttributeNS(I,U,N.value)}}catch(Y){d={error:Y}}finally{try{R&&!R.done&&(C=M.return)&&C.call(M)}finally{if(d)throw d.error}}var G=w.parentNode;if(G===null)throw new Error("Parent node is null."+this._debugInfo());G.replaceChild(O,w),this._domNode=O;try{for(var F=o(w.childNodes),A=F.next();!A.done;A=F.next()){var H=A.value.cloneNode(!0);if(O.appendChild(H),l.Guard.isElementNode(H)){var $=i(p.namespace_extractQName(H.prefix?H.prefix+":"+H.localName:H.localName),1)[0],X=O.lookupNamespaceURI($);new x(H)._updateNamespace(X)}}}catch(Y){S={error:Y}}finally{try{A&&!A.done&&(T=F.return)&&T.call(F)}finally{if(S)throw S.error}}}},Object.defineProperty(x.prototype,"_doc",{get:function(){var g=this.node;if(l.Guard.isDocumentNode(g))return g;var d=g.ownerDocument;if(!d)throw new Error("Owner document is null. "+this._debugInfo());return d},enumerable:!0,configurable:!0}),x.prototype._debugInfo=function(g){var d=this.node,C=d.parentNode;g=g||d.nodeName;var S=C?C.nodeName:"";return S?"node: <"+g+">, parent: <"+S+">":"node: <"+g+">"},Object.defineProperty(x.prototype,"_options",{get:function(){var g=this._doc;if(g._xmlBuilderOptions===void 0)throw new Error("Builder options is not set.");return g._xmlBuilderOptions},set:function(g){this._doc._xmlBuilderOptions=g},enumerable:!0,configurable:!0}),x}();r.XMLBuilderImpl=m},function(n,r,a){var i=a(11),o=a(117),s=i.WeakMap;n.exports=typeof s=="function"&&/native code/.test(o(s))},function(n,r,a){var i=a(46),o=a(82),s=a(85),c=a(18);n.exports=i("Reflect","ownKeys")||function(u){var f=o.f(c(u)),l=s.f;return l?f.concat(l(u)):f}},function(n,r,a){var i=a(16),o=a(15),s=a(18),c=a(61);n.exports=i?Object.defineProperties:function(u,f){s(u);for(var l,p=c(f),h=p.length,v=0;h>v;)o.f(u,l=p[v++],f[l]);return u}},function(n,r,a){var i=a(46);n.exports=i("document","documentElement")},function(n,r,a){var i=a(24),o=a(82).f,s={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(u){return c&&s.call(u)=="[object Window]"?function(f){try{return o(f)}catch{return c.slice()}}(u):o(i(u))}},function(n,r,a){var i=a(4),o=a(36).every,s=a(48),c=a(28),u=s("every"),f=c("every");i({target:"Array",proto:!0,forced:!u||!f},{every:function(l){return o(this,l,arguments.length>1?arguments[1]:void 0)}})},function(n,r,a){var i=a(4),o=a(36).filter,s=a(63),c=a(28),u=s("filter"),f=c("filter");i({target:"Array",proto:!0,forced:!u||!f},{filter:function(l){return o(this,l,arguments.length>1?arguments[1]:void 0)}})},function(n,r,a){var i=a(46);n.exports=i("navigator","userAgent")||""},function(n,r,a){var i=a(4),o=a(36).find,s=a(130),c=a(28),u=!0,f=c("find");"find"in[]&&Array(1).find(function(){u=!1}),i({target:"Array",proto:!0,forced:u||!f},{find:function(l){return o(this,l,arguments.length>1?arguments[1]:void 0)}}),s("find")},function(n,r,a){var i=a(131).IteratorPrototype,o=a(60),s=a(40),c=a(62),u=a(49),f=function(){return this};n.exports=function(l,p,h){var v=p+" Iterator";return l.prototype=o(i,{next:s(1,h)}),c(l,v,!1,!0),u[v]=f,l}},function(n,r,a){var i=a(8);n.exports=!i(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},function(n,r,a){var i=a(13);n.exports=function(o){if(!i(o)&&o!==null)throw TypeError("Can't set "+String(o)+" as a prototype");return o}},function(n,r,a){var i=a(4),o=a(36).map,s=a(63),c=a(28),u=s("map"),f=c("map");i({target:"Array",proto:!0,forced:!u||!f},{map:function(l){return o(this,l,arguments.length>1?arguments[1]:void 0)}})},function(n,r,a){var i=a(4),o=a(200).left,s=a(48),c=a(28),u=s("reduce"),f=c("reduce",{1:0});i({target:"Array",proto:!0,forced:!u||!f},{reduce:function(l){return o(this,l,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(n,r,a){var i=a(127),o=a(27),s=a(41),c=a(26),u=function(f){return function(l,p,h,v){i(p);var y=o(l),m=s(y),x=c(y.length),g=f?x-1:0,d=f?-1:1;if(h<2)for(;;){if(g in m){v=m[g],g+=d;break}if(g+=d,f?g<0:x<=g)throw TypeError("Reduce of empty array with no initial value")}for(;f?g>=0:x>g;g+=d)g in m&&(v=p(v,m[g],g,y));return v}};n.exports={left:u(!1),right:u(!0)}},function(n,r,a){var i=a(4),o=a(36).some,s=a(48),c=a(28),u=s("some"),f=c("some");i({target:"Array",proto:!0,forced:!u||!f},{some:function(l){return o(this,l,arguments.length>1?arguments[1]:void 0)}})},function(n,r,a){var i=a(90),o=a(135);n.exports=i?{}.toString:function(){return"[object "+o(this)+"]"}},function(n,r){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,r,a){var i=a(8);n.exports=!i(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(n,r,a){var i=a(5),o=a(49),s=i("iterator"),c=Array.prototype;n.exports=function(u){return u!==void 0&&(o.Array===u||c[s]===u)}},function(n,r,a){var i=a(135),o=a(49),s=a(5)("iterator");n.exports=function(c){if(c!=null)return c[s]||c["@@iterator"]||o[i(c)]}},function(n,r,a){var i=a(18);n.exports=function(o,s,c,u){try{return u?s(i(c)[0],c[1]):s(c)}catch(l){var f=o.return;throw f!==void 0&&i(f.call(o)),l}}},function(n,r,a){var i=a(5)("iterator"),o=!1;try{var s=0,c={next:function(){return{done:!!s++}},return:function(){o=!0}};c[i]=function(){return this},Array.from(c,function(){throw 2})}catch{}n.exports=function(u,f){if(!f&&!o)return!1;var l=!1;try{var p={};p[i]=function(){return{next:function(){return{done:l=!0}}}},u(p)}catch{}return l}},function(n,r,a){var i=a(13),o=a(133);n.exports=function(s,c,u){var f,l;return o&&typeof(f=c.constructor)=="function"&&f!==u&&i(l=f.prototype)&&l!==u.prototype&&o(s,l),s}},function(n,r,a){var i=a(25);n.exports=function(o,s,c){for(var u in s)i(o,u,s[u],c);return o}},function(n,r,a){var i=a(46),o=a(15),s=a(5),c=a(16),u=s("species");n.exports=function(f){var l=i(f),p=o.f;c&&l&&!l[u]&&p(l,u,{configurable:!0,get:function(){return this}})}},function(n,r,a){var i=this&&this.__generator||function(c,u){var f,l,p,h,v={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(m){return function(x){return function(g){if(f)throw new TypeError("Generator is already executing.");for(;v;)try{if(f=1,l&&(p=2&g[0]?l.return:g[0]?l.throw||((p=l.return)&&p.call(l),0):l.next)&&!(p=p.call(l,g[1])).done)return p;switch(l=0,p&&(g=[2&g[0],p.value]),g[0]){case 0:case 1:p=g;break;case 4:return v.label++,{value:g[1],done:!1};case 5:v.label++,l=g[1],g=[0];continue;case 7:g=v.ops.pop(),v.trys.pop();continue;default:if(p=v.trys,!((p=p.length>0&&p[p.length-1])||g[0]!==6&&g[0]!==2)){v=0;continue}if(g[0]===3&&(!p||g[1]>p[0]&&g[1]<p[3])){v.label=g[1];break}if(g[0]===6&&v.label<p[1]){v.label=p[1],p=g;break}if(p&&v.label<p[2]){v.label=p[2],v.ops.push(g);break}p[2]&&v.ops.pop(),v.trys.pop();continue}g=u.call(c,v)}catch(d){g=[6,d],l=0}finally{f=p=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([m,x])}}},o=this&&this.__values||function(c){var u=typeof Symbol=="function"&&Symbol.iterator,f=u&&c[u],l=0;if(f)return f.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&l>=c.length&&(c=void 0),{value:c&&c[l++],done:!c}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function c(u){u===void 0&&(u=1e3),this._items=new Set,this._limit=u}return c.prototype.add=function(u){if(this._items.add(u),this._items.size>this._limit){var f=this._items.values().next();f.done||this._items.delete(f.value)}return this},c.prototype.delete=function(u){return this._items.delete(u)},c.prototype.has=function(u){return this._items.has(u)},c.prototype.clear=function(){this._items.clear()},Object.defineProperty(c.prototype,"size",{get:function(){return this._items.size},enumerable:!0,configurable:!0}),c.prototype.forEach=function(u,f){var l=this;this._items.forEach(function(p){return u.call(f,p,p,l)})},c.prototype.keys=function(){return i(this,function(u){switch(u.label){case 0:return[5,o(this._items.keys())];case 1:return u.sent(),[2]}})},c.prototype.values=function(){return i(this,function(u){switch(u.label){case 0:return[5,o(this._items.values())];case 1:return u.sent(),[2]}})},c.prototype.entries=function(){return i(this,function(u){switch(u.label){case 0:return[5,o(this._items.entries())];case 1:return u.sent(),[2]}})},c.prototype[Symbol.iterator]=function(){return i(this,function(u){switch(u.label){case 0:return[5,o(this._items)];case 1:return u.sent(),[2]}})},Object.defineProperty(c.prototype,Symbol.toStringTag,{get:function(){return"FixedSizeSet"},enumerable:!0,configurable:!0}),c}();r.FixedSizeSet=s},function(n,r,a){var i=this&&this.__generator||function(c,u){var f,l,p,h,v={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]};return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(m){return function(x){return function(g){if(f)throw new TypeError("Generator is already executing.");for(;v;)try{if(f=1,l&&(p=2&g[0]?l.return:g[0]?l.throw||((p=l.return)&&p.call(l),0):l.next)&&!(p=p.call(l,g[1])).done)return p;switch(l=0,p&&(g=[2&g[0],p.value]),g[0]){case 0:case 1:p=g;break;case 4:return v.label++,{value:g[1],done:!1};case 5:v.label++,l=g[1],g=[0];continue;case 7:g=v.ops.pop(),v.trys.pop();continue;default:if(p=v.trys,!((p=p.length>0&&p[p.length-1])||g[0]!==6&&g[0]!==2)){v=0;continue}if(g[0]===3&&(!p||g[1]>p[0]&&g[1]<p[3])){v.label=g[1];break}if(g[0]===6&&v.label<p[1]){v.label=p[1],p=g;break}if(p&&v.label<p[2]){v.label=p[2],v.ops.push(g);break}p[2]&&v.ops.pop(),v.trys.pop();continue}g=u.call(c,v)}catch(d){g=[6,d],l=0}finally{f=p=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([m,x])}}},o=this&&this.__values||function(c){var u=typeof Symbol=="function"&&Symbol.iterator,f=u&&c[u],l=0;if(f)return f.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&l>=c.length&&(c=void 0),{value:c&&c[l++],done:!c}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function c(u){u===void 0&&(u=1e3),this._items=new Map,this._limit=u}return c.prototype.get=function(u){return this._items.get(u)},c.prototype.set=function(u,f){if(this._items.set(u,f),this._items.size>this._limit){var l=this._items.keys().next();l.done||this._items.delete(l.value)}},c.prototype.delete=function(u){return this._items.delete(u)},c.prototype.has=function(u){return this._items.has(u)},c.prototype.clear=function(){this._items.clear()},Object.defineProperty(c.prototype,"size",{get:function(){return this._items.size},enumerable:!0,configurable:!0}),c.prototype.forEach=function(u,f){this._items.forEach(function(l,p){return u.call(f,p,l)})},c.prototype.keys=function(){return i(this,function(u){switch(u.label){case 0:return[5,o(this._items.keys())];case 1:return u.sent(),[2]}})},c.prototype.values=function(){return i(this,function(u){switch(u.label){case 0:return[5,o(this._items.values())];case 1:return u.sent(),[2]}})},c.prototype.entries=function(){return i(this,function(u){switch(u.label){case 0:return[5,o(this._items.entries())];case 1:return u.sent(),[2]}})},c.prototype[Symbol.iterator]=function(){return i(this,function(u){switch(u.label){case 0:return[5,o(this._items)];case 1:return u.sent(),[2]}})},Object.defineProperty(c.prototype,Symbol.toStringTag,{get:function(){return"ObjectCache"},enumerable:!0,configurable:!0}),c}();r.ObjectCache=s},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function o(s){s===void 0&&(s=1e3),this._items=new Map,this._limit=s}return o.prototype.check=function(s,c){if(this._items.get(s)===c)return!0;if(this._items.get(c)===s)return!1;var u=Math.random()<.5;if(u?this._items.set(s,c):this._items.set(c,s),this._items.size>this._limit){var f=this._items.keys().next();f.done||this._items.delete(f.value)}return u},o}();r.CompareCache=i},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function o(s){this._initialized=!1,this._value=void 0,this._initFunc=s}return Object.defineProperty(o.prototype,"value",{get:function(){return this._initialized||(this._value=this._initFunc(),this._initialized=!0),this._value},enumerable:!0,configurable:!0}),o}();r.Lazy=i},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function o(s){this._pointer=0,this._chars=Array.from(s),this._length=this._chars.length}return Object.defineProperty(o.prototype,"eof",{get:function(){return this._pointer>=this._length},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),o.prototype.codePoint=function(){if(this._codePoint===void 0)if(this.eof)this._codePoint=-1;else{var s=this._chars[this._pointer].codePointAt(0);this._codePoint=s!==void 0?s:-1}return this._codePoint},o.prototype.c=function(){return this._c===void 0&&(this._c=this.eof?"":this._chars[this._pointer]),this._c},o.prototype.remaining=function(){return this._remaining===void 0&&(this._remaining=this.eof?"":this._chars.slice(this._pointer+1).join("")),this._remaining},o.prototype.substring=function(){return this._substring===void 0&&(this._substring=this.eof?"":this._chars.slice(this._pointer).join("")),this._substring},Object.defineProperty(o.prototype,"pointer",{get:function(){return this._pointer},set:function(s){s!==this._pointer&&(this._pointer=s,this._codePoint=void 0,this._c=void 0,this._remaining=void 0,this._substring=void 0)},enumerable:!0,configurable:!0}),o}();r.StringWalker=i},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(218);r.MapWriter=i.MapWriter;var o=a(258);r.XMLWriter=o.XMLWriter;var s=a(67);r.ObjectWriter=s.ObjectWriter;var c=a(260);r.JSONWriter=c.JSONWriter;var u=a(261);r.YAMLWriter=u.YAMLWriter},function(n,r,a){a(19),a(219),a(20),a(22),a(23);var i,o=this&&this.__extends||(i=function(f,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var v in h)h.hasOwnProperty(v)&&(p[v]=h[v])})(f,l)},function(f,l){function p(){this.constructor=f}i(f,l),f.prototype=l===null?Object.create(l):(p.prototype=l.prototype,new p)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(1),c=a(67),u=function(f){function l(p,h){var v=f.call(this,p)||this;return v._writerOptions=s.applyDefaults(h,{format:"map",wellFormed:!1,group:!1,verbose:!1}),v}return o(l,f),l.prototype.serialize=function(p){var h=s.applyDefaults(this._writerOptions,{format:"object",wellFormed:!1,verbose:!1}),v=new c.ObjectWriter(this._builderOptions,h).serialize(p);return this._convertObject(v)},l.prototype._convertObject=function(p){if(s.isArray(p)){for(var h=0;h<p.length;h++)p[h]=this._convertObject(p[h]);return p}if(s.isObject(p)){var v=new Map;for(var y in p)v.set(y,this._convertObject(p[y]));return v}return p},l}(a(50).BaseWriter);r.MapWriter=u},function(n,r,a){var i=a(139),o=a(143);n.exports=i("Map",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},o)},function(n,r,a){var i=a(4),o=a(8),s=a(59),c=a(13),u=a(27),f=a(26),l=a(134),p=a(128),h=a(63),v=a(5),y=a(129),m=v("isConcatSpreadable"),x=y>=51||!o(function(){var C=[];return C[m]=!1,C.concat()[0]!==C}),g=h("concat"),d=function(C){if(!c(C))return!1;var S=C[m];return S!==void 0?!!S:s(C)};i({target:"Array",proto:!0,forced:!x||!g},{concat:function(C){var S,T,w,E,D,b=u(this),O=p(b,0),M=0;for(S=-1,w=arguments.length;S<w;S++)if(d(D=S===-1?b:arguments[S])){if(M+(E=f(D.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(T=0;T<E;T++,M++)T in D&&l(O,M,D[T])}else{if(M>=9007199254740991)throw TypeError("Maximum allowed index exceeded");l(O,M++,D)}return O.length=M,O}})},function(n,r,a){var i=a(8);function o(s,c){return RegExp(s,c)}r.UNSUPPORTED_Y=i(function(){var s=o("a","y");return s.lastIndex=2,s.exec("abcd")!=null}),r.BROKEN_CARET=i(function(){var s=o("^r","gy");return s.lastIndex=2,s.exec("str")!=null})},function(n,r,a){var i=a(223);n.exports=function(o){if(i(o))throw TypeError("The method doesn't accept regular expressions");return o}},function(n,r,a){var i=a(13),o=a(42),s=a(5)("match");n.exports=function(c){var u;return i(c)&&((u=c[s])!==void 0?!!u:o(c)=="RegExp")}},function(n,r,a){var i=a(5)("match");n.exports=function(o){var s=/./;try{"/./"[o](s)}catch{try{return s[i]=!1,"/./"[o](s)}catch{}}return!1}},function(n,r,a){a(68);var i=a(25),o=a(8),s=a(5),c=a(93),u=a(21),f=s("species"),l=!o(function(){var m=/./;return m.exec=function(){var x=[];return x.groups={a:"7"},x},"".replace(m,"$<a>")!=="7"}),p="a".replace(/./,"$0")==="$0",h=s("replace"),v=!!/./[h]&&/./[h]("a","$0")==="",y=!o(function(){var m=/(?:)/,x=m.exec;m.exec=function(){return x.apply(this,arguments)};var g="ab".split(m);return g.length!==2||g[0]!=="a"||g[1]!=="b"});n.exports=function(m,x,g,d){var C=s(m),S=!o(function(){var O={};return O[C]=function(){return 7},""[m](O)!=7}),T=S&&!o(function(){var O=!1,M=/a/;return m==="split"&&((M={}).constructor={},M.constructor[f]=function(){return M},M.flags="",M[C]=/./[C]),M.exec=function(){return O=!0,null},M[C](""),!O});if(!S||!T||m==="replace"&&(!l||!p||v)||m==="split"&&!y){var w=/./[C],E=g(C,""[m],function(O,M,R,N,U){return M.exec===c?S&&!U?{done:!0,value:w.call(M,R,N)}:{done:!0,value:O.call(R,M,N)}:{done:!1}},{REPLACE_KEEPS_$0:p,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:v}),D=E[0],b=E[1];i(String.prototype,m,D),i(RegExp.prototype,C,x==2?function(O,M){return b.call(O,this,M)}:function(O){return b.call(O,this)})}d&&u(RegExp.prototype[C],"sham",!0)}},function(n,r,a){var i=a(137).charAt;n.exports=function(o,s,c){return s+(c?i(o,s).length:1)}},function(n,r,a){var i=a(42),o=a(93);n.exports=function(s,c){var u=s.exec;if(typeof u=="function"){var f=u.call(s,c);if(typeof f!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return f}if(i(s)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return o.call(s,c)}},function(n,r,a){(function(i){Object.defineProperty(r,"__esModule",{value:!0});var o=a(96);r.forgivingBase64Encode=function(s){return i.from(s).toString("base64")},r.forgivingBase64Decode=function(s){return s===""?"":((s=s.replace(o.ASCIIWhiteSpace,"")).length%4==0&&(s.endsWith("==")?s=s.substr(0,s.length-2):s.endsWith("=")&&(s=s.substr(0,s.length-1))),s.length%4==1?null:/[0-9A-Za-z+/]/.test(s)?i.from(s,"base64").toString("utf8"):null)}}).call(this,a(145).Buffer)},function(n,r,a){r.byteLength=function(h){var v=l(h),y=v[0],m=v[1];return 3*(y+m)/4-m},r.toByteArray=function(h){var v,y,m=l(h),x=m[0],g=m[1],d=new s(function(T,w,E){return 3*(w+E)/4-E}(0,x,g)),C=0,S=g>0?x-4:x;for(y=0;y<S;y+=4)v=o[h.charCodeAt(y)]<<18|o[h.charCodeAt(y+1)]<<12|o[h.charCodeAt(y+2)]<<6|o[h.charCodeAt(y+3)],d[C++]=v>>16&255,d[C++]=v>>8&255,d[C++]=255&v;return g===2&&(v=o[h.charCodeAt(y)]<<2|o[h.charCodeAt(y+1)]>>4,d[C++]=255&v),g===1&&(v=o[h.charCodeAt(y)]<<10|o[h.charCodeAt(y+1)]<<4|o[h.charCodeAt(y+2)]>>2,d[C++]=v>>8&255,d[C++]=255&v),d},r.fromByteArray=function(h){for(var v,y=h.length,m=y%3,x=[],g=0,d=y-m;g<d;g+=16383)x.push(p(h,g,g+16383>d?d:g+16383));return m===1?(v=h[y-1],x.push(i[v>>2]+i[v<<4&63]+"==")):m===2&&(v=(h[y-2]<<8)+h[y-1],x.push(i[v>>10]+i[v>>4&63]+i[v<<2&63]+"=")),x.join("")};for(var i=[],o=[],s=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,f=c.length;u<f;++u)i[u]=c[u],o[c.charCodeAt(u)]=u;function l(h){var v=h.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=h.indexOf("=");return y===-1&&(y=v),[y,y===v?0:4-y%4]}function p(h,v,y){for(var m,x,g=[],d=v;d<y;d+=3)m=(h[d]<<16&16711680)+(h[d+1]<<8&65280)+(255&h[d+2]),g.push(i[(x=m)>>18&63]+i[x>>12&63]+i[x>>6&63]+i[63&x]);return g.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(n,r){r.read=function(a,i,o,s,c){var u,f,l=8*c-s-1,p=(1<<l)-1,h=p>>1,v=-7,y=o?c-1:0,m=o?-1:1,x=a[i+y];for(y+=m,u=x&(1<<-v)-1,x>>=-v,v+=l;v>0;u=256*u+a[i+y],y+=m,v-=8);for(f=u&(1<<-v)-1,u>>=-v,v+=s;v>0;f=256*f+a[i+y],y+=m,v-=8);if(u===0)u=1-h;else{if(u===p)return f?NaN:1/0*(x?-1:1);f+=Math.pow(2,s),u-=h}return(x?-1:1)*f*Math.pow(2,u-s)},r.write=function(a,i,o,s,c,u){var f,l,p,h=8*u-c-1,v=(1<<h)-1,y=v>>1,m=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=s?0:u-1,g=s?1:-1,d=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(l=isNaN(i)?1:0,f=v):(f=Math.floor(Math.log(i)/Math.LN2),i*(p=Math.pow(2,-f))<1&&(f--,p*=2),(i+=f+y>=1?m/p:m*Math.pow(2,1-y))*p>=2&&(f++,p/=2),f+y>=v?(l=0,f=v):f+y>=1?(l=(i*p-1)*Math.pow(2,c),f+=y):(l=i*Math.pow(2,y-1)*Math.pow(2,c),f=0));c>=8;a[o+x]=255&l,x+=g,l/=256,c-=8);for(f=f<<c|l,h+=c;h>0;a[o+x]=255&f,x+=g,f/=256,h-=8);a[o+x-g]|=128*d}},function(n,r){var a={}.toString;n.exports=Array.isArray||function(i){return a.call(i)=="[object Array]"}},function(n,r,a){var i=this&&this.__values||function(c){var u=typeof Symbol=="function"&&Symbol.iterator,f=u&&c[u],l=0;if(f)return f.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&l>=c.length&&(c=void 0),{value:c&&c[l++],done:!c}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(1);function s(c){var u,f;if(c===null||o.isString(c)||o.isNumber(c))return c;if(o.isArray(c)){var l=new Array;try{for(var p=i(c),h=p.next();!h.done;h=p.next()){var v=h.value;l.push(s(v))}}catch(x){u={error:x}}finally{try{h&&!h.done&&(f=p.return)&&f.call(p)}finally{if(u)throw u.error}}return l}if(o.isObject(c)){l=new Map;for(var y in c)if(c.hasOwnProperty(y)){var m=c[y];l.set(y,s(m))}return l}return c}r.parseJSONFromBytes=function(c){var u=o.utf8Decode(c);return JSON.parse.call(void 0,u)},r.serializeJSONToBytes=function(c){var u=JSON.stringify.call(void 0,c);return o.utf8Encode(u)},r.parseJSONIntoInfraValues=function(c){return s(JSON.parse.call(void 0,c))},r.convertAJSONDerivedJavaScriptValueToAnInfraValue=s},function(n,r,a){var i=this&&this.__generator||function(f,l){var p,h,v,y,m={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return y={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function x(g){return function(d){return function(C){if(p)throw new TypeError("Generator is already executing.");for(;m;)try{if(p=1,h&&(v=2&C[0]?h.return:C[0]?h.throw||((v=h.return)&&v.call(h),0):h.next)&&!(v=v.call(h,C[1])).done)return v;switch(h=0,v&&(C=[2&C[0],v.value]),C[0]){case 0:case 1:v=C;break;case 4:return m.label++,{value:C[1],done:!1};case 5:m.label++,h=C[1],C=[0];continue;case 7:C=m.ops.pop(),m.trys.pop();continue;default:if(v=m.trys,!((v=v.length>0&&v[v.length-1])||C[0]!==6&&C[0]!==2)){m=0;continue}if(C[0]===3&&(!v||C[1]>v[0]&&C[1]<v[3])){m.label=C[1];break}if(C[0]===6&&m.label<v[1]){m.label=v[1],v=C;break}if(v&&m.label<v[2]){m.label=v[2],m.ops.push(C);break}v[2]&&m.ops.pop(),m.trys.pop();continue}C=l.call(f,m)}catch(S){C=[6,S],h=0}finally{p=v=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([g,d])}}},o=this&&this.__read||function(f,l){var p=typeof Symbol=="function"&&f[Symbol.iterator];if(!p)return f;var h,v,y=p.call(f),m=[];try{for(;(l===void 0||l-- >0)&&!(h=y.next()).done;)m.push(h.value)}catch(x){v={error:x}}finally{try{h&&!h.done&&(p=y.return)&&p.call(y)}finally{if(v)throw v.error}}return m},s=this&&this.__spread||function(){for(var f=[],l=0;l<arguments.length;l++)f=f.concat(o(arguments[l]));return f},c=this&&this.__values||function(f){var l=typeof Symbol=="function"&&Symbol.iterator,p=l&&f[l],h=0;if(p)return p.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&h>=f.length&&(f=void 0),{value:f&&f[h++],done:!f}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var u=a(1);r.append=function(f,l){f.push(l)},r.extend=function(f,l){f.push.apply(f,s(l))},r.prepend=function(f,l){f.unshift(l)},r.replace=function(f,l,p){var h,v,y=0;try{for(var m=c(f),x=m.next();!x.done;x=m.next()){var g=x.value;if(u.isFunction(l))l.call(null,g)&&(f[y]=p);else if(g===l)return void(f[y]=p);y++}}catch(d){h={error:d}}finally{try{x&&!x.done&&(v=m.return)&&v.call(m)}finally{if(h)throw h.error}}},r.insert=function(f,l,p){f.splice(p,0,l)},r.remove=function(f,l){for(var p=f.length;p--;){var h=f[p];if(u.isFunction(l))l.call(null,h)&&f.splice(p,1);else if(h===l)return void f.splice(p,1)}},r.empty=function(f){f.length=0},r.contains=function(f,l){var p,h;try{for(var v=c(f),y=v.next();!y.done;y=v.next()){var m=y.value;if(u.isFunction(l)){if(l.call(null,m))return!0}else if(m===l)return!0}}catch(x){p={error:x}}finally{try{y&&!y.done&&(h=v.return)&&h.call(v)}finally{if(p)throw p.error}}return!1},r.size=function(f,l){var p,h;if(l===void 0)return f.length;var v=0;try{for(var y=c(f),m=y.next();!m.done;m=y.next()){var x=m.value;l.call(null,x)&&v++}}catch(g){p={error:g}}finally{try{m&&!m.done&&(h=y.return)&&h.call(y)}finally{if(p)throw p.error}}return v},r.isEmpty=function(f){return f.length===0},r.forEach=function(f,l){var p,h,v,y,m,x;return i(this,function(g){switch(g.label){case 0:return l!==void 0?[3,2]:[5,c(f)];case 1:return g.sent(),[3,9];case 2:g.trys.push([2,7,8,9]),p=c(f),h=p.next(),g.label=3;case 3:return h.done?[3,6]:(v=h.value,l.call(null,v)?[4,v]:[3,5]);case 4:g.sent(),g.label=5;case 5:return h=p.next(),[3,3];case 6:return[3,9];case 7:return y=g.sent(),m={error:y},[3,9];case 8:try{h&&!h.done&&(x=p.return)&&x.call(p)}finally{if(m)throw m.error}return[7];case 9:return[2]}})},r.clone=function(f){return new(Array.bind.apply(Array,s([void 0],f)))},r.sortInAscendingOrder=function(f,l){return f.sort(function(p,h){return l.call(null,p,h)?-1:1})},r.sortInDescendingOrder=function(f,l){return f.sort(function(p,h){return l.call(null,p,h)?1:-1})}},function(n,r,a){var i=this&&this.__generator||function(f,l){var p,h,v,y,m={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return y={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function x(g){return function(d){return function(C){if(p)throw new TypeError("Generator is already executing.");for(;m;)try{if(p=1,h&&(v=2&C[0]?h.return:C[0]?h.throw||((v=h.return)&&v.call(h),0):h.next)&&!(v=v.call(h,C[1])).done)return v;switch(h=0,v&&(C=[2&C[0],v.value]),C[0]){case 0:case 1:v=C;break;case 4:return m.label++,{value:C[1],done:!1};case 5:m.label++,h=C[1],C=[0];continue;case 7:C=m.ops.pop(),m.trys.pop();continue;default:if(v=m.trys,!((v=v.length>0&&v[v.length-1])||C[0]!==6&&C[0]!==2)){m=0;continue}if(C[0]===3&&(!v||C[1]>v[0]&&C[1]<v[3])){m.label=C[1];break}if(C[0]===6&&m.label<v[1]){m.label=v[1],v=C;break}if(v&&m.label<v[2]){m.label=v[2],m.ops.push(C);break}v[2]&&m.ops.pop(),m.trys.pop();continue}C=l.call(f,m)}catch(S){C=[6,S],h=0}finally{p=v=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([g,d])}}},o=this&&this.__values||function(f){var l=typeof Symbol=="function"&&Symbol.iterator,p=l&&f[l],h=0;if(p)return p.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&h>=f.length&&(f=void 0),{value:f&&f[h++],done:!f}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(f,l){var p=typeof Symbol=="function"&&f[Symbol.iterator];if(!p)return f;var h,v,y=p.call(f),m=[];try{for(;(l===void 0||l-- >0)&&!(h=y.next()).done;)m.push(h.value)}catch(x){v={error:x}}finally{try{h&&!h.done&&(p=y.return)&&p.call(y)}finally{if(v)throw v.error}}return m},c=this&&this.__spread||function(){for(var f=[],l=0;l<arguments.length;l++)f=f.concat(s(arguments[l]));return f};Object.defineProperty(r,"__esModule",{value:!0});var u=a(1);r.get=function(f,l){return f.get(l)},r.set=function(f,l,p){f.set(l,p)},r.remove=function(f,l){var p,h,v,y;if(u.isFunction(l)){var m=[];try{for(var x=o(f),g=x.next();!g.done;g=x.next()){var d=g.value;l.call(null,d)&&m.push(d[0])}}catch(w){p={error:w}}finally{try{g&&!g.done&&(h=x.return)&&h.call(x)}finally{if(p)throw p.error}}try{for(var C=o(m),S=C.next();!S.done;S=C.next()){var T=S.value;f.delete(T)}}catch(w){v={error:w}}finally{try{S&&!S.done&&(y=C.return)&&y.call(C)}finally{if(v)throw v.error}}}else f.delete(l)},r.contains=function(f,l){var p,h;if(u.isFunction(l)){try{for(var v=o(f),y=v.next();!y.done;y=v.next()){var m=y.value;if(l.call(null,m))return!0}}catch(x){p={error:x}}finally{try{y&&!y.done&&(h=v.return)&&h.call(v)}finally{if(p)throw p.error}}return!1}return f.has(l)},r.keys=function(f){return new Set(f.keys())},r.values=function(f){return c(f.values())},r.size=function(f,l){var p,h;if(l===void 0)return f.size;var v=0;try{for(var y=o(f),m=y.next();!m.done;m=y.next()){var x=m.value;l.call(null,x)&&v++}}catch(g){p={error:g}}finally{try{m&&!m.done&&(h=y.return)&&h.call(y)}finally{if(p)throw p.error}}return v},r.isEmpty=function(f){return f.size===0},r.forEach=function(f,l){var p,h,v,y,m,x;return i(this,function(g){switch(g.label){case 0:return l!==void 0?[3,2]:[5,o(f)];case 1:return g.sent(),[3,9];case 2:g.trys.push([2,7,8,9]),p=o(f),h=p.next(),g.label=3;case 3:return h.done?[3,6]:(v=h.value,l.call(null,v)?[4,v]:[3,5]);case 4:g.sent(),g.label=5;case 5:return h=p.next(),[3,3];case 6:return[3,9];case 7:return y=g.sent(),m={error:y},[3,9];case 8:try{h&&!h.done&&(x=p.return)&&x.call(p)}finally{if(m)throw m.error}return[7];case 9:return[2]}})},r.clone=function(f){return new Map(f)},r.sortInAscendingOrder=function(f,l){var p=new(Array.bind.apply(Array,c([void 0],f)));return p.sort(function(h,v){return l.call(null,h,v)?-1:1}),new Map(p)},r.sortInDescendingOrder=function(f,l){var p=new(Array.bind.apply(Array,c([void 0],f)));return p.sort(function(h,v){return l.call(null,h,v)?1:-1}),new Map(p)}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.HTML="http://www.w3.org/1999/xhtml",r.XML="http://www.w3.org/XML/1998/namespace",r.XMLNS="http://www.w3.org/2000/xmlns/",r.MathML="http://www.w3.org/1998/Math/MathML",r.SVG="http://www.w3.org/2000/svg",r.XLink="http://www.w3.org/1999/xlink"},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.enqueue=function(i,o){i.push(o)},r.dequeue=function(i){return i.shift()||null}},function(n,r,a){var i=this&&this.__generator||function(l,p){var h,v,y,m,x={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return m={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function g(d){return function(C){return function(S){if(h)throw new TypeError("Generator is already executing.");for(;x;)try{if(h=1,v&&(y=2&S[0]?v.return:S[0]?v.throw||((y=v.return)&&y.call(v),0):v.next)&&!(y=y.call(v,S[1])).done)return y;switch(v=0,y&&(S=[2&S[0],y.value]),S[0]){case 0:case 1:y=S;break;case 4:return x.label++,{value:S[1],done:!1};case 5:x.label++,v=S[1],S=[0];continue;case 7:S=x.ops.pop(),x.trys.pop();continue;default:if(y=x.trys,!((y=y.length>0&&y[y.length-1])||S[0]!==6&&S[0]!==2)){x=0;continue}if(S[0]===3&&(!y||S[1]>y[0]&&S[1]<y[3])){x.label=S[1];break}if(S[0]===6&&x.label<y[1]){x.label=y[1],y=S;break}if(y&&x.label<y[2]){x.label=y[2],x.ops.push(S);break}y[2]&&x.ops.pop(),x.trys.pop();continue}S=p.call(l,x)}catch(T){S=[6,T],v=0}finally{h=y=0}if(5&S[0])throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}([d,C])}}},o=this&&this.__values||function(l){var p=typeof Symbol=="function"&&Symbol.iterator,h=p&&l[p],v=0;if(h)return h.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&v>=l.length&&(l=void 0),{value:l&&l[v++],done:!l}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(l,p){var h=typeof Symbol=="function"&&l[Symbol.iterator];if(!h)return l;var v,y,m=h.call(l),x=[];try{for(;(p===void 0||p-- >0)&&!(v=m.next()).done;)x.push(v.value)}catch(g){y={error:g}}finally{try{v&&!v.done&&(h=m.return)&&h.call(m)}finally{if(y)throw y.error}}return x},c=this&&this.__spread||function(){for(var l=[],p=0;p<arguments.length;p++)l=l.concat(s(arguments[p]));return l};Object.defineProperty(r,"__esModule",{value:!0});var u=a(1);function f(l,p){var h,v;try{for(var y=o(l),m=y.next();!m.done;m=y.next()){var x=m.value;if(!p.has(x))return!1}}catch(g){h={error:g}}finally{try{m&&!m.done&&(v=y.return)&&v.call(y)}finally{if(h)throw h.error}}return!0}r.append=function(l,p){l.add(p)},r.extend=function(l,p){p.forEach(l.add,l)},r.prepend=function(l,p){var h=new Set(l);l.clear(),l.add(p),h.forEach(l.add,l)},r.replace=function(l,p,h){var v,y,m=new Set;try{for(var x=o(l),g=x.next();!g.done;g=x.next()){var d=g.value;u.isFunction(p)?p.call(null,d)?m.add(h):m.add(d):d===p?m.add(h):m.add(d)}}catch(C){v={error:C}}finally{try{g&&!g.done&&(y=x.return)&&y.call(x)}finally{if(v)throw v.error}}l.clear(),m.forEach(l.add,l)},r.insert=function(l,p,h){var v,y,m=new Set,x=0;try{for(var g=o(l),d=g.next();!d.done;d=g.next()){var C=d.value;x===h&&m.add(p),m.add(C),x++}}catch(S){v={error:S}}finally{try{d&&!d.done&&(y=g.return)&&y.call(g)}finally{if(v)throw v.error}}l.clear(),m.forEach(l.add,l)},r.remove=function(l,p){var h,v,y,m;if(u.isFunction(p)){var x=[];try{for(var g=o(l),d=g.next();!d.done;d=g.next()){var C=d.value;p.call(null,C)&&x.push(C)}}catch(E){h={error:E}}finally{try{d&&!d.done&&(v=g.return)&&v.call(g)}finally{if(h)throw h.error}}try{for(var S=o(x),T=S.next();!T.done;T=S.next()){var w=T.value;l.delete(w)}}catch(E){y={error:E}}finally{try{T&&!T.done&&(m=S.return)&&m.call(S)}finally{if(y)throw y.error}}}else l.delete(p)},r.empty=function(l){l.clear()},r.contains=function(l,p){var h,v;if(!u.isFunction(p))return l.has(p);try{for(var y=o(l),m=y.next();!m.done;m=y.next()){var x=m.value;if(p.call(null,x))return!0}}catch(g){h={error:g}}finally{try{m&&!m.done&&(v=y.return)&&v.call(y)}finally{if(h)throw h.error}}return!1},r.size=function(l,p){var h,v;if(p===void 0)return l.size;var y=0;try{for(var m=o(l),x=m.next();!x.done;x=m.next()){var g=x.value;p.call(null,g)&&y++}}catch(d){h={error:d}}finally{try{x&&!x.done&&(v=m.return)&&v.call(m)}finally{if(h)throw h.error}}return y},r.isEmpty=function(l){return l.size===0},r.forEach=function(l,p){var h,v,y,m,x,g;return i(this,function(d){switch(d.label){case 0:return p!==void 0?[3,2]:[5,o(l)];case 1:return d.sent(),[3,9];case 2:d.trys.push([2,7,8,9]),h=o(l),v=h.next(),d.label=3;case 3:return v.done?[3,6]:(y=v.value,p.call(null,y)?[4,y]:[3,5]);case 4:d.sent(),d.label=5;case 5:return v=h.next(),[3,3];case 6:return[3,9];case 7:return m=d.sent(),x={error:m},[3,9];case 8:try{v&&!v.done&&(g=h.return)&&g.call(h)}finally{if(x)throw x.error}return[7];case 9:return[2]}})},r.clone=function(l){return new Set(l)},r.sortInAscendingOrder=function(l,p){var h=new(Array.bind.apply(Array,c([void 0],l)));return h.sort(function(v,y){return p.call(null,v,y)?-1:1}),new Set(h)},r.sortInDescendingOrder=function(l,p){var h=new(Array.bind.apply(Array,c([void 0],l)));return h.sort(function(v,y){return p.call(null,v,y)?1:-1}),new Set(h)},r.isSubsetOf=f,r.isSupersetOf=function(l,p){return f(p,l)},r.intersection=function(l,p){var h,v,y=new Set;try{for(var m=o(l),x=m.next();!x.done;x=m.next()){var g=x.value;p.has(g)&&y.add(g)}}catch(d){h={error:d}}finally{try{x&&!x.done&&(v=m.return)&&v.call(m)}finally{if(h)throw h.error}}return y},r.union=function(l,p){var h=new Set(l);return p.forEach(h.add,h),h},r.range=function(l,p){for(var h=new Set,v=l;v<=p;v++)h.add(v);return h}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),r.push=function(i,o){i.push(o)},r.pop=function(i){return i.pop()||null}},function(n,r,a){var i=this&&this.__values||function(x){var g=typeof Symbol=="function"&&Symbol.iterator,d=g&&x[g],C=0;if(d)return d.call(x);if(x&&typeof x.length=="number")return{next:function(){return x&&C>=x.length&&(x=void 0),{value:x&&x[C++],done:!x}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(96),s=a(147),c=a(146),u=a(1);function f(x,g){for(var d=0;;){var C=d<x.length?x.charCodeAt(d):null,S=d<g.length?g.charCodeAt(d):null;if(C===null)return!0;if(C!==S)return!1;d++}}function l(x){var g,d,C=Array.from(x),S=new Uint8Array(C.length),T=0;try{for(var w=i(x),E=w.next();!E.done;E=w.next()){var D=E.value.codePointAt(0);console.assert(D!==void 0&&D<=255,"isomorphicEncode requires string bytes to be less than or equal to 0x00FF."),D!==void 0&&D<=255&&(S[T++]=D)}}catch(b){g={error:b}}finally{try{E&&!E.done&&(d=w.return)&&d.call(w)}finally{if(g)throw g.error}}return S}function p(x){return/^[\u0000-\u007F]*$/.test(x)}function h(x){var g,d,C="";try{for(var S=i(x),T=S.next();!T.done;T=S.next()){var w=T.value,E=w.codePointAt(0);C+=E!==void 0&&E>=65&&E<=90?String.fromCodePoint(E+32):w}}catch(D){g={error:D}}finally{try{T&&!T.done&&(d=S.return)&&d.call(S)}finally{if(g)throw g.error}}return C}function v(x){return x.replace(/^[\t\n\f\r ]+/,"").replace(/[\t\n\f\r ]+$/,"")}function y(x,g,d){if(!u.isArray(g))return y(x,Array.from(g),d);for(var C="";d.position<g.length&&x.call(null,g[d.position]);)C+=g[d.position],d.position++;return C}function m(x,g){y(function(d){return o.ASCIIWhiteSpace.test(d)},x,g)}r.isCodeUnitPrefix=f,r.isCodeUnitLessThan=function(x,g){if(f(g,x))return!1;if(f(x,g))return!0;for(var d=0;d<Math.min(x.length,g.length);d++){var C=x.charCodeAt(d),S=g.charCodeAt(d);if(C!==S)return C<S}return!1},r.isomorphicEncode=l,r.isASCIIString=p,r.asciiLowercase=h,r.asciiUppercase=function(x){var g,d,C="";try{for(var S=i(x),T=S.next();!T.done;T=S.next()){var w=T.value,E=w.codePointAt(0);C+=E!==void 0&&E>=97&&E<=122?String.fromCodePoint(E-32):w}}catch(D){g={error:D}}finally{try{T&&!T.done&&(d=S.return)&&d.call(S)}finally{if(g)throw g.error}}return C},r.asciiCaseInsensitiveMatch=function(x,g){return h(x)===h(g)},r.asciiEncode=function(x){return console.assert(p(x),"asciiEncode requires an ASCII string."),l(x)},r.asciiDecode=function(x){var g,d;try{for(var C=i(x),S=C.next();!S.done;S=C.next()){var T=S.value;console.assert(c.isASCIIByte(T),"asciiDecode requires an ASCII byte sequence.")}}catch(w){g={error:w}}finally{try{S&&!S.done&&(d=C.return)&&d.call(C)}finally{if(g)throw g.error}}return s.isomorphicDecode(x)},r.stripNewlines=function(x){return x.replace(/[\n\r]/g,"")},r.normalizeNewlines=function(x){return x.replace(/\r\n/g,`
`).replace(/\r/g,`
`)},r.stripLeadingAndTrailingASCIIWhitespace=v,r.stripAndCollapseASCIIWhitespace=function(x){return v(x.replace(/[\t\n\f\r ]{2,}/g," "))},r.collectASequenceOfCodePoints=y,r.skipASCIIWhitespace=m,r.strictlySplit=function x(g,d){if(!u.isArray(g))return x(Array.from(g),d);var C={position:0},S=[],T=y(function(w){return d!==w},g,C);for(S.push(T);C.position<g.length;)console.assert(g[C.position]===d,"strictlySplit found no delimiter in input string."),C.position++,T=y(function(w){return d!==w},g,C),S.push(T);return S},r.splitAStringOnASCIIWhitespace=function x(g){if(!u.isArray(g))return x(Array.from(g));var d={position:0},C=[];for(m(g,d);d.position<g.length;){var S=y(function(T){return!o.ASCIIWhiteSpace.test(T)},g,d);C.push(S),m(g,d)}return C},r.splitAStringOnCommas=function x(g){if(!u.isArray(g))return x(Array.from(g));for(var d={position:0},C=[];d.position<g.length;){var S=y(function(T){return T!==","},g,d);C.push(v(S)),d.position<g.length&&(console.assert(g[d.position]===",","splitAStringOnCommas found no delimiter in input string."),d.position++)}return C},r.concatenate=function(x,g){return g===void 0&&(g=""),x.length===0?"":x.join(g)}},function(n,r,a){var i=this&&this.__values||function(s){var c=typeof Symbol=="function"&&Symbol.iterator,u=c&&s[c],f=0;if(u)return u.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&f>=s.length&&(s=void 0),{value:s&&s[f++],done:!s}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(97);r.abort_add=function(s,c){c._abortedFlag||c._abortAlgorithms.add(s)},r.abort_remove=function(s,c){c._abortAlgorithms.delete(s)},r.abort_signalAbort=function(s){var c,u;if(!s._abortedFlag){s._abortedFlag=!0;try{for(var f=i(s._abortAlgorithms),l=f.next();!l.done;l=f.next())l.value.call(s)}catch(p){c={error:p}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}s._abortAlgorithms.clear(),o.event_fireAnEvent("abort",s)}}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(150),o=function(){function s(){}return s.asNode=function(c){if(i.Guard.isNode(c))return c;throw new Error("Invalid object. Node expected.")},s}();r.Cast=o},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function s(){}return Object.defineProperty(s.prototype,"size",{get:function(){return 0},enumerable:!0,configurable:!0}),s.prototype.add=function(c){throw new Error("Cannot add to an empty set.")},s.prototype.clear=function(){},s.prototype.delete=function(c){return!1},s.prototype.forEach=function(c,u){},s.prototype.has=function(c){return!1},s.prototype[Symbol.iterator]=function(){return new o},s.prototype.entries=function(){return new o},s.prototype.keys=function(){return new o},s.prototype.values=function(){return new o},Object.defineProperty(s.prototype,Symbol.toStringTag,{get:function(){return"EmptySet"},enumerable:!0,configurable:!0}),s}();r.EmptySet=i;var o=function(){function s(){}return s.prototype[Symbol.iterator]=function(){return this},s.prototype.next=function(){return{done:!0,value:null}},s}()},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),function(i){i[i.SchemeStart=0]="SchemeStart",i[i.Scheme=1]="Scheme",i[i.NoScheme=2]="NoScheme",i[i.SpecialRelativeOrAuthority=3]="SpecialRelativeOrAuthority",i[i.PathOrAuthority=4]="PathOrAuthority",i[i.Relative=5]="Relative",i[i.RelativeSlash=6]="RelativeSlash",i[i.SpecialAuthoritySlashes=7]="SpecialAuthoritySlashes",i[i.SpecialAuthorityIgnoreSlashes=8]="SpecialAuthorityIgnoreSlashes",i[i.Authority=9]="Authority",i[i.Host=10]="Host",i[i.Hostname=11]="Hostname",i[i.Port=12]="Port",i[i.File=13]="File",i[i.FileSlash=14]="FileSlash",i[i.FileHost=15]="FileHost",i[i.PathStart=16]="PathStart",i[i.Path=17]="Path",i[i.CannotBeABaseURLPath=18]="CannotBeABaseURLPath",i[i.Query=19]="Query",i[i.Fragment=20]="Fragment"}(r.ParserState||(r.ParserState={})),r.OpaqueOrigin=["","",null,null]},function(n,r,a){var i=a(245),o=a(247);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}r.parse=S,r.resolve=function(T,w){return S(T,!1,!0).resolve(w)},r.resolveObject=function(T,w){return T?S(T,!1,!0).resolveObject(w):w},r.format=function(T){return o.isString(T)&&(T=S(T)),T instanceof s?T.format():s.prototype.format.call(T)},r.Url=s;var c=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),p=["'"].concat(l),h=["%","/","?",";","#"].concat(p),v=["/","?","#"],y=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},d={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},C=a(248);function S(T,w,E){if(T&&o.isObject(T)&&T instanceof s)return T;var D=new s;return D.parse(T,w,E),D}s.prototype.parse=function(T,w,E){if(!o.isString(T))throw new TypeError("Parameter 'url' must be a string, not "+typeof T);var D=T.indexOf("?"),b=D!==-1&&D<T.indexOf("#")?"?":"#",O=T.split(b);O[0]=O[0].replace(/\\/g,"/");var M=T=O.join(b);if(M=M.trim(),!E&&T.split("#").length===1){var R=f.exec(M);if(R)return this.path=M,this.href=M,this.pathname=R[1],R[2]?(this.search=R[2],this.query=w?C.parse(this.search.substr(1)):this.search.substr(1)):w&&(this.search="",this.query={}),this}var N=c.exec(M);if(N){var U=(N=N[0]).toLowerCase();this.protocol=U,M=M.substr(N.length)}if(E||N||M.match(/^\/\/[^@\/]+@[^@\/]+/)){var W=M.substr(0,2)==="//";!W||N&&g[N]||(M=M.substr(2),this.slashes=!0)}if(!g[N]&&(W||N&&!d[N])){for(var I,G,F=-1,A=0;A<v.length;A++)(H=M.indexOf(v[A]))!==-1&&(F===-1||H<F)&&(F=H);for((G=F===-1?M.lastIndexOf("@"):M.lastIndexOf("@",F))!==-1&&(I=M.slice(0,G),M=M.slice(G+1),this.auth=decodeURIComponent(I)),F=-1,A=0;A<h.length;A++){var H;(H=M.indexOf(h[A]))!==-1&&(F===-1||H<F)&&(F=H)}F===-1&&(F=M.length),this.host=M.slice(0,F),M=M.slice(F),this.parseHost(),this.hostname=this.hostname||"";var $=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!$)for(var X=this.hostname.split(/\./),Y=(A=0,X.length);A<Y;A++){var q=X[A];if(q&&!q.match(y)){for(var J="",ne=0,Q=q.length;ne<Q;ne++)q.charCodeAt(ne)>127?J+="x":J+=q[ne];if(!J.match(y)){var te=X.slice(0,A),L=X.slice(A+1),_=q.match(m);_&&(te.push(_[1]),L.unshift(_[2])),L.length&&(M="/"+L.join(".")+M),this.hostname=te.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),$||(this.hostname=i.toASCII(this.hostname));var V=this.port?":"+this.port:"",k=this.hostname||"";this.host=k+V,this.href+=this.host,$&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),M[0]!=="/"&&(M="/"+M))}if(!x[U])for(A=0,Y=p.length;A<Y;A++){var P=p[A];if(M.indexOf(P)!==-1){var j=encodeURIComponent(P);j===P&&(j=escape(P)),M=M.split(P).join(j)}}var z=M.indexOf("#");z!==-1&&(this.hash=M.substr(z),M=M.slice(0,z));var Z=M.indexOf("?");if(Z!==-1?(this.search=M.substr(Z),this.query=M.substr(Z+1),w&&(this.query=C.parse(this.query)),M=M.slice(0,Z)):w&&(this.search="",this.query={}),M&&(this.pathname=M),d[U]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){V=this.pathname||"";var re=this.search||"";this.path=V+re}return this.href=this.format(),this},s.prototype.format=function(){var T=this.auth||"";T&&(T=(T=encodeURIComponent(T)).replace(/%3A/i,":"),T+="@");var w=this.protocol||"",E=this.pathname||"",D=this.hash||"",b=!1,O="";this.host?b=T+this.host:this.hostname&&(b=T+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(b+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(O=C.stringify(this.query));var M=this.search||O&&"?"+O||"";return w&&w.substr(-1)!==":"&&(w+=":"),this.slashes||(!w||d[w])&&b!==!1?(b="//"+(b||""),E&&E.charAt(0)!=="/"&&(E="/"+E)):b||(b=""),D&&D.charAt(0)!=="#"&&(D="#"+D),M&&M.charAt(0)!=="?"&&(M="?"+M),w+b+(E=E.replace(/[?#]/g,function(R){return encodeURIComponent(R)}))+(M=M.replace("#","%23"))+D},s.prototype.resolve=function(T){return this.resolveObject(S(T,!1,!0)).format()},s.prototype.resolveObject=function(T){if(o.isString(T)){var w=new s;w.parse(T,!1,!0),T=w}for(var E=new s,D=Object.keys(this),b=0;b<D.length;b++){var O=D[b];E[O]=this[O]}if(E.hash=T.hash,T.href==="")return E.href=E.format(),E;if(T.slashes&&!T.protocol){for(var M=Object.keys(T),R=0;R<M.length;R++){var N=M[R];N!=="protocol"&&(E[N]=T[N])}return d[E.protocol]&&E.hostname&&!E.pathname&&(E.path=E.pathname="/"),E.href=E.format(),E}if(T.protocol&&T.protocol!==E.protocol){if(!d[T.protocol]){for(var U=Object.keys(T),W=0;W<U.length;W++){var I=U[W];E[I]=T[I]}return E.href=E.format(),E}if(E.protocol=T.protocol,T.host||g[T.protocol])E.pathname=T.pathname;else{for(var G=(T.pathname||"").split("/");G.length&&!(T.host=G.shift()););T.host||(T.host=""),T.hostname||(T.hostname=""),G[0]!==""&&G.unshift(""),G.length<2&&G.unshift(""),E.pathname=G.join("/")}if(E.search=T.search,E.query=T.query,E.host=T.host||"",E.auth=T.auth,E.hostname=T.hostname||T.host,E.port=T.port,E.pathname||E.search){var F=E.pathname||"",A=E.search||"";E.path=F+A}return E.slashes=E.slashes||T.slashes,E.href=E.format(),E}var H=E.pathname&&E.pathname.charAt(0)==="/",$=T.host||T.pathname&&T.pathname.charAt(0)==="/",X=$||H||E.host&&T.pathname,Y=X,q=E.pathname&&E.pathname.split("/")||[],J=(G=T.pathname&&T.pathname.split("/")||[],E.protocol&&!d[E.protocol]);if(J&&(E.hostname="",E.port=null,E.host&&(q[0]===""?q[0]=E.host:q.unshift(E.host)),E.host="",T.protocol&&(T.hostname=null,T.port=null,T.host&&(G[0]===""?G[0]=T.host:G.unshift(T.host)),T.host=null),X=X&&(G[0]===""||q[0]==="")),$)E.host=T.host||T.host===""?T.host:E.host,E.hostname=T.hostname||T.hostname===""?T.hostname:E.hostname,E.search=T.search,E.query=T.query,q=G;else if(G.length)q||(q=[]),q.pop(),q=q.concat(G),E.search=T.search,E.query=T.query;else if(!o.isNullOrUndefined(T.search))return J&&(E.hostname=E.host=q.shift(),(_=!!(E.host&&E.host.indexOf("@")>0)&&E.host.split("@"))&&(E.auth=_.shift(),E.host=E.hostname=_.shift())),E.search=T.search,E.query=T.query,o.isNull(E.pathname)&&o.isNull(E.search)||(E.path=(E.pathname?E.pathname:"")+(E.search?E.search:"")),E.href=E.format(),E;if(!q.length)return E.pathname=null,E.search?E.path="/"+E.search:E.path=null,E.href=E.format(),E;for(var ne=q.slice(-1)[0],Q=(E.host||T.host||q.length>1)&&(ne==="."||ne==="..")||ne==="",te=0,L=q.length;L>=0;L--)(ne=q[L])==="."?q.splice(L,1):ne===".."?(q.splice(L,1),te++):te&&(q.splice(L,1),te--);if(!X&&!Y)for(;te--;te)q.unshift("..");!X||q[0]===""||q[0]&&q[0].charAt(0)==="/"||q.unshift(""),Q&&q.join("/").substr(-1)!=="/"&&q.push("");var _,V=q[0]===""||q[0]&&q[0].charAt(0)==="/";return J&&(E.hostname=E.host=V?"":q.length?q.shift():"",(_=!!(E.host&&E.host.indexOf("@")>0)&&E.host.split("@"))&&(E.auth=_.shift(),E.host=E.hostname=_.shift())),(X=X||E.host&&q.length)&&!V&&q.unshift(""),q.length?E.pathname=q.join("/"):(E.pathname=null,E.path=null),o.isNull(E.pathname)&&o.isNull(E.search)||(E.path=(E.pathname?E.pathname:"")+(E.search?E.search:"")),E.auth=T.auth||E.auth,E.slashes=E.slashes||T.slashes,E.href=E.format(),E},s.prototype.parseHost=function(){var T=this.host,w=u.exec(T);w&&((w=w[0])!==":"&&(this.port=w.substr(1)),T=T.substr(0,T.length-w.length)),T&&(this.hostname=T)}},function(n,r,a){(function(i,o){var s;/*! https://mths.be/punycode v1.4.1 by @mathias */(function(c){r&&r.nodeType,i&&i.nodeType;var u=typeof o=="object"&&o;u.global!==u&&u.window!==u&&u.self;var f,l=2147483647,p=/^xn--/,h=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,x=String.fromCharCode;function g(O){throw new RangeError(y[O])}function d(O,M){for(var R=O.length,N=[];R--;)N[R]=M(O[R]);return N}function C(O,M){var R=O.split("@"),N="";return R.length>1&&(N=R[0]+"@",O=R[1]),N+d((O=O.replace(v,".")).split("."),M).join(".")}function S(O){for(var M,R,N=[],U=0,W=O.length;U<W;)(M=O.charCodeAt(U++))>=55296&&M<=56319&&U<W?(64512&(R=O.charCodeAt(U++)))==56320?N.push(((1023&M)<<10)+(1023&R)+65536):(N.push(M),U--):N.push(M);return N}function T(O){return d(O,function(M){var R="";return M>65535&&(R+=x((M-=65536)>>>10&1023|55296),M=56320|1023&M),R+=x(M)}).join("")}function w(O,M){return O+22+75*(O<26)-((M!=0)<<5)}function E(O,M,R){var N=0;for(O=R?m(O/700):O>>1,O+=m(O/M);O>455;N+=36)O=m(O/35);return m(N+36*O/(O+38))}function D(O){var M,R,N,U,W,I,G,F,A,H,$,X=[],Y=O.length,q=0,J=128,ne=72;for((R=O.lastIndexOf("-"))<0&&(R=0),N=0;N<R;++N)O.charCodeAt(N)>=128&&g("not-basic"),X.push(O.charCodeAt(N));for(U=R>0?R+1:0;U<Y;){for(W=q,I=1,G=36;U>=Y&&g("invalid-input"),((F=($=O.charCodeAt(U++))-48<10?$-22:$-65<26?$-65:$-97<26?$-97:36)>=36||F>m((l-q)/I))&&g("overflow"),q+=F*I,!(F<(A=G<=ne?1:G>=ne+26?26:G-ne));G+=36)I>m(l/(H=36-A))&&g("overflow"),I*=H;ne=E(q-W,M=X.length+1,W==0),m(q/M)>l-J&&g("overflow"),J+=m(q/M),q%=M,X.splice(q++,0,J)}return T(X)}function b(O){var M,R,N,U,W,I,G,F,A,H,$,X,Y,q,J,ne=[];for(X=(O=S(O)).length,M=128,R=0,W=72,I=0;I<X;++I)($=O[I])<128&&ne.push(x($));for(N=U=ne.length,U&&ne.push("-");N<X;){for(G=l,I=0;I<X;++I)($=O[I])>=M&&$<G&&(G=$);for(G-M>m((l-R)/(Y=N+1))&&g("overflow"),R+=(G-M)*Y,M=G,I=0;I<X;++I)if(($=O[I])<M&&++R>l&&g("overflow"),$==M){for(F=R,A=36;!(F<(H=A<=W?1:A>=W+26?26:A-W));A+=36)J=F-H,q=36-H,ne.push(x(w(H+J%q,0))),F=m(J/q);ne.push(x(w(F,0))),W=E(R,Y,N==U),R=0,++N}++R,++M}return ne.join("")}f={version:"1.4.1",ucs2:{decode:S,encode:T},decode:D,encode:b,toASCII:function(O){return C(O,function(M){return h.test(M)?"xn--"+b(M):M})},toUnicode:function(O){return C(O,function(M){return p.test(M)?D(M.slice(4).toLowerCase()):M})}},(s=function(){return f}.call(r,a,r,i))===void 0||(i.exports=s)})()}).call(this,a(246)(n),a(78))},function(n,r){n.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,get:function(){return a.i}}),a.webpackPolyfill=1),a}},function(n,r,a){n.exports={isString:function(i){return typeof i=="string"},isObject:function(i){return typeof i=="object"&&i!==null},isNull:function(i){return i===null},isNullOrUndefined:function(i){return i==null}}},function(n,r,a){r.decode=r.parse=a(249),r.encode=r.stringify=a(250)},function(n,r,a){function i(s,c){return Object.prototype.hasOwnProperty.call(s,c)}n.exports=function(s,c,u,f){c=c||"&",u=u||"=";var l={};if(typeof s!="string"||s.length===0)return l;var p=/\+/g;s=s.split(c);var h=1e3;f&&typeof f.maxKeys=="number"&&(h=f.maxKeys);var v=s.length;h>0&&v>h&&(v=h);for(var y=0;y<v;++y){var m,x,g,d,C=s[y].replace(p,"%20"),S=C.indexOf(u);S>=0?(m=C.substr(0,S),x=C.substr(S+1)):(m=C,x=""),g=decodeURIComponent(m),d=decodeURIComponent(x),i(l,g)?o(l[g])?l[g].push(d):l[g]=[l[g],d]:l[g]=d}return l};var o=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"}},function(n,r,a){var i=function(u){switch(typeof u){case"string":return u;case"boolean":return u?"true":"false";case"number":return isFinite(u)?u:"";default:return""}};n.exports=function(u,f,l,p){return f=f||"&",l=l||"=",u===null&&(u=void 0),typeof u=="object"?s(c(u),function(h){var v=encodeURIComponent(i(h))+l;return o(u[h])?s(u[h],function(y){return v+encodeURIComponent(i(y))}).join(f):v+encodeURIComponent(i(u[h]))}).join(f):p?encodeURIComponent(i(p))+l+encodeURIComponent(i(u)):""};var o=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function s(u,f){if(u.map)return u.map(f);for(var l=[],p=0;p<u.length;p++)l.push(f(u[p],p));return l}var c=Object.keys||function(u){var f=[];for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&f.push(l);return f}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(52);r.attr_setAnExistingAttributeValue=function(o,s){o._element===null?o._value=s:i.element_change(o,o._element,s)}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(108),o=a(30),s=a(52);r.tokenList_validationSteps=function(c,u){if(!o.dom_hasSupportedTokens(c._attribute._localName))throw new TypeError("There are no supported tokens defined for attribute name: '"+c._attribute._localName+"'.");return o.dom_getSupportedTokens(c._attribute._localName).has(u.toLowerCase())},r.tokenList_updateSteps=function(c){(c._element.hasAttribute(c._attribute._localName)||c._tokenSet.size!==0)&&s.element_setAnAttributeValue(c._element,c._attribute._localName,i.orderedSet_serialize(c._tokenSet))},r.tokenList_serializeSteps=function(c){return s.element_getAnAttributeValue(c._element,c._attribute._localName)}},function(n,r,a){var i=this&&this.__values||function(c){var u=typeof Symbol=="function"&&Symbol.iterator,f=u&&c[u],l=0;if(f)return f.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&l>=c.length&&(c=void 0),{value:c&&c[l++],done:!c}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(1);function s(c){return o.isBoolean(c)?c:c.capture||!1}r.eventTarget_flatten=s,r.eventTarget_flattenMore=function(c){var u=s(c),f=!1,l=!1;return o.isBoolean(c)||(f=c.once||!1,l=c.passive||!1),[u,l,f]},r.eventTarget_addEventListener=function(c,u){if(u.callback!==null){for(var f=0;f<c._eventListenerList.length;f++){var l=c._eventListenerList[f];if(l.type===u.type&&l.callback.handleEvent===u.callback.handleEvent&&l.capture===u.capture)return}c._eventListenerList.push(u)}},r.eventTarget_removeEventListener=function(c,u,f){u.removed=!0,c._eventListenerList.splice(f,1)},r.eventTarget_removeAllEventListeners=function(c){var u,f;try{for(var l=i(c._eventListenerList),p=l.next();!p.done;p=l.next())p.value.removed=!0}catch(h){u={error:h}}finally{try{p&&!p.done&&(f=l.return)&&f.call(l)}finally{if(u)throw u.error}}c._eventListenerList.length=0}},function(n,r,a){var i=this&&this.__values||function(c){var u=typeof Symbol=="function"&&Symbol.iterator,f=u&&c[u],l=0;if(f)return f.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&l>=c.length&&(c=void 0),{value:c&&c[l++],done:!c}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(1),s=a(29);r.parentNode_convertNodesIntoANode=function(c,u){for(var f,l,p=null,h=0;h<c.length;h++){var v=c[h];if(o.isString(v)){var y=s.create_text(u,v);c[h]=y}}if(c.length===1)p=c[0];else{var m=p=s.create_documentFragment(u);try{for(var x=i(c),g=x.next();!g.done;g=x.next())v=g.value,m.appendChild(v)}catch(d){f={error:d}}finally{try{g&&!g.done&&(l=x.return)&&l.call(x)}finally{if(f)throw f.error}}}return p}},function(n,r,a){var i=this&&this.__values||function(w){var E=typeof Symbol=="function"&&Symbol.iterator,D=E&&w[E],b=0;if(D)return D.call(w);if(w&&typeof w.length=="number")return{next:function(){return w&&b>=w.length&&(w=void 0),{value:w&&w[b++],done:!w}}};throw new TypeError(E?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(w,E){var D=typeof Symbol=="function"&&w[Symbol.iterator];if(!D)return w;var b,O,M=D.call(w),R=[];try{for(;(E===void 0||E-- >0)&&!(b=M.next()).done;)R.push(b.value)}catch(N){O={error:N}}finally{try{b&&!b.done&&(D=M.return)&&D.call(M)}finally{if(O)throw O.error}}return R},s=this&&this.__spread||function(){for(var w=[],E=0;E<arguments.length;E++)w=w.concat(o(arguments[E]));return w};Object.defineProperty(r,"__esModule",{value:!0});var c=a(2),u=a(9),f=a(3),l=a(29),p=a(17),h=a(175),v=a(107),y=a(176),m=a(37),x=a(177);function g(w){return w._startNode===w._endNode&&w._startOffset===w._endOffset}function d(w){return p.tree_rootNode(w._startNode)}function C(w,E){return p.tree_rootNode(w)===d(E)&&h.boundaryPoint_position([w,0],E._start)===c.BoundaryPosition.After&&h.boundaryPoint_position([w,p.tree_nodeLength(w)],E._end)===c.BoundaryPosition.Before}function S(w,E){var D=p.tree_isAncestorOf(E._startNode,w,!0),b=p.tree_isAncestorOf(E._endNode,w,!0);return D&&!b||!D&&b}function T(w){var E,D,b,O,M,R,N=l.create_documentFragment(w._startNode._nodeDocument);if(g(w))return N;var U=w._startNode,W=w._startOffset,I=w._endNode,G=w._endOffset;if(U===I&&f.Guard.isCharacterDataNode(U))return(k=y.node_clone(U))._data=v.characterData_substringData(U,W,G-W),m.mutation_append(k,N),v.characterData_replaceData(U,W,G-W,""),N;for(var F=U;!p.tree_isAncestorOf(I,F,!0);){if(F._parent===null)throw new Error("Parent node  is null.");F=F._parent}var A=null;if(!p.tree_isAncestorOf(I,U,!0))try{for(var H=i(F._children),$=H.next();!$.done;$=H.next())if(S(J=$.value,w)){A=J;break}}catch(re){E={error:re}}finally{try{$&&!$.done&&(D=H.return)&&D.call(H)}finally{if(E)throw E.error}}var X=null;if(!p.tree_isAncestorOf(U,I,!0))for(var Y=s(F._children),q=Y.length-1;q>0;q--){var J;if(S(J=Y[q],w)){X=J;break}}var ne,Q,te=[];try{for(var L=i(F._children),_=L.next();!_.done;_=L.next())if(C(Z=_.value,w)){if(f.Guard.isDocumentTypeNode(Z))throw new u.HierarchyRequestError;te.push(Z)}}catch(re){b={error:re}}finally{try{_&&!_.done&&(O=L.return)&&O.call(L)}finally{if(b)throw b.error}}if(p.tree_isAncestorOf(I,U,!0))ne=U,Q=W;else{for(var V=U;V._parent!==null&&!p.tree_isAncestorOf(I,V._parent);)V=V._parent;if(V._parent===null)throw new Error("Parent node is null.");ne=V._parent,Q=1+p.tree_index(V)}if(f.Guard.isCharacterDataNode(A))(k=y.node_clone(U))._data=v.characterData_substringData(U,W,p.tree_nodeLength(U)-W),m.mutation_append(k,N),v.characterData_replaceData(U,W,p.tree_nodeLength(U)-W,"");else if(A!==null){var k=y.node_clone(A);m.mutation_append(k,N);var P=T(l.create_range([U,W],[A,p.tree_nodeLength(A)]));m.mutation_append(P,k)}try{for(var j=i(te),z=j.next();!z.done;z=j.next()){var Z=z.value;m.mutation_append(Z,N)}}catch(re){M={error:re}}finally{try{z&&!z.done&&(R=j.return)&&R.call(j)}finally{if(M)throw M.error}}return f.Guard.isCharacterDataNode(X)?((k=y.node_clone(I))._data=v.characterData_substringData(I,0,G),m.mutation_append(k,N),v.characterData_replaceData(I,0,G,"")):X!==null&&(k=y.node_clone(X),m.mutation_append(k,N),P=T(l.create_range([X,0],[I,G])),m.mutation_append(P,k)),w._start=[ne,Q],w._end=[ne,Q],N}r.range_collapsed=g,r.range_root=d,r.range_isContained=C,r.range_isPartiallyContained=S,r.range_setTheStart=function(w,E,D){if(f.Guard.isDocumentTypeNode(E))throw new u.InvalidNodeTypeError;if(D>p.tree_nodeLength(E))throw new u.IndexSizeError;var b=[E,D];d(w)===p.tree_rootNode(E)&&h.boundaryPoint_position(b,w._end)!==c.BoundaryPosition.After||(w._end=b),w._start=b},r.range_setTheEnd=function(w,E,D){if(f.Guard.isDocumentTypeNode(E))throw new u.InvalidNodeTypeError;if(D>p.tree_nodeLength(E))throw new u.IndexSizeError;var b=[E,D];d(w)===p.tree_rootNode(E)&&h.boundaryPoint_position(b,w._start)!==c.BoundaryPosition.Before||(w._start=b),w._end=b},r.range_select=function(w,E){var D=w._parent;if(D===null)throw new u.InvalidNodeTypeError;var b=p.tree_index(w);E._start=[D,b],E._end=[D,b+1]},r.range_extract=T,r.range_cloneTheContents=function w(E){var D,b,O,M,R,N,U=l.create_documentFragment(E._startNode._nodeDocument);if(g(E))return U;var W=E._startNode,I=E._startOffset,G=E._endNode,F=E._endOffset;W===G&&f.Guard.isCharacterDataNode(W)&&((_=y.node_clone(W))._data=v.characterData_substringData(W,I,F-I),m.mutation_append(_,U));for(var A=W;!p.tree_isAncestorOf(G,A,!0);){if(A._parent===null)throw new Error("Parent node  is null.");A=A._parent}var H=null;if(!p.tree_isAncestorOf(G,W,!0))try{for(var $=i(A._children),X=$.next();!X.done;X=$.next())if(S(ne=X.value,E)){H=ne;break}}catch(z){D={error:z}}finally{try{X&&!X.done&&(b=$.return)&&b.call($)}finally{if(D)throw D.error}}var Y=null;if(!p.tree_isAncestorOf(W,G,!0))for(var q=s(A._children),J=q.length-1;J>0;J--){var ne;if(S(ne=q[J],E)){Y=ne;break}}var Q=[];try{for(var te=i(A._children),L=te.next();!L.done;L=te.next())if(C(j=L.value,E)){if(f.Guard.isDocumentTypeNode(j))throw new u.HierarchyRequestError;Q.push(j)}}catch(z){O={error:z}}finally{try{L&&!L.done&&(M=te.return)&&M.call(te)}finally{if(O)throw O.error}}if(f.Guard.isCharacterDataNode(H))(_=y.node_clone(W))._data=v.characterData_substringData(W,I,p.tree_nodeLength(W)-I),m.mutation_append(_,U);else if(H!==null){var _=y.node_clone(H);m.mutation_append(_,U);var V=w(l.create_range([W,I],[H,p.tree_nodeLength(H)]));m.mutation_append(V,_)}try{for(var k=i(Q),P=k.next();!P.done;P=k.next()){var j=P.value,_=y.node_clone(j);m.mutation_append(_,U)}}catch(z){R={error:z}}finally{try{P&&!P.done&&(N=k.return)&&N.call(k)}finally{if(R)throw R.error}}return f.Guard.isCharacterDataNode(Y)?((_=y.node_clone(G))._data=v.characterData_substringData(G,0,F),m.mutation_append(_,U)):Y!==null&&(_=y.node_clone(Y),U.append(_),V=T(l.create_range([Y,0],[G,F])),m.mutation_append(V,_)),U},r.range_insert=function(w,E){var D,b;if(f.Guard.isProcessingInstructionNode(E._startNode)||f.Guard.isCommentNode(E._startNode)||f.Guard.isTextNode(E._startNode)&&E._startNode._parent===null||E._startNode===w)throw new u.HierarchyRequestError;var O,M=null;if(f.Guard.isTextNode(E._startNode))M=E._startNode;else{var R=0;try{for(var N=i(E._startNode._children),U=N.next();!U.done;U=N.next()){var W=U.value;if(R===E._startOffset){M=W;break}R++}}catch(G){D={error:G}}finally{try{U&&!U.done&&(b=N.return)&&b.call(N)}finally{if(D)throw D.error}}}if(M===null)O=E._startNode;else{if(M._parent===null)throw new Error("Parent node is null.");O=M._parent}m.mutation_ensurePreInsertionValidity(w,O,M),f.Guard.isTextNode(E._startNode)&&(M=x.text_split(E._startNode,E._startOffset)),w===M&&(M=w._nextSibling),w._parent!==null&&m.mutation_remove(w,w._parent);var I=M===null?p.tree_nodeLength(O):p.tree_index(M);f.Guard.isDocumentFragmentNode(w)?I+=p.tree_nodeLength(w):I++,m.mutation_preInsert(w,O,M),g(E)&&(E._end=[O,I])},r.range_getContainedNodes=function(w){var E;return(E={})[Symbol.iterator]=function(){var D=w.commonAncestorContainer,b=p.tree_getFirstDescendantNode(D);return{next:function(){for(;b&&!C(b,w);)b=p.tree_getNextDescendantNode(D,b);if(b===null)return{done:!0,value:null};var O={done:!1,value:b};return b=p.tree_getNextDescendantNode(D,b),O}}},E},r.range_getPartiallyContainedNodes=function(w){var E;return(E={})[Symbol.iterator]=function(){var D=w.commonAncestorContainer,b=p.tree_getFirstDescendantNode(D);return{next:function(){for(;b&&!S(b,w);)b=p.tree_getNextDescendantNode(D,b);if(b===null)return{done:!0,value:null};var O={done:!1,value:b};return b=p.tree_getNextDescendantNode(D,b),O}}},E}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(9);r.selectors_scopeMatchASelectorsString=function(o,s){throw new i.NotSupportedError}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(2),o=a(105);r.treeWalker_traverseChildren=function(s,c){for(var u=c?s._current._firstChild:s._current._lastChild;u!==null;){var f=o.traversal_filter(s,u);if(f===i.FilterResult.Accept)return s._current=u,u;if(f===i.FilterResult.Skip){var l=c?u._firstChild:u._lastChild;if(l!==null){u=l;continue}}for(;u!==null;){var p=c?u._nextSibling:u._previousSibling;if(p!==null){u=p;break}var h=u._parent;if(h===null||h===s._root||h===s._current)return null;u=h}}return null},r.treeWalker_traverseSiblings=function(s,c){var u=s._current;if(u===s._root)return null;for(;;){for(var f=c?u._nextSibling:u._previousSibling;f!==null;){u=f;var l=o.traversal_filter(s,u);if(l===i.FilterResult.Accept)return s._current=u,u;f=c?u._firstChild:u._lastChild,l!==i.FilterResult.Reject&&f!==null||(f=c?u._nextSibling:u._previousSibling)}if((u=u._parent)===null||u===s._root||o.traversal_filter(s,u)===i.FilterResult.Accept)return null}}},function(n,r,a){a(89),a(74);var i,o=this&&this.__extends||(i=function(p,h){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,y){v.__proto__=y}||function(v,y){for(var m in y)y.hasOwnProperty(m)&&(v[m]=y[m])})(p,h)},function(p,h){function v(){this.constructor=p}i(p,h),p.prototype=h===null?Object.create(h):(v.prototype=h.prototype,new v)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(1),c=a(2),u=a(50),f=a(3),l=function(p){function h(v,y){var m=p.call(this,v)||this;return m._indentation={},m._lengthToLastNewline=0,m._writerOptions=s.applyDefaults(y,{wellFormed:!1,headless:!1,prettyPrint:!1,indent:"  ",newline:`
`,offset:0,width:0,allowEmptyTags:!1,indentTextOnlyNodes:!1,spaceBeforeSlash:!1}),m}return o(h,p),h.prototype.serialize=function(v){return this._refs={suppressPretty:!1,emptyNode:!1,markup:""},v.nodeType!==c.NodeType.Document||this._writerOptions.headless||this.declaration(this._builderOptions.version,this._builderOptions.encoding,this._builderOptions.standalone),this.serializeNode(v,this._writerOptions.wellFormed),this._writerOptions.prettyPrint&&this._refs.markup.slice(-this._writerOptions.newline.length)===this._writerOptions.newline&&(this._refs.markup=this._refs.markup.slice(0,-this._writerOptions.newline.length)),this._refs.markup},h.prototype.declaration=function(v,y,m){this._beginLine(),this._refs.markup+='<?xml version="'+v+'"',y!==void 0&&(this._refs.markup+=' encoding="'+y+'"'),m!==void 0&&(this._refs.markup+=' standalone="'+(m?"yes":"no")+'"'),this._refs.markup+="?>",this._endLine()},h.prototype.docType=function(v,y,m){this._beginLine(),this._refs.markup+=y&&m?"<!DOCTYPE "+v+' PUBLIC "'+y+'" "'+m+'">':y?"<!DOCTYPE "+v+' PUBLIC "'+y+'">':m?"<!DOCTYPE "+v+' SYSTEM "'+m+'">':"<!DOCTYPE "+v+">",this._endLine()},h.prototype.openTagBegin=function(v){this._beginLine(),this._refs.markup+="<"+v},h.prototype.openTagEnd=function(v,y,m){if(this._refs.suppressPretty=!1,this._refs.emptyNode=!1,this._writerOptions.prettyPrint&&!y&&!m){for(var x=!0,g=!0,d=this.currentNode.firstChild,C=0,S=0;d;){if(f.Guard.isExclusiveTextNode(d))S++;else{if(!f.Guard.isCDATASectionNode(d)){x=!1,g=!1;break}C++}d.data!==""&&(g=!1),d=d.nextSibling}this._refs.suppressPretty=!this._writerOptions.indentTextOnlyNodes&&x&&(C<=1&&S===0||C===0),this._refs.emptyNode=g}(m||y||this._refs.emptyNode)&&this._writerOptions.allowEmptyTags?this._refs.markup+="></"+v+">":this._refs.markup+=m?" />":y||this._refs.emptyNode?this._writerOptions.spaceBeforeSlash?" />":"/>":">",this._endLine()},h.prototype.closeTag=function(v){this._refs.emptyNode||(this._beginLine(),this._refs.markup+="</"+v+">"),this._refs.suppressPretty=!1,this._refs.emptyNode=!1,this._endLine()},h.prototype.attribute=function(v,y){var m=v+'="'+y+'"';this._writerOptions.prettyPrint&&this._writerOptions.width>0&&this._refs.markup.length-this._lengthToLastNewline+1+m.length>this._writerOptions.width?(this._endLine(),this._beginLine(),this._refs.markup+=this._indent(1)+m):this._refs.markup+=" "+m},h.prototype.text=function(v){v!==""&&(this._beginLine(),this._refs.markup+=v,this._endLine())},h.prototype.cdata=function(v){v!==""&&(this._beginLine(),this._refs.markup+="<![CDATA["+v+"]]>",this._endLine())},h.prototype.comment=function(v){this._beginLine(),this._refs.markup+="<!--"+v+"-->",this._endLine()},h.prototype.instruction=function(v,y){this._beginLine(),this._refs.markup+="<?"+(y===""?v:v+" "+y)+"?>",this._endLine()},h.prototype._beginLine=function(){this._writerOptions.prettyPrint&&!this._refs.suppressPretty&&(this._refs.markup+=this._indent(this._writerOptions.offset+this.level))},h.prototype._endLine=function(){this._writerOptions.prettyPrint&&!this._refs.suppressPretty&&(this._refs.markup+=this._writerOptions.newline,this._lengthToLastNewline=this._refs.markup.length)},h.prototype._indent=function(v){if(v<=0)return"";if(this._indentation[v]!==void 0)return this._indentation[v];var y=this._writerOptions.indent.repeat(v);return this._indentation[v]=y,y},h}(u.BaseWriter);r.XMLWriter=l},function(n,r,a){var i=a(47),o=a(35);n.exports="".repeat||function(s){var c=String(o(this)),u="",f=i(s);if(f<0||f==1/0)throw RangeError("Wrong number of repetitions");for(;f>0;(f>>>=1)&&(c+=c))1&f&&(u+=c);return u}},function(n,r,a){a(31),a(32),a(33),a(19),a(178),a(20),a(22),a(23);var i,o=this&&this.__extends||(i=function(l,p){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(l,p)},function(l,p){function h(){this.constructor=l}i(l,p),l.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)}),s=this&&this.__values||function(l){var p=typeof Symbol=="function"&&Symbol.iterator,h=p&&l[p],v=0;if(h)return h.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&v>=l.length&&(l=void 0),{value:l&&l[v++],done:!l}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var c=a(67),u=a(1),f=function(l){function p(h,v){var y=l.call(this,h)||this;return y._writerOptions=u.applyDefaults(v,{wellFormed:!1,prettyPrint:!1,indent:"  ",newline:`
`,offset:0,group:!1,verbose:!1}),y}return o(p,l),p.prototype.serialize=function(h){var v=u.applyDefaults(this._writerOptions,{format:"object",wellFormed:!1}),y=new c.ObjectWriter(this._builderOptions,v).serialize(h);return this._beginLine(this._writerOptions,0)+this._convertObject(y,this._writerOptions)},p.prototype._convertObject=function(h,v,y){var m,x,g=this;y===void 0&&(y=0);var d="",C=this._isLeafNode(h);if(u.isArray(h)){d+="[";var S=h.length,T=0;try{for(var w=s(h),E=w.next();!E.done;E=w.next()){var D=E.value;d+=this._endLine(v,y+1)+this._beginLine(v,y+1)+this._convertObject(D,v,y+1),T<S-1&&(d+=","),T++}}catch(M){m={error:M}}finally{try{E&&!E.done&&(x=w.return)&&x.call(w)}finally{if(m)throw m.error}}d+=this._endLine(v,y)+this._beginLine(v,y),d+="]"}else if(u.isObject(h)){d+="{";var b=u.objectLength(h),O=0;u.forEachObject(h,function(M,R){C&&v.prettyPrint?d+=" ":d+=g._endLine(v,y+1)+g._beginLine(v,y+1),d+=g._key(M),v.prettyPrint&&(d+=" "),d+=g._convertObject(R,v,y+1),O<b-1&&(d+=","),O++},this),C&&v.prettyPrint?d+=" ":d+=this._endLine(v,y)+this._beginLine(v,y),d+="}"}else d+=this._val(h);return d},p.prototype._beginLine=function(h,v){if(!h.prettyPrint)return"";var y=h.offset+v+1;return y>0?new Array(y).join(h.indent):""},p.prototype._endLine=function(h,v){return h.prettyPrint?h.newline:""},p.prototype._key=function(h){return'"'+h+'":'},p.prototype._val=function(h){return JSON.stringify(h)},p.prototype._isLeafNode=function(h){return this._descendantCount(h)<=1},p.prototype._descendantCount=function(h,v){var y=this;return v===void 0&&(v=0),u.isArray(h)?u.forEachArray(h,function(m){return v+=y._descendantCount(m,v)},this):u.isObject(h)?u.forEachObject(h,function(m,x){return v+=y._descendantCount(x,v)},this):v++,v},p}(a(50).BaseWriter);r.JSONWriter=f},function(n,r,a){a(31),a(32),a(33),a(19),a(178),a(89),a(20),a(22),a(23);var i,o=this&&this.__extends||(i=function(l,p){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(l,p)},function(l,p){function h(){this.constructor=l}i(l,p),l.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)}),s=this&&this.__values||function(l){var p=typeof Symbol=="function"&&Symbol.iterator,h=p&&l[p],v=0;if(h)return h.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&v>=l.length&&(l=void 0),{value:l&&l[v++],done:!l}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var c=a(67),u=a(1),f=function(l){function p(h,v){var y=l.call(this,h)||this;if(y._writerOptions=u.applyDefaults(v,{wellFormed:!1,indent:"  ",newline:`
`,offset:0,group:!1,verbose:!1}),y._writerOptions.indent.length<2)throw new Error("YAML indententation string must be at least two characters long.");if(y._writerOptions.offset<0)throw new Error("YAML offset should be zero or a positive number.");return y}return o(p,l),p.prototype.serialize=function(h){var v=u.applyDefaults(this._writerOptions,{format:"object",wellFormed:!1}),y=new c.ObjectWriter(this._builderOptions,v).serialize(h),m=this._beginLine(this._writerOptions,0)+"---"+this._endLine(this._writerOptions)+this._convertObject(y,this._writerOptions,0);return m.slice(-this._writerOptions.newline.length)===this._writerOptions.newline&&(m=m.slice(0,-this._writerOptions.newline.length)),m},p.prototype._convertObject=function(h,v,y,m){var x,g,d=this;m===void 0&&(m=!1);var C="";if(u.isArray(h))try{for(var S=s(h),T=S.next();!T.done;T=S.next()){var w=T.value;C+=this._beginLine(v,y,!0),u.isObject(w)?u.isEmpty(w)?C+='""'+this._endLine(v):C+=this._convertObject(w,v,y,!0):C+=this._val(w)+this._endLine(v)}}catch(E){x={error:E}}finally{try{T&&!T.done&&(g=S.return)&&g.call(S)}finally{if(x)throw x.error}}else u.forEachObject(h,function(E,D){m?(C+=d._key(E),m=!1):C+=d._beginLine(v,y)+d._key(E),u.isObject(D)?u.isEmpty(D)?C+=' ""'+d._endLine(v):C+=d._endLine(v)+d._convertObject(D,v,y+1):C+=" "+d._val(D)+d._endLine(v)},this);return C},p.prototype._beginLine=function(h,v,y){y===void 0&&(y=!1);var m=h.offset+v+1,x=new Array(m).join(h.indent);return y?x.substr(0,x.length-2)+"-"+x.substr(-1,1):x},p.prototype._endLine=function(h){return h.newline},p.prototype._key=function(h){return'"'+h+'":'},p.prototype._val=function(h){return JSON.stringify(h)},p}(a(50).BaseWriter);r.YAMLWriter=f},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0}),a(110).dom.setFeatures(!0);var i=a(110);r.DOMImplementation=i.DOMImplementation;var o=a(271);r.DOMParser=o.DOMParser;var s=a(274);r.XMLSerializer=s.XMLSerializer},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(3),o=a(0),s=function(){function c(){}return c.prototype.before=function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];var l=i.Cast.asNode(this),p=l._parent;if(p!==null){for(var h=l._previousSibling,v=!0;v&&h;){v=!1;for(var y=0;y<u.length;y++){var m=u[y];if(m===h){h=h._previousSibling,v=!0;break}}}var x=o.parentNode_convertNodesIntoANode(u,l._nodeDocument);h=h===null?p._firstChild:h._nextSibling,o.mutation_preInsert(x,p,h)}},c.prototype.after=function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];var l=i.Cast.asNode(this),p=l._parent;if(p){for(var h=l._nextSibling,v=!0;v&&h;){v=!1;for(var y=0;y<u.length;y++){var m=u[y];if(m===h){h=h._nextSibling,v=!0;break}}}var x=o.parentNode_convertNodesIntoANode(u,l._nodeDocument);o.mutation_preInsert(x,p,h)}},c.prototype.replaceWith=function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];var l=i.Cast.asNode(this),p=l._parent;if(p){for(var h=l._nextSibling,v=!0;v&&h;){v=!1;for(var y=0;y<u.length;y++){var m=u[y];if(m===h){h=h._nextSibling,v=!0;break}}}var x=o.parentNode_convertNodesIntoANode(u,l._nodeDocument);l._parent===p?o.mutation_replace(l,x,p):o.mutation_preInsert(x,p,h)}},c.prototype.remove=function(){var u=i.Cast.asNode(this),f=u._parent;f&&o.mutation_remove(u,f)},c}();r.ChildNodeImpl=s},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=function(){};r.DocumentOrShadowRootImpl=i},function(n,r,a){var i=this&&this.__values||function(f){var l=typeof Symbol=="function"&&Symbol.iterator,p=l&&f[l],h=0;if(p)return p.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&h>=f.length&&(f=void 0),{value:f&&f[h++],done:!f}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(6),s=a(3),c=a(7),u=function(){function f(l){this._nodeList=[],this._recordQueue=[],this._callback=l;var p=o.dom.window;c.set.append(p._mutationObservers,this)}return f.prototype.observe=function(l,p){var h,v;if((p=p||{childList:!1,subtree:!1}).attributeOldValue===void 0&&p.attributeFilter===void 0||p.attributes!==void 0||(p.attributes=!0),p.characterDataOldValue!==void 0&&p.characterData===void 0&&(p.characterData=!0),!p.childList&&!p.attributes&&!p.characterData)throw new TypeError;if(p.attributeOldValue&&!p.attributes)throw new TypeError;if(p.attributeFilter!==void 0&&!p.attributes)throw new TypeError;if(p.characterDataOldValue&&!p.characterData)throw new TypeError;var y=!1,m=p,x=function(S){var T,w;if(S.observer===g){y=!0;try{for(var E=(T=void 0,i(g._nodeList)),D=E.next();!D.done;D=E.next()){var b=D.value;c.list.remove(b._registeredObserverList,function(O){return s.Guard.isTransientRegisteredObserver(O)&&O.source===S})}}catch(O){T={error:O}}finally{try{D&&!D.done&&(w=E.return)&&w.call(E)}finally{if(T)throw T.error}}S.options=m}},g=this;try{for(var d=i(l._registeredObserverList),C=d.next();!C.done;C=d.next())x(C.value)}catch(S){h={error:S}}finally{try{C&&!C.done&&(v=d.return)&&v.call(d)}finally{if(h)throw h.error}}y||(l._registeredObserverList.push({observer:this,options:p}),this._nodeList.push(l))},f.prototype.disconnect=function(){var l,p,h=this;try{for(var v=i(this._nodeList),y=v.next();!y.done;y=v.next()){var m=y.value;c.list.remove(m._registeredObserverList,function(x){return x.observer===h})}}catch(x){l={error:x}}finally{try{y&&!y.done&&(p=v.return)&&p.call(v)}finally{if(l)throw l.error}}this._recordQueue=[]},f.prototype.takeRecords=function(){var l=this._recordQueue;return this._recordQueue=[],l},f}();r.MutationObserverImpl=u},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(3),o=function(){function s(){}return Object.defineProperty(s.prototype,"previousElementSibling",{get:function(){for(var c=i.Cast.asNode(this)._previousSibling;c;){if(i.Guard.isElementNode(c))return c;c=c._previousSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"nextElementSibling",{get:function(){for(var c=i.Cast.asNode(this)._nextSibling;c;){if(i.Guard.isElementNode(c))return c;c=c._nextSibling}return null},enumerable:!0,configurable:!0}),s}();r.NonDocumentTypeChildNodeImpl=o},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(3),o=a(0),s=function(){function c(){}return c.prototype.getElementById=function(u){for(var f=o.tree_getFirstDescendantNode(i.Cast.asNode(this),!1,!1,function(l){return i.Guard.isElementNode(l)});f!==null;){if(f._uniqueIdentifier===u)return f;f=o.tree_getNextDescendantNode(i.Cast.asNode(this),f,!1,!1,function(l){return i.Guard.isElementNode(l)})}return null},c}();r.NonElementParentNodeImpl=s},function(n,r,a){var i=this&&this.__values||function(u){var f=typeof Symbol=="function"&&Symbol.iterator,l=f&&u[f],p=0;if(l)return l.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&p>=u.length&&(u=void 0),{value:u&&u[p++],done:!u}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(3),s=a(0),c=function(){function u(){}return Object.defineProperty(u.prototype,"children",{get:function(){return s.create_htmlCollection(o.Cast.asNode(this))},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"firstElementChild",{get:function(){for(var f=o.Cast.asNode(this)._firstChild;f;){if(o.Guard.isElementNode(f))return f;f=f._nextSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"lastElementChild",{get:function(){for(var f=o.Cast.asNode(this)._lastChild;f;){if(o.Guard.isElementNode(f))return f;f=f._previousSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"childElementCount",{get:function(){var f,l,p=0;try{for(var h=i(o.Cast.asNode(this)._children),v=h.next();!v.done;v=h.next()){var y=v.value;o.Guard.isElementNode(y)&&p++}}catch(m){f={error:m}}finally{try{v&&!v.done&&(l=h.return)&&l.call(h)}finally{if(f)throw f.error}}return p},enumerable:!0,configurable:!0}),u.prototype.prepend=function(){for(var f=[],l=0;l<arguments.length;l++)f[l]=arguments[l];var p=o.Cast.asNode(this),h=s.parentNode_convertNodesIntoANode(f,p._nodeDocument);s.mutation_preInsert(h,p,p._firstChild)},u.prototype.append=function(){for(var f=[],l=0;l<arguments.length;l++)f[l]=arguments[l];var p=o.Cast.asNode(this),h=s.parentNode_convertNodesIntoANode(f,p._nodeDocument);s.mutation_append(h,p)},u.prototype.querySelector=function(f){var l=o.Cast.asNode(this),p=s.selectors_scopeMatchASelectorsString(f,l);return p.length===0?null:p[0]},u.prototype.querySelectorAll=function(f){var l=o.Cast.asNode(this),p=s.selectors_scopeMatchASelectorsString(f,l);return s.create_nodeListStatic(l,p)},u}();r.ParentNodeImpl=c},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(0),o=function(){function s(){}return Object.defineProperty(s.prototype,"_name",{get:function(){return this.__name||""},set:function(c){this.__name=c},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"_assignedSlot",{get:function(){return this.__assignedSlot||null},set:function(c){this.__assignedSlot=c},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"assignedSlot",{get:function(){return i.shadowTree_findASlot(this,!0)},enumerable:!0,configurable:!0}),s}();r.SlotableImpl=o},function(n,r,a){var i,o=this&&this.__extends||(i=function(l,p){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(l,p)},function(l,p){function h(){this.constructor=l}i(l,p),l.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(102),c=a(9),u=a(3),f=function(l){function p(h){var v=l.call(this)||this;if(u.Guard.isDocumentTypeNode(h.startContainer)||u.Guard.isAttrNode(h.startContainer)||u.Guard.isDocumentTypeNode(h.endContainer)||u.Guard.isAttrNode(h.endContainer))throw new c.InvalidNodeTypeError;return v._start=[h.startContainer,h.startOffset],v._end=[h.endContainer,h.endOffset],v}return o(p,l),p}(s.AbstractRangeImpl);r.StaticRangeImpl=f},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(272);r.DOMParser=i.DOMParserImpl},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(0),o=a(273),s=function(){function c(){}return c.prototype.parseFromString=function(u,f){if(f==="text/html")throw new Error("HTML parser not implemented.");try{return(l=new o.XMLParserImpl().parse(u))._contentType=f,l}catch(y){var l,p="http://www.mozilla.org/newlayout/xml/parsererror.xml",h=(l=i.create_xmlDocument()).createElementNS(p,"parsererror"),v=l.createElementNS(p,"error");return v.setAttribute("message",y.message),h.appendChild(v),l.appendChild(h),l}},c}();r.DOMParserImpl=s},function(n,r,a){var i=this&&this.__read||function(h,v){var y=typeof Symbol=="function"&&h[Symbol.iterator];if(!y)return h;var m,x,g=y.call(h),d=[];try{for(;(v===void 0||v-- >0)&&!(m=g.next()).done;)d.push(m.value)}catch(C){x={error:C}}finally{try{m&&!m.done&&(y=g.return)&&y.call(g)}finally{if(x)throw x.error}}return d},o=this&&this.__values||function(h){var v=typeof Symbol=="function"&&Symbol.iterator,y=v&&h[v],m=0;if(y)return y.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&m>=h.length&&(h=void 0),{value:h&&h[m++],done:!h}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var s=a(180),c=a(111),u=a(7),f=a(0),l=a(69),p=function(){function h(){}return h.prototype.parse=function(v){for(var y,m,x,g,d=new s.XMLStringLexer(v,{skipWhitespaceOnlyText:!0}),C=f.create_document(),S=C,T=d.nextToken();T.type!==c.TokenType.EOF;){switch(T.type){case c.TokenType.Declaration:var w=T;if(w.version!=="1.0")throw new Error("Invalid xml version: "+w.version);break;case c.TokenType.DocType:var E=T;if(!f.xml_isPubidChar(E.pubId))throw new Error("DocType public identifier does not match PubidChar construct.");if(!f.xml_isLegalChar(E.sysId)||E.sysId.indexOf('"')!==-1&&E.sysId.indexOf("'")!==-1)throw new Error("DocType system identifier contains invalid characters.");S.appendChild(C.implementation.createDocumentType(E.name,E.pubId,E.sysId));break;case c.TokenType.CDATA:var D=T;if(!f.xml_isLegalChar(D.data)||D.data.indexOf("]]>")!==-1)throw new Error("CDATA contains invalid characters.");S.appendChild(C.createCDATASection(D.data));break;case c.TokenType.Comment:var b=T;if(!f.xml_isLegalChar(b.data)||b.data.indexOf("--")!==-1||b.data.endsWith("-"))throw new Error("Comment data contains invalid characters.");S.appendChild(C.createComment(b.data));break;case c.TokenType.PI:var O=T;if(O.target.indexOf(":")!==-1||/^xml$/i.test(O.target))throw new Error("Processing instruction target contains invalid characters.");if(!f.xml_isLegalChar(O.data)||O.data.indexOf("?>")!==-1)throw new Error("Processing instruction data contains invalid characters.");S.appendChild(C.createProcessingInstruction(O.target,O.data));break;case c.TokenType.Text:var M=T;if(!f.xml_isLegalChar(M.data))throw new Error("Text data contains invalid characters.");S.appendChild(C.createTextNode(this._decodeText(M.data)));break;case c.TokenType.Element:var R=T,N=i(f.namespace_extractQName(R.name),2),U=N[0],W=N[1];if(W.indexOf(":")!==-1||!f.xml_isName(W))throw new Error("Node local name contains invalid characters.");if(U==="xmlns")throw new Error("An element cannot have the 'xmlns' prefix.");var I=S.lookupNamespaceURI(U),G={};try{for(var F=(y=void 0,o(R.attributes)),A=F.next();!A.done;A=F.next()){var H=i(A.value,2),$=H[0],X=H[1];if($==="xmlns")I=X;else{var Y=i(f.namespace_extractQName($),2),q=Y[0],J=Y[1];q==="xmlns"&&(J===U&&(I=X),G[J]=X)}}}catch(P){y={error:P}}finally{try{A&&!A.done&&(m=F.return)&&m.call(F)}finally{if(y)throw y.error}}var ne=I!==null?C.createElementNS(I,R.name):C.createElement(R.name);S.appendChild(ne);var Q=new l.LocalNameSet;try{for(var te=(x=void 0,o(R.attributes)),L=te.next();!L.done;L=te.next()){var _=i(L.value,2),V=($=_[0],X=_[1],i(f.namespace_extractQName($),2)),k=(q=V[0],J=V[1],null);if(q==="xmlns"||q===null&&J==="xmlns"?k=u.namespace.XMLNS:(k=ne.lookupNamespaceURI(q))!==null&&ne.isDefaultNamespace(k)?k=null:k===null&&q!==null&&(k=G[q]||null),Q.has(k,J))throw new Error("Element contains duplicate attributes.");if(Q.set(k,J),k===u.namespace.XMLNS&&X===u.namespace.XMLNS)throw new Error("XMLNS namespace is reserved.");if(J.indexOf(":")!==-1||!f.xml_isName(J))throw new Error("Attribute local name contains invalid characters.");if(q==="xmlns"&&X==="")throw new Error("Empty XML namespace is not allowed.");k!==null?ne.setAttributeNS(k,$,this._decodeAttributeValue(X)):ne.setAttribute($,this._decodeAttributeValue(X))}}catch(P){x={error:P}}finally{try{L&&!L.done&&(g=te.return)&&g.call(te)}finally{if(x)throw x.error}}R.selfClosing||(S=ne);break;case c.TokenType.ClosingTag:if(T.name!==S.nodeName)throw new Error("Closing tag name does not match opening tag name.");S._parent&&(S=S._parent)}T=d.nextToken()}return C},h.prototype._decodeText=function(v){return v==null?v:v.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},h.prototype._decodeAttributeValue=function(v){return v==null?v:v.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},h}();r.XMLParserImpl=p},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(275);r.XMLSerializer=i.XMLSerializerImpl},function(n,r,a){var i=this&&this.__values||function(h){var v=typeof Symbol=="function"&&Symbol.iterator,y=v&&h[v],m=0;if(y)return y.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&m>=h.length&&(h=void 0),{value:h&&h[m++],done:!h}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var o=a(2),s=a(69),c=a(95),u=a(9),f=a(7),l=a(0),p=function(){function h(){}return h.prototype.serializeToString=function(v){return this._xmlSerialization(v,!1)},h.prototype._xmlSerialization=function(v,y){if(v._nodeDocument===void 0||v._nodeDocument._hasNamespaces){var m=new c.NamespacePrefixMap;m.set("xml",f.namespace.XML);try{return this._serializeNodeNS(v,null,m,{value:1},y)}catch{throw new u.InvalidStateError}}else try{return this._serializeNode(v,y)}catch{throw new u.InvalidStateError}},h.prototype._serializeNodeNS=function(v,y,m,x,g){switch(v.nodeType){case o.NodeType.Element:return this._serializeElementNS(v,y,m,x,g);case o.NodeType.Document:return this._serializeDocumentNS(v,y,m,x,g);case o.NodeType.Comment:return this._serializeComment(v,g);case o.NodeType.Text:return this._serializeText(v,g);case o.NodeType.DocumentFragment:return this._serializeDocumentFragmentNS(v,y,m,x,g);case o.NodeType.DocumentType:return this._serializeDocumentType(v,g);case o.NodeType.ProcessingInstruction:return this._serializeProcessingInstruction(v,g);case o.NodeType.CData:return this._serializeCData(v,g);default:throw new Error("Unknown node type: "+v.nodeType)}},h.prototype._serializeNode=function(v,y){switch(v.nodeType){case o.NodeType.Element:return this._serializeElement(v,y);case o.NodeType.Document:return this._serializeDocument(v,y);case o.NodeType.Comment:return this._serializeComment(v,y);case o.NodeType.Text:return this._serializeText(v,y);case o.NodeType.DocumentFragment:return this._serializeDocumentFragment(v,y);case o.NodeType.DocumentType:return this._serializeDocumentType(v,y);case o.NodeType.ProcessingInstruction:return this._serializeProcessingInstruction(v,y);case o.NodeType.CData:return this._serializeCData(v,y);default:throw new Error("Unknown node type: "+v.nodeType)}},h.prototype._serializeElementNS=function(v,y,m,x,g){var d,C;if(g&&(v.localName.indexOf(":")!==-1||!l.xml_isName(v.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var S="<",T="",w=!1,E=!1,D=m.copy(),b={},O=this._recordNamespaceInformation(v,D,b),M=y,R=v.namespaceURI;if(M===R)O!==null&&(E=!0),S+=T=R===f.namespace.XML?"xml:"+v.localName:v.localName;else{var N=v.prefix,U=null;if(N===null&&R===O||(U=D.get(N,R)),N==="xmlns"){if(g)throw new Error("An element cannot have the 'xmlns' prefix (well-formed required).");U=N}U!==null?(T=U+":"+v.localName,O!==null&&O!==f.namespace.XML&&(M=O||null),S+=T):N!==null?(N in b&&(N=this._generatePrefix(R,D,x)),D.set(N,R),S+=T+=N+":"+v.localName,S+=" xmlns:"+N+'="'+this._serializeAttributeValue(R,g)+'"',O!==null&&(M=O||null)):O===null||O!==null&&O!==R?(E=!0,M=R,S+=T+=v.localName,S+=' xmlns="'+this._serializeAttributeValue(R,g)+'"'):(M=R,S+=T+=v.localName)}S+=this._serializeAttributesNS(v,D,x,b,E,g);var W=R===f.namespace.HTML;if(W&&v.childNodes.length===0&&h._VoidElementNames.has(v.localName)?(S+=" /",w=!0):W||v.childNodes.length!==0||(S+="/",w=!0),S+=">",w)return S;if(!(W&&v.localName==="template"))try{for(var I=i(v._children||v.childNodes),G=I.next();!G.done;G=I.next()){var F=G.value;S+=this._serializeNodeNS(F,M,D,x,g)}}catch(A){d={error:A}}finally{try{G&&!G.done&&(C=I.return)&&C.call(I)}finally{if(d)throw d.error}}return S+="</"+T+">"},h.prototype._serializeDocumentNS=function(v,y,m,x,g){var d,C;if(g&&v.documentElement===null)throw new Error("Missing document element (well-formed required).");var S="";try{for(var T=i(v._children||v.childNodes),w=T.next();!w.done;w=T.next()){var E=w.value;S+=this._serializeNodeNS(E,y,m,x,g)}}catch(D){d={error:D}}finally{try{w&&!w.done&&(C=T.return)&&C.call(T)}finally{if(d)throw d.error}}return S},h.prototype._serializeComment=function(v,y){if(y&&(!l.xml_isLegalChar(v.data)||v.data.indexOf("--")!==-1||v.data.endsWith("-")))throw new Error("Comment data contains invalid characters (well-formed required).");return"<!--"+v.data+"-->"},h.prototype._serializeText=function(v,y){if(y&&!l.xml_isLegalChar(v.data))throw new Error("Text data contains invalid characters (well-formed required).");for(var m="",x=0;x<v.data.length;x++){var g=v.data[x];m+=g==="&"?"&amp;":g==="<"?"&lt;":g===">"?"&gt;":g}return m},h.prototype._serializeDocumentFragmentNS=function(v,y,m,x,g){var d,C,S="";try{for(var T=i(v._children||v.childNodes),w=T.next();!w.done;w=T.next()){var E=w.value;S+=this._serializeNodeNS(E,y,m,x,g)}}catch(D){d={error:D}}finally{try{w&&!w.done&&(C=T.return)&&C.call(T)}finally{if(d)throw d.error}}return S},h.prototype._serializeDocumentType=function(v,y){if(y&&!l.xml_isPubidChar(v.publicId))throw new Error("DocType public identifier does not match PubidChar construct (well-formed required).");if(y&&(!l.xml_isLegalChar(v.systemId)||v.systemId.indexOf('"')!==-1&&v.systemId.indexOf("'")!==-1))throw new Error("DocType system identifier contains invalid characters (well-formed required).");return v.publicId&&v.systemId?"<!DOCTYPE "+v.name+' PUBLIC "'+v.publicId+'" "'+v.systemId+'">':v.publicId?"<!DOCTYPE "+v.name+' PUBLIC "'+v.publicId+'">':v.systemId?"<!DOCTYPE "+v.name+' SYSTEM "'+v.systemId+'">':"<!DOCTYPE "+v.name+">"},h.prototype._serializeProcessingInstruction=function(v,y){if(y&&(v.target.indexOf(":")!==-1||/^xml$/i.test(v.target)))throw new Error("Processing instruction target contains invalid characters (well-formed required).");if(y&&(!l.xml_isLegalChar(v.data)||v.data.indexOf("?>")!==-1))throw new Error("Processing instruction data contains invalid characters (well-formed required).");return"<?"+(v.data===""?v.target:v.target+" "+v.data)+"?>"},h.prototype._serializeCData=function(v,y){if(y&&v.data.indexOf("]]>")!==-1)throw new Error("CDATA contains invalid characters (well-formed required).");return"<![CDATA["+v.data+"]]>"},h.prototype._serializeAttributesNS=function(v,y,m,x,g,d){var C,S,T="",w=d?new s.LocalNameSet:void 0;try{for(var E=i(v.attributes),D=E.next();!D.done;D=E.next()){var b=D.value;if(g||d||b.namespaceURI!==null){if(d&&w&&w.has(b.namespaceURI,b.localName))throw new Error("Element contains duplicate attributes (well-formed required).");d&&w&&w.set(b.namespaceURI,b.localName);var O=b.namespaceURI,M=null;if(O!==null)if(M=y.get(b.prefix,O),O===f.namespace.XMLNS){if(b.value===f.namespace.XML||b.prefix===null&&g||b.prefix!==null&&(!(b.localName in x)||x[b.localName]!==b.value)&&y.has(b.localName,b.value))continue;if(d&&b.value===f.namespace.XMLNS)throw new Error("XMLNS namespace is reserved (well-formed required).");if(d&&b.value==="")throw new Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required).");b.prefix==="xmlns"&&(M="xmlns")}else M===null&&(T+=" xmlns:"+(M=b.prefix===null||y.hasPrefix(b.prefix)&&!y.has(b.prefix,O)?this._generatePrefix(O,y,m):b.prefix)+'="'+this._serializeAttributeValue(O,d)+'"');if(T+=" ",M!==null&&(T+=M+":"),d&&(b.localName.indexOf(":")!==-1||!l.xml_isName(b.localName)||b.localName==="xmlns"&&O===null))throw new Error("Attribute local name contains invalid characters (well-formed required).");T+=b.localName+'="'+this._serializeAttributeValue(b.value,d)+'"'}else T+=" "+b.localName+'="'+this._serializeAttributeValue(b.value,d)+'"'}}catch(R){C={error:R}}finally{try{D&&!D.done&&(S=E.return)&&S.call(E)}finally{if(C)throw C.error}}return T},h.prototype._recordNamespaceInformation=function(v,y,m){var x,g,d=null;try{for(var C=i(v.attributes),S=C.next();!S.done;S=C.next()){var T=S.value,w=T.namespaceURI,E=T.prefix;if(w===f.namespace.XMLNS){if(E===null){d=T.value;continue}var D=T.localName,b=T.value;if(b===f.namespace.XML||(b===""&&(b=null),y.has(D,b)))continue;y.set(D,b),m[D]=b||""}}}catch(O){x={error:O}}finally{try{S&&!S.done&&(g=C.return)&&g.call(C)}finally{if(x)throw x.error}}return d},h.prototype._generatePrefix=function(v,y,m){var x="ns"+m.value;return m.value++,y.set(x,v),x},h.prototype._serializeAttributeValue=function(v,y){if(y&&v!==null&&!l.xml_isLegalChar(v))throw new Error("Invalid characters in attribute value.");if(v===null)return"";for(var m="",x=0;x<v.length;x++){var g=v[x];m+=g==='"'?"&quot;":g==="&"?"&amp;":g==="<"?"&lt;":g===">"?"&gt;":g}return m},h.prototype._serializeElement=function(v,y){var m,x;if(y&&(v.localName.indexOf(":")!==-1||!l.xml_isName(v.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var g=!1,d=v.localName,C="<"+d;if(C+=this._serializeAttributes(v,y),v._children.size===0&&(C+="/",g=!0),C+=">",g)return C;try{for(var S=i(v._children),T=S.next();!T.done;T=S.next()){var w=T.value;C+=this._serializeNode(w,y)}}catch(E){m={error:E}}finally{try{T&&!T.done&&(x=S.return)&&x.call(S)}finally{if(m)throw m.error}}return C+="</"+d+">"},h.prototype._serializeDocument=function(v,y){var m,x;if(y&&v.documentElement===null)throw new Error("Missing document element (well-formed required).");var g="";try{for(var d=i(v._children),C=d.next();!C.done;C=d.next()){var S=C.value;g+=this._serializeNode(S,y)}}catch(T){m={error:T}}finally{try{C&&!C.done&&(x=d.return)&&x.call(d)}finally{if(m)throw m.error}}return g},h.prototype._serializeDocumentFragment=function(v,y){var m,x,g="";try{for(var d=i(v._children),C=d.next();!C.done;C=d.next()){var S=C.value;g+=this._serializeNode(S,y)}}catch(T){m={error:T}}finally{try{C&&!C.done&&(x=d.return)&&x.call(d)}finally{if(m)throw m.error}}return g},h.prototype._serializeAttributes=function(v,y){var m,x,g="",d=y?{}:void 0;try{for(var C=i(v.attributes),S=C.next();!S.done;S=C.next()){var T=S.value;if(y&&d&&T.localName in d)throw new Error("Element contains duplicate attributes (well-formed required).");if(y&&d&&(d[T.localName]=!0),y&&(T.localName.indexOf(":")!==-1||!l.xml_isName(T.localName)))throw new Error("Attribute local name contains invalid characters (well-formed required).");g+=" "+T.localName+'="'+this._serializeAttributeValue(T.value,y)+'"'}}catch(w){m={error:w}}finally{try{S&&!S.done&&(x=C.return)&&x.call(C)}finally{if(m)throw m.error}}return g},h._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),h}();r.XMLSerializerImpl=p},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(277);r.XMLReader=i.XMLReader;var o=a(112);r.ObjectReader=o.ObjectReader;var s=a(280);r.JSONReader=s.JSONReader;var c=a(281);r.YAMLReader=c.YAMLReader},function(n,r,a){a(31),a(32),a(33),a(19),a(65),a(20),a(22),a(23);var i,o=this&&this.__extends||(i=function(v,y){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,x){m.__proto__=x}||function(m,x){for(var g in x)x.hasOwnProperty(g)&&(m[g]=x[g])})(v,y)},function(v,y){function m(){this.constructor=v}i(v,y),v.prototype=y===null?Object.create(y):(m.prototype=y.prototype,new m)}),s=this&&this.__read||function(v,y){var m=typeof Symbol=="function"&&v[Symbol.iterator];if(!m)return v;var x,g,d=m.call(v),C=[];try{for(;(y===void 0||y-- >0)&&!(x=d.next()).done;)C.push(x.value)}catch(S){g={error:S}}finally{try{x&&!x.done&&(m=d.return)&&m.call(d)}finally{if(g)throw g.error}}return C},c=this&&this.__values||function(v){var y=typeof Symbol=="function"&&Symbol.iterator,m=y&&v[y],x=0;if(m)return m.call(v);if(v&&typeof v.length=="number")return{next:function(){return v&&x>=v.length&&(v=void 0),{value:v&&v[x++],done:!v}}};throw new TypeError(y?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var u=a(180),f=a(111),l=a(7),p=a(0),h=function(v){function y(){return v!==null&&v.apply(this,arguments)||this}return o(y,v),y.prototype._parse=function(m,x){for(var g,d,C,S,T=new u.XMLStringLexer(x,{skipWhitespaceOnlyText:!0}),w=m,E=m,D=T.nextToken();D.type!==f.TokenType.EOF;){switch(D.type){case f.TokenType.Declaration:var b=D,O=this.sanitize(b.version);if(O!=="1.0")throw new Error("Invalid xml version: "+O);var M={version:O};b.encoding&&(M.encoding=this.sanitize(b.encoding)),b.standalone&&(M.standalone=this.sanitize(b.standalone)==="yes"),E.set(M);break;case f.TokenType.DocType:var R=D;E=this.docType(E,this.sanitize(R.name),this.sanitize(R.pubId),this.sanitize(R.sysId))||E;break;case f.TokenType.CDATA:var N=D;E=this.cdata(E,this.sanitize(N.data))||E;break;case f.TokenType.Comment:var U=D;E=this.comment(E,this.sanitize(U.data))||E;break;case f.TokenType.PI:var W=D;E=this.instruction(E,this.sanitize(W.target),this.sanitize(W.data))||E;break;case f.TokenType.Text:var I=D;E=this.text(E,this._decodeText(this.sanitize(I.data)))||E;break;case f.TokenType.Element:var G=D,F=this.sanitize(G.name),A=s(p.namespace_extractQName(F),1)[0],H=E.node.lookupNamespaceURI(A),$={};try{for(var X=(g=void 0,c(G.attributes)),Y=X.next();!Y.done;Y=X.next()){var q=s(Y.value,2),J=q[0],ne=q[1];if(J=this.sanitize(J),ne=this.sanitize(ne),J==="xmlns")H=ne;else{var Q=s(p.namespace_extractQName(J),2),te=Q[0],L=Q[1];te==="xmlns"&&(L===A&&(H=ne),$[L]=ne)}}}catch(Z){g={error:Z}}finally{try{Y&&!Y.done&&(d=X.return)&&d.call(X)}finally{if(g)throw g.error}}var _=H!==null?this.element(E,H,F):this.element(E,void 0,F);if(_===void 0)break;E.node===m.node&&(w=_);try{for(var V=(C=void 0,c(G.attributes)),k=V.next();!k.done;k=V.next()){var P=s(k.value,2);J=P[0],ne=P[1],J=this.sanitize(J),ne=this.sanitize(ne);var j=s(p.namespace_extractQName(J),2),z=(te=j[0],L=j[1],null);te==="xmlns"||te===null&&L==="xmlns"?z=l.namespace.XMLNS:(z=_.node.lookupNamespaceURI(te))!==null&&_.node.isDefaultNamespace(z)?z=null:z===null&&te!==null&&(z=$[te]||null),z!==null?this.attribute(_,z,J,this._decodeAttributeValue(ne)):this.attribute(_,void 0,J,this._decodeAttributeValue(ne))}}catch(Z){C={error:Z}}finally{try{k&&!k.done&&(S=V.return)&&S.call(V)}finally{if(C)throw C.error}}G.selfClosing||(E=_);break;case f.TokenType.ClosingTag:E.node.parentNode&&(E=E.up())}D=T.nextToken()}return w},y}(a(75).BaseReader);r.XMLReader=h},function(n,r,a){var i=a(4),o=a(279);i({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},function(n,r,a){var i=a(16),o=a(8),s=a(61),c=a(85),u=a(79),f=a(27),l=a(41),p=Object.assign,h=Object.defineProperty;n.exports=!p||o(function(){if(i&&p({b:1},p(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var v={},y={},m=Symbol();return v[m]=7,"abcdefghijklmnopqrst".split("").forEach(function(x){y[x]=x}),p({},v)[m]!=7||s(p({},y)).join("")!="abcdefghijklmnopqrst"})?function(v,y){for(var m=f(v),x=arguments.length,g=1,d=c.f,C=u.f;x>g;)for(var S,T=l(arguments[g++]),w=d?s(T).concat(d(T)):s(T),E=w.length,D=0;E>D;)S=w[D++],i&&!C.call(T,S)||(m[S]=T[S]);return m}:p},function(n,r,a){var i,o=this&&this.__extends||(i=function(u,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var h in p)p.hasOwnProperty(h)&&(l[h]=p[h])})(u,f)},function(u,f){function l(){this.constructor=u}i(u,f),u.prototype=f===null?Object.create(f):(l.prototype=f.prototype,new l)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(112),c=function(u){function f(){return u!==null&&u.apply(this,arguments)||this}return o(f,u),f.prototype._parse=function(l,p){return new s.ObjectReader(this._builderOptions).parse(l,JSON.parse(p))},f}(a(75).BaseReader);r.JSONReader=c},function(n,r,a){var i,o=this&&this.__extends||(i=function(l,p){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var y in v)v.hasOwnProperty(y)&&(h[y]=v[y])})(l,p)},function(l,p){function h(){this.constructor=l}i(l,p),l.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)});Object.defineProperty(r,"__esModule",{value:!0});var s=a(112),c=a(75),u=a(282),f=function(l){function p(){return l!==null&&l.apply(this,arguments)||this}return o(p,l),p.prototype._parse=function(h,v){var y=u.safeLoad(v);if(y===void 0)throw new Error("Unable to parse YAML document.");return new s.ObjectReader(this._builderOptions).parse(h,y)},p}(c.BaseReader);r.YAMLReader=f},function(n,r,a){var i=a(283);n.exports=i},function(n,r,a){var i=a(284),o=a(303);function s(c){return function(){throw new Error("Function "+c+" is deprecated and cannot be used.")}}n.exports.Type=a(10),n.exports.Schema=a(39),n.exports.FAILSAFE_SCHEMA=a(113),n.exports.JSON_SCHEMA=a(182),n.exports.CORE_SCHEMA=a(181),n.exports.DEFAULT_SAFE_SCHEMA=a(54),n.exports.DEFAULT_FULL_SCHEMA=a(76),n.exports.load=i.load,n.exports.loadAll=i.loadAll,n.exports.safeLoad=i.safeLoad,n.exports.safeLoadAll=i.safeLoadAll,n.exports.dump=o.dump,n.exports.safeDump=o.safeDump,n.exports.YAMLException=a(53),n.exports.MINIMAL_SCHEMA=a(113),n.exports.SAFE_SCHEMA=a(54),n.exports.DEFAULT_SCHEMA=a(76),n.exports.scan=s("scan"),n.exports.parse=s("parse"),n.exports.compose=s("compose"),n.exports.addConstructor=s("addConstructor")},function(n,r,a){var i=a(38),o=a(53),s=a(285),c=a(54),u=a(76),f=Object.prototype.hasOwnProperty,l=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,p=/[\x85\u2028\u2029]/,h=/[,\[\]\{\}]/,v=/^(?:!|!!|![a-z\-]+!)$/i,y=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function m(_){return Object.prototype.toString.call(_)}function x(_){return _===10||_===13}function g(_){return _===9||_===32}function d(_){return _===9||_===32||_===10||_===13}function C(_){return _===44||_===91||_===93||_===123||_===125}function S(_){var V;return 48<=_&&_<=57?_-48:97<=(V=32|_)&&V<=102?V-97+10:-1}function T(_){return _===48?"\0":_===97?"\x07":_===98?"\b":_===116||_===9?"	":_===110?`
`:_===118?"\v":_===102?"\f":_===114?"\r":_===101?"\x1B":_===32?" ":_===34?'"':_===47?"/":_===92?"\\":_===78?"":_===95?"":_===76?"\u2028":_===80?"\u2029":""}function w(_){return _<=65535?String.fromCharCode(_):String.fromCharCode(55296+(_-65536>>10),56320+(_-65536&1023))}for(var E=new Array(256),D=new Array(256),b=0;b<256;b++)E[b]=T(b)?1:0,D[b]=T(b);function O(_,V){this.input=_,this.filename=V.filename||null,this.schema=V.schema||u,this.onWarning=V.onWarning||null,this.legacy=V.legacy||!1,this.json=V.json||!1,this.listener=V.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=_.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function M(_,V){return new o(V,new s(_.filename,_.input,_.position,_.line,_.position-_.lineStart))}function R(_,V){throw M(_,V)}function N(_,V){_.onWarning&&_.onWarning.call(null,M(_,V))}var U={YAML:function(_,V,k){var P,j,z;_.version!==null&&R(_,"duplication of %YAML directive"),k.length!==1&&R(_,"YAML directive accepts exactly one argument"),(P=/^([0-9]+)\.([0-9]+)$/.exec(k[0]))===null&&R(_,"ill-formed argument of the YAML directive"),j=parseInt(P[1],10),z=parseInt(P[2],10),j!==1&&R(_,"unacceptable YAML version of the document"),_.version=k[0],_.checkLineBreaks=z<2,z!==1&&z!==2&&N(_,"unsupported YAML version of the document")},TAG:function(_,V,k){var P,j;k.length!==2&&R(_,"TAG directive accepts exactly two arguments"),P=k[0],j=k[1],v.test(P)||R(_,"ill-formed tag handle (first argument) of the TAG directive"),f.call(_.tagMap,P)&&R(_,'there is a previously declared suffix for "'+P+'" tag handle'),y.test(j)||R(_,"ill-formed tag prefix (second argument) of the TAG directive"),_.tagMap[P]=j}};function W(_,V,k,P){var j,z,Z,re;if(V<k){if(re=_.input.slice(V,k),P)for(j=0,z=re.length;j<z;j+=1)(Z=re.charCodeAt(j))===9||32<=Z&&Z<=1114111||R(_,"expected valid JSON character");else l.test(re)&&R(_,"the stream contains non-printable characters");_.result+=re}}function I(_,V,k,P){var j,z,Z,re;for(i.isObject(k)||R(_,"cannot merge mappings; the provided source object is unacceptable"),Z=0,re=(j=Object.keys(k)).length;Z<re;Z+=1)z=j[Z],f.call(V,z)||(V[z]=k[z],P[z]=!0)}function G(_,V,k,P,j,z,Z,re){var ie,oe;if(Array.isArray(j))for(ie=0,oe=(j=Array.prototype.slice.call(j)).length;ie<oe;ie+=1)Array.isArray(j[ie])&&R(_,"nested arrays are not supported inside keys"),typeof j=="object"&&m(j[ie])==="[object Object]"&&(j[ie]="[object Object]");if(typeof j=="object"&&m(j)==="[object Object]"&&(j="[object Object]"),j=String(j),V===null&&(V={}),P==="tag:yaml.org,2002:merge")if(Array.isArray(z))for(ie=0,oe=z.length;ie<oe;ie+=1)I(_,V,z[ie],k);else I(_,V,z,k);else _.json||f.call(k,j)||!f.call(V,j)||(_.line=Z||_.line,_.position=re||_.position,R(_,"duplicated mapping key")),V[j]=z,delete k[j];return V}function F(_){var V;(V=_.input.charCodeAt(_.position))===10?_.position++:V===13?(_.position++,_.input.charCodeAt(_.position)===10&&_.position++):R(_,"a line break is expected"),_.line+=1,_.lineStart=_.position}function A(_,V,k){for(var P=0,j=_.input.charCodeAt(_.position);j!==0;){for(;g(j);)j=_.input.charCodeAt(++_.position);if(V&&j===35)do j=_.input.charCodeAt(++_.position);while(j!==10&&j!==13&&j!==0);if(!x(j))break;for(F(_),j=_.input.charCodeAt(_.position),P++,_.lineIndent=0;j===32;)_.lineIndent++,j=_.input.charCodeAt(++_.position)}return k!==-1&&P!==0&&_.lineIndent<k&&N(_,"deficient indentation"),P}function H(_){var V,k=_.position;return!((V=_.input.charCodeAt(k))!==45&&V!==46||V!==_.input.charCodeAt(k+1)||V!==_.input.charCodeAt(k+2)||(k+=3,(V=_.input.charCodeAt(k))!==0&&!d(V)))}function $(_,V){V===1?_.result+=" ":V>1&&(_.result+=i.repeat(`
`,V-1))}function X(_,V){var k,P,j=_.tag,z=_.anchor,Z=[],re=!1;for(_.anchor!==null&&(_.anchorMap[_.anchor]=Z),P=_.input.charCodeAt(_.position);P!==0&&P===45&&d(_.input.charCodeAt(_.position+1));)if(re=!0,_.position++,A(_,!0,-1)&&_.lineIndent<=V)Z.push(null),P=_.input.charCodeAt(_.position);else if(k=_.line,J(_,V,3,!1,!0),Z.push(_.result),A(_,!0,-1),P=_.input.charCodeAt(_.position),(_.line===k||_.lineIndent>V)&&P!==0)R(_,"bad indentation of a sequence entry");else if(_.lineIndent<V)break;return!!re&&(_.tag=j,_.anchor=z,_.kind="sequence",_.result=Z,!0)}function Y(_){var V,k,P,j,z=!1,Z=!1;if((j=_.input.charCodeAt(_.position))!==33)return!1;if(_.tag!==null&&R(_,"duplication of a tag property"),(j=_.input.charCodeAt(++_.position))===60?(z=!0,j=_.input.charCodeAt(++_.position)):j===33?(Z=!0,k="!!",j=_.input.charCodeAt(++_.position)):k="!",V=_.position,z){do j=_.input.charCodeAt(++_.position);while(j!==0&&j!==62);_.position<_.length?(P=_.input.slice(V,_.position),j=_.input.charCodeAt(++_.position)):R(_,"unexpected end of the stream within a verbatim tag")}else{for(;j!==0&&!d(j);)j===33&&(Z?R(_,"tag suffix cannot contain exclamation marks"):(k=_.input.slice(V-1,_.position+1),v.test(k)||R(_,"named tag handle cannot contain such characters"),Z=!0,V=_.position+1)),j=_.input.charCodeAt(++_.position);P=_.input.slice(V,_.position),h.test(P)&&R(_,"tag suffix cannot contain flow indicator characters")}return P&&!y.test(P)&&R(_,"tag name cannot contain such characters: "+P),z?_.tag=P:f.call(_.tagMap,k)?_.tag=_.tagMap[k]+P:k==="!"?_.tag="!"+P:k==="!!"?_.tag="tag:yaml.org,2002:"+P:R(_,'undeclared tag handle "'+k+'"'),!0}function q(_){var V,k;if((k=_.input.charCodeAt(_.position))!==38)return!1;for(_.anchor!==null&&R(_,"duplication of an anchor property"),k=_.input.charCodeAt(++_.position),V=_.position;k!==0&&!d(k)&&!C(k);)k=_.input.charCodeAt(++_.position);return _.position===V&&R(_,"name of an anchor node must contain at least one character"),_.anchor=_.input.slice(V,_.position),!0}function J(_,V,k,P,j){var z,Z,re,ie,oe,he,ye,Re,De=1,ge=!1,$e=!1;if(_.listener!==null&&_.listener("open",_),_.tag=null,_.anchor=null,_.kind=null,_.result=null,z=Z=re=k===4||k===3,P&&A(_,!0,-1)&&(ge=!0,_.lineIndent>V?De=1:_.lineIndent===V?De=0:_.lineIndent<V&&(De=-1)),De===1)for(;Y(_)||q(_);)A(_,!0,-1)?(ge=!0,re=z,_.lineIndent>V?De=1:_.lineIndent===V?De=0:_.lineIndent<V&&(De=-1)):re=!1;if(re&&(re=ge||j),De!==1&&k!==4||(ye=k===1||k===2?V:V+1,Re=_.position-_.lineStart,De===1?re&&(X(_,Re)||function(K,we,Te){var me,ae,ue,pe,fe,xe=K.tag,Ae=K.anchor,Se={},Be={},Pe=null,Ct=null,Rt=null,it=!1,Kt=!1;for(K.anchor!==null&&(K.anchorMap[K.anchor]=Se),fe=K.input.charCodeAt(K.position);fe!==0;){if(me=K.input.charCodeAt(K.position+1),ue=K.line,pe=K.position,fe!==63&&fe!==58||!d(me)){if(!J(K,Te,2,!1,!0))break;if(K.line===ue){for(fe=K.input.charCodeAt(K.position);g(fe);)fe=K.input.charCodeAt(++K.position);if(fe===58)d(fe=K.input.charCodeAt(++K.position))||R(K,"a whitespace character is expected after the key-value separator within a block mapping"),it&&(G(K,Se,Be,Pe,Ct,null),Pe=Ct=Rt=null),Kt=!0,it=!1,ae=!1,Pe=K.tag,Ct=K.result;else{if(!Kt)return K.tag=xe,K.anchor=Ae,!0;R(K,"can not read an implicit mapping pair; a colon is missed")}}else{if(!Kt)return K.tag=xe,K.anchor=Ae,!0;R(K,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else fe===63?(it&&(G(K,Se,Be,Pe,Ct,null),Pe=Ct=Rt=null),Kt=!0,it=!0,ae=!0):it?(it=!1,ae=!0):R(K,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),K.position+=1,fe=me;if((K.line===ue||K.lineIndent>we)&&(J(K,we,4,!0,ae)&&(it?Ct=K.result:Rt=K.result),it||(G(K,Se,Be,Pe,Ct,Rt,ue,pe),Pe=Ct=Rt=null),A(K,!0,-1),fe=K.input.charCodeAt(K.position)),K.lineIndent>we&&fe!==0)R(K,"bad indentation of a mapping entry");else if(K.lineIndent<we)break}return it&&G(K,Se,Be,Pe,Ct,null),Kt&&(K.tag=xe,K.anchor=Ae,K.kind="mapping",K.result=Se),Kt}(_,Re,ye))||function(K,we){var Te,me,ae,ue,pe,fe,xe,Ae,Se,Be,Pe=!0,Ct=K.tag,Rt=K.anchor,it={};if((Be=K.input.charCodeAt(K.position))===91)ae=93,fe=!1,me=[];else{if(Be!==123)return!1;ae=125,fe=!0,me={}}for(K.anchor!==null&&(K.anchorMap[K.anchor]=me),Be=K.input.charCodeAt(++K.position);Be!==0;){if(A(K,!0,we),(Be=K.input.charCodeAt(K.position))===ae)return K.position++,K.tag=Ct,K.anchor=Rt,K.kind=fe?"mapping":"sequence",K.result=me,!0;Pe||R(K,"missed comma between flow collection entries"),Se=null,ue=pe=!1,Be===63&&d(K.input.charCodeAt(K.position+1))&&(ue=pe=!0,K.position++,A(K,!0,we)),Te=K.line,J(K,we,1,!1,!0),Ae=K.tag,xe=K.result,A(K,!0,we),Be=K.input.charCodeAt(K.position),!pe&&K.line!==Te||Be!==58||(ue=!0,Be=K.input.charCodeAt(++K.position),A(K,!0,we),J(K,we,1,!1,!0),Se=K.result),fe?G(K,me,it,Ae,xe,Se):ue?me.push(G(K,null,it,Ae,xe,Se)):me.push(xe),A(K,!0,we),(Be=K.input.charCodeAt(K.position))===44?(Pe=!0,Be=K.input.charCodeAt(++K.position)):Pe=!1}R(K,"unexpected end of the stream within a flow collection")}(_,ye)?$e=!0:(Z&&function(K,we){var Te,me,ae,ue,pe,fe=1,xe=!1,Ae=!1,Se=we,Be=0,Pe=!1;if((ue=K.input.charCodeAt(K.position))===124)me=!1;else{if(ue!==62)return!1;me=!0}for(K.kind="scalar",K.result="";ue!==0;)if((ue=K.input.charCodeAt(++K.position))===43||ue===45)fe===1?fe=ue===43?3:2:R(K,"repeat of a chomping mode identifier");else{if(!((ae=48<=(pe=ue)&&pe<=57?pe-48:-1)>=0))break;ae===0?R(K,"bad explicit indentation width of a block scalar; it cannot be less than one"):Ae?R(K,"repeat of an indentation width identifier"):(Se=we+ae-1,Ae=!0)}if(g(ue)){do ue=K.input.charCodeAt(++K.position);while(g(ue));if(ue===35)do ue=K.input.charCodeAt(++K.position);while(!x(ue)&&ue!==0)}for(;ue!==0;){for(F(K),K.lineIndent=0,ue=K.input.charCodeAt(K.position);(!Ae||K.lineIndent<Se)&&ue===32;)K.lineIndent++,ue=K.input.charCodeAt(++K.position);if(!Ae&&K.lineIndent>Se&&(Se=K.lineIndent),x(ue))Be++;else{if(K.lineIndent<Se){fe===3?K.result+=i.repeat(`
`,xe?1+Be:Be):fe===1&&xe&&(K.result+=`
`);break}for(me?g(ue)?(Pe=!0,K.result+=i.repeat(`
`,xe?1+Be:Be)):Pe?(Pe=!1,K.result+=i.repeat(`
`,Be+1)):Be===0?xe&&(K.result+=" "):K.result+=i.repeat(`
`,Be):K.result+=i.repeat(`
`,xe?1+Be:Be),xe=!0,Ae=!0,Be=0,Te=K.position;!x(ue)&&ue!==0;)ue=K.input.charCodeAt(++K.position);W(K,Te,K.position,!1)}}return!0}(_,ye)||function(K,we){var Te,me,ae;if((Te=K.input.charCodeAt(K.position))!==39)return!1;for(K.kind="scalar",K.result="",K.position++,me=ae=K.position;(Te=K.input.charCodeAt(K.position))!==0;)if(Te===39){if(W(K,me,K.position,!0),(Te=K.input.charCodeAt(++K.position))!==39)return!0;me=K.position,K.position++,ae=K.position}else x(Te)?(W(K,me,ae,!0),$(K,A(K,!1,we)),me=ae=K.position):K.position===K.lineStart&&H(K)?R(K,"unexpected end of the document within a single quoted scalar"):(K.position++,ae=K.position);R(K,"unexpected end of the stream within a single quoted scalar")}(_,ye)||function(K,we){var Te,me,ae,ue,pe,fe,xe;if((fe=K.input.charCodeAt(K.position))!==34)return!1;for(K.kind="scalar",K.result="",K.position++,Te=me=K.position;(fe=K.input.charCodeAt(K.position))!==0;){if(fe===34)return W(K,Te,K.position,!0),K.position++,!0;if(fe===92){if(W(K,Te,K.position,!0),x(fe=K.input.charCodeAt(++K.position)))A(K,!1,we);else if(fe<256&&E[fe])K.result+=D[fe],K.position++;else if((pe=(xe=fe)===120?2:xe===117?4:xe===85?8:0)>0){for(ae=pe,ue=0;ae>0;ae--)(pe=S(fe=K.input.charCodeAt(++K.position)))>=0?ue=(ue<<4)+pe:R(K,"expected hexadecimal character");K.result+=w(ue),K.position++}else R(K,"unknown escape sequence");Te=me=K.position}else x(fe)?(W(K,Te,me,!0),$(K,A(K,!1,we)),Te=me=K.position):K.position===K.lineStart&&H(K)?R(K,"unexpected end of the document within a double quoted scalar"):(K.position++,me=K.position)}R(K,"unexpected end of the stream within a double quoted scalar")}(_,ye)?$e=!0:function(K){var we,Te,me;if((me=K.input.charCodeAt(K.position))!==42)return!1;for(me=K.input.charCodeAt(++K.position),we=K.position;me!==0&&!d(me)&&!C(me);)me=K.input.charCodeAt(++K.position);return K.position===we&&R(K,"name of an alias node must contain at least one character"),Te=K.input.slice(we,K.position),K.anchorMap.hasOwnProperty(Te)||R(K,'unidentified alias "'+Te+'"'),K.result=K.anchorMap[Te],A(K,!0,-1),!0}(_)?($e=!0,_.tag===null&&_.anchor===null||R(_,"alias node should not have any properties")):function(K,we,Te){var me,ae,ue,pe,fe,xe,Ae,Se,Be=K.kind,Pe=K.result;if(d(Se=K.input.charCodeAt(K.position))||C(Se)||Se===35||Se===38||Se===42||Se===33||Se===124||Se===62||Se===39||Se===34||Se===37||Se===64||Se===96||(Se===63||Se===45)&&(d(me=K.input.charCodeAt(K.position+1))||Te&&C(me)))return!1;for(K.kind="scalar",K.result="",ae=ue=K.position,pe=!1;Se!==0;){if(Se===58){if(d(me=K.input.charCodeAt(K.position+1))||Te&&C(me))break}else if(Se===35){if(d(K.input.charCodeAt(K.position-1)))break}else{if(K.position===K.lineStart&&H(K)||Te&&C(Se))break;if(x(Se)){if(fe=K.line,xe=K.lineStart,Ae=K.lineIndent,A(K,!1,-1),K.lineIndent>=we){pe=!0,Se=K.input.charCodeAt(K.position);continue}K.position=ue,K.line=fe,K.lineStart=xe,K.lineIndent=Ae;break}}pe&&(W(K,ae,ue,!1),$(K,K.line-fe),ae=ue=K.position,pe=!1),g(Se)||(ue=K.position+1),Se=K.input.charCodeAt(++K.position)}return W(K,ae,ue,!1),!!K.result||(K.kind=Be,K.result=Pe,!1)}(_,ye,k===1)&&($e=!0,_.tag===null&&(_.tag="?")),_.anchor!==null&&(_.anchorMap[_.anchor]=_.result)):De===0&&($e=re&&X(_,Re))),_.tag!==null&&_.tag!=="!")if(_.tag==="?"){for(_.result!==null&&_.kind!=="scalar"&&R(_,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+_.kind+'"'),ie=0,oe=_.implicitTypes.length;ie<oe;ie+=1)if((he=_.implicitTypes[ie]).resolve(_.result)){_.result=he.construct(_.result),_.tag=he.tag,_.anchor!==null&&(_.anchorMap[_.anchor]=_.result);break}}else f.call(_.typeMap[_.kind||"fallback"],_.tag)?(he=_.typeMap[_.kind||"fallback"][_.tag],_.result!==null&&he.kind!==_.kind&&R(_,"unacceptable node kind for !<"+_.tag+'> tag; it should be "'+he.kind+'", not "'+_.kind+'"'),he.resolve(_.result)?(_.result=he.construct(_.result),_.anchor!==null&&(_.anchorMap[_.anchor]=_.result)):R(_,"cannot resolve a node with !<"+_.tag+"> explicit tag")):R(_,"unknown tag !<"+_.tag+">");return _.listener!==null&&_.listener("close",_),_.tag!==null||_.anchor!==null||$e}function ne(_){var V,k,P,j,z=_.position,Z=!1;for(_.version=null,_.checkLineBreaks=_.legacy,_.tagMap={},_.anchorMap={};(j=_.input.charCodeAt(_.position))!==0&&(A(_,!0,-1),j=_.input.charCodeAt(_.position),!(_.lineIndent>0||j!==37));){for(Z=!0,j=_.input.charCodeAt(++_.position),V=_.position;j!==0&&!d(j);)j=_.input.charCodeAt(++_.position);for(P=[],(k=_.input.slice(V,_.position)).length<1&&R(_,"directive name must not be less than one character in length");j!==0;){for(;g(j);)j=_.input.charCodeAt(++_.position);if(j===35){do j=_.input.charCodeAt(++_.position);while(j!==0&&!x(j));break}if(x(j))break;for(V=_.position;j!==0&&!d(j);)j=_.input.charCodeAt(++_.position);P.push(_.input.slice(V,_.position))}j!==0&&F(_),f.call(U,k)?U[k](_,k,P):N(_,'unknown document directive "'+k+'"')}A(_,!0,-1),_.lineIndent===0&&_.input.charCodeAt(_.position)===45&&_.input.charCodeAt(_.position+1)===45&&_.input.charCodeAt(_.position+2)===45?(_.position+=3,A(_,!0,-1)):Z&&R(_,"directives end mark is expected"),J(_,_.lineIndent-1,4,!1,!0),A(_,!0,-1),_.checkLineBreaks&&p.test(_.input.slice(z,_.position))&&N(_,"non-ASCII line breaks are interpreted as content"),_.documents.push(_.result),_.position===_.lineStart&&H(_)?_.input.charCodeAt(_.position)===46&&(_.position+=3,A(_,!0,-1)):_.position<_.length-1&&R(_,"end of the stream or a document separator is expected")}function Q(_,V){V=V||{},(_=String(_)).length!==0&&(_.charCodeAt(_.length-1)!==10&&_.charCodeAt(_.length-1)!==13&&(_+=`
`),_.charCodeAt(0)===65279&&(_=_.slice(1)));var k=new O(_,V),P=_.indexOf("\0");for(P!==-1&&(k.position=P,R(k,"null byte is not allowed in input")),k.input+="\0";k.input.charCodeAt(k.position)===32;)k.lineIndent+=1,k.position+=1;for(;k.position<k.length-1;)ne(k);return k.documents}function te(_,V,k){V!==null&&typeof V=="object"&&k===void 0&&(k=V,V=null);var P=Q(_,k);if(typeof V!="function")return P;for(var j=0,z=P.length;j<z;j+=1)V(P[j])}function L(_,V){var k=Q(_,V);if(k.length!==0){if(k.length===1)return k[0];throw new o("expected a single document in the stream, but found more")}}n.exports.loadAll=te,n.exports.load=L,n.exports.safeLoadAll=function(_,V,k){return typeof V=="object"&&V!==null&&k===void 0&&(k=V,V=null),te(_,V,i.extend({schema:c},k))},n.exports.safeLoad=function(_,V){return L(_,i.extend({schema:c},V))}},function(n,r,a){var i=a(38);function o(s,c,u,f,l){this.name=s,this.buffer=c,this.position=u,this.line=f,this.column=l}o.prototype.getSnippet=function(s,c){var u,f,l,p,h;if(!this.buffer)return null;for(s=s||4,c=c||75,u="",f=this.position;f>0&&`\0\r
\u2028\u2029`.indexOf(this.buffer.charAt(f-1))===-1;)if(f-=1,this.position-f>c/2-1){u=" ... ",f+=5;break}for(l="",p=this.position;p<this.buffer.length&&`\0\r
\u2028\u2029`.indexOf(this.buffer.charAt(p))===-1;)if((p+=1)-this.position>c/2-1){l=" ... ",p-=5;break}return h=this.buffer.slice(f,p),i.repeat(" ",s)+u+h+l+`
`+i.repeat(" ",s+this.position-f+u.length)+"^"},o.prototype.toString=function(s){var c,u="";return this.name&&(u+='in "'+this.name+'" '),u+="at line "+(this.line+1)+", column "+(this.column+1),s||(c=this.getSnippet())&&(u+=`:
`+c),u},n.exports=o},function(n,r,a){var i=a(10);n.exports=new i("tag:yaml.org,2002:str",{kind:"scalar",construct:function(o){return o!==null?o:""}})},function(n,r,a){var i=a(10);n.exports=new i("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(o){return o!==null?o:[]}})},function(n,r,a){var i=a(10);n.exports=new i("tag:yaml.org,2002:map",{kind:"mapping",construct:function(o){return o!==null?o:{}}})},function(n,r,a){var i=a(10);n.exports=new i("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(o){if(o===null)return!0;var s=o.length;return s===1&&o==="~"||s===4&&(o==="null"||o==="Null"||o==="NULL")},construct:function(){return null},predicate:function(o){return o===null},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},function(n,r,a){var i=a(10);n.exports=new i("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(o){if(o===null)return!1;var s=o.length;return s===4&&(o==="true"||o==="True"||o==="TRUE")||s===5&&(o==="false"||o==="False"||o==="FALSE")},construct:function(o){return o==="true"||o==="True"||o==="TRUE"},predicate:function(o){return Object.prototype.toString.call(o)==="[object Boolean]"},represent:{lowercase:function(o){return o?"true":"false"},uppercase:function(o){return o?"TRUE":"FALSE"},camelcase:function(o){return o?"True":"False"}},defaultStyle:"lowercase"})},function(n,r,a){var i=a(38),o=a(10);function s(u){return 48<=u&&u<=55}function c(u){return 48<=u&&u<=57}n.exports=new o("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(u){if(u===null)return!1;var f,l,p=u.length,h=0,v=!1;if(!p)return!1;if((f=u[h])!=="-"&&f!=="+"||(f=u[++h]),f==="0"){if(h+1===p)return!0;if((f=u[++h])==="b"){for(h++;h<p;h++)if((f=u[h])!=="_"){if(f!=="0"&&f!=="1")return!1;v=!0}return v&&f!=="_"}if(f==="x"){for(h++;h<p;h++)if((f=u[h])!=="_"){if(!(48<=(l=u.charCodeAt(h))&&l<=57||65<=l&&l<=70||97<=l&&l<=102))return!1;v=!0}return v&&f!=="_"}for(;h<p;h++)if((f=u[h])!=="_"){if(!s(u.charCodeAt(h)))return!1;v=!0}return v&&f!=="_"}if(f==="_")return!1;for(;h<p;h++)if((f=u[h])!=="_"){if(f===":")break;if(!c(u.charCodeAt(h)))return!1;v=!0}return!(!v||f==="_")&&(f!==":"||/^(:[0-5]?[0-9])+$/.test(u.slice(h)))},construct:function(u){var f,l,p=u,h=1,v=[];return p.indexOf("_")!==-1&&(p=p.replace(/_/g,"")),(f=p[0])!=="-"&&f!=="+"||(f==="-"&&(h=-1),f=(p=p.slice(1))[0]),p==="0"?0:f==="0"?p[1]==="b"?h*parseInt(p.slice(2),2):p[1]==="x"?h*parseInt(p,16):h*parseInt(p,8):p.indexOf(":")!==-1?(p.split(":").forEach(function(y){v.unshift(parseInt(y,10))}),p=0,l=1,v.forEach(function(y){p+=y*l,l*=60}),h*p):h*parseInt(p,10)},predicate:function(u){return Object.prototype.toString.call(u)==="[object Number]"&&u%1==0&&!i.isNegativeZero(u)},represent:{binary:function(u){return u>=0?"0b"+u.toString(2):"-0b"+u.toString(2).slice(1)},octal:function(u){return u>=0?"0"+u.toString(8):"-0"+u.toString(8).slice(1)},decimal:function(u){return u.toString(10)},hexadecimal:function(u){return u>=0?"0x"+u.toString(16).toUpperCase():"-0x"+u.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},function(n,r,a){var i=a(38),o=a(10),s=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),c=/^[-+]?[0-9]+e/;n.exports=new o("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(u){return u!==null&&!(!s.test(u)||u[u.length-1]==="_")},construct:function(u){var f,l,p,h;return l=(f=u.replace(/_/g,"").toLowerCase())[0]==="-"?-1:1,h=[],"+-".indexOf(f[0])>=0&&(f=f.slice(1)),f===".inf"?l===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:f===".nan"?NaN:f.indexOf(":")>=0?(f.split(":").forEach(function(v){h.unshift(parseFloat(v,10))}),f=0,p=1,h.forEach(function(v){f+=v*p,p*=60}),l*f):l*parseFloat(f,10)},predicate:function(u){return Object.prototype.toString.call(u)==="[object Number]"&&(u%1!=0||i.isNegativeZero(u))},represent:function(u,f){var l;if(isNaN(u))switch(f){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===u)switch(f){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===u)switch(f){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(i.isNegativeZero(u))return"-0.0";return l=u.toString(10),c.test(l)?l.replace("e",".e"):l},defaultStyle:"lowercase"})},function(n,r,a){var i=a(10),o=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),s=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");n.exports=new i("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(c){return c!==null&&(o.exec(c)!==null||s.exec(c)!==null)},construct:function(c){var u,f,l,p,h,v,y,m,x=0,g=null;if((u=o.exec(c))===null&&(u=s.exec(c)),u===null)throw new Error("Date resolve error");if(f=+u[1],l=+u[2]-1,p=+u[3],!u[4])return new Date(Date.UTC(f,l,p));if(h=+u[4],v=+u[5],y=+u[6],u[7]){for(x=u[7].slice(0,3);x.length<3;)x+="0";x=+x}return u[9]&&(g=6e4*(60*+u[10]+ +(u[11]||0)),u[9]==="-"&&(g=-g)),m=new Date(Date.UTC(f,l,p,h,v,y,x)),g&&m.setTime(m.getTime()-g),m},instanceOf:Date,represent:function(c){return c.toISOString()}})},function(n,r,a){var i=a(10);n.exports=new i("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(o){return o==="<<"||o===null}})},function(n,r,a){var i;try{i=a(145).Buffer}catch{}var o=a(10),s=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;n.exports=new o("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(c){if(c===null)return!1;var u,f,l=0,p=c.length,h=s;for(f=0;f<p;f++)if(!((u=h.indexOf(c.charAt(f)))>64)){if(u<0)return!1;l+=6}return l%8==0},construct:function(c){var u,f,l=c.replace(/[\r\n=]/g,""),p=l.length,h=s,v=0,y=[];for(u=0;u<p;u++)u%4==0&&u&&(y.push(v>>16&255),y.push(v>>8&255),y.push(255&v)),v=v<<6|h.indexOf(l.charAt(u));return(f=p%4*6)===0?(y.push(v>>16&255),y.push(v>>8&255),y.push(255&v)):f===18?(y.push(v>>10&255),y.push(v>>2&255)):f===12&&y.push(v>>4&255),i?i.from?i.from(y):new i(y):y},predicate:function(c){return i&&i.isBuffer(c)},represent:function(c){var u,f,l="",p=0,h=c.length,v=s;for(u=0;u<h;u++)u%3==0&&u&&(l+=v[p>>18&63],l+=v[p>>12&63],l+=v[p>>6&63],l+=v[63&p]),p=(p<<8)+c[u];return(f=h%3)===0?(l+=v[p>>18&63],l+=v[p>>12&63],l+=v[p>>6&63],l+=v[63&p]):f===2?(l+=v[p>>10&63],l+=v[p>>4&63],l+=v[p<<2&63],l+=v[64]):f===1&&(l+=v[p>>2&63],l+=v[p<<4&63],l+=v[64],l+=v[64]),l}})},function(n,r,a){var i=a(10),o=Object.prototype.hasOwnProperty,s=Object.prototype.toString;n.exports=new i("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(c){if(c===null)return!0;var u,f,l,p,h,v=[],y=c;for(u=0,f=y.length;u<f;u+=1){if(l=y[u],h=!1,s.call(l)!=="[object Object]")return!1;for(p in l)if(o.call(l,p)){if(h)return!1;h=!0}if(!h||v.indexOf(p)!==-1)return!1;v.push(p)}return!0},construct:function(c){return c!==null?c:[]}})},function(n,r,a){var i=a(10),o=Object.prototype.toString;n.exports=new i("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(s){if(s===null)return!0;var c,u,f,l,p,h=s;for(p=new Array(h.length),c=0,u=h.length;c<u;c+=1){if(f=h[c],o.call(f)!=="[object Object]"||(l=Object.keys(f)).length!==1)return!1;p[c]=[l[0],f[l[0]]]}return!0},construct:function(s){if(s===null)return[];var c,u,f,l,p,h=s;for(p=new Array(h.length),c=0,u=h.length;c<u;c+=1)f=h[c],l=Object.keys(f),p[c]=[l[0],f[l[0]]];return p}})},function(n,r,a){var i=a(10),o=Object.prototype.hasOwnProperty;n.exports=new i("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(s){if(s===null)return!0;var c,u=s;for(c in u)if(o.call(u,c)&&u[c]!==null)return!1;return!0},construct:function(s){return s!==null?s:{}}})},function(n,r,a){var i=a(10);n.exports=new i("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(o){return o===void 0},represent:function(){return""}})},function(n,r,a){var i=a(10);n.exports=new i("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(o){if(o===null||o.length===0)return!1;var s=o,c=/\/([gim]*)$/.exec(o),u="";return!(s[0]==="/"&&(c&&(u=c[1]),u.length>3||s[s.length-u.length-1]!=="/"))},construct:function(o){var s=o,c=/\/([gim]*)$/.exec(o),u="";return s[0]==="/"&&(c&&(u=c[1]),s=s.slice(1,s.length-u.length-1)),new RegExp(s,u)},predicate:function(o){return Object.prototype.toString.call(o)==="[object RegExp]"},represent:function(o){var s="/"+o.source+"/";return o.global&&(s+="g"),o.multiline&&(s+="m"),o.ignoreCase&&(s+="i"),s}})},function(n,r,a){var i;try{i=a(302)}catch{typeof window<"u"&&(i=window.esprima)}var o=a(10);n.exports=new o("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(s){if(s===null)return!1;try{var c="("+s+")",u=i.parse(c,{range:!0});return u.type==="Program"&&u.body.length===1&&u.body[0].type==="ExpressionStatement"&&(u.body[0].expression.type==="ArrowFunctionExpression"||u.body[0].expression.type==="FunctionExpression")}catch{return!1}},construct:function(s){var c,u="("+s+")",f=i.parse(u,{range:!0}),l=[];if(f.type!=="Program"||f.body.length!==1||f.body[0].type!=="ExpressionStatement"||f.body[0].expression.type!=="ArrowFunctionExpression"&&f.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return f.body[0].expression.params.forEach(function(p){l.push(p.name)}),c=f.body[0].expression.body.range,f.body[0].expression.body.type==="BlockStatement"?new Function(l,u.slice(c[0]+1,c[1]-1)):new Function(l,"return "+u.slice(c[0],c[1]))},predicate:function(s){return Object.prototype.toString.call(s)==="[object Function]"},represent:function(s){return s.toString()}})},function(n,r,a){var i;i=function(){return function(o){var s={};function c(u){if(s[u])return s[u].exports;var f=s[u]={exports:{},id:u,loaded:!1};return o[u].call(f.exports,f,f.exports,c),f.loaded=!0,f.exports}return c.m=o,c.c=s,c.p="",c(0)}([function(o,s,c){Object.defineProperty(s,"__esModule",{value:!0});var u=c(1),f=c(3),l=c(8),p=c(15);function h(y,m,x){var g=null,d=function(b,O){x&&x(b,O),g&&g.visit(b,O)},C=typeof x=="function"?d:null,S=!1;if(m){S=typeof m.comment=="boolean"&&m.comment;var T=typeof m.attachComment=="boolean"&&m.attachComment;(S||T)&&((g=new u.CommentHandler).attach=T,m.comment=!0,C=d)}var w,E=!1;m&&typeof m.sourceType=="string"&&(E=m.sourceType==="module"),w=m&&typeof m.jsx=="boolean"&&m.jsx?new f.JSXParser(y,m,C):new l.Parser(y,m,C);var D=E?w.parseModule():w.parseScript();return S&&g&&(D.comments=g.comments),w.config.tokens&&(D.tokens=w.tokens),w.config.tolerant&&(D.errors=w.errorHandler.errors),D}s.parse=h,s.parseModule=function(y,m,x){var g=m||{};return g.sourceType="module",h(y,g,x)},s.parseScript=function(y,m,x){var g=m||{};return g.sourceType="script",h(y,g,x)},s.tokenize=function(y,m,x){var g,d=new p.Tokenizer(y,m);g=[];try{for(;;){var C=d.getNextToken();if(!C)break;x&&(C=x(C)),g.push(C)}}catch(S){d.errorHandler.tolerate(S)}return d.errorHandler.tolerant&&(g.errors=d.errors()),g};var v=c(2);s.Syntax=v.Syntax,s.version="4.0.1"},function(o,s,c){Object.defineProperty(s,"__esModule",{value:!0});var u=c(2),f=function(){function l(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return l.prototype.insertInnerComments=function(p,h){if(p.type===u.Syntax.BlockStatement&&p.body.length===0){for(var v=[],y=this.leading.length-1;y>=0;--y){var m=this.leading[y];h.end.offset>=m.start&&(v.unshift(m.comment),this.leading.splice(y,1),this.trailing.splice(y,1))}v.length&&(p.innerComments=v)}},l.prototype.findTrailingComments=function(p){var h=[];if(this.trailing.length>0){for(var v=this.trailing.length-1;v>=0;--v){var y=this.trailing[v];y.start>=p.end.offset&&h.unshift(y.comment)}return this.trailing.length=0,h}var m=this.stack[this.stack.length-1];if(m&&m.node.trailingComments){var x=m.node.trailingComments[0];x&&x.range[0]>=p.end.offset&&(h=m.node.trailingComments,delete m.node.trailingComments)}return h},l.prototype.findLeadingComments=function(p){for(var h,v=[];this.stack.length>0&&(x=this.stack[this.stack.length-1])&&x.start>=p.start.offset;)h=x.node,this.stack.pop();if(h){for(var y=(h.leadingComments?h.leadingComments.length:0)-1;y>=0;--y){var m=h.leadingComments[y];m.range[1]<=p.start.offset&&(v.unshift(m),h.leadingComments.splice(y,1))}return h.leadingComments&&h.leadingComments.length===0&&delete h.leadingComments,v}for(y=this.leading.length-1;y>=0;--y){var x;(x=this.leading[y]).start<=p.start.offset&&(v.unshift(x.comment),this.leading.splice(y,1))}return v},l.prototype.visitNode=function(p,h){if(!(p.type===u.Syntax.Program&&p.body.length>0)){this.insertInnerComments(p,h);var v=this.findTrailingComments(h),y=this.findLeadingComments(h);y.length>0&&(p.leadingComments=y),v.length>0&&(p.trailingComments=v),this.stack.push({node:p,start:h.start.offset})}},l.prototype.visitComment=function(p,h){var v=p.type[0]==="L"?"Line":"Block",y={type:v,value:p.value};if(p.range&&(y.range=p.range),p.loc&&(y.loc=p.loc),this.comments.push(y),this.attach){var m={comment:{type:v,value:p.value,range:[h.start.offset,h.end.offset]},start:h.start.offset};p.loc&&(m.comment.loc=p.loc),p.type=v,this.leading.push(m),this.trailing.push(m)}},l.prototype.visit=function(p,h){p.type==="LineComment"||p.type==="BlockComment"?this.visitComment(p,h):this.attach&&this.visitNode(p,h)},l}();s.CommentHandler=f},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(o,s,c){var u,f=this&&this.__extends||(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,S){C.__proto__=S}||function(C,S){for(var T in S)S.hasOwnProperty(T)&&(C[T]=S[T])},function(C,S){function T(){this.constructor=C}u(C,S),C.prototype=S===null?Object.create(S):(T.prototype=S.prototype,new T)});Object.defineProperty(s,"__esModule",{value:!0});var l=c(4),p=c(5),h=c(6),v=c(7),y=c(8),m=c(13),x=c(14);function g(C){var S;switch(C.type){case h.JSXSyntax.JSXIdentifier:S=C.name;break;case h.JSXSyntax.JSXNamespacedName:var T=C;S=g(T.namespace)+":"+g(T.name);break;case h.JSXSyntax.JSXMemberExpression:var w=C;S=g(w.object)+"."+g(w.property)}return S}m.TokenName[100]="JSXIdentifier",m.TokenName[101]="JSXText";var d=function(C){function S(T,w,E){return C.call(this,T,w,E)||this}return f(S,C),S.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():C.prototype.parsePrimaryExpression.call(this)},S.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},S.prototype.finishJSX=function(){this.nextToken()},S.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},S.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},S.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},S.prototype.scanXHTMLEntity=function(T){for(var w="&",E=!0,D=!1,b=!1,O=!1;!this.scanner.eof()&&E&&!D;){var M=this.scanner.source[this.scanner.index];if(M===T)break;if(D=M===";",w+=M,++this.scanner.index,!D)switch(w.length){case 2:b=M==="#";break;case 3:b&&(E=(O=M==="x")||l.Character.isDecimalDigit(M.charCodeAt(0)),b=b&&!O);break;default:E=(E=E&&!(b&&!l.Character.isDecimalDigit(M.charCodeAt(0))))&&!(O&&!l.Character.isHexDigit(M.charCodeAt(0)))}}if(E&&D&&w.length>2){var R=w.substr(1,w.length-2);b&&R.length>1?w=String.fromCharCode(parseInt(R.substr(1),10)):O&&R.length>2?w=String.fromCharCode(parseInt("0"+R.substr(1),16)):b||O||!x.XHTMLEntities[R]||(w=x.XHTMLEntities[R])}return w},S.prototype.lexJSX=function(){var T=this.scanner.source.charCodeAt(this.scanner.index);if(T===60||T===62||T===47||T===58||T===61||T===123||T===125)return{type:7,value:M=this.scanner.source[this.scanner.index++],lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index};if(T===34||T===39){for(var w=this.scanner.index,E=this.scanner.source[this.scanner.index++],D="";!this.scanner.eof()&&(R=this.scanner.source[this.scanner.index++])!==E;)D+=R==="&"?this.scanXHTMLEntity(E):R;return{type:8,value:D,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:w,end:this.scanner.index}}if(T===46){var b=this.scanner.source.charCodeAt(this.scanner.index+1),O=this.scanner.source.charCodeAt(this.scanner.index+2),M=b===46&&O===46?"...":".";return w=this.scanner.index,this.scanner.index+=M.length,{type:7,value:M,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:w,end:this.scanner.index}}if(T===96)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(l.Character.isIdentifierStart(T)&&T!==92){for(w=this.scanner.index,++this.scanner.index;!this.scanner.eof();){var R=this.scanner.source.charCodeAt(this.scanner.index);if(l.Character.isIdentifierPart(R)&&R!==92)++this.scanner.index;else{if(R!==45)break;++this.scanner.index}}return{type:100,value:this.scanner.source.slice(w,this.scanner.index),lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:w,end:this.scanner.index}}return this.scanner.lex()},S.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var T=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(T)),T},S.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var T=this.scanner.index,w="";!this.scanner.eof();){var E=this.scanner.source[this.scanner.index];if(E==="{"||E==="<")break;++this.scanner.index,w+=E,l.Character.isLineTerminator(E.charCodeAt(0))&&(++this.scanner.lineNumber,E==="\r"&&this.scanner.source[this.scanner.index]===`
`&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var D={type:101,value:w,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:T,end:this.scanner.index};return w.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(D)),D},S.prototype.peekJSXToken=function(){var T=this.scanner.saveState();this.scanner.scanComments();var w=this.lexJSX();return this.scanner.restoreState(T),w},S.prototype.expectJSX=function(T){var w=this.nextJSXToken();w.type===7&&w.value===T||this.throwUnexpectedToken(w)},S.prototype.matchJSX=function(T){var w=this.peekJSXToken();return w.type===7&&w.value===T},S.prototype.parseJSXIdentifier=function(){var T=this.createJSXNode(),w=this.nextJSXToken();return w.type!==100&&this.throwUnexpectedToken(w),this.finalize(T,new p.JSXIdentifier(w.value))},S.prototype.parseJSXElementName=function(){var T=this.createJSXNode(),w=this.parseJSXIdentifier();if(this.matchJSX(":")){var E=w;this.expectJSX(":");var D=this.parseJSXIdentifier();w=this.finalize(T,new p.JSXNamespacedName(E,D))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var b=w;this.expectJSX(".");var O=this.parseJSXIdentifier();w=this.finalize(T,new p.JSXMemberExpression(b,O))}return w},S.prototype.parseJSXAttributeName=function(){var T,w=this.createJSXNode(),E=this.parseJSXIdentifier();if(this.matchJSX(":")){var D=E;this.expectJSX(":");var b=this.parseJSXIdentifier();T=this.finalize(w,new p.JSXNamespacedName(D,b))}else T=E;return T},S.prototype.parseJSXStringLiteralAttribute=function(){var T=this.createJSXNode(),w=this.nextJSXToken();w.type!==8&&this.throwUnexpectedToken(w);var E=this.getTokenRaw(w);return this.finalize(T,new v.Literal(w.value,E))},S.prototype.parseJSXExpressionAttribute=function(){var T=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var w=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(T,new p.JSXExpressionContainer(w))},S.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},S.prototype.parseJSXNameValueAttribute=function(){var T=this.createJSXNode(),w=this.parseJSXAttributeName(),E=null;return this.matchJSX("=")&&(this.expectJSX("="),E=this.parseJSXAttributeValue()),this.finalize(T,new p.JSXAttribute(w,E))},S.prototype.parseJSXSpreadAttribute=function(){var T=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var w=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(T,new p.JSXSpreadAttribute(w))},S.prototype.parseJSXAttributes=function(){for(var T=[];!this.matchJSX("/")&&!this.matchJSX(">");){var w=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();T.push(w)}return T},S.prototype.parseJSXOpeningElement=function(){var T=this.createJSXNode();this.expectJSX("<");var w=this.parseJSXElementName(),E=this.parseJSXAttributes(),D=this.matchJSX("/");return D&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(T,new p.JSXOpeningElement(w,D,E))},S.prototype.parseJSXBoundaryElement=function(){var T=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var w=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(T,new p.JSXClosingElement(w))}var E=this.parseJSXElementName(),D=this.parseJSXAttributes(),b=this.matchJSX("/");return b&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(T,new p.JSXOpeningElement(E,b,D))},S.prototype.parseJSXEmptyExpression=function(){var T=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(T,new p.JSXEmptyExpression)},S.prototype.parseJSXExpressionContainer=function(){var T,w=this.createJSXNode();return this.expectJSX("{"),this.matchJSX("}")?(T=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),T=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(w,new p.JSXExpressionContainer(T))},S.prototype.parseJSXChildren=function(){for(var T=[];!this.scanner.eof();){var w=this.createJSXChildNode(),E=this.nextJSXText();if(E.start<E.end){var D=this.getTokenRaw(E),b=this.finalize(w,new p.JSXText(E.value,D));T.push(b)}if(this.scanner.source[this.scanner.index]!=="{")break;var O=this.parseJSXExpressionContainer();T.push(O)}return T},S.prototype.parseComplexJSXElement=function(T){for(var w=[];!this.scanner.eof();){T.children=T.children.concat(this.parseJSXChildren());var E=this.createJSXChildNode(),D=this.parseJSXBoundaryElement();if(D.type===h.JSXSyntax.JSXOpeningElement){var b=D;if(b.selfClosing){var O=this.finalize(E,new p.JSXElement(b,[],null));T.children.push(O)}else w.push(T),T={node:E,opening:b,closing:null,children:[]}}if(D.type===h.JSXSyntax.JSXClosingElement){T.closing=D;var M=g(T.opening.name);if(M!==g(T.closing.name)&&this.tolerateError("Expected corresponding JSX closing tag for %0",M),!(w.length>0))break;O=this.finalize(T.node,new p.JSXElement(T.opening,T.children,T.closing)),(T=w[w.length-1]).children.push(O),w.pop()}}return T},S.prototype.parseJSXElement=function(){var T=this.createJSXNode(),w=this.parseJSXOpeningElement(),E=[],D=null;if(!w.selfClosing){var b=this.parseComplexJSXElement({node:T,opening:w,closing:D,children:E});E=b.children,D=b.closing}return this.finalize(T,new p.JSXElement(w,E,D))},S.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var T=this.parseJSXElement();return this.finishJSX(),T},S.prototype.isStartOfExpression=function(){return C.prototype.isStartOfExpression.call(this)||this.match("<")},S}(y.Parser);s.JSXParser=d},function(o,s){Object.defineProperty(s,"__esModule",{value:!0});var c={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};s.Character={fromCodePoint:function(u){return u<65536?String.fromCharCode(u):String.fromCharCode(55296+(u-65536>>10))+String.fromCharCode(56320+(u-65536&1023))},isWhiteSpace:function(u){return u===32||u===9||u===11||u===12||u===160||u>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(u)>=0},isLineTerminator:function(u){return u===10||u===13||u===8232||u===8233},isIdentifierStart:function(u){return u===36||u===95||u>=65&&u<=90||u>=97&&u<=122||u===92||u>=128&&c.NonAsciiIdentifierStart.test(s.Character.fromCodePoint(u))},isIdentifierPart:function(u){return u===36||u===95||u>=65&&u<=90||u>=97&&u<=122||u>=48&&u<=57||u===92||u>=128&&c.NonAsciiIdentifierPart.test(s.Character.fromCodePoint(u))},isDecimalDigit:function(u){return u>=48&&u<=57},isHexDigit:function(u){return u>=48&&u<=57||u>=65&&u<=70||u>=97&&u<=102},isOctalDigit:function(u){return u>=48&&u<=55}}},function(o,s,c){Object.defineProperty(s,"__esModule",{value:!0});var u=c(6),f=function(S){this.type=u.JSXSyntax.JSXClosingElement,this.name=S};s.JSXClosingElement=f;var l=function(S,T,w){this.type=u.JSXSyntax.JSXElement,this.openingElement=S,this.children=T,this.closingElement=w};s.JSXElement=l;var p=function(){this.type=u.JSXSyntax.JSXEmptyExpression};s.JSXEmptyExpression=p;var h=function(S){this.type=u.JSXSyntax.JSXExpressionContainer,this.expression=S};s.JSXExpressionContainer=h;var v=function(S){this.type=u.JSXSyntax.JSXIdentifier,this.name=S};s.JSXIdentifier=v;var y=function(S,T){this.type=u.JSXSyntax.JSXMemberExpression,this.object=S,this.property=T};s.JSXMemberExpression=y;var m=function(S,T){this.type=u.JSXSyntax.JSXAttribute,this.name=S,this.value=T};s.JSXAttribute=m;var x=function(S,T){this.type=u.JSXSyntax.JSXNamespacedName,this.namespace=S,this.name=T};s.JSXNamespacedName=x;var g=function(S,T,w){this.type=u.JSXSyntax.JSXOpeningElement,this.name=S,this.selfClosing=T,this.attributes=w};s.JSXOpeningElement=g;var d=function(S){this.type=u.JSXSyntax.JSXSpreadAttribute,this.argument=S};s.JSXSpreadAttribute=d;var C=function(S,T){this.type=u.JSXSyntax.JSXText,this.value=S,this.raw=T};s.JSXText=C},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(o,s,c){Object.defineProperty(s,"__esModule",{value:!0});var u=c(2),f=function(se){this.type=u.Syntax.ArrayExpression,this.elements=se};s.ArrayExpression=f;var l=function(se){this.type=u.Syntax.ArrayPattern,this.elements=se};s.ArrayPattern=l;var p=function(se,le,ke){this.type=u.Syntax.ArrowFunctionExpression,this.id=null,this.params=se,this.body=le,this.generator=!1,this.expression=ke,this.async=!1};s.ArrowFunctionExpression=p;var h=function(se,le,ke){this.type=u.Syntax.AssignmentExpression,this.operator=se,this.left=le,this.right=ke};s.AssignmentExpression=h;var v=function(se,le){this.type=u.Syntax.AssignmentPattern,this.left=se,this.right=le};s.AssignmentPattern=v;var y=function(se,le,ke){this.type=u.Syntax.ArrowFunctionExpression,this.id=null,this.params=se,this.body=le,this.generator=!1,this.expression=ke,this.async=!0};s.AsyncArrowFunctionExpression=y;var m=function(se,le,ke){this.type=u.Syntax.FunctionDeclaration,this.id=se,this.params=le,this.body=ke,this.generator=!1,this.expression=!1,this.async=!0};s.AsyncFunctionDeclaration=m;var x=function(se,le,ke){this.type=u.Syntax.FunctionExpression,this.id=se,this.params=le,this.body=ke,this.generator=!1,this.expression=!1,this.async=!0};s.AsyncFunctionExpression=x;var g=function(se){this.type=u.Syntax.AwaitExpression,this.argument=se};s.AwaitExpression=g;var d=function(se,le,ke){var Pt=se==="||"||se==="&&";this.type=Pt?u.Syntax.LogicalExpression:u.Syntax.BinaryExpression,this.operator=se,this.left=le,this.right=ke};s.BinaryExpression=d;var C=function(se){this.type=u.Syntax.BlockStatement,this.body=se};s.BlockStatement=C;var S=function(se){this.type=u.Syntax.BreakStatement,this.label=se};s.BreakStatement=S;var T=function(se,le){this.type=u.Syntax.CallExpression,this.callee=se,this.arguments=le};s.CallExpression=T;var w=function(se,le){this.type=u.Syntax.CatchClause,this.param=se,this.body=le};s.CatchClause=w;var E=function(se){this.type=u.Syntax.ClassBody,this.body=se};s.ClassBody=E;var D=function(se,le,ke){this.type=u.Syntax.ClassDeclaration,this.id=se,this.superClass=le,this.body=ke};s.ClassDeclaration=D;var b=function(se,le,ke){this.type=u.Syntax.ClassExpression,this.id=se,this.superClass=le,this.body=ke};s.ClassExpression=b;var O=function(se,le){this.type=u.Syntax.MemberExpression,this.computed=!0,this.object=se,this.property=le};s.ComputedMemberExpression=O;var M=function(se,le,ke){this.type=u.Syntax.ConditionalExpression,this.test=se,this.consequent=le,this.alternate=ke};s.ConditionalExpression=M;var R=function(se){this.type=u.Syntax.ContinueStatement,this.label=se};s.ContinueStatement=R;var N=function(){this.type=u.Syntax.DebuggerStatement};s.DebuggerStatement=N;var U=function(se,le){this.type=u.Syntax.ExpressionStatement,this.expression=se,this.directive=le};s.Directive=U;var W=function(se,le){this.type=u.Syntax.DoWhileStatement,this.body=se,this.test=le};s.DoWhileStatement=W;var I=function(){this.type=u.Syntax.EmptyStatement};s.EmptyStatement=I;var G=function(se){this.type=u.Syntax.ExportAllDeclaration,this.source=se};s.ExportAllDeclaration=G;var F=function(se){this.type=u.Syntax.ExportDefaultDeclaration,this.declaration=se};s.ExportDefaultDeclaration=F;var A=function(se,le,ke){this.type=u.Syntax.ExportNamedDeclaration,this.declaration=se,this.specifiers=le,this.source=ke};s.ExportNamedDeclaration=A;var H=function(se,le){this.type=u.Syntax.ExportSpecifier,this.exported=le,this.local=se};s.ExportSpecifier=H;var $=function(se){this.type=u.Syntax.ExpressionStatement,this.expression=se};s.ExpressionStatement=$;var X=function(se,le,ke){this.type=u.Syntax.ForInStatement,this.left=se,this.right=le,this.body=ke,this.each=!1};s.ForInStatement=X;var Y=function(se,le,ke){this.type=u.Syntax.ForOfStatement,this.left=se,this.right=le,this.body=ke};s.ForOfStatement=Y;var q=function(se,le,ke,Pt){this.type=u.Syntax.ForStatement,this.init=se,this.test=le,this.update=ke,this.body=Pt};s.ForStatement=q;var J=function(se,le,ke,Pt){this.type=u.Syntax.FunctionDeclaration,this.id=se,this.params=le,this.body=ke,this.generator=Pt,this.expression=!1,this.async=!1};s.FunctionDeclaration=J;var ne=function(se,le,ke,Pt){this.type=u.Syntax.FunctionExpression,this.id=se,this.params=le,this.body=ke,this.generator=Pt,this.expression=!1,this.async=!1};s.FunctionExpression=ne;var Q=function(se){this.type=u.Syntax.Identifier,this.name=se};s.Identifier=Q;var te=function(se,le,ke){this.type=u.Syntax.IfStatement,this.test=se,this.consequent=le,this.alternate=ke};s.IfStatement=te;var L=function(se,le){this.type=u.Syntax.ImportDeclaration,this.specifiers=se,this.source=le};s.ImportDeclaration=L;var _=function(se){this.type=u.Syntax.ImportDefaultSpecifier,this.local=se};s.ImportDefaultSpecifier=_;var V=function(se){this.type=u.Syntax.ImportNamespaceSpecifier,this.local=se};s.ImportNamespaceSpecifier=V;var k=function(se,le){this.type=u.Syntax.ImportSpecifier,this.local=se,this.imported=le};s.ImportSpecifier=k;var P=function(se,le){this.type=u.Syntax.LabeledStatement,this.label=se,this.body=le};s.LabeledStatement=P;var j=function(se,le){this.type=u.Syntax.Literal,this.value=se,this.raw=le};s.Literal=j;var z=function(se,le){this.type=u.Syntax.MetaProperty,this.meta=se,this.property=le};s.MetaProperty=z;var Z=function(se,le,ke,Pt,Ju){this.type=u.Syntax.MethodDefinition,this.key=se,this.computed=le,this.value=ke,this.kind=Pt,this.static=Ju};s.MethodDefinition=Z;var re=function(se){this.type=u.Syntax.Program,this.body=se,this.sourceType="module"};s.Module=re;var ie=function(se,le){this.type=u.Syntax.NewExpression,this.callee=se,this.arguments=le};s.NewExpression=ie;var oe=function(se){this.type=u.Syntax.ObjectExpression,this.properties=se};s.ObjectExpression=oe;var he=function(se){this.type=u.Syntax.ObjectPattern,this.properties=se};s.ObjectPattern=he;var ye=function(se,le,ke,Pt,Ju,JN){this.type=u.Syntax.Property,this.key=le,this.computed=ke,this.value=Pt,this.kind=se,this.method=Ju,this.shorthand=JN};s.Property=ye;var Re=function(se,le,ke,Pt){this.type=u.Syntax.Literal,this.value=se,this.raw=le,this.regex={pattern:ke,flags:Pt}};s.RegexLiteral=Re;var De=function(se){this.type=u.Syntax.RestElement,this.argument=se};s.RestElement=De;var ge=function(se){this.type=u.Syntax.ReturnStatement,this.argument=se};s.ReturnStatement=ge;var $e=function(se){this.type=u.Syntax.Program,this.body=se,this.sourceType="script"};s.Script=$e;var K=function(se){this.type=u.Syntax.SequenceExpression,this.expressions=se};s.SequenceExpression=K;var we=function(se){this.type=u.Syntax.SpreadElement,this.argument=se};s.SpreadElement=we;var Te=function(se,le){this.type=u.Syntax.MemberExpression,this.computed=!1,this.object=se,this.property=le};s.StaticMemberExpression=Te;var me=function(){this.type=u.Syntax.Super};s.Super=me;var ae=function(se,le){this.type=u.Syntax.SwitchCase,this.test=se,this.consequent=le};s.SwitchCase=ae;var ue=function(se,le){this.type=u.Syntax.SwitchStatement,this.discriminant=se,this.cases=le};s.SwitchStatement=ue;var pe=function(se,le){this.type=u.Syntax.TaggedTemplateExpression,this.tag=se,this.quasi=le};s.TaggedTemplateExpression=pe;var fe=function(se,le){this.type=u.Syntax.TemplateElement,this.value=se,this.tail=le};s.TemplateElement=fe;var xe=function(se,le){this.type=u.Syntax.TemplateLiteral,this.quasis=se,this.expressions=le};s.TemplateLiteral=xe;var Ae=function(){this.type=u.Syntax.ThisExpression};s.ThisExpression=Ae;var Se=function(se){this.type=u.Syntax.ThrowStatement,this.argument=se};s.ThrowStatement=Se;var Be=function(se,le,ke){this.type=u.Syntax.TryStatement,this.block=se,this.handler=le,this.finalizer=ke};s.TryStatement=Be;var Pe=function(se,le){this.type=u.Syntax.UnaryExpression,this.operator=se,this.argument=le,this.prefix=!0};s.UnaryExpression=Pe;var Ct=function(se,le,ke){this.type=u.Syntax.UpdateExpression,this.operator=se,this.argument=le,this.prefix=ke};s.UpdateExpression=Ct;var Rt=function(se,le){this.type=u.Syntax.VariableDeclaration,this.declarations=se,this.kind=le};s.VariableDeclaration=Rt;var it=function(se,le){this.type=u.Syntax.VariableDeclarator,this.id=se,this.init=le};s.VariableDeclarator=it;var Kt=function(se,le){this.type=u.Syntax.WhileStatement,this.test=se,this.body=le};s.WhileStatement=Kt;var qN=function(se,le){this.type=u.Syntax.WithStatement,this.object=se,this.body=le};s.WithStatement=qN;var YN=function(se,le){this.type=u.Syntax.YieldExpression,this.argument=se,this.delegate=le};s.YieldExpression=YN},function(o,s,c){Object.defineProperty(s,"__esModule",{value:!0});var u=c(9),f=c(10),l=c(11),p=c(7),h=c(12),v=c(2),y=c(13),m=function(){function x(g,d,C){d===void 0&&(d={}),this.config={range:typeof d.range=="boolean"&&d.range,loc:typeof d.loc=="boolean"&&d.loc,source:null,tokens:typeof d.tokens=="boolean"&&d.tokens,comment:typeof d.comment=="boolean"&&d.comment,tolerant:typeof d.tolerant=="boolean"&&d.tolerant},this.config.loc&&d.source&&d.source!==null&&(this.config.source=String(d.source)),this.delegate=C,this.errorHandler=new f.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new h.Scanner(g,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return x.prototype.throwError=function(g){for(var d=[],C=1;C<arguments.length;C++)d[C-1]=arguments[C];var S=Array.prototype.slice.call(arguments,1),T=g.replace(/%(\d)/g,function(b,O){return u.assert(O<S.length,"Message reference must be in range"),S[O]}),w=this.lastMarker.index,E=this.lastMarker.line,D=this.lastMarker.column+1;throw this.errorHandler.createError(w,E,D,T)},x.prototype.tolerateError=function(g){for(var d=[],C=1;C<arguments.length;C++)d[C-1]=arguments[C];var S=Array.prototype.slice.call(arguments,1),T=g.replace(/%(\d)/g,function(b,O){return u.assert(O<S.length,"Message reference must be in range"),S[O]}),w=this.lastMarker.index,E=this.scanner.lineNumber,D=this.lastMarker.column+1;this.errorHandler.tolerateError(w,E,D,T)},x.prototype.unexpectedTokenError=function(g,d){var C,S=d||l.Messages.UnexpectedToken;if(g?(d||(S=g.type===2?l.Messages.UnexpectedEOS:g.type===3?l.Messages.UnexpectedIdentifier:g.type===6?l.Messages.UnexpectedNumber:g.type===8?l.Messages.UnexpectedString:g.type===10?l.Messages.UnexpectedTemplate:l.Messages.UnexpectedToken,g.type===4&&(this.scanner.isFutureReservedWord(g.value)?S=l.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(g.value)&&(S=l.Messages.StrictReservedWord))),C=g.value):C="ILLEGAL",S=S.replace("%0",C),g&&typeof g.lineNumber=="number"){var T=g.start,w=g.lineNumber,E=this.lastMarker.index-this.lastMarker.column,D=g.start-E+1;return this.errorHandler.createError(T,w,D,S)}return T=this.lastMarker.index,w=this.lastMarker.line,D=this.lastMarker.column+1,this.errorHandler.createError(T,w,D,S)},x.prototype.throwUnexpectedToken=function(g,d){throw this.unexpectedTokenError(g,d)},x.prototype.tolerateUnexpectedToken=function(g,d){this.errorHandler.tolerate(this.unexpectedTokenError(g,d))},x.prototype.collectComments=function(){if(this.config.comment){var g=this.scanner.scanComments();if(g.length>0&&this.delegate)for(var d=0;d<g.length;++d){var C=g[d],S=void 0;S={type:C.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(C.slice[0],C.slice[1])},this.config.range&&(S.range=C.range),this.config.loc&&(S.loc=C.loc);var T={start:{line:C.loc.start.line,column:C.loc.start.column,offset:C.range[0]},end:{line:C.loc.end.line,column:C.loc.end.column,offset:C.range[1]}};this.delegate(S,T)}}else this.scanner.scanComments()},x.prototype.getTokenRaw=function(g){return this.scanner.source.slice(g.start,g.end)},x.prototype.convertToken=function(g){var d={type:y.TokenName[g.type],value:this.getTokenRaw(g)};if(this.config.range&&(d.range=[g.start,g.end]),this.config.loc&&(d.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),g.type===9){var C=g.pattern,S=g.flags;d.regex={pattern:C,flags:S}}return d},x.prototype.nextToken=function(){var g=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var d=this.scanner.lex();return this.hasLineTerminator=g.lineNumber!==d.lineNumber,d&&this.context.strict&&d.type===3&&this.scanner.isStrictModeReservedWord(d.value)&&(d.type=4),this.lookahead=d,this.config.tokens&&d.type!==2&&this.tokens.push(this.convertToken(d)),g},x.prototype.nextRegexToken=function(){this.collectComments();var g=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(g))),this.lookahead=g,this.nextToken(),g},x.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},x.prototype.startNode=function(g,d){d===void 0&&(d=0);var C=g.start-g.lineStart,S=g.lineNumber;return C<0&&(C+=d,S--),{index:g.start,line:S,column:C}},x.prototype.finalize=function(g,d){if(this.config.range&&(d.range=[g.index,this.lastMarker.index]),this.config.loc&&(d.loc={start:{line:g.line,column:g.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(d.loc.source=this.config.source)),this.delegate){var C={start:{line:g.line,column:g.column,offset:g.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(d,C)}return d},x.prototype.expect=function(g){var d=this.nextToken();d.type===7&&d.value===g||this.throwUnexpectedToken(d)},x.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var g=this.lookahead;g.type===7&&g.value===","?this.nextToken():g.type===7&&g.value===";"?(this.nextToken(),this.tolerateUnexpectedToken(g)):this.tolerateUnexpectedToken(g,l.Messages.UnexpectedToken)}else this.expect(",")},x.prototype.expectKeyword=function(g){var d=this.nextToken();d.type===4&&d.value===g||this.throwUnexpectedToken(d)},x.prototype.match=function(g){return this.lookahead.type===7&&this.lookahead.value===g},x.prototype.matchKeyword=function(g){return this.lookahead.type===4&&this.lookahead.value===g},x.prototype.matchContextualKeyword=function(g){return this.lookahead.type===3&&this.lookahead.value===g},x.prototype.matchAssign=function(){if(this.lookahead.type!==7)return!1;var g=this.lookahead.value;return g==="="||g==="*="||g==="**="||g==="/="||g==="%="||g==="+="||g==="-="||g==="<<="||g===">>="||g===">>>="||g==="&="||g==="^="||g==="|="},x.prototype.isolateCoverGrammar=function(g){var d=this.context.isBindingElement,C=this.context.isAssignmentTarget,S=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var T=g.call(this);return this.context.firstCoverInitializedNameError!==null&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=d,this.context.isAssignmentTarget=C,this.context.firstCoverInitializedNameError=S,T},x.prototype.inheritCoverGrammar=function(g){var d=this.context.isBindingElement,C=this.context.isAssignmentTarget,S=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var T=g.call(this);return this.context.isBindingElement=this.context.isBindingElement&&d,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&C,this.context.firstCoverInitializedNameError=S||this.context.firstCoverInitializedNameError,T},x.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type===2||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},x.prototype.parsePrimaryExpression=function(){var g,d,C,S=this.createNode();switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&this.lookahead.value==="await"&&this.tolerateUnexpectedToken(this.lookahead),g=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(S,new p.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,l.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,d=this.nextToken(),C=this.getTokenRaw(d),g=this.finalize(S,new p.Literal(d.value,C));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,d=this.nextToken(),C=this.getTokenRaw(d),g=this.finalize(S,new p.Literal(d.value==="true",C));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,d=this.nextToken(),C=this.getTokenRaw(d),g=this.finalize(S,new p.Literal(null,C));break;case 10:g=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,g=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":g=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":g=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,d=this.nextRegexToken(),C=this.getTokenRaw(d),g=this.finalize(S,new p.RegexLiteral(d.regex,C,d.pattern,d.flags));break;default:g=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?g=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?g=this.finalize(S,new p.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?g=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),g=this.finalize(S,new p.ThisExpression)):g=this.matchKeyword("class")?this.parseClassExpression():this.throwUnexpectedToken(this.nextToken()));break;default:g=this.throwUnexpectedToken(this.nextToken())}return g},x.prototype.parseSpreadElement=function(){var g=this.createNode();this.expect("...");var d=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(g,new p.SpreadElement(d))},x.prototype.parseArrayInitializer=function(){var g=this.createNode(),d=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),d.push(null);else if(this.match("...")){var C=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),d.push(C)}else d.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(g,new p.ArrayExpression(d))},x.prototype.parsePropertyMethod=function(g){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var d=this.context.strict,C=this.context.allowStrictDirective;this.context.allowStrictDirective=g.simple;var S=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&g.firstRestricted&&this.tolerateUnexpectedToken(g.firstRestricted,g.message),this.context.strict&&g.stricted&&this.tolerateUnexpectedToken(g.stricted,g.message),this.context.strict=d,this.context.allowStrictDirective=C,S},x.prototype.parsePropertyMethodFunction=function(){var g=this.createNode(),d=this.context.allowYield;this.context.allowYield=!0;var C=this.parseFormalParameters(),S=this.parsePropertyMethod(C);return this.context.allowYield=d,this.finalize(g,new p.FunctionExpression(null,C.params,S,!1))},x.prototype.parsePropertyMethodAsyncFunction=function(){var g=this.createNode(),d=this.context.allowYield,C=this.context.await;this.context.allowYield=!1,this.context.await=!0;var S=this.parseFormalParameters(),T=this.parsePropertyMethod(S);return this.context.allowYield=d,this.context.await=C,this.finalize(g,new p.AsyncFunctionExpression(null,S.params,T))},x.prototype.parseObjectPropertyKey=function(){var g,d=this.createNode(),C=this.nextToken();switch(C.type){case 8:case 6:this.context.strict&&C.octal&&this.tolerateUnexpectedToken(C,l.Messages.StrictOctalLiteral);var S=this.getTokenRaw(C);g=this.finalize(d,new p.Literal(C.value,S));break;case 3:case 1:case 5:case 4:g=this.finalize(d,new p.Identifier(C.value));break;case 7:C.value==="["?(g=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):g=this.throwUnexpectedToken(C);break;default:g=this.throwUnexpectedToken(C)}return g},x.prototype.isPropertyKey=function(g,d){return g.type===v.Syntax.Identifier&&g.name===d||g.type===v.Syntax.Literal&&g.value===d},x.prototype.parseObjectProperty=function(g){var d,C=this.createNode(),S=this.lookahead,T=null,w=null,E=!1,D=!1,b=!1,O=!1;if(S.type===3){var M=S.value;this.nextToken(),E=this.match("["),T=(O=!(this.hasLineTerminator||M!=="async"||this.match(":")||this.match("(")||this.match("*")||this.match(",")))?this.parseObjectPropertyKey():this.finalize(C,new p.Identifier(M))}else this.match("*")?this.nextToken():(E=this.match("["),T=this.parseObjectPropertyKey());var R=this.qualifiedPropertyName(this.lookahead);if(S.type===3&&!O&&S.value==="get"&&R)d="get",E=this.match("["),T=this.parseObjectPropertyKey(),this.context.allowYield=!1,w=this.parseGetterMethod();else if(S.type===3&&!O&&S.value==="set"&&R)d="set",E=this.match("["),T=this.parseObjectPropertyKey(),w=this.parseSetterMethod();else if(S.type===7&&S.value==="*"&&R)d="init",E=this.match("["),T=this.parseObjectPropertyKey(),w=this.parseGeneratorMethod(),D=!0;else if(T||this.throwUnexpectedToken(this.lookahead),d="init",this.match(":")&&!O)!E&&this.isPropertyKey(T,"__proto__")&&(g.value&&this.tolerateError(l.Messages.DuplicateProtoProperty),g.value=!0),this.nextToken(),w=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))w=O?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),D=!0;else if(S.type===3)if(M=this.finalize(C,new p.Identifier(S.value)),this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),b=!0;var N=this.isolateCoverGrammar(this.parseAssignmentExpression);w=this.finalize(C,new p.AssignmentPattern(M,N))}else b=!0,w=M;else this.throwUnexpectedToken(this.nextToken());return this.finalize(C,new p.Property(d,T,E,w,D,b))},x.prototype.parseObjectInitializer=function(){var g=this.createNode();this.expect("{");for(var d=[],C={value:!1};!this.match("}");)d.push(this.parseObjectProperty(C)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(g,new p.ObjectExpression(d))},x.prototype.parseTemplateHead=function(){u.assert(this.lookahead.head,"Template literal must start with a template head");var g=this.createNode(),d=this.nextToken(),C=d.value,S=d.cooked;return this.finalize(g,new p.TemplateElement({raw:C,cooked:S},d.tail))},x.prototype.parseTemplateElement=function(){this.lookahead.type!==10&&this.throwUnexpectedToken();var g=this.createNode(),d=this.nextToken(),C=d.value,S=d.cooked;return this.finalize(g,new p.TemplateElement({raw:C,cooked:S},d.tail))},x.prototype.parseTemplateLiteral=function(){var g=this.createNode(),d=[],C=[],S=this.parseTemplateHead();for(C.push(S);!S.tail;)d.push(this.parseExpression()),S=this.parseTemplateElement(),C.push(S);return this.finalize(g,new p.TemplateLiteral(C,d))},x.prototype.reinterpretExpressionAsPattern=function(g){switch(g.type){case v.Syntax.Identifier:case v.Syntax.MemberExpression:case v.Syntax.RestElement:case v.Syntax.AssignmentPattern:break;case v.Syntax.SpreadElement:g.type=v.Syntax.RestElement,this.reinterpretExpressionAsPattern(g.argument);break;case v.Syntax.ArrayExpression:g.type=v.Syntax.ArrayPattern;for(var d=0;d<g.elements.length;d++)g.elements[d]!==null&&this.reinterpretExpressionAsPattern(g.elements[d]);break;case v.Syntax.ObjectExpression:for(g.type=v.Syntax.ObjectPattern,d=0;d<g.properties.length;d++)this.reinterpretExpressionAsPattern(g.properties[d].value);break;case v.Syntax.AssignmentExpression:g.type=v.Syntax.AssignmentPattern,delete g.operator,this.reinterpretExpressionAsPattern(g.left)}},x.prototype.parseGroupExpression=function(){var g;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),g={type:"ArrowParameterPlaceHolder",params:[],async:!1};else{var d=this.lookahead,C=[];if(this.match("..."))g=this.parseRestElement(C),this.expect(")"),this.match("=>")||this.expect("=>"),g={type:"ArrowParameterPlaceHolder",params:[g],async:!1};else{var S=!1;if(this.context.isBindingElement=!0,g=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var T=[];for(this.context.isAssignmentTarget=!1,T.push(g);this.lookahead.type!==2&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var w=0;w<T.length;w++)this.reinterpretExpressionAsPattern(T[w]);S=!0,g={type:"ArrowParameterPlaceHolder",params:T,async:!1}}else if(this.match("...")){for(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),T.push(this.parseRestElement(C)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1,w=0;w<T.length;w++)this.reinterpretExpressionAsPattern(T[w]);S=!0,g={type:"ArrowParameterPlaceHolder",params:T,async:!1}}else T.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(S)break}S||(g=this.finalize(this.startNode(d),new p.SequenceExpression(T)))}if(!S){if(this.expect(")"),this.match("=>")&&(g.type===v.Syntax.Identifier&&g.name==="yield"&&(S=!0,g={type:"ArrowParameterPlaceHolder",params:[g],async:!1}),!S)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),g.type===v.Syntax.SequenceExpression)for(w=0;w<g.expressions.length;w++)this.reinterpretExpressionAsPattern(g.expressions[w]);else this.reinterpretExpressionAsPattern(g);g={type:"ArrowParameterPlaceHolder",params:g.type===v.Syntax.SequenceExpression?g.expressions:[g],async:!1}}this.context.isBindingElement=!1}}}return g},x.prototype.parseArguments=function(){this.expect("(");var g=[];if(!this.match(")"))for(;;){var d=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(g.push(d),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),g},x.prototype.isIdentifierName=function(g){return g.type===3||g.type===4||g.type===1||g.type===5},x.prototype.parseIdentifierName=function(){var g=this.createNode(),d=this.nextToken();return this.isIdentifierName(d)||this.throwUnexpectedToken(d),this.finalize(g,new p.Identifier(d.value))},x.prototype.parseNewExpression=function(){var g,d=this.createNode(),C=this.parseIdentifierName();if(u.assert(C.name==="new","New expression must start with `new`"),this.match("."))if(this.nextToken(),this.lookahead.type===3&&this.context.inFunctionBody&&this.lookahead.value==="target"){var S=this.parseIdentifierName();g=new p.MetaProperty(C,S)}else this.throwUnexpectedToken(this.lookahead);else{var T=this.isolateCoverGrammar(this.parseLeftHandSideExpression),w=this.match("(")?this.parseArguments():[];g=new p.NewExpression(T,w),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(d,g)},x.prototype.parseAsyncArgument=function(){var g=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,g},x.prototype.parseAsyncArguments=function(){this.expect("(");var g=[];if(!this.match(")"))for(;;){var d=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(g.push(d),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),g},x.prototype.parseLeftHandSideExpressionAllowCall=function(){var g,d=this.lookahead,C=this.matchContextualKeyword("async"),S=this.context.allowIn;for(this.context.allowIn=!0,this.matchKeyword("super")&&this.context.inFunctionBody?(g=this.createNode(),this.nextToken(),g=this.finalize(g,new p.Super),this.match("(")||this.match(".")||this.match("[")||this.throwUnexpectedToken(this.lookahead)):g=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var T=this.parseIdentifierName();g=this.finalize(this.startNode(d),new p.StaticMemberExpression(g,T))}else if(this.match("(")){var w=C&&d.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var E=w?this.parseAsyncArguments():this.parseArguments();if(g=this.finalize(this.startNode(d),new p.CallExpression(g,E)),w&&this.match("=>")){for(var D=0;D<E.length;++D)this.reinterpretExpressionAsPattern(E[D]);g={type:"ArrowParameterPlaceHolder",params:E,async:!0}}}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),T=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),g=this.finalize(this.startNode(d),new p.ComputedMemberExpression(g,T));else{if(this.lookahead.type!==10||!this.lookahead.head)break;var b=this.parseTemplateLiteral();g=this.finalize(this.startNode(d),new p.TaggedTemplateExpression(g,b))}return this.context.allowIn=S,g},x.prototype.parseSuper=function(){var g=this.createNode();return this.expectKeyword("super"),this.match("[")||this.match(".")||this.throwUnexpectedToken(this.lookahead),this.finalize(g,new p.Super)},x.prototype.parseLeftHandSideExpression=function(){u.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var g=this.startNode(this.lookahead),d=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var C=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),d=this.finalize(g,new p.ComputedMemberExpression(d,C))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),C=this.parseIdentifierName(),d=this.finalize(g,new p.StaticMemberExpression(d,C));else{if(this.lookahead.type!==10||!this.lookahead.head)break;var S=this.parseTemplateLiteral();d=this.finalize(g,new p.TaggedTemplateExpression(d,S))}return d},x.prototype.parseUpdateExpression=function(){var g,d=this.lookahead;if(this.match("++")||this.match("--")){var C=this.startNode(d),S=this.nextToken();g=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&g.type===v.Syntax.Identifier&&this.scanner.isRestrictedWord(g.name)&&this.tolerateError(l.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(l.Messages.InvalidLHSInAssignment);var T=!0;g=this.finalize(C,new p.UpdateExpression(S.value,g,T)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(g=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&this.lookahead.type===7&&(this.match("++")||this.match("--"))){this.context.strict&&g.type===v.Syntax.Identifier&&this.scanner.isRestrictedWord(g.name)&&this.tolerateError(l.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(l.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var w=this.nextToken().value;T=!1,g=this.finalize(this.startNode(d),new p.UpdateExpression(w,g,T))}return g},x.prototype.parseAwaitExpression=function(){var g=this.createNode();this.nextToken();var d=this.parseUnaryExpression();return this.finalize(g,new p.AwaitExpression(d))},x.prototype.parseUnaryExpression=function(){var g;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var d=this.startNode(this.lookahead),C=this.nextToken();g=this.inheritCoverGrammar(this.parseUnaryExpression),g=this.finalize(d,new p.UnaryExpression(C.value,g)),this.context.strict&&g.operator==="delete"&&g.argument.type===v.Syntax.Identifier&&this.tolerateError(l.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else g=this.context.await&&this.matchContextualKeyword("await")?this.parseAwaitExpression():this.parseUpdateExpression();return g},x.prototype.parseExponentiationExpression=function(){var g=this.lookahead,d=this.inheritCoverGrammar(this.parseUnaryExpression);if(d.type!==v.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var C=d,S=this.isolateCoverGrammar(this.parseExponentiationExpression);d=this.finalize(this.startNode(g),new p.BinaryExpression("**",C,S))}return d},x.prototype.binaryPrecedence=function(g){var d=g.value;return g.type===7?this.operatorPrecedence[d]||0:g.type===4&&(d==="instanceof"||this.context.allowIn&&d==="in")?7:0},x.prototype.parseBinaryExpression=function(){var g=this.lookahead,d=this.inheritCoverGrammar(this.parseExponentiationExpression),C=this.lookahead,S=this.binaryPrecedence(C);if(S>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var T=[g,this.lookahead],w=d,E=this.isolateCoverGrammar(this.parseExponentiationExpression),D=[w,C.value,E],b=[S];!((S=this.binaryPrecedence(this.lookahead))<=0);){for(;D.length>2&&S<=b[b.length-1];){E=D.pop();var O=D.pop();b.pop(),w=D.pop(),T.pop();var M=this.startNode(T[T.length-1]);D.push(this.finalize(M,new p.BinaryExpression(O,w,E)))}D.push(this.nextToken().value),b.push(S),T.push(this.lookahead),D.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var R=D.length-1;d=D[R];for(var N=T.pop();R>1;){var U=T.pop(),W=N&&N.lineStart;M=this.startNode(U,W),O=D[R-1],d=this.finalize(M,new p.BinaryExpression(O,D[R-2],d)),R-=2,N=U}}return d},x.prototype.parseConditionalExpression=function(){var g=this.lookahead,d=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var C=this.context.allowIn;this.context.allowIn=!0;var S=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=C,this.expect(":");var T=this.isolateCoverGrammar(this.parseAssignmentExpression);d=this.finalize(this.startNode(g),new p.ConditionalExpression(d,S,T)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return d},x.prototype.checkPatternParam=function(g,d){switch(d.type){case v.Syntax.Identifier:this.validateParam(g,d,d.name);break;case v.Syntax.RestElement:this.checkPatternParam(g,d.argument);break;case v.Syntax.AssignmentPattern:this.checkPatternParam(g,d.left);break;case v.Syntax.ArrayPattern:for(var C=0;C<d.elements.length;C++)d.elements[C]!==null&&this.checkPatternParam(g,d.elements[C]);break;case v.Syntax.ObjectPattern:for(C=0;C<d.properties.length;C++)this.checkPatternParam(g,d.properties[C].value)}g.simple=g.simple&&d instanceof p.Identifier},x.prototype.reinterpretAsCoverFormalsList=function(g){var d,C=[g],S=!1;switch(g.type){case v.Syntax.Identifier:break;case"ArrowParameterPlaceHolder":C=g.params,S=g.async;break;default:return null}d={simple:!0,paramSet:{}};for(var T=0;T<C.length;++T)(w=C[T]).type===v.Syntax.AssignmentPattern?w.right.type===v.Syntax.YieldExpression&&(w.right.argument&&this.throwUnexpectedToken(this.lookahead),w.right.type=v.Syntax.Identifier,w.right.name="yield",delete w.right.argument,delete w.right.delegate):S&&w.type===v.Syntax.Identifier&&w.name==="await"&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(d,w),C[T]=w;if(this.context.strict||!this.context.allowYield)for(T=0;T<C.length;++T){var w;(w=C[T]).type===v.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(d.message===l.Messages.StrictParamDupe){var E=this.context.strict?d.stricted:d.firstRestricted;this.throwUnexpectedToken(E,d.message)}return{simple:d.simple,params:C,stricted:d.stricted,firstRestricted:d.firstRestricted,message:d.message}},x.prototype.parseAssignmentExpression=function(){var g;if(!this.context.allowYield&&this.matchKeyword("yield"))g=this.parseYieldExpression();else{var d=this.lookahead,C=d;if(g=this.parseConditionalExpression(),C.type===3&&C.lineNumber===this.lookahead.lineNumber&&C.value==="async"&&(this.lookahead.type===3||this.matchKeyword("yield"))){var S=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(S),g={type:"ArrowParameterPlaceHolder",params:[S],async:!0}}if(g.type==="ArrowParameterPlaceHolder"||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var T=g.async,w=this.reinterpretAsCoverFormalsList(g);if(w){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var E=this.context.strict,D=this.context.allowStrictDirective;this.context.allowStrictDirective=w.simple;var b=this.context.allowYield,O=this.context.await;this.context.allowYield=!0,this.context.await=T;var M=this.startNode(d);this.expect("=>");var R=void 0;if(this.match("{")){var N=this.context.allowIn;this.context.allowIn=!0,R=this.parseFunctionSourceElements(),this.context.allowIn=N}else R=this.isolateCoverGrammar(this.parseAssignmentExpression);var U=R.type!==v.Syntax.BlockStatement;this.context.strict&&w.firstRestricted&&this.throwUnexpectedToken(w.firstRestricted,w.message),this.context.strict&&w.stricted&&this.tolerateUnexpectedToken(w.stricted,w.message),g=T?this.finalize(M,new p.AsyncArrowFunctionExpression(w.params,R,U)):this.finalize(M,new p.ArrowFunctionExpression(w.params,R,U)),this.context.strict=E,this.context.allowStrictDirective=D,this.context.allowYield=b,this.context.await=O}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(l.Messages.InvalidLHSInAssignment),this.context.strict&&g.type===v.Syntax.Identifier){var W=g;this.scanner.isRestrictedWord(W.name)&&this.tolerateUnexpectedToken(C,l.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(W.name)&&this.tolerateUnexpectedToken(C,l.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(g):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);var I=(C=this.nextToken()).value,G=this.isolateCoverGrammar(this.parseAssignmentExpression);g=this.finalize(this.startNode(d),new p.AssignmentExpression(I,g,G)),this.context.firstCoverInitializedNameError=null}}return g},x.prototype.parseExpression=function(){var g=this.lookahead,d=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var C=[];for(C.push(d);this.lookahead.type!==2&&this.match(",");)this.nextToken(),C.push(this.isolateCoverGrammar(this.parseAssignmentExpression));d=this.finalize(this.startNode(g),new p.SequenceExpression(C))}return d},x.prototype.parseStatementListItem=function(){var g;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,this.lookahead.type===4)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,l.Messages.IllegalExportDeclaration),g=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,l.Messages.IllegalImportDeclaration),g=this.parseImportDeclaration();break;case"const":g=this.parseLexicalDeclaration({inFor:!1});break;case"function":g=this.parseFunctionDeclaration();break;case"class":g=this.parseClassDeclaration();break;case"let":g=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:g=this.parseStatement()}else g=this.parseStatement();return g},x.prototype.parseBlock=function(){var g=this.createNode();this.expect("{");for(var d=[];!this.match("}");)d.push(this.parseStatementListItem());return this.expect("}"),this.finalize(g,new p.BlockStatement(d))},x.prototype.parseLexicalBinding=function(g,d){var C=this.createNode(),S=this.parsePattern([],g);this.context.strict&&S.type===v.Syntax.Identifier&&this.scanner.isRestrictedWord(S.name)&&this.tolerateError(l.Messages.StrictVarName);var T=null;return g==="const"?this.matchKeyword("in")||this.matchContextualKeyword("of")||(this.match("=")?(this.nextToken(),T=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(l.Messages.DeclarationMissingInitializer,"const")):(!d.inFor&&S.type!==v.Syntax.Identifier||this.match("="))&&(this.expect("="),T=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(C,new p.VariableDeclarator(S,T))},x.prototype.parseBindingList=function(g,d){for(var C=[this.parseLexicalBinding(g,d)];this.match(",");)this.nextToken(),C.push(this.parseLexicalBinding(g,d));return C},x.prototype.isLexicalDeclaration=function(){var g=this.scanner.saveState();this.scanner.scanComments();var d=this.scanner.lex();return this.scanner.restoreState(g),d.type===3||d.type===7&&d.value==="["||d.type===7&&d.value==="{"||d.type===4&&d.value==="let"||d.type===4&&d.value==="yield"},x.prototype.parseLexicalDeclaration=function(g){var d=this.createNode(),C=this.nextToken().value;u.assert(C==="let"||C==="const","Lexical declaration must be either let or const");var S=this.parseBindingList(C,g);return this.consumeSemicolon(),this.finalize(d,new p.VariableDeclaration(S,C))},x.prototype.parseBindingRestElement=function(g,d){var C=this.createNode();this.expect("...");var S=this.parsePattern(g,d);return this.finalize(C,new p.RestElement(S))},x.prototype.parseArrayPattern=function(g,d){var C=this.createNode();this.expect("[");for(var S=[];!this.match("]");)if(this.match(","))this.nextToken(),S.push(null);else{if(this.match("...")){S.push(this.parseBindingRestElement(g,d));break}S.push(this.parsePatternWithDefault(g,d)),this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(C,new p.ArrayPattern(S))},x.prototype.parsePropertyPattern=function(g,d){var C,S,T=this.createNode(),w=!1,E=!1;if(this.lookahead.type===3){var D=this.lookahead;C=this.parseVariableIdentifier();var b=this.finalize(T,new p.Identifier(D.value));if(this.match("=")){g.push(D),E=!0,this.nextToken();var O=this.parseAssignmentExpression();S=this.finalize(this.startNode(D),new p.AssignmentPattern(b,O))}else this.match(":")?(this.expect(":"),S=this.parsePatternWithDefault(g,d)):(g.push(D),E=!0,S=b)}else w=this.match("["),C=this.parseObjectPropertyKey(),this.expect(":"),S=this.parsePatternWithDefault(g,d);return this.finalize(T,new p.Property("init",C,w,S,!1,E))},x.prototype.parseObjectPattern=function(g,d){var C=this.createNode(),S=[];for(this.expect("{");!this.match("}");)S.push(this.parsePropertyPattern(g,d)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(C,new p.ObjectPattern(S))},x.prototype.parsePattern=function(g,d){var C;return this.match("[")?C=this.parseArrayPattern(g,d):this.match("{")?C=this.parseObjectPattern(g,d):(!this.matchKeyword("let")||d!=="const"&&d!=="let"||this.tolerateUnexpectedToken(this.lookahead,l.Messages.LetInLexicalBinding),g.push(this.lookahead),C=this.parseVariableIdentifier(d)),C},x.prototype.parsePatternWithDefault=function(g,d){var C=this.lookahead,S=this.parsePattern(g,d);if(this.match("=")){this.nextToken();var T=this.context.allowYield;this.context.allowYield=!0;var w=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=T,S=this.finalize(this.startNode(C),new p.AssignmentPattern(S,w))}return S},x.prototype.parseVariableIdentifier=function(g){var d=this.createNode(),C=this.nextToken();return C.type===4&&C.value==="yield"?this.context.strict?this.tolerateUnexpectedToken(C,l.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(C):C.type!==3?this.context.strict&&C.type===4&&this.scanner.isStrictModeReservedWord(C.value)?this.tolerateUnexpectedToken(C,l.Messages.StrictReservedWord):(this.context.strict||C.value!=="let"||g!=="var")&&this.throwUnexpectedToken(C):(this.context.isModule||this.context.await)&&C.type===3&&C.value==="await"&&this.tolerateUnexpectedToken(C),this.finalize(d,new p.Identifier(C.value))},x.prototype.parseVariableDeclaration=function(g){var d=this.createNode(),C=this.parsePattern([],"var");this.context.strict&&C.type===v.Syntax.Identifier&&this.scanner.isRestrictedWord(C.name)&&this.tolerateError(l.Messages.StrictVarName);var S=null;return this.match("=")?(this.nextToken(),S=this.isolateCoverGrammar(this.parseAssignmentExpression)):C.type===v.Syntax.Identifier||g.inFor||this.expect("="),this.finalize(d,new p.VariableDeclarator(C,S))},x.prototype.parseVariableDeclarationList=function(g){var d={inFor:g.inFor},C=[];for(C.push(this.parseVariableDeclaration(d));this.match(",");)this.nextToken(),C.push(this.parseVariableDeclaration(d));return C},x.prototype.parseVariableStatement=function(){var g=this.createNode();this.expectKeyword("var");var d=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(g,new p.VariableDeclaration(d,"var"))},x.prototype.parseEmptyStatement=function(){var g=this.createNode();return this.expect(";"),this.finalize(g,new p.EmptyStatement)},x.prototype.parseExpressionStatement=function(){var g=this.createNode(),d=this.parseExpression();return this.consumeSemicolon(),this.finalize(g,new p.ExpressionStatement(d))},x.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(l.Messages.StrictFunction),this.parseStatement()},x.prototype.parseIfStatement=function(){var g,d=this.createNode(),C=null;this.expectKeyword("if"),this.expect("(");var S=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),g=this.finalize(this.createNode(),new p.EmptyStatement)):(this.expect(")"),g=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),C=this.parseIfClause())),this.finalize(d,new p.IfStatement(S,g,C))},x.prototype.parseDoWhileStatement=function(){var g=this.createNode();this.expectKeyword("do");var d=this.context.inIteration;this.context.inIteration=!0;var C=this.parseStatement();this.context.inIteration=d,this.expectKeyword("while"),this.expect("(");var S=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(g,new p.DoWhileStatement(C,S))},x.prototype.parseWhileStatement=function(){var g,d=this.createNode();this.expectKeyword("while"),this.expect("(");var C=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),g=this.finalize(this.createNode(),new p.EmptyStatement);else{this.expect(")");var S=this.context.inIteration;this.context.inIteration=!0,g=this.parseStatement(),this.context.inIteration=S}return this.finalize(d,new p.WhileStatement(C,g))},x.prototype.parseForStatement=function(){var g,d,C,S=null,T=null,w=null,E=!0,D=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){S=this.createNode(),this.nextToken();var b=this.context.allowIn;this.context.allowIn=!1;var O=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=b,O.length===1&&this.matchKeyword("in")){var M=O[0];M.init&&(M.id.type===v.Syntax.ArrayPattern||M.id.type===v.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(l.Messages.ForInOfLoopInitializer,"for-in"),S=this.finalize(S,new p.VariableDeclaration(O,"var")),this.nextToken(),g=S,d=this.parseExpression(),S=null}else O.length===1&&O[0].init===null&&this.matchContextualKeyword("of")?(S=this.finalize(S,new p.VariableDeclaration(O,"var")),this.nextToken(),g=S,d=this.parseAssignmentExpression(),S=null,E=!1):(S=this.finalize(S,new p.VariableDeclaration(O,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){S=this.createNode();var R=this.nextToken().value;this.context.strict||this.lookahead.value!=="in"?(b=this.context.allowIn,this.context.allowIn=!1,O=this.parseBindingList(R,{inFor:!0}),this.context.allowIn=b,O.length===1&&O[0].init===null&&this.matchKeyword("in")?(S=this.finalize(S,new p.VariableDeclaration(O,R)),this.nextToken(),g=S,d=this.parseExpression(),S=null):O.length===1&&O[0].init===null&&this.matchContextualKeyword("of")?(S=this.finalize(S,new p.VariableDeclaration(O,R)),this.nextToken(),g=S,d=this.parseAssignmentExpression(),S=null,E=!1):(this.consumeSemicolon(),S=this.finalize(S,new p.VariableDeclaration(O,R)))):(S=this.finalize(S,new p.Identifier(R)),this.nextToken(),g=S,d=this.parseExpression(),S=null)}else{var N=this.lookahead;if(b=this.context.allowIn,this.context.allowIn=!1,S=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=b,this.matchKeyword("in"))this.context.isAssignmentTarget&&S.type!==v.Syntax.AssignmentExpression||this.tolerateError(l.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(S),g=S,d=this.parseExpression(),S=null;else if(this.matchContextualKeyword("of"))this.context.isAssignmentTarget&&S.type!==v.Syntax.AssignmentExpression||this.tolerateError(l.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(S),g=S,d=this.parseAssignmentExpression(),S=null,E=!1;else{if(this.match(",")){for(var U=[S];this.match(",");)this.nextToken(),U.push(this.isolateCoverGrammar(this.parseAssignmentExpression));S=this.finalize(this.startNode(N),new p.SequenceExpression(U))}this.expect(";")}}if(g===void 0&&(this.match(";")||(T=this.parseExpression()),this.expect(";"),this.match(")")||(w=this.parseExpression())),!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),C=this.finalize(this.createNode(),new p.EmptyStatement);else{this.expect(")");var W=this.context.inIteration;this.context.inIteration=!0,C=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=W}return g===void 0?this.finalize(D,new p.ForStatement(S,T,w,C)):E?this.finalize(D,new p.ForInStatement(g,d,C)):this.finalize(D,new p.ForOfStatement(g,d,C))},x.prototype.parseContinueStatement=function(){var g=this.createNode();this.expectKeyword("continue");var d=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var C=this.parseVariableIdentifier();d=C;var S="$"+C.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,S)||this.throwError(l.Messages.UnknownLabel,C.name)}return this.consumeSemicolon(),d!==null||this.context.inIteration||this.throwError(l.Messages.IllegalContinue),this.finalize(g,new p.ContinueStatement(d))},x.prototype.parseBreakStatement=function(){var g=this.createNode();this.expectKeyword("break");var d=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var C=this.parseVariableIdentifier(),S="$"+C.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,S)||this.throwError(l.Messages.UnknownLabel,C.name),d=C}return this.consumeSemicolon(),d!==null||this.context.inIteration||this.context.inSwitch||this.throwError(l.Messages.IllegalBreak),this.finalize(g,new p.BreakStatement(d))},x.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(l.Messages.IllegalReturn);var g=this.createNode();this.expectKeyword("return");var d=(this.match(";")||this.match("}")||this.hasLineTerminator||this.lookahead.type===2)&&this.lookahead.type!==8&&this.lookahead.type!==10?null:this.parseExpression();return this.consumeSemicolon(),this.finalize(g,new p.ReturnStatement(d))},x.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(l.Messages.StrictModeWith);var g,d=this.createNode();this.expectKeyword("with"),this.expect("(");var C=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),g=this.finalize(this.createNode(),new p.EmptyStatement)):(this.expect(")"),g=this.parseStatement()),this.finalize(d,new p.WithStatement(C,g))},x.prototype.parseSwitchCase=function(){var g,d=this.createNode();this.matchKeyword("default")?(this.nextToken(),g=null):(this.expectKeyword("case"),g=this.parseExpression()),this.expect(":");for(var C=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)C.push(this.parseStatementListItem());return this.finalize(d,new p.SwitchCase(g,C))},x.prototype.parseSwitchStatement=function(){var g=this.createNode();this.expectKeyword("switch"),this.expect("(");var d=this.parseExpression();this.expect(")");var C=this.context.inSwitch;this.context.inSwitch=!0;var S=[],T=!1;for(this.expect("{");!this.match("}");){var w=this.parseSwitchCase();w.test===null&&(T&&this.throwError(l.Messages.MultipleDefaultsInSwitch),T=!0),S.push(w)}return this.expect("}"),this.context.inSwitch=C,this.finalize(g,new p.SwitchStatement(d,S))},x.prototype.parseLabelledStatement=function(){var g,d=this.createNode(),C=this.parseExpression();if(C.type===v.Syntax.Identifier&&this.match(":")){this.nextToken();var S=C,T="$"+S.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,T)&&this.throwError(l.Messages.Redeclaration,"Label",S.name),this.context.labelSet[T]=!0;var w=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),w=this.parseClassDeclaration();else if(this.matchKeyword("function")){var E=this.lookahead,D=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(E,l.Messages.StrictFunction):D.generator&&this.tolerateUnexpectedToken(E,l.Messages.GeneratorInLegacyContext),w=D}else w=this.parseStatement();delete this.context.labelSet[T],g=new p.LabeledStatement(S,w)}else this.consumeSemicolon(),g=new p.ExpressionStatement(C);return this.finalize(d,g)},x.prototype.parseThrowStatement=function(){var g=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(l.Messages.NewlineAfterThrow);var d=this.parseExpression();return this.consumeSemicolon(),this.finalize(g,new p.ThrowStatement(d))},x.prototype.parseCatchClause=function(){var g=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var d=[],C=this.parsePattern(d),S={},T=0;T<d.length;T++){var w="$"+d[T].value;Object.prototype.hasOwnProperty.call(S,w)&&this.tolerateError(l.Messages.DuplicateBinding,d[T].value),S[w]=!0}this.context.strict&&C.type===v.Syntax.Identifier&&this.scanner.isRestrictedWord(C.name)&&this.tolerateError(l.Messages.StrictCatchVariable),this.expect(")");var E=this.parseBlock();return this.finalize(g,new p.CatchClause(C,E))},x.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},x.prototype.parseTryStatement=function(){var g=this.createNode();this.expectKeyword("try");var d=this.parseBlock(),C=this.matchKeyword("catch")?this.parseCatchClause():null,S=this.matchKeyword("finally")?this.parseFinallyClause():null;return C||S||this.throwError(l.Messages.NoCatchOrFinally),this.finalize(g,new p.TryStatement(d,C,S))},x.prototype.parseDebuggerStatement=function(){var g=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(g,new p.DebuggerStatement)},x.prototype.parseStatement=function(){var g;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:g=this.parseExpressionStatement();break;case 7:var d=this.lookahead.value;g=d==="{"?this.parseBlock():d==="("?this.parseExpressionStatement():d===";"?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:g=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":g=this.parseBreakStatement();break;case"continue":g=this.parseContinueStatement();break;case"debugger":g=this.parseDebuggerStatement();break;case"do":g=this.parseDoWhileStatement();break;case"for":g=this.parseForStatement();break;case"function":g=this.parseFunctionDeclaration();break;case"if":g=this.parseIfStatement();break;case"return":g=this.parseReturnStatement();break;case"switch":g=this.parseSwitchStatement();break;case"throw":g=this.parseThrowStatement();break;case"try":g=this.parseTryStatement();break;case"var":g=this.parseVariableStatement();break;case"while":g=this.parseWhileStatement();break;case"with":g=this.parseWithStatement();break;default:g=this.parseExpressionStatement()}break;default:g=this.throwUnexpectedToken(this.lookahead)}return g},x.prototype.parseFunctionSourceElements=function(){var g=this.createNode();this.expect("{");var d=this.parseDirectivePrologues(),C=this.context.labelSet,S=this.context.inIteration,T=this.context.inSwitch,w=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;this.lookahead.type!==2&&!this.match("}");)d.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=C,this.context.inIteration=S,this.context.inSwitch=T,this.context.inFunctionBody=w,this.finalize(g,new p.BlockStatement(d))},x.prototype.validateParam=function(g,d,C){var S="$"+C;this.context.strict?(this.scanner.isRestrictedWord(C)&&(g.stricted=d,g.message=l.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(g.paramSet,S)&&(g.stricted=d,g.message=l.Messages.StrictParamDupe)):g.firstRestricted||(this.scanner.isRestrictedWord(C)?(g.firstRestricted=d,g.message=l.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(C)?(g.firstRestricted=d,g.message=l.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(g.paramSet,S)&&(g.stricted=d,g.message=l.Messages.StrictParamDupe)),typeof Object.defineProperty=="function"?Object.defineProperty(g.paramSet,S,{value:!0,enumerable:!0,writable:!0,configurable:!0}):g.paramSet[S]=!0},x.prototype.parseRestElement=function(g){var d=this.createNode();this.expect("...");var C=this.parsePattern(g);return this.match("=")&&this.throwError(l.Messages.DefaultRestParameter),this.match(")")||this.throwError(l.Messages.ParameterAfterRestParameter),this.finalize(d,new p.RestElement(C))},x.prototype.parseFormalParameter=function(g){for(var d=[],C=this.match("...")?this.parseRestElement(d):this.parsePatternWithDefault(d),S=0;S<d.length;S++)this.validateParam(g,d[S],d[S].value);g.simple=g.simple&&C instanceof p.Identifier,g.params.push(C)},x.prototype.parseFormalParameters=function(g){var d;if(d={simple:!0,params:[],firstRestricted:g},this.expect("("),!this.match(")"))for(d.paramSet={};this.lookahead.type!==2&&(this.parseFormalParameter(d),!this.match(")"))&&(this.expect(","),!this.match(")")););return this.expect(")"),{simple:d.simple,params:d.params,stricted:d.stricted,firstRestricted:d.firstRestricted,message:d.message}},x.prototype.matchAsyncFunction=function(){var g=this.matchContextualKeyword("async");if(g){var d=this.scanner.saveState();this.scanner.scanComments();var C=this.scanner.lex();this.scanner.restoreState(d),g=d.lineNumber===C.lineNumber&&C.type===4&&C.value==="function"}return g},x.prototype.parseFunctionDeclaration=function(g){var d=this.createNode(),C=this.matchContextualKeyword("async");C&&this.nextToken(),this.expectKeyword("function");var S,T=!C&&this.match("*");T&&this.nextToken();var w=null,E=null;if(!g||!this.match("(")){var D=this.lookahead;w=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(D.value)&&this.tolerateUnexpectedToken(D,l.Messages.StrictFunctionName):this.scanner.isRestrictedWord(D.value)?(E=D,S=l.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(D.value)&&(E=D,S=l.Messages.StrictReservedWord)}var b=this.context.await,O=this.context.allowYield;this.context.await=C,this.context.allowYield=!T;var M=this.parseFormalParameters(E),R=M.params,N=M.stricted;E=M.firstRestricted,M.message&&(S=M.message);var U=this.context.strict,W=this.context.allowStrictDirective;this.context.allowStrictDirective=M.simple;var I=this.parseFunctionSourceElements();return this.context.strict&&E&&this.throwUnexpectedToken(E,S),this.context.strict&&N&&this.tolerateUnexpectedToken(N,S),this.context.strict=U,this.context.allowStrictDirective=W,this.context.await=b,this.context.allowYield=O,C?this.finalize(d,new p.AsyncFunctionDeclaration(w,R,I)):this.finalize(d,new p.FunctionDeclaration(w,R,I,T))},x.prototype.parseFunctionExpression=function(){var g=this.createNode(),d=this.matchContextualKeyword("async");d&&this.nextToken(),this.expectKeyword("function");var C,S=!d&&this.match("*");S&&this.nextToken();var T,w=null,E=this.context.await,D=this.context.allowYield;if(this.context.await=d,this.context.allowYield=!S,!this.match("(")){var b=this.lookahead;w=this.context.strict||S||!this.matchKeyword("yield")?this.parseVariableIdentifier():this.parseIdentifierName(),this.context.strict?this.scanner.isRestrictedWord(b.value)&&this.tolerateUnexpectedToken(b,l.Messages.StrictFunctionName):this.scanner.isRestrictedWord(b.value)?(T=b,C=l.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(b.value)&&(T=b,C=l.Messages.StrictReservedWord)}var O=this.parseFormalParameters(T),M=O.params,R=O.stricted;T=O.firstRestricted,O.message&&(C=O.message);var N=this.context.strict,U=this.context.allowStrictDirective;this.context.allowStrictDirective=O.simple;var W=this.parseFunctionSourceElements();return this.context.strict&&T&&this.throwUnexpectedToken(T,C),this.context.strict&&R&&this.tolerateUnexpectedToken(R,C),this.context.strict=N,this.context.allowStrictDirective=U,this.context.await=E,this.context.allowYield=D,d?this.finalize(g,new p.AsyncFunctionExpression(w,M,W)):this.finalize(g,new p.FunctionExpression(w,M,W,S))},x.prototype.parseDirective=function(){var g=this.lookahead,d=this.createNode(),C=this.parseExpression(),S=C.type===v.Syntax.Literal?this.getTokenRaw(g).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(d,S?new p.Directive(C,S):new p.ExpressionStatement(C))},x.prototype.parseDirectivePrologues=function(){for(var g=null,d=[];;){var C=this.lookahead;if(C.type!==8)break;var S=this.parseDirective();d.push(S);var T=S.directive;if(typeof T!="string")break;T==="use strict"?(this.context.strict=!0,g&&this.tolerateUnexpectedToken(g,l.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(C,l.Messages.IllegalLanguageModeDirective)):!g&&C.octal&&(g=C)}return d},x.prototype.qualifiedPropertyName=function(g){switch(g.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return g.value==="["}return!1},x.prototype.parseGetterMethod=function(){var g=this.createNode(),d=this.context.allowYield;this.context.allowYield=!0;var C=this.parseFormalParameters();C.params.length>0&&this.tolerateError(l.Messages.BadGetterArity);var S=this.parsePropertyMethod(C);return this.context.allowYield=d,this.finalize(g,new p.FunctionExpression(null,C.params,S,!1))},x.prototype.parseSetterMethod=function(){var g=this.createNode(),d=this.context.allowYield;this.context.allowYield=!0;var C=this.parseFormalParameters();C.params.length!==1?this.tolerateError(l.Messages.BadSetterArity):C.params[0]instanceof p.RestElement&&this.tolerateError(l.Messages.BadSetterRestParameter);var S=this.parsePropertyMethod(C);return this.context.allowYield=d,this.finalize(g,new p.FunctionExpression(null,C.params,S,!1))},x.prototype.parseGeneratorMethod=function(){var g=this.createNode(),d=this.context.allowYield;this.context.allowYield=!0;var C=this.parseFormalParameters();this.context.allowYield=!1;var S=this.parsePropertyMethod(C);return this.context.allowYield=d,this.finalize(g,new p.FunctionExpression(null,C.params,S,!0))},x.prototype.isStartOfExpression=function(){var g=!0,d=this.lookahead.value;switch(this.lookahead.type){case 7:g=d==="["||d==="("||d==="{"||d==="+"||d==="-"||d==="!"||d==="~"||d==="++"||d==="--"||d==="/"||d==="/=";break;case 4:g=d==="class"||d==="delete"||d==="function"||d==="let"||d==="new"||d==="super"||d==="this"||d==="typeof"||d==="void"||d==="yield"}return g},x.prototype.parseYieldExpression=function(){var g=this.createNode();this.expectKeyword("yield");var d=null,C=!1;if(!this.hasLineTerminator){var S=this.context.allowYield;this.context.allowYield=!1,(C=this.match("*"))?(this.nextToken(),d=this.parseAssignmentExpression()):this.isStartOfExpression()&&(d=this.parseAssignmentExpression()),this.context.allowYield=S}return this.finalize(g,new p.YieldExpression(d,C))},x.prototype.parseClassElement=function(g){var d=this.lookahead,C=this.createNode(),S="",T=null,w=null,E=!1,D=!1,b=!1,O=!1;if(this.match("*"))this.nextToken();else if(E=this.match("["),(T=this.parseObjectPropertyKey()).name==="static"&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(d=this.lookahead,b=!0,E=this.match("["),this.match("*")?this.nextToken():T=this.parseObjectPropertyKey()),d.type===3&&!this.hasLineTerminator&&d.value==="async"){var M=this.lookahead.value;M!==":"&&M!=="("&&M!=="*"&&(O=!0,d=this.lookahead,T=this.parseObjectPropertyKey(),d.type===3&&d.value==="constructor"&&this.tolerateUnexpectedToken(d,l.Messages.ConstructorIsAsync))}var R=this.qualifiedPropertyName(this.lookahead);return d.type===3?d.value==="get"&&R?(S="get",E=this.match("["),T=this.parseObjectPropertyKey(),this.context.allowYield=!1,w=this.parseGetterMethod()):d.value==="set"&&R&&(S="set",E=this.match("["),T=this.parseObjectPropertyKey(),w=this.parseSetterMethod()):d.type===7&&d.value==="*"&&R&&(S="init",E=this.match("["),T=this.parseObjectPropertyKey(),w=this.parseGeneratorMethod(),D=!0),!S&&T&&this.match("(")&&(S="init",w=O?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),D=!0),S||this.throwUnexpectedToken(this.lookahead),S==="init"&&(S="method"),E||(b&&this.isPropertyKey(T,"prototype")&&this.throwUnexpectedToken(d,l.Messages.StaticPrototype),!b&&this.isPropertyKey(T,"constructor")&&((S!=="method"||!D||w&&w.generator)&&this.throwUnexpectedToken(d,l.Messages.ConstructorSpecialMethod),g.value?this.throwUnexpectedToken(d,l.Messages.DuplicateConstructor):g.value=!0,S="constructor")),this.finalize(C,new p.MethodDefinition(T,E,w,S,b))},x.prototype.parseClassElementList=function(){var g=[],d={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():g.push(this.parseClassElement(d));return this.expect("}"),g},x.prototype.parseClassBody=function(){var g=this.createNode(),d=this.parseClassElementList();return this.finalize(g,new p.ClassBody(d))},x.prototype.parseClassDeclaration=function(g){var d=this.createNode(),C=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var S=g&&this.lookahead.type!==3?null:this.parseVariableIdentifier(),T=null;this.matchKeyword("extends")&&(this.nextToken(),T=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var w=this.parseClassBody();return this.context.strict=C,this.finalize(d,new p.ClassDeclaration(S,T,w))},x.prototype.parseClassExpression=function(){var g=this.createNode(),d=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var C=this.lookahead.type===3?this.parseVariableIdentifier():null,S=null;this.matchKeyword("extends")&&(this.nextToken(),S=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var T=this.parseClassBody();return this.context.strict=d,this.finalize(g,new p.ClassExpression(C,S,T))},x.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var g=this.createNode(),d=this.parseDirectivePrologues();this.lookahead.type!==2;)d.push(this.parseStatementListItem());return this.finalize(g,new p.Module(d))},x.prototype.parseScript=function(){for(var g=this.createNode(),d=this.parseDirectivePrologues();this.lookahead.type!==2;)d.push(this.parseStatementListItem());return this.finalize(g,new p.Script(d))},x.prototype.parseModuleSpecifier=function(){var g=this.createNode();this.lookahead.type!==8&&this.throwError(l.Messages.InvalidModuleSpecifier);var d=this.nextToken(),C=this.getTokenRaw(d);return this.finalize(g,new p.Literal(d.value,C))},x.prototype.parseImportSpecifier=function(){var g,d,C=this.createNode();return this.lookahead.type===3?(d=g=this.parseVariableIdentifier(),this.matchContextualKeyword("as")&&(this.nextToken(),d=this.parseVariableIdentifier())):(d=g=this.parseIdentifierName(),this.matchContextualKeyword("as")?(this.nextToken(),d=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(C,new p.ImportSpecifier(d,g))},x.prototype.parseNamedImports=function(){this.expect("{");for(var g=[];!this.match("}");)g.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),g},x.prototype.parseImportDefaultSpecifier=function(){var g=this.createNode(),d=this.parseIdentifierName();return this.finalize(g,new p.ImportDefaultSpecifier(d))},x.prototype.parseImportNamespaceSpecifier=function(){var g=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(l.Messages.NoAsAfterImportNamespace),this.nextToken();var d=this.parseIdentifierName();return this.finalize(g,new p.ImportNamespaceSpecifier(d))},x.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(l.Messages.IllegalImportDeclaration);var g,d=this.createNode();this.expectKeyword("import");var C=[];if(this.lookahead.type===8)g=this.parseModuleSpecifier();else{if(this.match("{")?C=C.concat(this.parseNamedImports()):this.match("*")?C.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(C.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?C.push(this.parseImportNamespaceSpecifier()):this.match("{")?C=C.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var S=this.lookahead.value?l.Messages.UnexpectedToken:l.Messages.MissingFromClause;this.throwError(S,this.lookahead.value)}this.nextToken(),g=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(d,new p.ImportDeclaration(C,g))},x.prototype.parseExportSpecifier=function(){var g=this.createNode(),d=this.parseIdentifierName(),C=d;return this.matchContextualKeyword("as")&&(this.nextToken(),C=this.parseIdentifierName()),this.finalize(g,new p.ExportSpecifier(d,C))},x.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(l.Messages.IllegalExportDeclaration);var g,d=this.createNode();if(this.expectKeyword("export"),this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var C=this.parseFunctionDeclaration(!0);g=this.finalize(d,new p.ExportDefaultDeclaration(C))}else this.matchKeyword("class")?(C=this.parseClassDeclaration(!0),g=this.finalize(d,new p.ExportDefaultDeclaration(C))):this.matchContextualKeyword("async")?(C=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression(),g=this.finalize(d,new p.ExportDefaultDeclaration(C))):(this.matchContextualKeyword("from")&&this.throwError(l.Messages.UnexpectedToken,this.lookahead.value),C=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression(),this.consumeSemicolon(),g=this.finalize(d,new p.ExportDefaultDeclaration(C)));else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var S=this.lookahead.value?l.Messages.UnexpectedToken:l.Messages.MissingFromClause;this.throwError(S,this.lookahead.value)}this.nextToken();var T=this.parseModuleSpecifier();this.consumeSemicolon(),g=this.finalize(d,new p.ExportAllDeclaration(T))}else if(this.lookahead.type===4){switch(C=void 0,this.lookahead.value){case"let":case"const":C=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":C=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}g=this.finalize(d,new p.ExportNamedDeclaration(C,[],null))}else if(this.matchAsyncFunction())C=this.parseFunctionDeclaration(),g=this.finalize(d,new p.ExportNamedDeclaration(C,[],null));else{var w=[],E=null,D=!1;for(this.expect("{");!this.match("}");)D=D||this.matchKeyword("default"),w.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");this.expect("}"),this.matchContextualKeyword("from")?(this.nextToken(),E=this.parseModuleSpecifier(),this.consumeSemicolon()):D?(S=this.lookahead.value?l.Messages.UnexpectedToken:l.Messages.MissingFromClause,this.throwError(S,this.lookahead.value)):this.consumeSemicolon(),g=this.finalize(d,new p.ExportNamedDeclaration(null,w,E))}return g},x}();s.Parser=m},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.assert=function(c,u){if(!c)throw new Error("ASSERT: "+u)}},function(o,s){Object.defineProperty(s,"__esModule",{value:!0});var c=function(){function u(){this.errors=[],this.tolerant=!1}return u.prototype.recordError=function(f){this.errors.push(f)},u.prototype.tolerate=function(f){if(!this.tolerant)throw f;this.recordError(f)},u.prototype.constructError=function(f,l){var p=new Error(f);try{throw p}catch(h){Object.create&&Object.defineProperty&&(p=Object.create(h),Object.defineProperty(p,"column",{value:l}))}return p},u.prototype.createError=function(f,l,p,h){var v="Line "+l+": "+h,y=this.constructError(v,p);return y.index=f,y.lineNumber=l,y.description=h,y},u.prototype.throwError=function(f,l,p,h){throw this.createError(f,l,p,h)},u.prototype.tolerateError=function(f,l,p,h){var v=this.createError(f,l,p,h);if(!this.tolerant)throw v;this.recordError(v)},u}();s.ErrorHandler=c},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(o,s,c){Object.defineProperty(s,"__esModule",{value:!0});var u=c(9),f=c(4),l=c(11);function p(y){return"0123456789abcdef".indexOf(y.toLowerCase())}function h(y){return"01234567".indexOf(y)}var v=function(){function y(m,x){this.source=m,this.errorHandler=x,this.trackComment=!1,this.isModule=!1,this.length=m.length,this.index=0,this.lineNumber=m.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return y.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},y.prototype.restoreState=function(m){this.index=m.index,this.lineNumber=m.lineNumber,this.lineStart=m.lineStart},y.prototype.eof=function(){return this.index>=this.length},y.prototype.throwUnexpectedToken=function(m){return m===void 0&&(m=l.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,m)},y.prototype.tolerateUnexpectedToken=function(m){m===void 0&&(m=l.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,m)},y.prototype.skipSingleLineComment=function(m){var x,g,d=[];for(this.trackComment&&(d=[],x=this.index-m,g={start:{line:this.lineNumber,column:this.index-this.lineStart-m},end:{}});!this.eof();){var C=this.source.charCodeAt(this.index);if(++this.index,f.Character.isLineTerminator(C)){if(this.trackComment){g.end={line:this.lineNumber,column:this.index-this.lineStart-1};var S={multiLine:!1,slice:[x+m,this.index-1],range:[x,this.index-1],loc:g};d.push(S)}return C===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,d}}return this.trackComment&&(g.end={line:this.lineNumber,column:this.index-this.lineStart},S={multiLine:!1,slice:[x+m,this.index],range:[x,this.index],loc:g},d.push(S)),d},y.prototype.skipMultiLineComment=function(){var m,x,g=[];for(this.trackComment&&(g=[],m=this.index-2,x={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var d=this.source.charCodeAt(this.index);if(f.Character.isLineTerminator(d))d===13&&this.source.charCodeAt(this.index+1)===10&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(d===42){if(this.source.charCodeAt(this.index+1)===47){if(this.index+=2,this.trackComment){x.end={line:this.lineNumber,column:this.index-this.lineStart};var C={multiLine:!0,slice:[m+2,this.index-2],range:[m,this.index],loc:x};g.push(C)}return g}++this.index}else++this.index}return this.trackComment&&(x.end={line:this.lineNumber,column:this.index-this.lineStart},C={multiLine:!0,slice:[m+2,this.index],range:[m,this.index],loc:x},g.push(C)),this.tolerateUnexpectedToken(),g},y.prototype.scanComments=function(){var m;this.trackComment&&(m=[]);for(var x=this.index===0;!this.eof();){var g=this.source.charCodeAt(this.index);if(f.Character.isWhiteSpace(g))++this.index;else if(f.Character.isLineTerminator(g))++this.index,g===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,x=!0;else if(g===47)if((g=this.source.charCodeAt(this.index+1))===47){this.index+=2;var d=this.skipSingleLineComment(2);this.trackComment&&(m=m.concat(d)),x=!0}else{if(g!==42)break;this.index+=2,d=this.skipMultiLineComment(),this.trackComment&&(m=m.concat(d))}else if(x&&g===45){if(this.source.charCodeAt(this.index+1)!==45||this.source.charCodeAt(this.index+2)!==62)break;this.index+=3,d=this.skipSingleLineComment(3),this.trackComment&&(m=m.concat(d))}else{if(g!==60||this.isModule||this.source.slice(this.index+1,this.index+4)!=="!--")break;this.index+=4,d=this.skipSingleLineComment(4),this.trackComment&&(m=m.concat(d))}}return m},y.prototype.isFutureReservedWord=function(m){switch(m){case"enum":case"export":case"import":case"super":return!0;default:return!1}},y.prototype.isStrictModeReservedWord=function(m){switch(m){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},y.prototype.isRestrictedWord=function(m){return m==="eval"||m==="arguments"},y.prototype.isKeyword=function(m){switch(m.length){case 2:return m==="if"||m==="in"||m==="do";case 3:return m==="var"||m==="for"||m==="new"||m==="try"||m==="let";case 4:return m==="this"||m==="else"||m==="case"||m==="void"||m==="with"||m==="enum";case 5:return m==="while"||m==="break"||m==="catch"||m==="throw"||m==="const"||m==="yield"||m==="class"||m==="super";case 6:return m==="return"||m==="typeof"||m==="delete"||m==="switch"||m==="export"||m==="import";case 7:return m==="default"||m==="finally"||m==="extends";case 8:return m==="function"||m==="continue"||m==="debugger";case 10:return m==="instanceof";default:return!1}},y.prototype.codePointAt=function(m){var x=this.source.charCodeAt(m);if(x>=55296&&x<=56319){var g=this.source.charCodeAt(m+1);g>=56320&&g<=57343&&(x=1024*(x-55296)+g-56320+65536)}return x},y.prototype.scanHexEscape=function(m){for(var x=m==="u"?4:2,g=0,d=0;d<x;++d){if(this.eof()||!f.Character.isHexDigit(this.source.charCodeAt(this.index)))return null;g=16*g+p(this.source[this.index++])}return String.fromCharCode(g)},y.prototype.scanUnicodeCodePointEscape=function(){var m=this.source[this.index],x=0;for(m==="}"&&this.throwUnexpectedToken();!this.eof()&&(m=this.source[this.index++],f.Character.isHexDigit(m.charCodeAt(0)));)x=16*x+p(m);return(x>1114111||m!=="}")&&this.throwUnexpectedToken(),f.Character.fromCodePoint(x)},y.prototype.getIdentifier=function(){for(var m=this.index++;!this.eof();){var x=this.source.charCodeAt(this.index);if(x===92)return this.index=m,this.getComplexIdentifier();if(x>=55296&&x<57343)return this.index=m,this.getComplexIdentifier();if(!f.Character.isIdentifierPart(x))break;++this.index}return this.source.slice(m,this.index)},y.prototype.getComplexIdentifier=function(){var m,x=this.codePointAt(this.index),g=f.Character.fromCodePoint(x);for(this.index+=g.length,x===92&&(this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,m=this.scanUnicodeCodePointEscape()):(m=this.scanHexEscape("u"))!==null&&m!=="\\"&&f.Character.isIdentifierStart(m.charCodeAt(0))||this.throwUnexpectedToken(),g=m);!this.eof()&&(x=this.codePointAt(this.index),f.Character.isIdentifierPart(x));)g+=m=f.Character.fromCodePoint(x),this.index+=m.length,x===92&&(g=g.substr(0,g.length-1),this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,m=this.scanUnicodeCodePointEscape()):(m=this.scanHexEscape("u"))!==null&&m!=="\\"&&f.Character.isIdentifierPart(m.charCodeAt(0))||this.throwUnexpectedToken(),g+=m);return g},y.prototype.octalToDecimal=function(m){var x=m!=="0",g=h(m);return!this.eof()&&f.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(x=!0,g=8*g+h(this.source[this.index++]),"0123".indexOf(m)>=0&&!this.eof()&&f.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(g=8*g+h(this.source[this.index++]))),{code:g,octal:x}},y.prototype.scanIdentifier=function(){var m,x=this.index,g=this.source.charCodeAt(x)===92?this.getComplexIdentifier():this.getIdentifier();if((m=g.length===1?3:this.isKeyword(g)?4:g==="null"?5:g==="true"||g==="false"?1:3)!=3&&x+g.length!==this.index){var d=this.index;this.index=x,this.tolerateUnexpectedToken(l.Messages.InvalidEscapedReservedWord),this.index=d}return{type:m,value:g,lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}},y.prototype.scanPunctuator=function(){var m=this.index,x=this.source[this.index];switch(x){case"(":case"{":x==="{"&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,this.source[this.index]==="."&&this.source[this.index+1]==="."&&(this.index+=2,x="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:(x=this.source.substr(this.index,4))===">>>="?this.index+=4:(x=x.substr(0,3))==="==="||x==="!=="||x===">>>"||x==="<<="||x===">>="||x==="**="?this.index+=3:(x=x.substr(0,2))==="&&"||x==="||"||x==="=="||x==="!="||x==="+="||x==="-="||x==="*="||x==="/="||x==="++"||x==="--"||x==="<<"||x===">>"||x==="&="||x==="|="||x==="^="||x==="%="||x==="<="||x===">="||x==="=>"||x==="**"?this.index+=2:(x=this.source[this.index],"<>=!+-*%&|^/".indexOf(x)>=0&&++this.index)}return this.index===m&&this.throwUnexpectedToken(),{type:7,value:x,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},y.prototype.scanHexLiteral=function(m){for(var x="";!this.eof()&&f.Character.isHexDigit(this.source.charCodeAt(this.index));)x+=this.source[this.index++];return x.length===0&&this.throwUnexpectedToken(),f.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+x,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},y.prototype.scanBinaryLiteral=function(m){for(var x,g="";!this.eof()&&((x=this.source[this.index])==="0"||x==="1");)g+=this.source[this.index++];return g.length===0&&this.throwUnexpectedToken(),this.eof()||(x=this.source.charCodeAt(this.index),(f.Character.isIdentifierStart(x)||f.Character.isDecimalDigit(x))&&this.throwUnexpectedToken()),{type:6,value:parseInt(g,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},y.prototype.scanOctalLiteral=function(m,x){var g="",d=!1;for(f.Character.isOctalDigit(m.charCodeAt(0))?(d=!0,g="0"+this.source[this.index++]):++this.index;!this.eof()&&f.Character.isOctalDigit(this.source.charCodeAt(this.index));)g+=this.source[this.index++];return d||g.length!==0||this.throwUnexpectedToken(),(f.Character.isIdentifierStart(this.source.charCodeAt(this.index))||f.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(g,8),octal:d,lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}},y.prototype.isImplicitOctalLiteral=function(){for(var m=this.index+1;m<this.length;++m){var x=this.source[m];if(x==="8"||x==="9")return!1;if(!f.Character.isOctalDigit(x.charCodeAt(0)))return!0}return!0},y.prototype.scanNumericLiteral=function(){var m=this.index,x=this.source[m];u.assert(f.Character.isDecimalDigit(x.charCodeAt(0))||x===".","Numeric literal must start with a decimal digit or a decimal point");var g="";if(x!=="."){if(g=this.source[this.index++],x=this.source[this.index],g==="0"){if(x==="x"||x==="X")return++this.index,this.scanHexLiteral(m);if(x==="b"||x==="B")return++this.index,this.scanBinaryLiteral(m);if(x==="o"||x==="O")return this.scanOctalLiteral(x,m);if(x&&f.Character.isOctalDigit(x.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(x,m)}for(;f.Character.isDecimalDigit(this.source.charCodeAt(this.index));)g+=this.source[this.index++];x=this.source[this.index]}if(x==="."){for(g+=this.source[this.index++];f.Character.isDecimalDigit(this.source.charCodeAt(this.index));)g+=this.source[this.index++];x=this.source[this.index]}if(x==="e"||x==="E")if(g+=this.source[this.index++],(x=this.source[this.index])!=="+"&&x!=="-"||(g+=this.source[this.index++]),f.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;f.Character.isDecimalDigit(this.source.charCodeAt(this.index));)g+=this.source[this.index++];else this.throwUnexpectedToken();return f.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(g),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},y.prototype.scanStringLiteral=function(){var m=this.index,x=this.source[m];u.assert(x==="'"||x==='"',"String literal must starts with a quote"),++this.index;for(var g=!1,d="";!this.eof();){var C=this.source[this.index++];if(C===x){x="";break}if(C==="\\")if((C=this.source[this.index++])&&f.Character.isLineTerminator(C.charCodeAt(0)))++this.lineNumber,C==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else switch(C){case"u":if(this.source[this.index]==="{")++this.index,d+=this.scanUnicodeCodePointEscape();else{var S=this.scanHexEscape(C);S===null&&this.throwUnexpectedToken(),d+=S}break;case"x":var T=this.scanHexEscape(C);T===null&&this.throwUnexpectedToken(l.Messages.InvalidHexEscapeSequence),d+=T;break;case"n":d+=`
`;break;case"r":d+="\r";break;case"t":d+="	";break;case"b":d+="\b";break;case"f":d+="\f";break;case"v":d+="\v";break;case"8":case"9":d+=C,this.tolerateUnexpectedToken();break;default:if(C&&f.Character.isOctalDigit(C.charCodeAt(0))){var w=this.octalToDecimal(C);g=w.octal||g,d+=String.fromCharCode(w.code)}else d+=C}else{if(f.Character.isLineTerminator(C.charCodeAt(0)))break;d+=C}}return x!==""&&(this.index=m,this.throwUnexpectedToken()),{type:8,value:d,octal:g,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},y.prototype.scanTemplate=function(){var m="",x=!1,g=this.index,d=this.source[g]==="`",C=!1,S=2;for(++this.index;!this.eof();){var T=this.source[this.index++];if(T==="`"){S=1,C=!0,x=!0;break}if(T==="$"){if(this.source[this.index]==="{"){this.curlyStack.push("${"),++this.index,x=!0;break}m+=T}else if(T==="\\")if(T=this.source[this.index++],f.Character.isLineTerminator(T.charCodeAt(0)))++this.lineNumber,T==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else switch(T){case"n":m+=`
`;break;case"r":m+="\r";break;case"t":m+="	";break;case"u":if(this.source[this.index]==="{")++this.index,m+=this.scanUnicodeCodePointEscape();else{var w=this.index,E=this.scanHexEscape(T);E!==null?m+=E:(this.index=w,m+=T)}break;case"x":var D=this.scanHexEscape(T);D===null&&this.throwUnexpectedToken(l.Messages.InvalidHexEscapeSequence),m+=D;break;case"b":m+="\b";break;case"f":m+="\f";break;case"v":m+="\v";break;default:T==="0"?(f.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(l.Messages.TemplateOctalLiteral),m+="\0"):f.Character.isOctalDigit(T.charCodeAt(0))?this.throwUnexpectedToken(l.Messages.TemplateOctalLiteral):m+=T}else f.Character.isLineTerminator(T.charCodeAt(0))?(++this.lineNumber,T==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index,m+=`
`):m+=T}return x||this.throwUnexpectedToken(),d||this.curlyStack.pop(),{type:10,value:this.source.slice(g+1,this.index-S),cooked:m,head:d,tail:C,lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}},y.prototype.testRegExp=function(m,x){var g=m,d=this;x.indexOf("u")>=0&&(g=g.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(C,S,T){var w=parseInt(S||T,16);return w>1114111&&d.throwUnexpectedToken(l.Messages.InvalidRegExp),w<=65535?String.fromCharCode(w):""}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,""));try{RegExp(g)}catch{this.throwUnexpectedToken(l.Messages.InvalidRegExp)}try{return new RegExp(m,x)}catch{return null}},y.prototype.scanRegExpBody=function(){var m=this.source[this.index];u.assert(m==="/","Regular expression literal must start with a slash");for(var x=this.source[this.index++],g=!1,d=!1;!this.eof();)if(x+=m=this.source[this.index++],m==="\\")m=this.source[this.index++],f.Character.isLineTerminator(m.charCodeAt(0))&&this.throwUnexpectedToken(l.Messages.UnterminatedRegExp),x+=m;else if(f.Character.isLineTerminator(m.charCodeAt(0)))this.throwUnexpectedToken(l.Messages.UnterminatedRegExp);else if(g)m==="]"&&(g=!1);else{if(m==="/"){d=!0;break}m==="["&&(g=!0)}return d||this.throwUnexpectedToken(l.Messages.UnterminatedRegExp),x.substr(1,x.length-2)},y.prototype.scanRegExpFlags=function(){for(var m="";!this.eof();){var x=this.source[this.index];if(!f.Character.isIdentifierPart(x.charCodeAt(0)))break;if(++this.index,x!=="\\"||this.eof())m+=x;else if((x=this.source[this.index])==="u"){++this.index;var g=this.index,d=this.scanHexEscape("u");if(d!==null)for(m+=d;g<this.index;++g)this.source[g];else this.index=g,m+="u";this.tolerateUnexpectedToken()}else this.tolerateUnexpectedToken()}return m},y.prototype.scanRegExp=function(){var m=this.index,x=this.scanRegExpBody(),g=this.scanRegExpFlags();return{type:9,value:"",pattern:x,flags:g,regex:this.testRegExp(x,g),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},y.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var m=this.source.charCodeAt(this.index);return f.Character.isIdentifierStart(m)?this.scanIdentifier():m===40||m===41||m===59?this.scanPunctuator():m===39||m===34?this.scanStringLiteral():m===46?f.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():f.Character.isDecimalDigit(m)?this.scanNumericLiteral():m===96||m===125&&this.curlyStack[this.curlyStack.length-1]==="${"?this.scanTemplate():m>=55296&&m<57343&&f.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},y}();s.Scanner=v},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.TokenName={},s.TokenName[1]="Boolean",s.TokenName[2]="<end>",s.TokenName[3]="Identifier",s.TokenName[4]="Keyword",s.TokenName[5]="Null",s.TokenName[6]="Numeric",s.TokenName[7]="Punctuator",s.TokenName[8]="String",s.TokenName[9]="RegularExpression",s.TokenName[10]="Template"},function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",frasl:"",euro:"",image:"",weierp:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",lang:"",rang:""}},function(o,s,c){Object.defineProperty(s,"__esModule",{value:!0});var u=c(10),f=c(12),l=c(13),p=function(){function v(){this.values=[],this.curly=this.paren=-1}return v.prototype.beforeFunctionExpression=function(y){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(y)>=0},v.prototype.isRegexStart=function(){var y=this.values[this.values.length-1],m=y!==null;switch(y){case"this":case"]":m=!1;break;case")":var x=this.values[this.paren-1];m=x==="if"||x==="while"||x==="for"||x==="with";break;case"}":if(m=!1,this.values[this.curly-3]==="function")m=!!(g=this.values[this.curly-4])&&!this.beforeFunctionExpression(g);else if(this.values[this.curly-4]==="function"){var g;m=!(g=this.values[this.curly-5])||!this.beforeFunctionExpression(g)}}return m},v.prototype.push=function(y){y.type===7||y.type===4?(y.value==="{"?this.curly=this.values.length:y.value==="("&&(this.paren=this.values.length),this.values.push(y.value)):this.values.push(null)},v}(),h=function(){function v(y,m){this.errorHandler=new u.ErrorHandler,this.errorHandler.tolerant=!!m&&typeof m.tolerant=="boolean"&&m.tolerant,this.scanner=new f.Scanner(y,this.errorHandler),this.scanner.trackComment=!!m&&typeof m.comment=="boolean"&&m.comment,this.trackRange=!!m&&typeof m.range=="boolean"&&m.range,this.trackLoc=!!m&&typeof m.loc=="boolean"&&m.loc,this.buffer=[],this.reader=new p}return v.prototype.errors=function(){return this.errorHandler.errors},v.prototype.getNextToken=function(){if(this.buffer.length===0){var y=this.scanner.scanComments();if(this.scanner.trackComment)for(var m=0;m<y.length;++m){var x=y[m],g=this.scanner.source.slice(x.slice[0],x.slice[1]),d={type:x.multiLine?"BlockComment":"LineComment",value:g};this.trackRange&&(d.range=x.range),this.trackLoc&&(d.loc=x.loc),this.buffer.push(d)}if(!this.scanner.eof()){var C=void 0;this.trackLoc&&(C={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var S=this.scanner.source[this.scanner.index]==="/"&&this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(S);var T={type:l.TokenName[S.type],value:this.scanner.source.slice(S.start,S.end)};if(this.trackRange&&(T.range=[S.start,S.end]),this.trackLoc&&(C.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},T.loc=C),S.type===9){var w=S.pattern,E=S.flags;T.regex={pattern:w,flags:E}}this.buffer.push(T)}}return this.buffer.shift()},v}();s.Tokenizer=h}])},n.exports=i()},function(n,r,a){var i=a(38),o=a(53),s=a(76),c=a(54),u=Object.prototype.toString,f=Object.prototype.hasOwnProperty,l={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},p=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function h(N){var U,W,I;if(U=N.toString(16).toUpperCase(),N<=255)W="x",I=2;else if(N<=65535)W="u",I=4;else{if(!(N<=4294967295))throw new o("code point within a string may not be greater than 0xFFFFFFFF");W="U",I=8}return"\\"+W+i.repeat("0",I-U.length)+U}function v(N){this.schema=N.schema||s,this.indent=Math.max(1,N.indent||2),this.noArrayIndent=N.noArrayIndent||!1,this.skipInvalid=N.skipInvalid||!1,this.flowLevel=i.isNothing(N.flowLevel)?-1:N.flowLevel,this.styleMap=function(U,W){var I,G,F,A,H,$,X;if(W===null)return{};for(I={},F=0,A=(G=Object.keys(W)).length;F<A;F+=1)H=G[F],$=String(W[H]),H.slice(0,2)==="!!"&&(H="tag:yaml.org,2002:"+H.slice(2)),(X=U.compiledTypeMap.fallback[H])&&f.call(X.styleAliases,$)&&($=X.styleAliases[$]),I[H]=$;return I}(this.schema,N.styles||null),this.sortKeys=N.sortKeys||!1,this.lineWidth=N.lineWidth||80,this.noRefs=N.noRefs||!1,this.noCompatMode=N.noCompatMode||!1,this.condenseFlow=N.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function y(N,U){for(var W,I=i.repeat(" ",U),G=0,F=-1,A="",H=N.length;G<H;)(F=N.indexOf(`
`,G))===-1?(W=N.slice(G),G=H):(W=N.slice(G,F+1),G=F+1),W.length&&W!==`
`&&(A+=I),A+=W;return A}function m(N,U){return`
`+i.repeat(" ",N.indent*U)}function x(N){return N===32||N===9}function g(N){return 32<=N&&N<=126||161<=N&&N<=55295&&N!==8232&&N!==8233||57344<=N&&N<=65533&&N!==65279||65536<=N&&N<=1114111}function d(N,U){return g(N)&&N!==65279&&N!==44&&N!==91&&N!==93&&N!==123&&N!==125&&N!==58&&(N!==35||U&&function(W){return g(W)&&!x(W)&&W!==65279&&W!==13&&W!==10}(U))}function C(N){return/^\n* /.test(N)}function S(N,U,W,I,G){var F,A,H,$,X=!1,Y=!1,q=I!==-1,J=-1,ne=g($=N.charCodeAt(0))&&$!==65279&&!x($)&&$!==45&&$!==63&&$!==58&&$!==44&&$!==91&&$!==93&&$!==123&&$!==125&&$!==35&&$!==38&&$!==42&&$!==33&&$!==124&&$!==61&&$!==62&&$!==39&&$!==34&&$!==37&&$!==64&&$!==96&&!x(N.charCodeAt(N.length-1));if(U)for(F=0;F<N.length;F++){if(!g(A=N.charCodeAt(F)))return 5;H=F>0?N.charCodeAt(F-1):null,ne=ne&&d(A,H)}else{for(F=0;F<N.length;F++){if((A=N.charCodeAt(F))===10)X=!0,q&&(Y=Y||F-J-1>I&&N[J+1]!==" ",J=F);else if(!g(A))return 5;H=F>0?N.charCodeAt(F-1):null,ne=ne&&d(A,H)}Y=Y||q&&F-J-1>I&&N[J+1]!==" "}return X||Y?W>9&&C(N)?5:Y?4:3:ne&&!G(N)?1:2}function T(N,U,W,I){N.dump=function(){if(U.length===0)return"''";if(!N.noCompatMode&&p.indexOf(U)!==-1)return"'"+U+"'";var G=N.indent*Math.max(1,W),F=N.lineWidth===-1?-1:Math.max(Math.min(N.lineWidth,40),N.lineWidth-G),A=I||N.flowLevel>-1&&W>=N.flowLevel;switch(S(U,A,N.indent,F,function(H){return function($,X){var Y,q;for(Y=0,q=$.implicitTypes.length;Y<q;Y+=1)if($.implicitTypes[Y].resolve(X))return!0;return!1}(N,H)})){case 1:return U;case 2:return"'"+U.replace(/'/g,"''")+"'";case 3:return"|"+w(U,N.indent)+E(y(U,G));case 4:return">"+w(U,N.indent)+E(y(function(H,$){for(var X,Y,q=/(\n+)([^\n]*)/g,J=(Q=H.indexOf(`
`),Q=Q!==-1?Q:H.length,q.lastIndex=Q,D(H.slice(0,Q),$)),ne=H[0]===`
`||H[0]===" ",Q;Y=q.exec(H);){var te=Y[1],L=Y[2];X=L[0]===" ",J+=te+(ne||X||L===""?"":`
`)+D(L,$),ne=X}return J}(U,F),G));case 5:return'"'+function(H){for(var $,X,Y,q="",J=0;J<H.length;J++)($=H.charCodeAt(J))>=55296&&$<=56319&&(X=H.charCodeAt(J+1))>=56320&&X<=57343?(q+=h(1024*($-55296)+X-56320+65536),J++):(Y=l[$],q+=!Y&&g($)?H[J]:Y||h($));return q}(U)+'"';default:throw new o("impossible error: invalid scalar style")}}()}function w(N,U){var W=C(N)?String(U):"",I=N[N.length-1]===`
`;return W+(I&&(N[N.length-2]===`
`||N===`
`)?"+":I?"":"-")+`
`}function E(N){return N[N.length-1]===`
`?N.slice(0,-1):N}function D(N,U){if(N===""||N[0]===" ")return N;for(var W,I,G=/ [^ ]/g,F=0,A=0,H=0,$="";W=G.exec(N);)(H=W.index)-F>U&&(I=A>F?A:H,$+=`
`+N.slice(F,I),F=I+1),A=H;return $+=`
`,N.length-F>U&&A>F?$+=N.slice(F,A)+`
`+N.slice(A+1):$+=N.slice(F),$.slice(1)}function b(N,U,W){var I,G,F,A,H,$;for(F=0,A=(G=W?N.explicitTypes:N.implicitTypes).length;F<A;F+=1)if(((H=G[F]).instanceOf||H.predicate)&&(!H.instanceOf||typeof U=="object"&&U instanceof H.instanceOf)&&(!H.predicate||H.predicate(U))){if(N.tag=W?H.tag:"?",H.represent){if($=N.styleMap[H.tag]||H.defaultStyle,u.call(H.represent)==="[object Function]")I=H.represent(U,$);else{if(!f.call(H.represent,$))throw new o("!<"+H.tag+'> tag resolver accepts not "'+$+'" style');I=H.represent[$](U,$)}N.dump=I}return!0}return!1}function O(N,U,W,I,G,F){N.tag=null,N.dump=W,b(N,W,!1)||b(N,W,!0);var A=u.call(N.dump);I&&(I=N.flowLevel<0||N.flowLevel>U);var H,$,X=A==="[object Object]"||A==="[object Array]";if(X&&($=(H=N.duplicates.indexOf(W))!==-1),(N.tag!==null&&N.tag!=="?"||$||N.indent!==2&&U>0)&&(G=!1),$&&N.usedDuplicates[H])N.dump="*ref_"+H;else{if(X&&$&&!N.usedDuplicates[H]&&(N.usedDuplicates[H]=!0),A==="[object Object]")I&&Object.keys(N.dump).length!==0?(function(q,J,ne,Q){var te,L,_,V,k,P,j="",z=q.tag,Z=Object.keys(ne);if(q.sortKeys===!0)Z.sort();else if(typeof q.sortKeys=="function")Z.sort(q.sortKeys);else if(q.sortKeys)throw new o("sortKeys must be a boolean or a function");for(te=0,L=Z.length;te<L;te+=1)P="",Q&&te===0||(P+=m(q,J)),V=ne[_=Z[te]],O(q,J+1,_,!0,!0,!0)&&((k=q.tag!==null&&q.tag!=="?"||q.dump&&q.dump.length>1024)&&(q.dump&&q.dump.charCodeAt(0)===10?P+="?":P+="? "),P+=q.dump,k&&(P+=m(q,J)),O(q,J+1,V,!0,k)&&(q.dump&&q.dump.charCodeAt(0)===10?P+=":":P+=": ",j+=P+=q.dump));q.tag=z,q.dump=j||"{}"}(N,U,N.dump,G),$&&(N.dump="&ref_"+H+N.dump)):(function(q,J,ne){var Q,te,L,_,V,k="",P=q.tag,j=Object.keys(ne);for(Q=0,te=j.length;Q<te;Q+=1)V="",Q!==0&&(V+=", "),q.condenseFlow&&(V+='"'),_=ne[L=j[Q]],O(q,J,L,!1,!1)&&(q.dump.length>1024&&(V+="? "),V+=q.dump+(q.condenseFlow?'"':"")+":"+(q.condenseFlow?"":" "),O(q,J,_,!1,!1)&&(k+=V+=q.dump));q.tag=P,q.dump="{"+k+"}"}(N,U,N.dump),$&&(N.dump="&ref_"+H+" "+N.dump));else if(A==="[object Array]"){var Y=N.noArrayIndent&&U>0?U-1:U;I&&N.dump.length!==0?(function(q,J,ne,Q){var te,L,_="",V=q.tag;for(te=0,L=ne.length;te<L;te+=1)O(q,J+1,ne[te],!0,!0)&&(Q&&te===0||(_+=m(q,J)),q.dump&&q.dump.charCodeAt(0)===10?_+="-":_+="- ",_+=q.dump);q.tag=V,q.dump=_||"[]"}(N,Y,N.dump,G),$&&(N.dump="&ref_"+H+N.dump)):(function(q,J,ne){var Q,te,L="",_=q.tag;for(Q=0,te=ne.length;Q<te;Q+=1)O(q,J,ne[Q],!1,!1)&&(Q!==0&&(L+=","+(q.condenseFlow?"":" ")),L+=q.dump);q.tag=_,q.dump="["+L+"]"}(N,Y,N.dump),$&&(N.dump="&ref_"+H+" "+N.dump))}else{if(A!=="[object String]"){if(N.skipInvalid)return!1;throw new o("unacceptable kind of an object to dump "+A)}N.tag!=="?"&&T(N,N.dump,U,F)}N.tag!==null&&N.tag!=="?"&&(N.dump="!<"+N.tag+"> "+N.dump)}return!0}function M(N,U){var W,I,G=[],F=[];for(function A(H,$,X){var Y,q,J;if(H!==null&&typeof H=="object")if((q=$.indexOf(H))!==-1)X.indexOf(q)===-1&&X.push(q);else if($.push(H),Array.isArray(H))for(q=0,J=H.length;q<J;q+=1)A(H[q],$,X);else for(Y=Object.keys(H),q=0,J=Y.length;q<J;q+=1)A(H[Y[q]],$,X)}(N,G,F),W=0,I=F.length;W<I;W+=1)U.duplicates.push(G[F[W]]);U.usedDuplicates=new Array(I)}function R(N,U){var W=new v(U=U||{});return W.noRefs||M(N,W),O(W,0,N,!0,!0)?W.dump+`
`:""}n.exports.dump=R,n.exports.safeDump=function(N,U){return R(N,i.extend({schema:c},U))}},function(n,r,a){a(31),a(32),a(33),a(64),a(19),a(65),a(20),a(68),a(92),a(144),a(22),a(94),a(23);var i,o=this&&this.__extends||(i=function(S,T){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,E){w.__proto__=E}||function(w,E){for(var D in E)E.hasOwnProperty(D)&&(w[D]=E[D])})(S,T)},function(S,T){function w(){this.constructor=S}i(S,T),S.prototype=T===null?Object.create(T):(w.prototype=T.prototype,new w)}),s=this&&this.__values||function(S){var T=typeof Symbol=="function"&&Symbol.iterator,w=T&&S[T],E=0;if(w)return w.call(S);if(S&&typeof S.length=="number")return{next:function(){return S&&E>=S.length&&(S=void 0),{value:S&&S[E++],done:!S}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(S,T){var w=typeof Symbol=="function"&&S[Symbol.iterator];if(!w)return S;var E,D,b=w.call(S),O=[];try{for(;(T===void 0||T-- >0)&&!(E=b.next()).done;)O.push(E.value)}catch(M){D={error:M}}finally{try{E&&!E.done&&(w=b.return)&&w.call(b)}finally{if(D)throw D.error}}return O};Object.defineProperty(r,"__esModule",{value:!0});var u=a(91),f=a(1),l=a(183),p=a(0),h=a(7),v=a(95),y=a(69),m=a(3),x=a(305),g=a(306),d=a(307),C=function(S){function T(w,E){E===void 0&&(E=!1);var D=S.call(this)||this;return D._hasDeclaration=!1,D._docTypeName="",D._hasDocumentElement=!1,D._currentElementSerialized=!1,D._openTags=[],D._ended=!1,D._fragment=E,D._options=f.applyDefaults(w||{},u.DefaultXMLBuilderCBOptions),D._builderOptions={defaultNamespace:D._options.defaultNamespace,namespaceAlias:D._options.namespaceAlias},D._options.format==="json"?D._writer=new g.JSONCBWriter(D._options):D._options.format==="yaml"?D._writer=new d.YAMLCBWriter(D._options):D._writer=new x.XMLCBWriter(D._options),D._options.data!==void 0&&D.on("data",D._options.data),D._options.end!==void 0&&D.on("end",D._options.end),D._options.error!==void 0&&D.on("error",D._options.error),D._prefixMap=new v.NamespacePrefixMap,D._prefixMap.set("xml",h.namespace.XML),D._prefixIndex={value:1},D._push(D._writer.frontMatter()),D}return o(T,S),T.prototype.ele=function(w,E,D){var b,O;if(f.isObject(w)||f.isString(w)&&(/^\s*</.test(w)||/^\s*[\{\[]/.test(w)||/^(\s*|(#.*)|(%.*))*---/.test(w))){var M=l.fragment().set(this._options);try{M.ele(w)}catch(W){return this.emit("error",W),this}try{for(var R=s(M.node.childNodes),N=R.next();!N.done;N=R.next()){var U=N.value;this._fromNode(U)}}catch(W){b={error:W}}finally{try{N&&!N.done&&(O=R.return)&&O.call(R)}finally{if(b)throw b.error}}return this}if(this._serializeOpenTag(!0),!this._fragment&&this._hasDocumentElement&&this._writer.level===0)return this.emit("error",new Error("Document cannot have multiple document element nodes.")),this;try{this._currentElement=l.fragment(this._builderOptions).ele(w,E,D)}catch(W){return this.emit("error",W),this}return this._fragment||this._hasDocumentElement||this._docTypeName===""||this._currentElement.node._qualifiedName===this._docTypeName?(this._currentElementSerialized=!1,this._fragment||(this._hasDocumentElement=!0),this):(this.emit("error",new Error("Document element name does not match DocType declaration name.")),this)},T.prototype.att=function(w,E,D){if(this._currentElement===void 0)return this.emit("error",new Error("Cannot insert an attribute node as child of a document node.")),this;try{this._currentElement.att(w,E,D)}catch(b){return this.emit("error",b),this}return this},T.prototype.com=function(w){var E;this._serializeOpenTag(!0);try{E=l.fragment(this._builderOptions).com(w).first().node}catch(D){return this.emit("error",D),this}return!this._options.wellFormed||p.xml_isLegalChar(E.data)&&E.data.indexOf("--")===-1&&!E.data.endsWith("-")?(this._push(this._writer.comment(E.data)),this):(this.emit("error",new Error("Comment data contains invalid characters (well-formed required).")),this)},T.prototype.txt=function(w){if(!this._fragment&&this._currentElement===void 0)return this.emit("error",new Error("Cannot insert a text node as child of a document node.")),this;var E;this._serializeOpenTag(!0);try{E=l.fragment(this._builderOptions).txt(w).first().node}catch(b){return this.emit("error",b),this}if(this._options.wellFormed&&!p.xml_isLegalChar(E.data))return this.emit("error",new Error("Text data contains invalid characters (well-formed required).")),this;var D=E.data.replace(/(?!&(lt|gt|amp|apos|quot);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return this._push(this._writer.text(D)),this},T.prototype.ins=function(w,E){var D;E===void 0&&(E=""),this._serializeOpenTag(!0);try{D=l.fragment(this._builderOptions).ins(w,E).first().node}catch(b){return this.emit("error",b),this}return this._options.wellFormed&&(D.target.indexOf(":")!==-1||/^xml$/i.test(D.target))?(this.emit("error",new Error("Processing instruction target contains invalid characters (well-formed required).")),this):this._options.wellFormed&&!p.xml_isLegalChar(D.data)?(this.emit("error",Error("Processing instruction data contains invalid characters (well-formed required).")),this):(this._push(this._writer.instruction(D.target,D.data)),this)},T.prototype.dat=function(w){var E;this._serializeOpenTag(!0);try{E=l.fragment(this._builderOptions).dat(w).first().node}catch(D){return this.emit("error",D),this}return this._push(this._writer.cdata(E.data)),this},T.prototype.dec=function(w){return w===void 0&&(w={version:"1.0"}),this._fragment?(this.emit("error",Error("Cannot insert an XML declaration into a document fragment.")),this):this._hasDeclaration?(this.emit("error",Error("XML declaration is already inserted.")),this):(this._push(this._writer.declaration(w.version||"1.0",w.encoding,w.standalone)),this._hasDeclaration=!0,this)},T.prototype.dtd=function(w){if(this._fragment)return this.emit("error",Error("Cannot insert a DocType declaration into a document fragment.")),this;if(this._docTypeName!=="")return this.emit("error",new Error("DocType declaration is already inserted.")),this;if(this._hasDocumentElement)return this.emit("error",new Error("Cannot insert DocType declaration after document element.")),this;var E;try{E=l.create().dtd(w).first().node}catch(D){return this.emit("error",D),this}return this._options.wellFormed&&!p.xml_isPubidChar(E.publicId)?(this.emit("error",new Error("DocType public identifier does not match PubidChar construct (well-formed required).")),this):this._options.wellFormed&&(!p.xml_isLegalChar(E.systemId)||E.systemId.indexOf('"')!==-1&&E.systemId.indexOf("'")!==-1)?(this.emit("error",new Error("DocType system identifier contains invalid characters (well-formed required).")),this):(this._docTypeName=w.name,this._push(this._writer.docType(w.name,E.publicId,E.systemId)),this)},T.prototype.import=function(w){var E,D,b=l.fragment().set(this._options);try{b.import(w)}catch(N){return this.emit("error",N),this}try{for(var O=s(b.node.childNodes),M=O.next();!M.done;M=O.next()){var R=M.value;this._fromNode(R)}}catch(N){E={error:N}}finally{try{M&&!M.done&&(D=O.return)&&D.call(O)}finally{if(E)throw E.error}}return this},T.prototype.up=function(){return this._serializeOpenTag(!1),this._serializeCloseTag(),this},T.prototype.end=function(){for(this._serializeOpenTag(!1);this._openTags.length>0;)this._serializeCloseTag();return this._push(null),this},T.prototype._serializeOpenTag=function(w){if(!this._currentElementSerialized&&this._currentElement!==void 0){var E=this._currentElement.node;if(!this._options.wellFormed||E.localName.indexOf(":")===-1&&p.xml_isName(E.localName)){var D="",b=!1,O=this._prefixMap.copy(),M={},R=this._recordNamespaceInformation(E,O,M),N=this._openTags.length===0?null:this._openTags[this._openTags.length-1][1],U=E.namespaceURI;if(U===null&&(U=N),N===U)R!==null&&(b=!0),D=U===h.namespace.XML?"xml:"+E.localName:E.localName,this._writer.beginElement(D),this._push(this._writer.openTagBegin(D));else{var W=E.prefix,I=null;if(W===null&&U===R||(I=O.get(W,U)),W==="xmlns"){if(this._options.wellFormed)return void this.emit("error",new Error("An element cannot have the 'xmlns' prefix (well-formed required)."));I=W}I!==null?(D=I+":"+E.localName,R!==null&&R!==h.namespace.XML&&(N=R||null),this._writer.beginElement(D),this._push(this._writer.openTagBegin(D))):W!==null?(W in M&&(W=this._generatePrefix(U,O,this._prefixIndex)),O.set(W,U),D+=W+":"+E.localName,this._writer.beginElement(D),this._push(this._writer.openTagBegin(D)),this._push(this._writer.attribute("xmlns:"+W,this._serializeAttributeValue(U,this._options.wellFormed))),R!==null&&(N=R||null)):R===null||R!==null&&R!==U?(b=!0,D+=E.localName,N=U,this._writer.beginElement(D),this._push(this._writer.openTagBegin(D)),this._push(this._writer.attribute("xmlns",this._serializeAttributeValue(U,this._options.wellFormed)))):(D+=E.localName,N=U,this._writer.beginElement(D),this._push(this._writer.openTagBegin(D)))}this._serializeAttributes(E,O,this._prefixIndex,M,b,this._options.wellFormed);var G=U===h.namespace.HTML;G&&!w&&T._VoidElementNames.has(E.localName)?(this._push(this._writer.openTagEnd(D,!0,!0)),this._writer.endElement(D)):G||w?this._push(this._writer.openTagEnd(D,!1,!1)):(this._push(this._writer.openTagEnd(D,!0,!1)),this._writer.endElement(D)),this._currentElementSerialized=!0,this._openTags.push([D,N,this._prefixMap,w]),this._isPrefixMapModified(this._prefixMap,O)&&(this._prefixMap=O),this._writer.level++}else this.emit("error",new Error("Node local name contains invalid characters (well-formed required)."))}},T.prototype._serializeCloseTag=function(){this._writer.level--;var w=this._openTags.pop();if(w!==void 0){var E=c(w,4),D=E[0],b=(E[1],E[2]),O=E[3];this._prefixMap=b,O&&(this._push(this._writer.closeTag(D)),this._writer.endElement(D))}else this.emit("error",new Error("Last element is undefined."))},T.prototype._push=function(w){w===null?(this._ended=!0,this.emit("end")):this._ended?this.emit("error",new Error("Cannot push to ended stream.")):w.length!==0&&(this._writer.hasData=!0,this.emit("data",w,this._writer.level))},T.prototype._fromNode=function(w){var E,D,b,O;if(m.Guard.isElementNode(w)){var M=w.prefix?w.prefix+":"+w.localName:w.localName;w.namespaceURI!==null?this.ele(w.namespaceURI,M):this.ele(M);try{for(var R=s(w.attributes),N=R.next();!N.done;N=R.next()){var U=N.value,W=U.prefix?U.prefix+":"+U.localName:U.localName;U.namespaceURI!==null?this.att(U.namespaceURI,W,U.value):this.att(W,U.value)}}catch(A){E={error:A}}finally{try{N&&!N.done&&(D=R.return)&&D.call(R)}finally{if(E)throw E.error}}try{for(var I=s(w.childNodes),G=I.next();!G.done;G=I.next()){var F=G.value;this._fromNode(F)}}catch(A){b={error:A}}finally{try{G&&!G.done&&(O=I.return)&&O.call(I)}finally{if(b)throw b.error}}this.up()}else m.Guard.isExclusiveTextNode(w)&&w.data?this.txt(w.data):m.Guard.isCommentNode(w)?this.com(w.data):m.Guard.isCDATASectionNode(w)?this.dat(w.data):m.Guard.isProcessingInstructionNode(w)&&this.ins(w.target,w.data)},T.prototype._serializeAttributes=function(w,E,D,b,O,M){var R,N,U=M?new y.LocalNameSet:void 0;try{for(var W=s(w.attributes),I=W.next();!I.done;I=W.next()){var G=I.value;if(M||O||G.namespaceURI!==null){if(M&&U&&U.has(G.namespaceURI,G.localName))return void this.emit("error",new Error("Element contains duplicate attributes (well-formed required)."));M&&U&&U.set(G.namespaceURI,G.localName);var F=G.namespaceURI,A=null;if(F!==null)if(A=E.get(G.prefix,F),F===h.namespace.XMLNS){if(G.value===h.namespace.XML||G.prefix===null&&O||G.prefix!==null&&(!(G.localName in b)||b[G.localName]!==G.value)&&E.has(G.localName,G.value))continue;if(M&&G.value===h.namespace.XMLNS)return void this.emit("error",new Error("XMLNS namespace is reserved (well-formed required)."));if(M&&G.value==="")return void this.emit("error",new Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required)."));G.prefix==="xmlns"&&(A="xmlns")}else A===null&&(A=G.prefix===null||E.hasPrefix(G.prefix)&&!E.has(G.prefix,F)?this._generatePrefix(F,E,D):G.prefix,this._push(this._writer.attribute("xmlns:"+A,this._serializeAttributeValue(F,this._options.wellFormed))));if(M&&(G.localName.indexOf(":")!==-1||!p.xml_isName(G.localName)||G.localName==="xmlns"&&F===null))return void this.emit("error",new Error("Attribute local name contains invalid characters (well-formed required)."));this._push(this._writer.attribute((A!==null?A+":":"")+G.localName,this._serializeAttributeValue(G.value,this._options.wellFormed)))}else this._push(this._writer.attribute(G.localName,this._serializeAttributeValue(G.value,this._options.wellFormed)))}}catch(H){R={error:H}}finally{try{I&&!I.done&&(N=W.return)&&N.call(W)}finally{if(R)throw R.error}}},T.prototype._serializeAttributeValue=function(w,E){return E&&w!==null&&!p.xml_isLegalChar(w)?(this.emit("error",new Error("Invalid characters in attribute value.")),""):w===null?"":w.replace(/(?!&(lt|gt|amp|apos|quot);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},T.prototype._recordNamespaceInformation=function(w,E,D){var b,O,M=null;try{for(var R=s(w.attributes),N=R.next();!N.done;N=R.next()){var U=N.value,W=U.namespaceURI,I=U.prefix;if(W===h.namespace.XMLNS){if(I===null){M=U.value;continue}var G=U.localName,F=U.value;if(F===h.namespace.XML||(F===""&&(F=null),E.has(G,F)))continue;E.set(G,F),D[G]=F||""}}}catch(A){b={error:A}}finally{try{N&&!N.done&&(O=R.return)&&O.call(R)}finally{if(b)throw b.error}}return M},T.prototype._generatePrefix=function(w,E,D){var b="ns"+D.value;return D.value++,E.set(b,w),b},T.prototype._isPrefixMapModified=function(w,E){var D=w._items,b=E._items,O=w._nullItems,M=E._nullItems;for(var R in b){var N=D[R];if(N===void 0)return!0;var U=b[R];if(N.length!==U.length)return!0;for(var W=0;W<N.length;W++)if(N[W]!==U[W])return!0}if(O.length!==M.length)return!0;for(W=0;W<O.length;W++)if(O[W]!==M[W])return!0;return!1},T._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),T}(a(308).EventEmitter);r.XMLBuilderCBImpl=C},function(n,r,a){a(74);var i,o=this&&this.__extends||(i=function(c,u){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,l){f.__proto__=l}||function(f,l){for(var p in l)l.hasOwnProperty(p)&&(f[p]=l[p])})(c,u)},function(c,u){function f(){this.constructor=c}i(c,u),c.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(c){function u(f){var l=c.call(this,f)||this;return l._lineLength=0,l}return o(u,c),u.prototype.frontMatter=function(){return""},u.prototype.declaration=function(f,l,p){var h=this._beginLine()+"<?xml";return h+=' version="'+f+'"',l!==void 0&&(h+=' encoding="'+l+'"'),p!==void 0&&(h+=' standalone="'+(p?"yes":"no")+'"'),h+="?>"},u.prototype.docType=function(f,l,p){var h=this._beginLine();return h+=l&&p?"<!DOCTYPE "+f+' PUBLIC "'+l+'" "'+p+'">':l?"<!DOCTYPE "+f+' PUBLIC "'+l+'">':p?"<!DOCTYPE "+f+' SYSTEM "'+p+'">':"<!DOCTYPE "+f+">"},u.prototype.comment=function(f){return this._beginLine()+"<!--"+f+"-->"},u.prototype.text=function(f){return this._beginLine()+f},u.prototype.instruction=function(f,l){return l?this._beginLine()+"<?"+f+" "+l+"?>":this._beginLine()+"<?"+f+"?>"},u.prototype.cdata=function(f){return this._beginLine()+"<![CDATA["+f+"]]>"},u.prototype.openTagBegin=function(f){return this._lineLength+=1+f.length,this._beginLine()+"<"+f},u.prototype.openTagEnd=function(f,l,p){return p?" />":l?this._writerOptions.allowEmptyTags?"></"+f+">":this._writerOptions.spaceBeforeSlash?" />":"/>":">"},u.prototype.closeTag=function(f){return this._beginLine()+"</"+f+">"},u.prototype.attribute=function(f,l){var p=f+'="'+l+'"';return this._writerOptions.prettyPrint&&this._writerOptions.width>0&&this._lineLength+1+p.length>this._writerOptions.width?(p=this._beginLine()+this._indent(1)+p,this._lineLength=p.length,p):(this._lineLength+=1+p.length," "+p)},u.prototype.beginElement=function(f){},u.prototype.endElement=function(f){},u.prototype._beginLine=function(){if(this._writerOptions.prettyPrint){var f=(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level);return this._lineLength=f.length,f}return""},u.prototype._indent=function(f){return f<=0?"":this._writerOptions.indent.repeat(f)},u}(a(114).BaseCBWriter);r.XMLCBWriter=s},function(n,r,a){a(74);var i,o=this&&this.__extends||(i=function(c,u){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,l){f.__proto__=l}||function(f,l){for(var p in l)l.hasOwnProperty(p)&&(f[p]=l[p])})(c,u)},function(c,u){function f(){this.constructor=c}i(c,u),c.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(c){function u(f){var l=c.call(this,f)||this;return l._hasChildren=[],l._additionalLevel=0,l}return o(u,c),u.prototype.frontMatter=function(){return""},u.prototype.declaration=function(f,l,p){return""},u.prototype.docType=function(f,l,p){return""},u.prototype.comment=function(f){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.comment)+this._sep()+this._val(f)+this._sep()+"}"},u.prototype.text=function(f){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.text)+this._sep()+this._val(f)+this._sep()+"}"},u.prototype.instruction=function(f,l){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.ins)+this._sep()+this._val(l?f+" "+l:f)+this._sep()+"}"},u.prototype.cdata=function(f){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.cdata)+this._sep()+this._val(f)+this._sep()+"}"},u.prototype.attribute=function(f,l){return this._comma()+this._beginLine(1)+"{"+this._sep()+this._key(this._builderOptions.convert.att+f)+this._sep()+this._val(l)+this._sep()+"}"},u.prototype.openTagBegin=function(f){var l=this._comma()+this._beginLine()+"{"+this._sep()+this._key(f)+this._sep()+"{";return this._additionalLevel++,this.hasData=!0,l+=this._beginLine()+this._key(this._builderOptions.convert.text)+this._sep()+"[",this._hasChildren.push(!1),l},u.prototype.openTagEnd=function(f,l,p){if(l){var h=this._sep()+"]";return this._additionalLevel--,h+=this._beginLine()+"}"+this._sep()+"}"}return""},u.prototype.closeTag=function(f){var l=this._beginLine()+"]";return this._additionalLevel--,l+=this._beginLine()+"}"+this._sep()+"}"},u.prototype.beginElement=function(f){},u.prototype.endElement=function(f){this._hasChildren.pop()},u.prototype._beginLine=function(f){return f===void 0&&(f=0),this._writerOptions.prettyPrint?(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level+f):""},u.prototype._indent=function(f){return f+this._additionalLevel<=0?"":this._writerOptions.indent.repeat(f+this._additionalLevel)},u.prototype._comma=function(){var f=this._hasChildren[this._hasChildren.length-1]?",":"";return this._hasChildren.length>0&&(this._hasChildren[this._hasChildren.length-1]=!0),f},u.prototype._sep=function(){return this._writerOptions.prettyPrint?" ":""},u.prototype._key=function(f){return'"'+f+'":'},u.prototype._val=function(f){return JSON.stringify(f)},u}(a(114).BaseCBWriter);r.JSONCBWriter=s},function(n,r,a){a(74);var i,o=this&&this.__extends||(i=function(c,u){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,l){f.__proto__=l}||function(f,l){for(var p in l)l.hasOwnProperty(p)&&(f[p]=l[p])})(c,u)},function(c,u){function f(){this.constructor=c}i(c,u),c.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)});Object.defineProperty(r,"__esModule",{value:!0});var s=function(c){function u(f){var l=c.call(this,f)||this;if(l._rootWritten=!1,l._additionalLevel=0,f.indent.length<2)throw new Error("YAML indententation string must be at least two characters long.");if(f.offset<0)throw new Error("YAML offset should be zero or a positive number.");return l}return o(u,c),u.prototype.frontMatter=function(){return this._beginLine()+"---"},u.prototype.declaration=function(f,l,p){return""},u.prototype.docType=function(f,l,p){return""},u.prototype.comment=function(f){return this._beginLine()+this._key(this._builderOptions.convert.comment)+" "+this._val(f)},u.prototype.text=function(f){return this._beginLine()+this._key(this._builderOptions.convert.text)+" "+this._val(f)},u.prototype.instruction=function(f,l){return this._beginLine()+this._key(this._builderOptions.convert.ins)+" "+this._val(l?f+" "+l:f)},u.prototype.cdata=function(f){return this._beginLine()+this._key(this._builderOptions.convert.cdata)+" "+this._val(f)},u.prototype.attribute=function(f,l){this._additionalLevel++;var p=this._beginLine()+this._key(this._builderOptions.convert.att+f)+" "+this._val(l);return this._additionalLevel--,p},u.prototype.openTagBegin=function(f){var l=this._beginLine()+this._key(f);return this._rootWritten||(this._rootWritten=!0),this.hasData=!0,this._additionalLevel++,l+=this._beginLine(!0)+this._key(this._builderOptions.convert.text)},u.prototype.openTagEnd=function(f,l,p){return l?" "+this._val(""):""},u.prototype.closeTag=function(f){return this._additionalLevel--,""},u.prototype.beginElement=function(f){},u.prototype.endElement=function(f){},u.prototype._beginLine=function(f){return f===void 0&&(f=!1),(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level,f)},u.prototype._indent=function(f,l){if(f+this._additionalLevel<=0)return"";var p=this._writerOptions.indent.repeat(f+this._additionalLevel);return!l&&this._rootWritten?p.substr(0,p.length-2)+"-"+p.substr(-1,1):p},u.prototype._key=function(f){return'"'+f+'":'},u.prototype._val=function(f){return JSON.stringify(f)},u}(a(114).BaseCBWriter);r.YAMLCBWriter=s},function(n,r,a){var i,o=typeof Reflect=="object"?Reflect:null,s=o&&typeof o.apply=="function"?o.apply:function(d,C,S){return Function.prototype.apply.call(d,C,S)};i=o&&typeof o.ownKeys=="function"?o.ownKeys:Object.getOwnPropertySymbols?function(d){return Object.getOwnPropertyNames(d).concat(Object.getOwnPropertySymbols(d))}:function(d){return Object.getOwnPropertyNames(d)};var c=Number.isNaN||function(d){return d!=d};function u(){u.init.call(this)}n.exports=u,u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var f=10;function l(d){if(typeof d!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof d)}function p(d){return d._maxListeners===void 0?u.defaultMaxListeners:d._maxListeners}function h(d,C,S,T){var w,E,D,b;if(l(S),(E=d._events)===void 0?(E=d._events=Object.create(null),d._eventsCount=0):(E.newListener!==void 0&&(d.emit("newListener",C,S.listener?S.listener:S),E=d._events),D=E[C]),D===void 0)D=E[C]=S,++d._eventsCount;else if(typeof D=="function"?D=E[C]=T?[S,D]:[D,S]:T?D.unshift(S):D.push(S),(w=p(d))>0&&D.length>w&&!D.warned){D.warned=!0;var O=new Error("Possible EventEmitter memory leak detected. "+D.length+" "+String(C)+" listeners added. Use emitter.setMaxListeners() to increase limit");O.name="MaxListenersExceededWarning",O.emitter=d,O.type=C,O.count=D.length,b=O,console&&console.warn&&console.warn(b)}return d}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(d,C,S){var T={fired:!1,wrapFn:void 0,target:d,type:C,listener:S},w=v.bind(T);return w.listener=S,T.wrapFn=w,w}function m(d,C,S){var T=d._events;if(T===void 0)return[];var w=T[C];return w===void 0?[]:typeof w=="function"?S?[w.listener||w]:[w]:S?function(E){for(var D=new Array(E.length),b=0;b<D.length;++b)D[b]=E[b].listener||E[b];return D}(w):g(w,w.length)}function x(d){var C=this._events;if(C!==void 0){var S=C[d];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}function g(d,C){for(var S=new Array(C),T=0;T<C;++T)S[T]=d[T];return S}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(d){if(typeof d!="number"||d<0||c(d))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+d+".");f=d}}),u.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(d){if(typeof d!="number"||d<0||c(d))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+d+".");return this._maxListeners=d,this},u.prototype.getMaxListeners=function(){return p(this)},u.prototype.emit=function(d){for(var C=[],S=1;S<arguments.length;S++)C.push(arguments[S]);var T=d==="error",w=this._events;if(w!==void 0)T=T&&w.error===void 0;else if(!T)return!1;if(T){var E;if(C.length>0&&(E=C[0]),E instanceof Error)throw E;var D=new Error("Unhandled error."+(E?" ("+E.message+")":""));throw D.context=E,D}var b=w[d];if(b===void 0)return!1;if(typeof b=="function")s(b,this,C);else{var O=b.length,M=g(b,O);for(S=0;S<O;++S)s(M[S],this,C)}return!0},u.prototype.addListener=function(d,C){return h(this,d,C,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(d,C){return h(this,d,C,!0)},u.prototype.once=function(d,C){return l(C),this.on(d,y(this,d,C)),this},u.prototype.prependOnceListener=function(d,C){return l(C),this.prependListener(d,y(this,d,C)),this},u.prototype.removeListener=function(d,C){var S,T,w,E,D;if(l(C),(T=this._events)===void 0)return this;if((S=T[d])===void 0)return this;if(S===C||S.listener===C)--this._eventsCount==0?this._events=Object.create(null):(delete T[d],T.removeListener&&this.emit("removeListener",d,S.listener||C));else if(typeof S!="function"){for(w=-1,E=S.length-1;E>=0;E--)if(S[E]===C||S[E].listener===C){D=S[E].listener,w=E;break}if(w<0)return this;w===0?S.shift():function(b,O){for(;O+1<b.length;O++)b[O]=b[O+1];b.pop()}(S,w),S.length===1&&(T[d]=S[0]),T.removeListener!==void 0&&this.emit("removeListener",d,D||C)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(d){var C,S,T;if((S=this._events)===void 0)return this;if(S.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):S[d]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete S[d]),this;if(arguments.length===0){var w,E=Object.keys(S);for(T=0;T<E.length;++T)(w=E[T])!=="removeListener"&&this.removeAllListeners(w);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(C=S[d])=="function")this.removeListener(d,C);else if(C!==void 0)for(T=C.length-1;T>=0;T--)this.removeListener(d,C[T]);return this},u.prototype.listeners=function(d){return m(this,d,!0)},u.prototype.rawListeners=function(d){return m(this,d,!1)},u.listenerCount=function(d,C){return typeof d.listenerCount=="function"?d.listenerCount(C):x.call(d,C)},u.prototype.listenerCount=x,u.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(n,r,a){Object.defineProperty(r,"__esModule",{value:!0});var i=a(77);r.createCB=function(o){return new i.XMLBuilderCBImpl(o)},r.fragmentCB=function(o){return new i.XMLBuilderCBImpl(o,!0)}}])})})(gD);function Uh(t,e){return ve(t.getElementsByTagName(e))}function Gh(t,e){return Uh(t,e)[0]}function dD(t){return gu.create(t)}function yD(t){var e=/^\s*<AppendedData\s+encoding="raw">\s*_/m,n=/\n\s*<\/AppendedData>/m;return si.extractBinary(t,e,n)}var Ir={Int8:Int8Array,UInt8:Uint8Array,Int16:Int16Array,UInt16:Uint16Array,Int32:Int32Array,UInt32:Uint32Array,Int64:Int32Array,UInt64:Uint32Array,Float32:Float32Array,Float64:Float64Array},Mr={Int8:1,UInt8:1,Int16:2,UInt16:2,Int32:4,UInt32:4,Int64:8,UInt64:8,Float32:4,Float64:8};function du(t){var e=t.length-1;return t.filter(function(n,r){return r<e&&r%2===0})}function Ph(t,e){if(e==="UInt64"){var n=8,r=new Uint32Array(t.buffer,0,6),a=r[0],i=r[2],o=r[4],s=[n,a,i,o];r=new Uint32Array(t.buffer,3*8,a*2);for(var c=0;c<a;c++)s.push(r[c*2]);return s}var u=new Uint32Array(t.buffer,0,3),f=4,l=u[0],p=u[1],h=u[2],v=[f,l,p,h];u=new Uint32Array(t.buffer,3*4,l);for(var y=0;y<l;y++)v.push(u[y]);return v}function Ih(t,e){var n=ar(t);e.uint8.set(n,e.offset),e.offset+=n.length}function ui(t,e,n,r,a,i){var o=e.getAttribute("type"),s=e.getAttribute("Name"),c=e.getAttribute("format"),u=Number(e.getAttribute("NumberOfComponents")||"1"),f=null;if(c==="ascii"){f=new Ir[o](t*u);var l=0;e.firstChild.nodeValue.split(/[\\t \\n]+/).forEach(function(E){E.trim().length&&(f[l++]=Number(E))})}else if(c==="binary"){var p=new Uint8Array(aa.toArrayBuffer(e.firstChild.nodeValue.trim()));if(n==="vtkZLibDataCompressor"){var h=new ArrayBuffer(Mr[o]*t*u);f=new Ir[o](h);for(var v={offset:0,uint8:new Uint8Array(h)},y=Ph(p,a),m=y[1],x=p.length-(y.reduce(function(E,D){return E+D},0)-(y[0]+y[1]+y[2]+y[3])),g=0;g<m;g++){var d=y[4+g],C=new Uint8Array(p.buffer,x,d);Ih(C,v),x+=d}o.indexOf("Int64")!==-1&&(f=du(f))}else f=new Ir[o](p.buffer,Mr[a]),o.indexOf("Int64")!==-1&&(f=du(f))}else if(c==="appended"){var S=Number(e.getAttribute("offset")),T;S%Mr[a]===0?T=new Ir[a](i,S,1):T=new Ir[a](i.slice(S,S+Mr[a]));var w=T[0]/Mr[o];o.indexOf("Int64")!==-1&&(w*=2),S+=Mr[a],S%Mr[o]===0?f=new Ir[o](i,S,w):f=new Ir[o](i.slice(S,S+T[0])),o.indexOf("Int64")!==-1&&(f=du(f))}else console.error("Format not supported",c);return{name:s,values:f,numberOfComponents:u}}function mD(t,e,n,r,a,i){for(var o={},s=e.getElementsByTagName("DataArray"),c=0;c<s.length;c++){var u=s[c];o[u.getAttribute("Name")]=u}var f=ui(t,o.offsets,n,r,a,i).values,l=f[f.length-1],p=ui(l,o.connectivity,n,r,a,i).values,h=new Uint32Array(t+l),v=0,y=0;return f.forEach(function(m){var x=m-y;h[v++]=x;for(var g=0;g<x;g++)h[v++]=p[y+g];y=m}),h}function xD(t,e,n,r,a,i,o){if(e){var s=["Scalars","Vectors","Normals","Tensors","TCoords"],c={};s.forEach(function(y){var m=e.getAttribute(y);m&&(c[m]=n["set".concat(y)])});for(var u=e.getElementsByTagName("DataArray"),f=u.length,l=0;l<f;l++){var p=u[l],h=de.newInstance(ui(t,p,r,a,i,o)),v=h.getName();(c[v]||n.addArray)(h)}}}function CD(t,e,n,r,a){return ve(t.getElementsByTagName("DataArray")).map(function(i){return de.newInstance(ui(Number(i.getAttribute("NumberOfTuples")),i,e,n,r,a))})}function SD(t,e){e.classHierarchy.push("vtkXMLReader"),e.dataAccessHelper||(e.dataAccessHelper=ta.get("http"));function n(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.dataAccessHelper.fetchBinary(r,a)}t.setUrl=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.url=r;var i=r.split("/");return i.pop(),e.baseURL=i.join("/"),t.loadData(a)},t.loadData=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return n(e.url,r).then(t.parseAsArrayBuffer)},t.parseAsArrayBuffer=function(r){if(!r)return!1;if(r!==e.rawDataBuffer)t.modified();else return!0;var a=yD(r),i=a.text,o=a.binaryBuffer;e.rawDataBuffer=r,e.binaryBuffer=o;var s=dD(i),c=s.root().node,u=c.getAttribute("type"),f=c.getAttribute("compressor"),l=c.getAttribute("byte_order"),p=c.getAttribute("header_type")||"UInt32";if(f&&f!=="vtkZLibDataCompressor")return console.error("Invalid compressor",f),!1;if(l&&l!=="LittleEndian")return console.error("Only LittleEndian encoding is supported"),!1;if(u!==e.dataType)return console.error("Invalid data type",u,"expecting",e.dataType),!1;if(Gh(c,"AppendedData")){var h=Gh(c,"AppendedData"),v=h.getAttribute("encoding"),y=Uh(c,"DataArray"),m=e.binaryBuffer;v==="base64"&&(m=h.textContent.trim().substr(1));for(var x=[],g=0;g<y.length;++g){var d=Number(y[g].getAttribute("offset")),C=0;g===y.length-1?C=m.length||m.byteLength:C=Number(y[g+1].getAttribute("offset")),v==="base64"?x.push(new Uint8Array(aa.toArrayBuffer(m.substring(d,C)))):x.push(new Uint8Array(m.slice(d,C)))}if(f==="vtkZLibDataCompressor")for(var S=0;S<x.length;++S){var T=x[S],w=Ph(T,p),E=w[1],D=T.length-(w.reduce(function(Q,te){return Q+te},0)-(w[0]+w[1]+w[2]+w[3])),b=null;E>0?w[3]===0?b=new ArrayBuffer(w[2]*E):b=new ArrayBuffer(w[2]*(E-1)+w[3]):b=new ArrayBuffer(0);for(var O=new Uint8Array(b),M={offset:0,uint8:O},R=0;R<E;R++){var N=w[4+R],U=new Uint8Array(T.buffer,D,N);Ih(U,M),D+=N}var W=new Uint8Array(O.length+Mr[p]);new Ir[p](W.buffer,0,1)[0]=O.length,W.set(O,Mr[p]),x[S]=W}for(var I=x.reduce(function(Q,te){return Q+te.length},0),G=new ArrayBuffer(I),F=new Uint8Array(G),A=0,H=0;A<x.length;++A)y[A].setAttribute("offset",H),F.set(x[A],H),H+=x[A].length;if(e.binaryBuffer=G,!e.binaryBuffer)return console.error("Processing appended data format: requires binaryBuffer to parse"),!1}t.parseXML(c,u,f,l,p);var $=c.getElementsByTagName(u)[0],X=$.getElementsByTagName("FieldData")[0];if(X)for(var Y=CD(X,f,l,p,e.binaryBuffer),q=0;q<e.output.length;q++)for(var J=e.output[q].getFieldData(),ne=0;ne<Y.length;ne++)J.addArray(Y[ne]);return!0},t.requestData=function(r,a){t.parseAsArrayBuffer(e.rawDataBuffer)}}var TD={};function wD(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,TD,n),B.obj(t,e),B.get(t,e,["url","baseURL"]),B.setGet(t,e,["dataAccessHelper"]),B.algo(t,e,0,1),SD(t,e)}var jr={extend:wD,processDataArray:ui,processFieldData:xD,processCells:mD};function ED(t,e){e.classHierarchy.push("vtkXMLImageDataReader"),t.parseXML=function(n,r,a,i,o){for(var s,c=n.getElementsByTagName(e.dataType)[0],u=c.getAttribute("Origin").split(" ").map(function(g){return Number(g)}),f=c.getAttribute("Spacing").split(" ").map(function(g){return Number(g)}),l=(s=c.getAttribute("Direction"))===null||s===void 0?void 0:s.split(" ").map(function(g){return Number(g)}),p=c.getElementsByTagName("Piece"),h=p.length,v=0;v<h;v++){var y=p[v],m=y.getAttribute("Extent").split(" ").map(function(g){return Number(g)}),x=w0.newInstance({origin:u,spacing:f,direction:l,extent:m});jr.processFieldData(x.getNumberOfPoints(),y.getElementsByTagName("PointData")[0],x.getPointData(),a,i,o,e.binaryBuffer),jr.processFieldData(x.getNumberOfCells(),y.getElementsByTagName("CellData")[0],x.getCellData(),a,i,o,e.binaryBuffer),e.output[v]=x}}}var DD={dataType:"ImageData"};function OD(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,DD,n),jr.extend(t,e,n),ED(t,e)}B.newInstance(OD,"vtkXMLImageDataReader");function _D(t,e,n,r,a,i,o){var s=Number(n.getAttribute("NumberOf".concat(e)));if(s>0){var c=n.getElementsByTagName(e)[0].getElementsByTagName("DataArray")[0],u=jr.processDataArray(s,c,r,a,i,o),f=u.values,l=u.numberOfComponents;t["get".concat(e)]().setData(f,l)}return s}function bD(t,e,n,r,a,i,o){var s=Number(n.getAttribute("NumberOf".concat(e)));if(s>0){var c=jr.processCells(s,n.getElementsByTagName(e)[0],r,a,i,o);t["get".concat(e)]().setData(c)}return s}function MD(t,e){e.classHierarchy.push("vtkXMLPolyDataReader"),t.parseXML=function(n,r,a,i,o){for(var s=n.getElementsByTagName(e.dataType)[0],c=s.getElementsByTagName("Piece"),u=c.length,f=function(h){var v=Ye.newInstance(),y=c[h],m=_D(v,"Points",y,a,i,o,e.binaryBuffer),x=0;["Verts","Lines","Strips","Polys"].forEach(function(g){x+=bD(v,g,y,a,i,o,e.binaryBuffer)}),jr.processFieldData(m,y.getElementsByTagName("PointData")[0],v.getPointData(),a,i,o,e.binaryBuffer),jr.processFieldData(x,y.getElementsByTagName("CellData")[0],v.getCellData(),a,i,o,e.binaryBuffer),e.output[h]=v},l=0;l<u;l++)f(l)}}var ND={dataType:"PolyData"};function RD(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ND,n),jr.extend(t,e,n),MD(t,e)}B.newInstance(RD,"vtkXMLPolyDataReader");const LD={props:{port:{type:Number,default:0},vtkClass:{type:String,default:"vtkConeSource"},state:{type:Object,default:()=>({})}},setup(t){const e=ce.ref(null),n=ce.inject("downstream"),r=ce.inject("representation");ce.provide("downstream",e),ce.onMounted(()=>{e.value=wt({vtkClass:t.vtkClass,...t.state}),n.value.setInputConnection(e.value.getOutputPort(),t.port)}),ce.onBeforeUnmount(()=>{e.value&&(e.value.delete(),e.value=null)}),ce.watch(()=>t.vtkClass,a=>{e.value=wt({vtkClass:a,...t.state}),n.setInputConnection(e.value.getOutputPort(),t.port)}),ce.watch(()=>t.state,a=>{e.value.set(a),r&&r.dataChanged()})},template:'<div :class="`vtk-algorithm-${vtkClass}`"><slot></slot></div>'};function jh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function kD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jh(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jh(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Ao=B.vtkWarningMacro;function FD(t,e){e.classHierarchy.push("vtkCalculator"),t.setFormula=function(n){return n===e.formula?!1:(e.formula=n,t.modified(),!0)},t.getFormula=function(){return e.formula},t.augmentInputArrays=function(n,r){var a=r.slice(0);return(n===pt.POINT||n===pt.VERTEX)&&a.push({location:pt.COORDINATE}),a},t.createSimpleFormulaObject=function(n,r,a,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};return{getArrays:function(){return{input:t.augmentInputArrays(n,r.map(function(c){return{location:n,name:c}})),output:[{location:n,name:a,attribute:"outputAttributeType"in o?o.outputAttributeType:Zl.SCALARS,numberOfComponents:"numberOfOutputComponents"in o?o.numberOfOutputComponents:1}]}},evaluate:function(c,u){var f=new Array(c.length),l=c.map(function(d,C){var S=d.getNumberOfComponents(),T=d.getData();return S===1?function(w){return T[w]}:function(w){return d.getTuple(w,f[C])}}),p=u[0],h=p.getData(),v=p.getNumberOfComponents(),y=new Array(v);if(v===1)h.forEach(function(d,C){h[C]=i.apply(void 0,ve(l.map(function(S){return S(C)})).concat([C,y]))});else for(var m=p.getNumberOfTuples(),x=function(C){y=i.apply(void 0,ve(l.map(function(S){return S(C)})).concat([C,y])),p.setTuple(C,y)},g=0;g<m;++g)x(g)}}},t.setFormulaSimple=function(n,r,a,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};return t.setFormula(t.createSimpleFormulaObject(n,r,a,i,o))},t.prepareArrays=function(n,r,a){var i=[],o=[];return n.input.forEach(function(s){if(s.location===pt.COORDINATE)i.push(r.getPoints());else{var c=[[pt.UNIFORM,function(f){return f.getFieldData()}],[pt.POINT,function(f){return f.getPointData()}],[pt.CELL,function(f){return f.getCellData()}],[pt.VERTEX,function(f){return f.getVertexData()}],[pt.EDGE,function(f){return f.getEdgeData()}],[pt.ROW,function(f){return f.getRowData()}]].reduce(function(f,l){return f[l[0]]=l[1],f},{}),u="location"in s&&s.location in c?c[s.location](r):null;u?s.name?i.push(u.getArrayByName(s.name)):"index"in s?i.push(u.getArrayByIndex(s.index)):"attribute"in s&&s.location!==pt.UNIFORM?i.push(u.getActiveAttribute(s.attribute)):(Ao('No matching array for specifier "'.concat(JSON.stringify(s),'".')),i.push(null)):(Ao('Specifier "'.concat(JSON.stringify(s),'" did not provide a usable location.')),i.push(null))}}),n.output.forEach(function(s){var c=kD({},s),u="numberOfComponents"in c?c.numberOfComponents:1;if(s.location===pt.UNIFORM&&"tuples"in c&&(c.size=u*c.tuples),s.location===pt.COORDINATE){var f=r.getPoints(),l=Sr.newInstance({dataType:f.getDataType()});l.setNumberOfPoints(f.getNumberOfPoints(),f.getNumberOfComponents()),a.setPoints(l),o.push(l)}else{var p=[[pt.UNIFORM,function(x){return x.getFieldData()},function(x,g){return"tuples"in g?g.tuples:0}],[pt.POINT,function(x){return x.getPointData()},function(x){return x.getPoints().getNumberOfPoints()}],[pt.CELL,function(x){return x.getCellData()},function(x){return x.getNumberOfCells()}],[pt.VERTEX,function(x){return x.getVertexData()},function(x){return x.getNumberOfVertices()}],[pt.EDGE,function(x){return x.getEdgeData()},function(x){return x.getNumberOfEdges()}],[pt.ROW,function(x){return x.getRowData()},function(x){return x.getNumberOfRows()}]].reduce(function(x,g){return x[g[0]]={getData:g[1],getSize:g[2]},x},{}),h=null,v=0;if("location"in s&&s.location in p&&(h=p[s.location].getData(a),v=p[s.location].getSize(r,c)),v<=0)Ao("Output array size could not be determined for ".concat(JSON.stringify(s),".")),o.push(null);else if(h){c.size=u*v;var y=de.newInstance(c),m=h.addArray(y);"attribute"in c&&s.location!==pt.UNIFORM&&h.setActiveAttributeByIndex(m,c.attribute),o.push(y)}else Ao('Specifier "'.concat(JSON.stringify(s),'" did not provide a usable location.')),o.push(null)}}),{arraysIn:i,arraysOut:o}},t.requestData=function(n,r){if(!e.formula)return 0;var a=e.formula.getArrays(n),i=wt({vtkClass:n[0].getClassName()});i.shallowCopy(n[0]),r[0]=i;var o=t.prepareArrays(a,n[0],r[0]);return e.formula.evaluate(o.arraysIn,o.arraysOut),1}}var AD={formula:{getArrays:function(){return{input:[],output:[]}},evaluate:function(){return null}}};function zh(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,AD,n),B.obj(t,e),B.algo(t,e,1,1),FD(t,e)}var VD=B.newInstance(zh,"vtkCalculator"),BD={newInstance:VD,extend:zh};const{FieldDataTypes:Wh}=dn,UD={props:{port:{type:Number,default:0},name:{type:String,default:"scalars"},location:{type:String,default:"POINT"},arrays:{type:Array,default:()=>[]},formula:{type:Function,default:t=>t[0]}},setup(t){const e=ce.ref(BD.newInstance()),n=ce.inject("downstream");ce.provide("downstream",e),ce.onMounted(()=>{e.value.setFormulaSimple(Wh[t.location],t.arrays,t.name,t.formula),n.value.setInputConnection(e.value.getOutputPort(),t.port)}),ce.onBeforeUnmount(()=>{e.value&&(e.value.delete(),e.value=null)}),ce.onUpdated(()=>{e.value.setFormulaSimple(Wh[t.location],t.arrays,t.name,t.formula)})},template:'<div class="vtk-calculator"><slot></slot></div>'},Hh={setup(){const t=ce.inject("dataset");ce.provide("fields",t==null?void 0:t.getCellData())},template:'<div class="vtk-cell-data"><slot></slot></div>'},GD={int32:Int32Array,int16:Int16Array,int8:Int8Array,uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array,float32:Float32Array,float64:Float64Array};function $h(t,e){if(!t)return null;if(Array.isArray(t))return e.from(t);if(t.dtype){const{bvals:n,dtype:r}=t,a=aa.toArrayBuffer(n);return new GD[r](a)}return t}const Kh={props:{name:{type:String,default:"scalars"},registration:{type:String,default:"addArray"},type:{type:String,default:"Float32Array"},values:{type:[Array,Object,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array]},numberOfComponents:{type:Number,default:1}},setup(t){const e=ce.inject("dataset"),n=ce.inject("fields"),r=ce.inject("representation"),a=de.newInstance({empty:!0}),i=on(()=>{const f=Ot[t.type];a.setData($h(t.values,f),t.numberOfComponents),e&&e.modified(),r&&r.dataChanged()},1),{name:o,type:s,values:c,numberOfComponents:u}=ce.toRefs(t);ce.watch(o,a.setName),ce.watch(s,i),ce.watch(c,i),ce.watch(u,i),ce.onMounted(()=>{n&&n[t.registration](a),t.name&&a.setName(t.name),t.values&&(t.values.bvals||t.values.length)&&i()}),ce.onBeforeUnmount(()=>{n&&n.removeArray(a),a.delete()}),ce.provide("array",a)},template:'<div class="vtk-data-array" :name="name" />'},PD={setup(){const t=ce.inject("dataset");ce.provide("fields",t==null?void 0:t.getFieldData())},template:'<div class="vtk-field-data"><slot></slot></div>'};var ID=[{Name:"KAAMS",IndexedColors:[1,1,1,1,0,0,0,1,0,0,0,1,1,1,0,1,0,1,0,1,1,.63,.63,1,.67,.5,.33,1,.5,.75,.53,.35,.7,1,.75,.5],Annotations:[0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11]},{ColorSpace:"Diverging",Name:"Cool to Warm",NanColor:[1,1,0],RGBPoints:[0,.23137254902,.298039215686,.752941176471,.5,.865,.865,.865,1,.705882352941,.0156862745098,.149019607843]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Cool to Warm (Extended)",NanColor:[.25,0,0],RGBPoints:[0,0,0,.34902,.03125,.039216,.062745,.380392,.0625,.062745,.117647,.411765,.09375,.090196,.184314,.45098,.125,.12549,.262745,.501961,.15625,.160784,.337255,.541176,.1875,.2,.396078,.568627,.21875,.239216,.454902,.6,.25,.286275,.521569,.65098,.28125,.337255,.592157,.701961,.3125,.388235,.654902,.74902,.34375,.466667,.737255,.819608,.375,.572549,.819608,.878431,.40625,.654902,.866667,.909804,.4375,.752941,.917647,.941176,.46875,.823529,.956863,.968627,.5,.988235,.960784,.901961,.5,.941176,.984314,.988235,.52,.988235,.945098,.85098,.54,.980392,.898039,.784314,.5625,.968627,.835294,.698039,.59375,.94902,.733333,.588235,.625,.929412,.65098,.509804,.65625,.909804,.564706,.435294,.6875,.878431,.458824,.352941,.71875,.839216,.388235,.286275,.75,.760784,.294118,.211765,.78125,.701961,.211765,.168627,.8125,.65098,.156863,.129412,.84375,.6,.094118,.094118,.875,.54902,.066667,.098039,.90625,.501961,.05098,.12549,.9375,.45098,.054902,.172549,.96875,.4,.054902,.192157,1,.34902,.070588,.211765]},{ColorSpace:"Diverging",Name:"Warm to Cool",NanColor:[1,1,0],RGBPoints:[0,.705882352941,.0156862745098,.149019607843,.5,.865,.865,.865,1,.23137254902,.298039215686,.752941176471]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Warm to Cool (Extended)",NanColor:[.250004,0,0],RGBPoints:[0,.34902,0,.129412,.025,.4,.00392157,.101961,.05,.470588,.0156863,.0901961,.075,.54902,.027451,.0705882,.1,.619608,.0627451,.0431373,.125,.690196,.12549,.0627451,.15,.741176,.184314,.0745098,.175,.788235,.266667,.0941176,.2,.811765,.345098,.113725,.225,.831373,.411765,.133333,.25,.85098,.47451,.145098,.275,.870588,.54902,.156863,.3,.878431,.619608,.168627,.325,.890196,.658824,.196078,.35,.909804,.717647,.235294,.375,.929412,.776471,.278431,.395522,.94902,.823529,.321569,.418905,.968627,.87451,.407843,.444278,.980392,.917647,.509804,.470149,.988235,.956863,.643137,.483582,.992157,.964706,.713725,.499,.988235,.980392,.870588,.5,1,1,1,.501,.913725,.988235,.937255,.516418,.827451,.980392,.886275,.531343,.764706,.980392,.866667,.546766,.658824,.980392,.843137,.564179,.572549,.964706,.835294,.587562,.423529,.941176,.87451,.60597,.262745,.901961,.862745,.629851,.0705882,.854902,.870588,.651741,.0509804,.8,.85098,.681592,.0235294,.709804,.831373,.712935,.0313725,.615686,.811765,.75,.0313725,.537255,.788235,.775,.0392157,.466667,.768627,.8,.0509804,.396078,.741176,.825,.054902,.317647,.709804,.85,.054902,.243137,.678431,.875,.0431373,.164706,.639216,.9,.0313725,.0980392,.6,.925,.0392157,.0392157,.560784,.95,.105882,.0509804,.509804,.975,.113725,.0235294,.45098,1,.12549,0,.380392]},{ColorSpace:"RGB",Name:"Rainbow Desaturated",NanColor:[1,1,0],RGBPoints:[0,.278431372549,.278431372549,.858823529412,.143,0,0,.360784313725,.285,0,1,1,.429,0,.501960784314,0,.571,1,1,0,.714,1,.380392156863,0,.857,.419607843137,0,0,1,.878431372549,.301960784314,.301960784314]},{ColorSpace:"RGB",Name:"Cold and Hot",NanColor:[1,1,0],RGBPoints:[0,0,1,1,.45,0,0,1,.5,0,0,.501960784314,.55,1,0,0,1,1,1,0]},{ColorSpace:"RGB",Name:"Black-Body Radiation",NanColor:[0,.498039215686,1],RGBPoints:[0,0,0,0,.4,.901960784314,0,0,.8,.901960784314,.901960784314,0,1,1,1,1]},{ColorSpace:"RGB",Name:"X Ray",NanColor:[1,0,0],RGBPoints:[0,1,1,1,1,0,0,0]},{ColorSpace:"RGB",Name:"Grayscale",NanColor:[1,0,0],RGBPoints:[0,0,0,0,1,1,1,1]},{ColorSpace:"RGB",Name:"BkRd",NanColor:[0,1,1],RGBPoints:[0,0,0,0,1,1,0,0]},{ColorSpace:"RGB",Name:"BkGn",NanColor:[1,0,1],RGBPoints:[0,0,0,0,1,0,1,0]},{ColorSpace:"RGB",Name:"BkBu",NanColor:[1,1,0],RGBPoints:[0,0,0,0,1,0,0,1]},{ColorSpace:"RGB",Name:"BkMa",NanColor:[0,1,0],RGBPoints:[0,0,0,0,1,1,0,1]},{ColorSpace:"RGB",Name:"BkCy",NanColor:[0,1,1],RGBPoints:[0,0,0,0,1,0,1,1]},{ColorSpace:"RGB",Name:"Black, Blue and White",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.333,0,0,.501960784314,.666,0,.501960784314,1,1,1,1,1]},{ColorSpace:"RGB",Name:"Black, Orange and White",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.333,.501960784314,0,0,.666,1,.501960784314,0,1,1,1,1]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Linear YGB 1211g",NanColor:[.25,0,0],RGBPoints:[0,1,.988235,.968627,.02,1,.952941,.878431,.05,.968627,.905882,.776471,.1,.94902,.898039,.647059,.15,.901961,.878431,.556863,.2,.847059,.858824,.482353,.25,.690196,.819608,.435294,.3,.513725,.768627,.384314,.35,.337255,.721569,.337255,.4,.278431,.658824,.392157,.45,.231373,.639216,.435294,.5,.203922,.6,.486275,.55,.172549,.568627,.537255,.6,.141176,.517647,.54902,.65,.133333,.458824,.541176,.7,.12549,.396078,.529412,.75,.117647,.321569,.521569,.8,.121569,.258824,.509804,.85,.133333,.227451,.501961,.9,.145098,.192157,.490196,.95,.188235,.164706,.470588,1,.258824,.196078,.439216]},{ColorSpace:"CIELAB",Creator:"Francesca Samsel",Name:"Linear Green (Gr4L)",NanColor:[.25,0,0],RGBPoints:[0,.054902,.109804,.121569,.05,.07451,.172549,.180392,.1,.086275,.231373,.219608,.15,.094118,.278431,.25098,.2,.109804,.34902,.278431,.25,.113725,.4,.278431,.3,.117647,.45098,.270588,.35,.117647,.490196,.243137,.4,.113725,.521569,.203922,.45,.109804,.54902,.152941,.5,.082353,.588235,.082353,.55,.109804,.631373,.05098,.6,.211765,.678431,.082353,.65,.317647,.721569,.113725,.7,.431373,.760784,.160784,.75,.556863,.8,.239216,.8,.666667,.839216,.294118,.85,.784314,.878431,.396078,.9,.886275,.921569,.533333,.95,.960784,.94902,.670588,1,1,.984314,.901961]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Linear Blue (8_31f)",NanColor:[.25,0,0],RGBPoints:[0,.960784,1,.980392,.05,.815686,.960784,.913725,.1,.670588,.929412,.870588,.15,.556863,.901961,.843137,.2,.478431,.870588,.823529,.25,.439216,.831373,.803922,.3,.4,.8,.788235,.35,.376471,.768627,.768627,.4,.34902,.709804,.729412,.45,.32549,.654902,.690196,.5,.301961,.607843,.658824,.55,.247059,.545098,.619608,.6,.239216,.494118,.580392,.65,.227451,.439216,.541176,.7,.227451,.403922,.521569,.75,.231373,.368627,.501961,.8,.227451,.321569,.470588,.85,.219608,.282353,.439216,.9,.192157,.235294,.4,.95,.160784,.184314,.34902,1,.133333,.12549,.301961]},{ColorSpace:"HSV",Name:"Blue to Red Rainbow",NanColor:[.498039215686,.498039215686,.498039215686],RGBPoints:[0,0,0,1,1,1,0,0]},{ColorSpace:"HSV",Name:"Red to Blue Rainbow",NanColor:[.498039215686,.498039215686,.498039215686],RGBPoints:[0,1,0,0,1,0,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended White",NanColor:[1,1,0],RGBPoints:[0,1,1,1,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended Grey",NanColor:[1,1,0],RGBPoints:[0,.317647058824,.341176470588,.43137254902,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended Black",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Blue to Yellow",NanColor:[1,0,0],RGBPoints:[0,.0392156862745,.0392156862745,.949019607843,1,.949019607843,.949019607843,.0392156862745]},{ColorSpace:"HSV",Name:"blot",RGBPoints:[0,0,0,1,.166,0,0,1,.167,1,0,1,.332,1,0,1,.333,0,1,1,.5,0,1,1,.501,0,1,0,.666,0,1,0,.667,1,1,0,.832,1,1,0,.833,1,0,0,1,1,0,0]},{ColorSpace:"Lab",Name:"CIELab Blue to Red",NanColor:[1,1,0],RGBPoints:[0,0,.6,.749019607843,1,.76862745098,.466666666667,.341176470588]},{ColorSpace:"RGB",Name:"jet",RGBPoints:[-1,0,0,.5625,-.777778,0,0,1,-.269841,0,1,1,-.015873,.5,1,.5,.238095,1,1,0,.746032,1,0,0,1,.5,0,0]},{ColorSpace:"RGB",Name:"rainbow",RGBPoints:[-1,0,0,1,-.5,0,1,1,0,0,1,0,.5,1,1,0,1,1,0,0]},{ColorSpace:"Lab",Name:"erdc_rainbow_bright",RGBPoints:[-1,.32549,.14902,.960784,-.866221,.297047,.375586,.963836,-.732441,.180302,.536818,.964627,-.598662,.1302,.649207,.929647,-.464883,.0445143,.749654,.855998,-.331104,.0271325,.830713,.721527,-.197324,.259504,.866145,.543555,-.0635452,.428364,.890725,.329819,.0702341,.568503,.898508,.187623,.204013,.738259,.890317,.0825461,.337793,.84546,.86136,.0147555,.471572,.912191,.808018,0,.605351,.962848,.710445,0,.73913,.999469,.600258,.0176284,.87291,.994156,.445975,.193912,1,.980407,.247105,.262699]},{ColorSpace:"Lab",Name:"erdc_rainbow_dark",RGBPoints:[-1,0,0,.423499,-.866221,0,.119346,.529237,-.732441,0,.238691,.634976,-.598662,0,.346852,.68788,-.464883,0,.45022,.718141,-.331104,0,.553554,.664839,-.197324,0,.651082,.519303,-.0635452,.115841,.72479,.352857,.0702341,.326771,.781195,.140187,.204013,.522765,.798524,.0284624,.337793,.703162,.788685,.00885756,.471572,.845118,.751133,0,.605351,.955734,.690825,0,.73913,.995402,.567916,.0618524,.87291,.987712,.403398,.164851,1,.980407,.247105,.262699]},{ColorSpace:"Lab",Name:"nic_CubicL",RGBPoints:[-1,.479965,.0118108,.5307,-.87451,.522213,.0551282,.706919,-.74902,.50839,.237278,.867764,-.623529,.451617,.373834,.987255,-.498039,.39365,.497255,.97506,-.372549,.328631,.599639,.891843,-.247059,.250043,.690286,.778553,-.121569,.249656,.764905,.645857,.00392157,.297954,.821466,.50449,.129412,.337509,.872595,.358447,.254902,.430011,.913789,.297079,.380392,.587191,.931381,.333353,.505882,.727937,.93591,.353742,.631373,.826403,.921081,.365066,.756863,.893201,.846317,.372662,.882353,.965347,.73884,.378506,1,.983235,.597451,.366856]},{ColorSpace:"Lab",Name:"nic_CubicYF",RGBPoints:[-1,.5151,.0482,.6697,-.87451,.520711,.168955,.800574,-.74902,.493694,.278596,.911824,-.623529,.440026,.369475,.984978,-.498039,.398932,.457593,.987053,-.372549,.350651,.540644,.929608,-.247059,.298827,.615625,.857729,-.121569,.239928,.685061,.769531,.00392157,.228832,.739349,.673287,.129412,.263297,.78608,.569988,.254902,.298107,.828337,.460214,.380392,.33092,.864071,.352674,.505882,.38306,.898169,.287309,.631373,.49023,.917481,.307961,.756863,.62372,.926026,.332309,.882353,.717458,.92527,.342476,1,.8,.9255,.3529]},{ColorSpace:"Lab",Name:"gist_earth",RGBPoints:[-1,0,0,0,-.87451,.239216,.027451,.415686,-.74902,.0901961,.254902,.556863,-.623529,.0941176,.352941,.54902,-.498039,.105882,.435294,.533333,-.372549,.12549,.52549,.501961,-.247059,.156863,.596078,.443137,-.121569,.196078,.65098,.380392,.00392157,.282353,.717647,.301961,.129412,.466667,.772549,.27451,.254902,.678431,.784314,.309804,.380392,.901961,.756863,.376471,.505882,.992157,.705882,.521569,.631373,1,.721569,.701961,.756863,1,.784314,.784314,.882353,1,.866667,.866667,1,1,1,1]},{ColorSpace:"Lab",Name:"2hot",RGBPoints:[-1,.0416667,0,0,-.873016,.208333,0,0,-.746032,.375,0,0,-.619048,.541667,0,0,-.492063,.708333,0,0,-.365079,.854137,0,0,-.238095,.937488,.039062,0,-.111111,1,.208333,0,.015873,1,.375,0,.142857,1,.541667,0,.269841,1,.708333,0,.396825,1,.858805,.03125,.52381,1,.947392,.15625,.650794,1,1,.3125,.777778,1,1,.5625,.904762,1,1,.8125,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_red2yellow_BW",RGBPoints:[-1,754296e-12,0,109827e-10,-.87451,.18285,.0264094,0,-.74902,.3066,0,0,-.623529,.422841,0,0,-.498039,.522945,0,0,-.372549,.605721,0,0,-.247059,.672502,.14168,0,-.121569,.728167,.244025,0,.00392157,.781215,.333454,0,.129412,.825,.423586,0,.254902,.855893,.516793,0,.380392,.880491,.608846,0,.505882,.910305,.695505,0,.631373,.94109,.779067,.223528,.756863,.967873,.858572,.473521,.882353,.986815,.933211,.751583,1,1,1,.999997]},{ColorSpace:"Lab",Name:"erdc_marine2gold_BW",RGBPoints:[-1,111641e-12,0,162551e-11,-.87451,.0413146,.0619808,.209857,-.74902,.0185557,.101341,.350684,-.623529,.00486405,.149847,.461054,-.498039,.0836345,.210845,.517906,-.372549,.173222,.276134,.541793,-.247059,.259857,.343877,.535869,-.121569,.362299,.408124,.504293,.00392157,.468266,.468276,.468257,.129412,.582781,.527545,.374914,.254902,.691591,.585251,.274266,.380392,.784454,.645091,.247332,.505882,.862299,.710383,.27518,.631373,.920863,.782923,.351563,.756863,.955792,.859699,.533541,.882353,.976162,.93433,.780671,1,1,1,.999983]},{ColorSpace:"Lab",Name:"erdc_blue2gold_BW",RGBPoints:[-1,0,0,0,-.87451,.0742735,.0440331,.230013,-.74902,.125276,.0258685,.415826,-.623529,.143879,.0163031,.591346,-.498039,.212261,.0627855,.705239,-.372549,.306048,.141178,.763636,-.247059,.391537,.232286,.773263,-.121569,.461734,.336633,.708321,.00392157,.54209,.427581,.590007,.129412,.61704,.508623,.460978,.254902,.702703,.579586,.309117,.380392,.790336,.644811,.170397,.505882,.870173,.710733,.117134,.631373,.93656,.781991,.157144,.756863,.965672,.862068,.409836,.882353,.985751,.936296,.714162,1,1,1,.999999]},{ColorSpace:"Lab",Name:"erdc_sapphire2gold_BW",RGBPoints:[-1,.107704,.107708,.107694,-.87451,.1851,.112354,.308554,-.74902,.236782,.114233,.48788,-.623529,.28296,.126187,.639464,-.498039,.344787,.171643,.739713,-.372549,.413325,.242371,.76913,-.247059,.481863,.3131,.719841,-.121569,.550402,.383829,.612222,.00392157,.61894,.454558,.51126,.129412,.687478,.525287,.39993,.254902,.756017,.596016,.289923,.380392,.824555,.666745,.255498,.505882,.892979,.736822,.27696,.631373,.938851,.804966,.351734,.756863,.966491,.874853,.53572,.882353,.982105,.94153,.782579,1,1,1,.999986]},{ColorSpace:"Lab",Name:"erdc_red2purple_BW",RGBPoints:[-1,0,0,0,-.87451,.167793,.0166271,.0431278,-.74902,.262608,.0107595,.0791181,-.623529,.351902,.0101858,.100926,-.498039,.441257,.0160835,.131919,-.372549,.5221,.0555972,.195625,-.247059,.593852,.104294,.310234,-.121569,.654628,.158115,.448486,.00392157,.707443,.220914,.570253,.129412,.749504,.293268,.67897,.254902,.781587,.370517,.779269,.380392,.809951,.451099,.855831,.505882,.84424,.531462,.900451,.631373,.865174,.620901,.91606,.756863,.875041,.714054,.910284,.882353,.880764,.80554,.896276,1,.887572,.887591,.887556]},{ColorSpace:"Lab",Name:"erdc_purple2pink_BW",RGBPoints:[-1,0,0,0,-.87451,.117562,.0291202,.175876,-.74902,.178368,.0458476,.285454,-.623529,.237731,.0680173,.387717,-.498039,.300877,.0956291,.484802,-.372549,.370929,.136858,.554985,-.247059,.449033,.189273,.58863,-.121569,.529971,.245796,.598587,.00392157,.609914,.300643,.610244,.129412,.697079,.351286,.616371,.254902,.785858,.401991,.617376,.380392,.862517,.45745,.64463,.505882,.91359,.525462,.705336,.631373,.932583,.61064,.767412,.756863,.922478,.706966,.817522,.882353,.901302,.803071,.856311,1,.887571,.887591,.887549]},{ColorSpace:"Lab",Name:"erdc_pbj_lin",RGBPoints:[-1,0,0,0,-.87451,.091821,.0611476,.10617,-.74902,.160311,.0900022,.192713,-.623529,.22484,.12126,.272128,-.498039,.291263,.157469,.340828,-.372549,.360015,.200388,.388903,-.247059,.437497,.250058,.387201,-.121569,.512636,.304969,.355955,.00392157,.582603,.360874,.33488,.129412,.655126,.416374,.306351,.254902,.725889,.473329,.279051,.380392,.778125,.537928,.302697,.505882,.815894,.606931,.382431,.631373,.839159,.679308,.497608,.756863,.854748,.751666,.631792,.882353,.869483,.822508,.768592,1,.887572,.887589,.887565]},{ColorSpace:"Lab",Name:"erdc_blue2green_muted",RGBPoints:[-1,.107704,.107708,.107695,-.87451,.141522,.13066,.270741,-.74902,.180123,.146119,.42308,-.623529,.210161,.169674,.551795,-.498039,.239701,.212939,.634969,-.372549,.253916,.282947,.653641,-.247059,.242791,.366933,.608521,-.121569,.226302,.446776,.52693,.00392157,.236237,.514689,.458798,.129412,.274641,.577589,.376069,.254902,.349625,.633993,.288131,.380392,.4437,.683677,.260497,.505882,.536247,.731214,.285424,.631373,.628472,.777128,.349151,.756863,.718259,.819287,.496825,.882353,.804768,.856164,.703299,1,.887571,.887591,.887548]},{ColorSpace:"Lab",Name:"erdc_blue2green_BW",RGBPoints:[-1,363578e-12,0,529374e-11,-.87451,.0539915,.0577948,.212806,-.74902,.0620393,.0758942,.388959,-.623529,.0697499,.102032,.54177,-.498039,.113295,.156156,.64334,-.372549,.152047,.243196,.670283,-.247059,.158096,.344084,.622864,-.121569,.151142,.43922,.532767,.00392157,.17155,.521588,.457719,.129412,.225861,.599141,.363997,.254902,.32328,.67007,.259083,.380392,.442344,.733697,.223754,.505882,.558409,.794941,.257411,.631373,.673875,.854344,.340822,.756863,.787244,.909326,.524717,.882353,.896483,.958063,.775914,1,1,1,.999982]},{ColorSpace:"Lab",Name:"GREEN-WHITE_LINEAR",RGBPoints:[-1,0,0,0,-.87451,0,.062745,0,-.74902,0,.12549,0,-.623529,0,.188235,0,-.498039,0,.25098,0,-.372549,0,.313725,0,-.247059,0,.376471,0,-.121569,.094118,.439216,0,.00392157,.196078,.501961,0,.129412,.294118,.564706,0,.254902,.396078,.627451,0,.380392,.498039,.690196,0,.505882,.6,.752941,.145098,.631373,.701961,.815686,.364706,.756863,.8,.878431,.580392,.882353,.901961,.941176,.796078,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_green2yellow_BW",RGBPoints:[-1,0,0,0,-.87451,0,.105542,.0603919,-.74902,0,.159454,.104148,-.623529,0,.219502,.15542,-.498039,0,.282276,.203811,-.372549,0,.346331,.235652,-.247059,0,.411765,.235428,-.121569,0,.477177,.217977,.00392157,.0593644,.541635,.21361,.129412,.233081,.604722,.210591,.254902,.369803,.664942,.226536,.380392,.498446,.722367,.288237,.505882,.601929,.782244,.380815,.631373,.703207,.840497,.512134,.756863,.803186,.896433,.674462,.882353,.903834,.950266,.846715,1,1,1,.999981]},{ColorSpace:"Lab",Name:"blue2cyan",RGBPoints:[-1,0,0,0,-.87451,0,.152941,.364706,-.74902,0,.254902,.470588,-.623529,0,.34902,.572549,-.498039,0,.443137,.670588,-.372549,0,.537255,.772549,-.247059,0,.627451,.870588,-.121569,0,.717647,.964706,.00392157,.0784314,.772549,1,.129412,.207843,.858824,1,.254902,.32549,.941176,1,.380392,.45098,1,1,.505882,.560784,1,1,.631373,.662745,1,1,.756863,.760784,1,1,.882353,.870588,1,1,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_blue2cyan_BW",RGBPoints:[-1,405298e-12,0,59012e-10,-.87451,.0207526,.0740933,.18093,-.74902,0,.121033,.30343,-.623529,0,.166892,.416095,-.498039,0,.216768,.524796,-.372549,.0164769,.275471,.608585,-.247059,.0544527,.344824,.659267,-.121569,.0880643,.419118,.688675,.00392157,.127938,.492556,.720256,.129412,.149476,.566946,.756918,.254902,.188961,.641333,.792122,.380392,.245482,.715336,.827609,.505882,.329216,.786235,.874761,.631373,.453558,.852803,.918466,.756863,.626281,.910493,.954,.882353,.82257,.958709,.980146,1,1,1,.999989]},{ColorSpace:"Lab",Name:"erdc_blue_BW",RGBPoints:[-1,0,0,0,-.87451,.0425591,.0763529,.150682,-.74902,.0569472,.119154,.275403,-.623529,.0635978,.164772,.395427,-.498039,.0774342,.213851,.510014,-.372549,.106815,.267034,.615102,-.247059,.122093,.324649,.720068,-.121569,.160851,.387068,.806956,.00392157,.213754,.453516,.878012,.129412,.26722,.524656,.932436,.254902,.326844,.599279,.968038,.380392,.403403,.674712,.984784,.505882,.499703,.745519,1,.631373,.615055,.813983,1,.756863,.74405,.879228,1,.882353,.877909,.941913,1,1,1,1,.999996]},{ColorSpace:"Lab",Name:"BLUE-WHITE",RGBPoints:[-1,0,0,0,-.87451,0,0,.082353,-.74902,0,0,.168627,-.623529,0,0,.254902,-.498039,0,0,.337255,-.372549,0,0,.423529,-.247059,0,0,.509804,-.121569,0,.101961,.592157,.00392157,0,.203922,.678431,.129412,0,.301961,.764706,.254902,0,.403922,.85098,.380392,0,.505882,.933333,.505882,0,.603922,1,.631373,.254902,.705882,1,.756863,.509804,.807843,1,.882353,.764706,.905882,1,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_purple_BW",RGBPoints:[-1,4264e-11,0,620844e-12,-.87451,.100579,.0593111,.145666,-.74902,.167794,.0889224,.254953,-.623529,.231446,.123339,.360511,-.498039,.296699,.163027,.461278,-.372549,.363211,.209286,.55306,-.247059,.431136,.260776,.637195,-.121569,.498202,.320012,.705799,.00392157,.567456,.380459,.778091,.129412,.629381,.445284,.8448,.254902,.688373,.517374,.895694,.380392,.74891,.590906,.93976,.505882,.805017,.667956,.977626,.631373,.850914,.752618,.992396,.756863,.89724,.838454,.994093,.882353,.948461,.922603,.994449,1,1,1,.999967]},{ColorSpace:"Lab",Name:"erdc_magenta_BW",RGBPoints:[-1,0,0,254023e-10,-.87451,.128696,.0456782,.11635,-.74902,.228133,.0476299,.201452,-.623529,.327273,.0374065,.282107,-.498039,.420953,.0408166,.35709,-.372549,.511562,.0642203,.430511,-.247059,.599552,.102686,.504257,-.121569,.684646,.150536,.579429,.00392157,.765817,.205978,.656062,.129412,.839176,.27229,.731807,.254902,.89536,.357594,.797309,.380392,.930238,.457825,.846984,.505882,.945921,.564536,.880571,.631373,.948995,.670753,.902279,.756863,.947124,.772819,.918171,.882353,.947265,.869424,.934352,1,.954719,.95475,.954726]},{ColorSpace:"Lab",Name:"magenta",RGBPoints:[-1,0,0,0,-.87451,.364706,0,.152941,-.74902,.470588,0,.254902,-.623529,.572549,0,.34902,-.498039,.670588,0,.443137,-.372549,.772549,0,.537255,-.247059,.870588,0,.627451,-.121569,.964706,0,.717647,.00392157,1,.0784314,.772549,.129412,1,.207843,.858824,.254902,1,.32549,.941176,.380392,1,.45098,1,.505882,1,.560784,1,.631373,1,.662745,1,.756863,1,.760784,1,.882353,1,.870588,1,1,1,1,1]},{ColorSpace:"Lab",Name:"RED-PURPLE",RGBPoints:[-1,0,0,0,-.87451,.188235,0,.007843,-.74902,.345098,0,.035294,-.623529,.439216,0,.098039,-.498039,.533333,0,.152941,-.372549,.627451,.015686,.211765,-.247059,.721569,.031373,.266667,-.121569,.8,.047059,.329412,.00392157,.862745,.047059,.403922,.129412,.941176,.062745,.466667,.254902,.988235,.078431,.54902,.380392,.988235,.141176,.643137,.505882,.988235,.25098,.729412,.631373,.988235,.376471,.811765,.756863,.988235,.54902,.886275,.882353,.988235,.752941,.952941,1,.996078,.996078,.996078]},{ColorSpace:"Lab",Name:"erdc_red_BW",RGBPoints:[-1,0,0,0,-.87451,.147204,.0480135,.0401815,-.74902,.253411,.0617478,.0301333,-.623529,.356059,.0746331,.0446897,-.498039,.457731,.0934935,.0636931,-.372549,.557199,.122714,.0860013,-.247059,.665179,.144238,.105585,-.121569,.763833,.187056,.138326,.00392157,.847035,.254558,.189407,.129412,.905663,.345937,.258215,.254902,.941431,.447111,.346277,.380392,.962608,.546927,.457571,.505882,.987833,.637276,.569944,.631373,.994202,.732176,.687958,.756863,.993304,.826268,.800567,.882353,.994413,.917205,.906393,1,1,1,.999979]},{ColorSpace:"Lab",Name:"RED_TEMPERATURE",RGBPoints:[-1,0,0,0,-.87451,.090196,0,0,-.74902,.180392,0,0,-.623529,.270588,0,0,-.498039,.360784,0,0,-.372549,.45098,0,0,-.247059,.545098,0,0,-.121569,.635294,0,0,.00392157,.72549,.058824,0,.129412,.815686,.176471,0,.254902,.905882,.294118,0,.380392,1,.411765,0,.505882,1,.533333,.027451,.631373,1,.65098,.27451,.756863,1,.768627,.521569,.882353,1,.886275,.768627,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_orange_BW",RGBPoints:[-1,0,0,253806e-10,-.87451,.135871,.0593824,0,-.74902,.224328,.0907216,0,-.623529,.318083,.119647,0,-.498039,.414443,.150246,0,-.372549,.511077,.184884,0,-.247059,.605501,.226033,0,-.121569,.695274,.275491,0,.00392157,.777826,.334445,0,.129412,.851498,.402441,0,.254902,.915899,.47759,602975e-9,.380392,.971984,.557882,.0361443,.505882,1,.641287,.135967,.631373,1,.725198,.27997,.756863,1,.808205,.438135,.882353,1,.89306,.587036,1,1,.977928,.721599]},{ColorSpace:"Lab",Name:"heated_object",RGBPoints:[-1,0,0,0,-.87451,.34902,.0862745,0,-.74902,.45098,.172549,0,-.623529,.52549,.231373,0,-.498039,.580392,.278431,0,-.372549,.623529,.313725,0,-.247059,.670588,.352941,0,-.121569,.717647,.392157,0,.00392157,.772549,.439216,0,.129412,.839216,.494118,0,.254902,.901961,.541176,0,.380392,.968627,.6,0,.505882,1,.658824,0,.631373,1,.721569,0,.756863,1,.827451,.298039,.882353,1,.976471,.72549,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_gold_BW",RGBPoints:[-1,0,0,190933e-10,-.87451,.128363,.0636265,0,-.74902,.193795,.111057,0,-.623529,.25976,.15987,0,-.498039,.328546,.210589,0,-.372549,.399726,.26332,0,-.247059,.472969,.318261,0,-.121569,.546245,.375827,0,.00392157,.61745,.436719,0,.129412,.685545,.501113,0,.254902,.749578,.568799,0,.380392,.80962,.6394,0,.505882,.865572,.712699,.10257,.631373,.917709,.787569,.233665,.756863,.966914,.863138,.369608,.882353,1,.939405,.496104,1,.999225,1,.612275]},{ColorSpace:"Lab",Name:"erdc_brown_BW",RGBPoints:[-1,33216e-11,0,483629e-11,-.87451,.14693,.0518172,0,-.74902,.225806,.0814996,0,-.623529,.301681,.111452,0,-.498039,.370487,.150664,0,-.372549,.43108,.199477,0,-.247059,.4849,.255107,0,-.121569,.536798,.313486,0,.00392157,.59286,.371167,0,.129412,.653119,.428135,0,.254902,.714589,.485917,.0379541,.380392,.774667,.54565,.116634,.505882,.831222,.608047,.183895,.631373,.880305,.674199,.260298,.756863,.922314,.742472,.367086,.882353,.959408,.811222,.497258,1,.993548,.875183,.622093]},{ColorSpace:"Lab",Name:"copper_Matlab",RGBPoints:[-1,0,0,0,-.87451,.0784314,.0501961,.0313725,-.74902,.156863,.100392,.0627451,-.623529,.235294,.150588,.0941176,-.498039,.313725,.200784,.12549,-.372549,.392157,.25098,.156863,-.247059,.470588,.301176,.188235,-.121569,.54902,.351373,.219608,.00392157,.627451,.401569,.25098,.129412,.705882,.451765,.282353,.254902,.784314,.501961,.313725,.380392,.862745,.552157,.345098,.505882,.941176,.602353,.376471,.631373,1,.652549,.407843,.756863,1,.702745,.439216,.882353,1,.752941,.470588,1,1,.8,.5]},{ColorSpace:"Lab",Name:"pink_Matlab",RGBPoints:[-1,0,0,0,-.87451,.312416,.204524,.204524,-.74902,.441822,.289241,.289241,-.623529,.54112,.354246,.354246,-.498039,.624831,.409048,.409048,-.372549,.698582,.45733,.45733,-.247059,.764404,.502282,.500979,-.121569,.791292,.591516,.54112,.00392157,.817297,.66895,.578481,.129412,.842499,.738308,.613572,.254902,.866968,.801687,.646762,.380392,.890766,.86041,.678329,.505882,.913944,.913944,.711254,.631373,.936549,.936549,.79459,.756863,.958621,.958621,.869979,.882353,.980196,.980196,.939336,1,1,1,1]},{ColorSpace:"Lab",Name:"bone_Matlab",RGBPoints:[-1,0,0,0,-.87451,.054902,.054902,.075817,-.74902,.109804,.109804,.151634,-.623529,.164706,.164706,.227451,-.498039,.219608,.219608,.303268,-.372549,.27451,.27451,.379085,-.247059,.329412,.329902,.454412,-.121569,.384314,.405719,.509314,.00392157,.439216,.481536,.564216,.129412,.494118,.557353,.619118,.254902,.54902,.63317,.67402,.380392,.603922,.708987,.728922,.505882,.660294,.783824,.783824,.631373,.746569,.838725,.838725,.756863,.832843,.893627,.893627,.882353,.919118,.948529,.948529,1,1,1,1]},{ColorSpace:"Lab",Name:"gray_Matlab",RGBPoints:[-1,0,0,0,-.87451,.0627451,.0627451,.0627451,-.74902,.12549,.12549,.12549,-.623529,.188235,.188235,.188235,-.498039,.25098,.25098,.25098,-.372549,.313725,.313725,.313725,-.247059,.376471,.376471,.376471,-.121569,.439216,.439216,.439216,.00392157,.501961,.501961,.501961,.129412,.564706,.564706,.564706,.254902,.627451,.627451,.627451,.380392,.690196,.690196,.690196,.505882,.752941,.752941,.752941,.631373,.815686,.815686,.815686,.756863,.878431,.878431,.878431,.882353,.941176,.941176,.941176,1,1,1,1]},{ColorSpace:"Lab",Name:"Purples",RGBPoints:[-1,.247059,0,.490196,-.87451,.288397,.07677,.525629,-.74902,.32975,.153587,.561092,-.623529,.373057,.236263,.600461,-.498039,.416363,.319,.639923,-.372549,.459669,.405613,.685198,-.247059,.503345,.491534,.730058,-.121569,.562399,.54862,.757616,.00392157,.621453,.606075,.785544,.129412,.680508,.674971,.824914,.254902,.739562,.743406,.863899,.380392,.798616,.800492,.893426,.505882,.85684,.856655,.922491,.631373,.898178,.894056,.942176,.756863,.938654,.930919,.961646,.882353,.964245,.958478,.977393,1,.988235,.984314,.992157]},{ColorSpace:"Lab",Name:"Blues",RGBPoints:[-1,.031373,.188235,.419608,-.87451,.031373,.253195,.516063,-.74902,.031757,.318139,.612149,-.623529,.080969,.38113,.661361,-.498039,.130427,.444152,.710327,-.372549,.195386,.509112,.743791,-.247059,.260715,.573841,.777209,-.121569,.341423,.628958,.808704,.00392157,.422745,.684075,.839892,.129412,.523137,.739193,.861546,.254902,.622684,.793464,.883429,.380392,.701423,.826928,.910988,.505882,.778685,.8603,.937993,.631373,.825928,.891795,.953741,.756863,.87328,.923291,.969489,.882353,.922491,.954787,.985236,1,.968627,.984314,1]},{ColorSpace:"Lab",Name:"Greens",RGBPoints:[-1,0,.266667,.105882,-.87451,0,.347374,.139346,-.74902,538e-6,.427912,.172933,-.623529,.069435,.486967,.222145,-.498039,.138178,.546082,.271326,-.372549,.197232,.609073,.31857,-.247059,.257255,.671742,.365859,-.121569,.357647,.720953,.415071,.00392157,.45767,.769919,.465021,.129412,.546251,.811257,.537855,.254902,.634295,.852211,.610688,.380392,.709097,.883706,.683522,.505882,.78316,.914833,.755894,.631373,.842215,.938454,.818885,.756863,.899977,.961538,.880692,.882353,.935409,.975317,.92203,1,.968627,.988235,.960784]},{ColorSpace:"Lab",Name:"PuBu",RGBPoints:[-1,.301961,0,.294118,-.87451,.404321,.029527,.390573,-.74902,.50599,.059592,.486782,-.623529,.519769,.158016,.551742,-.498039,.533456,.256194,.616301,-.372549,.54133,.33887,.655671,-.247059,.54902,.421592,.695087,-.121569,.54902,.506236,.736424,.00392157,.550127,.590573,.777701,.129412,.585559,.665375,.81707,.254902,.622145,.739023,.855825,.380392,.687105,.784298,.879446,.505882,.752065,.829758,.903253,.631373,.817024,.87897,.930811,.756863,.880907,.927213,.957832,.882353,.926182,.958708,.975548,1,.968627,.988235,.992157]},{ColorSpace:"Lab",Name:"BuPu",RGBPoints:[-1,.007843,.219608,.345098,-.87451,.01178,.286536,.449427,-.74902,.015702,.35328,.553479,-.623529,.01767,.396586,.622376,-.498039,.021115,.4402,.690688,-.372549,.11757,.503191,.722184,-.247059,.214625,.565859,.753633,-.121569,.336671,.615071,.78316,.00392157,.457978,.663975,.812503,.129412,.556401,.703345,.836125,.254902,.65421,.742714,.859669,.380392,.736886,.782084,.881323,.505882,.81827,.821638,.903068,.631373,.873387,.864944,.92669,.756863,.927536,.907605,.949988,.882353,.964937,.9391,.967705,1,1,.968627,.984314]},{ColorSpace:"Lab",Name:"BuGn",RGBPoints:[-1,.031373,.25098,.505882,-.87451,.031373,.329719,.590527,-.74902,.031911,.408397,.674787,-.623529,.100807,.479262,.710219,-.498039,.169704,.550219,.745744,-.372549,.238601,.62699,.787082,-.247059,.307958,.703114,.826759,-.121569,.39654,.752326,.797232,.00392157,.485121,.801046,.767705,.129412,.573702,.83451,.738178,.254902,.661592,.867743,.711034,.380392,.732457,.895302,.74253,.505882,.801845,.922307,.774579,.631373,.841215,.938055,.817885,.756863,.880907,.95391,.861084,.882353,.926182,.971626,.902422,1,.968627,.988235,.941176]},{ColorSpace:"Lab",Name:"GnBu",RGBPoints:[-1,0,.266667,.105882,-.87451,0,.347374,.139346,-.74902,538e-6,.427912,.172933,-.623529,.069435,.486967,.222145,-.498039,.138178,.546175,.272095,-.372549,.197232,.615071,.368551,-.247059,.256609,.683276,.464867,-.121569,.329443,.722645,.555417,.00392157,.403137,.762138,.645413,.129412,.503529,.805444,.718247,.254902,.603922,.848597,.790465,.380392,.704314,.887966,.847551,.505882,.802307,.926321,.903714,.631373,.851519,.944037,.941115,.756863,.899977,.961538,.976901,.882353,.935409,.975317,.984775,1,.968627,.988235,.992157]},{ColorSpace:"Lab",Name:"GnBuPu",RGBPoints:[-1,.003922,.27451,.211765,-.87451,.003922,.349312,.280661,-.74902,.003937,.423852,.349773,-.623529,.005905,.46519,.446228,-.498039,.009443,.506344,.542837,-.372549,.111803,.535871,.649135,-.247059,.214025,.565859,.753633,-.121569,.310481,.615071,.78316,.00392157,.407797,.663975,.812503,.129412,.531811,.703345,.836125,.254902,.65421,.742714,.859669,.380392,.736886,.782084,.881323,.505882,.81827,.821176,.902884,.631373,.873387,.854641,.922568,.756863,.927536,.888535,.942361,.882353,.964937,.929873,.964014,1,1,.968627,.984314]},{ColorSpace:"Lab",Name:"BuGnYl",RGBPoints:[-1,.031373,.113725,.345098,-.87451,.088458,.159,.463206,-.74902,.145052,.204567,.5807,-.623529,.139146,.287243,.620069,-.498039,.13318,.370196,.659562,-.372549,.123337,.470588,.706805,-.247059,.115386,.570335,.753126,-.121569,.186251,.643168,.761,.00392157,.258716,.71514,.768074,.129412,.380761,.760415,.750358,.254902,.503576,.806075,.732795,.380392,.645306,.861192,.719016,.505882,.783899,.91511,.705606,.631373,.858701,.944637,.6997,.756863,.931349,.973303,.698424,.882353,.966782,.987082,.777163,1,1,1,.85098]},{ColorSpace:"Lab",Name:"PuRd",RGBPoints:[-1,.286275,0,.415686,-.87451,.38273,.001968,.441276,-.74902,.479231,.003922,.466774,-.623529,.581592,.003922,.480554,-.498039,.683799,.00549,.494887,-.372549,.776317,.105882,.544098,-.247059,.867866,.206321,.592618,-.121569,.919047,.308681,.612303,.00392157,.968812,.411226,.632603,.129412,.974717,.519493,.671972,.254902,.980546,.626451,.71065,.380392,.984483,.701253,.732303,.505882,.988328,.77504,.755617,.631373,.990296,.828189,.812703,.756863,.992372,.880907,.869035,.882353,.996309,.926182,.912341,1,1,.968627,.952941]},{ColorSpace:"Lab",Name:"RdPu",RGBPoints:[-1,.403922,0,.121569,-.87451,.500377,0,.192434,-.74902,.596909,277e-6,.263037,-.623529,.703206,.035709,.300438,-.498039,.808612,.071296,.338854,-.372549,.857824,.116571,.441215,-.247059,.905513,.163552,.54293,-.121569,.889765,.281661,.617732,.00392157,.873156,.39897,.691611,.129412,.82985,.491488,.736886,.254902,.789081,.583237,.781853,.380392,.810734,.656071,.819254,.505882,.833126,.729181,.85684,.631373,.870527,.80792,.898178,.756863,.907605,.884398,.938331,.882353,.9391,.921799,.958016,1,.968627,.956863,.976471]},{ColorSpace:"Lab",Name:"Oranges",RGBPoints:[-1,.498039,.152941,.015686,-.87451,.57481,.182468,.013718,-.74902,.651765,.212042,.011734,-.623529,.752157,.247474,.007797,-.498039,.851719,.283368,.004475,-.372549,.898962,.348328,.039908,-.247059,.945652,.413426,.076401,-.121569,.969273,.484291,.157109,.00392157,.992157,.554971,.238185,.129412,.992157,.619931,.330704,.254902,.992157,.684967,.423837,.380392,.992157,.751895,.532103,.505882,.992249,.817716,.639354,.631373,.994218,.861023,.725967,.756863,.996186,.903576,.810965,.882353,.998155,.933103,.868051,1,1,.960784,.921569]},{ColorSpace:"Lab",Name:"Reds",RGBPoints:[-1,.403922,0,.05098,-.87451,.525967,.029527,.066728,-.74902,.647643,.058962,.082476,-.623529,.722445,.076678,.098224,-.498039,.797186,.095194,.114187,-.372549,.868051,.164091,.143714,-.247059,.937809,.233541,.173933,-.121569,.96143,.326059,.232987,.00392157,.984375,.418147,.292657,.129412,.986344,.496886,.371396,.254902,.988235,.575702,.450673,.380392,.988235,.656409,.543191,.505882,.98842,.736747,.635894,.631373,.992357,.809581,.732349,.756863,.996186,.880692,.826759,.882353,.998155,.92203,.885813,1,1,.960784,.941176]},{ColorSpace:"Lab",Name:"RdOr",RGBPoints:[-1,.498039,0,0,-.87451,.6004,0,0,-.74902,.702514,738e-6,477e-6,-.623529,.773379,.095225,.061499,-.498039,.843875,.189865,.12283,-.372549,.891119,.294195,.203537,-.247059,.937855,.397924,.283137,-.121569,.963445,.476663,.316601,.00392157,.988297,.555771,.351665,.129412,.990265,.646321,.436309,.254902,.992157,.735256,.519646,.380392,.992157,.784468,.570827,.505882,.992249,.833218,.623483,.631373,.994218,.872587,.706159,.756863,.996186,.911419,.788189,.882353,.998155,.940946,.859054,1,1,.968627,.92549]},{ColorSpace:"Lab",Name:"BrOrYl",RGBPoints:[-1,.4,.145098,.023529,-.87451,.500392,.174625,.019592,-.74902,.600784,.204291,.015656,-.623529,.701176,.251534,.011719,-.498039,.800984,.299146,.008397,-.372549,.863975,.370012,.043829,-.247059,.926321,.441107,.0794,-.121569,.961753,.521815,.120738,.00392157,.996078,.602645,.163122,.129412,.996078,.68729,.237924,.254902,.996078,.771011,.314879,.380392,.996078,.832034,.444798,.505882,.996171,.892042,.572595,.631373,.998139,.931411,.65724,.756863,1,.969489,.741669,.882353,1,.985236,.822376,1,1,1,.898039]},{ColorSpace:"Lab",Name:"RdOrYl",RGBPoints:[-1,.501961,0,.14902,-.87451,.622038,0,.14902,-.74902,.741761,4e-4,.148866,-.623529,.816563,.05158,.129181,-.498039,.890965,.10356,.110235,-.372549,.940177,.205921,.137793,-.247059,.988281,.308789,.165536,-.121569,.99025,.432803,.200969,.00392157,.992218,.555217,.236278,.129412,.994187,.628051,.267774,.254902,.996078,.701038,.301269,.380392,.996078,.777809,.383945,.505882,.996171,.852826,.466621,.631373,.998139,.892195,.549296,.756863,1,.931349,.632188,.882353,1,.966782,.7188,1,1,1,.8]},{ColorSpace:"Lab",Name:"CIELab_blue2red",RGBPoints:[-1,0,.6,.74902,1,.76863,.46667,.34118]},{ColorSpace:"Lab",Name:"blue2yellow",RGBPoints:[-1,0,0,1,0,.5,.5,.5,1,1,1,0]},{ColorSpace:"Lab",Name:"erdc_blue2gold",RGBPoints:[-1,.175119,.0438468,1,-.874016,.22383,.159771,.94557,-.748031,.27254,.233611,.891216,-.622047,.321251,.296526,.836857,-.496063,.369962,.354296,.782359,-.370079,.418672,.409139,.72754,-.244094,.467383,.462152,.672148,-.11811,.51609,.51396,.615825,.00787402,.572863,.55452,.559172,.133858,.630269,.593822,.517729,.259843,.689588,.624668,.47446,.385827,.745394,.656113,.428638,.511811,.798624,.688104,.379105,.637795,.849926,.720593,.323834,.76378,.899765,.753543,.258657,.889764,.948487,.78692,.171778,1,.990413,.816451,.00729848]},{ColorSpace:"Lab",Name:"erdc_blue2yellow",RGBPoints:[-1,.0830122,0,.495617,-.87451,.141973,.0551288,.57363,-.74902,.193048,.110258,.604561,-.623529,.234231,.165386,.57643,-.498039,.275413,.220515,.548299,-.372549,.316596,.275644,.520169,-.247059,.357778,.330773,.492038,-.121569,.398961,.385901,.463908,.00392157,.449929,.438487,.426815,.129412,.511572,.488299,.379944,.254902,.581222,.53603,.325741,.380392,.650871,.583761,.271538,.505882,.720521,.631493,.217335,.631373,.79017,.679224,.163132,.756863,.85982,.726955,.108929,.882353,.910254,.774159,.14112,1,.927513,.81759,.306289]},{ColorSpace:"Lab",Name:"erdc_cyan2orange",RGBPoints:[-1,.0471513,.213874,.414329,-.87451,.0674702,.256648,.439027,-.74902,.0959957,.299331,.462089,-.623529,.132428,.341872,.483212,-.498039,.188743,.38277,.500597,-.372549,.268511,.420229,.512179,-.247059,.352945,.455602,.519101,-.121569,.43893,.489368,.521538,.00392157,.522445,.522495,.522436,.129412,.600089,.555682,.53205,.254902,.67988,.587981,.539163,.380392,.761011,.619586,.544439,.505882,.84278,.650741,.548567,.631373,.910713,.687347,.557822,.756863,.952232,.734972,.577775,.882353,.975642,.789858,.604868,1,.990752,.843643,.632857]},{ColorSpace:"Lab",Name:"erdc_purple2green",RGBPoints:[-1,.235006,.0483128,.530899,-.87451,.302968,.108419,.552391,-.74902,.360241,.166059,.569502,-.623529,.406746,.226782,.579373,-.498039,.444073,.28964,.582094,-.372549,.473648,.353774,.577947,-.247059,.497636,.418154,.567911,-.121569,.519086,.481741,.553968,.00392157,.542884,.542914,.542875,.129412,.566303,.603989,.527499,.254902,.595218,.662965,.516857,.380392,.628641,.720701,.510673,.505882,.665373,.777849,.508165,.631373,.704182,.834921,.508303,.756863,.743846,.892328,.50999,.882353,.783158,.950422,.512181,1,.818617,1,.513888]},{ColorSpace:"Lab",Name:"erdc_purple2green_dark",RGBPoints:[-1,.107656,0,.428682,-.87451,.1924,0,.449799,-.74902,.255118,.0648939,.466726,-.623529,.304256,.133066,.476703,-.498039,.343202,.19716,.479793,-.372549,.373876,.260353,.476241,-.247059,.398497,.322872,.466953,-.121569,.420016,.384252,.453785,.00392157,.44319,.443216,.443186,.129412,.465553,.502139,.428233,.254902,.492959,.559151,.417591,.380392,.524654,.615092,.411016,.505882,.55959,.670583,.40779,.631373,.596614,.726102,.406948,.756863,.634544,.782032,.407439,.882353,.672183,.838703,.408237,1,.706131,.892759,.408452]},{ColorSpace:"Lab",Name:"coolwarm",RGBPoints:[-1,.229806,.298718,.753683,-.875,.303869,.406535,.844959,-.75,.383013,.509419,.917388,-.625,.466667,.604563,.968155,-.5,.552953,.688929,.995376,-.375,.639176,.7596,.998151,-.25,.722193,.813953,.976575,-.125,.798692,.849786,.931689,0,.865395,.86541,.865396,.125,.924128,.827385,.774508,.25,.958853,.769768,.678008,.375,.969954,.694267,.579375,.5,.958003,.602842,.481776,.625,.923945,.497309,.38797,.75,.869187,.378313,.300267,.875,.795632,.241284,.220526,1,.705673,.0155562,.150233]},{ColorSpace:"Lab",Name:"BuRd",RGBPoints:[-1,.019608,.188235,.380392,-.87451,.088504,.321107,.564937,-.74902,.163399,.444983,.697501,-.623529,.247059,.555709,.754095,-.498039,.420684,.676432,.818685,-.372549,.606459,.789773,.880277,-.247059,.761476,.868512,.924567,-.121569,.878047,.925721,.951942,.00392157,.969089,.966474,.964937,.129412,.983852,.897578,.846828,.254902,.982468,.800692,.706113,.380392,.960323,.66782,.536332,.505882,.894579,.503806,.399769,.631373,.81707,.33218,.281046,.756863,.728489,.155017,.197386,.882353,.576932,.055363,.14925,1,.403922,0,.121569]},{ColorSpace:"Lab",Name:"Spectral_lowBlue",RGBPoints:[-1,.368627,.309804,.635294,-.87451,.260361,.450058,.70173,-.74902,.248058,.591311,.717186,-.623529,.376009,.734025,.658132,-.498039,.537947,.814764,.64506,-.372549,.702345,.879585,.636678,-.247059,.84752,.938639,.607151,-.121569,.940408,.976163,.656055,.00392157,.999923,.997616,.745021,.129412,.997463,.921338,.61707,.254902,.995002,.824606,.499885,.380392,.992541,.701576,.39654,.505882,.973472,.547405,.318108,.631373,.937793,.398539,.270127,.756863,.861515,.282891,.299654,.882353,.746482,.144637,.288812,1,.619608,.003922,.258824]},{ColorSpace:"Lab",Name:"GnRP",RGBPoints:[-1,0,.266667,.105882,-.87451,.066436,.394617,.174779,-.74902,.168858,.524567,.25767,-.623529,.323875,.657439,.361015,-.498039,.504883,.772318,.506344,-.372549,.678431,.870127,.654902,-.247059,.803922,.921799,.780392,-.121569,.897116,.951942,.882814,.00392157,.967397,.965936,.967474,.129412,.928028,.879815,.930565,.254902,.866052,.780777,.882891,.380392,.77501,.665129,.821376,.505882,.675663,.537024,.737024,.631373,.57847,.396155,.645982,.756863,.492349,.223914,.547559,.882353,.375548,.096886,.423299,1,.25098,0,.294118]},{ColorSpace:"Lab",Name:"GYPi",RGBPoints:[-1,.152941,.392157,.098039,-.87451,.246444,.505344,.117724,-.74902,.351942,.614533,.161399,-.623529,.474971,.717878,.240138,-.498039,.611995,.811226,.392849,-.372549,.746328,.893118,.565321,-.247059,.859516,.94233,.747405,-.121569,.928105,.96386,.875663,.00392157,.969089,.966859,.968012,.129412,.983852,.910265,.948328,.254902,.979239,.833218,.914648,.380392,.949712,.729873,.862976,.505882,.905652,.58293,.763552,.631373,.85521,.410073,.652211,.756863,.793695,.183699,.531642,.882353,.683737,.063899,.420761,1,.556863,.003922,.321569]},{ColorSpace:"Lab",Name:"GnYlRd",RGBPoints:[-1,0,.407843,.215686,-.87451,.063975,.525952,.277201,-.74902,.177932,.633064,.332718,-.623529,.364937,.724106,.379469,-.498039,.527951,.797155,.40223,-.372549,.678431,.862822,.433449,-.247059,.803922,.916955,.514648,-.121569,.909419,.961861,.625067,.00392157,.999923,.997616,.745021,.129412,.997463,.921338,.61707,.254902,.995002,.824606,.499885,.380392,.992541,.701576,.39654,.505882,.973472,.547405,.318108,.631373,.939023,.389927,.245521,.756863,.867666,.239831,.176624,.882353,.762399,.110727,.151326,1,.647059,0,.14902]},{ColorSpace:"Lab",Name:"GBBr",RGBPoints:[-1,0,.235294,.188235,-.87451,.002461,.338639,.301423,-.74902,.055902,.448981,.417609,-.623529,.183852,.56955,.538178,-.498039,.357785,.700115,.660746,-.372549,.540177,.819531,.77624,-.247059,.714879,.890888,.864821,-.121569,.851134,.934564,.922645,.00392157,.960861,.959785,.95694,.129412,.963322,.927797,.83391,.254902,.939946,.868897,.68935,.380392,.883353,.775394,.517109,.505882,.808074,.625836,.324106,.631373,.717647,.476355,.15494,.756863,.592157,.358247,.06882,.882353,.458593,.26436,.031142,1,.329412,.188235,.019608]},{ColorSpace:"Lab",Name:"PuOr",RGBPoints:[-1,.498039,.231373,.031373,-.87451,.62599,.30273,.026451,-.74902,.746943,.387082,.037524,-.623529,.85767,.490427,.071972,-.498039,.936409,.617762,.236371,-.372549,.992695,.743099,.43291,-.247059,.995156,.841523,.63714,-.121569,.985313,.913802,.813687,.00392157,.966244,.966398,.967705,.129412,.889965,.89504,.938178,.254902,.806151,.804306,.894656,.380392,.712649,.688658,.833141,.505882,.594233,.554325,.744637,.631373,.474894,.404229,.652364,.756863,.366628,.217224,.563783,.882353,.266436,.089965,.434833,1,.176471,0,.294118]},{ColorSpace:"Lab",Name:"PRGn",RGBPoints:[-1,.25098,0,.294118,-.87451,.383852,.103345,.431911,-.74902,.497732,.234679,.55371,-.623529,.583852,.40692,.652134,-.498039,.681968,.545175,.742561,-.372549,.7807,.672357,.825221,-.247059,.871742,.788005,.886736,-.121569,.930488,.885198,.932872,.00392157,.966321,.968089,.965859,.129412,.892503,.950865,.877278,.254902,.796078,.91857,.772549,.380392,.670588,.866897,.647059,.505882,.493195,.765398,.496655,.631373,.314187,.649135,.354556,.756863,.15917,.516263,.251211,.882353,.062284,.386621,.170473,1,0,.266667,.105882]},{ColorSpace:"Lab",Name:"PiYG",RGBPoints:[-1,.556863,.003922,.321569,-.87451,.692195,.067897,.427374,-.74902,.797539,.197847,.539177,-.623529,.859054,.424221,.659746,-.498039,.908574,.592618,.770319,-.372549,.951557,.736332,.866205,-.247059,.981084,.839677,.917878,-.121569,.98293,.913802,.949558,.00392157,.96732,.968474,.965629,.129412,.92549,.963552,.869666,.254902,.852441,.939254,.736025,.380392,.739254,.890042,.553941,.505882,.60323,.805536,.382238,.631373,.467282,.711419,.235217,.756863,.344252,.608074,.156478,.882353,.2406,.49827,.116494,1,.152941,.392157,.098039]},{ColorSpace:"Lab",Name:"OrPu",RGBPoints:[-1,.176471,0,.294118,-.87451,.272434,.095963,.444214,-.74902,.373395,.228912,.56932,-.623529,.481661,.415917,.657901,-.498039,.601922,.562937,.750481,-.372549,.718493,.695886,.836986,-.247059,.811995,.811534,.898501,-.121569,.894733,.8995,.940023,.00392157,.969166,.966859,.963629,.129412,.98639,.910265,.803691,.254902,.995002,.835371,.624375,.380392,.992541,.736947,.420146,.505882,.931949,.609458,.224221,.631373,.85075,.483968,.069819,.756863,.740023,.380623,.035371,.882353,.617993,.29827,.026759,1,.498039,.231373,.031373]},{ColorSpace:"Lab",Name:"BrBG",RGBPoints:[-1,.329412,.188235,.019608,-.87451,.467205,.269435,.031911,-.74902,.6,.365629,.074202,-.623529,.72549,.483737,.160323,-.498039,.812995,.635832,.336409,-.372549,.88689,.781238,.527874,-.247059,.943483,.87474,.700115,-.121569,.963168,.929796,.841599,.00392157,.957247,.959938,.959554,.129412,.84406,.932872,.920185,.254902,.70396,.886428,.859285,.380392,.529258,.815071,.770704,.505882,.346251,.691811,.653057,.631373,.175855,.562015,.530642,.756863,.047905,.441446,.410073,.882353,.002307,.33218,.294348,1,0,.235294,.188235]},{ColorSpace:"Lab",Name:"GyRd",RGBPoints:[-1,.101961,.101961,.101961,-.87451,.227451,.227451,.227451,-.74902,.359939,.359939,.359939,-.623529,.502653,.502653,.502653,-.498039,.631373,.631373,.631373,-.372549,.749865,.749865,.749865,-.247059,.843368,.843368,.843368,-.121569,.926105,.926105,.926105,.00392157,.999846,.997232,.995694,.129412,.994925,.908651,.857901,.254902,.982468,.800692,.706113,.380392,.960323,.66782,.536332,.505882,.894579,.503806,.399769,.631373,.81707,.33218,.281046,.756863,.728489,.155017,.197386,.882353,.576932,.055363,.14925,1,.403922,0,.121569]},{ColorSpace:"Lab",Name:"erdc_divHi_purpleGreen",RGBPoints:[-1,.297553,0,.489074,-.87451,.40259,.151146,.567754,-.74902,.516038,.284843,.658231,-.623529,.629783,.423646,.750938,-.498039,.735198,.563697,.835956,-.372549,.82408,.695541,.903582,-.247059,.889091,.807454,.944862,-.121569,.92334,.886917,.951839,.00392157,.921045,.921084,.921003,.129412,.877324,.907455,.845381,.254902,.797649,.849713,.734695,.380392,.691646,.75964,.600532,.505882,.568981,.649159,.453807,.631373,.438945,.529756,.304259,.756863,.30973,.412001,.158303,.882353,.187078,.305111,.00251458,1,.101655,.220836,0]},{ColorSpace:"Lab",Name:"erdc_divHi_purpleGreen_dim",RGBPoints:[-1,.404088,.131038,.592767,-.87451,.486469,.230957,.651243,-.74902,.575165,.339335,.717723,-.623529,.662741,.454332,.784263,-.498039,.742071,.570213,.842918,-.372549,.806935,.678992,.886227,-.247059,.852219,.771315,.90763,-.121569,.873345,.837327,.901572,.00392157,.866783,.86682,.866745,.129412,.82839,.858225,.796812,.254902,.762578,.814287,.700202,.380392,.676429,.744229,.585735,.505882,.577033,.65732,.461526,.631373,.47128,.562476,.33476,.756863,.365461,.467957,.21076,.882353,.264758,.381138,.0878313,1,.182591,.312249,0]},{ColorSpace:"Lab",Name:"erdc_divLow_icePeach",RGBPoints:[-1,.480048,.817441,.998056,-.87451,.425898,.726921,.883187,-.74902,.366682,.629445,.761936,-.623529,.308756,.531002,.640217,-.498039,.258021,.43705,.523433,-.372549,.219244,.352381,.416348,-.247059,.195127,.281032,.322979,-.121569,.186286,.22627,.246525,.00392157,.192352,.19236,.192364,.129412,.255927,.214469,.191756,.254902,.340459,.254426,.206666,.380392,.444655,.309315,.234029,.505882,.565353,.376004,.270969,.631373,.697917,.450748,.314293,.756863,.836657,.529064,.360227,.882353,.972695,.614884,.413123,1,1,.705904,.472699]},{ColorSpace:"Lab",Name:"erdc_divLow_purpleGreen",RGBPoints:[-1,.956034,.666487,.952663,-.87451,.874457,.572698,.936352,-.74902,.753465,.488253,.909063,-.623529,.63309,.413507,.763833,-.498039,.514491,.345878,.620015,-.372549,.405008,.288141,.484376,-.247059,.311388,.241986,.363556,-.121569,.238722,.209044,.263449,.00392157,.192352,.192366,.192362,.129412,.200379,.233201,.168618,.254902,.230151,.291737,.165227,.380392,.279481,.366076,.178607,.505882,.344927,.453267,.205703,.631373,.421554,.549449,.242643,.756863,.503334,.649999,.284377,.882353,.583497,.749672,.324969,1,.650705,.837228,.356264]},{ColorSpace:"Lab",Name:"Haze_green",RGBPoints:[-1,1,.835294,.886275,-.87451,.937255,.756863,.870443,-.74902,.875817,.666376,.857807,-.623529,.778359,.583007,.808134,-.498039,.676253,.494118,.745098,-.372549,.561365,.390123,.682353,-.247059,.438344,.262745,.621496,-.121569,.321133,.141031,.558751,.00392157,.203922,.0217865,.495861,.129412,.265505,.129412,.433261,.254902,.311692,.255338,.37008,.380392,.356282,.377342,.310821,.505882,.39971,.488889,.258243,.631373,.442556,.604357,.205519,.756863,.48671,.71968,.152941,.882353,.529847,.830356,.100944,1,.572549,.933333,.054902]},{ColorSpace:"Lab",Name:"Haze_lime",RGBPoints:[-1,.704034,.784196,1,-.87451,.633111,.691418,.956078,-.74902,.564021,.600606,.912157,-.623529,.496827,.51189,.868235,-.498039,.43157,.425416,.824314,-.372549,.368248,.341347,.780392,-.247059,.306767,.259855,.736471,-.121569,.246862,.181069,.692549,.00392157,.191619,.109542,.648627,.129412,.257404,.194031,.604706,.254902,.321794,.278775,.560784,.380392,.387909,.364617,.516863,.505882,.456569,.451881,.472941,.631373,.527424,.540773,.42902,.756863,.599759,.631427,.385098,.882353,.673065,.723898,.341176,1,.742751,.812252,.3]},{ColorSpace:"RGB",Name:"Haze",RGBPoints:[-1,1,.835294,.996078,-.00392157,.023529,.141176,.498039,.00392157,.015686,.137255,.494118,1,.984314,.764706,0]},{ColorSpace:"Lab",Name:"Haze_cyan",RGBPoints:[-1,.956863,1,.835294,-.87451,.933188,.921714,.760784,-.74902,.870588,.803486,.671605,-.623529,.807843,.684096,.583297,-.498039,.745098,.569208,.494118,-.372549,.682353,.437763,.390123,-.247059,.621496,.288163,.262745,-.121569,.558751,.144517,.141031,.00392157,.495861,.0217865,.0413943,.129412,.433261,.137255,.129412,.254902,.37008,.263181,.255338,.380392,.306318,.381845,.372694,.505882,.243137,.503994,.494263,.631373,.180392,.629484,.619753,.756863,.117647,.754975,.747131,.882353,.054902,.876398,.866812,1,0,.988235,.976471]},{ColorSpace:"Lab",Name:"nic_Edge",RGBPoints:[-1,.191208,.191208,.191208,-.87451,.239484,.00545035,.614821,-.74902,.220593,.0617459,.863547,-.623529,.17509,.278988,.97794,-.498039,.143526,.576069,.998553,-.372549,.166456,.871883,.96594,-.247059,.376202,.993555,.981833,-.121569,.681996,.991297,.999239,.00392157,.954172,.952734,.94374,.129412,.999735,.99301,.662896,.254902,.979399,.991466,.357973,.380392,.968771,.854967,.162659,.505882,.999245,.556697,.144323,.631373,.973959,.26223,.177946,.756863,.852358,.0526707,.222974,.882353,.593889,.00912724,.238855,1,.191208,.191208,.191208]},{ColorSpace:"Lab",Name:"erdc_iceFire_H",RGBPoints:[-1,405432e-12,0,590122e-11,-.87451,0,.120401,.302675,-.74902,0,.216583,.524574,-.623529,.0552475,.345025,.6595,-.498039,.128047,.492588,.720288,-.372549,.188955,.641309,.792092,-.247059,.327673,.784935,.873434,-.121569,.60824,.892164,.935547,.00392157,.881371,.912178,.818099,.129412,.951407,.835621,.449279,.254902,.904481,.690489,0,.380392,.85407,.510864,0,.505882,.777093,.33018,88199e-8,.631373,.672862,.139087,.00269398,.756863,.508815,0,0,.882353,.299417,366289e-9,547829e-9,1,.0157519,.00332021,455569e-13]},{ColorSpace:"Lab",Name:"erdc_iceFire_L",RGBPoints:[-1,.870485,.913768,.832905,-.87451,.586919,.887865,.934003,-.74902,.31583,.776442,.867858,-.623529,.18302,.632034,.787722,-.498039,.117909,.484134,.713825,-.372549,.0507239,.335979,.654741,-.247059,0,.209874,.511832,-.121569,0,.114689,.28935,.00392157,.0157519,.00332021,455569e-13,.129412,.312914,0,0,.254902,.520865,0,0,.380392,.680105,.15255,.0025996,.505882,.785109,.339479,797922e-9,.631373,.857354,.522494,0,.756863,.910974,.699774,0,.882353,.951921,.842817,.478545,1,.881371,.912178,.818099]},{ColorSpace:"RGB",Name:"hsv",RGBPoints:[-1,1,0,0,-.666666,1,0,1,-.333333,0,0,1,0,0,1,1,.33333,0,1,0,.66666,1,1,0,1,1,0,0]},{ColorSpace:"Lab",Name:"hue_L60",RGBPoints:[-1,.964784,.400592,.349549,-.87451,.964915,.372498,.53785,-.74902,.892353,.401039,.759569,-.623529,.79263,.446956,.903017,-.498039,.682208,.49954,.966673,-.372549,.56392,.553082,.968836,-.247059,.442031,.606396,.901601,-.121569,.305499,.65701,.765784,.00392157,.197251,.687914,.620914,.129412,.193882,.701887,.472654,.254902,.249866,.706123,.320005,.380392,.35132,.697417,.202919,.505882,.498097,.669467,.125232,.631373,.637477,.626239,.107431,.756863,.762115,.56872,.155812,.882353,.889434,.481116,.240445,1,.964784,.400592,.349549]},{IndexedColors:[0,0,0,.8941176470588236,.1019607843137255,.1098039215686274,.2156862745098039,.4941176470588236,.7215686274509804,.3019607843137255,.6862745098039216,.2901960784313726,.596078431372549,.3058823529411765,.6392156862745098,1,.4980392156862745,0,.6509803921568628,.3372549019607843,.1568627450980392],Name:"Spectrum",NanColor:[.6509803921568628,.3372549019607843,.1568627450980392]},{IndexedColors:[.4745098039215686,.09019607843137255,.09019607843137255,.7098039215686275,.00392156862745098,.00392156862745098,.9372549019607843,.2784313725490196,.09803921568627451,.9764705882352941,.5137254901960784,.1411764705882353,1,.7058823529411765,0,1,.8980392156862745,.02352941176470588],Name:"Warm",NanColor:[1,.8980392156862745,.02352941176470588]},{IndexedColors:[.4588235294117647,.6941176470588235,.00392156862745098,.3450980392156863,.5019607843137255,.1607843137254902,.3137254901960784,.8431372549019608,.7490196078431373,.1098039215686274,.5843137254901961,.803921568627451,.2313725490196079,.407843137254902,.6705882352941176,.6039215686274509,.407843137254902,1,.3725490196078431,.2,.5019607843137255],Name:"Cool",NanColor:[.3725490196078431,.2,.5019607843137255]},{IndexedColors:[.2313725490196079,.407843137254902,.6705882352941176,.1098039215686274,.5843137254901961,.803921568627451,.3058823529411765,.8509803921568627,.9176470588235294,.4509803921568628,.6039215686274509,.8352941176470589,.2588235294117647,.2392156862745098,.6627450980392157,.3137254901960784,.3294117647058823,.5294117647058824,.06274509803921569,.1647058823529412,.3215686274509804],Name:"Blues",NanColor:[.06274509803921569,.1647058823529412,.3215686274509804]},{IndexedColors:[.1098039215686274,.5843137254901961,.803921568627451,.2313725490196079,.407843137254902,.6705882352941176,.4,.2431372549019608,.7176470588235294,.6352941176470588,.3294117647058823,.8117647058823529,.8705882352941177,.3803921568627451,.807843137254902,.8627450980392157,.3803921568627451,.5843137254901961,.2392156862745098,.06274509803921569,.3215686274509804],Name:"Wild Flower",NanColor:[.2392156862745098,.06274509803921569,.3215686274509804]},{IndexedColors:[.396078431372549,.4862745098039216,.2156862745098039,.4588235294117647,.6941176470588235,.00392156862745098,.6980392156862745,.7294117647058823,.1882352941176471,1,.8980392156862745,.02352941176470588,1,.7058823529411765,0,.9764705882352941,.5137254901960784,.1411764705882353],Name:"Citrus",NanColor:[.9764705882352941,.5137254901960784,.1411764705882353]},{IndexedColors:[.4980392156862745,.2313725490196079,.03137254901960784,.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333,.1764705882352941,0,.2941176470588235],Name:"Brewer Diverging Purple-Orange (11)",NanColor:[.1764705882352941,0,.2941176470588235]},{IndexedColors:[.4980392156862745,.2313725490196079,.03137254901960784,.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333,.1764705882352941,0,.2941176470588235],Name:"Brewer Diverging Purple-Orange (10)",NanColor:[.1764705882352941,0,.2941176470588235]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (9)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (8)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.9450980392156862,.6392156862745098,.2509803921568627,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6,.5568627450980392,.7647058823529411,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (7)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.9450980392156862,.6392156862745098,.2509803921568627,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6,.5568627450980392,.7647058823529411,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (6)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.9019607843137255,.3803921568627451,.00392156862745098,.9921568627450981,.7215686274509804,.3882352941176471,.9686274509803922,.9686274509803922,.9686274509803922,.6980392156862745,.6705882352941176,.8235294117647058,.3686274509803922,.2352941176470588,.6],Name:"Brewer Diverging Purple-Orange (5)",NanColor:[.3686274509803922,.2352941176470588,.6]},{IndexedColors:[.9019607843137255,.3803921568627451,.00392156862745098,.9921568627450981,.7215686274509804,.3882352941176471,.6980392156862745,.6705882352941176,.8235294117647058,.3686274509803922,.2352941176470588,.6],Name:"Brewer Diverging Purple-Orange (4)",NanColor:[.3686274509803922,.2352941176470588,.6]},{IndexedColors:[.9450980392156862,.6392156862745098,.2509803921568627,.9686274509803922,.9686274509803922,.9686274509803922,.6,.5568627450980392,.7647058823529411],Name:"Brewer Diverging Purple-Orange (3)",NanColor:[.6,.5568627450980392,.7647058823529411]},{IndexedColors:[.6196078431372549,.00392156862745098,.2588235294117647,.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353,.3686274509803922,.3098039215686275,.6352941176470588],Name:"Brewer Diverging Spectral (11)",NanColor:[.3686274509803922,.3098039215686275,.6352941176470588]},{IndexedColors:[.6196078431372549,.00392156862745098,.2588235294117647,.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353,.3686274509803922,.3098039215686275,.6352941176470588],Name:"Brewer Diverging Spectral (10)",NanColor:[.3686274509803922,.3098039215686275,.6352941176470588]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (9)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (8)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9882352941176471,.5529411764705883,.3490196078431372,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6,.8352941176470589,.5803921568627451,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (7)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9882352941176471,.5529411764705883,.3490196078431372,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6,.8352941176470589,.5803921568627451,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (6)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8431372549019608,.09803921568627451,.1098039215686274,.9921568627450981,.6823529411764706,.3803921568627451,1,1,.7490196078431373,.6705882352941176,.8666666666666667,.6431372549019608,.1686274509803922,.5137254901960784,.7294117647058823],Name:"Brewer Diverging Spectral (5)",NanColor:[.1686274509803922,.5137254901960784,.7294117647058823]},{IndexedColors:[.8431372549019608,.09803921568627451,.1098039215686274,.9921568627450981,.6823529411764706,.3803921568627451,.6705882352941176,.8666666666666667,.6431372549019608,.1686274509803922,.5137254901960784,.7294117647058823],Name:"Brewer Diverging Spectral (4)",NanColor:[.1686274509803922,.5137254901960784,.7294117647058823]},{IndexedColors:[.9882352941176471,.5529411764705883,.3490196078431372,1,1,.7490196078431373,.6,.8352941176470589,.5803921568627451],Name:"Brewer Diverging Spectral (3)",NanColor:[.6,.8352941176470589,.5803921568627451]},{IndexedColors:[.3294117647058823,.1882352941176471,.0196078431372549,.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922,0,.2352941176470588,.1882352941176471],Name:"Brewer Diverging Brown-Blue-Green (11)",NanColor:[0,.2352941176470588,.1882352941176471]},{IndexedColors:[.3294117647058823,.1882352941176471,.0196078431372549,.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922,0,.2352941176470588,.1882352941176471],Name:"Brewer Diverging Brown-Blue-Green (10)",NanColor:[0,.2352941176470588,.1882352941176471]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (9)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (8)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.8470588235294118,.7019607843137254,.396078431372549,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.3529411764705883,.7058823529411765,.6745098039215687,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (7)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.8470588235294118,.7019607843137254,.396078431372549,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.3529411764705883,.7058823529411765,.6745098039215687,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (6)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.6509803921568628,.3803921568627451,.1019607843137255,.8745098039215686,.7607843137254902,.4901960784313725,.9607843137254902,.9607843137254902,.9607843137254902,.5019607843137255,.803921568627451,.7568627450980392,.00392156862745098,.5215686274509804,.4431372549019608],Name:"Brewer Diverging Brown-Blue-Green (5)",NanColor:[.00392156862745098,.5215686274509804,.4431372549019608]},{IndexedColors:[.6509803921568628,.3803921568627451,.1019607843137255,.8745098039215686,.7607843137254902,.4901960784313725,.5019607843137255,.803921568627451,.7568627450980392,.00392156862745098,.5215686274509804,.4431372549019608],Name:"Brewer Diverging Brown-Blue-Green (4)",NanColor:[.00392156862745098,.5215686274509804,.4431372549019608]},{IndexedColors:[.8470588235294118,.7019607843137254,.396078431372549,.9607843137254902,.9607843137254902,.9607843137254902,.3529411764705883,.7058823529411765,.6745098039215687],Name:"Brewer Diverging Brown-Blue-Green (3)",NanColor:[.3529411764705883,.7058823529411765,.6745098039215687]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8980392156862745,.9607843137254902,.9764705882352941,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.4274509803921568,.1725490196078431,0,.2666666666666667,.1058823529411765],Name:"Brewer Sequential Blue-Green (9)",NanColor:[0,.2666666666666667,.1058823529411765]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8980392156862745,.9607843137254902,.9764705882352941,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.3450980392156863,.1411764705882353],Name:"Brewer Sequential Blue-Green (8)",NanColor:[0,.3450980392156863,.1411764705882353]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.8,.9254901960784314,.9019607843137255,.8,.9254901960784314,.9019607843137255,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.3450980392156863,.1411764705882353],Name:"Brewer Sequential Blue-Green (7)",NanColor:[0,.3450980392156863,.1411764705882353]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.1725490196078431,.6352941176470588,.3725490196078431,0,.4274509803921568,.1725490196078431],Name:"Brewer Sequential Blue-Green (6)",NanColor:[0,.4274509803921568,.1725490196078431]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.6980392156862745,.8862745098039215,.8862745098039215,.4,.7607843137254902,.6431372549019608,.1725490196078431,.6352941176470588,.3725490196078431,0,.4274509803921568,.1725490196078431],Name:"Brewer Sequential Blue-Green (5)",NanColor:[0,.4274509803921568,.1725490196078431]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.6980392156862745,.8862745098039215,.8862745098039215,.4,.7607843137254902,.6431372549019608,.1372549019607843,.5450980392156862,.2705882352941176],Name:"Brewer Sequential Blue-Green (4)",NanColor:[.1372549019607843,.5450980392156862,.2705882352941176]},{IndexedColors:[.8980392156862745,.9607843137254902,.9764705882352941,.6,.8470588235294118,.788235294117647,.1725490196078431,.6352941176470588,.3725490196078431],Name:"Brewer Sequential Blue-Green (3)",NanColor:[.1725490196078431,.6352941176470588,.3725490196078431]},{IndexedColors:[1,1,.8980392156862745,1,.9686274509803922,.7372549019607844,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.6,.203921568627451,.01568627450980392,.4,.1450980392156863,.02352941176470588],Name:"Brewer Sequential Yellow-Orange-Brown (9)",NanColor:[.4,.1450980392156863,.02352941176470588]},{IndexedColors:[1,1,.8980392156862745,1,.9686274509803922,.7372549019607844,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.5490196078431373,.1764705882352941,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (8)",NanColor:[.5490196078431373,.1764705882352941,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.5490196078431373,.1764705882352941,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (7)",NanColor:[.5490196078431373,.1764705882352941,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.8509803921568627,.3725490196078431,.05490196078431372,.6,.203921568627451,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (6)",NanColor:[.6,.203921568627451,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8509803921568627,.5568627450980392,.996078431372549,.6,.1607843137254902,.8509803921568627,.3725490196078431,.05490196078431372,.6,.203921568627451,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (5)",NanColor:[.6,.203921568627451,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8509803921568627,.5568627450980392,.996078431372549,.6,.1607843137254902,.8,.2980392156862745,.00784313725490196],Name:"Brewer Sequential Yellow-Orange-Brown (4)",NanColor:[.8,.2980392156862745,.00784313725490196]},{IndexedColors:[1,.9686274509803922,.7372549019607844,.996078431372549,.7686274509803922,.3098039215686275,.8509803921568627,.3725490196078431,.05490196078431372],Name:"Brewer Sequential Yellow-Orange-Brown (3)",NanColor:[.8509803921568627,.3725490196078431,.05490196078431372]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8784313725490196,.9254901960784314,.9568627450980393,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.5058823529411764,.05882352941176471,.4862745098039216,.3019607843137255,0,.2941176470588235],Name:"Brewer Sequential Blue-Purple (9)",NanColor:[.3019607843137255,0,.2941176470588235]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8784313725490196,.9254901960784314,.9568627450980393,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.4313725490196079,.00392156862745098,.4196078431372549],Name:"Brewer Sequential Blue-Purple (8)",NanColor:[.4313725490196079,.00392156862745098,.4196078431372549]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.4313725490196079,.00392156862745098,.4196078431372549],Name:"Brewer Sequential Blue-Purple (7)",NanColor:[.4313725490196079,.00392156862745098,.4196078431372549]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.3372549019607843,.6549019607843137,.5058823529411764,.05882352941176471,.4862745098039216],Name:"Brewer Sequential Blue-Purple (6)",NanColor:[.5058823529411764,.05882352941176471,.4862745098039216]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7019607843137254,.803921568627451,.8901960784313725,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.3372549019607843,.6549019607843137,.5058823529411764,.05882352941176471,.4862745098039216],Name:"Brewer Sequential Blue-Purple (5)",NanColor:[.5058823529411764,.05882352941176471,.4862745098039216]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7019607843137254,.803921568627451,.8901960784313725,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.2549019607843137,.615686274509804],Name:"Brewer Sequential Blue-Purple (4)",NanColor:[.5333333333333333,.2549019607843137,.615686274509804]},{IndexedColors:[.8784313725490196,.9254901960784314,.9568627450980393,.6196078431372549,.7372549019607844,.8549019607843137,.5333333333333333,.3372549019607843,.6549019607843137],Name:"Brewer Sequential Blue-Purple (3)",NanColor:[.5333333333333333,.3372549019607843,.6549019607843137]},{IndexedColors:[.4980392156862745,.788235294117647,.4980392156862745,.7450980392156863,.6823529411764706,.8313725490196079,.9921568627450981,.7529411764705882,.5254901960784314,1,1,.6,.2196078431372549,.4235294117647059,.6901960784313725,.9411764705882353,.00784313725490196,.4980392156862745,.7490196078431373,.3568627450980392,.09019607843137255,.4,.4,.4],Name:"Brewer Qualitative Accent",NanColor:[.4,.4,.4]},{IndexedColors:[.1058823529411765,.6196078431372549,.4666666666666667,.8509803921568627,.3725490196078431,.00784313725490196,.4588235294117647,.4392156862745098,.7019607843137254,.9058823529411765,.1607843137254902,.5411764705882353,.4,.6509803921568628,.1176470588235294,.9019607843137255,.6705882352941176,.00784313725490196,.6509803921568628,.4627450980392157,.1137254901960784,.4,.4,.4],Name:"Brewer Qualitative Dark2",NanColor:[.4,.4,.4]},{IndexedColors:[.4,.7607843137254902,.6470588235294118,.9882352941176471,.5529411764705883,.3843137254901961,.5529411764705883,.6274509803921569,.796078431372549,.9058823529411765,.5411764705882353,.7647058823529411,.6509803921568628,.8470588235294118,.3294117647058823,1,.8509803921568627,.1843137254901961,.8980392156862745,.7686274509803922,.5803921568627451,.7019607843137254,.7019607843137254,.7019607843137254],Name:"Brewer Qualitative Set2",NanColor:[.7019607843137254,.7019607843137254,.7019607843137254]},{IndexedColors:[.7019607843137254,.8862745098039215,.803921568627451,.9921568627450981,.803921568627451,.6745098039215687,.796078431372549,.8352941176470589,.9098039215686274,.9568627450980393,.792156862745098,.8941176470588236,.9019607843137255,.9607843137254902,.788235294117647,1,.9490196078431372,.6823529411764706,.9450980392156862,.8862745098039215,.8,.8,.8,.8],Name:"Brewer Qualitative Pastel2",NanColor:[.8,.8,.8]},{IndexedColors:[.984313725490196,.7058823529411765,.6823529411764706,.7019607843137254,.803921568627451,.8901960784313725,.8,.9215686274509803,.7725490196078432,.8705882352941177,.796078431372549,.8941176470588236,.996078431372549,.8509803921568627,.6509803921568628,1,1,.8,.8980392156862745,.8470588235294118,.7411764705882353,.9921568627450981,.8549019607843137,.9254901960784314,.9490196078431372,.9490196078431372,.9490196078431372],Name:"Brewer Qualitative Pastel1",NanColor:[.9490196078431372,.9490196078431372,.9490196078431372]},{IndexedColors:[.8941176470588236,.1019607843137255,.1098039215686274,.2156862745098039,.4941176470588236,.7215686274509804,.3019607843137255,.6862745098039216,.2901960784313726,.596078431372549,.3058823529411765,.6392156862745098,1,.4980392156862745,0,1,1,.2,.6509803921568628,.3372549019607843,.1568627450980392,.9686274509803922,.5058823529411764,.7490196078431373,.6,.6,.6],Name:"Brewer Qualitative Set1",NanColor:[.6,.6,.6]},{IndexedColors:[.6509803921568628,.807843137254902,.8901960784313725,.1215686274509804,.4705882352941176,.7058823529411765,.6980392156862745,.8745098039215686,.5411764705882353,.2,.6274509803921569,.1725490196078431,.984313725490196,.6039215686274509,.6,.8901960784313725,.1019607843137255,.1098039215686274,.9921568627450981,.7490196078431373,.4352941176470588,1,.4980392156862745,0,.792156862745098,.6980392156862745,.8392156862745098,.4156862745098039,.2392156862745098,.6039215686274509,1,1,.6],Name:"Brewer Qualitative Paired",NanColor:[1,1,.6]},{IndexedColors:[.5529411764705883,.8274509803921568,.7803921568627451,1,1,.7019607843137254,.7450980392156863,.7294117647058823,.8549019607843137,.984313725490196,.5019607843137255,.4470588235294118,.5019607843137255,.6941176470588235,.8274509803921568,.9921568627450981,.7058823529411765,.3843137254901961,.7019607843137254,.8705882352941177,.4117647058823529,.9882352941176471,.803921568627451,.8980392156862745,.8509803921568627,.8509803921568627,.8509803921568627,.7372549019607844,.5019607843137255,.7411764705882353,.8,.9215686274509803,.7725490196078432,1,.9294117647058824,.4352941176470588],Name:"Brewer Qualitative Set3",NanColor:[1,.9294117647058824,.4352941176470588]},{IndexedColors:[1,0,0,1,.862745,0,0,.695201,0],Name:"Traffic Lights",NanColor:[.803922,0,.803922]},{IndexedColors:[.908659,.604013,.581857,1,.862745,0,0,.695201,0],Name:"Traffic Lights For Deuteranopes",NanColor:[.803922,0,.803922]},{IndexedColors:[.4196078431372549,0,.07058823529411765,.9019607843137255,.9411764705882353,.0196078431372549,.01568627450980392,.6196078431372549,.00784313725490196],Name:"Traffic Lights For Deuteranopes 2",NanColor:[.803922,0,.803922]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Muted Blue-Green",NanColor:[.25,0,0],RGBPoints:[0,.109804,.27451,.301961,.02,.129412,.309804,.341176,.05,.14902,.341176,.380392,.1,.188235,.403922,.458824,.15,.227451,.447059,.521569,.2,.290196,.494118,.588235,.25,.368627,.552941,.670588,.3,.458824,.619608,.74902,.35,.588235,.713725,.85098,.4,.72549,.815686,.941176,.45,.831373,.882353,.980392,.475,.909804,.933333,1,.5,.980392,.984314,1,.5,.996078,1,.94902,.5,1,1,.980392,.5,.980392,.984314,1,.525,.972549,.988235,.890196,.55,.917647,.960784,.835294,.6,.835294,.921569,.772549,.65,.768627,.901961,.737255,.7,.670588,.831373,.654902,.75,.576471,.760784,.584314,.8,.498039,.678431,.521569,.85,.392157,.560784,.427451,.9,.294118,.45098,.333333,.95,.211765,.34902,.254902,1,.152941,.278431,.196078]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Green-Blue Asymmetric Divergent (62Blbc)",NanColor:[.25,0,0],RGBPoints:[0,.121569,.2,.145098,.05,.196078,.301961,.223529,.1,.258824,.4,.278431,.2,.341176,.54902,.341176,.25,.419608,.619608,.376471,.3,.545098,.701961,.392157,.35,.643137,.780392,.403922,.4,.729412,.819608,.45098,.45,.811765,.870588,.521569,.5,.898039,.909804,.564706,.55,.941176,.92549,.686275,.6,.960784,.94902,.776471,.64,1,1,1,.65,.890196,.988235,.972549,.7,.721569,.894118,.901961,.75,.631373,.823529,.839216,.8,.517647,.662745,.701961,.85,.384314,.494118,.54902,.9,.298039,.360784,.45098,.95,.223529,.25098,.34902,.99,.156863,.172549,.25098,1,.137255,.137255,.188235]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Asymmtrical Earth Tones (6_21b)",NanColor:[.25,0,0],RGBPoints:[0,.141176,.14902,.2,.05,.215686,.258824,.321569,.1,.243137,.368627,.380392,.15,.27451,.439216,.4,.2,.32549,.501961,.384314,.25,.403922,.6,.419608,.3,.486275,.701961,.454902,.35,.556863,.74902,.494118,.4,.670588,.8,.545098,.5,.854902,.901961,.631373,.55,.92549,.941176,.694118,.6,.960784,.94902,.776471,.65,.988235,.968627,.909804,.7,.839216,.815686,.772549,.75,.701961,.662745,.615686,.8,.6,.529412,.478431,.85,.501961,.403922,.360784,.9,.439216,.313725,.290196,1,.301961,.164706,.176471]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Yellow 15",NanColor:[.25,0,0],RGBPoints:[0,1,1,.988235,.002,1,1,.988235,.05,.984314,.988235,.843137,.1,.988235,.988235,.741176,.15,.980392,.968627,.654902,.2,.980392,.945098,.576471,.25,.968627,.905882,.486275,.3,.968627,.862745,.388235,.35,.960784,.803922,.286275,.4,.94902,.741176,.219608,.45,.941176,.678431,.14902,.5,.929412,.607843,.094118,.55,.921569,.545098,.054902,.6,.909804,.486275,.035294,.65,.890196,.411765,.019608,.7,.8,.305882,0,.75,.760784,.239216,0,.8,.678431,.180392,.011765,.85,.6,.121569,.023529,.9,.501961,.054902,.031373,.95,.4,.039216,.058824,1,.301961,.047059,.090196]},{ColorSpace:"Diverging",Name:"Magma (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.001462,466e-6,.013866,.003922,.002258,.001295,.018331,.007843,.003279,.002305,.023708,.011765,.004512,.00349,.029965,.015686,.00595,.004843,.03713,.019608,.007588,.006356,.044973,.023529,.009426,.008022,.052844,.027451,.011465,.009828,.06075,.031373,.013708,.011771,.068667,.035294,.016156,.01384,.076603,.039216,.018815,.016026,.084584,.043137,.021692,.01832,.09261,.047059,.024792,.020715,.100676,.05098,.028123,.023201,.108787,.054902,.031696,.025765,.116965,.058824,.03552,.028397,.125209,.062745,.039608,.03109,.133515,.066667,.04383,.03383,.141886,.070588,.048062,.036607,.150327,.07451,.05232,.039407,.158841,.078431,.056615,.04216,.167446,.082353,.060949,.044794,.176129,.086275,.06533,.047318,.184892,.090196,.069764,.049726,.193735,.094118,.074257,.052017,.20266,.098039,.078815,.054184,.211667,.101961,.083446,.056225,.220755,.105882,.088155,.058133,.229922,.109804,.092949,.059904,.239164,.113725,.097833,.061531,.248477,.117647,.102815,.06301,.257854,.121569,.107899,.064335,.267289,.12549,.113094,.065492,.276784,.129412,.118405,.066479,.286321,.133333,.123833,.067295,.295879,.137255,.12938,.067935,.305443,.141176,.135053,.068391,.315,.145098,.140858,.068654,.324538,.14902,.146785,.068738,.334011,.152941,.152839,.068637,.343404,.156863,.159018,.068354,.352688,.160784,.165308,.067911,.361816,.164706,.171713,.067305,.370771,.168627,.178212,.066576,.379497,.172549,.184801,.065732,.387973,.176471,.19146,.064818,.396152,.180392,.198177,.063862,.404009,.184314,.204935,.062907,.411514,.188235,.211718,.061992,.418647,.192157,.218512,.061158,.425392,.196078,.225302,.060445,.431742,.2,.232077,.059889,.437695,.203922,.238826,.059517,.443256,.207843,.245543,.059352,.448436,.211765,.25222,.059415,.453248,.215686,.258857,.059706,.45771,.219608,.265447,.060237,.46184,.223529,.271994,.060994,.46566,.227451,.278493,.061978,.46919,.231373,.284951,.063168,.472451,.235294,.291366,.064553,.475462,.239216,.29774,.066117,.478243,.243137,.304081,.067835,.480812,.247059,.310382,.069702,.483186,.25098,.316654,.07169,.48538,.254902,.322899,.073782,.487408,.258824,.329114,.075972,.489287,.262745,.335308,.078236,.491024,.266667,.341482,.080564,.492631,.270588,.347636,.082946,.494121,.27451,.353773,.085373,.495501,.278431,.359898,.087831,.496778,.282353,.366012,.090314,.49796,.286275,.372116,.092816,.499053,.290196,.378211,.095332,.500067,.294118,.384299,.097855,.501002,.298039,.390384,.100379,.501864,.301961,.396467,.102902,.502658,.305882,.402548,.10542,.503386,.309804,.408629,.10793,.504052,.313725,.414709,.110431,.504662,.317647,.420791,.11292,.505215,.321569,.426877,.115395,.505714,.32549,.432967,.117855,.50616,.329412,.439062,.120298,.506555,.333333,.445163,.122724,.506901,.337255,.451271,.125132,.507198,.341176,.457386,.127522,.507448,.345098,.463508,.129893,.507652,.34902,.46964,.132245,.507809,.352941,.47578,.134577,.507921,.356863,.481929,.136891,.507989,.360784,.488088,.139186,.508011,.364706,.494258,.141462,.507988,.368627,.500438,.143719,.50792,.372549,.506629,.145958,.507806,.376471,.512831,.148179,.507648,.380392,.519045,.150383,.507443,.384314,.52527,.152569,.507192,.388235,.531507,.154739,.506895,.392157,.537755,.156894,.506551,.396078,.544015,.159033,.506159,.4,.550287,.161158,.505719,.403922,.556571,.163269,.50523,.407843,.562866,.165368,.504692,.411765,.569172,.167454,.504105,.415686,.57549,.16953,.503466,.419608,.581819,.171596,.502777,.423529,.588158,.173652,.502035,.427451,.594508,.175701,.501241,.431373,.600868,.177743,.500394,.435294,.607238,.179779,.499492,.439216,.613617,.181811,.498536,.443137,.620005,.18384,.497524,.447059,.626401,.185867,.496456,.45098,.632805,.187893,.495332,.454902,.639216,.189921,.49415,.458824,.645633,.191952,.49291,.462745,.652056,.193986,.491611,.466667,.658483,.196027,.490253,.470588,.664915,.198075,.488836,.47451,.671349,.200133,.487358,.478431,.677786,.202203,.485819,.482353,.684224,.204286,.484219,.486275,.690661,.206384,.482558,.490196,.697098,.208501,.480835,.494118,.703532,.210638,.479049,.498039,.709962,.212797,.477201,.501961,.716387,.214982,.47529,.505882,.722805,.217194,.473316,.509804,.729216,.219437,.471279,.513725,.735616,.221713,.46918,.517647,.742004,.224025,.467018,.521569,.748378,.226377,.464794,.52549,.754737,.228772,.462509,.529412,.761077,.231214,.460162,.533333,.767398,.233705,.457755,.537255,.773695,.236249,.455289,.541176,.779968,.238851,.452765,.545098,.786212,.241514,.450184,.54902,.792427,.244242,.447543,.552941,.798608,.24704,.444848,.556863,.804752,.249911,.442102,.560784,.810855,.252861,.439305,.564706,.816914,.255895,.436461,.568627,.822926,.259016,.433573,.572549,.828886,.262229,.430644,.576471,.834791,.26554,.427671,.580392,.840636,.268953,.424666,.584314,.846416,.272473,.421631,.588235,.852126,.276106,.418573,.592157,.857763,.279857,.415496,.596078,.86332,.283729,.412403,.6,.868793,.287728,.409303,.603922,.874176,.291859,.406205,.607843,.879464,.296125,.403118,.611765,.884651,.30053,.400047,.615686,.889731,.305079,.397002,.619608,.8947,.309773,.393995,.623529,.899552,.314616,.391037,.627451,.904281,.31961,.388137,.631373,.908884,.324755,.385308,.635294,.913354,.330052,.382563,.639216,.917689,.3355,.379915,.643137,.921884,.341098,.377376,.647059,.925937,.346844,.374959,.65098,.929845,.352734,.372677,.654902,.933606,.358764,.370541,.658824,.937221,.364929,.368567,.662745,.940687,.371224,.366762,.666667,.944006,.377643,.365136,.670588,.94718,.384178,.363701,.67451,.95021,.39082,.362468,.678431,.953099,.397563,.361438,.682353,.955849,.4044,.360619,.686275,.958464,.411324,.360014,.690196,.960949,.418323,.35963,.694118,.96331,.42539,.359469,.698039,.965549,.432519,.359529,.701961,.967671,.439703,.35981,.705882,.96968,.446936,.360311,.709804,.971582,.45421,.36103,.713725,.973381,.46152,.361965,.717647,.975082,.468861,.363111,.721569,.97669,.476226,.364466,.72549,.97821,.483612,.366025,.729412,.979645,.491014,.367783,.733333,.981,.498428,.369734,.737255,.982279,.505851,.371874,.741176,.983485,.51328,.374198,.745098,.984622,.520713,.376698,.74902,.985693,.528148,.379371,.752941,.9867,.535582,.38221,.756863,.987646,.543015,.38521,.760784,.988533,.550446,.388365,.764706,.989363,.557873,.391671,.768627,.990138,.565296,.395122,.772549,.990871,.572706,.398714,.776471,.991558,.580107,.402441,.780392,.992196,.587502,.406299,.784314,.992785,.594891,.410283,.788235,.993326,.602275,.41439,.792157,.993834,.609644,.418613,.796078,.994309,.616999,.42295,.8,.994738,.62435,.427397,.803922,.995122,.631696,.431951,.807843,.99548,.639027,.436607,.811765,.99581,.646344,.441361,.815686,.996096,.653659,.446213,.819608,.996341,.660969,.45116,.823529,.99658,.668256,.456192,.827451,.996775,.675541,.461314,.831373,.996925,.682828,.466526,.835294,.997077,.690088,.471811,.839216,.997186,.697349,.477182,.843137,.997254,.704611,.482635,.847059,.997325,.711848,.488154,.85098,.997351,.719089,.493755,.854902,.997351,.726324,.499428,.858824,.997341,.733545,.505167,.862745,.997285,.740772,.510983,.866667,.997228,.747981,.516859,.870588,.997138,.75519,.522806,.87451,.997019,.762398,.528821,.878431,.996898,.769591,.534892,.882353,.996727,.776795,.541039,.886275,.996571,.783977,.547233,.890196,.996369,.791167,.553499,.894118,.996162,.798348,.55982,.898039,.995932,.805527,.566202,.901961,.99568,.812706,.572645,.905882,.995424,.819875,.57914,.909804,.995131,.827052,.585701,.913725,.994851,.834213,.592307,.917647,.994524,.841387,.598983,.921569,.994222,.84854,.605696,.92549,.993866,.855711,.612482,.929412,.993545,.862859,.619299,.933333,.99317,.870024,.626189,.937255,.992831,.877168,.633109,.941176,.99244,.88433,.640099,.945098,.992089,.89147,.647116,.94902,.991688,.898627,.654202,.952941,.991332,.905763,.661309,.956863,.99093,.912915,.668481,.960784,.99057,.920049,.675675,.964706,.990175,.927196,.682926,.968627,.989815,.934329,.690198,.972549,.989434,.94147,.697519,.976471,.989077,.948604,.704863,.980392,.988717,.955742,.712242,.984314,.988367,.962878,.719649,.988235,.988033,.970012,.727077,.992157,.987691,.977154,.734536,.996078,.987387,.984288,.742002,1,.987053,.991438,.749504]},{ColorSpace:"Diverging",Name:"Inferno (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.001462,466e-6,.013866,.003922,.002267,.00127,.01857,.007843,.003299,.002249,.024239,.011765,.004547,.003392,.030909,.015686,.006006,.004692,.038558,.019608,.007676,.006136,.046836,.023529,.009561,.007713,.055143,.027451,.011663,.009417,.06346,.031373,.013995,.011225,.071862,.035294,.016561,.013136,.080282,.039216,.019373,.015133,.088767,.043137,.022447,.017199,.097327,.047059,.025793,.019331,.10593,.05098,.029432,.021503,.114621,.054902,.033385,.023702,.123397,.058824,.037668,.025921,.132232,.062745,.042253,.028139,.141141,.066667,.046915,.030324,.150164,.070588,.051644,.032474,.159254,.07451,.056449,.034569,.168414,.078431,.06134,.03659,.177642,.082353,.066331,.038504,.186962,.086275,.071429,.040294,.196354,.090196,.076637,.041905,.205799,.094118,.081962,.043328,.215289,.098039,.087411,.044556,.224813,.101961,.09299,.045583,.234358,.105882,.098702,.046402,.243904,.109804,.104551,.047008,.25343,.113725,.110536,.047399,.262912,.117647,.116656,.047574,.272321,.121569,.122908,.047536,.281624,.12549,.129285,.047293,.290788,.129412,.135778,.046856,.299776,.133333,.142378,.046242,.308553,.137255,.149073,.045468,.317085,.141176,.15585,.044559,.325338,.145098,.162689,.043554,.333277,.14902,.169575,.042489,.340874,.152941,.176493,.041402,.348111,.156863,.183429,.040329,.354971,.160784,.190367,.039309,.361447,.164706,.197297,.0384,.367535,.168627,.204209,.037632,.373238,.172549,.211095,.03703,.378563,.176471,.217949,.036615,.383522,.180392,.224763,.036405,.388129,.184314,.231538,.036405,.3924,.188235,.238273,.036621,.396353,.192157,.244967,.037055,.400007,.196078,.25162,.037705,.403378,.2,.258234,.038571,.406485,.203922,.26481,.039647,.409345,.207843,.271347,.040922,.411976,.211765,.27785,.042353,.414392,.215686,.284321,.043933,.416608,.219608,.290763,.045644,.418637,.223529,.297178,.04747,.420491,.227451,.303568,.049396,.422182,.231373,.309935,.051407,.423721,.235294,.316282,.05349,.425116,.239216,.32261,.055634,.426377,.243137,.328921,.057827,.427511,.247059,.335217,.06006,.428524,.25098,.3415,.062325,.429425,.254902,.347771,.064616,.430217,.258824,.354032,.066925,.430906,.262745,.360284,.069247,.431497,.266667,.366529,.071579,.431994,.270588,.372768,.073915,.4324,.27451,.379001,.076253,.432719,.278431,.385228,.078591,.432955,.282353,.391453,.080927,.433109,.286275,.397674,.083257,.433183,.290196,.403894,.08558,.433179,.294118,.410113,.087896,.433098,.298039,.416331,.090203,.432943,.301961,.422549,.092501,.432714,.305882,.428768,.09479,.432412,.309804,.434987,.097069,.432039,.313725,.441207,.099338,.431594,.317647,.447428,.101597,.43108,.321569,.453651,.103848,.430498,.32549,.459875,.106089,.429846,.329412,.4661,.108322,.429125,.333333,.472328,.110547,.428334,.337255,.478558,.112764,.427475,.341176,.484789,.114974,.426548,.345098,.491022,.117179,.425552,.34902,.497257,.119379,.424488,.352941,.503493,.121575,.423356,.356863,.50973,.123769,.422156,.360784,.515967,.12596,.420887,.364706,.522206,.12815,.419549,.368627,.528444,.130341,.418142,.372549,.534683,.132534,.416667,.376471,.54092,.134729,.415123,.380392,.547157,.136929,.413511,.384314,.553392,.139134,.411829,.388235,.559624,.141346,.410078,.392157,.565854,.143567,.408258,.396078,.572081,.145797,.406369,.4,.578304,.148039,.404411,.403922,.584521,.150294,.402385,.407843,.590734,.152563,.40029,.411765,.59694,.154848,.398125,.415686,.603139,.157151,.395891,.419608,.60933,.159474,.393589,.423529,.615513,.161817,.391219,.427451,.621685,.164184,.388781,.431373,.627847,.166575,.386276,.435294,.633998,.168992,.383704,.439216,.640135,.171438,.381065,.443137,.64626,.173914,.378359,.447059,.652369,.176421,.375586,.45098,.658463,.178962,.372748,.454902,.66454,.181539,.369846,.458824,.670599,.184153,.366879,.462745,.676638,.186807,.363849,.466667,.682656,.189501,.360757,.470588,.688653,.192239,.357603,.47451,.694627,.195021,.354388,.478431,.700576,.197851,.351113,.482353,.7065,.200728,.347777,.486275,.712396,.203656,.344383,.490196,.718264,.206636,.340931,.494118,.724103,.20967,.337424,.498039,.729909,.212759,.333861,.501961,.735683,.215906,.330245,.505882,.741423,.219112,.326576,.509804,.747127,.222378,.322856,.513725,.752794,.225706,.319085,.517647,.758422,.229097,.315266,.521569,.76401,.232554,.311399,.52549,.769556,.236077,.307485,.529412,.775059,.239667,.303526,.533333,.780517,.243327,.299523,.537255,.785929,.247056,.295477,.541176,.791293,.250856,.29139,.545098,.796607,.254728,.287264,.54902,.801871,.258674,.283099,.552941,.807082,.262692,.278898,.556863,.812239,.266786,.274661,.560784,.817341,.270954,.27039,.564706,.822386,.275197,.266085,.568627,.827372,.279517,.26175,.572549,.832299,.283913,.257383,.576471,.837165,.288385,.252988,.580392,.841969,.292933,.248564,.584314,.846709,.297559,.244113,.588235,.851384,.30226,.239636,.592157,.855992,.307038,.235133,.596078,.860533,.311892,.230606,.6,.865006,.316822,.226055,.603922,.869409,.321827,.221482,.607843,.873741,.326906,.216886,.611765,.878001,.33206,.212268,.615686,.882188,.337287,.207628,.619608,.886302,.342586,.202968,.623529,.890341,.347957,.198286,.627451,.894305,.353399,.193584,.631373,.898192,.358911,.18886,.635294,.902003,.364492,.184116,.639216,.905735,.37014,.17935,.643137,.90939,.375856,.174563,.647059,.912966,.381636,.169755,.65098,.916462,.387481,.164924,.654902,.919879,.393389,.16007,.658824,.923215,.399359,.155193,.662745,.92647,.405389,.150292,.666667,.929644,.411479,.145367,.670588,.932737,.417627,.140417,.67451,.935747,.423831,.13544,.678431,.938675,.430091,.130438,.682353,.941521,.436405,.125409,.686275,.944285,.442772,.120354,.690196,.946965,.449191,.115272,.694118,.949562,.45566,.110164,.698039,.952075,.462178,.105031,.701961,.954506,.468744,.099874,.705882,.956852,.475356,.094695,.709804,.959114,.482014,.089499,.713725,.961293,.488716,.084289,.717647,.963387,.495462,.079073,.721569,.965397,.502249,.073859,.72549,.967322,.509078,.068659,.729412,.969163,.515946,.063488,.733333,.970919,.522853,.058367,.737255,.97259,.529798,.053324,.741176,.974176,.53678,.048392,.745098,.975677,.543798,.043618,.74902,.977092,.55085,.03905,.752941,.978422,.557937,.034931,.756863,.979666,.565057,.031409,.760784,.980824,.572209,.028508,.764706,.981895,.579392,.02625,.768627,.982881,.586606,.024661,.772549,.983779,.593849,.02377,.776471,.984591,.601122,.023606,.780392,.985315,.608422,.024202,.784314,.985952,.61575,.025592,.788235,.986502,.623105,.027814,.792157,.986964,.630485,.030908,.796078,.987337,.63789,.034916,.8,.987622,.64532,.039886,.803922,.987819,.652773,.045581,.807843,.987926,.66025,.05175,.811765,.987945,.667748,.058329,.815686,.987874,.675267,.065257,.819608,.987714,.682807,.072489,.823529,.987464,.690366,.07999,.827451,.987124,.697944,.087731,.831373,.986694,.70554,.095694,.835294,.986175,.713153,.103863,.839216,.985566,.720782,.112229,.843137,.984865,.728427,.120785,.847059,.984075,.736087,.129527,.85098,.983196,.743758,.138453,.854902,.982228,.751442,.147565,.858824,.981173,.759135,.156863,.862745,.980032,.766837,.166353,.866667,.978806,.774545,.176037,.870588,.977497,.782258,.185923,.87451,.976108,.789974,.196018,.878431,.974638,.797692,.206332,.882353,.973088,.805409,.216877,.886275,.971468,.813122,.227658,.890196,.969783,.820825,.238686,.894118,.968041,.828515,.249972,.898039,.966243,.836191,.261534,.901961,.964394,.843848,.273391,.905882,.962517,.851476,.285546,.909804,.960626,.859069,.29801,.913725,.95872,.866624,.31082,.917647,.956834,.874129,.323974,.921569,.954997,.881569,.337475,.92549,.953215,.888942,.351369,.929412,.951546,.896226,.365627,.933333,.950018,.903409,.380271,.937255,.948683,.910473,.395289,.941176,.947594,.917399,.410665,.945098,.946809,.924168,.426373,.94902,.946392,.930761,.442367,.952941,.946403,.937159,.458592,.956863,.946903,.943348,.47497,.960784,.947937,.949318,.491426,.964706,.949545,.955063,.50786,.968627,.95174,.960587,.524203,.972549,.954529,.965896,.540361,.976471,.957896,.971003,.556275,.980392,.961812,.975924,.571925,.984314,.966249,.980678,.587206,.988235,.971162,.985282,.602154,.992157,.976511,.989753,.61676,.996078,.982257,.994109,.631017,1,.988362,.998364,.644924]},{ColorSpace:"Diverging",Name:"Plasma (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.050383,.029803,.527975,.003922,.063536,.028426,.533124,.007843,.075353,.027206,.538007,.011765,.086222,.026125,.542658,.015686,.096379,.025165,.547103,.019608,.10598,.024309,.551368,.023529,.115124,.023556,.555468,.027451,.123903,.022878,.559423,.031373,.132381,.022258,.56325,.035294,.140603,.021687,.566959,.039216,.148607,.021154,.570562,.043137,.156421,.020651,.574065,.047059,.16407,.020171,.577478,.05098,.171574,.019706,.580806,.054902,.17895,.019252,.584054,.058824,.186213,.018803,.587228,.062745,.193374,.018354,.59033,.066667,.200445,.017902,.593364,.070588,.207435,.017442,.596333,.07451,.21435,.016973,.599239,.078431,.221197,.016497,.602083,.082353,.227983,.016007,.604867,.086275,.234715,.015502,.607592,.090196,.241396,.014979,.610259,.094118,.248032,.014439,.612868,.098039,.254627,.013882,.615419,.101961,.261183,.013308,.617911,.105882,.267703,.012716,.620346,.109804,.274191,.012109,.622722,.113725,.280648,.011488,.625038,.117647,.287076,.010855,.627295,.121569,.293478,.010213,.62949,.12549,.299855,.009561,.631624,.129412,.30621,.008902,.633694,.133333,.312543,.008239,.6357,.137255,.318856,.007576,.63764,.141176,.32515,.006915,.639512,.145098,.331426,.006261,.641316,.14902,.337683,.005618,.643049,.152941,.343925,.004991,.64471,.156863,.35015,.004382,.646298,.160784,.356359,.003798,.64781,.164706,.362553,.003243,.649245,.168627,.368733,.002724,.650601,.172549,.374897,.002245,.651876,.176471,.381047,.001814,.653068,.180392,.387183,.001434,.654177,.184314,.393304,.001114,.655199,.188235,.399411,859e-6,.656133,.192157,.405503,678e-6,.656977,.196078,.41158,577e-6,.65773,.2,.417642,564e-6,.65839,.203922,.423689,646e-6,.658956,.207843,.429719,831e-6,.659425,.211765,.435734,.001127,.659797,.215686,.441732,.00154,.660069,.219608,.447714,.00208,.66024,.223529,.453677,.002755,.66031,.227451,.459623,.003574,.660277,.231373,.46555,.004545,.660139,.235294,.471457,.005678,.659897,.239216,.477344,.00698,.659549,.243137,.48321,.00846,.659095,.247059,.489055,.010127,.658534,.25098,.494877,.01199,.657865,.254902,.500678,.014055,.657088,.258824,.506454,.016333,.656202,.262745,.512206,.018833,.655209,.266667,.517933,.021563,.654109,.270588,.523633,.024532,.652901,.27451,.529306,.027747,.651586,.278431,.534952,.031217,.650165,.282353,.54057,.03495,.64864,.286275,.546157,.038954,.64701,.290196,.551715,.043136,.645277,.294118,.557243,.047331,.643443,.298039,.562738,.051545,.641509,.301961,.568201,.055778,.639477,.305882,.573632,.060028,.637349,.309804,.579029,.064296,.635126,.313725,.584391,.068579,.632812,.317647,.589719,.072878,.630408,.321569,.595011,.07719,.627917,.32549,.600266,.081516,.625342,.329412,.605485,.085854,.622686,.333333,.610667,.090204,.619951,.337255,.615812,.094564,.61714,.341176,.620919,.098934,.614257,.345098,.625987,.103312,.611305,.34902,.631017,.107699,.608287,.352941,.636008,.112092,.605205,.356863,.640959,.116492,.602065,.360784,.645872,.120898,.598867,.364706,.650746,.125309,.595617,.368627,.65558,.129725,.592317,.372549,.660374,.134144,.588971,.376471,.665129,.138566,.585582,.380392,.669845,.142992,.582154,.384314,.674522,.147419,.578688,.388235,.67916,.151848,.575189,.392157,.683758,.156278,.57166,.396078,.688318,.160709,.568103,.4,.69284,.165141,.564522,.403922,.697324,.169573,.560919,.407843,.701769,.174005,.557296,.411765,.706178,.178437,.553657,.415686,.710549,.182868,.550004,.419608,.714883,.187299,.546338,.423529,.719181,.191729,.542663,.427451,.723444,.196158,.538981,.431373,.72767,.200586,.535293,.435294,.731862,.205013,.531601,.439216,.736019,.209439,.527908,.443137,.740143,.213864,.524216,.447059,.744232,.218288,.520524,.45098,.748289,.222711,.516834,.454902,.752312,.227133,.513149,.458824,.756304,.231555,.509468,.462745,.760264,.235976,.505794,.466667,.764193,.240396,.502126,.470588,.76809,.244817,.498465,.47451,.771958,.249237,.494813,.478431,.775796,.253658,.491171,.482353,.779604,.258078,.487539,.486275,.783383,.2625,.483918,.490196,.787133,.266922,.480307,.494118,.790855,.271345,.476706,.498039,.794549,.27577,.473117,.501961,.798216,.280197,.469538,.505882,.801855,.284626,.465971,.509804,.805467,.289057,.462415,.513725,.809052,.293491,.45887,.517647,.812612,.297928,.455338,.521569,.816144,.302368,.451816,.52549,.819651,.306812,.448306,.529412,.823132,.311261,.444806,.533333,.826588,.315714,.441316,.537255,.830018,.320172,.437836,.541176,.833422,.324635,.434366,.545098,.836801,.329105,.430905,.54902,.840155,.33358,.427455,.552941,.843484,.338062,.424013,.556863,.846788,.342551,.420579,.560784,.850066,.347048,.417153,.564706,.853319,.351553,.413734,.568627,.856547,.356066,.410322,.572549,.85975,.360588,.406917,.576471,.862927,.365119,.403519,.580392,.866078,.36966,.400126,.584314,.869203,.374212,.396738,.588235,.872303,.378774,.393355,.592157,.875376,.383347,.389976,.596078,.878423,.387932,.3866,.6,.881443,.392529,.383229,.603922,.884436,.397139,.37986,.607843,.887402,.401762,.376494,.611765,.89034,.406398,.37313,.615686,.89325,.411048,.369768,.619608,.896131,.415712,.366407,.623529,.898984,.420392,.363047,.627451,.901807,.425087,.359688,.631373,.904601,.429797,.356329,.635294,.907365,.434524,.35297,.639216,.910098,.439268,.34961,.643137,.9128,.444029,.346251,.647059,.915471,.448807,.34289,.65098,.918109,.453603,.339529,.654902,.920714,.458417,.336166,.658824,.923287,.463251,.332801,.662745,.925825,.468103,.329435,.666667,.928329,.472975,.326067,.670588,.930798,.477867,.322697,.67451,.933232,.48278,.319325,.678431,.93563,.487712,.315952,.682353,.93799,.492667,.312575,.686275,.940313,.497642,.309197,.690196,.942598,.502639,.305816,.694118,.944844,.507658,.302433,.698039,.947051,.512699,.299049,.701961,.949217,.517763,.295662,.705882,.951344,.52285,.292275,.709804,.953428,.52796,.288883,.713725,.95547,.533093,.28549,.717647,.957469,.53825,.282096,.721569,.959424,.543431,.278701,.72549,.961336,.548636,.275305,.729412,.963203,.553865,.271909,.733333,.965024,.559118,.268513,.737255,.966798,.564396,.265118,.741176,.968526,.5697,.261721,.745098,.970205,.575028,.258325,.74902,.971835,.580382,.254931,.752941,.973416,.585761,.25154,.756863,.974947,.591165,.248151,.760784,.976428,.596595,.244767,.764706,.977856,.602051,.241387,.768627,.979233,.607532,.238013,.772549,.980556,.613039,.234646,.776471,.981826,.618572,.231287,.780392,.983041,.624131,.227937,.784314,.984199,.629718,.224595,.788235,.985301,.63533,.221265,.792157,.986345,.640969,.217948,.796078,.987332,.646633,.214648,.8,.98826,.652325,.211364,.803922,.989128,.658043,.2081,.807843,.989935,.663787,.204859,.811765,.990681,.669558,.201642,.815686,.991365,.675355,.198453,.819608,.991985,.681179,.195295,.823529,.992541,.68703,.19217,.827451,.993032,.692907,.189084,.831373,.993456,.69881,.186041,.835294,.993814,.704741,.183043,.839216,.994103,.710698,.180097,.843137,.994324,.716681,.177208,.847059,.994474,.722691,.174381,.85098,.994553,.728728,.171622,.854902,.994561,.734791,.168938,.858824,.994495,.74088,.166335,.862745,.994355,.746995,.163821,.866667,.994141,.753137,.161404,.870588,.993851,.759304,.159092,.87451,.993482,.765499,.156891,.878431,.993033,.77172,.154808,.882353,.992505,.777967,.152855,.886275,.991897,.784239,.151042,.890196,.991209,.790537,.149377,.894118,.990439,.796859,.14787,.898039,.989587,.803205,.146529,.901961,.988648,.809579,.145357,.905882,.987621,.815978,.144363,.909804,.986509,.822401,.143557,.913725,.985314,.828846,.142945,.917647,.984031,.835315,.142528,.921569,.982653,.841812,.142303,.92549,.98119,.848329,.142279,.929412,.979644,.854866,.142453,.933333,.977995,.861432,.142808,.937255,.976265,.868016,.143351,.941176,.974443,.874622,.144061,.945098,.97253,.88125,.144923,.94902,.970533,.887896,.145919,.952941,.968443,.894564,.147014,.956863,.966271,.901249,.14818,.960784,.964021,.90795,.14937,.964706,.961681,.914672,.15052,.968627,.959276,.921407,.151566,.972549,.956808,.928152,.152409,.976471,.954287,.934908,.152921,.980392,.951726,.941671,.152925,.984314,.949151,.948435,.152178,.988235,.946602,.95519,.150328,.992157,.944152,.961916,.146861,.996078,.941896,.96859,.140956,1,.940015,.975158,.131326]},{ColorSpace:"Diverging",Name:"Viridis (matplotlib)",NanColor:[1,0,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Eric Firing",RGBPoints:[0,.267004,.004874,.329415,.003922,.26851,.009605,.335427,.007843,.269944,.014625,.341379,.011765,.271305,.019942,.347269,.015686,.272594,.025563,.353093,.019608,.273809,.031497,.358853,.023529,.274952,.037752,.364543,.027451,.276022,.044167,.370164,.031373,.277018,.050344,.375715,.035294,.277941,.056324,.381191,.039216,.278791,.062145,.386592,.043137,.279566,.067836,.391917,.047059,.280267,.073417,.397163,.05098,.280894,.078907,.402329,.054902,.281446,.08432,.407414,.058824,.281924,.089666,.412415,.062745,.282327,.094955,.417331,.066667,.282656,.100196,.42216,.070588,.28291,.105393,.426902,.07451,.283091,.110553,.431554,.078431,.283197,.11568,.436115,.082353,.283229,.120777,.440584,.086275,.283187,.125848,.44496,.090196,.283072,.130895,.449241,.094118,.282884,.13592,.453427,.098039,.282623,.140926,.457517,.101961,.28229,.145912,.46151,.105882,.281887,.150881,.465405,.109804,.281412,.155834,.469201,.113725,.280868,.160771,.472899,.117647,.280255,.165693,.476498,.121569,.279574,.170599,.479997,.12549,.278826,.17549,.483397,.129412,.278012,.180367,.486697,.133333,.277134,.185228,.489898,.137255,.276194,.190074,.493001,.141176,.275191,.194905,.496005,.145098,.274128,.199721,.498911,.14902,.273006,.20452,.501721,.152941,.271828,.209303,.504434,.156863,.270595,.214069,.507052,.160784,.269308,.218818,.509577,.164706,.267968,.223549,.512008,.168627,.26658,.228262,.514349,.172549,.265145,.232956,.516599,.176471,.263663,.237631,.518762,.180392,.262138,.242286,.520837,.184314,.260571,.246922,.522828,.188235,.258965,.251537,.524736,.192157,.257322,.25613,.526563,.196078,.255645,.260703,.528312,.2,.253935,.265254,.529983,.203922,.252194,.269783,.531579,.207843,.250425,.27429,.533103,.211765,.248629,.278775,.534556,.215686,.246811,.283237,.535941,.219608,.244972,.287675,.53726,.223529,.243113,.292092,.538516,.227451,.241237,.296485,.539709,.231373,.239346,.300855,.540844,.235294,.237441,.305202,.541921,.239216,.235526,.309527,.542944,.243137,.233603,.313828,.543914,.247059,.231674,.318106,.544834,.25098,.229739,.322361,.545706,.254902,.227802,.326594,.546532,.258824,.225863,.330805,.547314,.262745,.223925,.334994,.548053,.266667,.221989,.339161,.548752,.270588,.220057,.343307,.549413,.27451,.21813,.347432,.550038,.278431,.21621,.351535,.550627,.282353,.214298,.355619,.551184,.286275,.212395,.359683,.55171,.290196,.210503,.363727,.552206,.294118,.208623,.367752,.552675,.298039,.206756,.371758,.553117,.301961,.204903,.375746,.553533,.305882,.203063,.379716,.553925,.309804,.201239,.38367,.554294,.313725,.19943,.387607,.554642,.317647,.197636,.391528,.554969,.321569,.19586,.395433,.555276,.32549,.1941,.399323,.555565,.329412,.192357,.403199,.555836,.333333,.190631,.407061,.556089,.337255,.188923,.41091,.556326,.341176,.187231,.414746,.556547,.345098,.185556,.41857,.556753,.34902,.183898,.422383,.556944,.352941,.182256,.426184,.55712,.356863,.180629,.429975,.557282,.360784,.179019,.433756,.55743,.364706,.177423,.437527,.557565,.368627,.175841,.44129,.557685,.372549,.174274,.445044,.557792,.376471,.172719,.448791,.557885,.380392,.171176,.45253,.557965,.384314,.169646,.456262,.55803,.388235,.168126,.459988,.558082,.392157,.166617,.463708,.558119,.396078,.165117,.467423,.558141,.4,.163625,.471133,.558148,.403922,.162142,.474838,.55814,.407843,.160665,.47854,.558115,.411765,.159194,.482237,.558073,.415686,.157729,.485932,.558013,.419608,.15627,.489624,.557936,.423529,.154815,.493313,.55784,.427451,.153364,.497,.557724,.431373,.151918,.500685,.557587,.435294,.150476,.504369,.55743,.439216,.149039,.508051,.55725,.443137,.147607,.511733,.557049,.447059,.14618,.515413,.556823,.45098,.144759,.519093,.556572,.454902,.143343,.522773,.556295,.458824,.141935,.526453,.555991,.462745,.140536,.530132,.555659,.466667,.139147,.533812,.555298,.470588,.13777,.537492,.554906,.47451,.136408,.541173,.554483,.478431,.135066,.544853,.554029,.482353,.133743,.548535,.553541,.486275,.132444,.552216,.553018,.490196,.131172,.555899,.552459,.494118,.129933,.559582,.551864,.498039,.128729,.563265,.551229,.501961,.127568,.566949,.550556,.505882,.126453,.570633,.549841,.509804,.125394,.574318,.549086,.513725,.124395,.578002,.548287,.517647,.123463,.581687,.547445,.521569,.122606,.585371,.546557,.52549,.121831,.589055,.545623,.529412,.121148,.592739,.544641,.533333,.120565,.596422,.543611,.537255,.120092,.600104,.54253,.541176,.119738,.603785,.5414,.545098,.119512,.607464,.540218,.54902,.119423,.611141,.538982,.552941,.119483,.614817,.537692,.556863,.119699,.61849,.536347,.560784,.120081,.622161,.534946,.564706,.120638,.625828,.533488,.568627,.12138,.629492,.531973,.572549,.122312,.633153,.530398,.576471,.123444,.636809,.528763,.580392,.12478,.640461,.527068,.584314,.126326,.644107,.525311,.588235,.128087,.647749,.523491,.592157,.130067,.651384,.521608,.596078,.132268,.655014,.519661,.6,.134692,.658636,.517649,.603922,.137339,.662252,.515571,.607843,.14021,.665859,.513427,.611765,.143303,.669459,.511215,.615686,.146616,.67305,.508936,.619608,.150148,.676631,.506589,.623529,.153894,.680203,.504172,.627451,.157851,.683765,.501686,.631373,.162016,.687316,.499129,.635294,.166383,.690856,.496502,.639216,.170948,.694384,.493803,.643137,.175707,.6979,.491033,.647059,.180653,.701402,.488189,.65098,.185783,.704891,.485273,.654902,.19109,.708366,.482284,.658824,.196571,.711827,.479221,.662745,.202219,.715272,.476084,.666667,.20803,.718701,.472873,.670588,.214,.722114,.469588,.67451,.220124,.725509,.466226,.678431,.226397,.728888,.462789,.682353,.232815,.732247,.459277,.686275,.239374,.735588,.455688,.690196,.24607,.73891,.452024,.694118,.252899,.742211,.448284,.698039,.259857,.745492,.444467,.701961,.266941,.748751,.440573,.705882,.274149,.751988,.436601,.709804,.281477,.755203,.432552,.713725,.288921,.758394,.428426,.717647,.296479,.761561,.424223,.721569,.304148,.764704,.419943,.72549,.311925,.767822,.415586,.729412,.319809,.770914,.411152,.733333,.327796,.77398,.40664,.737255,.335885,.777018,.402049,.741176,.344074,.780029,.397381,.745098,.35236,.783011,.392636,.74902,.360741,.785964,.387814,.752941,.369214,.788888,.382914,.756863,.377779,.791781,.377939,.760784,.386433,.794644,.372886,.764706,.395174,.797475,.367757,.768627,.404001,.800275,.362552,.772549,.412913,.803041,.357269,.776471,.421908,.805774,.35191,.780392,.430983,.808473,.346476,.784314,.440137,.811138,.340967,.788235,.449368,.813768,.335384,.792157,.458674,.816363,.329727,.796078,.468053,.818921,.323998,.8,.477504,.821444,.318195,.803922,.487026,.823929,.312321,.807843,.496615,.826376,.306377,.811765,.506271,.828786,.300362,.815686,.515992,.831158,.294279,.819608,.525776,.833491,.288127,.823529,.535621,.835785,.281908,.827451,.545524,.838039,.275626,.831373,.555484,.840254,.269281,.835294,.565498,.84243,.262877,.839216,.575563,.844566,.256415,.843137,.585678,.846661,.249897,.847059,.595839,.848717,.243329,.85098,.606045,.850733,.236712,.854902,.616293,.852709,.230052,.858824,.626579,.854645,.223353,.862745,.636902,.856542,.21662,.866667,.647257,.8584,.209861,.870588,.657642,.860219,.203082,.87451,.668054,.861999,.196293,.878431,.678489,.863742,.189503,.882353,.688944,.865448,.182725,.886275,.699415,.867117,.175971,.890196,.709898,.868751,.169257,.894118,.720391,.87035,.162603,.898039,.730889,.871916,.156029,.901961,.741388,.873449,.149561,.905882,.751884,.874951,.143228,.909804,.762373,.876424,.137064,.913725,.772852,.877868,.131109,.917647,.783315,.879285,.125405,.921569,.79376,.880678,.120005,.92549,.804182,.882046,.114965,.929412,.814576,.883393,.110347,.933333,.82494,.88472,.106217,.937255,.83527,.886029,.102646,.941176,.845561,.887322,.099702,.945098,.85581,.888601,.097452,.94902,.866013,.889868,.095953,.952941,.876168,.891125,.09525,.956863,.886271,.892374,.095374,.960784,.89632,.893616,.096335,.964706,.906311,.894855,.098125,.968627,.916242,.896091,.100717,.972549,.926106,.89733,.104071,.976471,.935904,.89857,.108131,.980392,.945636,.899815,.112838,.984314,.9553,.901065,.118128,.988235,.964894,.902323,.123941,.992157,.974417,.90359,.130215,.996078,.983868,.904867,.136897,1,.993248,.906157,.143936]},{ShowIndexedColorActiveValues:1,IndexedColors:[.07,.5,.7,1,1,1,.85,1,1,.8,.5,1,.76,1,0,1,.71,.71,.5,.5,.5,.05,.05,1,1,.05,.05,.7,1,1,.7,.89,.96,.67,.36,.95,.54,1,0,.75,.65,.65,.5,.6,.6,1,.5,0,1,1,.19,.12,.94,.12,.5,.82,.89,.56,.25,.83,.24,1,0,.9,.9,.9,.75,.76,.78,.65,.65,.67,.54,.6,.78,.61,.48,.78,.5,.48,.78,.44,.48,.78,.36,.48,.76,1,.48,.38,.49,.5,.69,.76,.56,.56,.4,.56,.56,.74,.5,.89,1,.63,0,.65,.16,.16,.36,.72,.82,.44,.18,.69,0,1,0,.58,1,1,.58,.88,.88,.45,.76,.79,.33,.71,.71,.23,.62,.62,.14,.56,.56,.04,.49,.55,0,.41,.52,.88,.88,1,1,.85,.56,.65,.46,.45,.4,.5,.5,.62,.39,.71,.83,.48,0,.58,0,.58,.26,.62,.69,.34,.09,.56,0,.79,0,.44,.83,1,1,1,.78,.85,1,.78,.78,1,.78,.64,1,.78,.56,1,.78,.38,1,.78,.27,1,.78,.19,1,.78,.12,1,.78,0,1,.61,0,.9,.46,0,.83,.32,0,.75,.22,0,.67,.14,.3,.76,1,.3,.65,1,.13,.58,.84,.15,.49,.67,.15,.4,.59,.09,.33,.53,.96,.93,.82,.8,.82,.12,.71,.71,.76,.65,.33,.3,.34,.35,.38,.62,.31,.71,.67,.36,0,.46,.31,.27,.26,.51,.59,.26,0,.4,0,.49,0,.44,.67,.98,0,.73,1,0,.63,1,0,.56,1,0,.5,1,0,.42,1,.33,.36,.95,.47,.36,.89,.54,.31,.89,.63,.21,.83,.7,.12,.83,.7,.12,.73,.7,.05,.65,.74,.05,.53,.78,0,.4,.8,0,.35,.82,0,.31,.85,0,.27,.88,0,.22,.9,0,.18,.91,0,.15,.92,0,.14,.93,0,.13,.94,0,.12,.95,0,.11,.96,0,.1,.97,0,.09,.98,0,.08,.99,0,.07,1,0,.06],Annotations:[0,"Xx",1,"H",2,"He",3,"Li",4,"Be",5,"B",6,"C",7,"N",8,"O",9,"F",10,"Ne",11,"Na",12,"Mg",13,"Al",14,"Si",15,"P",16,"S",17,"Cl",18,"Ar",19,"K",20,"Ca",21,"Sc",22,"Ti",23,"V",24,"Cr",25,"Mn",26,"Fe",27,"Co",28,"Ni",29,"Cu",30,"Zn",31,"Ga",32,"Ge",33,"As",34,"Se",35,"Br",36,"Kr",37,"Rb",38,"Sr",39,"Y",40,"Zr",41,"Nb",42,"Mo",43,"Tc",44,"Ru",45,"Rh",46,"Pd",47,"Ag",48,"Cd",49,"In",50,"Sn",51,"Sb",52,"Te",53,"I",54,"Xe",55,"Cs",56,"Ba",57,"La",58,"Ce",59,"Pr",60,"Nd",61,"Pm",62,"Sm",63,"Eu",64,"Gd",65,"Tb",66,"Dy",67,"Ho",68,"Er",69,"Tm",70,"Yb",71,"Lu",72,"Hf",73,"Ta",74,"W",75,"Re",76,"Os",77,"Ir",78,"Pt",79,"Au",80,"Hg",81,"Tl",82,"Pb",83,"Bi",84,"Po",85,"At",86,"Rn",87,"Fr",88,"Ra",89,"Ac",90,"Th",91,"Pa",92,"U",93,"Np",94,"Pu",95,"Am",96,"Cm",97,"Bk",98,"Cf",99,"Es",100,"Fm",101,"Md",102,"No",103,"Lr",104,"Rf",105,"Db",106,"Sg",107,"Bh",108,"Hs",109,"Mt",110,"Ds",111,"Rg",112,"Cn",113,"Uut",114,"Uuq",115,"Uup",116,"Uuh",117,"Uus",118,"Uuo"],Name:"BlueObeliskElements"}],sa=Object.create(null);ID.filter(function(t){return t.RGBPoints}).filter(function(t){return t.ColorSpace!=="CIELAB"}).forEach(function(t){sa[t.Name]=t});var ua=Object.keys(sa);ua.sort();function jD(t){return sa[t]}function zD(t){!t.RGBPoints||t.ColorSpace==="CIELAB"||(sa[t.Name]||(ua.push(t.Name),ua.sort()),sa[t.Name]=t)}function WD(t){var e=ua.indexOf(t);e>-1&&ua.splice(e,1),delete sa[t]}var yu={addPreset:zD,removePresetByName:WD,getPresetByName:jD,rgbPresetNames:ua},HD={RGB:0,HSV:1,LAB:2,DIVERGING:3},$D={LINEAR:0,LOG10:1},mu={ColorSpace:HD,Scale:$D};function Xh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function KD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xh(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xh(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var or=mu.ColorSpace,qh=mu.Scale,Vo=co.ScalarMappingTarget,XD=B.vtkDebugMacro,Nr=B.vtkErrorMacro,qD=B.vtkWarningMacro;function Yh(t,e){var n=t[0],r=t[1],a=t[2],i=Math.sqrt(n*n+r*r+a*a),o=i>.001?Math.acos(n/i):0,s=o>.001?Math.atan2(a,r):0;e[0]=i,e[1]=o,e[2]=s}function YD(t,e){var n=t[0],r=t[1],a=t[2];e[0]=n*Math.cos(r),e[1]=n*Math.sin(r)*Math.cos(a),e[2]=n*Math.sin(r)*Math.sin(a)}function Jh(t,e){if(t[0]>=e-.1)return t[2];var n=t[1]*Math.sqrt(e*e-t[0]*t[0])/(t[0]*Math.sin(t[1]));return t[2]>-.3*Math.PI?t[2]+n:t[2]-n}function JD(t,e){var n=t-e;for(n<0&&(n=-n);n>=2*Math.PI;)n-=2*Math.PI;return n>Math.PI&&(n=2*Math.PI-n),n}function Zh(t,e,n,r){var a=[],i=[];pn(e,a),pn(n,i);var o=[],s=[];Yh(a,o),Yh(i,s);var c=t;if(o[1]>.05&&s[1]>.05&&JD(o[2],s[2])>.33*Math.PI){var u=Math.max(o[0],s[0]);u=Math.max(88,u),t<.5?(s[0]=u,s[1]=0,s[2]=0,c*=2):(o[0]=u,o[1]=0,o[2]=0,c=2*c-1)}o[1]<.05&&s[1]>.05?o[2]=Jh(s,o[0]):s[1]<.05&&o[1]>.05&&(s[2]=Jh(o,s[0]));var f=[];f[0]=(1-c)*o[0]+c*s[0],f[1]=(1-c)*o[1]+c*s[1],f[2]=(1-c)*o[2]+c*s[2];var l=[];YD(f,l),Ki(l,r)}function ZD(t,e){e.classHierarchy.push("vtkColorTransferFunction"),t.getSize=function(){return e.nodes.length},t.addRGBPoint=function(n,r,a,i){return t.addRGBPointLong(n,r,a,i,.5,0)},t.addRGBPointLong=function(n,r,a,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(o<0||o>1)return Nr("Midpoint outside range [0.0, 1.0]"),-1;if(s<0||s>1)return Nr("Sharpness outside range [0.0, 1.0]"),-1;e.allowDuplicateScalars||t.removePoint(n);var c={x:n,r,g:a,b:i,midpoint:o,sharpness:s};e.nodes.push(c),t.sortAndUpdateRange();for(var u=0;u<e.nodes.length&&e.nodes[u].x!==n;u++);return u<e.nodes.length?u:-1},t.addHSVPoint=function(n,r,a,i){return t.addHSVPointLong(n,r,a,i,.5,0)},t.addHSVPointLong=function(n,r,a,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,c=[],u=[r,a,i];return ln(u,c),t.addRGBPoint(n,c[0],c[1],c[2],o,s)},t.setNodes=function(n){if(e.nodes!==n){var r=JSON.stringify(e.nodes);e.nodes=n;var a=JSON.stringify(e.nodes);if(t.sortAndUpdateRange()||r!==a)return t.modified(),!0}return!1},t.sortAndUpdateRange=function(){var n=JSON.stringify(e.nodes);e.nodes.sort(function(i,o){return i.x-o.x});var r=JSON.stringify(e.nodes),a=t.updateRange();return!a&&n!==r?(t.modified(),!0):a},t.updateRange=function(){var n=[2];n[0]=e.mappingRange[0],n[1]=e.mappingRange[1];var r=e.nodes.length;return r?(e.mappingRange[0]=e.nodes[0].x,e.mappingRange[1]=e.nodes[r-1].x):(e.mappingRange[0]=0,e.mappingRange[1]=0),n[0]===e.mappingRange[0]&&n[1]===e.mappingRange[1]?!1:(t.modified(),!0)},t.removePoint=function(n){for(var r=0;r<e.nodes.length&&e.nodes[r].x!==n;r++);var a=r;if(r>=e.nodes.length)return-1;var i=!1;return e.nodes.splice(r,1),(r===0||r===e.nodes.length)&&(i=t.updateRange()),i||t.modified(),a},t.movePoint=function(n,r){if(n!==r){t.removePoint(r);for(var a=0;a<e.nodes.length;a++)if(e.nodes[a].x===n){e.nodes[a].x=r,t.sortAndUpdateRange();break}}},t.removeAllPoints=function(){e.nodes=[],t.sortAndUpdateRange()},t.addRGBSegment=function(n,r,a,i,o,s,c,u){t.sortAndUpdateRange();for(var f=0;f<e.nodes.length;)e.nodes[f].x>=n&&e.nodes[f].x<=o?e.nodes.splice(f,1):f++;t.addRGBPointLong(n,r,a,i,.5,0),t.addRGBPointLong(o,s,c,u,.5,0),t.modified()},t.addHSVSegment=function(n,r,a,i,o,s,c,u){var f=[r,a,i],l=[s,c,u],p=[],h=[];ln(f,p),ln(l,h),t.addRGBSegment(n,p[0],p[1],p[2],o,h[0],h[1],h[2])},t.mapValue=function(n){var r=[];return t.getColor(n,r),[Math.floor(255*r[0]+.5),Math.floor(255*r[1]+.5),Math.floor(255*r[2]+.5),255]},t.getColor=function(n,r){if(e.indexedLookup){var a=t.getSize(),i=t.getAnnotatedValueIndexInternal(n);if(i<0||a===0)t.getNanColor(r);else{var o=[];t.getNodeValue(i%a,o),r[0]=o.r,r[1]=o.g,r[2]=o.b}return}t.getTable(n,n,1,r)},t.getRedValue=function(n){var r=[];return t.getColor(n,r),r[0]},t.getGreenValue=function(n){var r=[];return t.getColor(n,r),r[1]},t.getBlueValue=function(n){var r=[];return t.getColor(n,r),r[2]},t.getTable=function(n,r,a,i){var o=Number(n),s=Number(r);if(qi(o)||qi(s)){for(var c=0;c<a;c++)i[c*3+0]=e.nanColor[0],i[c*3+1]=e.nanColor[1],i[c*3+2]=e.nanColor[2];return}var u=0,f=e.nodes.length,l=0,p=0,h=0;f!==0&&(l=e.nodes[f-1].r,p=e.nodes[f-1].g,h=e.nodes[f-1].b);var v=0,y=0,m=0,x=[0,0,0],g=[0,0,0],d=0,C=0,S=[],T=e.scale===qh.LOG10;T&&(T=e.mappingRange[0]>0);var w=0,E=0,D=0;T&&(w=Math.log10(o),E=Math.log10(s));for(var b=0;b<a;b++){var O=3*b;if(a>1?T?(D=w+b/(a-1)*(E-w),v=Math.pow(10,D)):v=o+b/(a-1)*(s-o):T?(D=.5*(w+E),v=Math.pow(10,D)):v=.5*(o+s),e.discretize){var M=e.mappingRange;if(v>=M[0]&&v<=M[1]){var R=e.numberOfValues,N=M[1]-M[0];if(R<=1)v=M[0]+N/2;else{var U=(v-M[0])/N,W=qs(R*U);v=M[0]+W/(R-1)*N}}}for(;u<f&&v>e.nodes[u].x;)u++,u<f&&(y=e.nodes[u-1].x,m=e.nodes[u].x,T&&(y=Math.log10(y),m=Math.log10(m)),x[0]=e.nodes[u-1].r,g[0]=e.nodes[u].r,x[1]=e.nodes[u-1].g,g[1]=e.nodes[u].g,x[2]=e.nodes[u-1].b,g[2]=e.nodes[u].b,d=e.nodes[u-1].midpoint,C=e.nodes[u-1].sharpness,d<1e-5&&(d=1e-5),d>.99999&&(d=.99999));if(v>e.mappingRange[1])i[O]=0,i[O+1]=0,i[O+2]=0,e.clamping&&(t.getUseAboveRangeColor()?(i[O]=e.aboveRangeColor[0],i[O+1]=e.aboveRangeColor[1],i[O+2]=e.aboveRangeColor[2]):(i[O]=l,i[O+1]=p,i[O+2]=h));else if(v<e.mappingRange[0]||Qf(v)&&v<0)i[O]=0,i[O+1]=0,i[O+2]=0,e.clamping&&(t.getUseBelowRangeColor()?(i[O]=e.belowRangeColor[0],i[O+1]=e.belowRangeColor[1],i[O+2]=e.belowRangeColor[2]):f>0&&(i[O]=e.nodes[0].r,i[O+1]=e.nodes[0].g,i[O+2]=e.nodes[0].b));else if(u===0&&(Math.abs(v-o)<1e-6||e.discretize))f>0?(i[O]=e.nodes[0].r,i[O+1]=e.nodes[0].g,i[O+2]=e.nodes[0].b):(i[O]=0,i[O+1]=0,i[O+2]=0);else{var I=0;if(T?I=(D-y)/(m-y):I=(v-y)/(m-y),I<d?I=.5*I/d:I=.5+.5*(I-d)/(1-d),C>.99)if(I<.5){i[O]=x[0],i[O+1]=x[1],i[O+2]=x[2];continue}else{i[O]=g[0],i[O+1]=g[1],i[O+2]=g[2];continue}if(C<.01){if(e.colorSpace===or.RGB)i[O]=(1-I)*x[0]+I*g[0],i[O+1]=(1-I)*x[1]+I*g[1],i[O+2]=(1-I)*x[2]+I*g[2];else if(e.colorSpace===or.HSV){var G=[],F=[];ja(x,G),ja(g,F),e.hSVWrap&&(G[0]-F[0]>.5||F[0]-G[0]>.5)&&(G[0]>F[0]?G[0]-=1:F[0]-=1);var A=[];A[0]=(1-I)*G[0]+I*F[0],A[0]<0&&(A[0]+=1),A[1]=(1-I)*G[1]+I*F[1],A[2]=(1-I)*G[2]+I*F[2],ln(A,S),i[O]=S[0],i[O+1]=S[1],i[O+2]=S[2]}else if(e.colorSpace===or.LAB){var H=[],$=[];pn(x,H),pn(g,$);var X=[];X[0]=(1-I)*H[0]+I*$[0],X[1]=(1-I)*H[1]+I*$[1],X[2]=(1-I)*H[2]+I*$[2],Ki(X,S),i[O]=S[0],i[O+1]=S[1],i[O+2]=S[2]}else e.colorSpace===or.DIVERGING?(Zh(I,x,g,S),i[O]=S[0],i[O+1]=S[1],i[O+2]=S[2]):Nr("ColorSpace set to invalid value.",e.colorSpace);continue}I<.5?I=.5*Math.pow(I*2,1+10*C):I>.5&&(I=1-.5*Math.pow((1-I)*2,1+10*C));var Y=I*I,q=Y*I,J=2*q-3*Y+1,ne=-2*q+3*Y,Q=q-2*Y+I,te=q-Y,L=void 0,_=void 0;if(e.colorSpace===or.RGB)for(var V=0;V<3;V++)L=g[V]-x[V],_=(1-C)*L,i[O+V]=J*x[V]+ne*g[V]+Q*_+te*_;else if(e.colorSpace===or.HSV){var k=[],P=[];ja(x,k),ja(g,P),e.hSVWrap&&(k[0]-P[0]>.5||P[0]-k[0]>.5)&&(k[0]>P[0]?k[0]-=1:P[0]-=1);for(var j=[],z=0;z<3;z++)L=P[z]-k[z],_=(1-C)*L,j[z]=J*k[z]+ne*P[z]+Q*_+te*_,z===0&&j[z]<0&&(j[z]+=1);ln(j,S),i[O]=S[0],i[O+1]=S[1],i[O+2]=S[2]}else if(e.colorSpace===or.LAB){var Z=[],re=[];pn(x,Z),pn(g,re);for(var ie=[],oe=0;oe<3;oe++)L=re[oe]-Z[oe],_=(1-C)*L,ie[oe]=J*Z[oe]+ne*re[oe]+Q*_+te*_;Ki(ie,S),i[O]=S[0],i[O+1]=S[1],i[O+2]=S[2]}else e.colorSpace===or.DIVERGING?(Zh(I,x,g,S),i[O]=S[0],i[O+1]=S[1],i[O+2]=S[2]):Nr("ColorSpace set to invalid value.");for(var he=0;he<3;he++)i[O+he]=i[O+he]<0?0:i[O+he],i[O+he]=i[O+he]>1?1:i[O+he]}}},t.getUint8Table=function(n,r,a){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t.getMTime()<=e.buildTime&&e.tableSize===a&&e.tableWithAlpha!==i)return e.table;if(e.nodes.length===0)return Nr("Attempting to lookup a value with no points in the function"),e.table;var o=i?4:3;(e.tableSize!==a||e.tableWithAlpha!==i)&&(e.table=new Uint8Array(a*o),e.tableSize=a,e.tableWithAlpha=i);var s=[];t.getTable(n,r,a,s);for(var c=0;c<a;c++)e.table[c*o+0]=Math.floor(s[c*3+0]*255+.5),e.table[c*o+1]=Math.floor(s[c*3+1]*255+.5),e.table[c*o+2]=Math.floor(s[c*3+2]*255+.5),i&&(e.table[c*o+3]=255);return e.buildTime.modified(),e.table},t.buildFunctionFromArray=function(n){t.removeAllPoints();for(var r=n.getNumberOfComponents(),a=0;a<n.getNumberOfTuples();a++)switch(r){case 3:{e.nodes.push({x:a,r:n.getComponent(a,0),g:n.getComponent(a,1),b:n.getComponent(a,2),midpoint:.5,sharpness:0});break}case 4:{e.nodes.push({x:n.getComponent(a,0),r:n.getComponent(a,1),g:n.getComponent(a,2),b:n.getComponent(a,3),midpoint:.5,sharpness:0});break}case 5:{e.nodes.push({x:a,r:n.getComponent(a,0),g:n.getComponent(a,1),b:n.getComponent(a,2),midpoint:n.getComponent(a,4),sharpness:n.getComponent(a,5)});break}case 6:{e.nodes.push({x:n.getComponent(a,0),r:n.getComponent(a,1),g:n.getComponent(a,2),b:n.getComponent(a,3),midpoint:n.getComponent(a,4),sharpness:n.getComponent(a,5)});break}}t.sortAndUpdateRange()},t.buildFunctionFromTable=function(n,r,a,i){var o=0;t.removeAllPoints(),a>1&&(o=(r-n)/(a-1));for(var s=0;s<a;s++){var c={x:n+o*s,r:i[s*3],g:i[s*3+1],b:i[s*3+2],sharpness:0,midpoint:.5};e.nodes.push(c)}t.sortAndUpdateRange()},t.getNodeValue=function(n,r){return n<0||n>=e.nodes.length?(Nr("Index out of range!"),-1):(r[0]=e.nodes[n].x,r[1]=e.nodes[n].r,r[2]=e.nodes[n].g,r[3]=e.nodes[n].b,r[4]=e.nodes[n].midpoint,r[5]=e.nodes[n].sharpness,1)},t.setNodeValue=function(n,r){if(n<0||n>=e.nodes.length)return Nr("Index out of range!"),-1;var a=e.nodes[n].x;return e.nodes[n].x=r[0],e.nodes[n].r=r[1],e.nodes[n].g=r[2],e.nodes[n].b=r[3],e.nodes[n].midpoint=r[4],e.nodes[n].sharpness=r[5],a!==r[0]?t.sortAndUpdateRange():t.modified(),1},t.getNumberOfAvailableColors=function(){return e.indexedLookup&&t.getSize()?t.getSize():e.tableSize?e.tableSize:16777216},t.getIndexedColor=function(n,r){var a=t.getSize();if(a>0&&n>=0){var i=[];t.getNodeValue(n%a,i);for(var o=0;o<3;++o)r[o]=i[o+1];r[3]=1;return}t.getNanColor(r),r[3]=1},t.fillFromDataPointer=function(n,r){if(!(n<=0||!r)){t.removeAllPoints();for(var a=0;a<n;a++)t.addRGBPoint(r[a*4],r[a*4+1],r[a*4+2],r[a*4+3])}},t.setMappingRange=function(n,r){var a=[n,r],i=t.getRange();if(!(i[1]===a[1]&&i[0]===a[0])){if(a[1]===a[0]){Nr("attempt to set zero width color range");return}for(var o=(a[1]-a[0])/(i[1]-i[0]),s=a[0]-i[0]*o,c=0;c<e.nodes.length;++c)e.nodes[c].x=e.nodes[c].x*o+s;e.mappingRange[0]=a[0],e.mappingRange[1]=a[1],t.modified()}},t.adjustRange=function(n){var r=t.getRange(),a=[];r[0]<n[0]?(t.getColor(n[0],a),t.addRGBPoint(n[0],a[0],a[1],a[2])):(t.getColor(r[0],a),t.addRGBPoint(n[0],a[0],a[1],a[2])),r[1]>n[1]?(t.getColor(n[1],a),t.addRGBPoint(n[1],a[0],a[1],a[2])):(t.getColor(r[1],a),t.addRGBPoint(n[1],a[0],a[1],a[2])),t.sortAndUpdateRange();for(var i=0;i<e.nodes.length;)e.nodes[i].x>=n[0]&&e.nodes[i].x<=n[1]?e.nodes.splice(i,1):++i;return 1},t.estimateMinNumberOfSamples=function(n,r){var a=t.findMinimumXDistance();return Math.ceil((r-n)/a)},t.findMinimumXDistance=function(){if(e.nodes.length<2)return-1;for(var n=Number.MAX_VALUE,r=0;r<e.nodes.length-1;r++){var a=e.nodes[r+1].x-e.nodes[r].x;a<n&&(n=a)}return n},t.mapScalarsThroughTable=function(n,r,a,i){if(t.getSize()===0){XD("Transfer Function Has No Points!");return}e.indexedLookup?t.mapDataIndexed(n,r,a,i):t.mapData(n,r,a,i)},t.mapData=function(n,r,a,i){if(t.getSize()===0){qD("Transfer Function Has No Points!");return}var o=Math.floor(t.getAlpha()*255+.5),s=n.getNumberOfTuples(),c=n.getNumberOfComponents(),u=r.getData(),f=n.getData(),l=[];if(a===Vo.RGBA)for(var p=0;p<s;p++){var h=f[p*c+i];t.getColor(h,l),u[p*4]=Math.floor(l[0]*255+.5),u[p*4+1]=Math.floor(l[1]*255+.5),u[p*4+2]=Math.floor(l[2]*255+.5),u[p*4+3]=o}if(a===Vo.RGB)for(var v=0;v<s;v++){var y=f[v*c+i];t.getColor(y,l),u[v*3]=Math.floor(l[0]*255+.5),u[v*3+1]=Math.floor(l[1]*255+.5),u[v*3+2]=Math.floor(l[2]*255+.5)}if(a===Vo.LUMINANCE)for(var m=0;m<s;m++){var x=f[m*c+i];t.getColor(x,l),u[m]=Math.floor(l[0]*76.5+l[1]*150.45+l[2]*28.05+.5)}if(a===Vo.LUMINANCE_ALPHA)for(var g=0;g<s;g++){var d=f[g*c+i];t.getColor(d,l),u[g*2]=Math.floor(l[0]*76.5+l[1]*150.45+l[2]*28.05+.5),u[g*2+1]=o}},t.applyColorMap=function(n){var r=JSON.stringify(e.colorSpace);n.ColorSpace&&(e.colorSpace=or[n.ColorSpace.toUpperCase()],e.colorSpace===void 0&&(Nr("ColorSpace ".concat(n.ColorSpace," not supported, using RGB instead")),e.colorSpace=or.RGB));var a=r!==JSON.stringify(e.colorSpace),i=a||JSON.stringify(e.nanColor);if(n.NanColor)for(e.nanColor=[].concat(n.NanColor);e.nanColor.length<4;)e.nanColor.push(1);a=a||i!==JSON.stringify(e.nanColor);var o=a||JSON.stringify(e.nodes);if(n.RGBPoints){var s=n.RGBPoints.length;e.nodes=[];for(var c=.5,u=0,f=0;f<s;f+=4)e.nodes.push({x:n.RGBPoints[f],r:n.RGBPoints[f+1],g:n.RGBPoints[f+2],b:n.RGBPoints[f+3],midpoint:c,sharpness:u})}var l=t.sortAndUpdateRange(),p=!l&&(a||o!==JSON.stringify(e.nodes));return p&&t.modified(),l||p}}var QD={clamping:!0,colorSpace:or.RGB,hSVWrap:!0,scale:qh.LINEAR,nanColor:null,belowRangeColor:null,aboveRangeColor:null,useAboveRangeColor:!1,useBelowRangeColor:!1,allowDuplicateScalars:!1,table:null,tableSize:0,buildTime:null,nodes:null,discretize:!1,numberOfValues:256};function Qh(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,QD,n),co.extend(t,e,n),e.table=[],e.nodes=[],e.nanColor=[.5,0,0,1],e.belowRangeColor=[0,0,0,1],e.aboveRangeColor=[1,1,1,1],e.buildTime={},B.obj(e.buildTime),B.get(t,e,["buildTime","mappingRange"]),B.setGet(t,e,["useAboveRangeColor","useBelowRangeColor","colorSpace","discretize","numberOfValues"]),B.setArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"],4),B.getArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"]),ZD(t,e)}var eO=B.newInstance(Qh,"vtkColorTransferFunction"),xu=KD({newInstance:eO,extend:Qh},mu);const ev={id:{type:String},colorMapPreset:{type:String,default:"erdc_rainbow_bright"},colorDataRange:{type:Array,default:()=>[0,1]},actor:{type:Object},mapper:{type:Object},property:{type:Object}};let tO=class{constructor(e,n,r,a){this.refs={presetName:n,colorRange:r},this.view=a,this.actor=mr.newInstance(),this.lookupTable=xu.newInstance(),this.mapper=e({lookupTable:this.lookupTable,useLookupTableScalarRange:!0}),this.actor.setMapper(this.mapper),this.property=this.actor.getProperty()}updateColorMapPreset(){const e=yu.getPresetByName(this.refs.presetName.value);this.lookupTable.applyColorMap(e),this.updateColorDataRange()}updateColorDataRange(){this.lookupTable.setMappingRange(...this.refs.colorRange.value),this.lookupTable.updateRange(),this.dataChanged()}dataChanged(){this.view&&ce.nextTick(this.view.render)}};function tv(t,e){const n=ce.inject("view"),{colorMapPreset:r,colorDataRange:a}=ce.toRefs(t),i=new tO(e,r,a,n),o=ce.ref(i.mapper);ce.provide("representation",i),ce.provide("downstream",o),ce.onMounted(()=>{["actor","mapper","property"].forEach(s=>{i[s].set(t[s])}),i.actor.set({representationId:t.id},!0),i.updateColorMapPreset(),n.renderer.addActor(i.actor)}),ce.onBeforeUnmount(()=>{var s;(s=n==null?void 0:n.renderer)==null||s.removeActor(i.actor),i.actor.delete(),i.actor=null,i.mapper.delete(),i.mapper=null,i.lookupTable.delete(),i.lookupTable=null}),["actor","mapper","property"].forEach(s=>{ce.watch(()=>t[s],c=>{i[s].set(c)&&i.dataChanged()})}),["colorMapPreset","colorDataRange"].forEach(s=>{ce.watch(()=>t[s],()=>i[`update${Da(s)}`]())}),ce.watch(()=>t.id,s=>i.actor.set({representationId:s},!0))}const rO={props:ev,setup(t){tv(t,Cr.newInstance)},template:'<div class="vtk-geometry-representation"><slot></slot></div>'};var nO={DIRECTION:0,ROTATION:1,MATRIX:2},aO={SCALE_BY_CONSTANT:0,SCALE_BY_MAGNITUDE:1,SCALE_BY_COMPONENTS:2},Cu={OrientationModes:nO,ScaleModes:aO};function rv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function iO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rv(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var zr=Cu.OrientationModes,Rr=Cu.ScaleModes,oO=B.vtkErrorMacro;function sO(t,e){e.classHierarchy.push("vtkGlyph3DMapper"),t.getOrientationModeAsString=function(){return B.enumToString(zr,e.orientationMode)},t.setOrientationModeToDirection=function(){return t.setOrientationMode(zr.DIRECTION)},t.setOrientationModeToRotation=function(){return t.setOrientationMode(zr.ROTATION)},t.setOrientationModeToMatrix=function(){return t.setOrientationMode(zr.MATRIX)},t.getOrientationArrayData=function(){var n=t.getInputData(0);return!n||!n.getPointData()?null:e.orientationArray?n.getPointData().getArray(e.orientationArray):n.getPointData().getVectors()},t.getScaleModeAsString=function(){return B.enumToString(Rr,e.scaleMode)},t.setScaleModeToScaleByMagnitude=function(){return t.setScaleMode(Rr.SCALE_BY_MAGNITUDE)},t.setScaleModeToScaleByComponents=function(){return t.setScaleMode(Rr.SCALE_BY_COMPONENTS)},t.setScaleModeToScaleByConstant=function(){return t.setScaleMode(Rr.SCALE_BY_CONSTANT)},t.getScaleArrayData=function(){var n=t.getInputData(0);return!n||!n.getPointData()?null:e.scaleArray?n.getPointData().getArray(e.scaleArray):n.getPointData().getScalars()},t.getBounds=function(){var n=t.getInputData(0),r=t.getInputData(1);return!n||!r?hn():(t.buildArrays(),e.bounds)},t.buildArrays=function(){var n=t.getInputData(0),r=t.getInputData(1);if(e.buildTime.getMTime()<r.getMTime()||e.buildTime.getMTime()<n.getMTime()||e.buildTime.getMTime()<t.getMTime()){var a=n.getPoints().getData(),i=t.getScaleArrayData(),o=null,s=0;i&&(o=i.getData(),s=i.getNumberOfComponents()),e.scaling&&i&&e.scaleMode===Rr.SCALE_BY_COMPONENTS&&i.getNumberOfComponents()!==3&&(oO("Cannot scale by components since scale array does not have 3 components."),i=null);var c=r.getBounds(),u=[];Ve.getCorners(c,u),e.bounds[0]=Ve.INIT_BOUNDS[0],e.bounds[1]=Ve.INIT_BOUNDS[1],e.bounds[2]=Ve.INIT_BOUNDS[2],e.bounds[3]=Ve.INIT_BOUNDS[3],e.bounds[4]=Ve.INIT_BOUNDS[4],e.bounds[5]=Ve.INIT_BOUNDS[5];var f=new Float64Array(3),l=t.getOrientationArrayData(),p=Oe(new Float64Array(16)),h=[],v=[],y=a.length/3;e.matrixArray=new Float32Array(16*y);var m=e.matrixArray.buffer;e.normalArray=new Float32Array(9*y);for(var x=e.normalArray.buffer,g=[],d=0;d<y;++d){var C=new Float32Array(m,d*64,16);if(h[0]=a[d*3],h[1]=a[d*3+1],h[2]=a[d*3+2],rt(C,p,h),l){var S=[];switch(l.getTuple(d,S),e.orientationMode){case zr.MATRIX:{var T=[].concat(ve(S.slice(0,3)),[0],ve(S.slice(3,6)),[0],ve(S.slice(6,9)),[0,0,0,0,1]);Ke(C,C,T);break}case zr.ROTATION:xi(C,C,S[2]),mi(C,C,S[0]),da(C,C,S[1]);break;case zr.DIRECTION:if(S[1]===0&&S[2]===0)S[0]<0&&da(C,C,3.1415926);else{var w=Bt(S),E=[];E[0]=(S[0]+w)/2,E[1]=S[1]/2,E[2]=S[2]/2,Tt(C,C,3.1415926,E)}break}}if(e.scaling){if(v[0]=e.scaleFactor,v[1]=e.scaleFactor,v[2]=e.scaleFactor,i)switch(e.scaleMode){case Rr.SCALE_BY_MAGNITUDE:for(var D=0;D<s;++D)g[D]=o[d*s+D];v[0]*=Bt(g,s),v[1]=v[0],v[2]=v[0];break;case Rr.SCALE_BY_COMPONENTS:for(var b=0;b<s;++b)g[b]=o[d*s+b];v[0]*=g[0],v[1]*=g[1],v[2]*=g[2];break;case Rr.SCALE_BY_CONSTANT:}v[0]===0&&(v[0]=1e-10),v[1]===0&&(v[1]=1e-10),v[2]===0&&(v[2]=1e-10),Xr(C,C,v)}for(var O=0;O<8;++O)be(f,u[O],C),f[0]<e.bounds[0]&&(e.bounds[0]=f[0]),f[1]<e.bounds[2]&&(e.bounds[2]=f[1]),f[2]<e.bounds[4]&&(e.bounds[4]=f[2]),f[0]>e.bounds[1]&&(e.bounds[1]=f[0]),f[1]>e.bounds[3]&&(e.bounds[3]=f[1]),f[2]>e.bounds[5]&&(e.bounds[5]=f[2]);var M=new Float32Array(x,d*36,9);va(M,C),ga(M,M),as(M,M)}var R=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;e.useLookupTableScalarRange||t.getLookupTable().setRange(e.scalarRange[0],e.scalarRange[1]),e.colorArray=null;var N=t.getLookupTable();N&&R&&(N.build(),e.colorArray=N.mapScalars(R,e.colorMode,0)),e.buildTime.modified()}},t.getPrimitiveCount=function(){var n=t.getInputData(1),r=t.getInputData().getPoints().getNumberOfValues()/3,a={points:r*n.getPoints().getNumberOfValues()/3,verts:r*(n.getVerts().getNumberOfValues()-n.getVerts().getNumberOfCells()),lines:r*(n.getLines().getNumberOfValues()-2*n.getLines().getNumberOfCells()),triangles:r*(n.getPolys().getNumberOfValues()-3*n.getLines().getNumberOfCells())};return a}}var uO={orient:!0,orientationMode:zr.DIRECTION,orientationArray:null,scaling:!0,scaleFactor:1,scaleMode:Rr.SCALE_BY_MAGNITUDE,scaleArray:null,matrixArray:null,normalArray:null,colorArray:null};function nv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,uO,n),Cr.extend(t,e,n),B.algo(t,e,2,0),e.buildTime={},B.obj(e.buildTime,{mtime:0}),e.boundsTime={},B.obj(e.boundsTime,{mtime:0}),B.setGet(t,e,["orient","orientationMode","orientationArray","scaleArray","scaleFactor","scaleMode","scaling"]),B.get(t,e,["colorArray","matrixArray","normalArray","buildTime"]),sO(t,e)}var cO=B.newInstance(nv,"vtkGlyph3DMapper"),av=iO({newInstance:cO,extend:nv},Cu);const fO={props:ev,setup(t){tv(t,av.newInstance)},template:'<div class="vtk-glyph-representation"><slot></slot></div>'},lO=[Array,Float32Array,Float64Array,Object],Bo=[Array,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Object],iv={props:{port:{type:Number,default:0},points:{type:lO},verts:{type:Bo},lines:{type:Bo},polys:{type:Bo},strips:{type:Bo},connectivity:{type:String,default:"manual"}},setup(t){const e=ce.computed(()=>t.points&&t.points.length>196608?Uint32Array:Uint16Array),n=ce.inject("downstream"),r=ce.inject("representation"),a=Ye.newInstance(),i=on(()=>{if(t.connectivity!=="manual"){const p=t.points.length/3;switch(t.connectivity){case"points":{const h=new Uint32Array(p+1);h[0]=p;for(let v=0;v<p;v++)h[v+1]=v;a.getVerts().setData(h)}break;case"triangles":{const h=new Uint32Array(p+p/3);let v=0;for(let y=0;y<p;y+=3)h[v++]=3,h[v++]=y+0,h[v++]=y+1,h[v++]=y+2;a.getPolys().setData(h)}break;case"strips":{const h=new Uint32Array(p+1);h[0]=p;for(let v=0;v<p;v++)h[v+1]=v;a.getStrips().setData(h)}break}}a.modified(),r&&r.dataChanged()},1);function o(p,h,v,y){const m=$h(p,v);m&&(a[h]().setData(m,y||1),i())}const{points:s,verts:c,lines:u,polys:f,strips:l}=ce.toRefs(t);ce.watch(s,p=>o(p,"getPoints",Float64Array,3)),ce.watch(c,p=>o(p,"getVerts",e.value)),ce.watch(u,p=>o(p,"getLines",e.value)),ce.watch(f,p=>o(p,"getPolys",e.value)),ce.watch(l,p=>o(p,"getStrips",e.value)),ce.watch(n,()=>{n.value&&n.value.setInputData(a,t.port)}),ce.onMounted(()=>{o(t.points,"getPoints",Float64Array,3),o(t.verts,"getVerts",e.value),o(t.lines,"getLines",e.value),o(t.polys,"getPolys",e.value),o(t.strips,"getStrips",e.value),n.value&&n.value.setInputData(a,t.port)}),ce.onBeforeUnmount(()=>{a.delete()}),ce.provide("dataset",a)},template:'<div class="vtk-polydata"><slot></slot></div>'},ov={setup(){const t=ce.inject("dataset");ce.provide("fields",t==null?void 0:t.getPointData())},template:'<div class="vtk-point-data"><slot></slot></div>'},pO={props:{port:{type:Number,default:0},state:{type:Object}},components:{VtkPolydata:iv,VtkCellData:Hh,VtkPointData:ov,VtkDataArray:Kh},template:`
    <vtk-polydata v-if="state" v-bind="state.mesh">
      <vtk-point-data>
        <vtk-data-array
          v-if="state.field && state.field.location == 'PointData'"
          registration="setScalars"
          v-bind="state.field"
        />
        <vtk-data-array
          v-if="state.pointArrays"
          v-for="array, idx in state.pointArrays"
          :key="array.name"
          v-bind="array"
        />
      </vtk-point-data>
      <vtk-cell-data>
        <vtk-data-array
          v-if="state.field && state.field.location == 'CellData'"
          registration="setScalars"
          v-bind="state.field"
        />
        <vtk-data-array
          v-if="state.cellArrays"
          v-for="array, idx in state.cellArrays"
          :key="array.name"
          v-bind="array"
        />
      </vtk-cell-data>
    </vtk-polydata>
  `},hO={props:{port:{type:Number,default:0},vtkClass:{type:String,default:""},url:{type:String},parseAsText:{type:String},parseAsArrayBuffer:{type:String},renderOnUpdate:{type:Boolean,default:!1},resetCameraOnUpdate:{type:Boolean,default:!1}},setup(t){const e=ce.ref(null),n=ce.inject("downstream"),r=ce.inject("representation"),a=ce.inject("view");function i(){e.value&&(r&&r.dataChanged(),t.resetCameraOnUpdate&&a.resetCamera(),t.renderOnUpdate&&a.render())}const{vtkClass:o,url:s,parseAsText:c,parseAsArrayBuffer:u}=ce.toRefs(t);ce.watch(o,f=>{let l=e.value;e.value=wt({vtkClass:f}),n.setInputConnection(e.value.getOutputPort(),t.port),l&&l.delete()}),ce.watch(s,async f=>{await e.value.setUrl(f),i()}),ce.watch(c,f=>{e.value.parseAsText(f),i()}),ce.watch(u,f=>{e.value.parseAsArrayBuffer(aa.toArrayBuffer(f)),i()}),ce.onMounted(async()=>{let f=!1;e.value=wt({vtkClass:t.vtkClass}),n.value.setInputConnection(e.value.getOutputPort(),t.port),t.url&&(await e.value.setUrl(t.url),f=!0),t.parseAsText&&(e.value.parseAsText(t.parseAsText),f=!0),t.parseAsArrayBuffer&&(e.value.parseAsArrayBuffer(aa.toArrayBuffer(t.parseAsArrayBuffer)),f=!0),f&&i()}),ce.onBeforeUnmount(()=>{e.value&&(e.value.delete(),e.value=null)})}};var vO=B.vtkErrorMacro;function gO(t,e){e.classHierarchy.push("vtkCanvasView");function n(){e._renderable&&(e.canvas.setAttribute("width",e.size[0]),e.canvas.setAttribute("height",e.size[1])),e.viewStream&&e.viewStream.setSize(e.size[0],e.size[1]),e.canvas.style.display=e.useOffScreen?"none":"block",e.el&&(e.el.style.cursor=e.cursorVisibility?e.cursor:"none")}t.onModified(n),t.setContainer=function(r){e.el&&e.el!==r&&(e.canvas.parentNode!==e.el&&vO("Error: canvas parent node does not match container"),e.el.removeChild(e.canvas),e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)),e.el!==r&&(e.el=r,e.el&&e.el.appendChild(e.canvas),e.useBackgroundImage&&e.el.appendChild(e.bgImage),t.modified())},t.setBackgroundImage=function(r){e.bgImage.src=r.src},t.setUseBackgroundImage=function(r){e.useBackgroundImage=r,e.useBackgroundImage&&e.el&&!e.el.contains(e.bgImage)?e.el.appendChild(e.bgImage):!e.useBackgroundImage&&e.el&&e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)},t.setViewStream=function(r){return e.viewStream===r?!1:(e.subscription&&(e.subscription.unsubscribe(),e.subscription=null),e.viewStream=r,e.viewStream&&(t.setUseBackgroundImage(!0),e.subscription=e.viewStream.onImageReady(function(a){return t.setBackgroundImage(a.image)}),e.viewStream.setSize(e.size[0],e.size[1]),e.viewStream.invalidateCache(),e.viewStream.render(),t.modified()),!0)},t.delete=B.chain(t.setViewStream,t.delete),e._renderable=t,e._renderers=[t],t.traverseAllPasses=function(){},t.isInViewport=function(){return!0},t.getInteractive=function(){return!0}}var dO={canvas:null,size:[300,300],cursorVisibility:!0,cursor:"pointer",useOffScreen:!1,useBackgroundImage:!1};function sv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dO,n),e.canvas=document.createElement("canvas"),e.canvas.style.width="100%",e.bgImage=new Image,e.bgImage.style.position="absolute",e.bgImage.style.left="0",e.bgImage.style.top="0",e.bgImage.style.width="100%",e.bgImage.style.height="100%",e.bgImage.style.zIndex="-1",B.obj(t,e,n),B.get(t,e,["useBackgroundImage","_renderable"]),B.setGet(t,e,["canvas","cursor","useOffScreen","interactor"]),B.setGetArray(t,e,["size"],2),B.getArray(t,e,["_renderers"]),B.moveToProtected(t,e,["renderable","renderers"]),gO(t,e)}var yO=B.newInstance(sv,"vtkCanvasView"),mO={newInstance:yO,extend:sv};function xO(t){return{subscribeToImageStream:function(n){return t.subscribe("viewport.image.push.subscription",n)},unsubscribeToImageStream:function(n){return t.unsubscribe(n)},registerView:function(n){return t.call("viewport.image.push.observer.add",[n])},unregisterView:function(n){return t.call("viewport.image.push.observer.remove",[n])},enableView:function(n,r){return t.call("viewport.image.push.enabled",[n,r])},render:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{size:[400,400],view:-1};return t.call("viewport.image.push",[n])},resetCamera:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;return t.call("viewport.camera.reset",[n])},invalidateCache:function(n){return t.call("viewport.image.push.invalidate.cache",[n])},setQuality:function(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return t.call("viewport.image.push.quality",[n,r,a])},setSize:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:400,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:400;return t.call("viewport.image.push.original.size",[n,r,a])},setServerAnimationFPS:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:30;return t.call("viewport.image.animation.fps.max",[n])},getServerAnimationFPS:function(){return t.call("viewport.image.animation.fps.get",[])},startAnimation:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;return t.call("viewport.image.animation.start",[n])},stopAnimation:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;return t.call("viewport.image.animation.stop",[n])},updateCamera:function(n,r,a,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return t.call("viewport.camera.update",[n??-1,r,a,i,o])},updateCameraParameters:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t.call("viewport.camera.update.params",[n,r,a])}}}function CO(t,e){e.classHierarchy.push("vtkViewStream"),e.imageDecodingPool=[new Image,new Image],e.eventPool=[],e.nextPoolImageIndex=0,e.urlToRevoke=[],e.activeURL=null,e.fps=[],e.lastTime=Date.now(),e.lastImageEvent=null;function n(i){var o=Number(this.dataset.id);t.invokeImageReady(e.eventPool[o])}function r(){for(var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2;e.imageDecodingPool.length<i;)e.imageDecodingPool.push(new Image);for(var o=0;o<e.imageDecodingPool.length;o++)e.imageDecodingPool[o].dataset.id=o,e.imageDecodingPool[o].onload=n}function a(i){e.eventPool[e.nextPoolImageIndex]=i,i.image=e.imageDecodingPool[e.nextPoolImageIndex++],e.nextPoolImageIndex%=e.imageDecodingPool.length,i.image.src=i.url}t.pushCamera=function(){var i=e.camera.getReferenceByName("focalPoint"),o=e.camera.getReferenceByName("viewUp"),s=e.camera.getReferenceByName("position"),c=e.camera.getParallelProjection(),u=e.camera.getViewAngle(),f=e.camera.getParallelScale(),l=null;return e.useCameraParameters?l=e.protocol.updateCameraParameters(e.viewId,{focalPoint:i,viewUp:o,position:s,parallelProjection:c,viewAngle:u,parallelScale:f},!1):l=e.protocol.updateCamera(e.viewId,i,o,s,!1),e.isAnimating&&setTimeout(t.pushCamera,1e3/e.cameraUpdateRate),l},t.invalidateCache=function(){return e.protocol.invalidateCache(e.viewId)},t.render=function(){return e.protocol.render({view:e.viewId,size:e.size})},t.resetCamera=function(){return e.protocol.resetCamera(e.viewId)},t.startAnimation=function(){return e.protocol.startAnimation(e.viewId)},t.stopAnimation=function(){return e.protocol.stopAnimation(e.viewId)},t.setSize=function(i,o){var s=!1;return(e.size[0]!==i||e.size[1]!==o)&&(e.size=[i,o],s=!0),s&&(t.modified(),e.protocol)?e.protocol.setSize(e.viewId,i,o):Promise.resolve(!1)},t.startInteraction=function(){var i=[e.protocol.setQuality(e.viewId,e.interactiveQuality,e.interactiveRatio)];return e.camera&&(i.push(t.startAnimation()),e.isAnimating=!0,i.push(t.pushCamera())),Promise.all(i)},t.endInteraction=function(){var i=[];return i.push(e.protocol.setQuality(e.viewId,e.stillQuality,e.stillRatio)),e.camera?(i.push(t.stopAnimation()),e.isAnimating=!1,i.push(t.pushCamera())):i.push(t.render()),Promise.all(i)},t.setViewId=function(i){return e.viewId===i||!e.protocol?!1:(e.viewId&&e.protocol.unregisterView(e.viewId),e.viewId=i,e.viewId&&e.protocol.registerView(e.viewId).then(function(o){var s=o.viewId;e.viewId=s}),!0)},t.processMessage=function(i){if(i.id==e.viewId){var o=new Blob([i.image],{type:e.mimeType});if(e.activeURL)for(e.urlToRevoke.push(e.activeURL),e.activeURL=null;e.urlToRevoke.length>60;){var s=e.urlToRevoke.shift();window.URL.revokeObjectURL(s)}e.activeURL=URL.createObjectURL(o);var c=Date.now(),u=Math.floor(1e4/(c-e.lastTime))/10;for(e.fps.push(u),e.lastTime=c,e.lastImageEvent={url:e.activeURL,fps:u,metadata:{size:i.size,id:i.id,memory:i.memsize,workTime:i.workTime}},e.decodeImage?a(e.lastImageEvent):t.invokeImageReady(e.lastImageEvent);e.fps.length>e.fpsWindowSize;)e.fps.shift()}},t.delete=B.chain(function(){for(e.unregisterViewStream(t),t.setViewId(null);e.urlToRevoke.length;)window.URL.revokeObjectURL(e.urlToRevoke.pop())},t.delete),r()}var SO={cameraUpdateRate:30,decodeImage:!0,fpsWindowSize:250,interactiveQuality:80,interactiveRatio:1,isAnimating:!1,mimeType:"image/jpeg",size:[-1,-1],stillQuality:100,stillRatio:1,useCameraParameters:!1,viewId:null};function uv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,SO,n),B.obj(t,e),B.event(t,e,"ImageReady"),B.get(t,e,["viewId","size","fps","lastImageEvent"]),B.setGet(t,e,["camera","cameraUpdateRate","decodeImage","fpsWindowSize","interactiveQuality","interactiveRatio","stillQuality","stillRatio","useCameraParameters"]),CO(t,e),Object.assign(t,e.sharedAPI)}var TO=B.newInstance(uv,"vtkViewStream"),wO={newInstance:TO,extend:uv};function EO(t,e){e.classHierarchy.push("vtkImageStream");function n(r){var a=r[0];if(!(!a||!a.image))for(var i=0;i<e.viewStreams.length;i++)e.viewStreams[i].processMessage(a)}t.setServerAnimationFPS=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:30,a=!1;return e.serverAnimationFPS!==r&&(e.serverAnimationFPS=r,a=!0),e.protocol?(a&&t.modified(),e.protocol.setServerAnimationFPS(r)):Promise.resolve(!0)},t.connect=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xO;e.connected||!r||!a||(e.protocol=a(r),e.protocol.subscribeToImageStream(n).promise.then(function(i){e.renderTopicSubscription=i,e.connected=!0}).catch(function(i){e.connected=!1,console.error(i)}))},t.disconnect=function(){e.protocol&&e.connected&&e.renderTopicSubscription&&(e.protocol.unsubscribeToImageStream(e.renderTopicSubscription),e.renderTopicSubscription=null),e.connected=!1},t.registerViewStream=function(r){e.viewStreams.push(r)},t.unregisterViewStream=function(r){e.viewStreams=e.viewStreams.filter(function(a){return a!==r})},t.createViewStream=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"-1",a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[400,400],i=t.setServerAnimationFPS,o=t.getServerAnimationFPS,s=t.unregisterViewStream,c=wO.newInstance({protocol:e.protocol,unregisterViewStream:s,sharedAPI:{setServerAnimationFPS:i,getServerAnimationFPS:o}});return c.setViewId(r),c.setSize(a[0],a[1]),t.registerViewStream(c),c},t.delete=B.chain(function(){for(;e.viewStreams.length;)e.viewStreams.pop().delete();t.disconnect()},t.delete)}var DO={viewStreams:[],serverAnimationFPS:-1};function cv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,DO,n),B.obj(t,e),B.get(t,e,["serverAnimationFPS","protocol"]),EO(t,e)}var OO=B.newInstance(cv,"vtkImageStream"),_O={newInstance:OO,extend:cv},bO={Unknown:0,LeftController:1,RightController:2},MO={Unknown:0,Trigger:1,TrackPad:2,Grip:3,Thumbstick:4,A:5,B:6,ApplicationMenu:7},NO={Unknown:0,TouchpadX:1,TouchpadY:2,ThumbstickX:3,ThumbstickY:4},Su={Device:bO,Input:MO,Axis:NO};function fv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Ze(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fv(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Uo=Su.Device,Nn=Su.Input,Go=B.vtkWarningMacro,Po=B.vtkErrorMacro,RO=B.normalizeWheel,LO=B.vtkOnceErrorMacro,ca=new MouseEvent(""),Tu={"xr-standard":[Nn.Trigger,Nn.Grip,Nn.TrackPad,Nn.Thumbstick,Nn.A,Nn.B]},wu=["StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"];function ci(t){t.cancelable&&t.preventDefault()}function Io(t){var e=Object.create(null);return t.forEach(function(n){var r=n.pointerId,a=n.position;e[r]=a}),e}function kO(t,e){e.classHierarchy.push("vtkRenderWindowInteractor");var n=new Set,r=new Map,a=1;t.start=function(){!e.initialized&&(t.initialize(),!e.initialized)||t.startEventLoop()},t.setRenderWindow=function(p){Po("you want to call setView(view) instead of setRenderWindow on a vtk.js interactor")},t.setInteractorStyle=function(p){e.interactorStyle!==p&&(e.interactorStyle!=null&&e.interactorStyle.setInteractor(null),e.interactorStyle=p,e.interactorStyle!=null&&e.interactorStyle.getInteractor()!==t&&e.interactorStyle.setInteractor(t))},t.initialize=function(){e.initialized=!0,t.enable(),t.render()},t.enable=function(){return t.setEnabled(!0)},t.disable=function(){return t.setEnabled(!1)},t.startEventLoop=function(){return Go("empty event loop")};function i(p,h){e._forcedRenderer||(e.currentRenderer=t.findPokedRenderer(p,h))}t.getCurrentRenderer=function(){return e.currentRenderer||i(0,0),e.currentRenderer};function o(p){var h=e._view.getCanvas(),v=h.getBoundingClientRect(),y=h.width/v.width,m=h.height/v.height,x={x:y*(p.clientX-v.left),y:m*(v.height-p.clientY+v.top),z:0};return(r.size<=1||!e.currentRenderer)&&i(x.x,x.y),x}function s(p){return{controlKey:p.ctrlKey,altKey:p.altKey,shiftKey:p.shiftKey}}function c(p){var h=s(p),v=Ze({key:p.key,keyCode:p.charCode},h);return v}function u(p){return p.pointerType||""}t.bindEvents=function(p){e.container=p,p.addEventListener("contextmenu",ci),p.addEventListener("wheel",t.handleWheel),p.addEventListener("DOMMouseScroll",t.handleWheel),p.addEventListener("pointerenter",t.handlePointerEnter),p.addEventListener("pointerleave",t.handlePointerLeave),p.addEventListener("pointermove",t.handlePointerMove,{passive:!1}),p.addEventListener("pointerdown",t.handlePointerDown,{passive:!1}),p.addEventListener("pointerup",t.handlePointerUp),p.addEventListener("pointercancel",t.handlePointerCancel),document.addEventListener("keypress",t.handleKeyPress),document.addEventListener("keydown",t.handleKeyDown),document.addEventListener("keyup",t.handleKeyUp),document.addEventListener("pointerlockchange",t.handlePointerLockChange),p.style.touchAction="none",p.style.userSelect="none",p.style.webkitTapHighlightColor="rgba(0,0,0,0)"},t.unbindEvents=function(){var p=e.container;p.removeEventListener("contextmenu",ci),p.removeEventListener("wheel",t.handleWheel),p.removeEventListener("DOMMouseScroll",t.handleWheel),p.removeEventListener("pointerenter",t.handlePointerEnter),p.removeEventListener("pointerleave",t.handlePointerLeave),p.removeEventListener("pointermove",t.handlePointerMove,{passive:!1}),p.removeEventListener("pointerdown",t.handlePointerDown,{passive:!1}),p.removeEventListener("pointerup",t.handlePointerUp),p.removeEventListener("pointercancel",t.handlePointerCancel),document.removeEventListener("keypress",t.handleKeyPress),document.removeEventListener("keydown",t.handleKeyDown),document.removeEventListener("keyup",t.handleKeyUp),document.removeEventListener("pointerlockchange",t.handlePointerLockChange),e.container=null,r.clear()},t.handleKeyPress=function(p){var h=c(p);t.keyPressEvent(h)},t.handleKeyDown=function(p){var h=c(p);t.keyDownEvent(h)},t.handleKeyUp=function(p){var h=c(p);t.keyUpEvent(h)},t.handlePointerEnter=function(p){var h=Ze(Ze({},s(p)),{},{position:o(p),deviceType:u(p)});t.pointerEnterEvent(h),h.deviceType==="mouse"&&t.mouseEnterEvent(h)},t.handlePointerLeave=function(p){var h=Ze(Ze({},s(p)),{},{position:o(p),deviceType:u(p)});t.pointerLeaveEvent(h),h.deviceType==="mouse"&&t.mouseLeaveEvent(h)},t.handlePointerDown=function(p){if(!(p.button>2||t.isPointerLocked()))switch(e.preventDefaultOnPointerDown&&ci(p),p.target.hasPointerCapture(p.pointerId)&&p.target.releasePointerCapture(p.pointerId),e.container.setPointerCapture(p.pointerId),r.has(p.pointerId)&&Go("[RenderWindowInteractor] duplicate pointerId detected"),r.set(p.pointerId,{pointerId:p.pointerId,position:o(p)}),p.pointerType){case"pen":case"touch":t.handleTouchStart(p);break;case"mouse":default:t.handleMouseDown(p);break}},t.handlePointerUp=function(p){if(r.has(p.pointerId))switch(e.preventDefaultOnPointerUp&&ci(p),r.delete(p.pointerId),e.container.releasePointerCapture(p.pointerId),p.pointerType){case"pen":case"touch":t.handleTouchEnd(p);break;case"mouse":default:t.handleMouseUp(p);break}},t.handlePointerCancel=function(p){if(r.has(p.pointerId))switch(r.delete(p.pointerId),p.pointerType){case"pen":case"touch":t.handleTouchEnd(p);break;case"mouse":default:t.handleMouseUp(p);break}},t.handlePointerMove=function(p){if(r.has(p.pointerId)){var h=r.get(p.pointerId);h.position=o(p)}switch(p.pointerType){case"pen":case"touch":t.handleTouchMove(p);break;case"mouse":default:t.handleMouseMove(p);break}},t.handleMouseDown=function(p){var h=Ze(Ze({},s(p)),{},{position:o(p),deviceType:u(p)});switch(p.button){case 0:t.leftButtonPressEvent(h);break;case 1:t.middleButtonPressEvent(h);break;case 2:t.rightButtonPressEvent(h);break;default:Po("Unknown mouse button pressed: ".concat(p.button));break}},t.requestPointerLock=function(){e.container&&e.container.requestPointerLock()},t.exitPointerLock=function(){return document.exitPointerLock()},t.isPointerLocked=function(){return!!e.container&&document.pointerLockElement===e.container},t.handlePointerLockChange=function(){t.isPointerLocked()?t.startPointerLockEvent():t.endPointerLockEvent()};function f(){e._view&&e.enabled&&e.enableRender&&(e.inRender=!0,e._view.traverseAllPasses(),e.inRender=!1),t.invokeRenderEvent()}t.requestAnimation=function(p){if(p===void 0){Po("undefined requester, can not start animating");return}if(n.has(p)){Go("requester is already registered for animating");return}n.add(p),!e.animationRequest&&n.size===1&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.extendAnimation=function(p){var h=Date.now()+p;e._animationExtendedEnd=Math.max(e._animationExtendedEnd,h),!e.animationRequest&&n.size===0&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.isAnimating=function(){return e.xrAnimation||e.animationRequest!==null},t.cancelAnimation=function(p){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!n.has(p)){if(!h){var v=p&&p.getClassName?p.getClassName():p;Go("".concat(v," did not request an animation"))}return}n.delete(p),e.animationRequest&&n.size===0&&Date.now()>e._animationExtendedEnd&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.switchToXRAnimation=function(){e.animationRequest&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null),e.xrAnimation=!0},t.returnFromXRAnimation=function(){e.xrAnimation=!1,n.size!==0&&(e.recentAnimationFrameRate=10,e.animationRequest=requestAnimationFrame(t.handleAnimation))},t.updateXRGamepads=function(p,h,v){p.inputSources.forEach(function(y){var m=y.gripSpace==null?null:h.getPose(y.gripSpace,v),x=y.gamepad,g=y.handedness;if(x){x.index in e.lastGamepadValues||(e.lastGamepadValues[x.index]={left:{buttons:{}},right:{buttons:{}},none:{buttons:{}}});for(var d=0;d<x.buttons.length;++d)d in e.lastGamepadValues[x.index][g].buttons||(e.lastGamepadValues[x.index][g].buttons[d]=!1),e.lastGamepadValues[x.index][g].buttons[d]!==x.buttons[d].pressed&&m!=null&&(t.button3DEvent({gamepad:x,position:m.transform.position,orientation:m.transform.orientation,pressed:x.buttons[d].pressed,device:y.handedness==="left"?Uo.LeftController:Uo.RightController,input:Tu[x.mapping]&&Tu[x.mapping][d]?Tu[x.mapping][d]:Nn.Trigger}),e.lastGamepadValues[x.index][g].buttons[d]=x.buttons[d].pressed),e.lastGamepadValues[x.index][g].buttons[d]&&m!=null&&t.move3DEvent({gamepad:x,position:m.transform.position,orientation:m.transform.orientation,device:y.handedness==="left"?Uo.LeftController:Uo.RightController})}})},t.handleMouseMove=function(p){var h=Ze(Ze({},s(p)),{},{position:o(p),deviceType:u(p)});e.moveTimeoutID===0?t.startMouseMoveEvent(h):(t.mouseMoveEvent(h),clearTimeout(e.moveTimeoutID)),e.moveTimeoutID=setTimeout(function(){t.endMouseMoveEvent(),e.moveTimeoutID=0},200)},t.handleAnimation=function(){var p=Date.now();e._animationFrameCount++,p-e._animationStartTime>1e3&&e._animationFrameCount>1&&(e.recentAnimationFrameRate=1e3*(e._animationFrameCount-1)/(p-e._animationStartTime),e.lastFrameTime=1/e.recentAnimationFrameRate,t.animationFrameRateUpdateEvent(),e._animationStartTime=p,e._animationFrameCount=1),t.animationEvent(),f(),n.size>0||Date.now()<e._animationExtendedEnd?e.animationRequest=requestAnimationFrame(t.handleAnimation):(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.handleWheel=function(p){ci(p);var h=Ze(Ze(Ze({},RO(p)),s(p)),{},{position:o(p),deviceType:u(p)});e.wheelTimeoutID===0&&(Math.abs(h.spinY)>=.3?a=Math.abs(h.spinY):a=1),h.spinY/=a,e.wheelTimeoutID===0?(t.startMouseWheelEvent(h),t.mouseWheelEvent(h)):(t.mouseWheelEvent(h),clearTimeout(e.wheelTimeoutID)),e.mouseScrollDebounceByPass?(t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0):e.wheelTimeoutID=setTimeout(function(){t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0},200)},t.handleMouseUp=function(p){var h=Ze(Ze({},s(p)),{},{position:o(p),deviceType:u(p)});switch(p.button){case 0:t.leftButtonReleaseEvent(h);break;case 1:t.middleButtonReleaseEvent(h);break;case 2:t.rightButtonReleaseEvent(h);break;default:Po("Unknown mouse button released: ".concat(p.button));break}},t.handleTouchStart=function(p){var h=ve(r.values());if(e.recognizeGestures&&h.length>1){var v=Io(r);if(h.length===2){var y=Ze(Ze({},s(ca)),{},{position:h[0].position,deviceType:u(p)});t.leftButtonReleaseEvent(y)}t.recognizeGesture("TouchStart",v)}else if(h.length===1){var m=Ze(Ze({},s(ca)),{},{position:o(p),deviceType:u(p)});t.leftButtonPressEvent(m)}},t.handleTouchMove=function(p){var h=ve(r.values());if(e.recognizeGestures&&h.length>1){var v=Io(r);t.recognizeGesture("TouchMove",v)}else if(h.length===1){var y=Ze(Ze({},s(ca)),{},{position:h[0].position,deviceType:u(p)});t.mouseMoveEvent(y)}},t.handleTouchEnd=function(p){var h=ve(r.values());if(e.recognizeGestures)if(h.length===0){var v=Ze(Ze({},s(ca)),{},{position:o(p),deviceType:u(p)});t.leftButtonReleaseEvent(v)}else if(h.length===1){var y=Io(r);t.recognizeGesture("TouchEnd",y);var m=Ze(Ze({},s(ca)),{},{position:h[0].position,deviceType:u(p)});t.leftButtonPressEvent(m)}else{var x=Io(r);t.recognizeGesture("TouchMove",x)}else if(h.length===1){var g=Ze(Ze({},s(ca)),{},{position:h[0].position,deviceType:u(p)});t.leftButtonReleaseEvent(g)}},t.setView=function(p){e._view!==p&&(e._view=p,e._view.getRenderable().setInteractor(t),t.modified())},t.getFirstRenderer=function(){var p,h,v;return(p=e._view)===null||p===void 0||(h=p.getRenderable())===null||h===void 0||(v=h.getRenderersByReference())===null||v===void 0?void 0:v[0]},t.findPokedRenderer=function(){var p,h,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e._view)return null;var m=(p=e._view)===null||p===void 0||(h=p.getRenderable())===null||h===void 0?void 0:h.getRenderers();if(!m||m.length===0)return null;m.sort(function(T,w){return T.getLayer()-w.getLayer()});for(var x=null,g=null,d=null,C=m.length;C--;){var S=m[C];if(e._view.isInViewport(v,y,S)&&S.getInteractive()){d=S;break}x===null&&S.getInteractive()&&(x=S),g===null&&e._view.isInViewport(v,y,S)&&(g=S)}return d===null&&(d=x),d===null&&(d=g),d==null&&(d=m[0]),d},t.render=function(){!t.isAnimating()&&!e.inRender&&f()},wu.forEach(function(p){var h=p.charAt(0).toLowerCase()+p.slice(1);t["".concat(h,"Event")]=function(v){if(e.enabled){var y=t.getCurrentRenderer();if(!y){LO(`
          Can not forward events without a current renderer on the interactor.
        `);return}var m=Ze({type:p,pokedRenderer:e.currentRenderer,firstRenderer:t.getFirstRenderer()},v);t["invoke".concat(p)](m)}}}),t.recognizeGesture=function(p,h){if(!(Object.keys(h).length>2)){if(e.startingEventPositions||(e.startingEventPositions={}),p==="TouchStart"){Object.keys(h).forEach(function(I){e.startingEventPositions[I]=h[I]}),e.currentGesture="Start";return}if(p==="TouchEnd"){e.currentGesture==="Pinch"&&(t.render(),t.endPinchEvent()),e.currentGesture==="Rotate"&&(t.render(),t.endRotateEvent()),e.currentGesture==="Pan"&&(t.render(),t.endPanEvent()),e.currentGesture="Start",e.startingEventPositions={};return}var v=0,y=[],m=[];Object.keys(h).forEach(function(I){y[v]=h[I],m[v]=e.startingEventPositions[I],v++});var x=Math.sqrt((m[0].x-m[1].x)*(m[0].x-m[1].x)+(m[0].y-m[1].y)*(m[0].y-m[1].y)),g=Math.sqrt((y[0].x-y[1].x)*(y[0].x-y[1].x)+(y[0].y-y[1].y)*(y[0].y-y[1].y)),d=Aa(Math.atan2(m[1].y-m[0].y,m[1].x-m[0].x)),C=Aa(Math.atan2(y[1].y-y[0].y,y[1].x-y[0].x)),S=C-d;C=C+180>=360?C-180:C+180,d=d+180>=360?d-180:d+180,Math.abs(C-d)<Math.abs(S)&&(S=C-d);var T=[];if(T[0]=(y[0].x-m[0].x+y[1].x-m[1].x)/2,T[1]=(y[0].y-m[0].y+y[1].y-m[1].y)/2,p==="TouchMove")if(e.currentGesture==="Start"){var w=.01*Math.sqrt(e.container.clientWidth*e.container.clientWidth+e.container.clientHeight*e.container.clientHeight);w<15&&(w=15);var E=Math.abs(g-x),D=g*3.1415926*Math.abs(S)/360,b=Math.sqrt(T[0]*T[0]+T[1]*T[1]);if(E>w&&E>D&&E>b){e.currentGesture="Pinch";var O={scale:1,touches:h};t.startPinchEvent(O)}else if(D>w&&D>b){e.currentGesture="Rotate";var M={rotation:0,touches:h};t.startRotateEvent(M)}else if(b>w){e.currentGesture="Pan";var R={translation:[0,0],touches:h};t.startPanEvent(R)}}else{if(e.currentGesture==="Rotate"){var N={rotation:S,touches:h};t.rotateEvent(N)}if(e.currentGesture==="Pinch"){var U={scale:g/x,touches:h};t.pinchEvent(U)}if(e.currentGesture==="Pan"){var W={translation:T,touches:h};t.panEvent(W)}}}},t.handleVisibilityChange=function(){e._animationStartTime=Date.now(),e._animationFrameCount=0},t.setCurrentRenderer=function(p){e._forcedRenderer=!!p,e.currentRenderer=p};var l=t.delete;t.delete=function(){for(;n.size;)t.cancelAnimation(n.values().next().value);typeof document.hidden<"u"&&document.removeEventListener("visibilitychange",t.handleVisibilityChange),e.container&&t.unbindEvents(),l()},typeof document.hidden<"u"&&document.addEventListener("visibilitychange",t.handleVisibilityChange,!1)}var FO={renderWindow:null,interactorStyle:null,picker:null,pickingManager:null,initialized:!1,enabled:!1,enableRender:!0,currentRenderer:null,lightFollowCamera:!0,desiredUpdateRate:30,stillUpdateRate:2,container:null,recognizeGestures:!0,currentGesture:"Start",animationRequest:null,lastFrameTime:.1,recentAnimationFrameRate:10,wheelTimeoutID:0,moveTimeoutID:0,lastGamepadValues:{},preventDefaultOnPointerDown:!1,preventDefaultOnPointerUp:!1,mouseScrollDebounceByPass:!1};function lv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,FO,n),B.obj(t,e),e._animationExtendedEnd=0,B.event(t,e,"RenderEvent"),wu.forEach(function(r){return B.event(t,e,r)}),B.get(t,e,["initialized","container","interactorStyle","lastFrameTime","recentAnimationFrameRate","_view"]),B.setGet(t,e,["lightFollowCamera","enabled","enableRender","recognizeGestures","desiredUpdateRate","stillUpdateRate","picker","preventDefaultOnPointerDown","preventDefaultOnPointerUp","mouseScrollDebounceByPass"]),B.moveToProtected(t,e,["view"]),kO(t,e)}var AO=B.newInstance(lv,"vtkRenderWindowInteractor"),jo=Ze({newInstance:AO,extend:lv,handledEvents:wu},Su);function pv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function hv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pv(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var VO=B.vtkErrorMacro,BO=B.VOID;function UO(t,e,n,r){var a=t.getRenderWindow().getViews()[0];return a.worldToDisplay(e,n,r,t)}function GO(t,e,n,r){var a=t.getRenderWindow().getViews()[0];return a.displayToWorld(e,n,r,t)}var PO={computeWorldToDisplay:UO,computeDisplayToWorld:GO};function IO(t,e){e.classHierarchy.push("vtkInteractorObserver");var n=hv({},t);function r(){for(;e.subscribedEvents.length;)e.subscribedEvents.pop().unsubscribe()}function a(){jo.handledEvents.forEach(function(i){t["handle".concat(i)]&&e.subscribedEvents.push(e._interactor["on".concat(i)](function(o){return e.processEvents?t["handle".concat(i)](o):BO},e.priority))})}t.setInteractor=function(i){i!==e._interactor&&(r(),e._interactor=i,i&&e.enabled&&a(),t.modified())},t.setEnabled=function(i){i!==e.enabled&&(r(),i&&(e._interactor?a():VO(`
          The interactor must be set before subscribing to events
        `)),e.enabled=i,t.modified())},t.computeDisplayToWorld=function(i,o,s,c){return i?e._interactor.getView().displayToWorld(o,s,c,i):null},t.computeWorldToDisplay=function(i,o,s,c){return i?e._interactor.getView().worldToDisplay(o,s,c,i):null},t.setPriority=function(i){var o=n.setPriority(i);o&&e._interactor&&(r(),a())}}var jO={enabled:!0,priority:0,processEvents:!0,subscribedEvents:[]};function vv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,jO,n),B.obj(t,e),B.event(t,e,"InteractionEvent"),B.event(t,e,"StartInteractionEvent"),B.event(t,e,"EndInteractionEvent"),B.get(t,e,["_interactor","enabled"]),B.setGet(t,e,["priority","processEvents"]),B.moveToProtected(t,e,["interactor"]),IO(t,e)}var zO=B.newInstance(vv,"vtkInteractorObserver"),WO=hv({newInstance:zO,extend:vv},PO),HO={IS_START:0,IS_NONE:0,IS_ROTATE:1,IS_PAN:2,IS_SPIN:3,IS_DOLLY:4,IS_CAMERA_POSE:11,IS_WINDOW_LEVEL:1024,IS_SLICE:1025},gv={States:HO};function dv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function $O(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dv(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var vr=gv.States,Eu={Rotate:vr.IS_ROTATE,Pan:vr.IS_PAN,Spin:vr.IS_SPIN,Dolly:vr.IS_DOLLY,CameraPose:vr.IS_CAMERA_POSE,WindowLevel:vr.IS_WINDOW_LEVEL,Slice:vr.IS_SLICE};function KO(t,e){e.classHierarchy.push("vtkInteractorStyle"),Object.keys(Eu).forEach(function(n){B.event(t,e,"Start".concat(n,"Event")),t["start".concat(n)]=function(){e.state===vr.IS_NONE&&(e.state=Eu[n],e._interactor.requestAnimation(t),t.invokeStartInteractionEvent({type:"StartInteractionEvent"}),t["invokeStart".concat(n,"Event")]({type:"Start".concat(n,"Event")}))},B.event(t,e,"End".concat(n,"Event")),t["end".concat(n)]=function(){e.state===Eu[n]&&(e.state=vr.IS_NONE,e._interactor.cancelAnimation(t),t.invokeEndInteractionEvent({type:"EndInteractionEvent"}),t["invokeEnd".concat(n,"Event")]({type:"End".concat(n,"Event")}),e._interactor.render())}}),t.handleKeyPress=function(n){var r=e._interactor,a=null;switch(n.key){case"r":case"R":n.pokedRenderer.resetCamera(),r.render();break;case"w":case"W":a=n.pokedRenderer.getActors(),a.forEach(function(i){var o=i.getProperty();o.setRepresentationToWireframe&&o.setRepresentationToWireframe()}),r.render();break;case"s":case"S":a=n.pokedRenderer.getActors(),a.forEach(function(i){var o=i.getProperty();o.setRepresentationToSurface&&o.setRepresentationToSurface()}),r.render();break;case"v":case"V":a=n.pokedRenderer.getActors(),a.forEach(function(i){var o=i.getProperty();o.setRepresentationToPoints&&o.setRepresentationToPoints()}),r.render();break}}}var XO={state:vr.IS_NONE,handleObservers:1,autoAdjustCameraClippingRange:1};function yv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,XO,n),WO.extend(t,e,n),KO(t,e)}var qO=B.newInstance(yv,"vtkInteractorStyle"),Du=$O({newInstance:qO,extend:yv},gv);function mv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Mt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mv(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var fi={type:"StartInteractionEvent"},xv={type:"InteractionEvent"},li={type:"EndInteractionEvent"};function YO(t,e){e.classHierarchy.push("vtkInteractorStyleRemoteMouse");function n(r){var a=e.buttonLeft,i=e.buttonMiddle,o=e.buttonRight,s=r.shiftKey?1:0,c=r.controlKey?1:0,u=r.altKey?1:0,f=r.metaKey?1:0,l=a||i||o?"down":"up",p=e._interactor.getView().getSizeByReference(),h=ze(p,2),v=h[0],y=h[1],m=r.position,x=m.x,g=m.y;return x/=v,g/=y,Mt({action:l,x,y:g,buttonLeft:a,buttonMiddle:i,buttonRight:o,shiftKey:s,altKey:u,ctrlKey:c,metaKey:f},e.remoteEventAddOn)}t.handleLeftButtonPress=function(r){e.previousPosition=r.position,e.buttonLeft=1,t.onButtonDown(1,r)},t.handleMiddleButtonPress=function(r){e.previousPosition=r.position,e.buttonMiddle=1,t.onButtonDown(2,r)},t.handleRightButtonPress=function(r){e.previousPosition=r.position,e.buttonRight=1,t.onButtonDown(3,r)},t.handleLeftButtonRelease=function(r){e.buttonLeft=0,t.onButtonUp(1,r)},t.handleMiddleButtonRelease=function(r){e.buttonMiddle=0,t.onButtonUp(2,r)},t.handleRightButtonRelease=function(r){e.buttonRight=0,t.onButtonUp(3,r)},t.onButtonDown=function(r,a){e._interactor.requestAnimation(t.onButtonDown),t.invokeStartInteractionEvent(fi),t.invokeRemoteMouseEvent(n(a))},t.onButtonUp=function(r,a){t.invokeRemoteMouseEvent(n(a)),t.invokeEndInteractionEvent(li),e._interactor.cancelAnimation(t.onButtonDown)},t.handleStartMouseWheel=function(r){e._interactor.requestAnimation(t.handleStartMouseWheel),t.invokeStartInteractionEvent(fi),t.invokeRemoteWheelEvent(Mt(Mt({type:"StartMouseWheel"},n(r)),{},{spinY:r.spinY}))},t.handleMouseWheel=function(r){t.invokeRemoteWheelEvent(Mt(Mt({type:"MouseWheel"},n(r)),{},{spinY:r.spinY})),t.invokeInteractionEvent(xv)},t.handleEndMouseWheel=function(){t.invokeRemoteWheelEvent(Mt({type:"EndMouseWheel"},e.remoteEventAddOn)),e._interactor.cancelAnimation(t.handleStartMouseWheel),t.invokeEndInteractionEvent(li)},t.handleMouseMove=function(r){var a=Date.now(),i=e.throttleDelay<a-e.lastThrottleTime;i&&(e.sendMouseMove||e.buttonLeft||e.buttonMiddle||e.buttonRight)&&(e.lastThrottleTime=a,t.invokeRemoteMouseEvent(n(r))),t.invokeInteractionEvent(xv)},t.handleKeyPress=function(){},t.handleStartPinch=function(r){t.startDolly();var a=r.scale;e._interactor.requestAnimation(t.handleStartPinch),t.invokeStartInteractionEvent(fi),t.invokeRemoteGestureEvent(Mt({type:"StartPinch",scale:a},e.remoteEventAddOn))},t.handlePinch=function(r){var a=r.scale;t.invokeRemoteGestureEvent(Mt({type:"Pinch",scale:a},e.remoteEventAddOn))},t.handleEndPinch=function(){t.endDolly(),t.invokeRemoteGestureEvent(Mt({type:"EndPinch"},e.remoteEventAddOn)),e._interactor.cancelAnimation(t.handleStartPinch),t.invokeEndInteractionEvent(li)},t.handleStartRotate=function(r){t.startRotate();var a=r.rotation;e._interactor.requestAnimation(t.handleStartRotate),t.invokeStartInteractionEvent(fi),t.invokeRemoteGestureEvent(Mt({type:"StartRotate",rotation:a},e.remoteEventAddOn))},t.handleRotate=function(r){var a=r.rotation;t.invokeRemoteGestureEvent(Mt({type:"Rotate",rotation:a},e.remoteEventAddOn))},t.handleEndRotate=function(){t.endRotate(),t.invokeRemoteGestureEvent(Mt({type:"EndRotate"},e.remoteEventAddOn)),e._interactor.cancelAnimation(t.handleStartRotate),t.invokeEndInteractionEvent(li)},t.handleStartPan=function(r){t.startPan();var a=r.translation;e._interactor.requestAnimation(t.handleStartPan),t.invokeStartInteractionEvent(fi),t.invokeRemoteGestureEvent(Mt({type:"StartPan",translation:a},e.remoteEventAddOn))},t.handlePan=function(r){var a=r.translation;t.invokeRemoteGestureEvent(Mt({type:"Pan",translation:a},e.remoteEventAddOn))},t.handleEndPan=function(){t.endPan(),t.invokeRemoteGestureEvent(Mt({type:"EndPan"},e.remoteEventAddOn)),e._interactor.cancelAnimation(t.handleStartPan),t.invokeEndInteractionEvent(li)}}var JO={buttonLeft:0,buttonMiddle:0,buttonRight:0,sendMouseMove:!1,throttleDelay:33.3,lastThrottleTime:0};function Cv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,JO,n),Du.extend(t,e,n),B.setGet(t,e,["sendMouseMove","remoteEventAddOn","throttleDelay"]),B.event(t,e,"RemoteMouseEvent"),B.event(t,e,"RemoteWheelEvent"),B.event(t,e,"RemoteGestureEvent"),YO(t,e)}var ZO=B.newInstance(Cv,"vtkInteractorStyleRemoteMouse"),QO={newInstance:ZO,extend:Cv},zo=_O.newInstance(),e_=zo.connect,t_=zo.disconnect;function r_(t,e){e.classHierarchy.push("vtkRemoteView"),e.canvasView=mO.newInstance(),e.interactorStyle=QO.newInstance(),e.interactor=jo.newInstance(),e.interactor.setView(e.canvasView),e.interactor.initialize(),e.interactor.setInteractorStyle(e.interactorStyle),e.interactorStyle.onRemoteMouseEvent(function(r){e.session&&e.rpcMouseEvent&&e.session.call(e.rpcMouseEvent,[r])}),e.interactorStyle.onRemoteWheelEvent(function(r){e.session&&e.rpcWheelEvent&&e.session.call(e.rpcWheelEvent,[r])}),e.interactorStyle.onRemoteGestureEvent(function(r){e.session&&e.rpcGestureEvent&&e.session.call(e.rpcGestureEvent,[r])}),t.delete=B.chain(function(){e.session=null,e.canvasView&&(e.canvasView.setViewStream(null),e.canvasView.delete()),e.interactor&&e.interactor.delete(),e.viewStream&&e.viewStream.delete()},t.delete),t.setViewStream=function(r){e.viewStream=r,e.canvasView.setViewStream(e.viewStream),e.viewStream.setStillQuality(e.stillQuality),e.viewStream.setStillRatio(e.stillRatio),e.viewStream.setInteractiveQuality(e.interactiveQuality),e.viewStream.setInteractiveRatio(e.interactiveRatio),e.interactor.onStartAnimation(e.viewStream.startInteraction),e.interactor.onEndAnimation(e.viewStream.endInteraction),t.setViewId(r.getViewId())},t.setViewId=function(r){e.viewStream||t.setViewStream(zo.createViewStream(r)),e.viewStream.setViewId(r),e.interactorStyle.setRemoteEventAddOn({view:r}),t.modified()},t.setContainer=function(r){e.container&&e.interactor.unbindEvents(r),e.container=r,e.canvasView.setContainer(e.container),r&&(e.interactor.bindEvents(r),t.resize())},t.resize=function(){if(e.container&&e.canvasView){var r=e.container.getBoundingClientRect(),a=r.width,i=r.height;e.canvasView.setSize(a,i),t.render()}},t.render=function(){e.viewStream&&e.viewStream.render()},t.resetCamera=function(){e.viewStream&&e.viewStream.resetCamera()};var n={modified:t.modified};B.set(n,e,["interactiveQuality","interactiveRatio","stillQuality","stillRatio"]),t.setInteractiveQuality=function(r){var a=n.setInteractiveQuality(r);return e.viewStream&&a&&e.viewStream.setInteractiveQuality(e.interactiveQuality),a},t.setInteractiveRatio=function(r){var a=n.setInteractiveRatio(r);return e.viewStream&&a&&e.viewStream.setInteractiveRatio(e.interactiveRatio),a},t.setStillQuality=function(r){var a=n.setStillQuality(r);return e.viewStream&&a&&e.viewStream.setStillQuality(e.stillQuality),a},t.setStillRatio=function(r){var a=n.setStillRatio(r);return e.viewStream&&a&&e.viewStream.setStillRatio(e.stillRatio),a},e.viewStream&&t.setViewStream(e.viewStream)}var n_={viewId:"-1",interactiveQuality:60,interactiveRatio:1/window.devicePixelRatio,stillQuality:100,stillRatio:1,rpcMouseEvent:"viewport.mouse.interaction",rpcGestureEvent:null,rpcWheelEvent:null};function Sv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,n_,n),B.obj(t,e,n),B.get(t,e,["container","viewStream","canvasView","interactor","interactorStyle","interactiveQuality","interactiveRatio","stillQuality","stillRatio"]),B.setGet(t,e,["session","rpcMouseEvent","rpcGestureEvent","rpcWheelEvent"]),r_(t,e)}var a_=B.newInstance(Sv,"vtkRemoteView"),i_={newInstance:a_,extend:Sv,SHARED_IMAGE_STREAM:zo,connectImageStream:e_,disconnectImageStream:t_};function o_(t,e){e.classHierarchy.push("vtkCompositeMouseManipulator"),t.startInteraction=function(){},t.endInteraction=function(){},t.onButtonDown=function(n,r,a){},t.onButtonUp=function(n){},t.onMouseMove=function(n,r,a){},t.onStartScroll=function(n,r,a){},t.onScroll=function(n,r,a){},t.onEndScroll=function(n){},t.isDragEnabled=function(){return e.dragEnabled},t.isScrollEnabled=function(){return e.scrollEnabled}}var s_={button:1,shift:!1,control:!1,alt:!1,dragEnabled:!0,scrollEnabled:!1};function u_(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,s_,n),B.setGet(t,e,["button","shift","control","alt"]),B.set(t,e,["dragEnabled","scrollEnabled"]),o_(t,e)}var fa={extend:u_};function Tv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Wo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tv(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var c_=[-2,-1,-2,-1],f_={position:"absolute",zIndex:1,border:"2px solid #F44336",backgroundColor:"rgba(0, 0, 0, 0.1)",borderRadius:"4px",boxSizing:"border-box"};function l_(t,e){Object.keys(e).forEach(function(n){t.style[n]=e[n]})}function p_(t,e){e.classHierarchy.push("vtkMouseBoxSelectionManipulator");var n=null,r=null,a=null,i=null,o=null,s=!1;function c(){return!a||!i?c_:[Math.min(a.x,i.x),Math.max(a.x,i.x),Math.min(a.y,i.y),Math.max(a.y,i.y)]}function u(){if(!(!n||!r)){var f=n.getSize(),l=ze(f,2),p=l[0],h=l[1],v=r.getBoundingClientRect(),y=v.width,m=v.height,x=c(),g=ze(x,4),d=g[0],C=g[1],S=g[2],T=g[3];o.style.left="".concat(y*d/p,"px"),o.style.top="".concat(m-m*T/h,"px"),o.style.width="".concat(y*(C-d)/p,"px"),o.style.height="".concat(m*(T-S)/h,"px")}}t.onButtonDown=function(f,l,p){if(a=p,e.renderSelection){var h;n||(n=f.getView()),!r&&(h=n)!==null&&h!==void 0&&h.getContainer&&(r=n.getContainer()),r||(r=e.container),o||(o=document.createElement("div"),l_(o,e.selectionStyle)),u(),r&&!s&&(s=!0,r.appendChild(o))}},t.onMouseMove=function(f,l,p){a&&p&&(i=p,t.invokeBoxSelectInput({view:n,container:r,selection:c()}),e.renderSelection&&u())},t.onButtonUp=function(f,l){!a||!i&&!e.boxChangeOnClick||(i||(i=a),t.invokeBoxSelectChange({view:n,container:r,selection:c()}),s&&(o.parentElement.removeChild(o),s=!1),n=null,r=null,a=null,i=null)}}function h_(t){return Wo(Wo({boxChangeOnClick:!1,renderSelection:!0},t),{},{selectionStyle:Wo(Wo({},f_),t.selectionStyle)})}function wv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,h_(n)),ht(t,e),fa.extend(t,e,n),Oa(t,e,"BoxSelectChange"),Oa(t,e,"BoxSelectInput"),dt(t,e,["renderSelection","boxChangeOnClick","selectionStyle","container"]),p_(t,e)}var v_=Je(wv,"vtkMouseBoxSelectionManipulator"),Ev={newInstance:v_,extend:wv};function Dv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function g_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dv(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Ou=B.vtkDebugMacro,d_=Du.States,pi={type:"StartInteractionEvent"},Wr={type:"InteractionEvent"},hi={type:"EndInteractionEvent"};function _u(t,e,n,r,a,i){var o=t.getActiveCamera(),s=o.getFocalPoint();s=e.getInteractorStyle().computeWorldToDisplay(t,s[0],s[1],s[2]);var c=s[2],u=e.getInteractorStyle().computeDisplayToWorld(t,n,r,c),f=e.getInteractorStyle().computeDisplayToWorld(t,a,i,c),l=[f[0]-u[0],f[1]-u[1],f[2]-u[2]];s=o.getFocalPoint();var p=o.getPosition();o.setFocalPoint(l[0]+s[0],l[1]+s[1],l[2]+s[2]),o.setPosition(l[0]+p[0],l[1]+p[1],l[2]+p[2])}function y_(t,e,n,r){var a=n.getActiveCamera();if(a.getParallelProjection()){var i=r.getView(),o=i.getViewportSize(n),s=n.getViewport(),c=i.getSize(),u=o[0],f=o[1],l=u/2,p=f/2,h=e.x-s[0]*c[0],v=e.y-s[1]*c[1];_u(n,r,l,p,h,v),a.setParallelScale(a.getParallelScale()/t),_u(n,r,h,v,l,p)}else{var y=a.getFocalPoint(),m=a.getViewPlaneNormal();y=r.getInteractorStyle().computeWorldToDisplay(n,y[0],y[1],y[2]);var x=r.getInteractorStyle().computeDisplayToWorld(n,e.x,e.y,y[2]);a.setFocalPoint(x[0],x[1],x[2]),a.dolly(t),n.resetCameraClippingRange();var g=a.getPosition();y=a.getFocalPoint();var d=[0,0,0],C=m[0]*(y[0]-g[0])+m[1]*(y[1]-g[1])+m[2]*(y[2]-g[2]);C/=Math.pow(m[0],2)+Math.pow(m[1],2)+Math.pow(m[2],2),d[0]=g[0]+m[0]*C,d[1]=g[1]+m[1]*C,d[2]=g[2]+m[2]*C,a.setFocalPoint(d[0],d[1],d[2]),n.resetCameraClippingRange()}}function m_(t,e,n){if(!Number.isNaN(n)){var r=e.getActiveCamera();r.getParallelProjection()?r.setParallelScale(r.getParallelScale()/n):(r.dolly(n),e.resetCameraClippingRange()),t.getLightFollowCamera()&&e.updateLightsGeometryToFollowCamera()}}var x_={dollyToPosition:y_,translateCamera:_u,dollyByFactor:m_};function C_(t,e){e.classHierarchy.push("vtkInteractorStyleManipulator"),e.mouseManipulators=[],e.keyboardManipulators=[],e.vrManipulators=[],e.gestureManipulators=[],e.currentManipulator=null,e.currentWheelManipulator=null,e.centerOfRotation=[0,0,0],e.rotationFactor=1,t.removeAllManipulators=function(){t.removeAllMouseManipulators(),t.removeAllKeyboardManipulators(),t.removeAllVRManipulators(),t.removeAllGestureManipulators()},t.removeAllMouseManipulators=function(){e.mouseManipulators=[]},t.removeAllKeyboardManipulators=function(){e.keyboardManipulators=[]},t.removeAllVRManipulators=function(){e.vrManipulators=[]},t.removeAllGestureManipulators=function(){e.gestureManipulators=[]};var n=function(i,o){var s=o.indexOf(i);return s===-1?!1:(o.splice(s,1),t.modified(),!0)};t.removeMouseManipulator=function(a){return n(a,e.mouseManipulators)},t.removeKeyboardManipulator=function(a){return n(a,e.keyboardManipulators)},t.removeVRManipulator=function(a){return n(a,e.vrManipulators)},t.removeGestureManipulator=function(a){return n(a,e.gestureManipulators)};var r=function(i,o){var s=o.indexOf(i);return s!==-1?!1:(o.push(i),t.modified(),!0)};t.addMouseManipulator=function(a){return r(a,e.mouseManipulators)},t.addKeyboardManipulator=function(a){return r(a,e.keyboardManipulators)},t.addVRManipulator=function(a){return r(a,e.vrManipulators)},t.addGestureManipulator=function(a){return r(a,e.gestureManipulators)},t.getNumberOfMouseManipulators=function(){return e.mouseManipulators.length},t.getNumberOfKeyboardManipulators=function(){return e.keyboardManipulators.length},t.getNumberOfVRManipulators=function(){return e.vrManipulators.length},t.getNumberOfGestureManipulators=function(){return e.gestureManipulators.length},t.resetCurrentManipulator=function(){e.currentManipulator=null,e.currentWheelManipulator=null},t.handleLeftButtonPress=function(a){e.previousPosition=a.position,t.onButtonDown(1,a)},t.handleMiddleButtonPress=function(a){e.previousPosition=a.position,t.onButtonDown(2,a)},t.handleRightButtonPress=function(a){e.previousPosition=a.position,t.onButtonDown(3,a)},t.handleButton3D=function(a){a&&(e.currentManipulator=t.findVRManipulator(a.device,a.input,a.pressed),e.currentManipulator?(e.currentManipulator.onButton3D(t,a.pokedRenderer,e.state,a.device,a.input,a.pressed),a.pressed?t.startCameraPose():t.endCameraPose()):Ou("No manipulator found"))},t.handleMove3D=function(a){e.currentManipulator&&e.state===d_.IS_CAMERA_POSE&&e.currentManipulator.onMove3D(t,a.pokedRenderer,e.state,a)},t.onButtonDown=function(a,i){e.currentManipulator||(e.currentManipulator=t.findMouseManipulator(a,i.shiftKey,i.controlKey,i.altKey),e.currentManipulator?(e.currentManipulator.setCenter&&e.currentManipulator.setCenter(e.centerOfRotation),e.currentManipulator.setRotationFactor&&e.currentManipulator.setRotationFactor(e.rotationFactor),e.currentManipulator.startInteraction(),e.currentManipulator.onButtonDown(e._interactor,i.pokedRenderer,i.position),e._interactor.requestAnimation(t.onButtonDown),t.invokeStartInteractionEvent(pi)):Ou("No manipulator found"))},t.findMouseManipulator=function(a,i,o,s){for(var c=null,u=e.mouseManipulators.length;u--;){var f=e.mouseManipulators[u];f&&f.getButton()===a&&f.getShift()===i&&f.getControl()===o&&f.getAlt()===s&&f.isDragEnabled()&&(c=f)}return c},t.findVRManipulator=function(a,i){for(var o=null,s=e.vrManipulators.length;s--;){var c=e.vrManipulators[s];c&&c.getDevice()===a&&c.getInput()===i&&(o=c)}return o},t.handleLeftButtonRelease=function(){t.onButtonUp(1)},t.handleMiddleButtonRelease=function(){t.onButtonUp(2)},t.handleRightButtonRelease=function(){t.onButtonUp(3)},t.onButtonUp=function(a){e.currentManipulator&&e.currentManipulator.getButton&&e.currentManipulator.getButton()===a&&(e.currentManipulator.onButtonUp(e._interactor),e.currentManipulator.endInteraction(),e.currentManipulator=null,e._interactor.cancelAnimation(t.onButtonDown),t.invokeEndInteractionEvent(hi))},t.handleStartMouseWheel=function(a){if(!e.currentWheelManipulator){for(var i=null,o=e.mouseManipulators.length;o--;){var s=e.mouseManipulators[o];s&&s.isScrollEnabled()&&s.getShift()===a.shiftKey&&s.getControl()===a.controlKey&&s.getAlt()===a.altKey&&(i=s)}i?(e.currentWheelManipulator=i,e.currentWheelManipulator.onStartScroll(e._interactor,a.pokedRenderer,a.spinY),e.currentWheelManipulator.startInteraction(),e._interactor.requestAnimation(t.handleStartMouseWheel),t.invokeStartInteractionEvent(pi)):Ou("No manipulator found")}},t.handleEndMouseWheel=function(){e.currentWheelManipulator&&e.currentWheelManipulator.onEndScroll&&(e.currentWheelManipulator.onEndScroll(e._interactor),e.currentWheelManipulator.endInteraction(),e.currentWheelManipulator=null,e._interactor.cancelAnimation(t.handleStartMouseWheel),t.invokeEndInteractionEvent(hi))},t.handleMouseWheel=function(a){e.currentWheelManipulator&&e.currentWheelManipulator.onScroll&&(e.currentWheelManipulator.onScroll(e._interactor,a.pokedRenderer,a.spinY,e.cachedMousePosition),t.invokeInteractionEvent(Wr))},t.handleMouseMove=function(a){e.cachedMousePosition=a.position,e.currentManipulator&&e.currentManipulator.onMouseMove&&(e.currentManipulator.onMouseMove(e._interactor,a.pokedRenderer,a.position),t.invokeInteractionEvent(Wr))},t.handleKeyPress=function(a){e.keyboardManipulators.filter(function(i){return i.onKeyPress}).forEach(function(i){i.onKeyPress(e._interactor,a.pokedRenderer,a.key),t.invokeInteractionEvent(Wr)})},t.handleKeyDown=function(a){e.keyboardManipulators.filter(function(i){return i.onKeyDown}).forEach(function(i){i.onKeyDown(e._interactor,a.pokedRenderer,a.key),t.invokeInteractionEvent(Wr)})},t.handleKeyUp=function(a){e.keyboardManipulators.filter(function(i){return i.onKeyUp}).forEach(function(i){i.onKeyUp(e._interactor,a.pokedRenderer,a.key),t.invokeInteractionEvent(Wr)})},t.handleStartPinch=function(a){t.startDolly();for(var i=e.gestureManipulators.length;i--;){var o=e.gestureManipulators[i];o&&o.isPinchEnabled()&&(o.onStartPinch(e._interactor,a.scale),o.startInteraction())}e._interactor.requestAnimation(t.handleStartPinch),t.invokeStartInteractionEvent(pi)},t.handleEndPinch=function(){t.endDolly();for(var a=e.gestureManipulators.length;a--;){var i=e.gestureManipulators[a];i&&i.isPinchEnabled()&&(i.onEndPinch(e._interactor),i.endInteraction())}e._interactor.cancelAnimation(t.handleStartPinch),t.invokeEndInteractionEvent(hi)},t.handleStartRotate=function(a){t.startRotate();for(var i=e.gestureManipulators.length;i--;){var o=e.gestureManipulators[i];o&&o.isRotateEnabled()&&(o.onStartRotate(e._interactor,a.rotation),o.startInteraction())}e._interactor.requestAnimation(t.handleStartRotate),t.invokeStartInteractionEvent(pi)},t.handleEndRotate=function(){t.endRotate();for(var a=e.gestureManipulators.length;a--;){var i=e.gestureManipulators[a];i&&i.isRotateEnabled()&&(i.onEndRotate(e._interactor),i.endInteraction())}e._interactor.cancelAnimation(t.handleStartRotate),t.invokeEndInteractionEvent(hi)},t.handleStartPan=function(a){t.startPan();for(var i=e.gestureManipulators.length;i--;){var o=e.gestureManipulators[i];o&&o.isPanEnabled()&&(o.onStartPan(e._interactor,a.translation),o.startInteraction())}e._interactor.requestAnimation(t.handleStartPan),t.invokeStartInteractionEvent(pi)},t.handleEndPan=function(){t.endPan();for(var a=e.gestureManipulators.length;a--;){var i=e.gestureManipulators[a];i&&i.isPanEnabled()&&(i.onEndPan(e._interactor),i.endInteraction())}e._interactor.cancelAnimation(t.handleStartPan),t.invokeEndInteractionEvent(hi)},t.handlePinch=function(a){for(var i=e.gestureManipulators.length,o=0;i--;){var s=e.gestureManipulators[i];s&&s.isPinchEnabled()&&(s.onPinch(e._interactor,a.pokedRenderer,a.scale),o++)}o&&t.invokeInteractionEvent(Wr)},t.handlePan=function(a){for(var i=e.gestureManipulators.length,o=0;i--;){var s=e.gestureManipulators[i];s&&s.isPanEnabled()&&(s.onPan(e._interactor,a.pokedRenderer,a.translation),o++)}o&&t.invokeInteractionEvent(Wr)},t.handleRotate=function(a){for(var i=e.gestureManipulators.length,o=0;i--;){var s=e.gestureManipulators[i];s&&s.isRotateEnabled()&&(s.onRotate(e._interactor,a.pokedRenderer,a.rotation),o++)}o&&t.invokeInteractionEvent(Wr)}}var S_={cachedMousePosition:null,currentManipulator:null,currentWheelManipulator:null,centerOfRotation:[0,0,0],rotationFactor:1};function Ov(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,S_,n),Du.extend(t,e,n),B.setGet(t,e,["rotationFactor"]),B.get(t,e,["mouseManipulators","keyboardManipulators","vrManipulators","gestureManipulators"]),B.setGetArray(t,e,["centerOfRotation"],3),C_(t,e)}var T_=B.newInstance(Ov,"vtkInteractorStyleManipulator"),la=g_({newInstance:T_,extend:Ov},x_);const _v={props:{viewId:{type:String,default:"-1"},wsClient:{type:Object},interactiveRatio:{type:[Number,String]},interactiveQuality:{type:[Number,String]},stillRatio:{type:[Number,String]},stillQuality:{type:[Number,String]},enablePicking:{type:Boolean,default:!1},interactorEvents:{type:Array,default:()=>["EndAnimation"]},boxSelection:{type:Boolean,default:!1},visible:{type:Boolean,default:!1}},emits:["onImageCapture","BoxSelection","StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"],setup(t,{emit:e}){const n=ce.ref(!1),r=ce.ref(null),a=ce.inject("trame"),i=t.wsClient||(a==null?void 0:a.client);let o=null;if(!i)throw new Error("VtkRemoteView can not be created without a wsClient");const s=i.getImageStream().createViewStream(t.viewId);s.get("protocol").protocol.setQuality(t.viewId,5,.1);const c=i_.newInstance({rpcWheelEvent:"viewport.mouse.zoom.wheel",viewStream:s});t.interactiveRatio&&c.setInteractiveRatio(Number(t.interactiveRatio)),t.interactiveQuality&&c.setInteractiveQuality(Number(t.interactiveQuality)),t.stillRatio&&c.setStillRatio(Number(t.stillRatio)),t.stillQuality&&c.setStillQuality(Number(t.stillQuality));const u=c.render,f=c.resetCamera,l=c.setInteractiveQuality,p=c.setInteractiveRatio,h=c.setStillQuality,v=c.setStillRatio,y=c.getInteractiveQuality,m=c.getInteractiveRatio,x=c.getStillQuality,g=c.getStillRatio,d=c.getInteractor(),C=[];t.interactorEvents.forEach(D=>{const b=`on${D}`;C.push(d[b](O=>e(D,O)))});const S=la.newInstance({enabled:t.boxSelection}),T=Ev.newInstance({button:1});S.addMouseManipulator(T),C.push(T.onBoxSelectChange(({container:D,selection:b})=>{if(D){const{width:O,height:M}=D.getBoundingClientRect();e("BoxSelection",{selection:b,size:[O,M],mode:"remote"})}})),S.setInteractor(d);function w(){const D=c.getCanvasView(),[b,O]=D.getSize();D.setSize(b+2,O+2),ce.nextTick(c.resize)}const E=async()=>{const D=c.getCanvasView().get("bgImage").bgImage.src,O=await(await fetch(D)).blob();return e("onImageCapture",O),O};return ce.onMounted(async()=>{const D=ce.unref(r);c.getCanvasView().setUseBackgroundImage(0),c.setContainer(D),T.setContainer(D),T.setBoxChangeOnClick(t.enablePicking);const b=i.getConnection().getSession();c.setSession(b),c.setViewId(t.viewId),await ce.nextTick();const{width:O,height:M}=D.getBoundingClientRect(),R=O<10||M<10?10:0;c.getCanvasView().setSize(Math.round(O+R),Math.round(M+R)),await new Promise(N=>{const U=s.onImageReady(({image:W,metadata:I})=>{const[G,F]=I.size;if(G!==W.width||F!==W.height){s.render();return}const A=s.getStillRatio()*Math.round(R+O),H=s.getStillRatio()*Math.round(R+M);G===A&&F===H?(U.unsubscribe(),c.getCanvasView().setBackgroundImage(W),N()):s.render()});s.endInteraction()}),c.getCanvasView().setUseBackgroundImage(1),n.value=!0,window.ResizeObserver?(o=new ResizeObserver(c.resize),o.observe(D)):window.addEventListener("resize",c.resize)}),ce.onBeforeUnmount(()=>{for(o?(o.disconnect(),o=null):window.removeEventListener("resize",c.resize);C.length;)C.pop().unsubscribe();S.setEnabled(!1),S.delete(),T.delete(),c.delete()}),ce.watch(()=>t.viewId,D=>{n.value&&(c.setViewId(ce.unref(D)),c.resize())}),ce.watch(()=>t.visible,D=>{ce.unref(D)&&w()}),ce.watch(()=>t.enablePicking,D=>{c.getInteractorStyle().setSendMouseMove(D),T.setBoxChangeOnClick(D)}),ce.watch(()=>t.interactiveRatio,D=>{c.setInteractiveRatio(D)}),ce.watch(()=>t.interactiveQuality,D=>{c.setInteractiveQuality(D)}),ce.watch(()=>t.stillRatio,D=>{c.setStillRatio(D)}),ce.watch(()=>t.stillQuality,D=>{c.setStillQuality(D)}),ce.watch(()=>t.boxSelection,D=>{S.setEnabled(D)}),{connected:n,vtkContainer:r,render:u,resetCamera:f,resize:w,setInteractiveQuality:l,setInteractiveRatio:p,setStillQuality:h,setStillRatio:v,getInteractiveQuality:y,getInteractiveRatio:m,getStillQuality:x,getStillRatio:g,captureImage:E}},template:`
    <div style="position:relative;width:100%;height:100%;z-index:0;">
      <div ref="vtkContainer" style="position:absolute;width:100%;height:100%;overflow:hidden;" />
      <slot style="display: none;"></slot>
    </div>
  `};var w_="WebGL",Ho=Object.create(null);function bv(t,e){Ho[t]=e}function E_(){return Object.keys(Ho)}function Mv(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ho[t]&&Ho[t](e)}function D_(t,e){e.classHierarchy.push("vtkRenderWindow"),t.addRenderer=function(n){t.hasRenderer(n)||(n.setRenderWindow(t),e.renderers.push(n),t.modified())},t.removeRenderer=function(n){e.renderers=e.renderers.filter(function(r){return r!==n}),t.modified()},t.hasRenderer=function(n){return e.renderers.indexOf(n)!==-1},t.newAPISpecificView=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Mv(n||e.defaultViewAPI,r)},t.addView=function(n){t.hasView(n)||(n.setRenderable(t),e._views.push(n),t.modified())},t.removeView=function(n){e._views=e._views.filter(function(r){return r!==n}),t.modified()},t.hasView=function(n){return e._views.indexOf(n)!==-1},t.preRender=function(){e.renderers.forEach(function(n){n.isActiveCameraCreated()||n.resetCamera()})},t.render=function(){t.preRender(),e.interactor?e.interactor.render():e._views.forEach(function(n){return n.traverseAllPasses()})},t.getStatistics=function(){var n={propCount:0,invisiblePropCount:0};return e.renderers.forEach(function(r){var a=r.getViewProps();a.forEach(function(i){if(i.getVisibility()){n.propCount+=1;var o=i.getMapper&&i.getMapper();if(o&&o.getPrimitiveCount){var s=o.getPrimitiveCount();Object.keys(s).forEach(function(c){n[c]||(n[c]=0),n[c]+=s[c]})}}else n.invisiblePropCount+=1})}),n.str=Object.keys(n).map(function(r){return"".concat(r,": ").concat(n[r])}).join(`
`),n},t.captureImages=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return B.setImmediate(t.render),e._views.map(function(a){return a.captureNextImage?a.captureNextImage(n,r):void 0}).filter(function(a){return!!a})}}var O_={defaultViewAPI:w_,renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1};function Nv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,O_,n),B.obj(t,e),B.setGet(t,e,["interactor","numberOfLayers","_views","defaultViewAPI"]),B.get(t,e,["neverRendered"]),B.getArray(t,e,["renderers"]),B.moveToProtected(t,e,["views"]),B.event(t,e,"completion"),D_(t,e)}var __=B.newInstance(Nv,"vtkRenderWindow"),bu={newInstance:__,extend:Nv,registerViewConstructor:bv,listViewAPIs:E_,newAPISpecificView:Mv},$o=B.vtkDebugMacro;function b_(t,e){e.classHierarchy.push("vtkCamera");var n=new Float64Array(3),r=new Float64Array([0,0,-1]),a=new Float64Array([0,1,0]),i=Oe(new Float64Array(16)),o=Oe(new Float64Array(16)),s=new Float64Array(3),c=new Float64Array(3),u=new Float64Array(3),f=Oe(new Float64Array(16)),l=Oe(new Float64Array(16)),p=new Float64Array(3),h=new Float64Array(3);function v(){e.viewPlaneNormal[0]=-e.directionOfProjection[0],e.viewPlaneNormal[1]=-e.directionOfProjection[1],e.viewPlaneNormal[2]=-e.directionOfProjection[2]}t.orthogonalizeViewUp=function(){var y=t.getViewMatrix();e.viewUp[0]=y[4],e.viewUp[1]=y[5],e.viewUp[2]=y[6],t.modified()},t.setPosition=function(y,m,x){y===e.position[0]&&m===e.position[1]&&x===e.position[2]||(e.position[0]=y,e.position[1]=m,e.position[2]=x,t.computeDistance(),t.modified())},t.setFocalPoint=function(y,m,x){y===e.focalPoint[0]&&m===e.focalPoint[1]&&x===e.focalPoint[2]||(e.focalPoint[0]=y,e.focalPoint[1]=m,e.focalPoint[2]=x,t.computeDistance(),t.modified())},t.setDistance=function(y){if(e.distance!==y){e.distance=y,e.distance<1e-20&&(e.distance=1e-20,$o("Distance is set to minimum."));var m=e.directionOfProjection;e.focalPoint[0]=e.position[0]+m[0]*e.distance,e.focalPoint[1]=e.position[1]+m[1]*e.distance,e.focalPoint[2]=e.position[2]+m[2]*e.distance,t.modified()}},t.computeDistance=function(){var y=e.focalPoint[0]-e.position[0],m=e.focalPoint[1]-e.position[1],x=e.focalPoint[2]-e.position[2];if(e.distance=Math.sqrt(y*y+m*m+x*x),e.distance<1e-20){e.distance=1e-20,$o("Distance is set to minimum.");var g=e.directionOfProjection;e.focalPoint[0]=e.position[0]+g[0]*e.distance,e.focalPoint[1]=e.position[1]+g[1]*e.distance,e.focalPoint[2]=e.position[2]+g[2]*e.distance}e.directionOfProjection[0]=y/e.distance,e.directionOfProjection[1]=m/e.distance,e.directionOfProjection[2]=x/e.distance,v()},t.dolly=function(y){if(!(y<=0)){var m=e.distance/y;t.setPosition(e.focalPoint[0]-m*e.directionOfProjection[0],e.focalPoint[1]-m*e.directionOfProjection[1],e.focalPoint[2]-m*e.directionOfProjection[2])}},t.roll=function(y){var m=e.position,x=e.focalPoint,g=e.viewUp,d=new Float64Array([g[0],g[1],g[2],0]);Oe(f);var C=new Float64Array([x[0]-m[0],x[1]-m[1],x[2]-m[2]]);Tt(f,f,et(y),C),Si(d,d,f),e.viewUp[0]=d[0],e.viewUp[1]=d[1],e.viewUp[2]=d[2],t.modified()},t.azimuth=function(y){var m=e.focalPoint;Oe(l),rt(l,l,m),Tt(l,l,et(y),e.viewUp),rt(l,l,[-m[0],-m[1],-m[2]]),be(p,e.position,l),t.setPosition(p[0],p[1],p[2])},t.yaw=function(y){var m=e.position;Oe(l),rt(l,l,m),Tt(l,l,et(y),e.viewUp),rt(l,l,[-m[0],-m[1],-m[2]]),be(h,e.focalPoint,l),t.setFocalPoint(h[0],h[1],h[2])},t.elevation=function(y){var m=e.focalPoint,x=t.getViewMatrix(),g=[-x[0],-x[1],-x[2]];Oe(l),rt(l,l,m),Tt(l,l,et(y),g),rt(l,l,[-m[0],-m[1],-m[2]]),be(p,e.position,l),t.setPosition(p[0],p[1],p[2])},t.pitch=function(y){var m=e.position,x=t.getViewMatrix(),g=[x[0],x[1],x[2]];Oe(l),rt(l,l,m),Tt(l,l,et(y),g),rt(l,l,[-m[0],-m[1],-m[2]]),be(h,e.focalPoint,l),t.setFocalPoint.apply(t,ve(h))},t.zoom=function(y){y<=0||(e.parallelProjection?e.parallelScale/=y:e.viewAngle/=y,t.modified())},t.translate=function(y,m,x){var g=[y,m,x];Ua(e.position,g,e.position),Ua(e.focalPoint,g,e.focalPoint),t.computeDistance(),t.modified()},t.applyTransform=function(y){var m=[].concat(ve(e.viewUp),[1]),x=[],g=[],d=[];m[0]+=e.position[0],m[1]+=e.position[1],m[2]+=e.position[2],Si(x,[].concat(ve(e.position),[1]),y),Si(g,[].concat(ve(e.focalPoint),[1]),y),Si(d,m,y),d[0]-=x[0],d[1]-=x[1],d[2]-=x[2],t.setPosition.apply(t,ve(x.slice(0,3))),t.setFocalPoint.apply(t,ve(g.slice(0,3))),t.setViewUp.apply(t,ve(d.slice(0,3)))},t.getThickness=function(){return e.clippingRange[1]-e.clippingRange[0]},t.setThickness=function(y){var m=y;m<1e-20&&(m=1e-20,$o("Thickness is set to minimum.")),t.setClippingRange(e.clippingRange[0],e.clippingRange[0]+m)},t.setThicknessFromFocalPoint=function(y){var m=y;m<1e-20&&(m=1e-20,$o("Thickness is set to minimum.")),t.setClippingRange(e.distance-m/2,e.distance+m/2)},t.setRoll=function(y){},t.getRoll=function(){},t.setObliqueAngles=function(y,m){},t.getOrientation=function(){},t.getOrientationWXYZ=function(){},t.getFrustumPlanes=function(y){},t.getCameraLightTransformMatrix=function(y){return St(y,e.cameraLightTransform),y},t.computeCameraLightTransform=function(){St(i,t.getViewMatrix()),Ft(i,i),os(o,[e.distance,e.distance,e.distance]),Ke(i,i,o),Oe(e.cameraLightTransform),rt(e.cameraLightTransform,i,[0,0,-1])},t.deepCopy=function(y){},t.physicalOrientationToWorldDirection=function(y){var m=Sc(y[0],y[1],y[2],y[3]),x=Zr(),g=Sc(0,0,1,0);return kd(x,m),Cc(g,m,g),Cc(g,g,x),[g[0],g[1],g[2]]},t.getPhysicalToWorldMatrix=function(y){t.getWorldToPhysicalMatrix(y),Ft(y,y)},t.getWorldToPhysicalMatrix=function(y){Oe(y);var m=[3];lt(e.physicalViewNorth,e.physicalViewUp,m),y[0]=m[0],y[1]=m[1],y[2]=m[2],y[4]=e.physicalViewUp[0],y[5]=e.physicalViewUp[1],y[6]=e.physicalViewUp[2],y[8]=-e.physicalViewNorth[0],y[9]=-e.physicalViewNorth[1],y[10]=-e.physicalViewNorth[2],We(y,y),Xe(s,1/e.physicalScale,1/e.physicalScale,1/e.physicalScale),Xr(y,y,s),rt(y,y,e.physicalTranslation)},t.computeViewParametersFromViewMatrix=function(y){Ft(i,y),be(s,n,i),t.computeDistance();var m=e.distance;t.setPosition(s[0],s[1],s[2]),be(c,r,i),gr(c,c,s),It(c,c),t.setDirectionOfProjection(c[0],c[1],c[2]),be(u,a,i),gr(u,u,s),It(u,u),t.setViewUp(u[0],u[1],u[2]),t.setDistance(m)},t.computeViewParametersFromPhysicalMatrix=function(y){t.getWorldToPhysicalMatrix(i),Ke(i,y,i),t.computeViewParametersFromViewMatrix(i)},t.setViewMatrix=function(y){e.viewMatrix=y,e.viewMatrix&&(St(i,e.viewMatrix),t.computeViewParametersFromViewMatrix(i),We(e.viewMatrix,e.viewMatrix))},t.getViewMatrix=function(){if(e.viewMatrix)return e.viewMatrix;cc(i,e.position,e.focalPoint,e.viewUp),We(i,i);var y=new Float64Array(16);return St(y,i),y},t.setProjectionMatrix=function(y){e.projectionMatrix=y},t.getProjectionMatrix=function(y,m,x){var g=new Float64Array(16);if(Oe(g),e.projectionMatrix){var d=1/e.physicalScale;return Xe(s,d,d,d),St(g,e.projectionMatrix),Xr(g,g,s),We(g,g),g}Oe(i);var C=e.clippingRange[1]-e.clippingRange[0],S=[e.clippingRange[0]+(m+1)*C/2,e.clippingRange[0]+(x+1)*C/2];if(e.parallelProjection){var T=e.parallelScale*y,w=e.parallelScale,E=(e.windowCenter[0]-1)*T,D=(e.windowCenter[0]+1)*T,b=(e.windowCenter[1]-1)*w,O=(e.windowCenter[1]+1)*w;uc(i,E,D,b,O,S[0],S[1]),We(i,i)}else{if(e.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");var M=Math.tan(et(e.viewAngle)/2),R,N;e.useHorizontalViewAngle===!0?(R=e.clippingRange[0]*M,N=e.clippingRange[0]*M/y):(R=e.clippingRange[0]*M*y,N=e.clippingRange[0]*M);var U=(e.windowCenter[0]-1)*R,W=(e.windowCenter[0]+1)*R,I=(e.windowCenter[1]-1)*N,G=(e.windowCenter[1]+1)*N,F=S[0],A=S[1];i[0]=2*F/(W-U),i[5]=2*F/(G-I),i[2]=(U+W)/(W-U),i[6]=(I+G)/(G-I),i[10]=-(F+A)/(A-F),i[14]=-1,i[11]=-2*F*A/(A-F),i[15]=0}return St(g,i),g},t.getCompositeProjectionMatrix=function(y,m,x){var g=t.getViewMatrix(),d=t.getProjectionMatrix(y,m,x);return Ke(d,g,d),d},t.setDirectionOfProjection=function(y,m,x){if(!(e.directionOfProjection[0]===y&&e.directionOfProjection[1]===m&&e.directionOfProjection[2]===x)){e.directionOfProjection[0]=y,e.directionOfProjection[1]=m,e.directionOfProjection[2]=x;var g=e.directionOfProjection;e.focalPoint[0]=e.position[0]+g[0]*e.distance,e.focalPoint[1]=e.position[1]+g[1]*e.distance,e.focalPoint[2]=e.position[2]+g[2]*e.distance,v()}},t.setDeviceAngles=function(y,m,x,g){var d=[3];lt(e.physicalViewNorth,e.physicalViewUp,d);var C=Oe(new Float64Array(16));Tt(C,C,et(y),e.physicalViewUp),Tt(C,C,et(m),d),Tt(C,C,et(x),e.physicalViewNorth),Tt(C,C,et(-g),e.physicalViewUp);var S=new Float64Array([-e.physicalViewUp[0],-e.physicalViewUp[1],-e.physicalViewUp[2]]),T=new Float64Array(e.physicalViewNorth);be(S,S,C),be(T,T,C),t.setDirectionOfProjection(S[0],S[1],S[2]),t.setViewUp(T[0],T[1],T[2]),t.modified()},t.setOrientationWXYZ=function(y,m,x,g){var d=Oe(new Float64Array(16));if(y!==0&&(m!==0||x!==0||g!==0)){var C=et(y),S=Zr();gs(S,[m,x,g],C),us(d,S)}var T=new Float64Array(3);be(T,[0,0,-1],d);var w=new Float64Array(3);be(w,[0,1,0],d),t.setDirectionOfProjection.apply(t,ve(T)),t.setViewUp.apply(t,ve(w)),t.modified()},t.computeClippingRange=function(y){var m=null,x=null;m=e.viewPlaneNormal,x=e.position;for(var g=-m[0],d=-m[1],C=-m[2],S=-(g*x[0]+d*x[1]+C*x[2]),T=[g*y[0]+d*y[2]+C*y[4]+S,1e-18],w=0;w<2;w++)for(var E=0;E<2;E++)for(var D=0;D<2;D++){var b=g*y[D]+d*y[2+E]+C*y[4+w]+S;T[0]=b<T[0]?b:T[0],T[1]=b>T[1]?b:T[1]}return T}}var M_={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],windowCenter:[0,0],viewPlaneNormal:[0,0,1],useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],freezeFocalPoint:!1,projectionMatrix:null,viewMatrix:null,cameraLightTransform:is(),physicalTranslation:[0,0,0],physicalScale:1,physicalViewUp:[0,1,0],physicalViewNorth:[0,0,-1]};function Rv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,M_,n),B.obj(t,e),B.get(t,e,["distance"]),B.setGet(t,e,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","useOffAxisProjection","freezeFocalPoint","physicalScale"]),B.getArray(t,e,["directionOfProjection","viewPlaneNormal","position","focalPoint"]),B.setGetArray(t,e,["clippingRange","windowCenter"],2),B.setGetArray(t,e,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight","physicalTranslation","physicalViewUp","physicalViewNorth"],3),b_(t,e)}var N_=B.newInstance(Rv,"vtkCamera"),Mu={newInstance:N_,extend:Rv},R_=["HeadLight","CameraLight","SceneLight"];function L_(t,e){e.classHierarchy.push("vtkLight");var n=new Float64Array(3);t.getTransformedPosition=function(){return e.transformMatrix?be(n,e.position,e.transformMatrix):Xe(n,e.position[0],e.position[1],e.position[2]),n},t.getTransformedFocalPoint=function(){return e.transformMatrix?be(n,e.focalPoint,e.transformMatrix):Xe(n,e.focalPoint[0],e.focalPoint[1],e.focalPoint[2]),n},t.getDirection=function(){return e.directionMTime<e.mtime&&(vs(e.direction,e.focalPoint,e.position),ot(e.direction),e.directionMTime=e.mtime),e.direction},t.setDirection=function(r){var a=new Float64Array(3);vs(a,e.position,r),e.focalPoint=a},t.setDirectionAngle=function(r,a){var i=et(r),o=et(a);t.setPosition(Math.cos(i)*Math.sin(o),Math.sin(i),Math.cos(i)*Math.cos(o)),t.setFocalPoint(0,0,0),t.setPositional(0)},t.setLightTypeToHeadLight=function(){t.setLightType("HeadLight")},t.setLightTypeToCameraLight=function(){t.setLightType("CameraLight")},t.setLightTypeToSceneLight=function(){t.setTransformMatrix(null),t.setLightType("SceneLight")},t.lightTypeIsHeadLight=function(){return e.lightType==="HeadLight"},t.lightTypeIsSceneLight=function(){return e.lightType==="SceneLight"},t.lightTypeIsCameraLight=function(){return e.lightType==="CameraLight"}}var k_={switch:!0,intensity:1,color:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,coneFalloff:5,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1,direction:[0,0,0],directionMTime:0};function Lv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,k_,n),B.obj(t,e),B.setGet(t,e,["intensity","switch","positional","exponent","coneAngle","coneFalloff","transformMatrix","lightType","shadowAttenuation","attenuationValues"]),B.setGetArray(t,e,["color","position","focalPoint","attenuationValues"],3),L_(t,e)}var F_=B.newInstance(Lv,"vtkLight"),kv={newInstance:F_,extend:Lv,LIGHT_TYPES:R_},Ko=B.vtkErrorMacro;function A_(t){return function(){return Ko("vtkViewport::".concat(t," - NOT IMPLEMENTED"))}}function V_(t,e){e.classHierarchy.push("vtkViewport"),t.getViewProps=function(){return e.props},t.hasViewProp=function(r){return e.props.includes(r)},t.addViewProp=function(r){r&&!t.hasViewProp(r)&&e.props.push(r)},t.removeViewProp=function(r){var a=e.props.filter(function(i){return i!==r});e.props.length!==a.length&&(e.props=a)},t.removeAllViewProps=function(){e.props=[]};function n(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];a.push(r);var i=r.getNestedProps();if(i&&i.length)for(var o=0;o<i.length;o++)n(i[o],a);return a}t.getViewPropsWithNestedProps=function(){for(var r=[],a=0;a<e.props.length;a++)n(e.props[a],r);return r},t.addActor2D=t.addViewProp,t.removeActor2D=function(r){t.removeViewProp(r)},t.getActors2D=function(){return e.actors2D=[],e.props.forEach(function(r){e.actors2D=e.actors2D.concat(r.getActors2D())}),e.actors2D},t.displayToView=function(){return Ko("call displayToView on your view instead")},t.viewToDisplay=function(){return Ko("callviewtodisplay on your view instead")},t.getSize=function(){return Ko("call getSize on your View instead")},t.normalizedDisplayToProjection=function(r,a,i){var o=t.normalizedDisplayToNormalizedViewport(r,a,i);return t.normalizedViewportToProjection(o[0],o[1],o[2])},t.normalizedDisplayToNormalizedViewport=function(r,a,i){var o=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[(r-e.viewport[0])/o[0],(a-e.viewport[1])/o[1],i]},t.normalizedViewportToProjection=function(r,a,i){return[r*2-1,a*2-1,i*2-1]},t.projectionToNormalizedDisplay=function(r,a,i){var o=t.projectionToNormalizedViewport(r,a,i);return t.normalizedViewportToNormalizedDisplay(o[0],o[1],o[2])},t.normalizedViewportToNormalizedDisplay=function(r,a,i){var o=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[r*o[0]+e.viewport[0],a*o[1]+e.viewport[1],i]},t.projectionToNormalizedViewport=function(r,a,i){return[(r+1)*.5,(a+1)*.5,(i+1)*.5]},t.PickPropFrom=A_("PickPropFrom")}var B_={background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]};function Fv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,B_,n),B.obj(t,e),B.event(t,e,"event"),B.setGetArray(t,e,["viewport"],4),B.setGetArray(t,e,["background","background2"],3),V_(t,e)}var U_=B.newInstance(Fv,"vtkViewport"),G_={newInstance:U_,extend:Fv},vi=an,Hr=Me,P_=Ea;function Av(t){return function(){return Hr("vtkRenderer::".concat(t," - NOT IMPLEMENTED"))}}function I_(t,e){e.classHierarchy.push("vtkRenderer");var n={type:"ComputeVisiblePropBoundsEvent",renderer:t},r={type:"ResetCameraClippingRangeEvent",renderer:t},a={type:"ResetCameraEvent",renderer:t};t.updateCamera=function(){return e.activeCamera||(vi("No cameras are on, creating one."),t.getActiveCameraAndResetIfCreated()),e.activeCamera.render(t),!0},t.updateLightsGeometryToFollowCamera=function(){var i=t.getActiveCameraAndResetIfCreated();e.lights.forEach(function(o){o.lightTypeIsSceneLight()||(o.lightTypeIsHeadLight()?(o.setPositionFrom(i.getPositionByReference()),o.setFocalPointFrom(i.getFocalPointByReference()),o.modified(i.getMTime())):o.lightTypeIsCameraLight()?o.setTransformMatrix(i.getCameraLightTransformMatrix(is())):Hr("light has unknown light type",o.get()))})},t.updateLightGeometry=function(){return e.lightFollowCamera?t.updateLightsGeometryToFollowCamera():!0},t.allocateTime=Av("allocateTime"),t.updateGeometry=Av("updateGeometry"),t.getVTKWindow=function(){return e._renderWindow},t.setLayer=function(i){vi(t.getClassName(),t,"setting Layer to ",i),e.layer!==i&&(e.layer=i,t.modified()),t.setPreserveColorBuffer(!!i)},t.setActiveCamera=function(i){return e.activeCamera===i?!1:(e.activeCamera=i,t.modified(),t.invokeEvent({type:"ActiveCameraEvent",camera:i}),!0)},t.makeCamera=function(){var i=Mu.newInstance();return t.invokeEvent({type:"CreateCameraEvent",camera:i}),i},t.getActiveCamera=function(){return e.activeCamera||(e.activeCamera=t.makeCamera()),e.activeCamera},t.getActiveCameraAndResetIfCreated=function(){return e.activeCamera||(t.getActiveCamera(),t.resetCamera()),e.activeCamera},t.getActors=function(){return e.actors=[],e.props.forEach(function(i){e.actors=e.actors.concat(i.getActors())}),e.actors},t.addActor=t.addViewProp,t.removeActor=function(i){e.actors=e.actors.filter(function(o){return o!==i}),t.removeViewProp(i),t.modified()},t.removeAllActors=function(){var i=t.getActors();i.forEach(function(o){t.removeViewProp(o)}),e.actors=[],t.modified()},t.getVolumes=function(){return e.volumes=[],e.props.forEach(function(i){e.volumes=e.volumes.concat(i.getVolumes())}),e.volumes},t.addVolume=t.addViewProp,t.removeVolume=function(i){e.volumes=e.volumes.filter(function(o){return o!==i}),t.removeViewProp(i),t.modified()},t.removeAllVolumes=function(){var i=t.getVolumes();i.forEach(function(o){t.removeViewProp(o)}),e.volumes=[],t.modified()},t.hasLight=function(i){return e.lights.includes(i)},t.addLight=function(i){i&&!t.hasLight(i)&&(e.lights.push(i),t.modified())},t.removeLight=function(i){e.lights=e.lights.filter(function(o){return o!==i}),t.modified()},t.removeAllLights=function(){e.lights=[],t.modified()},t.setLightCollection=function(i){e.lights=i,t.modified()},t.makeLight=kv.newInstance,t.createLight=function(){e.automaticLightCreation&&(e._createdLight&&(t.removeLight(e._createdLight),e._createdLight.delete(),e._createdLight=null),e._createdLight=t.makeLight(),t.addLight(e._createdLight),e._createdLight.setLightTypeToHeadLight(),e._createdLight.setPosition(t.getActiveCamera().getPosition()),e._createdLight.setFocalPoint(t.getActiveCamera().getFocalPoint()))},t.normalizedDisplayToWorld=function(i,o,s,c){var u=t.normalizedDisplayToProjection(i,o,s);return u=t.projectionToView(u[0],u[1],u[2],c),t.viewToWorld(u[0],u[1],u[2])},t.worldToNormalizedDisplay=function(i,o,s,c){var u=t.worldToView(i,o,s);return u=t.viewToProjection(u[0],u[1],u[2],c),t.projectionToNormalizedDisplay(u[0],u[1],u[2])},t.viewToWorld=function(i,o,s){if(e.activeCamera===null)return Hr("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];var c=e.activeCamera.getViewMatrix();Ft(c,c),We(c,c);var u=new Float64Array([i,o,s]);return be(u,u,c),u},t.projectionToView=function(i,o,s,c){if(e.activeCamera===null)return Hr("ProjectionToView: no active camera, cannot compute projection to view, returning 0,0,0"),[0,0,0];var u=e.activeCamera.getProjectionMatrix(c,-1,1);Ft(u,u),We(u,u);var f=new Float64Array([i,o,s]);return be(f,f,u),f},t.worldToView=function(i,o,s){if(e.activeCamera===null)return Hr("WorldToView: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];var c=e.activeCamera.getViewMatrix();We(c,c);var u=new Float64Array([i,o,s]);return be(u,u,c),u},t.viewToProjection=function(i,o,s,c){if(e.activeCamera===null)return Hr("ViewToProjection: no active camera, cannot compute view to projection, returning 0,0,0"),[0,0,0];var u=e.activeCamera.getProjectionMatrix(c,-1,1);We(u,u);var f=new Float64Array([i,o,s]);return be(f,f,u),f},t.computeVisiblePropBounds=function(){e.allBounds[0]=Ve.INIT_BOUNDS[0],e.allBounds[1]=Ve.INIT_BOUNDS[1],e.allBounds[2]=Ve.INIT_BOUNDS[2],e.allBounds[3]=Ve.INIT_BOUNDS[3],e.allBounds[4]=Ve.INIT_BOUNDS[4],e.allBounds[5]=Ve.INIT_BOUNDS[5];var i=!0;t.invokeEvent(n);for(var o=0;o<e.props.length;++o){var s=e.props[o];if(s.getVisibility()&&s.getUseBounds()){var c=s.getBounds();c&&Xi(c)&&(i=!1,c[0]<e.allBounds[0]&&(e.allBounds[0]=c[0]),c[1]>e.allBounds[1]&&(e.allBounds[1]=c[1]),c[2]<e.allBounds[2]&&(e.allBounds[2]=c[2]),c[3]>e.allBounds[3]&&(e.allBounds[3]=c[3]),c[4]<e.allBounds[4]&&(e.allBounds[4]=c[4]),c[5]>e.allBounds[5]&&(e.allBounds[5]=c[5]))}}return i&&(Wn(e.allBounds),vi("Can't compute bounds, no 3D props are visible")),e.allBounds},t.resetCamera=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,o=i||t.computeVisiblePropBounds(),s=[0,0,0];if(!Xi(o))return vi("Cannot reset camera!"),!1;var c=null;if(t.getActiveCamera())c=e.activeCamera.getViewPlaneNormal();else return Hr("Trying to reset non-existent camera"),!1;e.activeCamera.setViewAngle(30),s[0]=(o[0]+o[1])/2,s[1]=(o[2]+o[3])/2,s[2]=(o[4]+o[5])/2;var u=o[1]-o[0],f=o[3]-o[2],l=o[5]-o[4];u*=u,f*=f,l*=l;var p=u+f+l;p=p===0?1:p,p=Math.sqrt(p)*.5;var h=et(e.activeCamera.getViewAngle()),v=p,y=p/Math.sin(h*.5),m=e.activeCamera.getViewUp();return Math.abs(_e(m,c))>.999&&(P_("Resetting view-up since view plane normal is parallel"),e.activeCamera.setViewUp(-m[2],m[0],m[1])),e.activeCamera.setFocalPoint(s[0],s[1],s[2]),e.activeCamera.setPosition(s[0]+y*c[0],s[1]+y*c[1],s[2]+y*c[2]),t.resetCameraClippingRange(o),e.activeCamera.setParallelScale(v),e.activeCamera.setPhysicalScale(p),e.activeCamera.setPhysicalTranslation(-s[0],-s[1],-s[2]),t.invokeEvent(a),!0},t.resetCameraClippingRange=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,o=i||t.computeVisiblePropBounds();if(!Xi(o))return vi("Cannot reset camera clipping range!"),!1;if(t.getActiveCameraAndResetIfCreated(),!e.activeCamera)return Hr("Trying to reset clipping range of non-existent camera"),!1;var s=e.activeCamera.computeClippingRange(o),c=0;if(e.activeCamera.getParallelProjection())c=.2*e.activeCamera.getParallelScale();else{var u=et(e.activeCamera.getViewAngle());c=.2*Math.tan(u/2)*s[1]}return s[1]-s[0]<c&&(c=c-s[1]+s[0],s[1]+=c/2,s[0]-=c/2),s[0]<0&&(s[0]=0),s[0]=.99*s[0]-(s[1]-s[0])*e.clippingRangeExpansion,s[1]=1.01*s[1]+(s[1]-s[0])*e.clippingRangeExpansion,s[0]=s[0]>=s[1]?.01*s[1]:s[0],e.nearClippingPlaneTolerance||(e.nearClippingPlaneTolerance=.01),s[0]<e.nearClippingPlaneTolerance*s[1]&&(s[0]=e.nearClippingPlaneTolerance*s[1]),e.activeCamera.setClippingRange(s[0],s[1]),t.invokeEvent(r),!1},t.setRenderWindow=function(i){i!==e._renderWindow&&(e._vtkWindow=i,e._renderWindow=i)},t.visibleActorCount=function(){return e.props.filter(function(i){return i.getVisibility()}).length},t.visibleVolumeCount=t.visibleActorCount,t.getMTime=function(){var i=e.mtime,o=e.activeCamera?e.activeCamera.getMTime():0;o>i&&(i=o);var s=e._createdLight?e._createdLight.getMTime():0;return s>i&&(i=s),i},t.getTransparent=function(){return!!e.preserveColorBuffer},t.isActiveCameraCreated=function(){return!!e.activeCamera}}var j_={pickedProp:null,activeCamera:null,allBounds:[],ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:0,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:hn(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,environmentTexture:null,environmentTextureDiffuseStrength:1,environmentTextureSpecularStrength:1,useEnvironmentTextureAsBackground:!1,pass:0};function Vv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(Object.assign(e,j_,n),G_.extend(t,e,n),e.background||(e.background=[0,0,0,1]);e.background.length<3;)e.background.push(0);e.background.length===3&&e.background.push(1),jt(t,e,["_renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),dt(t,e,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","environmentTexture","environmentTextureDiffuseStrength","environmentTextureSpecularStrength","useEnvironmentTextureAsBackground","useShadows","pass"]),Ni(t,e,["actors","volumes","lights"]),bs(t,e,["background"],4,1),Ri(t,e,["renderWindow"]),I_(t,e)}var z_=Je(Vv,"vtkRenderer"),Bv={newInstance:z_,extend:Vv},Xo=B.vtkErrorMacro;function W_(t,e){e.classHierarchy.push("vtkPiecewiseFunction"),t.getSize=function(){return e.nodes.length},t.getType=function(){var n,r=0,a=0;e.nodes.length>0&&(r=e.nodes[0].y);for(var i=1;i<e.nodes.length;i++){if(n=e.nodes[i].y,n!==r)if(n>r)switch(a){case 0:case 1:a=1;break;case 2:default:a=3;break}else switch(a){case 0:case 2:a=2;break;case 1:default:a=3;break}if(r=n,a===3)break}switch(a){case 0:return"Constant";case 1:return"NonDecreasing";case 2:return"NonIncreasing";case 3:default:return"Varied"}},t.getDataPointer=function(){var n=e.nodes.length;if(e.function=null,n>0){e.function=[];for(var r=0;r<n;r++)e.function[2*r]=e.nodes[r].x,e.function[2*r+1]=e.nodes[r].y}return e.function},t.getFirstNonZeroValue=function(){if(e.nodes.length===0)return 0;for(var n=1,r=0,a=0;a<e.nodes.length;a++)if(e.nodes[a].y!==0){n=0;break}return n?r=Number.MAX_VALUE:a>0?r=e.nodes[a-1].x:e.clamping?r=-Number.MAX_VALUE:r=e.nodes[0].x,r},t.getNodeValue=function(n,r){var a=e.nodes.length;return n<0||n>=a?(Xo("Index out of range!"),-1):(r[0]=e.nodes[n].x,r[1]=e.nodes[n].y,r[2]=e.nodes[n].midpoint,r[3]=e.nodes[n].sharpness,1)},t.setNodeValue=function(n,r){var a=e.nodes.length;if(n<0||n>=a)return Xo("Index out of range!"),-1;var i=e.nodes[n].x;return e.nodes[n].x=r[0],e.nodes[n].y=r[1],e.nodes[n].midpoint=r[2],e.nodes[n].sharpness=r[3],i!==r[0]?t.sortAndUpdateRange():t.modified(),1},t.addPoint=function(n,r){return t.addPointLong(n,r,.5,0)},t.addPointLong=function(n,r,a,i){if(a<0||a>1)return Xo("Midpoint outside range [0.0, 1.0]"),-1;if(i<0||i>1)return Xo("Sharpness outside range [0.0, 1.0]"),-1;e.allowDuplicateScalars||t.removePoint(n);var o={x:n,y:r,midpoint:a,sharpness:i};e.nodes.push(o),t.sortAndUpdateRange();var s;for(s=0;s<e.nodes.length&&e.nodes[s].x!==n;s++);return s<e.nodes.length?s:-1},t.setNodes=function(n){e.nodes!==n&&(e.nodes=n,t.sortAndUpdateRange())},t.sortAndUpdateRange=function(){e.nodes.sort(function(r,a){return r.x-a.x});var n=t.updateRange();n||t.modified()},t.updateRange=function(){var n=e.range.slice(),r=e.nodes.length;return r?(e.range[0]=e.nodes[0].x,e.range[1]=e.nodes[r-1].x):(e.range[0]=0,e.range[1]=0),n[0]===e.range[0]&&n[1]===e.range[1]?!1:(t.modified(),!0)},t.removePoint=function(n){var r;for(r=0;r<e.nodes.length&&e.nodes[r].x!==n;r++);if(r>=e.nodes.length)return-1;var a=r,i=!1;return e.nodes.splice(r,1),(r===0||r===e.nodes.length)&&(i=t.updateRange()),i||t.modified(),a},t.removeAllPoints=function(){e.nodes=[],t.sortAndUpdateRange()},t.addSegment=function(n,r,a,i){t.sortAndUpdateRange();for(var o=0;o<e.nodes.length;)e.nodes[o].x>=n&&e.nodes[o].x<=a?e.nodes.splice(o,1):o++;t.addPoint(n,r,.5,0),t.addPoint(a,i,.5,0)},t.getValue=function(n){var r=[];return t.getTable(n,n,1,r),r[0]},t.adjustRange=function(n){if(n.length<2)return 0;var r=t.getRange();r[0]<n[0]?t.addPoint(n[0],t.getValue(n[0])):t.addPoint(n[0],t.getValue(r[0])),r[1]>n[1]?t.addPoint(n[1],t.getValue(n[1])):t.addPoint(n[1],t.getValue(r[1])),t.sortAndUpdateRange();for(var a=0;a<e.nodes.length;)e.nodes[a].x>=n[0]&&e.nodes[a].x<=n[1]?e.nodes.splice(a,1):++a;return t.sortAndUpdateRange(),1},t.estimateMinNumberOfSamples=function(n,r){var a=t.findMinimumXDistance();return Math.ceil((r-n)/a)},t.findMinimumXDistance=function(){var n=e.nodes.length;if(n<2)return-1;for(var r=e.nodes[1].x-e.nodes[0].x,a=0;a<n-1;a++){var i=e.nodes[a+1].x-e.nodes[a].x;i<r&&(r=i)}return r},t.getTable=function(n,r,a,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,s,c=0,u=e.nodes.length,f=0;u!==0&&(f=e.nodes[u-1].y);var l=0,p=0,h=0,v=0,y=0,m=0,x=0;for(s=0;s<a;s++){var g=o*s;for(a>1?l=n+s/(a-1)*(r-n):l=.5*(n+r);c<u&&l>e.nodes[c].x;)c++,c<u&&(p=e.nodes[c-1].x,h=e.nodes[c].x,v=e.nodes[c-1].y,y=e.nodes[c].y,m=e.nodes[c-1].midpoint,x=e.nodes[c-1].sharpness,m<1e-5&&(m=1e-5),m>.99999&&(m=.99999));if(c>=u)i[g]=e.clamping?f:0;else if(c===0)i[g]=e.clamping?e.nodes[0].y:0;else{var d=(l-p)/(h-p);if(d<m?d=.5*d/m:d=.5+.5*(d-m)/(1-m),x>.99)if(d<.5){i[g]=v;continue}else{i[g]=y;continue}if(x<.01){i[g]=(1-d)*v+d*y;continue}d<.5?d=.5*Math.pow(d*2,1+10*x):d>.5&&(d=1-.5*Math.pow((1-d)*2,1+10*x));var C=d*d,S=C*d,T=2*S-3*C+1,w=-2*S+3*C,E=S-2*C+d,D=S-C,b=y-v,O=(1-x)*b;i[g]=T*v+w*y+E*O+D*O;var M=v<y?v:y,R=v>y?v:y;i[g]=i[g]<M?M:i[g],i[g]=i[g]>R?R:i[g]}}}}var H_={range:[0,0],clamping:!0,allowDuplicateScalars:!1};function Uv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,H_,n),B.obj(t,e),e.nodes=[],B.setGet(t,e,["allowDuplicateScalars","clamping"]),B.setArray(t,e,["range"],2),B.getArray(t,e,["range"]),W_(t,e)}var $_=B.newInstance(Uv,"vtkPiecewiseFunction"),qo={newInstance:$_,extend:Uv};function Gv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function K_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gv(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var gi=Z0.InterpolationType,X_=Z0.OpacityMode,Nu=B.vtkErrorMacro,Yo=4;function q_(t,e){e.classHierarchy.push("vtkVolumeProperty"),t.getMTime=function(){for(var a=e.mtime,i,o=0;o<Yo;o++)e.componentData[o].colorChannels===1?e.componentData[o].grayTransferFunction&&(i=e.componentData[o].grayTransferFunction.getMTime(),a=a>i?a:i):e.componentData[o].colorChannels===3&&e.componentData[o].rGBTransferFunction&&(i=e.componentData[o].rGBTransferFunction.getMTime(),a=a>i?a:i),e.componentData[o].scalarOpacity&&(i=e.componentData[o].scalarOpacity.getMTime(),a=a>i?a:i),e.componentData[o].gradientOpacity&&(e.componentData[o].disableGradientOpacity||(i=e.componentData[o].gradientOpacity.getMTime(),a=a>i?a:i));return a},t.getColorChannels=function(a){return a<0||a>3?(Nu("Bad index - must be between 0 and 3"),0):e.componentData[a].colorChannels},t.setGrayTransferFunction=function(a,i){var o=!1;return e.componentData[a].grayTransferFunction!==i&&(e.componentData[a].grayTransferFunction=i,o=!0),e.componentData[a].colorChannels!==1&&(e.componentData[a].colorChannels=1,o=!0),o&&t.modified(),o},t.getGrayTransferFunction=function(a){return e.componentData[a].grayTransferFunction===null&&(e.componentData[a].grayTransferFunction=qo.newInstance(),e.componentData[a].grayTransferFunction.addPoint(0,0),e.componentData[a].grayTransferFunction.addPoint(1024,1),e.componentData[a].colorChannels!==1&&(e.componentData[a].colorChannels=1),t.modified()),e.componentData[a].grayTransferFunction},t.setRGBTransferFunction=function(a,i){var o=!1;return e.componentData[a].rGBTransferFunction!==i&&(e.componentData[a].rGBTransferFunction=i,o=!0),e.componentData[a].colorChannels!==3&&(e.componentData[a].colorChannels=3,o=!0),o&&t.modified(),o},t.getRGBTransferFunction=function(a){return e.componentData[a].rGBTransferFunction===null&&(e.componentData[a].rGBTransferFunction=xu.newInstance(),e.componentData[a].rGBTransferFunction.addRGBPoint(0,0,0,0),e.componentData[a].rGBTransferFunction.addRGBPoint(1024,1,1,1),e.componentData[a].colorChannels!==3&&(e.componentData[a].colorChannels=3),t.modified()),e.componentData[a].rGBTransferFunction},t.setScalarOpacity=function(a,i){return e.componentData[a].scalarOpacity!==i?(e.componentData[a].scalarOpacity=i,t.modified(),!0):!1},t.getScalarOpacity=function(a){return e.componentData[a].scalarOpacity===null&&(e.componentData[a].scalarOpacity=qo.newInstance(),e.componentData[a].scalarOpacity.addPoint(0,1),e.componentData[a].scalarOpacity.addPoint(1024,1),t.modified()),e.componentData[a].scalarOpacity},t.setComponentWeight=function(a,i){if(a<0||a>=Yo)return Nu("Invalid index"),!1;var o=Math.min(1,Math.max(0,i));return e.componentData[a].componentWeight!==o?(e.componentData[a].componentWeight=o,t.modified(),!0):!1},t.getComponentWeight=function(a){return a<0||a>=Yo?(Nu("Invalid index"),0):e.componentData[a].componentWeight},t.setInterpolationTypeToNearest=function(){return t.setInterpolationType(gi.NEAREST)},t.setInterpolationTypeToLinear=function(){return t.setInterpolationType(gi.LINEAR)},t.setInterpolationTypeToFastLinear=function(){return t.setInterpolationType(gi.FAST_LINEAR)},t.getInterpolationTypeAsString=function(){return B.enumToString(gi,e.interpolationType)};var n=["useGradientOpacity","scalarOpacityUnitDistance","gradientOpacityMinimumValue","gradientOpacityMinimumOpacity","gradientOpacityMaximumValue","gradientOpacityMaximumOpacity","opacityMode"];n.forEach(function(a){var i=B.capitalize(a);t["set".concat(i)]=function(o,s){return e.componentData[o]["".concat(a)]!==s?(e.componentData[o]["".concat(a)]=s,t.modified(),!0):!1}});var r=["useGradientOpacity","scalarOpacityUnitDistance","gradientOpacityMinimumValue","gradientOpacityMinimumOpacity","gradientOpacityMaximumValue","gradientOpacityMaximumOpacity","opacityMode"];r.forEach(function(a){var i=B.capitalize(a);t["get".concat(i)]=function(o){return e.componentData[o]["".concat(a)]}})}var Y_={independentComponents:!0,interpolationType:gi.FAST_LINEAR,shade:!1,ambient:.1,diffuse:.7,specular:.2,specularPower:10,useLabelOutline:!1,labelOutlineThickness:1,labelOutlineOpacity:1};function Pv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,Y_,n),B.obj(t,e),!e.componentData){e.componentData=[];for(var r=0;r<Yo;++r)e.componentData.push({colorChannels:1,grayTransferFunction:null,rGBTransferFunction:null,scalarOpacity:null,scalarOpacityUnitDistance:1,opacityMode:X_.FRACTIONAL,gradientOpacityMinimumValue:0,gradientOpacityMinimumOpacity:0,gradientOpacityMaximumValue:1,gradientOpacityMaximumOpacity:1,useGradientOpacity:!1,componentWeight:1})}B.setGet(t,e,["independentComponents","interpolationType","shade","ambient","diffuse","specular","specularPower","useLabelOutline","labelOutlineThickness","labelOutlineOpacity"]),q_(t,e)}var J_=B.newInstance(Pv,"vtkVolumeProperty"),Iv=K_({newInstance:J_,extend:Pv},Z0),Z_=B.vtkDebugMacro;function Q_(t,e){e.classHierarchy.push("vtkVolume"),t.getVolumes=function(){return t},t.makeProperty=Iv.newInstance,t.getProperty=function(){return e.property===null&&(e.property=t.makeProperty()),e.property},t.getBounds=function(){if(e.mapper===null)return e.bounds;var n=e.mapper.getBounds();if(!n||n.length!==6)return n;if(n[0]>n[1])return e.mapperBounds=n.concat(),e.bounds=[1,-1,1,-1,1,-1],e.boundsMTime.modified(),n;var r=function(s){return s[0].map(function(c,u){return s.map(function(f){return f[u]})})};if(!e.mapperBounds||!r([n,e.mapperBounds]).reduce(function(o,s){return o&&s[0]===s[1]},!0)||t.getMTime()>e.boundsMTime.getMTime()){Z_("Recomputing bounds..."),e.mapperBounds=n.map(function(o){return o});var a=[];Ve.getCorners(n,a),t.computeMatrix();var i=new Float64Array(16);We(i,e.matrix),a.forEach(function(o){return be(o,o,i)}),e.bounds[0]=e.bounds[2]=e.bounds[4]=Number.MAX_VALUE,e.bounds[1]=e.bounds[3]=e.bounds[5]=-Number.MAX_VALUE,e.bounds=e.bounds.map(function(o,s){return s%2===0?a.reduce(function(c,u){return c>u[s/2]?u[s/2]:c},o):a.reduce(function(c,u){return c<u[(s-1)/2]?u[(s-1)/2]:c},o)}),e.boundsMTime.modified()}return e.bounds},t.getMTime=function(){var n=e.mtime;if(e.property!==null){var r=e.property.getMTime();n=r>n?r:n}return n},t.getRedrawMTime=function(){var n=e.mtime;if(e.mapper!==null){var r=e.mapper.getMTime();n=r>n?r:n,e.mapper.getInput()!==null&&(e.mapper.getInputAlgorithm().update(),r=e.mapper.getInput().getMTime(),n=r>n?r:n)}return n}}var eb={mapper:null,property:null,bounds:[1,-1,1,-1,1,-1]};function jv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,eb,n),d0.extend(t,e,n),e.boundsMTime={},B.obj(e.boundsMTime),B.set(t,e,["property"]),B.setGet(t,e,["mapper"]),B.getArray(t,e,["bounds"],6),Q_(t,e)}var tb=B.newInstance(jv,"vtkVolume"),rb={newInstance:tb,extend:jv};function zv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Wv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zv(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var $r=Qp.BlendMode,di=Qp.FilterMode;function nb(t,e,n,r,a){var i=null;return a?(i=a,i.removeAllPoints()):i=qo.newInstance(),i.addPointLong(-1024,0,1,1),i.addPoint(t,e),i.addPoint(n,r),i}var ab={createRadonTransferFunction:nb};function ib(t,e){e.classHierarchy.push("vtkVolumeMapper");var n=Wv({},t);t.getBounds=function(){var r=t.getInputData();return r?(e.static||t.update(),e.bounds=r.getBounds()):e.bounds=hn(),e.bounds},t.update=function(){t.getInputData()},t.setBlendModeToComposite=function(){t.setBlendMode($r.COMPOSITE_BLEND)},t.setBlendModeToMaximumIntensity=function(){t.setBlendMode($r.MAXIMUM_INTENSITY_BLEND)},t.setBlendModeToMinimumIntensity=function(){t.setBlendMode($r.MINIMUM_INTENSITY_BLEND)},t.setBlendModeToAverageIntensity=function(){t.setBlendMode($r.AVERAGE_INTENSITY_BLEND)},t.setBlendModeToAdditiveIntensity=function(){t.setBlendMode($r.ADDITIVE_INTENSITY_BLEND)},t.setBlendModeToRadonTransform=function(){t.setBlendMode($r.RADON_TRANSFORM_BLEND)},t.getBlendModeAsString=function(){return B.enumToString($r,e.blendMode)},t.setAverageIPScalarRange=function(r,a){console.warn("setAverageIPScalarRange is deprecated use setIpScalarRange"),t.setIpScalarRange(r,a)},t.getFilterModeAsString=function(){return B.enumToString(di,e.filterMode)},t.setFilterModeToOff=function(){t.setFilterMode(di.OFF)},t.setFilterModeToNormalized=function(){t.setFilterMode(di.NORMALIZED)},t.setFilterModeToRaw=function(){t.setFilterMode(di.RAW)},t.setGlobalIlluminationReach=function(r){return n.setGlobalIlluminationReach(Jt(r,0,1))},t.setVolumetricScatteringBlending=function(r){return n.setVolumetricScatteringBlending(Jt(r,0,1))},t.setVolumeShadowSamplingDistFactor=function(r){return n.setVolumeShadowSamplingDistFactor(r>=1?r:1)},t.setAnisotropy=function(r){return n.setAnisotropy(Jt(r,-.99,.99))},t.setLAOKernelSize=function(r){return n.setLAOKernelSize(qs(Jt(r,1,32)))},t.setLAOKernelRadius=function(r){return n.setLAOKernelRadius(r>=1?r:1)}}var ob={bounds:[1,-1,1,-1,1,-1],sampleDistance:1,imageSampleDistance:1,maximumSamplesPerRay:1e3,autoAdjustSampleDistances:!0,blendMode:$r.COMPOSITE_BLEND,ipScalarRange:[-1e6,1e6],filterMode:di.OFF,preferSizeOverAccuracy:!1,computeNormalFromOpacity:!1,volumetricScatteringBlending:0,globalIlluminationReach:0,volumeShadowSamplingDistFactor:5,anisotropy:0,localAmbientOcclusion:!1,LAOKernelSize:15,LAOKernelRadius:7};function Hv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ob,n),C0.extend(t,e,n),B.setGet(t,e,["sampleDistance","imageSampleDistance","maximumSamplesPerRay","autoAdjustSampleDistances","blendMode","filterMode","preferSizeOverAccuracy","computeNormalFromOpacity","volumetricScatteringBlending","globalIlluminationReach","volumeShadowSamplingDistFactor","anisotropy","localAmbientOcclusion","LAOKernelSize","LAOKernelRadius"]),B.setGetArray(t,e,["ipScalarRange"],2),B.event(t,e,"lightingActivated"),ib(t,e)}var sb=B.newInstance(Hv,"vtkVolumeMapper"),ub=Wv({newInstance:sb,extend:Hv},ab),Jo=hx.InterpolationType,$v=B.vtkErrorMacro,Zo=4;function cb(t,e){e.classHierarchy.push("vtkImageProperty"),t.getMTime=function(){for(var n=e.mtime,r,a=0;a<Zo;a++)e.componentData[a].rGBTransferFunction&&(r=e.componentData[a].rGBTransferFunction.getMTime(),n=n>r?n:r),e.componentData[a].piecewiseFunction&&(r=e.componentData[a].piecewiseFunction.getMTime(),n=n>r?n:r);return n},t.setRGBTransferFunction=function(n,r){var a=n,i=r;return Number.isInteger(n)||(i=n,a=0),e.componentData[a].rGBTransferFunction!==i?(e.componentData[a].rGBTransferFunction=i,t.modified(),!0):!1},t.getRGBTransferFunction=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[n].rGBTransferFunction},t.setPiecewiseFunction=function(n,r){var a=n,i=r;return Number.isInteger(n)||(i=n,a=0),e.componentData[a].piecewiseFunction!==i?(e.componentData[a].piecewiseFunction=i,t.modified(),!0):!1},t.getPiecewiseFunction=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[n].piecewiseFunction},t.setScalarOpacity=function(n,r){var a=n,i=r;return Number.isInteger(n)||(i=n,a=0),t.setPiecewiseFunction(a,i)},t.getScalarOpacity=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return t.getPiecewiseFunction(n)},t.setComponentWeight=function(n,r){if(n<0||n>=Zo)return $v("Invalid index"),!1;var a=Math.min(1,Math.max(0,r));return e.componentData[n].componentWeight!==a?(e.componentData[n].componentWeight=a,t.modified(),!0):!1},t.getComponentWeight=function(n){return n<0||n>=Zo?($v("Invalid index"),0):e.componentData[n].componentWeight},t.setInterpolationTypeToNearest=function(){return t.setInterpolationType(Jo.NEAREST)},t.setInterpolationTypeToLinear=function(){return t.setInterpolationType(Jo.LINEAR)},t.getInterpolationTypeAsString=function(){return B.enumToString(Jo,e.interpolationType)}}var fb={independentComponents:!1,interpolationType:Jo.LINEAR,colorWindow:255,colorLevel:127.5,ambient:1,diffuse:0,opacity:1,useLookupTableScalarRange:!1};function Kv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,fb,n),B.obj(t,e),!e.componentData){e.componentData=[];for(var r=0;r<Zo;r++)e.componentData.push({rGBTransferFunction:null,piecewiseFunction:null,componentWeight:1})}B.setGet(t,e,["independentComponents","interpolationType","colorWindow","colorLevel","ambient","diffuse","opacity","useLookupTableScalarRange"]),cb(t,e)}var lb=B.newInstance(Kv,"vtkImageProperty"),Xv={newInstance:lb,extend:Kv},pb=B.vtkDebugMacro;function hb(t,e){e.classHierarchy.push("vtkImageSlice"),t.getActors=function(){return t},t.getImages=function(){return t},t.getIsOpaque=function(){if(e.forceOpaque)return!0;if(e.forceTranslucent)return!1;e.property||t.getProperty();var n=e.property.getOpacity()>=1;return n=n&&(!e.mapper||e.mapper.getIsOpaque()),n},t.hasTranslucentPolygonalGeometry=function(){return!1},t.makeProperty=Xv.newInstance,t.getProperty=function(){return e.property===null&&(e.property=t.makeProperty()),e.property},t.getBounds=function(){if(e.mapper===null)return e.bounds;var n=e.mapper.getBounds();if(!n||n.length!==6)return n;if(n[0]>n[1])return e.mapperBounds=n.concat(),e.bounds=[1,-1,1,-1,1,-1],e.boundsMTime.modified(),n;var r=function(o){return o[0].map(function(s,c){return o.map(function(u){return u[c]})})};if(!e.mapperBounds||!r([n,e.mapperBounds]).reduce(function(i,o){return i&&o[0]===o[1]},!0)||t.getMTime()>e.boundsMTime.getMTime()){pb("Recomputing bounds..."),e.mapperBounds=n.map(function(i){return i}),t.computeMatrix();var a=new Float64Array(16);We(a,e.matrix),Ve.transformBounds(n,a,e.bounds),e.boundsMTime.modified()}return e.bounds},t.getBoundsForSlice=function(n,r){var a=e.mapper.getBoundsForSlice(n,r);if(!Ve.isValid(a))return a;t.computeMatrix();var i=new Float64Array(16);We(i,e.matrix);var o=Ve.transformBounds(a,i);return o},t.getMinXBound=function(){return t.getBounds()[0]},t.getMaxXBound=function(){return t.getBounds()[1]},t.getMinYBound=function(){return t.getBounds()[2]},t.getMaxYBound=function(){return t.getBounds()[3]},t.getMinZBound=function(){return t.getBounds()[4]},t.getMaxZBound=function(){return t.getBounds()[5]},t.getMTime=function(){var n=e.mtime;if(e.property!==null){var r=e.property.getMTime();n=r>n?r:n}return n},t.getRedrawMTime=function(){var n=e.mtime;if(e.mapper!==null){var r=e.mapper.getMTime();n=r>n?r:n,e.mapper.getInput()!==null&&(e.mapper.getInputAlgorithm().update(),r=e.mapper.getInput().getMTime(),n=r>n?r:n)}if(e.property!==null){var a=e.property.getMTime();n=a>n?a:n,e.property.getRGBTransferFunction()!==null&&(a=e.property.getRGBTransferFunction().getMTime(),n=a>n?a:n)}return n},t.getSupportsSelection=function(){return e.mapper?e.mapper.getSupportsSelection():!1}}var vb={mapper:null,property:null,bounds:ve(Ve.INIT_BOUNDS)};function qv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,vb,n),d0.extend(t,e,n),e.boundsMTime={},B.obj(e.boundsMTime),B.set(t,e,["property"]),B.setGet(t,e,["mapper"]),B.getArray(t,e,["bounds"],6),hb(t,e)}var gb=B.newInstance(qv,"vtkImageSlice"),db={newInstance:gb,extend:qv};function yb(t,e){e.classHierarchy.push("vtkAbstractImageMapper"),t.getIsOpaque=function(){return!0},t.getCurrentImage=function(){return null}}var mb={slice:0,customDisplayExtent:[0,0,0,0,0,0],useCustomExtents:!1,backgroundColor:[0,0,0,1]};function xb(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,mb,n),ql.extend(t,e,n),B.setGet(t,e,["slice","useCustomExtents"]),B.setGetArray(t,e,["customDisplayExtent"],6),B.setGetArray(t,e,["backgroundColor"],4),yb(t,e)}var Cb={extend:xb};function Yv(t,e,n){var r=n.getCurrentImage(),a=r.getExtent(),i=[a[0],a[2],a[4]],o=n.getClosestIJKAxis(),s=o.ijkMode,c=n.isA("vtkImageArrayMapper")?n.getSubSlice():n.getSlice();s!==n.getSlicingMode()&&(c=n.getSliceAtPosition(c)),i[s]+=c;var u=[0,0,0];r.indexToWorld(i,u),i[s]+=1;var f=[0,0,0];r.indexToWorld(i,f),f[0]-=u[0],f[1]-=u[1],f[2]-=u[2],It(f,f);var l=Fr.intersectWithLine(t,e,u,f);if(l.intersection){var p=l.x,h=[0,0,0];return r.worldToIndex(p,h),{t:l.t,absoluteIJK:h}}return null}function Sb(t,e,n){var r=Yv(t,e,n);if(r){var a=n.getCurrentImage(),i=a.getExtent(),o=[Math.round(r.absoluteIJK[0]),Math.round(r.absoluteIJK[1]),Math.round(r.absoluteIJK[2])];return o[0]<i[0]||o[0]>i[1]||o[1]<i[2]||o[1]>i[3]||o[2]<i[4]||o[2]>i[5]?null:{t:r.t,ijk:o}}return null}function Tb(t,e,n){var r=Yv(t,e,n);if(r){var a=n.getCurrentImage(),i=a.getExtent(),o=r.absoluteIJK,s=[Math.floor(o[0]),Math.floor(o[1]),Math.floor(o[2])];if(s[0]<i[0]||s[0]>i[1]-1||s[1]<i[2]||s[1]>i[3]-1||s[2]<i[4]||s[2]>(i[5]?i[5]-1:i[5]))return null;var c=[o[0]-s[0],o[1]-s[1],o[2]-s[2]];return{t:r.t,ijk:s,pCoords:c}}return null}function Jv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Ru(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jv(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var wb=$n.staticOffsetAPI,Eb=$n.otherStaticMethods,Db=B.vtkWarningMacro,Ge=Y0.SlicingMode;function Ob(t,e){e.classHierarchy.push("vtkImageMapper"),t.getSliceAtPosition=function(r){var a=t.getCurrentImage(),i;if(r.length===3)i=r;else if(Number.isFinite(r)){var o=a.getBounds();switch(e.slicingMode){case Ge.X:i=[r,(o[3]+o[2])/2,(o[5]+o[4])/2];break;case Ge.Y:i=[(o[1]+o[0])/2,r,(o[5]+o[4])/2];break;case Ge.Z:i=[(o[1]+o[0])/2,(o[3]+o[2])/2,r];break}}var s=[0,0,0];a.worldToIndex(i,s);var c=a.getExtent(),u=t.getClosestIJKAxis(),f=u.ijkMode,l=0;switch(f){case Ge.I:l=Jt(s[0],c[0],c[1]);break;case Ge.J:l=Jt(s[1],c[2],c[3]);break;case Ge.K:l=Jt(s[2],c[4],c[5]);break;default:return 0}return l},t.setSliceFromCamera=function(r){var a=r.getFocalPoint();switch(e.slicingMode){case Ge.I:case Ge.J:case Ge.K:{var i=t.getSliceAtPosition(a);t.setSlice(i)}break;case Ge.X:t.setSlice(a[0]);break;case Ge.Y:t.setSlice(a[1]);break;case Ge.Z:t.setSlice(a[2]);break}},t.setXSlice=function(r){t.setSlicingMode(Ge.X),t.setSlice(r)},t.setYSlice=function(r){t.setSlicingMode(Ge.Y),t.setSlice(r)},t.setZSlice=function(r){t.setSlicingMode(Ge.Z),t.setSlice(r)},t.setISlice=function(r){t.setSlicingMode(Ge.I),t.setSlice(r)},t.setJSlice=function(r){t.setSlicingMode(Ge.J),t.setSlice(r)},t.setKSlice=function(r){t.setSlicingMode(Ge.K),t.setSlice(r)},t.getSlicingModeNormal=function(){var r=[0,0,0],a=t.getCurrentImage().getDirection();switch(e.slicingMode){case Ge.X:r[0]=1;break;case Ge.Y:r[1]=1;break;case Ge.Z:r[2]=1;break;case Ge.I:Ga(a,[1,0,0],r);break;case Ge.J:Ga(a,[0,1,0],r);break;case Ge.K:Ga(a,[0,0,1],r);break}return r};function n(){var r;switch(e.slicingMode){case Ge.X:r=[1,0,0];break;case Ge.Y:r=[0,1,0];break;case Ge.Z:r=[0,0,1];break;default:e.closestIJKAxis={ijkMode:e.slicingMode,flip:!1};return}var a=[0,0,0],i=t.getCurrentImage().getDirection();Ga(i,r,a);for(var o=0,s=-1,c=!1,u=0;u<a.length;++u){var f=Math.abs(a[u]);f>o&&(o=f,c=a[u]<0,s=u)}if(o!==1){var l="IJKXYZ"[e.slicingMode],p="IJKXYZ"[s];Db("Unaccurate slicing along ".concat(l," axis which ")+"is not aligned with any IJK axis of the image data. "+"Using ".concat(p," axis  as a fallback (").concat(o,"% aligned). ")+"Necessitates slice reformat that is not yet implemented.  You can switch the slicing mode on your mapper to do IJK slicing instead.")}e.closestIJKAxis={ijkMode:s,flip:c}}t.setSlicingMode=function(r){e.slicingMode!==r&&(e.slicingMode=r,t.getCurrentImage()&&n(),t.modified())},t.getClosestIJKAxis=function(){return(e.closestIJKAxis===void 0||e.closestIJKAxis.ijkMode===Ge.NONE)&&t.getCurrentImage()&&n(),e.closestIJKAxis},t.getBounds=function(){var r=t.getCurrentImage();if(!r)return hn();if(!e.useCustomExtents)return r.getBounds();var a=e.customDisplayExtent.slice(),i=t.getClosestIJKAxis(),o=i.ijkMode,s=e.slice;switch(o!==e.slicingMode&&(s=t.getSliceAtPosition(e.slice)),o){case Ge.I:a[0]=s,a[1]=s;break;case Ge.J:a[2]=s,a[3]=s;break;case Ge.K:a[4]=s,a[5]=s;break}return r.extentToBounds(a)},t.getBoundsForSlice=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.slice,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=t.getCurrentImage();if(!i)return hn();var o=i.getSpatialExtent(),s=t.getClosestIJKAxis(),c=s.ijkMode,u=r;switch(c!==e.slicingMode&&(u=t.getSliceAtPosition(r)),c){case Ge.I:o[0]=u-a,o[1]=u+a;break;case Ge.J:o[2]=u-a,o[3]=u+a;break;case Ge.K:o[4]=u-a,o[5]=u+a;break}return i.extentToBounds(o)},t.intersectWithLineForPointPicking=function(r,a){return Sb(r,a,t)},t.intersectWithLineForCellPicking=function(r,a){return Tb(r,a,t)},t.getCurrentImage=function(){return t.getInputData()}}var _b={slicingMode:Ge.NONE,closestIJKAxis:{ijkMode:Ge.NONE,flip:!1},renderToRectangle:!1,sliceAtFocalPoint:!1,preferSizeOverAccuracy:!1};function Zv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_b,n),Cb.extend(t,e,n),B.get(t,e,["slicingMode"]),B.setGet(t,e,["closestIJKAxis","renderToRectangle","sliceAtFocalPoint","preferSizeOverAccuracy"]),$n.implementCoincidentTopologyMethods(t,e),Ob(t,e)}var bb=B.newInstance(Zv,"vtkImageMapper"),Mb=Ru(Ru(Ru({newInstance:bb,extend:Zv},wb),Eb),Y0),Nb=B.vtkErrorMacro;function Rb(t,e){var n=0;return t.map(function(r,a){return a===n?(n+=r+1,r):r+e})}function Qo(t,e,n,r){t.set(Rb(e,n),r)}function Lb(t,e){e.classHierarchy.push("vtkAppendPolyData"),t.requestData=function(n,r){var a=t.getNumberOfInputPorts();if(!a){Nb("No input specified.");return}if(a===1){r[0]=n[0];return}for(var i=Ye.newInstance(),o=0,s=0,c=1,u=1,f=0,l=0,p=0,h=0,v=!0,y=!0,m=!0,x=0;x<a;x++){var g=n[x];if(g){var d=g.getPoints().getNumberOfPoints();o+=d,f+=g.getVerts().getNumberOfValues(),l+=g.getLines().getNumberOfValues(),p+=g.getStrips().getNumberOfValues(),h+=g.getPolys().getNumberOfValues(),d&&(u&&(u=0,s=g.getPoints().getDataType()),c=g.getPoints().getDataType(),s=s>c?s:c);var C=g.getPointData();C?(v=v&&C.getNormals()!==null,y=y&&C.getTCoords()!==null,m=m&&C.getScalars()!==null):(v=!1,y=!1,m=!1)}}e.outputPointsPrecision===vn.SINGLE?s=He.FLOAT:e.outputPointsPrecision===vn.DOUBLE&&(s=He.DOUBLE);var S=Sr.newInstance({dataType:s});S.setNumberOfPoints(o);var T=S.getData(),w=new Uint32Array(f),E=new Uint32Array(l),D=new Uint32Array(p),b=new Uint32Array(h),O=null,M=null,R=null,N=n[a-1];if(v){var U=N.getPointData().getNormals();O=de.newInstance({numberOfComponents:3,numberOfTuples:o,size:3*o,dataType:U.getDataType(),name:U.getName()})}if(y){var W=N.getPointData().getTCoords();M=de.newInstance({numberOfComponents:2,numberOfTuples:o,size:2*o,dataType:W.getDataType(),name:W.getName()})}if(m){var I=N.getPointData().getScalars();R=de.newInstance({numberOfComponents:I.getNumberOfComponents(),numberOfTuples:o,size:o*I.getNumberOfComponents(),dataType:I.getDataType(),name:I.getName()})}o=0,f=0,l=0,p=0,h=0;for(var G=0;G<a;G++){var F=n[G];T.set(F.getPoints().getData(),o*3),Qo(w,F.getVerts().getData(),o,f),f+=F.getVerts().getNumberOfValues(),Qo(E,F.getLines().getData(),o,l),l+=F.getLines().getNumberOfValues(),Qo(D,F.getStrips().getData(),o,p),p+=F.getStrips().getNumberOfValues(),Qo(b,F.getPolys().getData(),o,h),h+=F.getPolys().getNumberOfValues();var A=F.getPointData();if(v){var H=A.getNormals();O.getData().set(H.getData(),o*3)}if(y){var $=A.getTCoords();M.getData().set($.getData(),o*2)}if(m){var X=A.getScalars();R.getData().set(X.getData(),o*R.getNumberOfComponents())}o+=F.getPoints().getNumberOfPoints()}i.setPoints(S),i.getVerts().setData(w),i.getLines().setData(E),i.getStrips().setData(D),i.getPolys().setData(b),O&&i.getPointData().setNormals(O),M&&i.getPointData().setTCoords(M),R&&i.getPointData().setScalars(R),r[0]=i}}var kb={outputPointsPrecision:vn.DEFAULT};function Qv(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,kb,n),B.setGet(t,e,["outputPointsPrecision"]),B.obj(t,e),B.algo(t,e,1,1),Lb(t,e)}var Fb=B.newInstance(Qv,"vtkAppendPolyData"),eg={newInstance:Fb,extend:Qv};function Ab(t,e){e.classHierarchy.push("vtkArrowSource");function n(r,a){if(!e.deleted){var i=$S.newInstance({capping:!0});i.setResolution(e.shaftResolution),i.setRadius(e.shaftRadius),i.setHeight(1-e.tipLength),i.setCenter(0,(1-e.tipLength)*.5,0);var o=i.getOutputData(),s=o.getPoints().getData(),c=o.getPointData().getNormals().getData();kt.buildFromDegree().rotateZ(-90).apply(s).apply(c);var u=jS.newInstance();u.setResolution(e.tipResolution),u.setHeight(e.tipLength),u.setRadius(e.tipRadius);var f=u.getOutputData(),l=f.getPoints().getData();kt.buildFromRadian().translate(1-e.tipLength*.5,0,0).apply(l);var p=eg.newInstance();p.setInputData(o),p.addInputData(f);var h=p.getOutputData(),v=h.getPoints().getData();kt.buildFromRadian().translate(-.5+e.tipLength*.5,0,0).apply(v),e.invert?(kt.buildFromRadian().rotateFromDirections([1,0,0],e.direction).scale(-1,-1,-1).apply(v),a[0]=h):(kt.buildFromRadian().rotateFromDirections([1,0,0],e.direction).scale(1,1,1).apply(v),a[0]=p.getOutputData())}}t.requestData=n}var Vb={tipResolution:6,tipRadius:.1,tipLength:.35,shaftResolution:6,shaftRadius:.03,invert:!1,direction:[1,0,0],pointType:"Float64Array"};function tg(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Vb,n),B.obj(t,e),B.setGet(t,e,["tipResolution","tipRadius","tipLength","shaftResolution","shaftRadius","invert"]),B.setGetArray(t,e,["direction"],3),B.algo(t,e,0,1),Ab(t,e)}var Bb=B.newInstance(tg,"vtkArrowSource"),Lu={newInstance:Bb,extend:tg};function rg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function ku(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rg(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rg(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fu(t){var e,n=t.getPoints().getBounds(),r=[-(n[0]+n[1])*.5,-(n[2]+n[3])*.5,-(n[4]+n[5])*.5];(e=kt.buildFromDegree()).translate.apply(e,r).apply(t.getPoints().getData())}function Au(t,e){var n,r=t.getPoints().getBounds(),a=[0,0,0];a[e]=-r[e*2],(n=kt.buildFromDegree()).translate.apply(n,a).apply(t.getPoints().getData())}function Vu(t,e,n,r){for(var a=t.getPoints().getData().length,i=new Uint8Array(a),o=0;o<a;)i[o++]=e,i[o++]=n,i[o++]=r;t.getPointData().setScalars(de.newInstance({name:"color",numberOfComponents:3,values:i}))}function Ub(t,e){e.classHierarchy.push("vtkAxesActor");var n=Cr.newInstance();t.setMapper(n),t.update=function(){var c=Lu.newInstance(ku({direction:[1,0,0]},e.config)).getOutputData();e.config.recenter?Fu(c):Au(c,0),Vu.apply(void 0,[c].concat(ve(e.xAxisColor)));var u=Lu.newInstance(ku({direction:[0,1,0]},e.config)).getOutputData();e.config.recenter?Fu(u):Au(u,1),Vu.apply(void 0,[u].concat(ve(e.yAxisColor)));var f=Lu.newInstance(ku({direction:[0,0,1]},e.config)).getOutputData();e.config.recenter?Fu(f):Au(f,2),Vu.apply(void 0,[f].concat(ve(e.zAxisColor)));var l=eg.newInstance();l.setInputData(c),l.addInputData(u),l.addInputData(f),n.setInputConnection(l.getOutputPort())},t.update();var r=B.debounce(t.update,0),a=t.setConfig,i=t.setXAxisColor,o=t.setYAxisColor,s=t.setZAxisColor;t.setConfig=function(c){return a(c)?(r(),!0):!1},t.setXAxisColor=function(c){return i(c)?(r(),!0):!1},t.setYAxisColor=function(c){return o(c)?(r(),!0):!1},t.setZAxisColor=function(c){return s(c)?(r(),!0):!1}}var Gb={config:{recenter:!0,tipResolution:60,tipRadius:.1,tipLength:.2,shaftResolution:60,shaftRadius:.03,invert:!1},xAxisColor:[255,0,0],yAxisColor:[255,255,0],zAxisColor:[0,128,0]};function ng(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Gb,n),mr.extend(t,e,n),B.setGet(t,e,["config"]),B.setGetArray(t,e,["xAxisColor","yAxisColor","zAxisColor"],3,255),Ub(t,e)}var Pb=B.newInstance(ng,"vtkAxesActor"),Ib={newInstance:Pb,extend:ng},ag="resetcamera",Bu="orientation",jb="same",zb={MODE_RESET_CAMERA:ag,MODE_ORIENTATION:Bu,MODE_SAME:jb};function Wb(t,e){e.classHierarchy.push("vtkCameraSynchronizer");var n=new Float64Array(9),r=new Float64Array(3),a=[];function i(){for(;a.length;)a.pop().unsubscribe();if(!(!e.srcRenderer||!e.dstRenderer)){var s=e.srcRenderer.getActiveCamera(),c=e.srcRenderer.getRenderWindow().getInteractor();a.push(s.onModified(function(){c.isAnimating()||t.update()})),a.push(c.onAnimation(t.update)),a.push(c.onEndAnimation(t.update))}}e._srcRendererChanged=i,e._dstRendererChanged=i;function o(s,c,u){return n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||n[3]!==c[0]||n[4]!==c[1]||n[5]!==c[2]||n[6]!==u[0]||n[7]!==u[1]||n[8]!==u[2]?(n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=c[0],n[4]=c[1],n[5]=c[2],n[6]=u[0],n[7]=u[1],n[8]=u[2],n):!1}t.update=function(){if(!(!e.active||!e.srcRenderer||!e.dstRenderer)){var s=e.srcRenderer.getActiveCamera(),c=e.dstRenderer.getActiveCamera(),u=s.getReferenceByName("position"),f=s.getReferenceByName("focalPoint"),l=s.getReferenceByName("viewUp"),p=o(u,f,l);p&&(e.mode===Bu?(r[0]=p[0]-p[3],r[1]=p[1]-p[4],r[2]=p[2]-p[5],ot(r),c.setPosition(e.focalPoint[0]+e.distance*r[0],e.focalPoint[1]+e.distance*r[1],e.focalPoint[2]+e.distance*r[2]),c.setFocalPoint(e.focalPoint[0],e.focalPoint[1],e.focalPoint[2]),c.setViewUp(p[6],p[7],p[8])):(c.setPosition(p[0],p[1],p[2]),c.setFocalPoint(p[3],p[4],p[5]),c.setViewUp(p[6],p[7],p[8])),e.mode===ag&&e.dstRenderer.resetCamera())}},t.delete=_a(function(){return t.setSrcRenderer(null)},t.delete),i()}var Hb={mode:Bu,focalPoint:[0,0,0],distance:6.8,active:!0};function ig(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Hb,n),ht(t,e),dt(t,e,["mode","active","srcRenderer","dstRenderer","distance"]),bs(t,e,["focalPoint"],3,0),Wb(t,e)}var $b=Je(ig,"vtkCameraSynchronizer"),Uu={newInstance:$b,extend:ig,SynchronizationMode:zb},Gu={},Kb=function(){function t(e,n){Ta(this,t),this.ctx=e,this.behavior=Uu.newInstance(this.getProperties(n)),this.behavior.update()}return wa(t,[{key:"getProperties",value:function(n){var r=n.actorBounds,a=n.srcRenderer,i=n.dstRenderer,o=3.4*Math.max(r[1]-r[0],r[3]-r[2],r[5]-r[4]),s=[.5*(r[0]+r[1]),.5*(r[2]+r[3]),.5*(r[4]+r[5])],c=Uu.SynchronizationMode.MODE_ORIENTATION;return{distance:o,focalPoint:s,mode:c,srcRenderer:this.ctx.getInstance(a),dstRenderer:this.ctx.getInstance(i)}}},{key:"update",value:function(n){this.behavior.set(this.getProperties(n)),this.behavior.update()}},{key:"delete",value:function(){this.behavior.delete()}}]),t}(),og={CameraSync:Kb};function Xb(t,e,n){if(!(!e.behaviors||!t.getSynchronizedViewId)){var r=t.getSynchronizedViewId();Gu[r]||(Gu[r]={});var a=Gu[r];if(e.behaviors.autoOrientation){var i=t.getRenderers();if(!a.autoOrientationAxes&&i.length===2){for(var o=null,s=null,c=0;c<i.length;c++){var u=i[c];u.getInteractive()?o=u:s=u}o&&s&&(a.autoOrientationAxes=Uu.newInstance({srcRenderer:o,dstRenderer:s}))}a.autoOrientationAxes&&i.length!==2&&(a.autoOrientationAxes.delete(),delete a.autoOrientationAxes)}for(var f=Object.keys(e.behaviors),l=Object.keys(a),p=0;p<f.length;p++){var h=f[p];if(a[h])a[h].update(e.behaviors[h]);else{var v=e.behaviors[h];og[v.type]?a[h]=new og[v.type](n,v):console.log("No mapping for",v)}}for(var y=0;y<l.length;y++){var m=f[y];e.behaviors[m]||(a[m].delete(),delete a[m])}}}var qb={applyBehaviors:Xb};function sg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Kr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sg(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sg(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Lr={},ug=/instance:\${([^}]+)}/,Yb=function(e){return"instance:${".concat(e,"}")},yi={},Pu=[],es={},Jb={vtkPoints:Sr,vtkCellArray:Kn,vtkDataArray:de};function Zb(t,e){return e.map(function(n){var r=ug.exec(n);return r?t.getInstance(r[1]):n})}function cg(t){return t.map(function(e){return ug.exec(e)}).filter(function(e){return e}).map(function(e){return e[1]})}function fg(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t.dependencies&&t.dependencies.forEach(function(n){e.push(n.id),fg(n,e)}),e}function Qb(t){for(;t.length;){var e=t.shift(),n=ze(e,2),r=n[0],a=n[1];r.apply(void 0,ve(a))}}function eM(t,e,n){return function(r){var a=e.registration?e.registration:"addArray",i=e.location?t.getReferenceByName(e.location):t,o=null;if(e.location?o=t.getReferenceByName(e.location).getArray(e.name):o=t["get".concat(a.substring(3))](),o)return o.getData()!==r&&n.push([o.setData,[r,e.numberOfComponents]]),o;var s=e.vtkClass?e.vtkClass:"vtkDataArray",c=Jb[s].newInstance(Kr(Kr({},e),{},{values:r}));return n.push([i[a],[c]]),c}}function ts(t,e,n,r){if(!e)return Promise.reject(new Error("No instance provided."));var a=Lr[t];return a&&a.update?a.update(e,n,r):Promise.reject(new Error("No updater for ".concat(t)))}function Iu(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=Lr[t];return n&&n.build?n.build(e):(console.log("No builder for",t),null)}function tM(t,e,n){es[t]={key:e,value:n}}function rM(){return Object.keys(Lr)}function lg(){Object.keys(Lr).forEach(function(t){delete Lr[t]})}function nM(t,e,n){return ts("vtkRenderWindow",t,e,n)}function aM(){Object.keys(yi).forEach(function(t){delete yi[t]})}function iM(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length===0)return aM();var r=e;return r.length===1&&Array.isArray(r[0])&&(r=r[0]),r.forEach(function(a){delete yi[a]}),r}function ju(t){if(t[1].length===1)return Pu.indexOf(t[1][0])===-1;for(var e=!1,n=0;n<t[1].length;n++)e=e||Pu.indexOf(t[1][n])===-1;return e}function ut(t,e,n){n.start(),t.set(e.properties),e.dependencies&&e.dependencies.forEach(function(o){var s=o.id,c=o.type;if(es[c]){var u=es[c],f=u.key,l=u.value;if(!f||o.properties[f]===l){Pu.push(Yb(s));return}}var p=n.getInstance(s);p||(p=Iu(c,{managedInstanceId:s}),n.registerInstance(s,p)),ts(c,p,o,n)}),e.calls&&e.calls.filter(ju).forEach(function(o){t[o[0]].apply(null,Zb(n,o[1]))});var r=[];if(e.arrays){var a=[],i=Object.values(e.arrays).map(function(o){return n.start(),n.getArray(o.hash,o.dataType,n).then(eM(t,o,a)).catch(function(s){console.log("Error fetching array",JSON.stringify(o),s)}).finally(n.end)});n.start(),r.push(Promise.all(i).then(function(){return a.length&&t.modified(),Qb(a),!0}).catch(function(o){console.error("Error in array handling for state",JSON.stringify(e),o)}).finally(n.end))}return n.end(),Promise.all(r)}function pg(t,e,n){yi[e.id]||ut(t,e,n),yi[e.id]=!0}function oM(t,e,n){ut(t,e,n);var r=new Set;e.dependencies&&e.dependencies.forEach(function(o){var s=n.getInstance(o.id);if(s){var c=fg(o);s.set({flattenedDepIds:c},!0),c.forEach(function(u){return r.add(u)})}});var a=new Set;e.calls&&e.calls.filter(ju).filter(function(o){return o[0]==="removeViewProp"}).forEach(function(o){cg(o[1]).forEach(function(s){var c=n.getInstance(s).get("flattenedDepIds").flattenedDepIds;c&&c.forEach(function(u){return a.add(u)}),a.add(s)})});var i=ve(a).filter(function(o){return!r.has(o)});i.forEach(function(o){return n.unregisterInstance(o)})}function sM(t,e,n){e.calls&&e.calls.filter(ju).filter(function(r){return r[0]==="removeRenderer"}).forEach(function(r){cg(r[1]).forEach(function(a){var i=n.getInstance(a),o=i.getViewProps();o.forEach(function(s){var c=s.get("flattenedDepIds").flattenedDepIds;c&&c.forEach(function(u){return n.unregisterInstance(u)}),n.unregisterInstance(n.getInstanceId(s))})})}),t.render(),ut(t,e,n),qb.applyBehaviors(t,e,n)}function uM(t,e,n){if(n.start(),!e.properties.nodes)t.set(e.properties);else{var r=e.properties.nodes.map(function(a){var i=ze(a,6),o=i[0],s=i[1],c=i[2],u=i[3],f=i[4],l=i[5];return{x:o,r:s,g:c,b:u,midpoint:f,sharpness:l}});t.set(Kr(Kr({},e.properties),{},{nodes:r}),!0)}n.end()}function cM(t,e,n){if(n.start(),!e.properties.nodes)t.set(e.properties);else{var r=e.properties.nodes.map(function(a){var i=ze(a,4),o=i[0],s=i[1],c=i[2],u=i[3];return{x:o,y:s,midpoint:c,sharpness:u}});t.set(Kr(Kr({},e.properties),{},{nodes:r}),!0),t.sortAndUpdateRange()}n.end()}function hg(t,e){for(var n=[],r=t.getNumberOfArrays(),a=0;a<r;a++){var i=t.getArray(a),o=i.getName();e.has(o)||n.push(o)}for(var s=0;s<n.length;s++)t.removeArray(n[s])}function vg(t){var e=t.name?"_".concat(t.name):"";return"".concat(t.hash,"_").concat(t.dataType).concat(e)}function gg(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return function(e,n,r){r.start();var a=Kr({},n.properties);n.arrays||(n.arrays={});for(var i=0;i<t.length;i++){var o=t[i];if(n.properties[o]){var s=n.properties[o];s.registration="set".concat(Da(o));var c=vg(s);n.arrays[c]=s,delete a[o]}}for(var u=n.properties.fields||[],f=0;f<u.length;f++){var l=u[f],p=vg(l);n.arrays[p]=l}delete a.fields;var h={pointData:new Set,cellData:new Set,fieldData:new Set};u.forEach(function(m){var x=m.location,g=m.name;h[x].add(g)}),hg(e.getPointData(),h.pointData),hg(e.getCellData(),h.cellData);var v=Kr({},n);v.properties=a;var y=ut(e,v,r);return r.end(),y}}var fM=gg(["points","polys","verts","lines","strips"]),lM=gg([]);function zu(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ut;if(!Iu&&!ts){delete Lr[t];return}Lr[t]={build:e,update:n}}var dg={vtkMapper:["vtkOpenGLPolyDataMapper","vtkCompositePolyDataMapper2","vtkDataSetMapper"],vtkProperty:["vtkOpenGLProperty"],vtkRenderer:["vtkOpenGLRenderer"],vtkCamera:["vtkOpenGLCamera"],vtkColorTransferFunction:["vtkPVDiscretizableColorTransferFunction"],vtkActor:["vtkOpenGLActor","vtkPVLODActor"],vtkLight:["vtkOpenGLLight","vtkPVLight"],vtkTexture:["vtkOpenGLTexture"],vtkImageMapper:["vtkOpenGLImageSliceMapper"],vtkVolumeMapper:["vtkFixedPointVolumeRayCastMapper"]},yg={vtkAxesActor:{build:Ib.newInstance,update:ut},vtkRenderWindow:{build:bu.newInstance,update:sM},vtkRenderer:{build:Bv.newInstance,update:oM},vtkLookupTable:{build:Hn.newInstance,update:ut},vtkCamera:{build:Mu.newInstance,update:pg},vtkPolyData:{build:Ye.newInstance,update:fM},vtkImageData:{build:w0.newInstance,update:lM},vtkMapper:{build:Cr.newInstance,update:ut},vtkGlyph3DMapper:{build:av.newInstance,update:ut},vtkProperty:{build:Ar.newInstance,update:ut},vtkActor:{build:mr.newInstance,update:ut},vtkLight:{build:kv.newInstance,update:ut},vtkColorTransferFunction:{build:xu.newInstance,update:uM},vtkTexture:{build:V0.newInstance,update:ut},vtkVolume:{build:rb.newInstance,update:ut},vtkVolumeMapper:{build:ub.newInstance,update:ut},vtkVolumeProperty:{build:Iv.newInstance,update:ut},vtkImageSlice:{build:db.newInstance,update:ut},vtkImageMapper:{build:Mb.newInstance,update:ut},vtkImageProperty:{build:Xv.newInstance,update:ut},vtkPiecewiseFunction:{build:qo.newInstance,update:cM},vtkCubeAxesActor:{build:G0.newInstance,update:ut},vtkScalarBarActor:{build:Sp.newInstance,update:ut}};function mg(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;t&&lg(),Object.keys(yg).forEach(function(e){var n=yg[e];zu(e,n.build,n.update)})}function Wu(){Object.keys(dg).forEach(function(t){var e=dg[t];e.forEach(function(n){Lr[n]=Lr[t]})})}function pM(){zu("vtkCamera",Mu.newInstance),Wu()}mg(),Wu(),es.vtkPVLight={};var Hu={build:Iu,update:ts,genericUpdater:ut,oneTimeGenericUpdater:pg,setTypeMapping:zu,clearTypeMapping:lg,getSupportedTypes:rM,clearOneTimeUpdaters:iM,updateRenderWindow:nM,excludeInstance:tM,setDefaultMapping:mg,applyDefaultAliases:Wu,alwaysUpdateCamera:pM};function xg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function Rn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xg(Object(n),!0).forEach(function(r){Ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xg(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Ln={};function Cg(){var t={},e=null;function n(o){e=o}function r(o,s,c){var u=t[o];return u?(u.mtimes[c.getActiveViewId()]=c.getMTime(),new Promise(function(f,l){f(u.array)})):e?new Promise(function(f,l){e(o).then(function(p){var h=p;if(typeof p=="string"&&(h=aa.toArrayBuffer(p)),h instanceof Blob){var v=new FileReader;v.onload=function(){var x=Gn(s,v.result),g=Ce({},c.getActiveViewId(),c.getMTime());t[o]={mtimes:g,array:x},f(x)},v.readAsArrayBuffer(h)}else{var y=Gn(s,h),m=Ce({},c.getActiveViewId(),c.getMTime());t[o]={mtimes:m,array:y},f(y)}},function(p){console.log("Error getting data array:"),console.log(p),l(p)})}):Promise.reject(new Error('No array fetcher found, please use "setArrayFetcher" to provide one'))}function a(){Object.keys(t).forEach(function(o){delete t[o]})}function i(o,s){var c=s.getMTime()-o;Object.keys(t).filter(function(u){return t[u].mtimes[s.getActiveViewId()]}).filter(function(u){return t[u].mtimes[s.getActiveViewId()]<c}).forEach(function(u){delete t[u]})}return{setFetchArrayFunction:n,getArray:r,emptyCachedArrays:a,freeOldArrays:i}}function Sg(){var t={};function e(o){return t[o]}function n(o){var s=null;return Object.keys(t).forEach(function(c){o===t[c]&&(s=c)}),s}function r(o,s){t[o]=s,s.set({remoteId:o},!0,!0)}function a(o){delete t[o]}function i(){Object.keys(t).forEach(function(o){delete t[o]})}return{getInstance:e,getInstanceId:n,registerInstance:r,unregisterInstance:a,emptyCachedInstances:i}}function Tg(){var t=0,e={start:function(){t+=1,e.invokeProgressEvent(t)},end:function(){t-=1,e.invokeProgressEvent(t),t===0&&e.invokeProgressDone()},resetProgress:function(){t=0}},n={};return Oa(e,n,"progressEvent"),Oa(e,n,"progressDone"),e}function wg(){var t={},e="default";function n(o){var s=o||e;return t[s]||1}function r(o){var s=o||e;t[s]||(t[s]=1),t[s]+=1}function a(o){e=o}function i(){return e}return{getMTime:n,incrementMTime:r,setActiveViewId:a,getActiveViewId:i}}function $u(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default",e=Ln[t];return e||(e=Rn(Rn(Rn(Rn({},Cg()),Sg()),Tg()),wg()),Ln[t]=e),e}function hM(t,e){Ln[t]=e}function vM(t){if(t&&Ln[t]&&delete Ln[t],!t)for(var e=Object.keys(Ln),n=0;n<e.length;n++)delete Ln[e[n]]}function Eg(t,e){var n=-1,r=100,a=function(p){return p.get("managedInstanceId").managedInstanceId},i=function(){return Li(t,a)};function o(){Hu.clearOneTimeUpdaters(i())}function s(l){t.set({synchronizedViewId:l},!0,!0)}function c(){return t.get("synchronizedViewId").synchronizedViewId}function u(l){r=l}function f(l){c()||s(l.id);var p=l.mtime||0;return c()===l.id&&n<p?new Promise(function(h,v){var y=e.onProgressDone(function(){y.unsubscribe(),t.render(),h(!0)});n=p,e.setActiveViewId(l.id),e.incrementMTime(),Hu.updateRenderWindow(t,l,e),e.freeOldArrays(r,e)}):Promise.resolve(!1)}return{synchronize:f,setSynchronizedViewId:s,getSynchronizedViewId:c,updateGarbageCollectorThreshold:u,getManagedInstanceIds:i,clearOneTimeUpdaters:o}}function gM(t,e){e.classHierarchy.push("vtkSynchronizableRenderWindow"),e.synchronizerContext||(e.synchronizerContext=$u(e.synchronizerContextName));var n=Eg(t,e.synchronizerContext);Object.keys(n).forEach(function(r){t[r]?t[r]=_a(t[r],n[r]):t[r]=n[r]})}var dM={synchronizerContextName:"default",synchronizerContext:null,synchronizedViewId:null};function Dg(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dM,n),bu.extend(t,e),jt(t,e,["synchronizerContext"]),gM(t,e)}var yM=Je(Dg,"vtkSynchronizableRenderWindow");function mM(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"default",n=Eg(t,$u(e));return Rn(Rn(Rn({},n),t),{},{delete:_a(t.delete,n.delete)})}var Og={newInstance:yM,extend:Dg,getSynchronizerContext:$u,setSynchronizerContext:hM,clearSynchronizerContext:vM,decorate:mM,createInstanceMap:Sg,createArrayHandler:Cg,createProgressHandler:Tg,createSceneMtimeHandler:wg,vtkObjectManager:Hu};function xM(t,e){e.classHierarchy.push("vtkRenderPass"),t.getOperation=function(){return e.currentOperation},t.setCurrentOperation=function(n){e.currentOperation=n,e.currentTraverseOperation="traverse".concat(B.capitalize(e.currentOperation))},t.getTraverseOperation=function(){return e.currentTraverseOperation},t.traverse=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;e.deleted||(e._currentParent=r,e.preDelegateOperations.forEach(function(a){t.setCurrentOperation(a),n.traverse(t)}),e.delegates.forEach(function(a){a.traverse(n,t)}),e.postDelegateOperations.forEach(function(a){t.setCurrentOperation(a),n.traverse(t)}))}}var CM={delegates:[],currentOperation:null,preDelegateOperations:[],postDelegateOperations:[],currentParent:null};function _g(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,CM,n),B.obj(t,e),B.get(t,e,["currentOperation"]),B.setGet(t,e,["delegates","_currentParent","preDelegateOperations","postDelegateOperations"]),B.moveToProtected(t,e,["currentParent"]),xM(t,e)}var SM=B.newInstance(_g,"vtkRenderPass"),Ku={newInstance:SM,extend:_g},TM=Ar.Representation,bg=B.vtkErrorMacro;function wM(t){var e=ee.substitute(t.Fragment,"//VTK::RenderPassFragmentShader::Impl",`
      float weight = gl_FragData[0].a * pow(max(1.1 - gl_FragCoord.z, 0.0), 2.0);
      gl_FragData[0] = vec4(gl_FragData[0].rgb*weight, gl_FragData[0].a);
      gl_FragData[1].r = weight;
    `,!1);t.Fragment=e.result}var EM=`//VTK::System::Dec

in vec2 tcoord;

uniform sampler2D translucentRTexture;
uniform sampler2D translucentRGBATexture;

// the output of this shader
//VTK::Output::Dec

void main()
{
  vec4 t1Color = texture(translucentRGBATexture, tcoord);
  float t2Color = texture(translucentRTexture, tcoord).r;
  gl_FragData[0] = vec4(t1Color.rgb/max(t2Color,0.01), 1.0 - t1Color.a);
}
`;function DM(t,e){e.classHierarchy.push("vtkOpenGLOrderIndependentTranslucentPass"),t.createVertexBuffer=function(){var n=new Float32Array([-1,-1,-1,1,-1,-1,-1,1,-1,1,1,-1]),r=new Float32Array([0,0,1,0,0,1,1,1]),a=new Uint16Array([4,0,1,3,2]),i=de.newInstance({numberOfComponents:3,values:n});i.setName("points");var o=de.newInstance({numberOfComponents:2,values:r});o.setName("tcoords");var s=de.newInstance({numberOfComponents:1,values:a});e.tris.getCABO().createVBO(s,"polys",TM.SURFACE,{points:i,tcoords:o,cellOffset:0}),e.VBOBuildTime.modified()},t.createFramebuffer=function(n){var r,a=n.getSize(),i=n.getContext();e.framebuffer=Dn.newInstance(),e.framebuffer.setOpenGLRenderWindow(n),(r=e.framebuffer).create.apply(r,ve(a)),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind(),e.translucentRGBATexture=Fe.newInstance(),e.translucentRGBATexture.setInternalFormat(i.RGBA16F),e.translucentRGBATexture.setFormat(i.RGBA),e.translucentRGBATexture.setOpenGLDataType(i.HALF_FLOAT),e.translucentRGBATexture.setOpenGLRenderWindow(n),e.translucentRGBATexture.create2DFromRaw(a[0],a[1],4,"Float32Array",null),e.translucentRTexture=Fe.newInstance(),e.translucentRTexture.setInternalFormat(i.R16F),e.translucentRTexture.setFormat(i.RED),e.translucentRTexture.setOpenGLDataType(i.HALF_FLOAT),e.translucentRTexture.setOpenGLRenderWindow(n),e.translucentRTexture.create2DFromRaw(a[0],a[1],1,"Float32Array",null),e.translucentZTexture=Fe.newInstance(),e.translucentZTexture.setOpenGLRenderWindow(n),e.translucentZTexture.createDepthFromRaw(a[0],a[1],"Float32Array",null),e.framebuffer.setColorBuffer(e.translucentRGBATexture,0),e.framebuffer.setColorBuffer(e.translucentRTexture,1),e.framebuffer.setDepthBuffer(e.translucentZTexture)},t.createCopyShader=function(n){e.copyShader=n.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","attribute vec2 tcoordTC;","varying vec2 tcoord;","void main() { tcoord = tcoordTC; gl_Position = vertexDC; }"].join(`
`),EM,"")},t.createVBO=function(n){var r=n.getContext();e.tris.setOpenGLRenderWindow(n),t.createVertexBuffer();var a=e.copyShader;e.tris.getCABO().bind(),e.copyVAO.addAttributeArray(a,e.tris.getCABO(),"vertexDC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),r.FLOAT,3,r.FALSE)||bg("Error setting vertexDC in copy shader VAO."),e.copyVAO.addAttributeArray(a,e.tris.getCABO(),"tcoordTC",e.tris.getCABO().getTCoordOffset(),e.tris.getCABO().getStride(),r.FLOAT,2,r.FALSE)||bg("Error setting vertexDC in copy shader VAO.")},t.traverse=function(n,r,a){if(!e.deleted){var i=n.getSize(),o=n.getContext();if(e._supported=!1,r.getSelector()||!o||!n.getWebgl2()||!o.getExtension("EXT_color_buffer_half_float")&&!o.getExtension("EXT_color_buffer_float")){t.setCurrentOperation("translucentPass"),r.traverse(t);return}if(e._supported=!0,e.framebuffer===null)t.createFramebuffer(n);else{var s=e.framebuffer.getSize();s===null||s[0]!==i[0]||s[1]!==i[1]?(e.framebuffer.releaseGraphicsResources(),e.translucentRGBATexture.releaseGraphicsResources(n),e.translucentRTexture.releaseGraphicsResources(n),e.translucentZTexture.releaseGraphicsResources(n),t.createFramebuffer(n)):(e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind())}o.drawBuffers([o.COLOR_ATTACHMENT0]),o.clearBufferfv(o.COLOR,0,[0,0,0,0]),o.clearBufferfv(o.DEPTH,0,[1]),o.colorMask(!1,!1,!1,!1),a.getOpaqueActorCount()>0&&(a.setCurrentOperation("opaqueZBufferPass"),r.traverse(a)),o.colorMask(!0,!0,!0,!0),o.drawBuffers([o.COLOR_ATTACHMENT0,o.COLOR_ATTACHMENT1]),o.viewport(0,0,i[0],i[1]),o.scissor(0,0,i[0],i[1]),o.clearBufferfv(o.COLOR,0,[0,0,0,1]),o.clearBufferfv(o.COLOR,1,[0,0,0,0]),o.enable(o.DEPTH_TEST),o.enable(o.BLEND),o.blendFuncSeparate(o.ONE,o.ONE,o.ZERO,o.ONE_MINUS_SRC_ALPHA),t.setCurrentOperation("translucentPass"),r.traverse(t),o.drawBuffers([o.NONE]),e.framebuffer.restorePreviousBindingsAndBuffers(),e.copyShader===null?t.createCopyShader(n):n.getShaderCache().readyShaderProgram(e.copyShader),e.copyVAO||(e.copyVAO=qa.newInstance(),e.copyVAO.setOpenGLRenderWindow(n)),e.copyVAO.bind(),e.VBOBuildTime.getMTime()<t.getMTime()&&t.createVBO(n),o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.depthMask(!1),o.depthFunc(o.ALWAYS),o.viewport(0,0,i[0],i[1]),o.scissor(0,0,i[0],i[1]),e.translucentRGBATexture.activate(),e.copyShader.setUniformi("translucentRGBATexture",e.translucentRGBATexture.getTextureUnit()),e.translucentRTexture.activate(),e.copyShader.setUniformi("translucentRTexture",e.translucentRTexture.getTextureUnit()),o.drawArrays(o.TRIANGLES,0,e.tris.getCABO().getElementCount()),o.depthMask(!0),o.depthFunc(o.LEQUAL),e.translucentRGBATexture.deactivate(),e.translucentRTexture.deactivate()}},t.getShaderReplacement=function(){return e._supported?wM:null},t.releaseGraphicsResources=function(n){e.framebuffer&&(e.framebuffer.releaseGraphicsResources(n),e.framebuffer=null),e.translucentRGBATexture&&(e.translucentRGBATexture.releaseGraphicsResources(n),e.translucentRGBATexture=null),e.translucentRTexture&&(e.translucentRTexture.releaseGraphicsResources(n),e.translucentRTexture=null),e.translucentZTexture&&(e.translucentZTexture.releaseGraphicsResources(n),e.translucentZTexture=null),e.copyVAO&&(e.copyVAO.releaseGraphicsResources(n),e.copyVAO=null),e.copyShader&&(e.copyShader.releaseGraphicsResources(n),e.copyShader=null),e.tris&&(e.tris.releaseGraphicsResources(n),e.tris=null),t.modified()}}var OM={framebuffer:null,copyShader:null,tris:null};function Mg(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,OM,n),Ku.extend(t,e,n),e.VBOBuildTime={},B.obj(e.VBOBuildTime,{mtime:0}),e.tris=Ht.newInstance(),B.get(t,e,["framebuffer"]),DM(t,e)}var _M=B.newInstance(Mg,"vtkOpenGLOrderIndependentTranslucentPass"),bM={newInstance:_M,extend:Mg};function MM(t,e){e.classHierarchy.push("vtkForwardPass"),t.traverse=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!e.deleted){e._currentParent=r,t.setCurrentOperation("buildPass"),n.traverse(t);for(var a=n.getRenderable().getNumberOfLayers(),i=n.getChildren(),o=0;o<a;o++)for(var s=0;s<i.length;s++){var c=i[s],u=n.getRenderable().getRenderers()[s];if(u.getDraw()&&u.getLayer()===o){if(e.opaqueActorCount=0,e.translucentActorCount=0,e.volumeCount=0,e.overlayActorCount=0,t.setCurrentOperation("queryPass"),c.traverse(t),(e.opaqueActorCount>0||e.translucentActorCount>0)&&e.volumeCount>0||e.depthRequested){var f=n.getFramebufferSize();e.framebuffer===null&&(e.framebuffer=Dn.newInstance()),e.framebuffer.setOpenGLRenderWindow(n),e.framebuffer.saveCurrentBindingsAndBuffers();var l=e.framebuffer.getSize();(l===null||l[0]!==f[0]||l[1]!==f[1])&&(e.framebuffer.create(f[0],f[1]),e.framebuffer.populateFramebuffer()),e.framebuffer.bind(),t.setCurrentOperation("zBufferPass"),c.traverse(t),e.framebuffer.restorePreviousBindingsAndBuffers(),e.depthRequested=!1}t.setCurrentOperation("cameraPass"),c.traverse(t),e.opaqueActorCount>0&&(t.setCurrentOperation("opaquePass"),c.traverse(t)),e.translucentActorCount>0&&(e.translucentPass||(e.translucentPass=bM.newInstance()),e.translucentPass.traverse(n,c,t)),e.volumeCount>0&&(t.setCurrentOperation("volumePass"),c.traverse(t)),e.overlayActorCount>0&&(t.setCurrentOperation("overlayPass"),c.traverse(t))}}}},t.getZBufferTexture=function(){return e.framebuffer?e.framebuffer.getColorTexture():null},t.requestDepth=function(){e.depthRequested=!0},t.incrementOpaqueActorCount=function(){return e.opaqueActorCount++},t.incrementTranslucentActorCount=function(){return e.translucentActorCount++},t.incrementVolumeCount=function(){return e.volumeCount++},t.incrementOverlayActorCount=function(){return e.overlayActorCount++}}var NM={opaqueActorCount:0,translucentActorCount:0,volumeCount:0,overlayActorCount:0,framebuffer:null,depthRequested:!1};function Ng(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,NM,n),Ku.extend(t,e,n),B.get(t,e,["framebuffer","opaqueActorCount","translucentActorCount","volumeCount"]),MM(t,e)}var RM=B.newInstance(Ng,"vtkForwardPass"),LM={newInstance:RM,extend:Ng},Xu={},kM={get exports(){return Xu},set exports(t){Xu=t}};(function(t,e){(function(n){t.exports=n()})(function(n){var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function a(x,g){var d=x[0],C=x[1],S=x[2],T=x[3];d+=(C&S|~C&T)+g[0]-680876936|0,d=(d<<7|d>>>25)+C|0,T+=(d&C|~d&S)+g[1]-389564586|0,T=(T<<12|T>>>20)+d|0,S+=(T&d|~T&C)+g[2]+606105819|0,S=(S<<17|S>>>15)+T|0,C+=(S&T|~S&d)+g[3]-1044525330|0,C=(C<<22|C>>>10)+S|0,d+=(C&S|~C&T)+g[4]-176418897|0,d=(d<<7|d>>>25)+C|0,T+=(d&C|~d&S)+g[5]+1200080426|0,T=(T<<12|T>>>20)+d|0,S+=(T&d|~T&C)+g[6]-1473231341|0,S=(S<<17|S>>>15)+T|0,C+=(S&T|~S&d)+g[7]-45705983|0,C=(C<<22|C>>>10)+S|0,d+=(C&S|~C&T)+g[8]+1770035416|0,d=(d<<7|d>>>25)+C|0,T+=(d&C|~d&S)+g[9]-1958414417|0,T=(T<<12|T>>>20)+d|0,S+=(T&d|~T&C)+g[10]-42063|0,S=(S<<17|S>>>15)+T|0,C+=(S&T|~S&d)+g[11]-1990404162|0,C=(C<<22|C>>>10)+S|0,d+=(C&S|~C&T)+g[12]+1804603682|0,d=(d<<7|d>>>25)+C|0,T+=(d&C|~d&S)+g[13]-40341101|0,T=(T<<12|T>>>20)+d|0,S+=(T&d|~T&C)+g[14]-1502002290|0,S=(S<<17|S>>>15)+T|0,C+=(S&T|~S&d)+g[15]+1236535329|0,C=(C<<22|C>>>10)+S|0,d+=(C&T|S&~T)+g[1]-165796510|0,d=(d<<5|d>>>27)+C|0,T+=(d&S|C&~S)+g[6]-1069501632|0,T=(T<<9|T>>>23)+d|0,S+=(T&C|d&~C)+g[11]+643717713|0,S=(S<<14|S>>>18)+T|0,C+=(S&d|T&~d)+g[0]-373897302|0,C=(C<<20|C>>>12)+S|0,d+=(C&T|S&~T)+g[5]-701558691|0,d=(d<<5|d>>>27)+C|0,T+=(d&S|C&~S)+g[10]+38016083|0,T=(T<<9|T>>>23)+d|0,S+=(T&C|d&~C)+g[15]-660478335|0,S=(S<<14|S>>>18)+T|0,C+=(S&d|T&~d)+g[4]-405537848|0,C=(C<<20|C>>>12)+S|0,d+=(C&T|S&~T)+g[9]+568446438|0,d=(d<<5|d>>>27)+C|0,T+=(d&S|C&~S)+g[14]-1019803690|0,T=(T<<9|T>>>23)+d|0,S+=(T&C|d&~C)+g[3]-187363961|0,S=(S<<14|S>>>18)+T|0,C+=(S&d|T&~d)+g[8]+1163531501|0,C=(C<<20|C>>>12)+S|0,d+=(C&T|S&~T)+g[13]-1444681467|0,d=(d<<5|d>>>27)+C|0,T+=(d&S|C&~S)+g[2]-51403784|0,T=(T<<9|T>>>23)+d|0,S+=(T&C|d&~C)+g[7]+1735328473|0,S=(S<<14|S>>>18)+T|0,C+=(S&d|T&~d)+g[12]-1926607734|0,C=(C<<20|C>>>12)+S|0,d+=(C^S^T)+g[5]-378558|0,d=(d<<4|d>>>28)+C|0,T+=(d^C^S)+g[8]-2022574463|0,T=(T<<11|T>>>21)+d|0,S+=(T^d^C)+g[11]+1839030562|0,S=(S<<16|S>>>16)+T|0,C+=(S^T^d)+g[14]-35309556|0,C=(C<<23|C>>>9)+S|0,d+=(C^S^T)+g[1]-1530992060|0,d=(d<<4|d>>>28)+C|0,T+=(d^C^S)+g[4]+1272893353|0,T=(T<<11|T>>>21)+d|0,S+=(T^d^C)+g[7]-155497632|0,S=(S<<16|S>>>16)+T|0,C+=(S^T^d)+g[10]-1094730640|0,C=(C<<23|C>>>9)+S|0,d+=(C^S^T)+g[13]+681279174|0,d=(d<<4|d>>>28)+C|0,T+=(d^C^S)+g[0]-358537222|0,T=(T<<11|T>>>21)+d|0,S+=(T^d^C)+g[3]-722521979|0,S=(S<<16|S>>>16)+T|0,C+=(S^T^d)+g[6]+76029189|0,C=(C<<23|C>>>9)+S|0,d+=(C^S^T)+g[9]-640364487|0,d=(d<<4|d>>>28)+C|0,T+=(d^C^S)+g[12]-421815835|0,T=(T<<11|T>>>21)+d|0,S+=(T^d^C)+g[15]+530742520|0,S=(S<<16|S>>>16)+T|0,C+=(S^T^d)+g[2]-995338651|0,C=(C<<23|C>>>9)+S|0,d+=(S^(C|~T))+g[0]-198630844|0,d=(d<<6|d>>>26)+C|0,T+=(C^(d|~S))+g[7]+1126891415|0,T=(T<<10|T>>>22)+d|0,S+=(d^(T|~C))+g[14]-1416354905|0,S=(S<<15|S>>>17)+T|0,C+=(T^(S|~d))+g[5]-57434055|0,C=(C<<21|C>>>11)+S|0,d+=(S^(C|~T))+g[12]+1700485571|0,d=(d<<6|d>>>26)+C|0,T+=(C^(d|~S))+g[3]-1894986606|0,T=(T<<10|T>>>22)+d|0,S+=(d^(T|~C))+g[10]-1051523|0,S=(S<<15|S>>>17)+T|0,C+=(T^(S|~d))+g[1]-2054922799|0,C=(C<<21|C>>>11)+S|0,d+=(S^(C|~T))+g[8]+1873313359|0,d=(d<<6|d>>>26)+C|0,T+=(C^(d|~S))+g[15]-30611744|0,T=(T<<10|T>>>22)+d|0,S+=(d^(T|~C))+g[6]-1560198380|0,S=(S<<15|S>>>17)+T|0,C+=(T^(S|~d))+g[13]+1309151649|0,C=(C<<21|C>>>11)+S|0,d+=(S^(C|~T))+g[4]-145523070|0,d=(d<<6|d>>>26)+C|0,T+=(C^(d|~S))+g[11]-1120210379|0,T=(T<<10|T>>>22)+d|0,S+=(d^(T|~C))+g[2]+718787259|0,S=(S<<15|S>>>17)+T|0,C+=(T^(S|~d))+g[9]-343485551|0,C=(C<<21|C>>>11)+S|0,x[0]=d+x[0]|0,x[1]=C+x[1]|0,x[2]=S+x[2]|0,x[3]=T+x[3]|0}function i(x){var g=[],d;for(d=0;d<64;d+=4)g[d>>2]=x.charCodeAt(d)+(x.charCodeAt(d+1)<<8)+(x.charCodeAt(d+2)<<16)+(x.charCodeAt(d+3)<<24);return g}function o(x){var g=[],d;for(d=0;d<64;d+=4)g[d>>2]=x[d]+(x[d+1]<<8)+(x[d+2]<<16)+(x[d+3]<<24);return g}function s(x){var g=x.length,d=[1732584193,-271733879,-1732584194,271733878],C,S,T,w,E,D;for(C=64;C<=g;C+=64)a(d,i(x.substring(C-64,C)));for(x=x.substring(C-64),S=x.length,T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],C=0;C<S;C+=1)T[C>>2]|=x.charCodeAt(C)<<(C%4<<3);if(T[C>>2]|=128<<(C%4<<3),C>55)for(a(d,T),C=0;C<16;C+=1)T[C]=0;return w=g*8,w=w.toString(16).match(/(.*?)(.{0,8})$/),E=parseInt(w[2],16),D=parseInt(w[1],16)||0,T[14]=E,T[15]=D,a(d,T),d}function c(x){var g=x.length,d=[1732584193,-271733879,-1732584194,271733878],C,S,T,w,E,D;for(C=64;C<=g;C+=64)a(d,o(x.subarray(C-64,C)));for(x=C-64<g?x.subarray(C-64):new Uint8Array(0),S=x.length,T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],C=0;C<S;C+=1)T[C>>2]|=x[C]<<(C%4<<3);if(T[C>>2]|=128<<(C%4<<3),C>55)for(a(d,T),C=0;C<16;C+=1)T[C]=0;return w=g*8,w=w.toString(16).match(/(.*?)(.{0,8})$/),E=parseInt(w[2],16),D=parseInt(w[1],16)||0,T[14]=E,T[15]=D,a(d,T),d}function u(x){var g="",d;for(d=0;d<4;d+=1)g+=r[x>>d*8+4&15]+r[x>>d*8&15];return g}function f(x){var g;for(g=0;g<x.length;g+=1)x[g]=u(x[g]);return x.join("")}f(s("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function x(g,d){return g=g|0||0,g<0?Math.max(g+d,0):Math.min(g,d)}ArrayBuffer.prototype.slice=function(g,d){var C=this.byteLength,S=x(g,C),T=C,w,E,D,b;return d!==n&&(T=x(d,C)),S>T?new ArrayBuffer(0):(w=T-S,E=new ArrayBuffer(w),D=new Uint8Array(E),b=new Uint8Array(this,S,w),D.set(b),E)}}();function l(x){return/[\u0080-\uFFFF]/.test(x)&&(x=unescape(encodeURIComponent(x))),x}function p(x,g){var d=x.length,C=new ArrayBuffer(d),S=new Uint8Array(C),T;for(T=0;T<d;T+=1)S[T]=x.charCodeAt(T);return g?S:C}function h(x){return String.fromCharCode.apply(null,new Uint8Array(x))}function v(x,g,d){var C=new Uint8Array(x.byteLength+g.byteLength);return C.set(new Uint8Array(x)),C.set(new Uint8Array(g),x.byteLength),d?C:C.buffer}function y(x){var g=[],d=x.length,C;for(C=0;C<d-1;C+=2)g.push(parseInt(x.substr(C,2),16));return String.fromCharCode.apply(String,g)}function m(){this.reset()}return m.prototype.append=function(x){return this.appendBinary(l(x)),this},m.prototype.appendBinary=function(x){this._buff+=x,this._length+=x.length;var g=this._buff.length,d;for(d=64;d<=g;d+=64)a(this._hash,i(this._buff.substring(d-64,d)));return this._buff=this._buff.substring(d-64),this},m.prototype.end=function(x){var g=this._buff,d=g.length,C,S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T;for(C=0;C<d;C+=1)S[C>>2]|=g.charCodeAt(C)<<(C%4<<3);return this._finish(S,d),T=f(this._hash),x&&(T=y(T)),this.reset(),T},m.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},m.prototype.setState=function(x){return this._buff=x.buff,this._length=x.length,this._hash=x.hash,this},m.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},m.prototype._finish=function(x,g){var d=g,C,S,T;if(x[d>>2]|=128<<(d%4<<3),d>55)for(a(this._hash,x),d=0;d<16;d+=1)x[d]=0;C=this._length*8,C=C.toString(16).match(/(.*?)(.{0,8})$/),S=parseInt(C[2],16),T=parseInt(C[1],16)||0,x[14]=S,x[15]=T,a(this._hash,x)},m.hash=function(x,g){return m.hashBinary(l(x),g)},m.hashBinary=function(x,g){var d=s(x),C=f(d);return g?y(C):C},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(x){var g=v(this._buff.buffer,x,!0),d=g.length,C;for(this._length+=x.byteLength,C=64;C<=d;C+=64)a(this._hash,o(g.subarray(C-64,C)));return this._buff=C-64<d?new Uint8Array(g.buffer.slice(C-64)):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(x){var g=this._buff,d=g.length,C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S,T;for(S=0;S<d;S+=1)C[S>>2]|=g[S]<<(S%4<<3);return this._finish(C,d),T=f(this._hash),x&&(T=y(T)),this.reset(),T},m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.getState=function(){var x=m.prototype.getState.call(this);return x.buff=h(x.buff),x},m.ArrayBuffer.prototype.setState=function(x){return x.buff=p(x.buff,!0),m.prototype.setState.call(this,x)},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.hash=function(x,g){var d=c(new Uint8Array(x)),C=f(d);return g?y(C):C},m})})(kM);const FM=Xu;var AM=["lastShaderBound","context","_openGLRenderWindow"];function VM(t,e){e.classHierarchy.push("vtkShaderCache"),t.replaceShaderValues=function(n,r,a){var i=r;a.length>0&&(i=ee.substitute(i,"VSOut","GSOut").result);var o=e._openGLRenderWindow.getWebgl2(),s=`
`,c=`#version 100
`;o?c=`#version 300 es
#define attribute in
#define textureCube texture
#define texture2D texture
#define textureCubeLod textureLod
#define texture2DLod textureLod
`:(e.context.getExtension("OES_standard_derivatives"),e.context.getExtension("EXT_frag_depth")&&(s=`#extension GL_EXT_frag_depth : enable
`),e.context.getExtension("EXT_shader_texture_lod")&&(s+=`#extension GL_EXT_shader_texture_lod : enable
#define textureCubeLod textureCubeLodEXT
#define texture2DLod texture2DLodEXT`)),i=ee.substitute(i,"//VTK::System::Dec",["".concat(c,`
`),o?"":`#extension GL_OES_standard_derivatives : enable
`,s,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;var u=ee.substitute(n,"//VTK::System::Dec",["".concat(c,`
`),"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;if(o){u=ee.substitute(u,"varying","out").result,i=ee.substitute(i,"varying","in").result;for(var f="",l=0;i.includes("gl_FragData[".concat(l,"]"));)i=ee.substitute(i,"gl_FragData\\[".concat(l,"\\]"),"fragOutput".concat(l)).result,f+="layout(location = ".concat(l,") out vec4 fragOutput").concat(l,`;
`),l++;i=ee.substitute(i,"//VTK::Output::Dec",f).result}var p=ee.substitute(a,"//VTK::System::Dec",c).result;return{VSSource:u,FSSource:i,GSSource:p}},t.readyShaderProgramArray=function(n,r,a){var i=t.replaceShaderValues(n,r,a),o=t.getShaderProgram(i.VSSource,i.FSSource,i.GSSource);return t.readyShaderProgram(o)},t.readyShaderProgram=function(n){return!n||!n.getCompiled()&&!n.compileShader()||!t.bindShader(n)?null:n},t.getShaderProgram=function(n,r,a){var i="".concat(n).concat(r).concat(a),o=FM.hash(i);if(!(o in e.shaderPrograms)){var s=ee.newInstance();return s.setContext(e.context),s.getVertexShader().setSource(n),s.getFragmentShader().setSource(r),a&&s.getGeometryShader().setSource(a),s.setMd5Hash(o),e.shaderPrograms[o]=s,s}return e.shaderPrograms[o]},t.releaseGraphicsResources=function(n){t.releaseCurrentShader(),Object.keys(e.shaderPrograms).map(function(r){return e.shaderPrograms[r]}).forEach(function(r){return r.releaseGraphicsResources(n)})},t.releaseGraphicsResources=function(){e.astShaderBound&&(e.lastShaderBound.release(),e.lastShaderBound=null)},t.bindShader=function(n){return e.lastShaderBound===n||(e.lastShaderBound&&e.lastShaderBound.release(),n.bind(),e.lastShaderBound=n),1}}var BM={lastShaderBound:null,shaderPrograms:null,context:null};function Rg(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,BM,n),e.shaderPrograms={},B.obj(t,e),B.setGet(t,e,AM),B.moveToProtected(t,e,["openGLRenderWindow"]),VM(t,e)}var UM=B.newInstance(Rg,"vtkShaderCache"),GM={newInstance:UM,extend:Rg},PM=B.vtkErrorMacro;function IM(t,e){e.classHierarchy.push("vtkOpenGLTextureUnitManager"),t.deleteTable=function(){for(var n=0;n<e.numberOfTextureUnits;++n)e.textureUnits[n]===!0&&PM("some texture units  were not properly released");e.textureUnits=[],e.numberOfTextureUnits=0},t.setContext=function(n){if(e.context!==n){if(e.context!==0&&t.deleteTable(),e.context=n,e.context){e.numberOfTextureUnits=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);for(var r=0;r<e.numberOfTextureUnits;++r)e.textureUnits[r]=!1}t.modified()}},t.allocate=function(){for(var n=0;n<e.numberOfTextureUnits;n++)if(!t.isAllocated(n))return e.textureUnits[n]=!0,n;return-1},t.allocateUnit=function(n){return t.isAllocated(n)?-1:(e.textureUnits[n]=!0,n)},t.isAllocated=function(n){return e.textureUnits[n]},t.free=function(n){e.textureUnits[n]=!1}}var jM={context:null,numberOfTextureUnits:0,textureUnits:0};function Lg(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,jM,n),B.obj(t,e),e.textureUnits=[],B.get(t,e,["numberOfTextureUnits"]),B.setGet(t,e,["context"]),IM(t,e)}var zM=B.newInstance(Lg,"vtkOpenGLTextureUnitManager"),WM={newInstance:zM,extend:Lg};function HM(t,e){e.classHierarchy.push("vtkRenderWindowViewNode"),t.getViewNodeFactory=function(){return null},t.getAspectRatio=function(){return e.size[0]/e.size[1]},t.getAspectRatioForRenderer=function(n){var r=n.getViewportByReference();return e.size[0]*(r[2]-r[0])/((r[3]-r[1])*e.size[1])},t.isInViewport=function(n,r,a){var i=a.getViewportByReference(),o=t.getFramebufferSize();return i[0]*o[0]<=n&&i[2]*o[0]>=n&&i[1]*o[1]<=r&&i[3]*o[1]>=r},t.getViewportSize=function(n){var r=n.getViewportByReference(),a=t.getFramebufferSize();return[(r[2]-r[0])*a[0],(r[3]-r[1])*a[1]]},t.getViewportCenter=function(n){var r=t.getViewportSize(n);return[r[0]*.5,r[1]*.5]},t.displayToNormalizedDisplay=function(n,r,a){var i=t.getFramebufferSize();return[n/i[0],r/i[1],a]},t.normalizedDisplayToDisplay=function(n,r,a){var i=t.getFramebufferSize();return[n*i[0],r*i[1],a]},t.worldToView=function(n,r,a,i){return i.worldToView(n,r,a)},t.viewToWorld=function(n,r,a,i){return i.viewToWorld(n,r,a)},t.worldToDisplay=function(n,r,a,i){var o=i.worldToView(n,r,a),s=t.getViewportSize(i),c=i.viewToProjection(o[0],o[1],o[2],s[0]/s[1]),u=i.projectionToNormalizedDisplay(c[0],c[1],c[2]);return t.normalizedDisplayToDisplay(u[0],u[1],u[2])},t.displayToWorld=function(n,r,a,i){var o=t.displayToNormalizedDisplay(n,r,a),s=i.normalizedDisplayToProjection(o[0],o[1],o[2]),c=t.getViewportSize(i),u=i.projectionToView(s[0],s[1],s[2],c[0]/c[1]);return i.viewToWorld(u[0],u[1],u[2])},t.normalizedDisplayToViewport=function(n,r,a,i){var o=i.getViewportByReference();o=t.normalizedDisplayToDisplay(o[0],o[1],0);var s=t.normalizedDisplayToDisplay(n,r,a);return[s[0]-o[0]-.5,s[1]-o[1]-.5,a]},t.viewportToNormalizedViewport=function(n,r,a,i){var o=t.getViewportSize(i);return o&&o[0]!==0&&o[1]!==0?[n/(o[0]-1),r/(o[1]-1),a]:[n,r,a]},t.normalizedViewportToViewport=function(n,r,a,i){var o=t.getViewportSize(i);return[n*(o[0]-1),r*(o[1]-1),a]},t.displayToLocalDisplay=function(n,r,a){var i=t.getFramebufferSize();return[n,i[1]-r-1,a]},t.viewportToNormalizedDisplay=function(n,r,a,i){var o=i.getViewportByReference();o=t.normalizedDisplayToDisplay(o[0],o[1],0);var s=n+o[0]+.5,c=r+o[1]+.5;return t.displayToNormalizedDisplay(s,c,a)},t.getComputedDevicePixelRatio=function(){return e.size[0]/t.getContainerSize()[0]},t.getContainerSize=function(){B.vtkErrorMacro("not implemented")},t.getPixelData=function(n,r,a,i){B.vtkErrorMacro("not implemented")},t.createSelector=function(){B.vtkErrorMacro("not implemented")}}var $M={size:void 0,selector:void 0};function kg(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,$M,n),e.size||(e.size=[300,300]),B.getArray(t,e,["size"],2),B.get(t,e,["selector"]),xt.extend(t,e,n),HM(t,e)}var KM=B.newInstance(kg,"vtkRenderWindowViewNode"),XM={newInstance:KM,extend:kg},qM={HmdVR:0,MobileAR:1,LookingGlassVR:2,HmdAR:3},YM={XrSessionTypes:qM},Fg="__getUnderlyingContext";function JM(){var t=new Map,e={apply:function(i,o,s){return t.has(s[0])?t.get(s[0]):i.apply(o,s)}};function n(a){return{apply:function(o,s,c){return t.set(a,c[0]),o.apply(s,c)}}}var r=Object.create(null);return r.getParameter=function(a,i,o,s){return new Proxy(s.bind(a),e)},r.depthMask=function(a,i,o,s){return new Proxy(s.bind(a),n(a.DEPTH_WRITEMASK))},{get:function(i,o,s){if(o===Fg)return function(){return i};var c=Reflect.get(i,o,i);c instanceof Function&&(c=c.bind(i));var u=r[o];return u?u(i,o,s,c):c}}}var Ag=B.vtkDebugMacro,Vg=B.vtkErrorMacro,kr=YM.XrSessionTypes,ZM={position:"absolute",top:0,left:0,width:"100%",height:"100%"},Bg={rescaleFactor:.25,translateZ:-1.5};function Nt(t,e,n){var r=t.createFramebuffer(),a=t.createTexture();t.bindTexture(t.TEXTURE_2D,a),t.texImage2D(t.TEXTURE_2D,0,e,2,2,0,e,n,null),t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,a,0);var i=t.checkFramebufferStatus(t.FRAMEBUFFER);return t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindTexture(t.TEXTURE_2D,null),i===t.FRAMEBUFFER_COMPLETE}var rs=0,ns=[];function QM(){rs++,ns.forEach(function(t){return t(rs)})}function eN(){rs--,ns.forEach(function(t){return t(rs)})}function tN(t){ns.push(t)}function rN(t){return ns.pop()}function Ug(t){t.preventDefault()}function nN(t,e){e.classHierarchy.push("vtkOpenGLRenderWindow");var n=JM();t.getViewNodeFactory=function(){return e.myFactory},e.canvas.addEventListener("webglcontextlost",Ug,!1),e.canvas.addEventListener("webglcontextrestored",t.restoreContext,!1);var r=navigator.xr!==void 0&&navigator.xr.isSessionSupported("immersive-vr"),a=[0,0];function i(){e.renderable&&(e.size[0]!==a[0]||e.size[1]!==a[1])&&(a[0]=e.size[0],a[1]=e.size[1],e.canvas.setAttribute("width",e.size[0]),e.canvas.setAttribute("height",e.size[1])),e.viewStream&&e.viewStream.setSize(e.size[0],e.size[1]),e.canvas.style.display=e.useOffScreen?"none":"block",e.el&&(e.el.style.cursor=e.cursorVisibility?e.cursor:"none"),e.containerSize=null}t.onModified(i),t.buildPass=function(f){if(f){if(!e.renderable)return;t.prepareNodes(),t.addMissingNodes(e.renderable.getRenderersByReference()),t.removeUnusedNodes(),t.initialize(),e.children.forEach(function(l){l.setOpenGLRenderWindow(t)})}},t.initialize=function(){if(!e.initialized){e.context=t.get3DContext(),e.textureUnitManager=WM.newInstance(),e.textureUnitManager.setContext(e.context),e.shaderCache.setContext(e.context);var f=e.context;f.blendFuncSeparate(f.SRC_ALPHA,f.ONE_MINUS_SRC_ALPHA,f.ONE,f.ONE_MINUS_SRC_ALPHA),f.depthFunc(f.LEQUAL),f.enable(f.BLEND),e.initialized=!0}},t.makeCurrent=function(){e.context.makeCurrent()},t.setContainer=function(f){e.el&&e.el!==f&&(e.canvas.parentNode!==e.el&&Vg("Error: canvas parent node does not match container"),e.el.removeChild(e.canvas),e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)),e.el!==f&&(e.el=f,e.el&&(e.el.appendChild(e.canvas),e.useBackgroundImage&&e.el.appendChild(e.bgImage)),t.modified())},t.getContainer=function(){return e.el},t.getContainerSize=function(){if(!e.containerSize&&e.el){var f=e.el.getBoundingClientRect(),l=f.width,p=f.height;e.containerSize=[l,p]}return e.containerSize||e.size},t.getFramebufferSize=function(){return e.activeFramebuffer?e.activeFramebuffer.getSize():e.size},t.getPixelData=function(f,l,p,h){var v=new Uint8Array((p-f+1)*(h-l+1)*4);return e.context.readPixels(f,l,p-f+1,h-l+1,e.context.RGBA,e.context.UNSIGNED_BYTE,v),v},t.get3DContext=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{preserveDrawingBuffer:!1,depth:!0,alpha:!0,powerPreference:"high-performance"},l=null;r&&t.invokeHaveVRDisplay();var p=typeof WebGL2RenderingContext<"u";return e.webgl2=!1,e.defaultToWebgl2&&p&&(l=e.canvas.getContext("webgl2",f),l&&(e.webgl2=!0,Ag("using webgl2"))),l||(Ag("using webgl1"),l=e.canvas.getContext("webgl",f)||e.canvas.getContext("experimental-webgl",f)),new Proxy(l,n)},t.startXR=function(f){if(navigator.xr===void 0)throw new Error("WebXR is not available");e.xrSessionType=f!==void 0?f:kr.HmdVR;var l=[kr.HmdAR,kr.MobileAR].includes(e.xrSessionType),p=l?"immersive-ar":"immersive-vr";if(!navigator.xr.isSessionSupported(p))throw l?new Error("Device does not support AR session"):new Error("VR display is not available");if(e.xrSession===null)navigator.xr.requestSession(p).then(t.enterXR,function(){throw new Error("Failed to create XR session!")});else throw new Error("XR Session already exists!")},t.enterXR=function(){var f=Zn($t.mark(function l(p){var h,v,y,m;return $t.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(e.xrSession=p,e.oldCanvasSize=e.size.slice(),e.xrSession===null){g.next=17;break}return h=t.get3DContext(),g.next=6,h.makeXRCompatible();case 6:v=new global.XRWebGLLayer(e.xrSession,h[Fg]()),t.setSize(v.framebufferWidth,v.framebufferHeight),e.xrSession.updateRenderState({baseLayer:v}),e.xrSession.requestReferenceSpace("local").then(function(d){e.xrReferenceSpace=d}),y=[kr.HmdAR,kr.MobileAR].includes(e.xrSessionType),y&&(m=e.renderable.getRenderers()[0],e.preXrSessionBackground=m.getBackground(),m.setBackground([0,0,0,0])),t.resetXRScene(),e.renderable.getInteractor().switchToXRAnimation(),e.xrSceneFrame=e.xrSession.requestAnimationFrame(t.xrRender),g.next=18;break;case 17:throw new Error("Failed to enter XR with a null xrSession.");case 18:case"end":return g.stop()}},l)}));return function(l){return f.apply(this,arguments)}}(),t.resetXRScene=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Bg.rescaleFactor,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Bg.translateZ,p=e.renderable.getRenderers()[0];p.resetCamera();var h=p.getActiveCamera(),v=h.getPhysicalScale(),y=h.getPhysicalTranslation(),m=l*v;v/=f,y[2]+=m,h.setPhysicalScale(v),h.setPhysicalTranslation(y),h.setClippingRange(.1*v,100*v)},t.stopXR=Zn($t.mark(function f(){var l,p;return $t.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(navigator.xr!==void 0){v.next=2;break}return v.abrupt("return");case 2:if(e.xrSession===null){v.next=10;break}return e.xrSession.cancelAnimationFrame(e.xrSceneFrame),e.renderable.getInteractor().returnFromXRAnimation(),l=t.get3DContext(),l.bindFramebuffer(l.FRAMEBUFFER,null),v.next=9,e.xrSession.end().catch(function(y){if(!(y instanceof DOMException))throw y});case 9:e.xrSession=null;case 10:e.oldCanvasSize!==void 0&&t.setSize.apply(t,ve(e.oldCanvasSize)),p=e.renderable.getRenderers()[0],e.preXrSessionBackground!=null&&(p.setBackground(e.preXrSessionBackground),e.preXrSessionBackground=null),p.getActiveCamera().setProjectionMatrix(null),p.resetCamera(),p.setViewport(0,0,1,1),t.traverseAllPasses();case 17:case"end":return v.stop()}},f)})),t.xrRender=function(){var f=Zn($t.mark(function l(p,h){var v,y,m,x,g,d;return $t.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:v=h.session,y=[kr.HmdVR,kr.HmdAR].includes(e.xrSessionType),e.renderable.getInteractor().updateXRGamepads(v,h,e.xrReferenceSpace),e.xrSceneFrame=e.xrSession.requestAnimationFrame(t.xrRender),m=h.getViewerPose(e.xrReferenceSpace),m&&(x=t.get3DContext(),e.xrSessionType===kr.MobileAR&&e.oldCanvasSize!==void 0&&(x.canvas.width=e.oldCanvasSize[0],x.canvas.height=e.oldCanvasSize[1]),g=v.renderState.baseLayer,x.bindFramebuffer(x.FRAMEBUFFER,g.framebuffer),x.clear(x.COLOR_BUFFER_BIT),x.clear(x.DEPTH_BUFFER_BIT),t.setSize(g.framebufferWidth,g.framebufferHeight),d=e.renderable.getRenderers()[0],m.views.forEach(function(T,w){var E=g.getViewport(T);if(y)if(T.eye==="left")d.setViewport(0,0,.5,1);else if(T.eye==="right")d.setViewport(.5,0,1,1);else return;else if(e.xrSessionType===kr.LookingGlassVR){var D=E.x/g.framebufferWidth,b=E.y/g.framebufferHeight,O=(E.x+E.width)/g.framebufferWidth,M=(E.y+E.height)/g.framebufferHeight;d.setViewport(D,b,O,M)}else d.setViewport(0,0,1,1);d.getActiveCamera().computeViewParametersFromPhysicalMatrix(T.transform.inverse.matrix),d.getActiveCamera().setProjectionMatrix(T.projectionMatrix),t.traverseAllPasses()}),x.scissor(0,0,g.framebufferWidth,g.framebufferHeight),x.disable(x.SCISSOR_TEST));case 6:case"end":return S.stop()}},l)}));return function(l,p){return f.apply(this,arguments)}}(),t.restoreContext=function(){var f=Ku.newInstance();f.setCurrentOperation("Release"),f.traverse(t,null)},t.activateTexture=function(f){var l=e._textureResourceIds.get(f);if(l!==void 0){e.context.activeTexture(e.context.TEXTURE0+l);return}var p=t.getTextureUnitManager().allocate();if(p<0){Vg("Hardware does not support the number of textures defined.");return}e._textureResourceIds.set(f,p),e.context.activeTexture(e.context.TEXTURE0+p)},t.deactivateTexture=function(f){var l=e._textureResourceIds.get(f);l!==void 0&&(t.getTextureUnitManager().free(l),e._textureResourceIds.delete(f))},t.getTextureUnitForTexture=function(f){var l=e._textureResourceIds.get(f);return l!==void 0?l:-1},t.getDefaultTextureInternalFormat=function(f,l){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.webgl2)switch(f){case He.UNSIGNED_CHAR:switch(l){case 1:return e.context.R8;case 2:return e.context.RG8;case 3:return e.context.RGB8;case 4:default:return e.context.RGBA8}case(p&&!h&&He.UNSIGNED_SHORT):switch(l){case 1:return p.R16_EXT;case 2:return p.RG16_EXT;case 3:return p.RGB16_EXT;case 4:default:return p.RGBA16_EXT}case(p&&!h&&He.SHORT):switch(l){case 1:return p.R16_SNORM_EXT;case 2:return p.RG16_SNORM_EXT;case 3:return p.RGB16_SNORM_EXT;case 4:default:return p.RGBA16_SNORM_EXT}case He.FLOAT:default:switch(l){case 1:return e.context.R16F;case 2:return e.context.RG16F;case 3:return e.context.RGB16F;case 4:default:return e.context.RGBA16F}}switch(l){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;case 4:default:return e.context.RGBA}},t.setBackgroundImage=function(f){e.bgImage.src=f.src},t.setUseBackgroundImage=function(f){e.useBackgroundImage=f,e.useBackgroundImage&&!e.el.contains(e.bgImage)?e.el.appendChild(e.bgImage):!e.useBackgroundImage&&e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)};function o(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.imageFormat,l=document.createElement("canvas"),p=l.getContext("2d");l.width=e.canvas.width,l.height=e.canvas.height,p.drawImage(e.canvas,0,0);var h=e.canvas.getBoundingClientRect(),v=e.renderable,y=v.getRenderers();y.forEach(function(x){var g=x.getViewProps();g.forEach(function(d){if(d.getContainer)for(var C=d.getContainer(),S=C.getElementsByTagName("canvas"),T=0;T<S.length;T++){var w=S[T],E=w.getBoundingClientRect(),D=E.x-h.x,b=E.y-h.y;p.drawImage(w,D,b)}})});var m=l.toDataURL(f);l.remove(),t.invokeImageReady(m)}t.captureNextImage=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=l.resetCamera,h=p===void 0?!1:p,v=l.size,y=v===void 0?null:v,m=l.scale,x=m===void 0?1:m;if(e.deleted)return null;e.imageFormat=f;var g=e.notifyStartCaptureImage;return e.notifyStartCaptureImage=!0,e._screenshot={size:y||x!==1?y||e.size.map(function(d){return d*x}):null},new Promise(function(d,C){var S=t.onImageReady(function(T){if(e._screenshot.size===null)e.notifyStartCaptureImage=g,S.unsubscribe(),e._screenshot.placeHolder&&(e.size=e._screenshot.originalSize,t.modified(),e._screenshot.cameras&&e._screenshot.cameras.forEach(function(D){var b=D.restoreParamsFn,O=D.arg;return b(O)}),t.traverseAllPasses(),e.el.removeChild(e._screenshot.placeHolder),e._screenshot.placeHolder.remove(),e._screenshot=null),d(T);else{var w=document.createElement("img");if(w.style=ZM,w.src=T,e._screenshot.placeHolder=e.el.appendChild(w),e.canvas.style.display="none",e._screenshot.originalSize=e.size,e.size=e._screenshot.size,e._screenshot.size=null,t.modified(),h){var E=h!==!0;e._screenshot.cameras=e.renderable.getRenderers().map(function(D){var b=D.getActiveCamera(),O=b.get("focalPoint","position","parallelScale");return{resetCameraArgs:E?{renderer:D}:void 0,resetCameraFn:E?h:D.resetCamera,restoreParamsFn:b.set,arg:JSON.parse(JSON.stringify(O))}}),e._screenshot.cameras.forEach(function(D){var b=D.resetCameraFn,O=D.resetCameraArgs;return b(O)})}t.traverseAllPasses()}})})};var s;t.getHardwareMaximumLineWidth=function(){if(s!=null)return s;var f=t.get3DContext(),l=f.getParameter(f.ALIASED_LINE_WIDTH_RANGE);return s=l[1],l[1]},t.getGLInformations=function(){for(var f=t.get3DContext(),l=f.getExtension("OES_texture_float"),p=f.getExtension("OES_texture_half_float"),h=f.getExtension("WEBGL_debug_renderer_info"),v=f.getExtension("WEBGL_draw_buffers"),y=f.getExtension("EXT_texture_filter_anisotropic")||f.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),m=[["Max Vertex Attributes","MAX_VERTEX_ATTRIBS",f.getParameter(f.MAX_VERTEX_ATTRIBS)],["Max Varying Vectors","MAX_VARYING_VECTORS",f.getParameter(f.MAX_VARYING_VECTORS)],["Max Vertex Uniform Vectors","MAX_VERTEX_UNIFORM_VECTORS",f.getParameter(f.MAX_VERTEX_UNIFORM_VECTORS)],["Max Fragment Uniform Vectors","MAX_FRAGMENT_UNIFORM_VECTORS",f.getParameter(f.MAX_FRAGMENT_UNIFORM_VECTORS)],["Max Fragment Texture Image Units","MAX_TEXTURE_IMAGE_UNITS",f.getParameter(f.MAX_TEXTURE_IMAGE_UNITS)],["Max Vertex Texture Image Units","MAX_VERTEX_TEXTURE_IMAGE_UNITS",f.getParameter(f.MAX_VERTEX_TEXTURE_IMAGE_UNITS)],["Max Combined Texture Image Units","MAX_COMBINED_TEXTURE_IMAGE_UNITS",f.getParameter(f.MAX_COMBINED_TEXTURE_IMAGE_UNITS)],["Max 2D Texture Size","MAX_TEXTURE_SIZE",f.getParameter(f.MAX_TEXTURE_SIZE)],["Max Cube Texture Size","MAX_CUBE_MAP_TEXTURE_SIZE",f.getParameter(f.MAX_CUBE_MAP_TEXTURE_SIZE)],["Max Texture Anisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT",y&&f.getParameter(y.MAX_TEXTURE_MAX_ANISOTROPY_EXT)],["Point Size Range","ALIASED_POINT_SIZE_RANGE",f.getParameter(f.ALIASED_POINT_SIZE_RANGE).join(" - ")],["Line Width Range","ALIASED_LINE_WIDTH_RANGE",f.getParameter(f.ALIASED_LINE_WIDTH_RANGE).join(" - ")],["Max Viewport Dimensions","MAX_VIEWPORT_DIMS",f.getParameter(f.MAX_VIEWPORT_DIMS).join(" - ")],["Max Renderbuffer Size","MAX_RENDERBUFFER_SIZE",f.getParameter(f.MAX_RENDERBUFFER_SIZE)],["Framebuffer Red Bits","RED_BITS",f.getParameter(f.RED_BITS)],["Framebuffer Green Bits","GREEN_BITS",f.getParameter(f.GREEN_BITS)],["Framebuffer Blue Bits","BLUE_BITS",f.getParameter(f.BLUE_BITS)],["Framebuffer Alpha Bits","ALPHA_BITS",f.getParameter(f.ALPHA_BITS)],["Framebuffer Depth Bits","DEPTH_BITS",f.getParameter(f.DEPTH_BITS)],["Framebuffer Stencil Bits","STENCIL_BITS",f.getParameter(f.STENCIL_BITS)],["Framebuffer Subpixel Bits","SUBPIXEL_BITS",f.getParameter(f.SUBPIXEL_BITS)],["MSAA Samples","SAMPLES",f.getParameter(f.SAMPLES)],["MSAA Sample Buffers","SAMPLE_BUFFERS",f.getParameter(f.SAMPLE_BUFFERS)],["Supported Formats for UByte Render Targets     ","UNSIGNED_BYTE RENDER TARGET FORMATS",[l&&Nt(f,f.RGBA,f.UNSIGNED_BYTE)?"RGBA":"",l&&Nt(f,f.RGB,f.UNSIGNED_BYTE)?"RGB":"",l&&Nt(f,f.LUMINANCE,f.UNSIGNED_BYTE)?"LUMINANCE":"",l&&Nt(f,f.ALPHA,f.UNSIGNED_BYTE)?"ALPHA":"",l&&Nt(f,f.LUMINANCE_ALPHA,f.UNSIGNED_BYTE)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Half Float Render Targets","HALF FLOAT RENDER TARGET FORMATS",[p&&Nt(f,f.RGBA,p.HALF_FLOAT_OES)?"RGBA":"",p&&Nt(f,f.RGB,p.HALF_FLOAT_OES)?"RGB":"",p&&Nt(f,f.LUMINANCE,p.HALF_FLOAT_OES)?"LUMINANCE":"",p&&Nt(f,f.ALPHA,p.HALF_FLOAT_OES)?"ALPHA":"",p&&Nt(f,f.LUMINANCE_ALPHA,p.HALF_FLOAT_OES)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Full Float Render Targets","FLOAT RENDER TARGET FORMATS",[l&&Nt(f,f.RGBA,f.FLOAT)?"RGBA":"",l&&Nt(f,f.RGB,f.FLOAT)?"RGB":"",l&&Nt(f,f.LUMINANCE,f.FLOAT)?"LUMINANCE":"",l&&Nt(f,f.ALPHA,f.FLOAT)?"ALPHA":"",l&&Nt(f,f.LUMINANCE_ALPHA,f.FLOAT)?"LUMINANCE_ALPHA":""].join(" ")],["Max Multiple Render Targets Buffers","MAX_DRAW_BUFFERS_WEBGL",v?f.getParameter(v.MAX_DRAW_BUFFERS_WEBGL):0],["High Float Precision in Vertex Shader","HIGH_FLOAT VERTEX_SHADER",[f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.HIGH_FLOAT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Vertex Shader","MEDIUM_FLOAT VERTEX_SHADER",[f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.MEDIUM_FLOAT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Vertex Shader","LOW_FLOAT VERTEX_SHADER",[f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.LOW_FLOAT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Float Precision in Fragment Shader","HIGH_FLOAT FRAGMENT_SHADER",[f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.HIGH_FLOAT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Fragment Shader","MEDIUM_FLOAT FRAGMENT_SHADER",[f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.MEDIUM_FLOAT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Fragment Shader","LOW_FLOAT FRAGMENT_SHADER",[f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.LOW_FLOAT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Int Precision in Vertex Shader","HIGH_INT VERTEX_SHADER",[f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.HIGH_INT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.HIGH_INT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Vertex Shader","MEDIUM_INT VERTEX_SHADER",[f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.MEDIUM_INT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Vertex Shader","LOW_INT VERTEX_SHADER",[f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.LOW_INT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.LOW_INT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.VERTEX_SHADER,f.LOW_INT).rangeMax,"</sup>)"].join("")],["High Int Precision in Fragment Shader","HIGH_INT FRAGMENT_SHADER",[f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.HIGH_INT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.HIGH_INT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Fragment Shader","MEDIUM_INT FRAGMENT_SHADER",[f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.MEDIUM_INT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Fragment Shader","LOW_INT FRAGMENT_SHADER",[f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.LOW_INT).precision," (-2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.LOW_INT).rangeMin,"</sup> - 2<sup>",f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.LOW_INT).rangeMax,"</sup>)"].join("")],["Supported Extensions","EXTENSIONS",f.getSupportedExtensions().join("<br/>					    ")],["WebGL Renderer","RENDERER",f.getParameter(f.RENDERER)],["WebGL Vendor","VENDOR",f.getParameter(f.VENDOR)],["WebGL Version","VERSION",f.getParameter(f.VERSION)],["Shading Language Version","SHADING_LANGUAGE_VERSION",f.getParameter(f.SHADING_LANGUAGE_VERSION)],["Unmasked Renderer","UNMASKED_RENDERER",h&&f.getParameter(h.UNMASKED_RENDERER_WEBGL)],["Unmasked Vendor","UNMASKED_VENDOR",h&&f.getParameter(h.UNMASKED_VENDOR_WEBGL)],["WebGL Version","WEBGL_VERSION",e.webgl2?2:1]],x={};m.length;){var g=m.pop(),d=ze(g,3),C=d[0],S=d[1],T=d[2];S&&(x[S]={label:C,value:T})}return x},t.traverseAllPasses=function(){if(e.renderPasses)for(var f=0;f<e.renderPasses.length;++f)e.renderPasses[f].traverse(t,null);e.notifyStartCaptureImage&&o()},t.disableCullFace=function(){e.cullFaceEnabled&&(e.context.disable(e.context.CULL_FACE),e.cullFaceEnabled=!1)},t.enableCullFace=function(){e.cullFaceEnabled||(e.context.enable(e.context.CULL_FACE),e.cullFaceEnabled=!0)},t.setViewStream=function(f){if(e.viewStream===f)return!1;if(e.subscription&&(e.subscription.unsubscribe(),e.subscription=null),e.viewStream=f,e.viewStream){var l=e.renderable.getRenderers()[0];l.getBackgroundByReference()[3]=0,t.setUseBackgroundImage(!0),e.subscription=e.viewStream.onImageReady(function(p){return t.setBackgroundImage(p.image)}),e.viewStream.setSize(e.size[0],e.size[1]),e.viewStream.invalidateCache(),e.viewStream.render(),t.modified()}return!0},t.createSelector=function(){var f=wo.newInstance();return f.setOpenGLRenderWindow(t),f};function c(){e.canvas.removeEventListener("webglcontextlost",Ug),e.canvas.removeEventListener("webglcontextrestored",t.restoreContext)}t.delete=B.chain(c,t.delete,t.setViewStream,eN),t.setActiveFramebuffer=function(f){e.activeFramebuffer=f};var u=t.setSize;t.setSize=function(f,l){var p=u(f,l);return p&&t.invokeWindowResizeEvent({width:f,height:l}),p}}var aN={cullFaceEnabled:!1,shaderCache:null,initialized:!1,context:null,canvas:null,cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null,containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,webgl2:!1,defaultToWebgl2:!0,activeFramebuffer:null,xrSession:null,xrReferenceSpace:null,xrSupported:!0,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1};function Gg(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,aN,n),XM.extend(t,e,n),e.canvas=document.createElement("canvas"),e.canvas.style.width="100%",QM(),e.selector||(e.selector=wo.newInstance(),e.selector.setOpenGLRenderWindow(t)),e.bgImage=new Image,e.bgImage.style.position="absolute",e.bgImage.style.left="0",e.bgImage.style.top="0",e.bgImage.style.width="100%",e.bgImage.style.height="100%",e.bgImage.style.zIndex="-1",e._textureResourceIds=new Map,e.myFactory=wy.newInstance(),e.myFactory.registerOverride("vtkRenderWindow",qu),e.shaderCache=GM.newInstance(),e.shaderCache.setOpenGLRenderWindow(t),e.renderPasses[0]=LM.newInstance(),B.event(t,e,"imageReady"),B.event(t,e,"haveVRDisplay"),B.get(t,e,["shaderCache","textureUnitManager","webgl2","vrDisplay","useBackgroundImage","xrSupported","activeFramebuffer"]),B.setGet(t,e,["initialized","context","canvas","renderPasses","notifyStartCaptureImage","defaultToWebgl2","cursor","useOffScreen"]),B.setGetArray(t,e,["size"],2),B.event(t,e,"windowResizeEvent"),nN(t,e)}var qu=B.newInstance(Gg,"vtkOpenGLRenderWindow");bv("WebGL",qu);var Pg={newInstance:qu,extend:Gg,pushMonitorGLContextCount:tN,popMonitorGLContextCount:rN};function iN(t,e){e.classHierarchy.push("vtkCompositeCameraManipulator"),t.computeDisplayCenter=function(n,r){var a=n.computeWorldToDisplay(r,e.center[0],e.center[1],e.center[2]);e.displayCenter[0]=a[0],e.displayCenter[1]=a[1]}}var oN={center:[0,0,0],rotationFactor:1,displayCenter:[0,0]};function sN(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,oN,n),B.setGet(t,e,["rotationFactor"]),B.setGetArray(t,e,["displayCenter"],2),B.setGetArray(t,e,["center"],3),iN(t,e)}var pa={extend:sN};function uN(t,e){e.classHierarchy.push("vtkMouseCameraTrackballRotateManipulator");var n=new Float64Array(3),r=new Float64Array(3),a=new Float64Array(3),i=new Float64Array(16),o=new Float64Array(3),s=new Float64Array(3),c=new Float64Array(3);t.onButtonDown=function(u,f,l){e.previousPosition=l},t.onMouseMove=function(u,f,l){if(l){var p=f.getActiveCamera(),h=p.getPosition(),v=p.getFocalPoint();Oe(i);var y=e.center,m=e.rotationFactor;e.useFocalPointAsCenterOfRotation&&(y[0]=v[0],y[1]=v[1],y[2]=v[2]);var x=e.previousPosition.x-l.x,g=e.previousPosition.y-l.y,d=u.getView().getViewportSize(f),C=p.getViewUp();if(e.useWorldUpVec){var S=new Float64Array(3);pc(S,e.worldUpVec),Ys(S,_e(h,e.worldUpVec)/_e(e.worldUpVec,e.worldUpVec)),Ua(y,S,S),rt(i,i,S),Tt(i,i,et(360*x/d[0]*m),e.worldUpVec),S[0]=-S[0],S[1]=-S[1],S[2]=-S[2],rt(i,i,S),rt(i,i,y)}else rt(i,i,y),Tt(i,i,et(360*x/d[0]*m),C);lt(p.getDirectionOfProjection(),C,o),Tt(i,i,et(-360*g/d[1]*m),o),s[0]=-y[0],s[1]=-y[1],s[2]=-y[2],rt(i,i,s),be(n,h,i),be(r,v,i),c[0]=C[0]+h[0],c[1]=C[1]+h[1],c[2]=C[2]+h[2],be(a,c,i),p.setPosition(n[0],n[1],n[2]),p.setFocalPoint(r[0],r[1],r[2]),p.setViewUp(a[0]-n[0],a[1]-n[1],a[2]-n[2]),p.orthogonalizeViewUp(),f.resetCameraClippingRange(),u.getLightFollowCamera()&&f.updateLightsGeometryToFollowCamera(),e.previousPosition=l}}}var cN={useWorldUpVec:!1,worldUpVec:[0,1,0],useFocalPointAsCenterOfRotation:!1};function Ig(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,cN,n),B.obj(t,e),fa.extend(t,e,n),pa.extend(t,e,n),B.setGet(t,e,["useWorldUpVec"]),B.setGetArray(t,e,["worldUpVec"],3),B.setGet(t,e,["useFocalPointAsCenterOfRotation"]),uN(t,e)}var fN=B.newInstance(Ig,"vtkMouseCameraTrackballRotateManipulator"),jg={newInstance:fN,extend:Ig};function lN(t,e){e.classHierarchy.push("vtkMouseCameraTrackballRollManipulator");var n=new Float64Array(3),r=new Float64Array(3),a=new Float64Array(3),i=new Float64Array(16),o=new Float64Array(3),s=new Float64Array(3),c=new Float64Array(3);t.onButtonDown=function(u,f,l){e.previousPosition=l},t.onMouseMove=function(u,f,l){if(l){var p=f.getActiveCamera(),h=p.getPosition(),v=p.getFocalPoint(),y=p.getViewUp();n[0]=v[0]-h[0],n[1]=v[1]-h[1],n[2]=v[2]-h[2],t.computeDisplayCenter(u.getInteractorStyle(),f);var m=e.previousPosition.x-e.displayCenter[0],x=l.x-e.displayCenter[0],g=e.previousPosition.y-e.displayCenter[1],d=l.y-e.displayCenter[1];if(!(x===0&&d===0||m===0&&g===0)){var C=Aa((m*d-g*x)/(Math.sqrt(m*m+g*g)*Math.sqrt(x*x+d*d))),S=e.center;Oe(i),a[0]=-S[0],a[1]=-S[1],a[2]=-S[2],rt(i,i,S),Tt(i,i,et(C),n),rt(i,i,a),be(o,h,i),be(s,v,i),r[0]=y[0]+h[0],r[1]=y[1]+h[1],r[2]=y[2]+h[2],be(c,r,i),p.setPosition(o[0],o[1],o[2]),p.setFocalPoint(s[0],s[1],s[2]),p.setViewUp(c[0]-o[0],c[1]-o[1],c[2]-o[2]),p.orthogonalizeViewUp(),f.resetCameraClippingRange(),u.getLightFollowCamera()&&f.updateLightsGeometryToFollowCamera(),e.previousPosition=l}}}}var pN={};function zg(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,pN,n),B.obj(t,e),pa.extend(t,e,n),fa.extend(t,e,n),lN(t,e)}var hN=B.newInstance(zg,"vtkMouseCameraTrackballRollManipulator"),Wg={newInstance:hN,extend:zg};function vN(t,e){return t<e?e:t}function Hg(t){return t*t}function gN(t,e){e.classHierarchy.push("vtkMouseCameraTrackballMultiRotateManipulator");var n=jg.newInstance(),r=Wg.newInstance(),a=null;t.onButtonDown=function(i,o,s){var c=i.getView().getViewportSize(o),u=[.5*c[0],.5*c[1]],f=.9*vN(u[0],u[1]),l=Hg(u[0]-s.x)+Hg(u[1]-s.y);f*f>l?a=n:a=r,a.setButton(t.getButton()),a.setShift(t.getShift()),a.setControl(t.getControl()),a.setCenter(t.getCenter()),a.onButtonDown(i,s)},t.onButtonUp=function(i){a&&a.onButtonUp(i)},t.onMouseMove=function(i,o,s){a&&a.onMouseMove(i,o,s)}}var dN={};function $g(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dN,n),B.obj(t,e),fa.extend(t,e,n),pa.extend(t,e,n),gN(t,e)}var yN=B.newInstance($g,"vtkMouseCameraTrackballMultiRotateManipulator"),mN={newInstance:yN,extend:$g};function xN(t,e){e.classHierarchy.push("vtkMouseCameraTrackballPanManipulator"),t.onButtonDown=function(n,r,a){e.previousPosition=a},t.onMouseMove=function(n,r,a){if(a){var i=a,o=e.previousPosition;e.previousPosition=a;var s=r.getActiveCamera(),c=s.getPosition(),u=s.getFocalPoint();if(s.getParallelProjection()){s.orthogonalizeViewUp();var f=s.getViewUp(),l=s.getViewPlaneNormal(),p=[0,0,0];lt(l,f,p);var h=n.getView().getViewportSize(r)[1],v=(i.x-o.x)/h,y=(o.y-i.y)/h,m=s.getParallelScale();v*=m*2,y*=m*2;var x=p[0]*v+f[0]*y;c[0]+=x,u[0]+=x,x=p[1]*v+f[1]*y,c[1]+=x,u[1]+=x,x=p[2]*v+f[2]*y,c[2]+=x,u[2]+=x,s.setPosition(c[0],c[1],c[2]),s.setFocalPoint(u[0],u[1],u[2])}else{var g=e.center,d=n.getInteractorStyle(),C=d.computeWorldToDisplay(r,g[0],g[1],g[2])[2],S=d.computeDisplayToWorld(r,i.x,i.y,C),T=d.computeDisplayToWorld(r,o.x,o.y,C),w=[c[0]+(T[0]-S[0]),c[1]+(T[1]-S[1]),c[2]+(T[2]-S[2])],E=[u[0]+(T[0]-S[0]),u[1]+(T[1]-S[1]),u[2]+(T[2]-S[2])];s.setPosition(w[0],w[1],w[2]),s.setFocalPoint(E[0],E[1],E[2])}r.resetCameraClippingRange(),n.getLightFollowCamera()&&r.updateLightsGeometryToFollowCamera()}}}var CN={};function Kg(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,CN,n),B.obj(t,e),pa.extend(t,e,n),fa.extend(t,e,n),xN(t,e)}var SN=B.newInstance(Kg,"vtkMouseCameraTrackballPanManipulator"),TN={newInstance:SN,extend:Kg};function wN(t,e){e.classHierarchy.push("vtkMouseCameraTrackballZoomManipulator"),t.onButtonDown=function(n,r,a){e.previousPosition=a;var i=n.getView().getViewportSize(r),o=r.getActiveCamera(),s=e.flipDirection?-1:1;if(o.getParallelProjection())e.zoomScale=1.5/i[1]*s;else{var c=o.getClippingRange();e.zoomScale=1.5*(c[1]/i[1])*s}},t.onMouseMove=function(n,r,a){if(a){var i=e.previousPosition.y-a.y,o=r.getActiveCamera();if(o.getParallelProjection()){var s=i*e.zoomScale;o.setParallelScale((1-s)*o.getParallelScale())}else{var c=o.getPosition(),u=o.getFocalPoint(),f=o.getDirectionOfProjection(),l=i*e.zoomScale,p=l*f[0];c[0]+=p,u[0]+=p,p=l*f[1],c[1]+=p,u[1]+=p,p=l*f[2],c[2]+=p,u[2]+=p,o.getFreezeFocalPoint()||o.setFocalPoint(u[0],u[1],u[2]),o.setPosition(c[0],c[1],c[2]),r.resetCameraClippingRange()}n.getLightFollowCamera()&&r.updateLightsGeometryToFollowCamera(),e.previousPosition=a}},t.onScroll=function(n,r,a){if(a){var i=r.getActiveCamera(),o=1-a/10;i.getParallelProjection()?i.setParallelScale(i.getParallelScale()/o):(i.dolly(o),r.resetCameraClippingRange()),n.getLightFollowCamera()&&r.updateLightsGeometryToFollowCamera()}}}var EN={zoomScale:0,flipDirection:!1};function Xg(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,EN,n),B.obj(t,e),fa.extend(t,e,n),pa.extend(t,e,n),B.setGet(t,e,["flipDirection"]),wN(t,e)}var DN=B.newInstance(Xg,"vtkMouseCameraTrackballZoomManipulator"),qg={newInstance:DN,extend:Xg};function ON(t,e){e.classHierarchy.push("vtkMouseCameraTrackballZoomToMouseManipulator");var n=t.onButtonDown;t.onButtonDown=function(r,a,i){n(r,a,i),e.zoomPosition=i},t.onMouseMove=function(r,a,i){if(i){var o=e.previousPosition.y-i.y,s=o*e.zoomScale;la.dollyToPosition(1-s,e.zoomPosition,a,r),r.getLightFollowCamera()&&a.updateLightsGeometryToFollowCamera(),e.previousPosition=i}},t.onScroll=function(r,a,i,o){if(!(!i||!o)){var s=1-i*.1;la.dollyToPosition(s,o,a,r),r.getLightFollowCamera()&&a.updateLightsGeometryToFollowCamera()}}}var _N={zoomPosition:null};function Yg(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_N,n),qg.extend(t,e,n),ON(t,e)}var bN=B.newInstance(Yg,"vtkMouseCameraTrackballZoomToMouseManipulator"),MN={newInstance:bN,extend:Yg};function NN(t,e){e.classHierarchy.push("vtkCompositeGestureManipulator"),t.startInteraction=function(){},t.endInteraction=function(){},t.onStartPinch=function(n,r){},t.onStartRotate=function(n,r){},t.onStartPan=function(n,r){},t.onPinch=function(n,r,a){},t.onRotate=function(n,r,a){},t.onPan=function(n,r,a){},t.onEndPinch=function(n){},t.onEndRotate=function(n){},t.onEndPan=function(n){},t.isPinchEnabled=function(){return e.pinchEnabled},t.isPanEnabled=function(){return e.panEnabled},t.isRotateEnabled=function(){return e.rotateEnabled}}var RN={pinchEnabled:!0,panEnabled:!0,rotateEnabled:!0};function LN(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,RN,n),B.set(t,e,["pinchEnabled","panEnabled","rotateEnabled"]),B.setGet(t,e,["interactorStyle"]),NN(t,e)}var kN={extend:LN};function FN(t,e){e.classHierarchy.push("vtkGestureCameraManipulator"),t.onStartPinch=function(n,r){e.previousScale=r},t.onStartRotate=function(n,r){e.previousRotation=r},t.onStartPan=function(n,r){e.previousTranslation=r},t.onPinch=function(n,r,a){la.dollyByFactor(n,r,a/e.previousScale),e.previousScale=a},t.onPan=function(n,r,a){var i=r.getActiveCamera(),o=n.getInteractorStyle(),s=i.getFocalPoint();s=o.computeWorldToDisplay(r,s[0],s[1],s[2]);var c=s[2],u=a,f=e.previousTranslation,l=o.computeDisplayToWorld(r,s[0]+u[0]-f[0],s[1]+u[1]-f[1],c),p=o.computeDisplayToWorld(r,s[0],s[1],c),h=[];h[0]=p[0]-l[0],h[1]=p[1]-l[1],h[2]=p[2]-l[2],s=i.getFocalPoint();var v=i.getPosition();i.setFocalPoint(h[0]+s[0],h[1]+s[1],h[2]+s[2]),i.setPosition(h[0]+v[0],h[1]+v[1],h[2]+v[2]),n.getLightFollowCamera()&&r.updateLightsGeometryToFollowCamera(),i.orthogonalizeViewUp(),e.previousTranslation=a},t.onRotate=function(n,r,a){var i=r.getActiveCamera();i.roll(a-e.previousRotation),i.orthogonalizeViewUp(),e.previousRotation=a}}var AN={};function Jg(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,AN,n),B.obj(t,e),kN.extend(t,e,n),pa.extend(t,e,n),FN(t,e)}var VN=B.newInstance(Jg,"vtkGestureCameraManipulator"),BN={newInstance:VN,extend:Jg};const Zg=["focalPoint","parallelProjection","parallelScale","position","viewAngle","viewUp"],UN={None:null,Pan:TN,Zoom:qg,Roll:Wg,Rotate:jg,MultiRotate:mN,ZoomToMouse:MN,Select:Ev};function Qg(t,e,n){t.removeAllMouseManipulators(),e.forEach(r=>{const a=UN[r.action];if(a){const{button:i,shift:o,control:s,alt:c,scrollEnabled:u,dragEnabled:f}=r,l=a.newInstance();l.setButton(i),l.setShift(!!o),l.setControl(!!s),l.setAlt(!!c),u!==void 0&&l.setScrollEnabled(u),f!==void 0&&l.setDragEnabled(f),t.addMouseManipulator(l),l.onBoxSelectChange&&n&&l.onBoxSelectChange(n)}}),t.addGestureManipulator(BN.newInstance())}class GN{constructor(e){this.readyRef=e,this.count=0,this.start=()=>{this.count++,this.readyRef.value&&(this.readyRef.value=!1)},this.stop=()=>{this.count--,this.count===0&&(this.readyRef.value=!0)},this.reset=()=>this.count=0}async wrap(e){this.start();try{await e}finally{setTimeout(this.stop,1)}return e}}class PN{constructor(e,n,r,a){this.vueCtx=a,this.container=null,this.rwId=0,this.mtime=0,this.busy=new GN(a.ready),this.renderer=null,this.activeCamera=null,this.subscriptions=[],this.ctx=Og.getSynchronizerContext(e),this.ctx.setFetchArrayFunction((i,o=!0)=>(this.render(),this.busy.wrap(n(i,o)))),this.renderWindow=Og.newInstance({synchronizerContext:this.ctx}),this.openglRenderWindow=Pg.newInstance({cursor:"default"}),this.renderWindow.addView(this.openglRenderWindow),this.interactor=jo.newInstance(),this.interactor.setView(this.openglRenderWindow),this.interactor.initialize(),r.forEach(i=>{const o=`on${i}`;this.subscriptions.push(this.interactor[o](s=>this.vueCtx.emit(i,s)))}),this.style=la.newInstance(),this.interactor.setInteractorStyle(this.style),this.render=on(()=>{this.renderer&&this.renderer.resetCameraClippingRange(),this.renderWindow.render()},0)}setContainer(e){this.container=e,this.openglRenderWindow.setContainer(e),this.interactor.bindEvents(e),this.resize(),this.resetCamera()}setSynchronizedViewId(e){const n=this.renderWindow.getRenderersByReference();for(;n.length;)n.pop();this.renderWindow.setSynchronizedViewId(e),this.rwId=e}async updateViewState(e){this.renderWindow.getInteractor().setEnableRender(!1),this.vueCtx.emit("beforeSceneLoaded"),this.mtime=Math.max(this.mtime,e.mtime)+1,this.busy.reset(),this.busy.start(),e.mtime=this.mtime;const n=this.renderWindow.synchronize(e);n&&(this.renderWindow.getRenderersByReference().length&&([this.renderer]=this.renderWindow.getRenderersByReference(),this.activeCamera=this.renderer.getActiveCamera()),e.extra&&e.extra.camera&&this.activeCamera&&this.ctx.registerInstance(e.extra.camera,this.activeCamera)),await n&&(e.extra&&(e.extra.camera&&(this.remoteCamera=this.ctx.getInstance(e.extra.camera),this.remoteCamera&&this.style.setCenterOfRotation(this.remoteCamera.getFocalPoint())),e.extra.centerOfRotation&&this.style.setCenterOfRotation(e.extra.centerOfRotation),e.extra.resetCamera&&this.resetCamera()),this.vueCtx.nextTick(this.render),this.vueCtx.emit("viewStateChange",e),this.busy.stop(),this.vueCtx.emit("afterSceneLoaded"),this.renderWindow.getInteractor().setEnableRender(!0))}resize(){if(this.container){const e=window.devicePixelRatio||1,{width:n,height:r}=this.container.getBoundingClientRect();this.openglRenderWindow.setSize(Math.floor(Math.max(n*e,10)),Math.floor(Math.max(r*e,10))),this.vueCtx.nextTick(this.render),this.vueCtx.emit("resize")}}resetCamera(){this.renderer&&(this.renderer.resetCamera(),this.style.setCenterOfRotation(this.renderer.getActiveCamera().getFocalPoint()),this.vueCtx.nextTick(this.render),this.vueCtx.emit("resetCamera"))}getCamera(){const e=this.style.getCenterOfRotation();return this.activeCamera=this.interactor.getCurrentRenderer().getActiveCamera(),{centerOfRotation:e,...this.activeCamera.get("position","focalPoint","viewUp","parallelProjection","parallelScale","viewAngle")}}setCamera(e){if(this.activeCamera){const n={};Zg.forEach(r=>{e[r]&&(n[r]=e[r])}),this.activeCamera.set(n),e.centerOfRotation&&this.style.setCenterOfRotation(e.centerOfRotation),this.vueCtx.nextTick(this.render)}}updateStyle(e,n){Qg(this.style,e,n)}captureImage(e,n){return this.renderWindow.captureImages(e,n)[0]}beforeDelete(){for(this.render.cancel();this.subscriptions.length;)this.subscriptions.pop().unsubscribe();this.interactor.unbindEvents(),this.openglRenderWindow.setContainer(null),this.renderWindow.removeRenderer(this.renderer),this.renderWindow.removeView(this.openglRenderWindow),this.interactor.delete(),this.interactor=null,this.renderer=null,this.renderWindow.delete(),this.renderWindow=null,this.openglRenderWindow.delete(),this.openglRenderWindow=null}}function e2(t){let e=!1;function n(){e=!0}function r(){e=!1}function a(i){if(e)switch(i.code){case"KeyR":t.resetCamera();break}}return{onEnter:n,onLeave:r,onKeyUp:a}}class IN{constructor(e,n,r,a,i){this.vueCtx=i,this.pickingModes=n,this.renderWindow=bu.newInstance(),this.renderer=Bv.newInstance({background:e}),this.renderWindow.addRenderer(this.renderer),this.activeCamera=this.renderer.getActiveCamera(),this.activeCamera.set(this.camera),this.openglRenderWindow=Pg.newInstance({cursor:"default"}),this.renderWindow.addView(this.openglRenderWindow),this.interactor=jo.newInstance(),this.interactor.setView(this.openglRenderWindow),this.interactor.initialize(),this.subscriptions=[],a.forEach(u=>{const f=`on${u}`;this.subscriptions.push(this.interactor[f](l=>this.vueCtx.emit(u,l)))}),this.style=la.newInstance(),this.interactor.setInteractorStyle(this.style),this.selector=wo.newInstance({captureZValues:!0}),this.selector.setFieldAssociation(n1.FIELD_ASSOCIATION_POINTS),this.selector.attach(this.openglRenderWindow,this.renderer),this.render=on(()=>{this.renderer.resetCameraClippingRange(),this.renderWindow.render()},1),this.cubeAxes=G0.newInstance({dataBounds:[-1,1,-1,1,-1,1],visibility:!1}),this.cubeAxes.setVisibility(!1),this.cubeAxes.getActors().forEach(({setVisibility:u})=>u(!1)),this.cubeAxes.setCamera(this.activeCamera),this.renderer.addActor(this.cubeAxes);const o=Ve.newInstance({bounds:[0,0,0,0,0,0]});this.updateCubeBounds=()=>{o.reset();const{props:u}=this.renderer.get("props");for(let f=0;f<u.length;f++){const l=u[f];l.getVisibility()&&l.getUseBounds()&&l!==this.cubeAxes&&o.addBounds(...l.getBounds())}this.cubeAxes.setDataBounds(o.getBounds())},this.debouncedCubeBounds=on(this.updateCubeBounds,50),this.subscriptions=[],this.subscriptions.push(this.renderer.onEvent(({type:u,renderer:f})=>{f&&u==="ComputeVisiblePropBoundsEvent"&&this.debouncedCubeBounds()}));const s=({x:u,y:f})=>{if(!this.pickingModes.includes("click"))return;const l=this.pick(u,f,u,f);this.vueCtx.emit("click",l[0])};this.debouncedHover=on(({x:u,y:f})=>{if(!this.pickingModes.includes("hover"))return;const l=this.pick(u,f,u,f);this.lastSelection.length===0&&l.length===0||(this.lastSelection=l,this.vueCtx.emit("hover",l[0]))},10);const c=({selection:u})=>{if(!this.pickingModes.includes("select"))return;const[f,l,p,h]=u,v=this.pick(f,p,l,h);this.vueCtx.emit("select",v)};this.onClick=u=>s(this.getScreenEventPositionFor(u)),this.onMouseMove=u=>this.debouncedHover(this.getScreenEventPositionFor(u)),this.lastSelection=[],this.onBoxSelectChange=c,this.updateStyle(r)}setContainer(e){this.container=e,this.openglRenderWindow.setContainer(e),this.interactor.bindEvents(e),this.resize(),this.resetCamera(),this.resetCameraTimeout=setTimeout(()=>this.resetCamera(),100)}resize(){if(this.container){const e=window.devicePixelRatio||1,{width:n,height:r}=this.container.getBoundingClientRect();this.openglRenderWindow.setSize(Math.floor(Math.max(n*e,10)),Math.floor(Math.max(r*e,10))),this.vueCtx.nextTick(this.render),this.vueCtx.emit("resize")}}resetCamera(){this.renderer&&(this.renderer.resetCamera(),this.style.setCenterOfRotation(this.renderer.getActiveCamera().getFocalPoint()),this.vueCtx.nextTick(this.render),this.vueCtx.emit("resetCamera"))}getCamera(){const e=this.style.getCenterOfRotation();return this.activeCamera=this.interactor.getCurrentRenderer().getActiveCamera(),{centerOfRotation:e,...this.activeCamera.get("position","focalPoint","viewUp","parallelProjection","parallelScale","viewAngle")}}setCamera(e){if(this.activeCamera){const n={};Zg.forEach(r=>{e[r]&&(n[r]=e[r])}),this.activeCamera.set(n),e.centerOfRotation&&this.style.setCenterOfRotation(e.centerOfRotation),this.vueCtx.nextTick(this.render)}}updateStyle(e){Qg(this.style,e,this.onBoxSelectChange)}getScreenEventPositionFor(e){if(!this.container)return;const n=this.container.getBoundingClientRect(),[r,a]=this.openglRenderWindow.getSize(),i=r/n.width,o=a/n.height;return{x:i*(e.clientX-n.left),y:o*(n.height-e.clientY+n.top),z:0}}pick(e,n,r,a){if(this.selector.setArea(e,n,r,a),this.previousSelectedData=null,this.selector.captureBuffers()){if(this.selections=this.selector.generateSelection(e,n,r,a)||[],e!==r||n!==a){const o=[Array.from(this.openglRenderWindow.displayToWorld(e,n,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,n,1,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,a,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,a,1,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(r,n,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(r,n,1,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(r,a,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(r,a,1,this.renderer))],s=[];return this.selections.forEach(c=>{const{prop:u}=c.getProperties(),{representationId:f}=u.get("representationId");f&&s.push(f)}),{frustrum:o,representationIds:s}}const i=[Array.from(this.openglRenderWindow.displayToWorld(e,n,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,n,1,this.renderer))];return this.selections.map(o=>{const{prop:s,compositeID:c,displayPosition:u}=o.getProperties();return{worldPosition:Array.from(this.openglRenderWindow.displayToWorld(u[0],u[1],u[2],this.renderer)),displayPosition:u,compositeID:c,...s.get("representationId"),ray:i}})}return[]}beforeDelete(){for(;this.subscriptions.length;)this.subscriptions.pop().unsubscribe();this.debouncedCubeBounds&&this.debouncedCubeBounds.cancel(),this.debouncedHover&&this.debouncedHover.cancel(),this.render&&this.render.cancel(),clearTimeout(this.resetCameraTimeout),this.interactor.unbindEvents(),this.openglRenderWindow.setContainer(null),this.renderWindow.removeRenderer(this.renderer),this.renderWindow.removeView(this.openglRenderWindow),this.interactor.delete(),this.interactor=null,this.renderer.delete(),this.renderer=null,this.renderWindow.delete(),this.renderWindow=null,this.openglRenderWindow.delete(),this.openglRenderWindow=null}}const Yu={props:{camera:{type:Object,default:null},interactorEvents:{type:Array,default:()=>["EndAnimation"]},interactorSettings:{type:Array,default:()=>[{button:1,action:"Rotate"},{button:2,action:"Pan"},{button:3,action:"Zoom",scrollEnabled:!0},{button:1,action:"Pan",alt:!0},{button:1,action:"Zoom",control:!0},{button:1,action:"Select",shift:!0},{button:1,action:"Roll",alt:!0,shift:!0}]},wsClient:{type:Object},contextName:{type:String,default:"LocalRenderingContext"},viewState:{type:Object},boxSelection:{type:Boolean,default:!1}},emits:["resetCamera","beforeSceneLoaded","afterSceneLoaded","viewStateChange","onReady","resize","onImageCapture","BoxSelection","StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"],setup(t,{emit:e}){var T,w,E,D,b,O;const n=ce.inject("trame"),r=ce.ref(!1),a=ce.ref(null);let i=!1;const o=ce.computed(()=>t.wsClient||(n==null?void 0:n.client));let s=()=>Promise.resolve(null);const c=(w=(T=o.value)==null?void 0:T.getConnection())==null?void 0:w.getSession();c&&(s=(M,R)=>c.call("viewport.geometry.array.get",[M,R])),(D=(E=o.value.getRemote())==null?void 0:E.SyncView)!=null&&D.getArray&&(s=(O=(b=o.value.getRemote())==null?void 0:b.SyncView)==null?void 0:O.getArray);const u=new PN(t.contextName,s,t.interactorEvents,{emit:e,nextTick:ce.nextTick,ready:r});u.updateStyle(t.interactorSettings,v);const{onEnter:f,onLeave:l,onKeyUp:p}=e2(u),h=new ResizeObserver(()=>u.resize());function v({container:M,selection:R}){!t.boxSelection||!M||e("BoxSelection",{selection:R,mode:"local",size:u.openglRenderWindow.getSize(),camera:u.getCamera()})}ce.watch(r,M=>{e("onReady",M)}),ce.watch(()=>t.interactorSettings,()=>u.updateStyle(t.interactorSettings,v)),ce.watch(()=>t.viewState,({id:M})=>{M===i&&(i=!1,u.updateViewState(t.viewState))});let y=null;return ce.onMounted(()=>{const M=a.value;u.setContainer(M),h.observe(M),document.addEventListener("keyup",p),t.viewState&&(u.rwId=t.viewState.id,u.updateViewState(t.viewState)),y=o.value.getConnection().getSession().subscribe("trame.vtk.delta",([R])=>{R.id===u.rwId&&u.updateViewState(R)})}),ce.onBeforeUnmount(()=>{u.beforeDelete(),y&&o.value&&(o.value.getConnection().getSession().unsubscribe(y),y=null),document.removeEventListener("keyup",p),h.disconnect()}),ce.provide("view",u),{vtkContainer:a,onEnter:f,onLeave:l,resetCamera:()=>u.resetCamera(),getCamera:()=>u.getCamera(),setCamera:M=>u.setCamera(M),setSynchronizedViewId:M=>{i=M,typeof t.viewState.id=="number"&&(i=Number(i)),u.setSynchronizedViewId(i)},resize:()=>u.resize(),captureImage:async(M="image/png",R={})=>{const N=await u.captureImage(M,R),W=await(await fetch(N)).blob();return e("onImageCapture",W),W}}},template:`
        <div
            style="position:relative;width:100%;height:100%;"
            @mouseenter="onEnter"
            @mouseleave="onLeave"
        >
            <div
              ref="vtkContainer"
              style="position:absolute;width:100%;height:100%;overflow:hidden;"
            />
            <slot style="display: none;"></slot>
        </div>
    `},t2={position:"absolute !important",left:"-20000px"},r2={position:"absolute !important",left:0},n2={VtkAlgorithm:LD,VtkCalculator:UD,VtkCellData:Hh,VtkDataArray:Kh,VtkFieldData:PD,VtkGeometryRepresentation:rO,VtkGlyphRepresentation:fO,VtkMesh:pO,VtkPointData:ov,VtkPolydata:iv,VtkReader:hO,VtkRemoteLocalView:{components:{VtkRemoteView:_v,VtkSyncView:Yu},emits:["resetCamera","beforeSceneLoaded","afterSceneLoaded","viewStateChange","onReady","resize","onLocalImageCapture","onRemoteImageCapture","BoxSelection","StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"],props:{mode:{type:String,default:"local"},disableAutoSwitch:{type:Boolean,default:!1},namespace:{type:String,default:""},refPrefix:{type:String,default:"refName"},viewId:{type:String,default:"-1"},wsClient:{type:Object},interactiveRatio:{type:[Number,String]},interactiveQuality:{type:[Number,String]},stillRatio:{type:[Number,String]},stillQuality:{type:[Number,String]},camera:{type:Object,default:null},interactorEvents:{type:Array,default:()=>["EndAnimation"]},interactorSettings:{type:Array,default:()=>[{button:1,action:"Rotate"},{button:2,action:"Pan"},{button:3,action:"Zoom",scrollEnabled:!0},{button:1,action:"Pan",shift:!0},{button:1,action:"Zoom",alt:!0},{button:1,action:"Zoom",control:!0},{button:1,action:"Roll",alt:!0,shift:!0}]},contextName:{type:String,default:"LocalRenderingContext"},enablePicking:{type:Boolean,default:!1},boxSelection:{type:Boolean,default:!1},viewState:{type:Object}},setup(t,{emit:e}){const n=ce.inject("trame"),r=ce.ref(!1),a=ce.ref(null),i=ce.ref(null),o=ce.computed(()=>t.disableAutoSwitch||r.value),s=ce.computed(()=>t.mode==="local"&&o.value),c=ce.computed(()=>t.mode==="remote"||!o.value),u=ce.computed(()=>s.value?r2:t2),f=ce.computed(()=>c.value?r2:t2),l=ce.computed(()=>t.namespace?`${t.namespace}Camera`:"camera");function p(){return t.mode==="local"&&o.value?a.value.resetCamera():i.value.resetCamera()}function h(){return a.value.getCamera()}function v(d){return a.value.setCamera(d)}async function y(d="image/png",C={}){a.value.captureImage(d,C),i.value.captureImage()}function m(){a.value.resize(),i.value.resize()}ce.watch(()=>t.viewId,d=>a.value.setSynchronizedViewId(d));function x(d,C=[],S={}){return n.trigger(d,C,S)}function g(d){r.value=d}return{computedLocalRenderingReady:o,onReady:g,localViewRef:a,remoteViewRef:i,trigger:x,getCamera:h,setCamera:v,resize:m,resetCamera:p,cameraKey:l,localStyle:u,remoteStyle:f,emit:e,captureImage:y}},template:`
        <div style="position:relative;width:100%;height:100%;z-index:0;">
          <vtk-sync-view
            ref="localViewRef"

            :viewId="viewId"
            :wsClient="wsClient"
            :style="localStyle"

            :camera="camera"
            :interactorEvents="interactorEvents"
            :interactorSettings="interactorSettings"
            :contextName="contextName"
            :boxSelection="boxSelection"

            :viewState="viewState"

            @resetCamera="trigger(cameraKey, [getCamera()])"
            @beforeSceneLoaded="onReady(false)"
            @onReady="onReady($event)"

            @onImageCapture="emit('onLocalImageCapture', $event)"

            @BoxSelection="emit('BoxSelection', $event)"
            @StartAnimation="emit('StartAnimation', $event)"
            @Animation="emit('Animation', $event)"
            @EndAnimation="trigger(cameraKey, [getCamera()]); emit('EndAnimation', $event)"
            @MouseEnter="emit('MouseEnter', $event)"
            @MouseLeave="emit('MouseLeave', $event)"
            @StartMouseMove="emit('StartMouseMove', $event)"
            @MouseMove="emit('MouseMove', $event)"
            @EndMouseMove="emit('EndMouseMove', $event)"
            @LeftButtonPress="emit('LeftButtonPress', $event)"
            @LeftButtonRelease="emit('LeftButtonRelease', $event)"
            @MiddleButtonPress="emit('MiddleButtonPress', $event)"
            @MiddleButtonRelease="emit('MiddleButtonRelease', $event)"
            @RightButtonPress="emit('RightButtonPress', $event)"
            @RightButtonRelease="emit('RightButtonRelease', $event)"
            @KeyPress="emit('KeyPress', $event)"
            @KeyDown="emit('KeyDown', $event)"
            @KeyUp="emit('KeyUp', $event)"
            @StartMouseWheel="emit('StartMouseWheel', $event)"
            @MouseWheel="emit('MouseWheel', $event)"
            @EndMouseWheel="emit('EndMouseWheel', $event)"
            @StartPinch="emit('StartPinch', $event)"
            @Pinch="emit('Pinch', $event)"
            @EndPinch="emit('EndPinch', $event)"
            @StartPan="emit('StartPan', $event)"
            @Pan="emit('Pan', $event)"
            @EndPan="emit('EndPan', $event)"
            @StartRotate="emit('StartRotate', $event)"
            @Rotate="emit('Rotate', $event)"
            @EndRotate="emit('EndRotate', $event)"
            @Button3D="emit('Button3D', $event)"
            @Move3D="emit('Move3D', $event)"
            @StartPointerLock="emit('StartPointerLock', $event)"
            @EndPointerLock="emit('EndPointerLock', $event)"
            @StartInteraction="emit('StartInteraction', $event)"
            @Interaction="emit('Interaction', $event)"
            @EndInteraction="emit('EndInteraction', $event)"
          >
            <slot></slot>
          </vtk-sync-view>
          <vtk-remote-view
            ref="remoteViewRef"

            :viewId="viewId"
            :wsClient="wsClient"
            :style="remoteStyle"
            :visible="mode === 'remote' || !computedLocalRenderingReady"

            @onImageCapture="emit('onRemoteImageCapture', $event)"

            @onEndAnimation="trigger(cameraKey)"

            :interactiveRatio="interactiveRatio"
            :interactiveQuality="interactiveQuality"
            :stillRatio="stillRatio"
            :stillQuality="stillQuality"
            :boxSelection="boxSelection"
            :enablePicking="enablePicking"

            @BoxSelection="emit('BoxSelection', $event)"
          />
        </div>
  `},VtkRemoteView:_v,VtkSyncView:Yu,VtkLocalView:Yu,VtkView:{props:{background:{type:Array,default:()=>[.2,.3,.4]},camera:{type:Object,default:null},interactorEvents:{type:Array,default:()=>["EndAnimation"]},interactorSettings:{type:Array,default:()=>[{button:1,action:"Rotate"},{button:2,action:"Pan"},{button:3,action:"Zoom",scrollEnabled:!0},{button:1,action:"Pan",alt:!0},{button:1,action:"Zoom",control:!0},{button:1,action:"Select",shift:!0},{button:1,action:"Roll",alt:!0,shift:!0}]},pickingModes:{type:Array,default:()=>[]},showCubeAxes:{type:Boolean,default:!1},cubeAxesStyle:{type:Object,default:()=>({})}},emits:["resize","resetCamera","BoxSelection","StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"],setup(t,{emit:e}){const n=ce.ref(null),r=new IN(t.background,t.pickingModes,t.interactorSettings,t.interactorEvents,{emit:e,nextTick:ce.nextTick}),{onEnter:a,onLeave:i,onKeyUp:o}=e2(r),s=new ResizeObserver(()=>r.resize());ce.onMounted(()=>{const l=n.value;r.setContainer(l),s.observe(l),document.addEventListener("keyup",o)}),ce.onBeforeUnmount(()=>{r.beforeDelete(),document.removeEventListener("keyup",o),s.disconnect()}),ce.watch(()=>t.interactorSettings,()=>r.updateStyle(t.interactorSettings)),ce.watch(()=>t.pickingModes,()=>r.pickingModes=t.pickingModes),ce.provide("view",r);const{onClick:c,onMouseMove:u}=r;return{vtkContainer:n,onEnter:a,onLeave:i,onClick:c,onMouseMove:u,resetCamera:()=>r.resetCamera()}},template:`
        <div
          style="position:relative;width:100%;height:100%;"
          @mouseenter="onEnter"
          @mouseleave="onLeave"
          @click="onClick"
          @mousemove="onMouseMove"
        >
          <div
            ref="vtkContainer"
            style="position:absolute;width:100%;height:100%;overflow:hidden;"
          />
          <slot style="display: none;"></slot>
        </div>
      `}};function jN(){return yu.rgbPresetNames}function a2(t){return t.split("_").map(e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`).join(" ")}function i2(t){return t.map(e=>({text:a2(e),value:e}))}function zN(){return i2(yu.rgbPresetNames)}const ha={vtkColorPresetNames:jN,vtkLabel:a2,ListToItem:i2,vtkColorPresetItems:zN};function WN(t){var e,n;Object.keys(n2).forEach(r=>{t.component(r,n2[r])}),(n=(e=window==null?void 0:window.trame)==null?void 0:e.utils)!=null&&n.vtk&&Object.keys(ha).forEach(r=>{window.trame.utils.vtk[r]=ha[r]})}const HN=ha.vtkColorPresetNames,$N=ha.vtkLabel,KN=ha.ListToItem,XN=ha.vtkColorPresetItems;Xt.ListToItem=KN,Xt.install=WN,Xt.vtkColorPresetItems=XN,Xt.vtkColorPresetNames=HN,Xt.vtkLabel=$N,Object.defineProperty(Xt,Symbol.toStringTag,{value:"Module"})});
